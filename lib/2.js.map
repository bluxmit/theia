{"version":3,"file":"2.js","mappings":"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","sources":["webpack:///./node_modules/@phosphor/coreutils/lib/index.js?","webpack:///./node_modules/@phosphor/coreutils/lib/json.js?","webpack:///./node_modules/@phosphor/coreutils/lib/mime.js?","webpack:///./node_modules/@phosphor/coreutils/lib/promise.js?","webpack:///./node_modules/@phosphor/coreutils/lib/random.js?","webpack:///./node_modules/@phosphor/coreutils/lib/token.js?","webpack:///./node_modules/@phosphor/coreutils/lib/uuid.js?","webpack:///./node_modules/@theia/core/src/browser/endpoint.ts?","webpack:///./node_modules/@theia/core/src/common/buffer.ts?","webpack:///./node_modules/@theia/core/src/common/cancellation.ts?","webpack:///./node_modules/@theia/core/src/common/disposable.ts?","webpack:///./node_modules/@theia/core/src/common/event.ts?","webpack:///./node_modules/@theia/core/src/common/glob.ts?","webpack:///./node_modules/@theia/core/src/common/markdown-rendering/icon-utilities.ts?","webpack:///./node_modules/@theia/core/src/common/markdown-rendering/index.ts?","webpack:///./node_modules/@theia/core/src/common/markdown-rendering/markdown-string.ts?","webpack:///./node_modules/@theia/core/src/common/os.ts?","webpack:///./node_modules/@theia/core/src/common/path.ts?","webpack:///./node_modules/@theia/core/src/common/paths.ts?","webpack:///./node_modules/@theia/core/src/common/promise-util.ts?","webpack:///./node_modules/@theia/core/src/common/severity.ts?","webpack:///./node_modules/@theia/core/src/common/stream.ts?","webpack:///./node_modules/@theia/core/src/common/strings.ts?","webpack:///./node_modules/@theia/core/src/common/uri.ts?","webpack:///./node_modules/@theia/core/shared/@phosphor/coreutils/index.js?","webpack:///./node_modules/@theia/core/shared/vscode-languageserver-protocol/index.js?","webpack:///./node_modules/@theia/core/shared/vscode-uri/index.js?","webpack:///./node_modules/@theia/debug/src/common/debug-adapter-session.ts?","webpack:///./node_modules/@theia/debug/src/common/debug-uri-utils.ts?","webpack:///./node_modules/@theia/debug/src/common/inline-debug-adapter.ts?","webpack:///./node_modules/@theia/debug/src/node/stream-debug-adapter.ts?","webpack:///./node_modules/@theia/editor/src/common/language-selector.ts?","webpack:///./node_modules/@theia/filesystem/src/common/files.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/arrays.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/assert.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/cache.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/cancellation.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/errors.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/event.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/extpath.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/functional.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/iterator.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/json.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/lazy.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/lifecycle.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/linkedList.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/map.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/network.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/objects.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/path.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/platform.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/process.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/resources.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/severity.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/stopwatch.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/strings.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/types.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/base/common/uri.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/nls.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/configuration/common/configuration.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/configuration/common/configurationModels.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/configuration/common/configurationRegistry.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/instantiation/common/instantiation.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/jsonschemas/common/jsonContributionRegistry.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/registry/common/platform.ts?","webpack:///./node_modules/@theia/monaco-editor-core/src/vs/platform/workspace/common/workspace.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/arrays.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/assert.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/character-classifier.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/connection.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/disposable-util.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/editor-options.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/errors.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/id-generator.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/index.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/link-computer.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/object-identifier.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/objects.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/paths-util.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-api-rpc-model.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-api-rpc.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-ext-api-contribution.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-identifiers.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/plugin-protocol.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/rpc-protocol.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/semantic-tokens-dto.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/types.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/uint.ts?","webpack:///./node_modules/@theia/plugin-ext/src/common/uri-components.ts?","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/debug-stub.ts?","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/plugin-manifest-loader.ts?","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-env-ext.ts?","webpack:///./node_modules/@theia/plugin-ext/src/hosted/browser/worker/worker-main.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/authentication-ext.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/clipboard-ext.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/command-registry.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/comments.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/custom-editors.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/debug/debug-ext.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/debug/plugin-debug-adapter-creator.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/debug/plugin-debug-adapter-session.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/debug/plugin-debug-adapter-tracker.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/decorations.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/dialogs.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/document-data.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/documents.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/editors-and-documents.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/env.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/file-system-event-service-ext-impl.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/file-system-ext-impl.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/known-commands.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/label-service.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages-utils.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/call-hierarchy.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/code-action.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/color.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/completion.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/declaration.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/definition.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/diagnostics.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/document-formatting.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/document-highlight.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/evaluatable-expression.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/folding.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/hover.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/implementation.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/lens.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/link-provider.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/linked-editing-range.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/on-type-formatting.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/outline.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/range-formatting.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/reference.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/rename.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/selection-range.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/semantic-highlighting.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/signature.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/type-definition.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/util.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/languages/workspace-symbol.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/markdown-string.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/message-registry.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/node/debug/plugin-node-debug-adapter-creator.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/notification.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/output-channel-registry.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/output-channel/output-channel-item.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/path.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-context.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-icon-path.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-manager.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/plugin-storage.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/preference-registry.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/prefix-sum-computer.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/quick-open.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/scm.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/secrets-ext.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar-message-registry.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/status-bar/status-bar-item.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tasks/task-provider.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tasks/tasks.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/terminal-ext.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/text-editor.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/text-editors.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/theming.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/timeline.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/tree/tree-views.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/type-converters.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/types-impl.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/webview-views.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/webviews.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/window-state.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/word-helper.ts?","webpack:///./node_modules/@theia/plugin-ext/src/plugin/workspace.ts?","webpack:///./node_modules/base64-js/index.js?","webpack:///./node_modules/buffer/index.js?","webpack:///./node_modules/iconv-lite/encodings/dbcs-codec.js?","webpack:///./node_modules/iconv-lite/encodings/dbcs-data.js?","webpack:///./node_modules/iconv-lite/encodings/index.js?","webpack:///./node_modules/iconv-lite/encodings/internal.js?","webpack:///./node_modules/iconv-lite/encodings/sbcs-codec.js?","webpack:///./node_modules/iconv-lite/encodings/sbcs-data-generated.js?","webpack:///./node_modules/iconv-lite/encodings/sbcs-data.js?","webpack:///./node_modules/iconv-lite/encodings/utf16.js?","webpack:///./node_modules/iconv-lite/encodings/utf32.js?","webpack:///./node_modules/iconv-lite/encodings/utf7.js?","webpack:///./node_modules/iconv-lite/lib/bom-handling.js?","webpack:///./node_modules/iconv-lite/lib/index.js?","webpack:///./node_modules/iconv-lite/lib/streams.js?","webpack:///./node_modules/ieee754/index.js?","webpack:///./node_modules/is-electron/index.js?","webpack:///./node_modules/lodash.clonedeep/index.js?","webpack:///./node_modules/path-browserify/index.js?","webpack:///./node_modules/safer-buffer/safer.js?","webpack:///./node_modules/string_decoder/lib/string_decoder.js?","webpack:///./node_modules/string_decoder/node_modules/safe-buffer/index.js?","webpack:///./node_modules/uuid/dist/esm-browser/rng.js?","webpack:///./node_modules/uuid/dist/esm-browser/regex.js?","webpack:///./node_modules/uuid/dist/esm-browser/validate.js?","webpack:///./node_modules/uuid/dist/esm-browser/stringify.js?","webpack:///./node_modules/uuid/dist/esm-browser/v1.js?","webpack:///./node_modules/uuid/dist/esm-browser/parse.js?","webpack:///./node_modules/uuid/dist/esm-browser/v35.js?","webpack:///./node_modules/uuid/dist/esm-browser/md5.js?","webpack:///./node_modules/uuid/dist/esm-browser/v3.js?","webpack:///./node_modules/uuid/dist/esm-browser/v4.js?","webpack:///./node_modules/uuid/dist/esm-browser/sha1.js?","webpack:///./node_modules/uuid/dist/esm-browser/v5.js?","webpack:///./node_modules/uuid/dist/esm-browser/nil.js?","webpack:///./node_modules/uuid/dist/esm-browser/version.js?","webpack:///./node_modules/vscode-jsonrpc/lib/cancellation.js?","webpack:///./node_modules/vscode-jsonrpc/lib/events.js?","webpack:///./node_modules/vscode-jsonrpc/lib/is.js?","webpack:///./node_modules/vscode-jsonrpc/lib/linkedMap.js?","webpack:///./node_modules/vscode-jsonrpc/lib/main.js?","webpack:///./node_modules/vscode-jsonrpc/lib/messageReader.js?","webpack:///./node_modules/vscode-jsonrpc/lib/messageWriter.js?","webpack:///./node_modules/vscode-jsonrpc/lib/messages.js?","webpack:///./node_modules/vscode-jsonrpc/lib/pipeSupport.js?","webpack:///./node_modules/vscode-jsonrpc/lib/socketSupport.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/main.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/messages.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.callHierarchy.proposed.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.colorProvider.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.configuration.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.declaration.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.foldingRange.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.implementation.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.progress.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.selectionRange.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.sematicTokens.proposed.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.typeDefinition.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/protocol.workspaceFolders.js?","webpack:///./node_modules/vscode-languageserver-protocol/lib/utils/is.js?","webpack:///./node_modules/vscode-languageserver-types/lib/esm/main.js?","webpack:///./node_modules/vscode-uri/lib/esm/index.js?"],"sourcesContent":["\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\n__export(require(\"./json\"));\n__export(require(\"./mime\"));\n__export(require(\"./promise\"));\n__export(require(\"./random\"));\n__export(require(\"./token\"));\n__export(require(\"./uuid\"));\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The namespace for JSON-specific functions.\n */\nvar JSONExt;\n(function (JSONExt) {\n    /**\n     * A shared frozen empty JSONObject\n     */\n    JSONExt.emptyObject = Object.freeze({});\n    /**\n     * A shared frozen empty JSONArray\n     */\n    JSONExt.emptyArray = Object.freeze([]);\n    /**\n     * Test whether a JSON value is a primitive.\n     *\n     * @param value - The JSON value of interest.\n     *\n     * @returns `true` if the value is a primitive,`false` otherwise.\n     */\n    function isPrimitive(value) {\n        return (value === null ||\n            typeof value === 'boolean' ||\n            typeof value === 'number' ||\n            typeof value === 'string');\n    }\n    JSONExt.isPrimitive = isPrimitive;\n    function isArray(value) {\n        return Array.isArray(value);\n    }\n    JSONExt.isArray = isArray;\n    function isObject(value) {\n        return !isPrimitive(value) && !isArray(value);\n    }\n    JSONExt.isObject = isObject;\n    /**\n     * Compare two JSON values for deep equality.\n     *\n     * @param first - The first JSON value of interest.\n     *\n     * @param second - The second JSON value of interest.\n     *\n     * @returns `true` if the values are equivalent, `false` otherwise.\n     */\n    function deepEqual(first, second) {\n        // Check referential and primitive equality first.\n        if (first === second) {\n            return true;\n        }\n        // If one is a primitive, the `===` check ruled out the other.\n        if (isPrimitive(first) || isPrimitive(second)) {\n            return false;\n        }\n        // Test whether they are arrays.\n        var a1 = isArray(first);\n        var a2 = isArray(second);\n        // Bail if the types are different.\n        if (a1 !== a2) {\n            return false;\n        }\n        // If they are both arrays, compare them.\n        if (a1 && a2) {\n            return deepArrayEqual(first, second);\n        }\n        // At this point, they must both be objects.\n        return deepObjectEqual(first, second);\n    }\n    JSONExt.deepEqual = deepEqual;\n    /**\n     * Create a deep copy of a JSON value.\n     *\n     * @param value - The JSON value to copy.\n     *\n     * @returns A deep copy of the given JSON value.\n     */\n    function deepCopy(value) {\n        // Do nothing for primitive values.\n        if (isPrimitive(value)) {\n            return value;\n        }\n        // Deep copy an array.\n        if (isArray(value)) {\n            return deepArrayCopy(value);\n        }\n        // Deep copy an object.\n        return deepObjectCopy(value);\n    }\n    JSONExt.deepCopy = deepCopy;\n    /**\n     * Compare two JSON arrays for deep equality.\n     */\n    function deepArrayEqual(first, second) {\n        // Check referential equality first.\n        if (first === second) {\n            return true;\n        }\n        // Test the arrays for equal length.\n        if (first.length !== second.length) {\n            return false;\n        }\n        // Compare the values for equality.\n        for (var i = 0, n = first.length; i < n; ++i) {\n            if (!deepEqual(first[i], second[i])) {\n                return false;\n            }\n        }\n        // At this point, the arrays are equal.\n        return true;\n    }\n    /**\n     * Compare two JSON objects for deep equality.\n     */\n    function deepObjectEqual(first, second) {\n        // Check referential equality first.\n        if (first === second) {\n            return true;\n        }\n        // Check for the first object's keys in the second object.\n        for (var key in first) {\n            if (!(key in second)) {\n                return false;\n            }\n        }\n        // Check for the second object's keys in the first object.\n        for (var key in second) {\n            if (!(key in first)) {\n                return false;\n            }\n        }\n        // Compare the values for equality.\n        for (var key in first) {\n            if (!deepEqual(first[key], second[key])) {\n                return false;\n            }\n        }\n        // At this point, the objects are equal.\n        return true;\n    }\n    /**\n     * Create a deep copy of a JSON array.\n     */\n    function deepArrayCopy(value) {\n        var result = new Array(value.length);\n        for (var i = 0, n = value.length; i < n; ++i) {\n            result[i] = deepCopy(value[i]);\n        }\n        return result;\n    }\n    /**\n     * Create a deep copy of a JSON object.\n     */\n    function deepObjectCopy(value) {\n        var result = {};\n        for (var key in value) {\n            result[key] = deepCopy(value[key]);\n        }\n        return result;\n    }\n})(JSONExt = exports.JSONExt || (exports.JSONExt = {}));\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * An object which stores MIME data for general application use.\n *\n * #### Notes\n * This class does not attempt to enforce \"correctness\" of MIME types\n * and their associated data. Since this class is designed to transfer\n * arbitrary data and objects within the same application, it assumes\n * that the user provides correct and accurate data.\n */\nvar MimeData = /** @class */ (function () {\n    function MimeData() {\n        this._types = [];\n        this._values = [];\n    }\n    /**\n     * Get an array of the MIME types contained within the dataset.\n     *\n     * @returns A new array of the MIME types, in order of insertion.\n     */\n    MimeData.prototype.types = function () {\n        return this._types.slice();\n    };\n    /**\n     * Test whether the dataset has an entry for the given type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * @returns `true` if the dataset contains a value for the given\n     *   MIME type, `false` otherwise.\n     */\n    MimeData.prototype.hasData = function (mime) {\n        return this._types.indexOf(mime) !== -1;\n    };\n    /**\n     * Get the data value for the given MIME type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * @returns The value for the given MIME type, or `undefined` if\n     *   the dataset does not contain a value for the type.\n     */\n    MimeData.prototype.getData = function (mime) {\n        var i = this._types.indexOf(mime);\n        return i !== -1 ? this._values[i] : undefined;\n    };\n    /**\n     * Set the data value for the given MIME type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * @param data - The data value for the given MIME type.\n     *\n     * #### Notes\n     * This will overwrite any previous entry for the MIME type.\n     */\n    MimeData.prototype.setData = function (mime, data) {\n        this.clearData(mime);\n        this._types.push(mime);\n        this._values.push(data);\n    };\n    /**\n     * Remove the data entry for the given MIME type.\n     *\n     * @param mime - The MIME type of interest.\n     *\n     * #### Notes\n     * This is a no-op if there is no entry for the given MIME type.\n     */\n    MimeData.prototype.clearData = function (mime) {\n        var i = this._types.indexOf(mime);\n        if (i !== -1) {\n            this._types.splice(i, 1);\n            this._values.splice(i, 1);\n        }\n    };\n    /**\n     * Remove all data entries from the dataset.\n     */\n    MimeData.prototype.clear = function () {\n        this._types.length = 0;\n        this._values.length = 0;\n    };\n    return MimeData;\n}());\nexports.MimeData = MimeData;\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A class which wraps a promise into a delegate object.\n *\n * #### Notes\n * This class is useful when the logic to resolve or reject a promise\n * cannot be defined at the point where the promise is created.\n */\nvar PromiseDelegate = /** @class */ (function () {\n    /**\n     * Construct a new promise delegate.\n     */\n    function PromiseDelegate() {\n        var _this = this;\n        this.promise = new Promise(function (resolve, reject) {\n            _this._resolve = resolve;\n            _this._reject = reject;\n        });\n    }\n    /**\n     * Resolve the wrapped promise with the given value.\n     *\n     * @param value - The value to use for resolving the promise.\n     */\n    PromiseDelegate.prototype.resolve = function (value) {\n        var resolve = this._resolve;\n        resolve(value);\n    };\n    /**\n     * Reject the wrapped promise with the given value.\n     *\n     * @reason - The reason for rejecting the promise.\n     */\n    PromiseDelegate.prototype.reject = function (reason) {\n        var reject = this._reject;\n        reject(reason);\n    };\n    return PromiseDelegate;\n}());\nexports.PromiseDelegate = PromiseDelegate;\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * The namespace for random number related functionality.\n */\nvar Random;\n(function (Random) {\n    /**\n     * A function which generates random bytes.\n     *\n     * @param buffer - The `Uint8Array` to fill with random bytes.\n     *\n     * #### Notes\n     * A cryptographically strong random number generator will be used if\n     * available. Otherwise, `Math.random` will be used as a fallback for\n     * randomness.\n     *\n     * The following RNGs are supported, listed in order of precedence:\n     *   - `window.crypto.getRandomValues`\n     *   - `window.msCrypto.getRandomValues`\n     *   - `require('crypto').randomFillSync\n     *   - `require('crypto').randomBytes\n     *   - `Math.random`\n     */\n    Random.getRandomValues = (function () {\n        // Look up the crypto module if available.\n        var crypto = ((typeof window !== 'undefined' && (window.crypto || window.msCrypto)) ||\n            (typeof require !== 'undefined' && require('crypto')) || null);\n        // Modern browsers and IE 11\n        if (crypto && typeof crypto.getRandomValues === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.getRandomValues(buffer);\n            };\n        }\n        // Node 7+\n        if (crypto && typeof crypto.randomFillSync === 'function') {\n            return function getRandomValues(buffer) {\n                return crypto.randomFillSync(buffer);\n            };\n        }\n        // Node 0.10+\n        if (crypto && typeof crypto.randomBytes === 'function') {\n            return function getRandomValues(buffer) {\n                var bytes = crypto.randomBytes(buffer.length);\n                for (var i = 0, n = bytes.length; i < n; ++i) {\n                    buffer[i] = bytes[i];\n                }\n            };\n        }\n        // Fallback\n        return function getRandomValues(buffer) {\n            var value = 0;\n            for (var i = 0, n = buffer.length; i < n; ++i) {\n                if (i % 4 === 0) {\n                    value = Math.random() * 0xFFFFFFFF >>> 0;\n                }\n                buffer[i] = value & 0xFF;\n                value >>>= 8;\n            }\n        };\n    })();\n})(Random = exports.Random || (exports.Random = {}));\n","\"use strict\";\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A runtime object which captures compile-time type information.\n *\n * #### Notes\n * A token captures the compile-time type of an interface or class in\n * an object which can be used at runtime in a type-safe fashion.\n */\nvar Token = /** @class */ (function () {\n    /**\n     * Construct a new token.\n     *\n     * @param name - A human readable name for the token.\n     */\n    function Token(name) {\n        this.name = name;\n        this._tokenStructuralPropertyT = null;\n    }\n    return Token;\n}());\nexports.Token = Token;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/*-----------------------------------------------------------------------------\n| Copyright (c) 2014-2017, PhosphorJS Contributors\n|\n| Distributed under the terms of the BSD 3-Clause License.\n|\n| The full license is in the file LICENSE, distributed with this software.\n|----------------------------------------------------------------------------*/\nvar random_1 = require(\"./random\");\n/**\n * The namespace for UUID related functionality.\n */\nvar UUID;\n(function (UUID) {\n    /**\n     * A function which generates UUID v4 identifiers.\n     *\n     * @returns A new UUID v4 string.\n     *\n     * #### Notes\n     * This implementation complies with RFC 4122.\n     *\n     * This uses `Random.getRandomValues()` for random bytes, which in\n     * turn will use the underlying `crypto` module of the platform if\n     * it is available. The fallback for randomness is `Math.random`.\n     */\n    UUID.uuid4 = (function () {\n        // Create a 16 byte array to hold the random values.\n        var bytes = new Uint8Array(16);\n        // Create a look up table from bytes to hex strings.\n        var lut = new Array(256);\n        // Pad the single character hex digits with a leading zero.\n        for (var i = 0; i < 16; ++i) {\n            lut[i] = '0' + i.toString(16);\n        }\n        // Populate the rest of the hex digits.\n        for (var i = 16; i < 256; ++i) {\n            lut[i] = i.toString(16);\n        }\n        // Return a function which generates the UUID.\n        return function uuid4() {\n            // Get a new batch of random values.\n            random_1.Random.getRandomValues(bytes);\n            // Set the UUID version number to 4.\n            bytes[6] = 0x40 | (bytes[6] & 0x0F);\n            // Set the clock sequence bit to the RFC spec.\n            bytes[8] = 0x80 | (bytes[8] & 0x3F);\n            // Assemble the UUID string.\n            return (lut[bytes[0]] +\n                lut[bytes[1]] +\n                lut[bytes[2]] +\n                lut[bytes[3]] +\n                '-' +\n                lut[bytes[4]] +\n                lut[bytes[5]] +\n                '-' +\n                lut[bytes[6]] +\n                lut[bytes[7]] +\n                '-' +\n                lut[bytes[8]] +\n                lut[bytes[9]] +\n                '-' +\n                lut[bytes[10]] +\n                lut[bytes[11]] +\n                lut[bytes[12]] +\n                lut[bytes[13]] +\n                lut[bytes[14]] +\n                lut[bytes[15]]);\n        };\n    })();\n})(UUID = exports.UUID || (exports.UUID = {}));\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport URI from '../common/uri';\n\n/**\n * An endpoint provides URLs for http and ws, based on configuration and defaults.\n */\nexport class Endpoint {\n    static readonly PROTO_HTTPS: string = 'https:';\n    static readonly PROTO_HTTP: string = 'http:';\n    static readonly PROTO_WS: string = 'ws:';\n    static readonly PROTO_WSS: string = 'wss:';\n    static readonly PROTO_FILE: string = 'file:';\n\n    constructor(\n        protected readonly options: Endpoint.Options = {},\n        protected readonly location: Endpoint.Location = self.location\n    ) { }\n\n    getWebSocketUrl(): URI {\n        return new URI(`${this.wsScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    getRestUrl(): URI {\n        return new URI(`${this.httpScheme}//${this.host}${this.pathname}${this.path}`);\n    }\n\n    protected get pathname(): string {\n        if (this.location.protocol === Endpoint.PROTO_FILE) {\n            return '';\n        }\n        if (this.location.pathname === '/') {\n            return '';\n        }\n        if (this.location.pathname.endsWith('/')) {\n            return this.location.pathname.substr(0, this.location.pathname.length - 1);\n        }\n        return this.location.pathname;\n    }\n\n    get host(): string {\n        if (this.options.host) {\n            return this.options.host;\n        }\n        if (this.location.host) {\n            return this.location.host;\n        }\n        return 'localhost:' + this.port;\n    }\n\n    get origin(): string {\n        return `${this.httpScheme}//${this.host}`;\n    }\n\n    protected get port(): string {\n        return this.getSearchParam('port', '3000');\n    }\n\n    protected getSearchParam(name: string, defaultValue: string): string {\n        const search = this.location.search;\n        if (!search) {\n            return defaultValue;\n        }\n        return search.substr(1).split('&')\n            .filter(value => value.startsWith(name + '='))\n            .map(value => {\n                const encoded = value.substr(name.length + 1);\n                return decodeURIComponent(encoded);\n            })[0] || defaultValue;\n    }\n\n    protected get wsScheme(): string {\n        if (this.options.wsScheme) {\n            return this.options.wsScheme;\n        }\n        return this.httpScheme === Endpoint.PROTO_HTTPS ? Endpoint.PROTO_WSS : Endpoint.PROTO_WS;\n    }\n\n    /**\n     * The HTTP/HTTPS scheme of the endpoint, or the user defined one.\n     * See: `Endpoint.Options.httpScheme`.\n     */\n    get httpScheme(): string {\n        if (this.options.httpScheme) {\n            return this.options.httpScheme;\n        }\n        if (this.location.protocol === Endpoint.PROTO_HTTP ||\n            this.location.protocol === Endpoint.PROTO_HTTPS) {\n            return this.location.protocol;\n        }\n        return Endpoint.PROTO_HTTP;\n    }\n\n    protected get path(): string {\n        if (this.options.path) {\n            if (this.options.path.startsWith('/')) {\n                return this.options.path;\n            } else {\n                return '/' + this.options.path;\n            }\n        }\n        return '';\n    }\n}\n\nexport namespace Endpoint {\n    export class Options {\n        host?: string;\n        wsScheme?: string;\n        httpScheme?: string;\n        path?: string;\n    }\n\n    // Necessary for running tests with dependency on TS lib on node\n    // FIXME figure out how to mock with ts-node\n    export class Location {\n        host: string;\n        pathname: string;\n        search: string;\n        protocol: string;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/buffer.ts\n\n/* eslint-disable no-null/no-null */\n\nimport { Buffer as SaferBuffer } from 'safer-buffer';\nimport * as iconv from 'iconv-lite';\nimport * as streams from './stream';\n\nconst hasBuffer = (typeof Buffer !== 'undefined');\nconst hasTextEncoder = (typeof TextEncoder !== 'undefined');\nconst hasTextDecoder = (typeof TextDecoder !== 'undefined');\n\nlet textEncoder: TextEncoder | null;\nlet textDecoder: TextDecoder | null;\n\nexport class BinaryBuffer {\n\n    static alloc(byteLength: number): BinaryBuffer {\n        if (hasBuffer) {\n            return new BinaryBuffer(Buffer.allocUnsafe(byteLength));\n        } else {\n            return new BinaryBuffer(new Uint8Array(byteLength));\n        }\n    }\n\n    static wrap(actual: Uint8Array): BinaryBuffer {\n        if (hasBuffer && !(Buffer.isBuffer(actual))) {\n            // https://nodejs.org/dist/latest-v10.x/docs/api/buffer.html#buffer_class_method_buffer_from_arraybuffer_byteoffset_length\n            // Create a zero-copy Buffer wrapper around the ArrayBuffer pointed to by the Uint8Array\n            actual = Buffer.from(actual.buffer, actual.byteOffset, actual.byteLength);\n        }\n        return new BinaryBuffer(actual);\n    }\n\n    static fromString(source: string): BinaryBuffer {\n        if (hasBuffer) {\n            return new BinaryBuffer(Buffer.from(source));\n        } else if (hasTextEncoder) {\n            if (!textEncoder) {\n                textEncoder = new TextEncoder();\n            }\n            return new BinaryBuffer(textEncoder.encode(source));\n        } else {\n            return new BinaryBuffer(iconv.encode(source, 'utf8'));\n        }\n    }\n\n    static concat(buffers: BinaryBuffer[], totalLength?: number): BinaryBuffer {\n        if (typeof totalLength === 'undefined') {\n            totalLength = 0;\n            for (let i = 0, len = buffers.length; i < len; i++) {\n                totalLength += buffers[i].byteLength;\n            }\n        }\n\n        const ret = BinaryBuffer.alloc(totalLength);\n        let offset = 0;\n        for (let i = 0, len = buffers.length; i < len; i++) {\n            const element = buffers[i];\n            ret.set(element, offset);\n            offset += element.byteLength;\n        }\n\n        return ret;\n    }\n\n    readonly buffer: Uint8Array;\n    readonly byteLength: number;\n\n    private constructor(buffer: Uint8Array) {\n        this.buffer = buffer;\n        this.byteLength = this.buffer.byteLength;\n    }\n\n    toString(): string {\n        if (hasBuffer) {\n            return this.buffer.toString();\n        } else if (hasTextDecoder) {\n            if (!textDecoder) {\n                textDecoder = new TextDecoder();\n            }\n            return textDecoder.decode(this.buffer);\n        } else {\n            return iconv.decode(SaferBuffer.from(this.buffer), 'utf8');\n        }\n    }\n\n    slice(start?: number, end?: number): BinaryBuffer {\n        // IMPORTANT: use subarray instead of slice because TypedArray#slice\n        // creates shallow copy and NodeBuffer#slice doesn't. The use of subarray\n        // ensures the same, performant, behaviour.\n        return new BinaryBuffer(this.buffer.subarray(start, end));\n    }\n\n    set(array: BinaryBuffer, offset?: number): void;\n    set(array: Uint8Array, offset?: number): void;\n    set(array: BinaryBuffer | Uint8Array, offset?: number): void {\n        if (array instanceof BinaryBuffer) {\n            this.buffer.set(array.buffer, offset);\n        } else {\n            this.buffer.set(array, offset);\n        }\n    }\n\n    readUInt32BE(offset: number): number {\n        return (\n            this.buffer[offset] * 2 ** 24\n            + this.buffer[offset + 1] * 2 ** 16\n            + this.buffer[offset + 2] * 2 ** 8\n            + this.buffer[offset + 3]\n        );\n    }\n\n    writeUInt32BE(value: number, offset: number): void {\n        this.buffer[offset + 3] = value;\n        value = value >>> 8;\n        this.buffer[offset + 2] = value;\n        value = value >>> 8;\n        this.buffer[offset + 1] = value;\n        value = value >>> 8;\n        this.buffer[offset] = value;\n    }\n\n    readUInt32LE(offset: number): number {\n        return (\n            ((this.buffer[offset + 0] << 0) >>> 0) |\n            ((this.buffer[offset + 1] << 8) >>> 0) |\n            ((this.buffer[offset + 2] << 16) >>> 0) |\n            ((this.buffer[offset + 3] << 24) >>> 0)\n        );\n    }\n\n    writeUInt32LE(value: number, offset: number): void {\n        this.buffer[offset + 0] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 1] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 2] = (value & 0b11111111);\n        value = value >>> 8;\n        this.buffer[offset + 3] = (value & 0b11111111);\n    }\n\n    readUInt8(offset: number): number {\n        return this.buffer[offset];\n    }\n\n    writeUInt8(value: number, offset: number): void {\n        this.buffer[offset] = value;\n    }\n\n}\n\nexport interface BinaryBufferReadable extends streams.Readable<BinaryBuffer> { }\nexport namespace BinaryBufferReadable {\n    export function toBuffer(readable: BinaryBufferReadable): BinaryBuffer {\n        return streams.consumeReadable<BinaryBuffer>(readable, chunks => BinaryBuffer.concat(chunks));\n    }\n    export function fromBuffer(buffer: BinaryBuffer): BinaryBufferReadable {\n        return streams.toReadable<BinaryBuffer>(buffer);\n    }\n    export function fromReadable(readable: streams.Readable<string>): BinaryBufferReadable {\n        return {\n            read(): BinaryBuffer | null {\n                const value = readable.read();\n\n                if (typeof value === 'string') {\n                    return BinaryBuffer.fromString(value);\n                }\n\n                return null;\n            }\n        };\n    }\n}\n\nexport interface BinaryBufferReadableStream extends streams.ReadableStream<BinaryBuffer> { }\nexport namespace BinaryBufferReadableStream {\n    export function toBuffer(stream: BinaryBufferReadableStream): Promise<BinaryBuffer> {\n        return streams.consumeStream<BinaryBuffer>(stream, chunks => BinaryBuffer.concat(chunks));\n    }\n    export function fromBuffer(buffer: BinaryBuffer): BinaryBufferReadableStream {\n        return streams.toStream<BinaryBuffer>(buffer, chunks => BinaryBuffer.concat(chunks));\n    }\n}\n\nexport interface BinaryBufferReadableBufferedStream extends streams.ReadableBufferedStream<BinaryBuffer> { }\nexport namespace BinaryBufferReadableBufferedStream {\n    export async function toBuffer(bufferedStream: streams.ReadableBufferedStream<BinaryBuffer>): Promise<BinaryBuffer> {\n        if (bufferedStream.ended) {\n            return BinaryBuffer.concat(bufferedStream.buffer);\n        }\n\n        return BinaryBuffer.concat([\n\n            // Include already read chunks...\n            ...bufferedStream.buffer,\n\n            // ...and all additional chunks\n            await BinaryBufferReadableStream.toBuffer(bufferedStream.stream)\n        ]);\n    }\n}\n\nexport interface BinaryBufferWriteableStream extends streams.WriteableStream<BinaryBuffer> { }\nexport namespace BinaryBufferWriteableStream {\n    export function create(options?: streams.WriteableStreamOptions): BinaryBufferWriteableStream {\n        return streams.newWriteableStream<BinaryBuffer>(chunks => BinaryBuffer.concat(chunks), options);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation and others. All rights reserved.\n *  Licensed under the MIT License. See https://github.com/Microsoft/vscode/blob/master/LICENSE.txt for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event, Emitter } from './event';\n\nexport interface CancellationToken {\n    readonly isCancellationRequested: boolean;\n    /*\n     * An event emitted when cancellation is requested\n     * @event\n     */\n    readonly onCancellationRequested: Event<void>;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst shortcutEvent: Event<void> = Object.freeze(Object.assign(function (callback: any, context?: any): any {\n    const handle = setTimeout(callback.bind(context), 0);\n    return { dispose(): void { clearTimeout(handle); } };\n}, {\n    get maxListeners(): number { return 0; },\n    set maxListeners(maxListeners: number) { }\n}));\n\nexport namespace CancellationToken {\n\n    export const None: CancellationToken = Object.freeze({\n        isCancellationRequested: false,\n        onCancellationRequested: Event.None\n    });\n\n    export const Cancelled: CancellationToken = Object.freeze({\n        isCancellationRequested: true,\n        onCancellationRequested: shortcutEvent\n    });\n\n    export function is(value: unknown): value is CancellationToken {\n        const candidate = value as CancellationToken;\n        return candidate && (candidate === CancellationToken.None\n            || candidate === CancellationToken.Cancelled\n            || (typeof candidate.isCancellationRequested === 'boolean' && !!candidate.onCancellationRequested));\n    }\n}\n\nexport class CancellationError extends Error {\n    constructor() {\n        super('Canceled');\n        this.name = this.message;\n    }\n}\n\nclass MutableToken implements CancellationToken {\n\n    private _isCancelled: boolean = false;\n    private _emitter: Emitter<void> | undefined;\n\n    public cancel(): void {\n        if (!this._isCancelled) {\n            this._isCancelled = true;\n            if (this._emitter) {\n                this._emitter.fire(undefined);\n                this._emitter = undefined;\n            }\n        }\n    }\n\n    get isCancellationRequested(): boolean {\n        return this._isCancelled;\n    }\n\n    get onCancellationRequested(): Event<void> {\n        if (this._isCancelled) {\n            return shortcutEvent;\n        }\n        if (!this._emitter) {\n            this._emitter = new Emitter<void>();\n        }\n        return this._emitter.event;\n    }\n}\n\nexport class CancellationTokenSource {\n\n    private _token: CancellationToken;\n\n    get token(): CancellationToken {\n        if (!this._token) {\n            // be lazy and create the token only when\n            // actually needed\n            this._token = new MutableToken();\n        }\n        return this._token;\n    }\n\n    cancel(): void {\n        if (!this._token) {\n            // save an object by returning the default\n            // cancelled token when cancellation happens\n            // before someone asks for the token\n            this._token = CancellationToken.Cancelled;\n        } else if (this._token !== CancellationToken.Cancelled) {\n            (<MutableToken>this._token).cancel();\n        }\n    }\n\n    dispose(): void {\n        this.cancel();\n    }\n}\n\nconst cancelledMessage = 'Cancelled';\n\nexport function cancelled(): Error {\n    return new Error(cancelledMessage);\n}\n\nexport function isCancelled(err: Error | undefined): boolean {\n    return !!err && err.message === cancelledMessage;\n}\n\nexport function checkCancelled(token?: CancellationToken): void {\n    if (!!token && token.isCancellationRequested) {\n        throw cancelled();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Event, Emitter } from './event';\n\nexport interface Disposable {\n    /**\n     * Dispose this object.\n     */\n    dispose(): void;\n}\n\nexport namespace Disposable {\n    export function is(arg: unknown): arg is Disposable {\n        return !!arg && typeof arg === 'object' && typeof (arg as Disposable).dispose === 'function';\n    }\n    export function create(func: () => void): Disposable {\n        return { dispose: func };\n    }\n    /** Always provides a reference to a new disposable. */\n    export declare const NULL: Disposable;\n}\n\n/**\n * Ensures that every reference to {@link Disposable.NULL} returns a new object,\n * as sharing a disposable between multiple {@link DisposableCollection} can have unexpected side effects\n */\nObject.defineProperty(Disposable, 'NULL', {\n    configurable: false,\n    enumerable: true,\n    get(): Disposable {\n        return { dispose: () => { } };\n    }\n});\n\nexport class DisposableCollection implements Disposable {\n\n    protected readonly disposables: Disposable[] = [];\n    protected readonly onDisposeEmitter = new Emitter<void>();\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    /**\n     * This event is fired only once\n     * on first dispose of not empty collection.\n     */\n    get onDispose(): Event<void> {\n        return this.onDisposeEmitter.event;\n    }\n\n    protected checkDisposed(): void {\n        if (this.disposed && !this.disposingElements) {\n            this.onDisposeEmitter.fire(undefined);\n            this.onDisposeEmitter.dispose();\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    private disposingElements = false;\n    dispose(): void {\n        if (this.disposed || this.disposingElements) {\n            return;\n        }\n        this.disposingElements = true;\n        while (!this.disposed) {\n            try {\n                this.disposables.pop()!.dispose();\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        this.disposingElements = false;\n        this.checkDisposed();\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        const originalDispose = disposable.dispose.bind(disposable);\n        const toRemove = Disposable.create(() => {\n            const index = disposables.indexOf(disposable);\n            if (index !== -1) {\n                disposables.splice(index, 1);\n            }\n            this.checkDisposed();\n        });\n        disposable.dispose = () => {\n            toRemove.dispose();\n            disposable.dispose = originalDispose;\n            originalDispose();\n        };\n        return toRemove;\n    }\n\n    pushAll(disposables: Disposable[]): Disposable[] {\n        return disposables.map(disposable =>\n            this.push(disposable)\n        );\n    }\n\n}\n\nexport type DisposableGroup = { push(disposable: Disposable): void } | { add(disposable: Disposable): void };\nexport namespace DisposableGroup {\n    export function canPush(candidate?: DisposableGroup): candidate is { push(disposable: Disposable): void } {\n        return Boolean(candidate && (candidate as { push(): void }).push);\n    }\n    export function canAdd(candidate?: DisposableGroup): candidate is { add(disposable: Disposable): void } {\n        return Boolean(candidate && (candidate as { add(): void }).add);\n    }\n}\n\nexport function disposableTimeout(...args: Parameters<typeof setTimeout>): Disposable {\n    const handle = setTimeout(...args);\n    return { dispose: () => clearTimeout(handle) };\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Disposable, DisposableGroup } from './disposable';\nimport { MaybePromise } from './types';\n\n/**\n * Represents a typed event.\n */\nexport interface Event<T> {\n\n    /**\n     *\n     * @param listener The listener function will be call when the event happens.\n     * @param thisArgs The 'this' which will be used when calling the event listener.\n     * @param disposables An array to which a {{IDisposable}} will be added.\n     * @return a disposable to remove the listener again.\n     */\n    (listener: (e: T) => any, thisArgs?: any, disposables?: DisposableGroup): Disposable;\n}\n\nexport namespace Event {\n    const _disposable = { dispose(): void { } };\n    export function getMaxListeners(event: Event<unknown>): number {\n        const { maxListeners } = event as any;\n        return typeof maxListeners === 'number' ? maxListeners : 0;\n    }\n    export function setMaxListeners<N extends number>(event: Event<unknown>, maxListeners: N): N {\n        if (typeof (event as any).maxListeners === 'number') {\n            return (event as any).maxListeners = maxListeners;\n        }\n        return maxListeners;\n    }\n    export function addMaxListeners(event: Event<unknown>, add: number): number {\n        if (typeof (event as any).maxListeners === 'number') {\n            return (event as any).maxListeners += add;\n        }\n        return add;\n    }\n    export const None: Event<any> = Object.assign(function (): { dispose(): void } { return _disposable; }, {\n        get maxListeners(): number { return 0; },\n        set maxListeners(maxListeners: number) { }\n    });\n\n    /**\n     * Given an event and a `map` function, returns another event which maps each element\n     * through the mapping function.\n     */\n    export function map<I, O>(event: Event<I>, mapFunc: (i: I) => O): Event<O> {\n        return Object.assign((listener: (e: O) => any, thisArgs?: any, disposables?: Disposable[]) => event(i => listener.call(thisArgs, mapFunc(i)), undefined, disposables), {\n            get maxListeners(): number { return 0; },\n            set maxListeners(maxListeners: number) { }\n        });\n    }\n}\n\ntype Callback = (...args: any[]) => any;\nclass CallbackList implements Iterable<Callback> {\n\n    private _callbacks: Function[] | undefined;\n    private _contexts: any[] | undefined;\n\n    get length(): number {\n        return this._callbacks && this._callbacks.length || 0;\n    }\n\n    public add(callback: Function, context: any = undefined, bucket?: Disposable[]): void {\n        if (!this._callbacks) {\n            this._callbacks = [];\n            this._contexts = [];\n        }\n        this._callbacks.push(callback);\n        this._contexts!.push(context);\n\n        if (Array.isArray(bucket)) {\n            bucket.push({ dispose: () => this.remove(callback, context) });\n        }\n    }\n\n    public remove(callback: Function, context: any = undefined): void {\n        if (!this._callbacks) {\n            return;\n        }\n\n        let foundCallbackWithDifferentContext = false;\n        for (let i = 0; i < this._callbacks.length; i++) {\n            if (this._callbacks[i] === callback) {\n                if (this._contexts![i] === context) {\n                    // callback & context match => remove it\n                    this._callbacks.splice(i, 1);\n                    this._contexts!.splice(i, 1);\n                    return;\n                } else {\n                    foundCallbackWithDifferentContext = true;\n                }\n            }\n        }\n\n        if (foundCallbackWithDifferentContext) {\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\n        }\n    }\n\n    // tslint:disable-next-line:typedef\n    public [Symbol.iterator]() {\n        if (!this._callbacks) {\n            return [][Symbol.iterator]();\n        }\n        const callbacks = this._callbacks.slice(0);\n        const contexts = this._contexts!.slice(0);\n\n        return callbacks.map((callback, i) =>\n            (...args: any[]) => callback.apply(contexts[i], args)\n        )[Symbol.iterator]();\n    }\n\n    public invoke(...args: any[]): any[] {\n        const ret: any[] = [];\n        for (const callback of this) {\n            try {\n                ret.push(callback(...args));\n            } catch (e) {\n                console.error(e);\n            }\n        }\n        return ret;\n    }\n\n    public isEmpty(): boolean {\n        return !this._callbacks || this._callbacks.length === 0;\n    }\n\n    public dispose(): void {\n        this._callbacks = undefined;\n        this._contexts = undefined;\n    }\n}\n\nexport interface EmitterOptions {\n    onFirstListenerAdd?: Function;\n    onLastListenerRemove?: Function;\n}\n\nexport class Emitter<T = any> {\n\n    private static LEAK_WARNING_THRESHHOLD = 175;\n\n    private static _noop = function (): void { };\n\n    private _event: Event<T>;\n    protected _callbacks: CallbackList | undefined;\n    private _disposed = false;\n\n    private _leakingStacks: Map<string, number> | undefined;\n    private _leakWarnCountdown = 0;\n\n    constructor(\n        private _options?: EmitterOptions\n    ) { }\n\n    /**\n     * For the public to allow to subscribe\n     * to events from this Emitter\n     */\n    get event(): Event<T> {\n        if (!this._event) {\n            this._event = Object.assign((listener: (e: T) => any, thisArgs?: any, disposables?: DisposableGroup) => {\n                if (!this._callbacks) {\n                    this._callbacks = new CallbackList();\n                }\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\n                    this._options.onFirstListenerAdd(this);\n                }\n                this._callbacks.add(listener, thisArgs);\n                const removeMaxListenersCheck = this.checkMaxListeners(Event.getMaxListeners(this._event));\n\n                const result: Disposable = {\n                    dispose: () => {\n                        if (removeMaxListenersCheck) {\n                            removeMaxListenersCheck();\n                        }\n                        result.dispose = Emitter._noop;\n                        if (!this._disposed) {\n                            this._callbacks!.remove(listener, thisArgs);\n                            result.dispose = Emitter._noop;\n                            if (this._options && this._options.onLastListenerRemove && this._callbacks!.isEmpty()) {\n                                this._options.onLastListenerRemove(this);\n                            }\n                        }\n                    }\n                };\n                if (DisposableGroup.canPush(disposables)) {\n                    disposables.push(result);\n                } else if (DisposableGroup.canAdd(disposables)) {\n                    disposables.add(result);\n                }\n\n                return result;\n            }, {\n                maxListeners: Emitter.LEAK_WARNING_THRESHHOLD\n            });\n        }\n        return this._event;\n    }\n\n    protected checkMaxListeners(maxListeners: number): (() => void) | undefined {\n        if (maxListeners === 0 || !this._callbacks) {\n            return undefined;\n        }\n        const listenerCount = this._callbacks.length;\n        if (listenerCount <= maxListeners) {\n            return undefined;\n        }\n\n        const popStack = this.pushLeakingStack();\n\n        this._leakWarnCountdown -= 1;\n        if (this._leakWarnCountdown <= 0) {\n            // only warn on first exceed and then every time the limit\n            // is exceeded by 50% again\n            this._leakWarnCountdown = maxListeners * 0.5;\n\n            let topStack: string;\n            let topCount = 0;\n            this._leakingStacks!.forEach((stackCount, stack) => {\n                if (!topStack || topCount < stackCount) {\n                    topStack = stack;\n                    topCount = stackCount;\n                }\n            });\n\n            // eslint-disable-next-line max-len\n            console.warn(`Possible Emitter memory leak detected. ${listenerCount} listeners added. Use event.maxListeners to increase the limit (${maxListeners}). MOST frequent listener (${topCount}):`);\n            console.warn(topStack!);\n        }\n\n        return popStack;\n    }\n\n    protected pushLeakingStack(): () => void {\n        if (!this._leakingStacks) {\n            this._leakingStacks = new Map();\n        }\n        const stack = new Error().stack!.split('\\n').slice(3).join('\\n');\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count + 1);\n        return () => this.popLeakingStack(stack);\n    }\n\n    protected popLeakingStack(stack: string): void {\n        if (!this._leakingStacks) {\n            return;\n        }\n        const count = (this._leakingStacks.get(stack) || 0);\n        this._leakingStacks.set(stack, count - 1);\n    }\n\n    /**\n     * To be kept private to fire an event to\n     * subscribers\n     */\n    fire(event: T): any {\n        if (this._callbacks) {\n            this._callbacks.invoke(event);\n        }\n    }\n\n    /**\n     * Process each listener one by one.\n     * Return `false` to stop iterating over the listeners, `true` to continue.\n     */\n    async sequence(processor: (listener: (e: T) => any) => MaybePromise<boolean>): Promise<void> {\n        if (this._callbacks) {\n            for (const listener of this._callbacks) {\n                if (!await processor(listener)) {\n                    break;\n                }\n            }\n        }\n    }\n\n    dispose(): void {\n        if (this._leakingStacks) {\n            this._leakingStacks.clear();\n            this._leakingStacks = undefined;\n        }\n        if (this._callbacks) {\n            this._callbacks.dispose();\n            this._callbacks = undefined;\n        }\n        this._disposed = true;\n    }\n}\n\nexport interface WaitUntilEvent {\n    /**\n     * Allows to pause the event loop until the provided thenable resolved.\n     *\n     * *Note:* It can only be called during event dispatch and not in an asynchronous manner\n     *\n     * @param thenable A thenable that delays execution.\n     */\n    waitUntil(thenable: Promise<any>): void;\n}\nexport namespace WaitUntilEvent {\n    /**\n     * Fire all listeners in the same tick.\n     *\n     * Use `AsyncEmitter.fire` to fire listeners async one after another.\n     */\n    export async function fire<T extends WaitUntilEvent>(\n        emitter: Emitter<T>,\n        event: Omit<T, 'waitUntil'>,\n        timeout: number | undefined = undefined\n    ): Promise<void> {\n        const waitables: Promise<void>[] = [];\n        const asyncEvent = Object.assign(event, {\n            waitUntil: (thenable: Promise<any>) => {\n                if (Object.isFrozen(waitables)) {\n                    throw new Error('waitUntil cannot be called asynchronously.');\n                }\n                waitables.push(thenable);\n            }\n        }) as T;\n        try {\n            emitter.fire(asyncEvent);\n            // Asynchronous calls to `waitUntil` should fail.\n            Object.freeze(waitables);\n        } finally {\n            delete (asyncEvent as any)['waitUntil'];\n        }\n        if (!waitables.length) {\n            return;\n        }\n        if (timeout !== undefined) {\n            await Promise.race([Promise.all(waitables), new Promise(resolve => setTimeout(resolve, timeout))]);\n        } else {\n            await Promise.all(waitables);\n        }\n    }\n}\n\nimport { CancellationToken } from './cancellation';\n\nexport class AsyncEmitter<T extends WaitUntilEvent> extends Emitter<T> {\n\n    protected deliveryQueue: Promise<void> | undefined;\n\n    /**\n     * Fire listeners async one after another.\n     */\n    override fire(event: Omit<T, 'waitUntil'>, token: CancellationToken = CancellationToken.None,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        const callbacks = this._callbacks;\n        if (!callbacks) {\n            return Promise.resolve();\n        }\n        const listeners = [...callbacks];\n        if (this.deliveryQueue) {\n            return this.deliveryQueue = this.deliveryQueue.then(() => this.deliver(listeners, event, token, promiseJoin));\n        }\n        return this.deliveryQueue = this.deliver(listeners, event, token, promiseJoin);\n    }\n\n    protected async deliver(listeners: Callback[], event: Omit<T, 'waitUntil'>, token: CancellationToken,\n        promiseJoin?: (p: Promise<any>, listener: Function) => Promise<any>): Promise<void> {\n        for (const listener of listeners) {\n            if (token.isCancellationRequested) {\n                return;\n            }\n            const waitables: Promise<void>[] = [];\n            const asyncEvent = Object.assign(event, {\n                waitUntil: (thenable: Promise<any>) => {\n                    if (Object.isFrozen(waitables)) {\n                        throw new Error('waitUntil cannot be called asynchronously.');\n                    }\n                    if (promiseJoin) {\n                        thenable = promiseJoin(thenable, listener);\n                    }\n                    waitables.push(thenable);\n                }\n            }) as T;\n            try {\n                listener(event);\n                // Asynchronous calls to `waitUntil` should fail.\n                Object.freeze(waitables);\n            } catch (e) {\n                console.error(e);\n            } finally {\n                delete (asyncEvent as any)['waitUntil'];\n            }\n            if (!waitables.length) {\n                return;\n            }\n            try {\n                await Promise.all(waitables);\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/glob.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\n\nimport * as strings from './strings';\nimport * as paths from './paths';\nimport { CharCode } from './char-code';\n\n/* eslint-disable @typescript-eslint/no-shadow, no-null/no-null */\nexport interface IExpression {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [pattern: string]: boolean | SiblingClause | any;\n}\n\nexport interface IRelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport function getEmptyExpression(): IExpression {\n    return Object.create(null);\n}\n\nexport interface SiblingClause {\n    when: string;\n}\n\nconst GLOBSTAR = '**';\nconst GLOB_SPLIT = '/';\nconst PATH_REGEX = '[/\\\\\\\\]';        // any slash or backslash\nconst NO_PATH_REGEX = '[^/\\\\\\\\]';    // any non-slash and non-backslash\nconst ALL_FORWARD_SLASHES = /\\//g;\n\nfunction starsToRegExp(starCount: number): string {\n    switch (starCount) {\n        case 0:\n            return '';\n        case 1:\n            return `${NO_PATH_REGEX}*?`; // 1 star matches any number of characters except path separator (/ and \\) - non greedy (?)\n        default:\n            // Matches:  (Path Sep OR Path Val followed by Path Sep OR Path Sep followed by Path Val) 0-many times\n            // Group is non capturing because we don't need to capture at all (?:...)\n            // Overall we use non-greedy matching because it could be that we match too much\n            return `(?:${PATH_REGEX}|${NO_PATH_REGEX}+${PATH_REGEX}|${PATH_REGEX}${NO_PATH_REGEX}+)*?`;\n    }\n}\n\nexport function splitGlobAware(pattern: string, splitChar: string): string[] {\n    if (!pattern) {\n        return [];\n    }\n\n    const segments: string[] = [];\n\n    let inBraces = false;\n    let inBrackets = false;\n\n    let char: string;\n    let curVal = '';\n    for (let i = 0; i < pattern.length; i++) {\n        char = pattern[i];\n\n        switch (char) {\n            case splitChar:\n                if (!inBraces && !inBrackets) {\n                    segments.push(curVal);\n                    curVal = '';\n\n                    continue;\n                }\n                break;\n            case '{':\n                inBraces = true;\n                break;\n            case '}':\n                inBraces = false;\n                break;\n            case '[':\n                inBrackets = true;\n                break;\n            case ']':\n                inBrackets = false;\n                break;\n        }\n\n        curVal += char;\n    }\n\n    // Tail\n    if (curVal) {\n        segments.push(curVal);\n    }\n\n    return segments;\n}\n\nfunction parseRegExp(pattern: string): string {\n    if (!pattern) {\n        return '';\n    }\n\n    let regEx = '';\n\n    // Split up into segments for each slash found\n    // eslint-disable-next-line prefer-const\n    let segments = splitGlobAware(pattern, GLOB_SPLIT);\n\n    // Special case where we only have globstars\n    if (segments.every(s => s === GLOBSTAR)) {\n        regEx = '.*';\n    }\n\n    // Build regex over segments\n    // tslint:disable-next-line:one-line\n    else {\n        let previousSegmentWasGlobStar = false;\n        segments.forEach((segment, index) => {\n\n            // Globstar is special\n            if (segment === GLOBSTAR) {\n\n                // if we have more than one globstar after another, just ignore it\n                if (!previousSegmentWasGlobStar) {\n                    regEx += starsToRegExp(2);\n                    previousSegmentWasGlobStar = true;\n                }\n\n                return;\n            }\n\n            // States\n            let inBraces = false;\n            let braceVal = '';\n\n            let inBrackets = false;\n            let bracketVal = '';\n\n            let char: string;\n            for (let i = 0; i < segment.length; i++) {\n                char = segment[i];\n\n                // Support brace expansion\n                if (char !== '}' && inBraces) {\n                    braceVal += char;\n                    continue;\n                }\n\n                // Support brackets\n                if (inBrackets && (char !== ']' || !bracketVal) /* ] is literally only allowed as first character in brackets to match it */) {\n                    let res: string;\n\n                    // range operator\n                    if (char === '-') {\n                        res = char;\n                    }\n\n                    // negation operator (only valid on first index in bracket)\n                    // tslint:disable-next-line:one-line\n                    else if ((char === '^' || char === '!') && !bracketVal) {\n                        res = '^';\n                    }\n\n                    // glob split matching is not allowed within character ranges\n                    // see http://man7.org/linux/man-pages/man7/glob.7.html\n                    // tslint:disable-next-line:one-line\n                    else if (char === GLOB_SPLIT) {\n                        res = '';\n                    }\n\n                    // anything else gets escaped\n                    // tslint:disable-next-line:one-line\n                    else {\n                        res = strings.escapeRegExpCharacters(char);\n                    }\n\n                    bracketVal += res;\n                    continue;\n                }\n\n                switch (char) {\n                    case '{':\n                        inBraces = true;\n                        continue;\n\n                    case '[':\n                        inBrackets = true;\n                        continue;\n\n                    case '}':\n                        // eslint-disable-next-line prefer-const\n                        let choices = splitGlobAware(braceVal, ',');\n\n                        // Converts {foo,bar} => [foo|bar]\n                        // eslint-disable-next-line prefer-const\n                        let braceRegExp = `(?:${choices.map(c => parseRegExp(c)).join('|')})`;\n\n                        regEx += braceRegExp;\n\n                        inBraces = false;\n                        braceVal = '';\n\n                        break;\n\n                    case ']':\n                        regEx += ('[' + bracketVal + ']');\n\n                        inBrackets = false;\n                        bracketVal = '';\n\n                        break;\n\n                    case '?':\n                        regEx += NO_PATH_REGEX; // 1 ? matches any single character except path separator (/ and \\)\n                        continue;\n\n                    case '*':\n                        regEx += starsToRegExp(1);\n                        continue;\n\n                    default:\n                        regEx += strings.escapeRegExpCharacters(char);\n                }\n            }\n\n            // Tail: Add the slash we had split on if there is more to come and the remaining pattern is not a globstar\n            // For example if pattern: some/**/*.js we want the \"/\" after some to be included in the RegEx to prevent\n            // a folder called \"something\" to match as well.\n            // However, if pattern: some/**, we tolerate that we also match on \"something\" because our globstar behavior\n            // is to match 0-N segments.\n            if (index < segments.length - 1 && (segments[index + 1] !== GLOBSTAR || index + 2 < segments.length)) {\n                regEx += PATH_REGEX;\n            }\n\n            // reset state\n            previousSegmentWasGlobStar = false;\n        });\n    }\n\n    return regEx;\n}\n\n// regexes to check for trivial glob patterns that just check for String#endsWith\nconst T1 = /^\\*\\*\\/\\*\\.[\\w\\.-]+$/;                                        // **/*.something\nconst T2 = /^\\*\\*\\/([\\w\\.-]+)\\/?$/;                                            // **/something\nconst T3 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+\\/?)*}$/;     // {**/*.something,**/*.else} or {**/package.json,**/project.json}\nconst T3_2 = /^{\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?(,\\*\\*\\/[\\*\\.]?[\\w\\.-]+(\\/(\\*\\*)?)?)*}$/;     // Like T3, with optional trailing /**\nconst T4 = /^\\*\\*((\\/[\\w\\.-]+)+)\\/?$/;                                        // **/something/else\nconst T5 = /^([\\w\\.-]+(\\/[\\w\\.-]+)*)\\/?$/;                                    // something/else\n\nexport type ParsedPattern = (path: string, basename?: string) => boolean;\n\n// The ParsedExpression returns a Promise iff hasSibling returns a Promise.\n// eslint-disable-next-line max-len\nexport type ParsedExpression = (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>) => string | Promise<string> /* the matching pattern */;\n\nexport interface IGlobOptions {\n    /**\n     * Simplify patterns for use as exclusion filters during tree traversal to skip entire subtrees. Cannot be used outside of a tree traversal.\n     */\n    trimForExclusions?: boolean;\n}\n\ninterface ParsedStringPattern {\n    (path: string, basename: string): string | Promise<string> /* the matching pattern */;\n    basenames?: string[];\n    patterns?: string[];\n    allBasenames?: string[];\n    allPaths?: string[];\n}\ninterface ParsedExpressionPattern {\n    (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>): string | Promise<string> /* the matching pattern */;\n    requiresSiblings?: boolean;\n    allBasenames?: string[];\n    allPaths?: string[];\n}\n\nconst CACHE = new Map<string, ParsedStringPattern>();  // new LRUCache<string, ParsedStringPattern>(10000); // bounded to 10000 elements\n\nconst FALSE = function (): boolean {\n    return false;\n};\n\nconst NULL = function (): string {\n    return null!;\n};\n\nfunction parsePattern(arg1: string | IRelativePattern, options: IGlobOptions): ParsedStringPattern {\n    if (!arg1) {\n        return NULL;\n    }\n\n    // Handle IRelativePattern\n    let pattern: string;\n    if (typeof arg1 !== 'string') {\n        pattern = arg1.pattern;\n    } else {\n        pattern = arg1;\n    }\n\n    // Whitespace trimming\n    pattern = pattern.trim();\n\n    // Check cache\n    const patternKey = `${pattern}_${!!options.trimForExclusions}`;\n    let parsedPattern = CACHE.get(patternKey);\n    if (parsedPattern) {\n        return wrapRelativePattern(parsedPattern, arg1);\n    }\n\n    // Check for Trivias\n    let match: RegExpExecArray;\n    if (T1.test(pattern)) { // common pattern: **/*.txt just need endsWith check\n        const base = pattern.substr(4); // '**/*'.length === 4\n        parsedPattern = function (path, basename): string {\n            return path && strings.endsWith(path, base) ? pattern : null!;\n        };\n    } else if (match = T2.exec(trimForExclusions(pattern, options))!) { // common pattern: **/some.txt just need basename check\n        parsedPattern = trivia2(match[1], pattern);\n    } else if ((options.trimForExclusions ? T3_2 : T3).test(pattern)) { // repetition of common patterns (see above) {**/*.txt,**/*.png}\n        parsedPattern = trivia3(pattern, options);\n    } else if (match = T4.exec(trimForExclusions(pattern, options))!) { // common pattern: **/something/else just need endsWith check\n        parsedPattern = trivia4and5(match[1].substr(1), pattern, true);\n    } else if (match = T5.exec(trimForExclusions(pattern, options))!) { // common pattern: something/else just need equals check\n        parsedPattern = trivia4and5(match[1], pattern, false);\n    }\n\n    // Otherwise convert to pattern\n    // tslint:disable-next-line:one-line\n    else {\n        parsedPattern = toRegExp(pattern);\n    }\n\n    // Cache\n    CACHE.set(patternKey, parsedPattern);\n\n    return wrapRelativePattern(parsedPattern, arg1);\n}\n\nfunction wrapRelativePattern(parsedPattern: ParsedStringPattern, arg2: string | IRelativePattern): ParsedStringPattern {\n    if (typeof arg2 === 'string') {\n        return parsedPattern;\n    }\n\n    return function (path, basename): string | Promise<string> {\n        if (!paths.isEqualOrParent(path, arg2.base)) {\n            return null!;\n        }\n\n        return parsedPattern(paths.normalize(arg2.pathToRelative(arg2.base, path)), basename);\n    };\n}\n\nfunction trimForExclusions(pattern: string, options: IGlobOptions): string {\n    return options.trimForExclusions && strings.endsWith(pattern, '/**') ? pattern.substr(0, pattern.length - 2) : pattern; // dropping **, tailing / is dropped later\n}\n\n// common pattern: **/some.txt just need basename check\nfunction trivia2(base: string, originalPattern: string): ParsedStringPattern {\n    const slashBase = `/${base}`;\n    const backslashBase = `\\\\${base}`;\n    const parsedPattern: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (basename) {\n            return basename === base ? originalPattern : null!;\n        }\n        return path === base || strings.endsWith(path, slashBase) || strings.endsWith(path, backslashBase) ? originalPattern : null!;\n    };\n    const basenames = [base];\n    parsedPattern.basenames = basenames;\n    parsedPattern.patterns = [originalPattern];\n    parsedPattern.allBasenames = basenames;\n    return parsedPattern;\n}\n\n// repetition of common patterns (see above) {**/*.txt,**/*.png}\nfunction trivia3(pattern: string, options: IGlobOptions): ParsedStringPattern {\n    const parsedPatterns = aggregateBasenameMatches(pattern.slice(1, -1).split(',')\n        .map(pattern => parsePattern(pattern, options))\n        .filter(pattern => pattern !== NULL), pattern);\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n    if (n === 1) {\n        return <ParsedStringPattern>parsedPatterns[0];\n    }\n    const parsedPattern: ParsedStringPattern = function (path: string, basename: string): string {\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            if ((<ParsedStringPattern>parsedPatterns[i])(path, basename)) {\n                return pattern;\n            }\n        }\n        return null!;\n    };\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    // const withBasenames = arrays.first(parsedPatterns, pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        parsedPattern.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        parsedPattern.allPaths = allPaths;\n    }\n    return parsedPattern;\n}\n\n// common patterns: **/something/else just need endsWith check, something/else just needs and equals check\nfunction trivia4and5(path: string, pattern: string, matchPathEnds: boolean): ParsedStringPattern {\n    const nativePath = paths.nativeSep !== paths.sep ? path.replace(ALL_FORWARD_SLASHES, paths.nativeSep) : path;\n    const nativePathEnd = paths.nativeSep + nativePath;\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedPattern: ParsedStringPattern = matchPathEnds ? function (path, basename): string {\n        return path && (path === nativePath || strings.endsWith(path, nativePathEnd)) ? pattern : null!;\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n    } : function (path, basename): string {\n        return path && path === nativePath ? pattern : null!;\n    };\n    parsedPattern.allPaths = [(matchPathEnds ? '*/' : './') + path];\n    return parsedPattern;\n}\n\nfunction toRegExp(pattern: string): ParsedStringPattern {\n    try {\n        const regExp = new RegExp(`^${parseRegExp(pattern)}$`);\n        return function (path: string, basename: string): string {\n            regExp.lastIndex = 0; // reset RegExp to its initial state to reuse it!\n            return path && regExp.test(path) ? pattern : null!;\n        };\n    } catch (error) {\n        return NULL;\n    }\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function match(pattern: string | IRelativePattern, path: string): boolean;\nexport function match(expression: IExpression, path: string, hasSibling?: (name: string) => boolean): string /* the matching pattern */;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function match(arg1: string | IExpression | IRelativePattern, path: string, hasSibling?: (name: string) => boolean): any {\n    if (!arg1 || !path) {\n        return false;\n    }\n\n    return parse(<IExpression>arg1)(path, undefined, hasSibling);\n}\n\n/**\n * Simplified glob matching. Supports a subset of glob patterns:\n * - * matches anything inside a path segment\n * - ? matches 1 character inside a path segment\n * - ** matches anything including an empty path segment\n * - simple brace expansion ({js,ts} => js or ts)\n * - character ranges (using [...])\n */\nexport function parse(pattern: string | IRelativePattern, options?: IGlobOptions): ParsedPattern;\nexport function parse(expression: IExpression, options?: IGlobOptions): ParsedExpression;\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function parse(arg1: string | IExpression | IRelativePattern, options: IGlobOptions = {}): any {\n    if (!arg1) {\n        return FALSE;\n    }\n\n    // Glob with String\n    if (typeof arg1 === 'string' || isRelativePattern(arg1)) {\n        const parsedPattern = parsePattern(arg1 as string | IRelativePattern, options);\n        if (parsedPattern === NULL) {\n            return FALSE;\n        }\n        const resultPattern = function (path: string, basename: string): boolean {\n            return !!parsedPattern(path, basename);\n        };\n        if (parsedPattern.allBasenames) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allBasenames = parsedPattern.allBasenames;\n        }\n        if (parsedPattern.allPaths) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            (<ParsedStringPattern><any>resultPattern).allPaths = parsedPattern.allPaths;\n        }\n        return resultPattern;\n    }\n\n    // Glob with Expression\n    return parsedExpression(<IExpression>arg1, options);\n}\n\nexport function hasSiblingPromiseFn(siblingsFn?: () => Promise<string[]>): ((name: string) => Promise<boolean>) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Promise<Record<string, true>>;\n    return (name: string) => {\n        if (!siblings) {\n            siblings = (siblingsFn() || Promise.resolve([]))\n                .then(list => list ? listToMap(list) : {});\n        }\n        return siblings.then(map => !!map[name]);\n    };\n}\n\nexport function hasSiblingFn(siblingsFn?: () => string[]): ((name: string) => boolean) | undefined {\n    if (!siblingsFn) {\n        return undefined;\n    }\n\n    let siblings: Record<string, true>;\n    return (name: string) => {\n        if (!siblings) {\n            const list = siblingsFn();\n            siblings = list ? listToMap(list) : {};\n        }\n        return !!siblings[name];\n    };\n}\n\nfunction listToMap(list: string[]): Record<string, true> {\n    const map: Record<string, true> = {};\n    for (const key of list) {\n        map[key] = true;\n    }\n    return map;\n}\n\nexport function isRelativePattern(obj: unknown): obj is IRelativePattern {\n    const rp = obj as IRelativePattern;\n\n    return !!rp && typeof rp === 'object' && typeof rp.base === 'string' && typeof rp.pattern === 'string' && typeof rp.pathToRelative === 'function';\n}\n\n/**\n * Same as `parse`, but the ParsedExpression is guaranteed to return a Promise\n */\nexport function parseToAsync(expression: IExpression, options?: IGlobOptions): ParsedExpression {\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const parsedExpression = parse(expression, options);\n    return (path: string, basename?: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> => {\n        const result = parsedExpression(path, basename, hasSibling);\n        return result instanceof Promise ? result : Promise.resolve(result);\n    };\n}\n\nexport function getBasenameTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allBasenames || [];\n}\n\nexport function getPathTerms(patternOrExpression: ParsedPattern | ParsedExpression): string[] {\n    return (<ParsedStringPattern>patternOrExpression).allPaths || [];\n}\n\nfunction parsedExpression(expression: IExpression, options: IGlobOptions): ParsedExpression {\n    const parsedPatterns = aggregateBasenameMatches(Object.getOwnPropertyNames(expression)\n        .map(pattern => parseExpressionPattern(pattern, expression[pattern], options))\n        .filter(pattern => pattern !== NULL));\n\n    const n = parsedPatterns.length;\n    if (!n) {\n        return NULL;\n    }\n\n    if (!parsedPatterns.some(parsedPattern => (<ParsedExpressionPattern>parsedPattern).requiresSiblings!)) {\n        if (n === 1) {\n            return <ParsedStringPattern>parsedPatterns[0];\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const resultExpression: ParsedStringPattern = function (path: string, basename: string): string | Promise<string> {\n            // eslint-disable-next-line @typescript-eslint/no-shadow\n            // tslint:disable-next-line:one-variable-per-declaration\n            for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n                // Pattern matches path\n                const result = (<ParsedStringPattern>parsedPatterns[i])(path, basename);\n                if (result) {\n                    return result;\n                }\n            }\n\n            return null!;\n        };\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n        if (withBasenames) {\n            resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n        if (allPaths.length) {\n            resultExpression.allPaths = allPaths;\n        }\n\n        return resultExpression;\n    }\n\n    const resultExpression: ParsedStringPattern = function (path: string, basename: string, hasSibling?: (name: string) => boolean | Promise<boolean>): string | Promise<string> {\n        let name: string = null!;\n\n        // eslint-disable-next-line @typescript-eslint/no-shadow\n        for (let i = 0, n = parsedPatterns.length; i < n; i++) {\n            // Pattern matches path\n            const parsedPattern = (<ParsedExpressionPattern>parsedPatterns[i]);\n            if (parsedPattern.requiresSiblings && hasSibling) {\n                if (!basename) {\n                    basename = paths.basename(path);\n                }\n                if (!name) {\n                    name = basename.substr(0, basename.length - paths.extname(path).length);\n                }\n            }\n            const result = parsedPattern(path, basename, name, hasSibling!);\n            if (result) {\n                return result;\n            }\n        }\n\n        return null!;\n    };\n\n    const withBasenames = parsedPatterns.find(pattern => !!(<ParsedStringPattern>pattern).allBasenames);\n    if (withBasenames) {\n        resultExpression.allBasenames = (<ParsedStringPattern>withBasenames).allBasenames;\n    }\n\n    const allPaths = parsedPatterns.reduce((all, current) => current.allPaths ? all.concat(current.allPaths) : all, <string[]>[]);\n    if (allPaths.length) {\n        resultExpression.allPaths = allPaths;\n    }\n\n    return resultExpression;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction parseExpressionPattern(pattern: string, value: any, options: IGlobOptions): (ParsedStringPattern | ParsedExpressionPattern) {\n    if (value === false) {\n        return NULL; // pattern is disabled\n    }\n\n    const parsedPattern = parsePattern(pattern, options);\n    if (parsedPattern === NULL) {\n        return NULL;\n    }\n\n    // Expression Pattern is <boolean>\n    if (typeof value === 'boolean') {\n        return parsedPattern;\n    }\n\n    // Expression Pattern is <SiblingClause>\n    if (value) {\n        const when = (<SiblingClause>value).when;\n        if (typeof when === 'string') {\n            const result: ParsedExpressionPattern = (path: string, basename: string, name: string, hasSibling: (name: string) => boolean | Promise<boolean>) => {\n                if (!hasSibling || !parsedPattern(path, basename)) {\n                    return null!;\n                }\n\n                const clausePattern = when.replace('$(basename)', name);\n                const matched = hasSibling(clausePattern);\n                return matched instanceof Promise ?\n                    matched.then(m => m ? pattern : null!) :\n                    matched ? pattern : null!;\n            };\n            result.requiresSiblings = true;\n            return result;\n        }\n    }\n\n    // Expression is Anything\n    return parsedPattern;\n}\n\nfunction aggregateBasenameMatches(parsedPatterns: (ParsedStringPattern | ParsedExpressionPattern)[], result?: string): (ParsedStringPattern | ParsedExpressionPattern)[] {\n    const basenamePatterns = parsedPatterns.filter(parsedPattern => !!(<ParsedStringPattern>parsedPattern).basenames);\n    if (basenamePatterns.length < 2) {\n        return parsedPatterns;\n    }\n\n    const basenames = basenamePatterns.reduce<string[]>((all, current) => all.concat((<ParsedStringPattern>current).basenames!), []);\n    let patterns: string[];\n    if (result) {\n        patterns = [];\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, n = basenames.length; i < n; i++) {\n            patterns.push(result);\n        }\n    } else {\n        patterns = basenamePatterns.reduce((all, current) => all.concat((<ParsedStringPattern>current).patterns!), <string[]>[]);\n    }\n    const aggregate: ParsedStringPattern = function (path, basename): string {\n        if (!path) {\n            return null!;\n        }\n        if (!basename) {\n            let i: number;\n            for (i = path.length; i > 0; i--) {\n                const ch = path.charCodeAt(i - 1);\n                if (ch === CharCode.Slash || ch === CharCode.Backslash) {\n                    break;\n                }\n            }\n            basename = path.substr(i);\n        }\n        const index = basenames.indexOf(basename);\n        return index !== -1 ? patterns[index] : null!;\n    };\n    aggregate.basenames = basenames;\n    aggregate.patterns = patterns;\n    aggregate.allBasenames = basenames;\n\n    const aggregatedPatterns = parsedPatterns.filter(parsedPattern => !(<ParsedStringPattern>parsedPattern).basenames);\n    aggregatedPatterns.push(aggregate);\n    return aggregatedPatterns;\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/base/common/codicons.ts\nexport namespace CSSIcon {\n    export const iconNameSegment = '[A-Za-z0-9]+';\n    export const iconNameExpression = '[A-Za-z0-9-]+';\n    export const iconModifierExpression = '~[A-Za-z]+';\n    export const iconNameCharacter = '[A-Za-z0-9~-]';\n}\n\nconst iconsRegex = new RegExp(`\\\\$\\\\(${CSSIcon.iconNameExpression}(?:${CSSIcon.iconModifierExpression})?\\\\)`, 'g'); // no capturing groups\n\nconst escapeIconsRegex = new RegExp(`(\\\\\\\\)?${iconsRegex.source}`, 'g');\nexport function escapeIcons(text: string): string {\n    return text.replace(escapeIconsRegex, (match, escaped) => escaped ? match : `\\\\${match}`);\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport * from './markdown-string';\nexport * from './icon-utilities';\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { escapeRegExpCharacters } from '../strings';\nimport { UriComponents } from '../uri';\nimport { escapeIcons } from './icon-utilities';\n\nexport interface MarkdownString {\n    readonly value: string;\n    readonly isTrusted?: boolean;\n    readonly supportThemeIcons?: boolean;\n    readonly supportHtml?: boolean;\n    readonly baseUri?: UriComponents;\n    uris?: { [href: string]: UriComponents };\n}\n\nexport enum MarkdownStringTextNewlineStyle {\n    Paragraph = 0,\n    Break = 1,\n}\n\nexport namespace MarkdownString {\n    /**\n     * @returns whether the candidate satisfies the interface of a markdown string\n     */\n    export function is(candidate: unknown): candidate is MarkdownString {\n        const maybeMarkdownString = candidate as MarkdownString;\n        return typeof maybeMarkdownString === 'object' && !!maybeMarkdownString && typeof maybeMarkdownString.value === 'string';\n    }\n}\n\n// Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/base/common/htmlContent.ts\n\nexport class MarkdownStringImpl implements MarkdownString {\n\n    public value: string;\n    public isTrusted?: boolean;\n    public supportThemeIcons?: boolean;\n    public supportHtml?: boolean;\n    public baseUri?: UriComponents;\n\n    constructor(\n        value: string = '',\n        isTrustedOrOptions: boolean | { isTrusted?: boolean; supportThemeIcons?: boolean; supportHtml?: boolean } = false,\n    ) {\n        this.value = value;\n        if (typeof this.value !== 'string') {\n            throw new Error('Illegal value for MarkdownString. Expected string, got ' + typeof this.value);\n        }\n\n        if (typeof isTrustedOrOptions === 'boolean') {\n            this.isTrusted = isTrustedOrOptions;\n            this.supportThemeIcons = false;\n            this.supportHtml = false;\n        } else {\n            this.isTrusted = isTrustedOrOptions.isTrusted ?? undefined;\n            this.supportThemeIcons = isTrustedOrOptions.supportThemeIcons ?? false;\n            this.supportHtml = isTrustedOrOptions.supportHtml ?? false;\n        }\n    }\n\n    appendText(value: string, newlineStyle: MarkdownStringTextNewlineStyle = MarkdownStringTextNewlineStyle.Paragraph): MarkdownStringImpl {\n        this.value += escapeMarkdownSyntaxTokens(this.supportThemeIcons ? escapeIcons(value) : value)\n            .replace(/([ \\t]+)/g, (_match, g1) => '&nbsp;'.repeat(g1.length))\n            .replace(/\\>/gm, '\\\\>')\n            .replace(/\\n/g, newlineStyle === MarkdownStringTextNewlineStyle.Break ? '\\\\\\n' : '\\n\\n');\n\n        return this;\n    }\n\n    appendMarkdown(value: string): MarkdownStringImpl {\n        this.value += value;\n        return this;\n    }\n\n    appendCodeblock(langId: string, code: string): MarkdownStringImpl {\n        this.value += '\\n```';\n        this.value += langId;\n        this.value += '\\n';\n        this.value += code;\n        this.value += '\\n```\\n';\n        return this;\n    }\n\n    appendLink(target: UriComponents | string, label: string, title?: string): MarkdownStringImpl {\n        this.value += '[';\n        this.value += this._escape(label, ']');\n        this.value += '](';\n        this.value += this._escape(String(target), ')');\n        if (title) {\n            this.value += ` \"${this._escape(this._escape(title, '\"'), ')')}\"`;\n        }\n        this.value += ')';\n        return this;\n    }\n\n    private _escape(value: string, ch: string): string {\n        const r = new RegExp(escapeRegExpCharacters(ch), 'g');\n        return value.replace(r, (match, offset) => {\n            if (value.charAt(offset - 1) !== '\\\\') {\n                return `\\\\${match}`;\n            } else {\n                return match;\n            }\n        });\n    }\n}\n\nexport function escapeMarkdownSyntaxTokens(text: string): string {\n    // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\n    return text.replace(/[\\\\`*_{}[\\]()#+\\-!]/g, '\\\\$&');\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nfunction is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n    export const backend = {\n        type,\n        isWindows,\n        isOSX\n    };\n\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/**\n * On POSIX:\n * \n *           dir             base    \n *                \n *  root                 name  ext \n * \"  /     home/user/dir / file  .txt \"\n * \n *\n * On Windows:\n * \n *            dir            base    \n *                \n *  root                 name  ext \n * \"  /c: / home/user/dir / file  .txt \"\n * \n */\n\nimport { OS } from './os';\n\nexport class Path {\n    static separator: '/' = '/';\n\n    static isDrive(segment: string): boolean {\n        return segment.endsWith(':');\n    }\n\n    /**\n     * vscode-uri always normalizes drive letters to lower case:\n     * https://github.com/Microsoft/vscode-uri/blob/b1d3221579f97f28a839b6f996d76fc45e9964d8/src/index.ts#L1025\n     * Theia path should be adjusted to this.\n     */\n    static normalizeDrive(path: string): string {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* '/' */ && path.charCodeAt(2) === 58 /* ':' */) {\n            const code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n            }\n        } else if (path.length >= 2 && path.charCodeAt(1) === 58 /* ':' */) {\n            const code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"c:\".length === 2\n            }\n            if (path.charCodeAt(0) !== 47 /* '/' */) {\n                path = `${String.fromCharCode(47)}${path}`;\n            }\n        }\n        return path;\n    }\n    /**\n     * Normalize path separator to use Path.separator\n     * @param Path candidate to normalize\n     * @returns Normalized string path\n     */\n    static normalizePathSeparator(path: string): string {\n        return path.split(/[\\\\]/).join(Path.separator);\n    }\n\n    /**\n     * Creates a windows path from the given path string.\n     * A windows path uses an upper case drive letter and backwards slashes.\n     * @param path The input path\n     * @returns Windows style path\n     */\n    static windowsPath(path: string): string {\n        const offset = path.charAt(0) === '/' ? 1 : 0;\n        if (path.charAt(offset + 1) === ':') {\n            const driveLetter = path.charAt(offset).toUpperCase();\n            const substring = path.substring(offset + 2).replace(/\\//g, '\\\\');\n            return `${driveLetter}:${substring || '\\\\'}`;\n        }\n        return path.replace(/\\//g, '\\\\');\n    }\n\n    /**\n     * Tildify path, replacing `home` with `~` if user's `home` is present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static tildify(resourcePath: string, home: string): string {\n        const path = new Path(resourcePath);\n        const isWindows = path.root && Path.isDrive(path.root.base);\n\n        if (!isWindows && home && resourcePath.indexOf(`${home}/`) === 0) {\n            return resourcePath.replace(`${home}/`, '~/');\n        }\n\n        return resourcePath;\n    }\n\n    /**\n     * Untildify path, replacing `~` with `home` if `~` present at the beginning of the path.\n     * This is a non-operation for Windows.\n     *\n     * @param resourcePath\n     * @param home\n     */\n    static untildify(resourcePath: string, home: string): string {\n        if (resourcePath.startsWith('~')) {\n            const untildifiedResource = resourcePath.replace(/^~/, home);\n            const untildifiedPath = new Path(untildifiedResource);\n            const isWindows = untildifiedPath.root && Path.isDrive(untildifiedPath.root.base);\n            if (!isWindows && home && untildifiedResource.startsWith(`${home}`)) {\n                return untildifiedResource;\n            }\n        }\n        return resourcePath;\n    }\n\n    readonly isAbsolute: boolean;\n    readonly isRoot: boolean;\n    readonly root: Path | undefined;\n    readonly base: string;\n    readonly name: string;\n    readonly ext: string;\n\n    private _dir: Path;\n    private readonly raw: string;\n\n    /**\n     * The raw should be normalized, meaning that only '/' is allowed as a path separator.\n     */\n    constructor(\n        raw: string\n    ) {\n        raw = Path.normalizePathSeparator(raw);\n        this.raw = Path.normalizeDrive(raw);\n        const firstIndex = this.raw.indexOf(Path.separator);\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        this.isAbsolute = firstIndex === 0;\n        this.base = lastIndex === -1 ? this.raw : this.raw.substr(lastIndex + 1);\n        this.isRoot = this.isAbsolute && firstIndex === lastIndex && (!this.base || Path.isDrive(this.base));\n        this.root = this.computeRoot();\n\n        const extIndex = this.base.lastIndexOf('.');\n        this.name = extIndex === -1 ? this.base : this.base.substr(0, extIndex);\n        this.ext = extIndex === -1 ? '' : this.base.substr(extIndex);\n    }\n\n    protected computeRoot(): Path | undefined {\n        // '/' -> '/'\n        // '/c:' -> '/c:'\n        if (this.isRoot) {\n            return this;\n        }\n        // 'foo/bar' -> `undefined`\n        if (!this.isAbsolute) {\n            return undefined;\n        }\n        const index = this.raw.indexOf(Path.separator, Path.separator.length);\n        if (index === -1) {\n            // '/foo/bar' -> '/'\n            return new Path(Path.separator);\n        }\n        // '/c:/foo/bar' -> '/c:'\n        // '/foo/bar' -> '/'\n        return new Path(this.raw.substr(0, index)).root;\n    }\n\n    /**\n     * Returns the parent directory if it exists (`hasDir === true`) or `this` otherwise.\n     */\n    get dir(): Path {\n        if (this._dir === undefined) {\n            this._dir = this.computeDir();\n        }\n        return this._dir;\n    }\n\n    /**\n     * Returns `true` if this has a parent directory, `false` otherwise.\n     *\n     * _This implementation returns `true` if and only if this is not the root dir and\n     * there is a path separator in the raw path._\n     */\n    get hasDir(): boolean {\n        return !this.isRoot && this.raw.lastIndexOf(Path.separator) !== -1;\n    }\n\n    protected computeDir(): Path {\n        if (!this.hasDir) {\n            return this;\n        }\n        const lastIndex = this.raw.lastIndexOf(Path.separator);\n        if (this.isAbsolute) {\n            const firstIndex = this.raw.indexOf(Path.separator);\n            if (firstIndex === lastIndex) {\n                return new Path(this.raw.substr(0, firstIndex + 1));\n            }\n        }\n        return new Path(this.raw.substr(0, lastIndex));\n    }\n\n    join(...paths: string[]): Path {\n        const relativePath = paths.filter(s => !!s).join(Path.separator);\n        if (!relativePath) {\n            return this;\n        }\n        if (this.raw.endsWith(Path.separator)) {\n            return new Path(this.raw + relativePath);\n        }\n        return new Path(this.raw + Path.separator + relativePath);\n    }\n\n    /**\n     *\n     * @param paths portions of a path\n     * @returns a new Path if an absolute path can be computed from the segments passed in + this.raw\n     * If no absolute path can be computed, returns undefined.\n     *\n     * Processes the path segments passed in from right to left (reverse order) concatenating until an\n     * absolute path is found.\n     */\n    resolve(...paths: string[]): Path | undefined {\n        const segments = paths.slice().reverse(); // Don't mutate the caller's array.\n        segments.push(this.raw);\n        let result = new Path('');\n        for (const segment of segments) {\n            if (segment) {\n                const next = new Path(segment).join(result.raw);\n                if (next.isAbsolute) {\n                    return next.normalize();\n                }\n                result = next;\n            }\n        }\n    }\n\n    toString(): string {\n        return this.raw;\n    }\n\n    /**\n     * Converts the current path into a file system path.\n     * @param format Determines the format of the path.\n     * If `undefined`, the format will be determined by the `OS.backend.type` value.\n     * @returns A file system path.\n     */\n    fsPath(format?: Path.Format): string {\n        if (format === Path.Format.Windows || (format === undefined && OS.backend.isWindows)) {\n            return Path.windowsPath(this.raw);\n        } else {\n            return this.raw;\n        }\n    }\n\n    relative(path: Path): Path | undefined {\n        if (this.raw === path.raw) {\n            return new Path('');\n        }\n        if (!this.raw || !path.raw) {\n            return undefined;\n        }\n        const raw = this.base ? this.raw + Path.separator : this.raw;\n        if (!path.raw.startsWith(raw)) {\n            return undefined;\n        }\n        const relativePath = path.raw.substr(raw.length);\n        return new Path(relativePath);\n    }\n\n    isEqualOrParent(path: Path): boolean {\n        return !!this.relative(path);\n    }\n\n    relativity(path: Path): number {\n        const relative = this.relative(path);\n        if (relative) {\n            const relativeStr = relative.toString();\n            if (relativeStr === '') {\n                return 0;\n            }\n            return relativeStr.split(Path.separator).length;\n        }\n        return -1;\n    }\n\n    /*\n     * return a normalized Path, resolving '..' and '.' segments\n     */\n    normalize(): Path {\n        const trailingSlash = this.raw.endsWith('/');\n        const pathArray = this.toString().split('/');\n        const resultArray: string[] = [];\n        pathArray.forEach((value, index) => {\n            if (!value || value === '.') {\n                return;\n            }\n            if (value === '..') {\n                if (resultArray.length && resultArray[resultArray.length - 1] !== '..') {\n                    resultArray.pop();\n                } else if (!this.isAbsolute) {\n                    resultArray.push('..');\n                }\n            } else {\n                resultArray.push(value);\n            }\n        });\n        if (resultArray.length === 0) {\n            if (this.isRoot) {\n                return new Path('/');\n            } else {\n                return new Path('.');\n            }\n        }\n        return new Path((this.isAbsolute ? '/' : '') + resultArray.join('/') + (trailingSlash ? '/' : ''));\n    }\n}\n\nexport namespace Path {\n    export enum Format {\n        Posix,\n        Windows\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// copied from https://github.com/Microsoft/vscode/blob/bf7ac9201e7a7d01741d4e6e64b5dc9f3197d97b/src/vs/base/common/paths.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/* eslint-disable no-void */\n/* eslint-disable no-null/no-null */\n'use strict';\nimport { isWindows } from './os';\nimport { startsWithIgnoreCase } from './strings';\nimport { CharCode } from './char-code';\n\n/**\n * The forward slash path separator.\n */\nexport const sep = '/';\n\n/**\n * The native path separator depending on the OS.\n */\nexport const nativeSep = isWindows ? '\\\\' : '/';\n\nconst _posixBadPath = /(\\/\\.\\.?\\/)|(\\/\\.\\.?)$|^(\\.\\.?\\/)|(\\/\\/+)|(\\\\)/;\nconst _winBadPath = /(\\\\\\.\\.?\\\\)|(\\\\\\.\\.?)$|^(\\.\\.?\\\\)|(\\\\\\\\+)|(\\/)/;\n\nfunction _isNormal(path: string, win: boolean): boolean {\n    return win\n        ? !_winBadPath.test(path)\n        : !_posixBadPath.test(path);\n}\n\n/**\n * @returns the base name of a path.\n */\nexport function basename(path: string): string {\n    const idx = ~path.lastIndexOf('/') || ~path.lastIndexOf('\\\\');\n    if (idx === 0) {\n        return path;\n    } else if (~idx === path.length - 1) {\n        return basename(path.substring(0, path.length - 1));\n    } else {\n        return path.substr(~idx + 1);\n    }\n}\n\n/**\n * @returns `.far` from `boo.far` or the empty string.\n */\nexport function extname(path: string): string {\n    path = basename(path);\n    const idx = ~path.lastIndexOf('.');\n    return idx ? path.substring(~idx) : '';\n}\n\nexport function normalize(path: string, toOSPath?: boolean): string {\n    if (path === null || path === void 0) {\n        return path;\n    }\n\n    const len = path.length;\n    if (len === 0) {\n        return '.';\n    }\n\n    const wantsBackslash = isWindows && toOSPath;\n    if (_isNormal(path, wantsBackslash!)) {\n        return path;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-shadow\n    const sep = wantsBackslash ? '\\\\' : '/';\n    const root = getRoot(path, sep);\n\n    // skip the root-portion of the path\n    let start = root.length;\n    let skip = false;\n    let res = '';\n\n    for (let end = root.length; end <= len; end++) {\n\n        // either at the end or at a path-separator character\n        if (end === len || path.charCodeAt(end) === CharCode.Slash || path.charCodeAt(end) === CharCode.Backslash) {\n\n            if (streql(path, start, end, '..')) {\n                // skip current and remove parent (if there is already something)\n                const prev_start = res.lastIndexOf(sep);\n                const prev_part = res.slice(prev_start + 1);\n                if ((root || prev_part.length > 0) && prev_part !== '..') {\n                    res = prev_start === -1 ? '' : res.slice(0, prev_start);\n                    skip = true;\n                }\n            } else if (streql(path, start, end, '.') && (root || res || end < len - 1)) {\n                // skip current (if there is already something or if there is more to come)\n                skip = true;\n            }\n\n            if (!skip) {\n                const part = path.slice(start, end);\n                if (res !== '' && res[res.length - 1] !== sep) {\n                    res += sep;\n                }\n                res += part;\n            }\n            start = end + 1;\n            skip = false;\n        }\n    }\n\n    return root + res;\n}\nfunction streql(value: string, start: number, end: number, other: string): boolean {\n    return start + other.length === end && value.indexOf(other, start) === start;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\n// eslint-disable-next-line @typescript-eslint/no-shadow\nexport function getRoot(path: string, sep: string = '/'): string {\n\n    if (!path) {\n        return '';\n    }\n\n    const len = path.length;\n    let code = path.charCodeAt(0);\n    if (code === CharCode.Slash || code === CharCode.Backslash) {\n\n        code = path.charCodeAt(1);\n        if (code === CharCode.Slash || code === CharCode.Backslash) {\n            // UNC candidate \\\\localhost\\shares\\ddd\n            //               ^^^^^^^^^^^^^^^^^^^\n            code = path.charCodeAt(2);\n            if (code !== CharCode.Slash && code !== CharCode.Backslash) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let pos = 3;\n                const start = pos;\n                for (; pos < len; pos++) {\n                    code = path.charCodeAt(pos);\n                    if (code === CharCode.Slash || code === CharCode.Backslash) {\n                        break;\n                    }\n                }\n                code = path.charCodeAt(pos + 1);\n                if (start !== pos && code !== CharCode.Slash && code !== CharCode.Backslash) {\n                    pos += 1;\n                    for (; pos < len; pos++) {\n                        code = path.charCodeAt(pos);\n                        if (code === CharCode.Slash || code === CharCode.Backslash) {\n                            return path.slice(0, pos + 1) // consume this separator\n                                .replace(/[\\\\/]/g, sep);\n                        }\n                    }\n                }\n            }\n        }\n\n        // /user/far\n        // ^\n        return sep;\n\n    } else if ((code >= CharCode.A && code <= CharCode.Z) || (code >= CharCode.a && code <= CharCode.z)) {\n        // check for windows drive letter c:\\ or c:\n\n        if (path.charCodeAt(1) === CharCode.Colon) {\n            code = path.charCodeAt(2);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                // C:\\fff\n                // ^^^\n                return path.slice(0, 2) + sep;\n            } else {\n                // C:\n                // ^^\n                return path.slice(0, 2);\n            }\n        }\n    }\n\n    // check for URI\n    // scheme://authority/path\n    // ^^^^^^^^^^^^^^^^^^^\n    let pos = path.indexOf('://');\n    if (pos !== -1) {\n        pos += 3; // 3 -> \"://\".length\n        for (; pos < len; pos++) {\n            code = path.charCodeAt(pos);\n            if (code === CharCode.Slash || code === CharCode.Backslash) {\n                return path.slice(0, pos + 1); // consume this separator\n            }\n        }\n    }\n\n    return '';\n}\n\nexport function isEqualOrParent(path: string, candidate: string, ignoreCase?: boolean): boolean {\n    if (path === candidate) {\n        return true;\n    }\n\n    if (!path || !candidate) {\n        return false;\n    }\n\n    if (candidate.length > path.length) {\n        return false;\n    }\n\n    if (ignoreCase) {\n        const beginsWith = startsWithIgnoreCase(path, candidate);\n        if (!beginsWith) {\n            return false;\n        }\n\n        if (candidate.length === path.length) {\n            return true; // same path, different casing\n        }\n\n        let sepOffset = candidate.length;\n        if (candidate.charAt(candidate.length - 1) === nativeSep) {\n            sepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n        }\n\n        return path.charAt(sepOffset) === nativeSep;\n    }\n\n    if (candidate.charAt(candidate.length - 1) !== nativeSep) {\n        candidate += nativeSep;\n    }\n\n    return path.indexOf(candidate) === 0;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Disposable } from './disposable';\nimport { Event } from './event';\nimport { CancellationToken, CancellationError, cancelled } from './cancellation';\n\n/**\n * Simple implementation of the deferred pattern.\n * An object that exposes a promise and functions to resolve and reject it.\n */\nexport class Deferred<T = void> {\n    state: 'resolved' | 'rejected' | 'unresolved' = 'unresolved';\n    resolve: (value: T | PromiseLike<T>) => void;\n    reject: (err?: unknown) => void;\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    }).then(\n        res => (this.setState('resolved'), res),\n        err => (this.setState('rejected'), Promise.reject(err)),\n    );\n\n    protected setState(state: 'resolved' | 'rejected'): void {\n        if (this.state === 'unresolved') {\n            this.state = state;\n        }\n    }\n}\n\n/**\n * @returns resolves after a specified number of milliseconds\n * @throws cancelled if a given token is cancelled before a specified number of milliseconds\n */\nexport function timeout(ms: number, token = CancellationToken.None): Promise<void> {\n    const deferred = new Deferred<void>();\n    const handle = setTimeout(() => deferred.resolve(), ms);\n    token.onCancellationRequested(() => {\n        clearTimeout(handle);\n        deferred.reject(cancelled());\n    });\n    return deferred.promise;\n}\n\n/**\n * Creates a promise that is rejected after the given amount of time. A typical use case is to wait for another promise until a specified timeout using:\n * ```\n * Promise.race([ promiseToPerform, timeoutReject(timeout, 'Timeout error message') ]);\n * ```\n *\n * @param ms timeout in milliseconds\n * @param message error message on promise rejection\n * @returns rejection promise\n */\nexport function timeoutReject<T>(ms: number, message?: string): Promise<T> {\n    const deferred = new Deferred<T>();\n    setTimeout(() => deferred.reject(new Error(message)), ms);\n    return deferred.promise;\n}\n\nexport async function retry<T>(task: () => Promise<T>, retryDelay: number, retries: number): Promise<T> {\n    let lastError: Error | undefined;\n\n    for (let i = 0; i < retries; i++) {\n        try {\n            return await task();\n        } catch (error) {\n            lastError = error;\n\n            await timeout(retryDelay);\n        }\n    }\n\n    throw lastError;\n}\n\n/**\n * A function to allow a promise resolution to be delayed by a number of milliseconds. Usage is as follows:\n *\n * `const stringValue = await myPromise.then(delay(600)).then(value => value.toString());`\n *\n * @param ms the number of millisecond to delay\n * @returns a function that returns a promise that returns the given value, but delayed\n */\nexport function delay<T>(ms: number): (value: T) => Promise<T> {\n    return value => new Promise((resolve, reject) => { setTimeout(() => resolve(value), ms); });\n}\n\n/**\n * Constructs a promise that will resolve after a given delay.\n * @param ms the number of milliseconds to wait\n */\nexport async function wait(ms: number): Promise<void> {\n    await delay(ms)(undefined);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function waitForEvent<T>(event: Event<T>, ms: number, thisArg?: any, disposables?: Disposable[]): Promise<T> {\n    return new Promise<T>((resolve, reject) => {\n        const registration = setTimeout(() => {\n            listener.dispose();\n            reject(new CancellationError());\n        }, ms);\n\n        const listener = event((evt: T) => {\n            clearTimeout(registration);\n            listener.dispose();\n            resolve(evt);\n        }, thisArg, disposables);\n\n    });\n}\n\nexport function isThenable<T>(obj: unknown): obj is Promise<T> {\n    return typeof obj === 'object' && !!obj && typeof (obj as Promise<unknown>).then === 'function';\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { DiagnosticSeverity } from 'vscode-languageserver-protocol';\n\nexport enum Severity {\n    Ignore = 0,\n    Error = 1,\n    Warning = 2,\n    Info = 3,\n    Log = 4\n}\n\nexport namespace Severity {\n    const error = 'Errors';\n    const warning = 'Warnings';\n    const info = 'Info';\n    const log = 'Log';\n    const ignore = 'All';\n\n    export function fromValue(value: string | undefined): Severity {\n        value = value && value.toLowerCase();\n\n        if (!value) {\n            return Severity.Ignore;\n        }\n        if (['error', 'errors'].indexOf(value) !== -1) {\n            return Severity.Error;\n        }\n        if (['warn', 'warning', 'warnings'].indexOf(value) !== -1) {\n            return Severity.Warning;\n        }\n        if (value === 'info') {\n            return Severity.Info;\n        }\n        if (value === 'log') {\n            return Severity.Log;\n        }\n\n        return Severity.Ignore;\n    }\n\n    export function toDiagnosticSeverity(value: Severity): DiagnosticSeverity {\n        switch (value) {\n            case Severity.Ignore:\n                return DiagnosticSeverity.Hint;\n            case Severity.Info:\n                return DiagnosticSeverity.Information;\n            case Severity.Log:\n                return DiagnosticSeverity.Information;\n            case Severity.Warning:\n                return DiagnosticSeverity.Warning;\n            case Severity.Error:\n                return DiagnosticSeverity.Error;\n            default:\n                return DiagnosticSeverity.Error;\n        }\n    }\n\n    export function toString(severity: Severity | undefined): string {\n        switch (severity) {\n            case Severity.Error:\n                return error;\n            case Severity.Warning:\n                return warning;\n            case Severity.Info:\n                return info;\n            case Severity.Log:\n                return log;\n            default:\n                return ignore;\n        }\n    }\n\n    export function toArray(): string[] {\n        return [ignore, error, warning, info, log];\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/stream.ts\n\n/* eslint-disable max-len */\n/* eslint-disable no-null/no-null */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { DisposableCollection, Disposable } from './disposable';\n\nexport interface ReadableStreamEvents<T> {\n\n    /**\n     * The 'data' event is emitted whenever the stream is\n     * relinquishing ownership of a chunk of data to a consumer.\n     */\n    on(event: 'data', callback: (data: T) => void): void;\n\n    /**\n     * Emitted when any error occurs.\n     */\n    on(event: 'error', callback: (err: Error) => void): void;\n\n    /**\n     * The 'end' event is emitted when there is no more data\n     * to be consumed from the stream. The 'end' event will\n     * not be emitted unless the data is completely consumed.\n     */\n    on(event: 'end', callback: () => void): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * stream for use in desktop and web environments.\n */\nexport interface ReadableStream<T> extends ReadableStreamEvents<T> {\n\n    /**\n     * Stops emitting any events until resume() is called.\n     */\n    pause(): void;\n\n    /**\n     * Starts emitting events again after pause() was called.\n     */\n    resume(): void;\n\n    /**\n     * Destroys the stream and stops emitting any event.\n     */\n    destroy(): void;\n\n    /**\n     * Allows to remove a listener that was previously added.\n     */\n    removeListener(event: string, callback: Function): void;\n}\n\n/**\n * A interface that emulates the API shape of a node.js readable\n * for use in desktop and web environments.\n */\nexport interface Readable<T> {\n\n    /**\n     * Read data from the underlying source. Will return\n     * null to indicate that no more data can be read.\n     */\n    read(): T | null;\n}\nexport namespace Readable {\n    export function fromString(value: string): Readable<string> {\n        let done = false;\n\n        return {\n            read(): string | null {\n                if (!done) {\n                    done = true;\n\n                    return value;\n                }\n\n                return null;\n            }\n        };\n    }\n    export function toString(readable: Readable<string>): string {\n        let result = '';\n        let chunk: string | null;\n        while ((chunk = readable.read()) != null) {\n            result += chunk;\n        }\n        return result;\n    }\n}\n\n/**\n * A interface that emulates the API shape of a node.js writeable\n * stream for use in desktop and web environments.\n */\nexport interface WriteableStream<T> extends ReadableStream<T> {\n\n    /**\n     * Writing data to the stream will trigger the on('data')\n     * event listener if the stream is flowing and buffer the\n     * data otherwise until the stream is flowing.\n     *\n     * If a `highWaterMark` is configured and writing to the\n     * stream reaches this mark, a promise will be returned\n     * that should be awaited on before writing more data.\n     * Otherwise there is a risk of buffering a large number\n     * of data chunks without consumer.\n     */\n    write(data: T): void | Promise<void>;\n\n    /**\n     * Signals an error to the consumer of the stream via the\n     * on('error') handler if the stream is flowing.\n     */\n    error(error: Error): void;\n\n    /**\n     * Signals the end of the stream to the consumer. If the\n     * result is not an error, will trigger the on('data') event\n     * listener if the stream is flowing and buffer the data\n     * otherwise until the stream is flowing.\n     *\n     * In case of an error, the on('error') event will be used\n     * if the stream is flowing.\n     */\n    end(result?: T | Error): void;\n}\n\n/**\n * A stream that has a buffer already read. Returns the original stream\n * that was read as well as the chunks that got read.\n *\n * The `ended` flag indicates if the stream has been fully consumed.\n */\nexport interface ReadableBufferedStream<T> {\n\n    /**\n     * The original stream that is being read.\n     */\n    stream: ReadableStream<T>;\n\n    /**\n     * An array of chunks already read from this stream.\n     */\n    buffer: T[];\n\n    /**\n     * Signals if the stream has ended or not. If not, consumers\n     * should continue to read from the stream until consumed.\n     */\n    ended: boolean;\n}\n\nexport function isReadableStream<T>(obj: unknown): obj is ReadableStream<T> {\n    const candidate = obj as ReadableStream<T>;\n\n    return candidate && [candidate.on, candidate.pause, candidate.resume, candidate.destroy].every(fn => typeof fn === 'function');\n}\n\nexport function isReadableBufferedStream<T>(obj: unknown): obj is ReadableBufferedStream<T> {\n    const candidate = obj as ReadableBufferedStream<T>;\n\n    return candidate && isReadableStream(candidate.stream) && Array.isArray(candidate.buffer) && typeof candidate.ended === 'boolean';\n}\n\nexport interface Reducer<T> {\n    (data: T[]): T;\n}\n\nexport interface DataTransformer<Original, Transformed> {\n    (data: Original): Transformed;\n}\n\nexport interface ErrorTransformer {\n    (error: Error): Error;\n}\n\nexport interface ITransformer<Original, Transformed> {\n    data: DataTransformer<Original, Transformed>;\n    error?: ErrorTransformer;\n}\n\nexport function newWriteableStream<T>(reducer: Reducer<T>, options?: WriteableStreamOptions): WriteableStream<T> {\n    return new WriteableStreamImpl<T>(reducer);\n}\n\nexport interface WriteableStreamOptions {\n\n    /**\n     * The number of objects to buffer before WriteableStream#write()\n     * signals back that the buffer is full. Can be used to reduce\n     * the memory pressure when the stream is not flowing.\n     */\n    highWaterMark?: number;\n}\n\nclass WriteableStreamImpl<T> implements WriteableStream<T> {\n\n    private readonly state = {\n        flowing: false,\n        ended: false,\n        destroyed: false\n    };\n\n    private readonly buffer = {\n        data: [] as T[],\n        error: [] as Error[]\n    };\n\n    private readonly listeners = {\n        data: [] as { (data: T): void }[],\n        error: [] as { (error: Error): void }[],\n        end: [] as { (): void }[]\n    };\n\n    private readonly pendingWritePromises: Function[] = [];\n\n    constructor(private reducer: Reducer<T>, private options?: WriteableStreamOptions) { }\n\n    pause(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        this.state.flowing = false;\n    }\n\n    resume(): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        if (!this.state.flowing) {\n            this.state.flowing = true;\n\n            // emit buffered events\n            this.flowData();\n            this.flowErrors();\n            this.flowEnd();\n        }\n    }\n\n    write(data: T): void | Promise<void> {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the data to listeners\n        if (this.state.flowing) {\n            this.listeners.data.forEach(listener => listener(data));\n        }\n\n        // not yet flowing: buffer data until flowing\n        else {\n            this.buffer.data.push(data);\n\n            // highWaterMark: if configured, signal back when buffer reached limits\n            if (typeof this.options?.highWaterMark === 'number' && this.buffer.data.length > this.options.highWaterMark) {\n                return new Promise(resolve => this.pendingWritePromises.push(resolve));\n            }\n        }\n    }\n\n    error(error: Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // flowing: directly send the error to listeners\n        if (this.state.flowing) {\n            this.listeners.error.forEach(listener => listener(error));\n        }\n\n        // not yet flowing: buffer errors until flowing\n        else {\n            this.buffer.error.push(error);\n        }\n    }\n\n    end(result?: T | Error): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        // end with data or error if provided\n        if (result instanceof Error) {\n            this.error(result);\n        } else if (result) {\n            this.write(result);\n        }\n\n        // flowing: send end event to listeners\n        if (this.state.flowing) {\n            this.listeners.end.forEach(listener => listener());\n\n            this.destroy();\n        }\n\n        // not yet flowing: remember state\n        else {\n            this.state.ended = true;\n        }\n    }\n\n    on(event: 'data', callback: (data: T) => void): void;\n    on(event: 'error', callback: (err: Error) => void): void;\n    on(event: 'end', callback: () => void): void;\n    on(event: 'data' | 'error' | 'end', callback: (arg0?: any) => void): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        switch (event) {\n            case 'data':\n                this.listeners.data.push(callback);\n\n                // switch into flowing mode as soon as the first 'data'\n                // listener is added and we are not yet in flowing mode\n                this.resume();\n\n                break;\n\n            case 'end':\n                this.listeners.end.push(callback);\n\n                // emit 'end' event directly if we are flowing\n                // and the end has already been reached\n                //\n                // finish() when it went through\n                if (this.state.flowing && this.flowEnd()) {\n                    this.destroy();\n                }\n\n                break;\n\n            case 'error':\n                this.listeners.error.push(callback);\n\n                // emit buffered 'error' events unless done already\n                // now that we know that we have at least one listener\n                if (this.state.flowing) {\n                    this.flowErrors();\n                }\n\n                break;\n        }\n    }\n\n    removeListener(event: string, callback: Function): void {\n        if (this.state.destroyed) {\n            return;\n        }\n\n        let listeners: unknown[] | undefined = undefined;\n\n        switch (event) {\n            case 'data':\n                listeners = this.listeners.data;\n                break;\n\n            case 'end':\n                listeners = this.listeners.end;\n                break;\n\n            case 'error':\n                listeners = this.listeners.error;\n                break;\n        }\n\n        if (listeners) {\n            const index = listeners.indexOf(callback);\n            if (index >= 0) {\n                listeners.splice(index, 1);\n            }\n        }\n    }\n\n    private flowData(): void {\n        if (this.buffer.data.length > 0) {\n            const fullDataBuffer = this.reducer(this.buffer.data);\n\n            this.listeners.data.forEach(listener => listener(fullDataBuffer));\n\n            this.buffer.data.length = 0;\n\n            // When the buffer is empty, resolve all pending writers\n            const pendingWritePromises = [...this.pendingWritePromises];\n            this.pendingWritePromises.length = 0;\n            pendingWritePromises.forEach(pendingWritePromise => pendingWritePromise());\n        }\n    }\n\n    private flowErrors(): void {\n        if (this.listeners.error.length > 0) {\n            for (const error of this.buffer.error) {\n                this.listeners.error.forEach(listener => listener(error));\n            }\n\n            this.buffer.error.length = 0;\n        }\n    }\n\n    private flowEnd(): boolean {\n        if (this.state.ended) {\n            this.listeners.end.forEach(listener => listener());\n\n            return this.listeners.end.length > 0;\n        }\n\n        return false;\n    }\n\n    destroy(): void {\n        if (!this.state.destroyed) {\n            this.state.destroyed = true;\n            this.state.ended = true;\n\n            this.buffer.data.length = 0;\n            this.buffer.error.length = 0;\n\n            this.listeners.data.length = 0;\n            this.listeners.error.length = 0;\n            this.listeners.end.length = 0;\n\n            this.pendingWritePromises.length = 0;\n        }\n    }\n}\n\n/**\n * Helper to fully read a T readable into a T.\n */\nexport function consumeReadable<T>(readable: Readable<T>, reducer: Reducer<T>): T {\n    const chunks: T[] = [];\n\n    let chunk: T | null;\n    while ((chunk = readable.read()) !== null) {\n        chunks.push(chunk);\n    }\n\n    return reducer(chunks);\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function consumeReadableWithLimit<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to read a T readable up to a maximum of chunks. If the limit is\n * reached, will return a readable instead to ensure all data can still\n * be read.\n */\nexport function peekReadable<T>(readable: Readable<T>, reducer: Reducer<T>, maxChunks: number): T | Readable<T> {\n    const chunks: T[] = [];\n\n    let chunk: T | null | undefined = undefined;\n    while ((chunk = readable.read()) !== null && chunks.length < maxChunks) {\n        chunks.push(chunk);\n    }\n\n    // If the last chunk is null, it means we reached the end of\n    // the readable and return all the data at once\n    if (chunk === null && chunks.length > 0) {\n        return reducer(chunks);\n    }\n\n    // Otherwise, we still have a chunk, it means we reached the maxChunks\n    // value and as such we return a new Readable that first returns\n    // the existing read chunks and then continues with reading from\n    // the underlying readable.\n    return {\n        read: () => {\n\n            // First consume chunks from our array\n            if (chunks.length > 0) {\n                return chunks.shift()!;\n            }\n\n            // Then ensure to return our last read chunk\n            if (typeof chunk !== 'undefined') {\n                const lastReadChunk = chunk;\n\n                // explicitly use undefined here to indicate that we consumed\n                // the chunk, which could have either been null or valued.\n                chunk = undefined;\n\n                return lastReadChunk;\n            }\n\n            // Finally delegate back to the Readable\n            return readable.read();\n        }\n    };\n}\n\n/**\n * Helper to fully read a T stream into a T.\n */\nexport function consumeStream<T>(stream: ReadableStream<T>, reducer: Reducer<T>): Promise<T> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        stream.on('data', data => chunks.push(data));\n        stream.on('error', error => reject(error));\n        stream.on('end', () => resolve(reducer(chunks)));\n    });\n}\n\n/**\n * Helper to peek up to `maxChunks` into a stream. The return type signals if\n * the stream has ended or not. If not, caller needs to add a `data` listener\n * to continue reading.\n */\nexport function peekStream<T>(stream: ReadableStream<T>, maxChunks: number): Promise<ReadableBufferedStream<T>> {\n    return new Promise((resolve, reject) => {\n        const streamListeners = new DisposableCollection();\n\n        // Data Listener\n        const buffer: T[] = [];\n        const dataListener = (chunk: T) => {\n\n            // Add to buffer\n            buffer.push(chunk);\n\n            // We reached maxChunks and thus need to return\n            if (buffer.length > maxChunks) {\n\n                // Dispose any listeners and ensure to pause the\n                // stream so that it can be consumed again by caller\n                streamListeners.dispose();\n                stream.pause();\n\n                return resolve({ stream, buffer, ended: false });\n            }\n        };\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('data', dataListener)));\n        stream.on('data', dataListener);\n\n        // Error Listener\n        const errorListener = (error: Error) => reject(error);\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('error', errorListener)));\n        stream.on('error', errorListener);\n\n        const endListener = () => resolve({ stream, buffer, ended: true });\n\n        streamListeners.push(Disposable.create(() => stream.removeListener('end', endListener)));\n        stream.on('end', endListener);\n    });\n}\n\n/**\n * Helper to read a T stream up to a maximum of chunks. If the limit is\n * reached, will return a stream instead to ensure all data can still\n * be read.\n */\nexport function consumeStreamWithLimit<T>(stream: ReadableStream<T>, reducer: Reducer<T>, maxChunks: number): Promise<T | ReadableStream<T>> {\n    return new Promise((resolve, reject) => {\n        const chunks: T[] = [];\n\n        let wrapperStream: WriteableStream<T> | undefined = undefined;\n\n        stream.on('data', data => {\n\n            // If we reach maxChunks, we start to return a stream\n            // and make sure that any data we have already read\n            // is in it as well\n            if (!wrapperStream && chunks.length === maxChunks) {\n                wrapperStream = newWriteableStream(reducer);\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.write(data);\n\n                return resolve(wrapperStream);\n            }\n\n            if (wrapperStream) {\n                wrapperStream.write(data);\n            } else {\n                chunks.push(data);\n            }\n        });\n\n        stream.on('error', error => {\n            if (wrapperStream) {\n                wrapperStream.error(error);\n            } else {\n                return reject(error);\n            }\n        });\n\n        stream.on('end', () => {\n            if (wrapperStream) {\n                while (chunks.length) {\n                    wrapperStream.write(chunks.shift()!);\n                }\n\n                wrapperStream.end();\n            } else {\n                return resolve(reducer(chunks));\n            }\n        });\n    });\n}\n\n/**\n * Helper to create a readable stream from an existing T.\n */\nexport function toStream<T>(t: T, reducer: Reducer<T>): ReadableStream<T> {\n    const stream = newWriteableStream<T>(reducer);\n\n    stream.end(t);\n\n    return stream;\n}\n\n/**\n * Helper to convert a T into a Readable<T>.\n */\nexport function toReadable<T>(t: T): Readable<T> {\n    let consumed = false;\n\n    return {\n        read: () => {\n            if (consumed) {\n                return null;\n            }\n\n            consumed = true;\n\n            return t;\n        }\n    };\n}\n\n/**\n * Helper to transform a readable stream into another stream.\n */\nexport function transform<Original, Transformed>(stream: ReadableStreamEvents<Original>, transformer: ITransformer<Original, Transformed>, reducer: Reducer<Transformed>): ReadableStream<Transformed> {\n    const target = newWriteableStream<Transformed>(reducer);\n\n    stream.on('data', data => target.write(transformer.data(data)));\n    stream.on('end', () => target.end());\n    stream.on('error', error => target.error(transformer.error ? transformer.error(error) : error));\n\n    return target;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/strings.ts\n\nimport { CharCode } from './char-code';\n\n/**\n * Determines if haystack ends with needle.\n */\nexport function endsWith(haystack: string, needle: string): boolean {\n    const diff = haystack.length - needle.length;\n    if (diff > 0) {\n        return haystack.indexOf(needle, diff) === diff;\n    } else if (diff === 0) {\n        return haystack === needle;\n    } else {\n        return false;\n    }\n}\nexport function isLowerAsciiLetter(code: number): boolean {\n    return code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n    return code >= CharCode.A && code <= CharCode.Z;\n}\n\nfunction isAsciiLetter(code: number): boolean {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n    const len1 = a ? a.length : 0;\n    const len2 = b ? b.length : 0;\n\n    if (len1 !== len2) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(a, b);\n}\n\nfunction doEqualsIgnoreCase(a: string, b: string, stopAt = a.length): boolean {\n    if (typeof a !== 'string' || typeof b !== 'string') {\n        return false;\n    }\n\n    for (let i = 0; i < stopAt; i++) {\n        const codeA = a.charCodeAt(i);\n        const codeB = b.charCodeAt(i);\n\n        if (codeA === codeB) {\n            continue;\n        }\n\n        // a-z A-Z\n        if (isAsciiLetter(codeA) && isAsciiLetter(codeB)) {\n            const diff = Math.abs(codeA - codeB);\n            if (diff !== 0 && diff !== 32) {\n                return false;\n            }\n        }\n\n        // Any other charcode\n        // tslint:disable-next-line:one-line\n        else {\n            if (String.fromCharCode(codeA).toLowerCase() !== String.fromCharCode(codeB).toLowerCase()) {\n                return false;\n            }\n        }\n    }\n\n    return true;\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n    let i: number;\n    const len = Math.min(a.length, b.length);\n\n    for (i = 0; i < len; i++) {\n        if (a.charCodeAt(i) !== b.charCodeAt(i)) {\n            return i;\n        }\n    }\n\n    return len;\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n    return value.replace(/[\\-\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)\\#]/g, '\\\\$&');\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n    const candidateLength = candidate.length;\n    if (candidate.length > str.length) {\n        return false;\n    }\n\n    return doEqualsIgnoreCase(str, candidate, candidateLength);\n}\n\nexport function* split(s: string, splitter: string): IterableIterator<string> {\n    let start = 0;\n    while (start < s.length) {\n        let end = s.indexOf(splitter, start);\n        if (end === -1) {\n            end = s.length;\n        }\n\n        yield s.substring(start, end);\n        start = end + splitter.length;\n    }\n}\n\nexport function escapeInvisibleChars(value: string): string {\n    return value.replace(/\\n/g, '\\\\n').replace(/\\r/g, '\\\\r');\n}\n\nexport function unescapeInvisibleChars(value: string): string {\n    return value.replace(/\\\\n/g, '\\n').replace(/\\\\r/g, '\\r');\n}\n\nexport function compare(a: string, b: string): number {\n    if (a < b) {\n        return -1;\n    } else if (a > b) {\n        return 1;\n    } else {\n        return 0;\n    }\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n        if (codeA < codeB) {\n            return -1;\n        } else if (codeA > codeB) {\n            return 1;\n        }\n    }\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n    return 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n    return compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n    for (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n        const codeA = a.charCodeAt(aStart);\n        const codeB = b.charCodeAt(bStart);\n\n        if (codeA === codeB) {\n            // equal\n            continue;\n        }\n\n        const diff = codeA - codeB;\n        if (diff === 32 && isUpperAsciiLetter(codeB)) { // codeB =[65-90] && codeA =[97-122]\n            continue;\n\n        } else if (diff === -32 && isUpperAsciiLetter(codeA)) {  // codeB =[97-122] && codeA =[65-90]\n            continue;\n        }\n\n        if (isLowerAsciiLetter(codeA) && isLowerAsciiLetter(codeB)) {\n            //\n            return diff;\n\n        } else {\n            return compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n        }\n    }\n\n    const aLen = aEnd - aStart;\n    const bLen = bEnd - bStart;\n\n    if (aLen < bLen) {\n        return -1;\n    } else if (aLen > bLen) {\n        return 1;\n    }\n\n    return 0;\n}\n","// *****************************************************************************\n// Copyright (C) 2017 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI as Uri } from 'vscode-uri';\nimport { Path } from './path';\n\nexport class URI {\n\n    public static fromComponents(components: UriComponents): URI {\n        return new URI(Uri.revive(components));\n    }\n\n    private readonly codeUri: Uri;\n    private _path: Path | undefined;\n\n    constructor(uri: string | Uri = '') {\n        if (uri instanceof Uri) {\n            this.codeUri = uri;\n        } else {\n            this.codeUri = Uri.parse(uri);\n        }\n    }\n\n    /**\n     * TODO move implementation to `DefaultUriLabelProviderContribution.getName`\n     *\n     * @deprecated use `LabelProvider.getName` instead\n     */\n    get displayName(): string {\n        const base = this.path.base;\n        if (base) {\n            return base;\n        }\n        if (this.path.isRoot) {\n            return this.path.fsPath();\n        }\n        return '';\n    }\n\n    /**\n     * Return all uri from the current to the top most.\n     */\n    get allLocations(): URI[] {\n        const locations = [];\n        let location: URI = this;\n        while (!location.path.isRoot && location.path.hasDir) {\n            locations.push(location);\n            location = location.parent;\n        }\n        locations.push(location);\n        return locations;\n    }\n\n    get parent(): URI {\n        if (this.path.isRoot) {\n            return this;\n        }\n        return this.withPath(this.path.dir);\n    }\n\n    relative(uri: URI): Path | undefined {\n        if (this.authority !== uri.authority || this.scheme !== uri.scheme) {\n            return undefined;\n        }\n        return this.path.relative(uri.path);\n    }\n\n    resolve(path: string | Path): URI {\n        return this.withPath(this.path.join(path.toString()));\n    }\n\n    /**\n     * @returns a new, absolute URI if one can be computed from the path segments passed in.\n     */\n    resolveToAbsolute(...pathSegments: Array<string | Path>): URI | undefined {\n        const absolutePath = this.path.resolve(...pathSegments.map(path => path.toString()));\n        if (absolutePath) {\n            return this.withPath(absolutePath);\n        }\n    }\n\n    /**\n     * return a new URI replacing the current with the given scheme\n     */\n    withScheme(scheme: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return a new URI replacing the current with the given authority\n     */\n    withAuthority(authority: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            authority\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a authority\n     */\n    withoutAuthority(): URI {\n        return this.withAuthority('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given path\n     */\n    withPath(path: string | Path): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            path: path.toString()\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a path\n     */\n    withoutPath(): URI {\n        return this.withPath('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given query\n     */\n    withQuery(query: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            query\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a query\n     */\n    withoutQuery(): URI {\n        return this.withQuery('');\n    }\n\n    /**\n     * return a new URI replacing the current with the given fragment\n     */\n    withFragment(fragment: string): URI {\n        const newCodeUri = Uri.from({\n            ...this.codeUri.toJSON(),\n            scheme: this.codeUri.scheme,\n            fragment\n        });\n        return new URI(newCodeUri);\n    }\n\n    /**\n     * return this URI without a fragment\n     */\n    withoutFragment(): URI {\n        return this.withFragment('');\n    }\n\n    /**\n     * return a new URI replacing the current with its normalized path, resolving '..' and '.' segments\n     */\n    normalizePath(): URI {\n        return this.withPath(this.path.normalize());\n    }\n\n    get scheme(): string {\n        return this.codeUri.scheme;\n    }\n\n    get authority(): string {\n        return this.codeUri.authority;\n    }\n\n    get path(): Path {\n        if (this._path === undefined) {\n            this._path = new Path(this.codeUri.path);\n        }\n        return this._path;\n    }\n\n    get query(): string {\n        return this.codeUri.query;\n    }\n\n    get fragment(): string {\n        return this.codeUri.fragment;\n    }\n\n    toString(skipEncoding?: boolean): string {\n        return this.codeUri.toString(skipEncoding);\n    }\n\n    isEqual(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n\n        return caseSensitive\n            ? this.toString() === uri.toString()\n            : this.toString().toLowerCase() === uri.toString().toLowerCase();\n    }\n\n    isEqualOrParent(uri: URI, caseSensitive: boolean = true): boolean {\n        if (!this.hasSameOrigin(uri)) {\n            return false;\n        }\n        let left = this.path;\n        let right = uri.path;\n        if (!caseSensitive) {\n            left = new Path(left.toString().toLowerCase());\n            right = new Path(right.toString().toLowerCase());\n        }\n        return left.isEqualOrParent(right);\n    }\n\n    static getDistinctParents(uris: URI[]): URI[] {\n        const result: URI[] = [];\n        uris.forEach((uri, i) => {\n            if (!uris.some((otherUri, index) => index !== i && otherUri.isEqualOrParent(uri))) {\n                result.push(uri);\n            }\n        });\n        return result;\n    }\n\n    private hasSameOrigin(uri: URI): boolean {\n        return (this.authority === uri.authority) && (this.scheme === uri.scheme);\n    }\n\n    toComponents(): UriComponents {\n        return {\n            scheme: this.scheme,\n            authority: this.authority,\n            path: this.path.toString(),\n            query: this.query,\n            fragment: this.fragment\n        };\n    }\n}\n\nexport interface UriComponents {\n    scheme: string;\n    authority: string;\n    path: string;\n    query: string;\n    fragment: string;\n    external?: string;\n}\n\nexport default URI;\n","module.exports = require('@phosphor/coreutils');\n","module.exports = require('vscode-languageserver-protocol');\n","module.exports = require('vscode-uri');\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// Some entities copied and modified from https://github.com/Microsoft/vscode-debugadapter-node/blob/master/adapter/src/protocol.ts\n\nimport {\n    DebugAdapter,\n    DebugAdapterSession\n} from './debug-model';\nimport { DebugProtocol } from '@vscode/debugprotocol';\nimport { DebugChannel } from './debug-service';\n\n/**\n * [DebugAdapterSession](#DebugAdapterSession) implementation.\n */\nexport class DebugAdapterSessionImpl implements DebugAdapterSession {\n\n    private channel: DebugChannel | undefined;\n    private isClosed: boolean = false;\n\n    constructor(\n        readonly id: string,\n        protected readonly debugAdapter: DebugAdapter\n    ) {\n        this.debugAdapter.onMessageReceived((message: string) => this.send(message));\n        this.debugAdapter.onClose(() => this.onDebugAdapterExit());\n        this.debugAdapter.onError(error => this.onDebugAdapterError(error));\n\n    }\n\n    async start(channel: DebugChannel): Promise<void> {\n\n        console.debug(`starting debug adapter session '${this.id}'`);\n        if (this.channel) {\n            throw new Error('The session has already been started, id: ' + this.id);\n        }\n        this.channel = channel;\n        this.channel.onMessage((message: string) => this.write(message));\n        this.channel.onClose(() => this.channel = undefined);\n\n    }\n\n    protected onDebugAdapterExit(): void {\n        this.isClosed = true;\n        console.debug(`onDebugAdapterExit session: '${this.id}'`);\n        if (this.channel) {\n            this.channel.close();\n            this.channel = undefined;\n        }\n    }\n\n    protected onDebugAdapterError(error: Error): void {\n        console.debug(`error in debug adapter session: '${this.id}': ${JSON.stringify(error)}`);\n        const event: DebugProtocol.Event = {\n            type: 'event',\n            event: 'error',\n            seq: -1,\n            body: error\n        };\n        this.send(JSON.stringify(event));\n    }\n\n    protected send(message: string): void {\n        if (this.channel) {\n            this.channel.send(message);\n        }\n    }\n\n    protected write(message: string): void {\n        if (!this.isClosed) {\n            this.debugAdapter.send(message);\n        }\n    }\n\n    async stop(): Promise<void> {\n        console.debug(`stopping debug adapter session: '${this.id}'`);\n\n        if (!this.isClosed) {\n            await this.debugAdapter.stop();\n        }\n        this.channel?.close();\n        this.channel = undefined;\n    }\n}\n","/********************************************************************************\n * Copyright (C) 2022 STMicroelectronics and others.\n *\n * This program and the accompanying materials are made available under the\n * terms of the Eclipse Public License v. 2.0 which is available at\n * http://www.eclipse.org/legal/epl-2.0.\n *\n * This Source Code may also be made available under the following Secondary\n * Licenses when the conditions for such availability set forth in the Eclipse\n * Public License v. 2.0 are satisfied: GNU General Public License, version 2\n * with the GNU Classpath Exception which is available at\n * https://www.gnu.org/software/classpath/license.html.\n *\n * SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n ********************************************************************************/\n\n/**\n * The URI scheme for debug URIs.\n */\nexport const DEBUG_SCHEME = 'debug';\n/**\n * The pattern for URI schemes.\n */\nexport const SCHEME_PATTERN = /^[a-zA-Z][a-zA-Z0-9\\+\\-\\.]+:/;\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DebugAdapter } from './debug-model';\nimport * as theia from '@theia/plugin';\n\n/**\n * A debug adapter for using the inline implementation from a plugin.\n */\nexport class InlineDebugAdapter implements DebugAdapter {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    onError: Event<Error> = Event.None;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    constructor(private debugAdapter: theia.DebugAdapter) {\n        this.debugAdapter.onDidSendMessage(msg => {\n            this.messageReceivedEmitter.fire(JSON.stringify(msg));\n        });\n    }\n\n    async start(): Promise<void> {\n    }\n\n    send(message: string): void {\n        this.debugAdapter.handleMessage(JSON.parse(message));\n    }\n\n    async stop(): Promise<void> {\n        this.debugAdapter.dispose();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ChildProcess } from 'child_process';\nimport * as stream from 'stream';\nimport * as net from 'net';\nimport { DebugAdapter } from '../common/debug-model';\n\nabstract class StreamDebugAdapter extends DisposableCollection {\n    private messageReceivedEmitter = new Emitter<string>();\n    onMessageReceived: Event<string> = this.messageReceivedEmitter.event;\n    private errorEmitter = new Emitter<Error>();\n    onError: Event<Error> = this.errorEmitter.event;\n    private closeEmitter = new Emitter<void>();\n    onClose: Event<void> = this.closeEmitter.event;\n\n    // these constants are for the message header, see: https://microsoft.github.io/debug-adapter-protocol/overview#header-part\n    private static TWO_CRLF = '\\r\\n\\r\\n';\n    private static CONTENT_LENGTH = 'Content-Length';\n    private contentLength: number = -1;\n    private buffer: Buffer = Buffer.alloc(0);\n\n    constructor(private fromAdapter: stream.Readable, private toAdapter: stream.Writable) {\n        super();\n\n        this.fromAdapter.on('data', (data: Buffer) => this.handleData(data));\n        this.fromAdapter.on('close', () => this.handleClosed()); // FIXME pass a proper exit code\n        this.fromAdapter.on('error', error => this.errorEmitter.fire(error));\n        this.toAdapter.on('error', error => this.errorEmitter.fire(error));\n    }\n\n    handleClosed(): void {\n        this.closeEmitter.fire();\n    }\n\n    send(message: string): void {\n        const msg = `${StreamDebugAdapter.CONTENT_LENGTH}: ${Buffer.byteLength(message, 'utf8')}${StreamDebugAdapter.TWO_CRLF}${message}`;\n\n        this.toAdapter.write(msg, 'utf8');\n    }\n\n    protected handleData(data: Buffer): void {\n        this.buffer = Buffer.concat([this.buffer, data]);\n\n        while (true) {\n            if (this.contentLength >= 0) {\n                if (this.buffer.length >= this.contentLength) {\n                    const message = this.buffer.toString('utf8', 0, this.contentLength);\n                    this.buffer = this.buffer.slice(this.contentLength);\n                    this.contentLength = -1;\n\n                    if (message.length > 0) {\n                        this.messageReceivedEmitter.fire(message);\n                    }\n                    continue; // there may be more complete messages to process\n                }\n            } else {\n                let idx = this.buffer.indexOf(StreamDebugAdapter.CONTENT_LENGTH);\n                if (idx > 0) {\n                    // log unrecognized output\n                    const output = this.buffer.slice(0, idx);\n                    console.log(output.toString('utf-8'));\n\n                    this.buffer = this.buffer.slice(idx);\n                }\n\n                idx = this.buffer.indexOf(StreamDebugAdapter.TWO_CRLF);\n                if (idx !== -1) {\n                    const header = this.buffer.toString('utf8', 0, idx);\n                    const lines = header.split('\\r\\n');\n                    for (let i = 0; i < lines.length; i++) {\n                        const pair = lines[i].split(/: +/);\n                        if (pair[0] === StreamDebugAdapter.CONTENT_LENGTH) {\n                            this.contentLength = +pair[1];\n                        }\n                    }\n                    this.buffer = this.buffer.slice(idx + StreamDebugAdapter.TWO_CRLF.length);\n                    continue;\n                }\n            }\n            break;\n        }\n    }\n}\n\nexport class ProcessDebugAdapter extends StreamDebugAdapter implements DebugAdapter {\n    protected readonly process: ChildProcess;\n    constructor(process: ChildProcess) {\n        super(process.stdout!, process.stdin!);\n        this.process = process;\n    }\n\n    async stop(): Promise<void> {\n        this.process.kill();\n        this.process.stdin?.end();\n    }\n}\n\nexport class SocketDebugAdapter extends StreamDebugAdapter implements DebugAdapter {\n    private readonly socket: net.Socket;\n    constructor(socket: net.Socket) {\n        super(socket, socket);\n        this.socket = socket;\n    }\n\n    stop(): Promise<void> {\n        return new Promise<void>(resolve => {\n            this.socket.end(() => resolve());\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { match as matchGlobPattern } from '@theia/core/lib/common/glob';\n\nexport interface RelativePattern {\n    base: string;\n    pattern: string;\n    pathToRelative(from: string, to: string): string;\n}\n\nexport interface LanguageFilter {\n    language?: string;\n    scheme?: string;\n    pattern?: string | RelativePattern;\n    hasAccessToAllModels?: boolean;\n}\nexport type LanguageSelector = string | LanguageFilter | (string | LanguageFilter)[];\n\nexport function score(selector: LanguageSelector | undefined, uriScheme: string, path: string, candidateLanguage: string, candidateIsSynchronized: boolean): number {\n\n    if (Array.isArray(selector)) {\n        let ret = 0;\n        for (const filter of selector) {\n            const value = score(filter, uriScheme, path, candidateLanguage, candidateIsSynchronized);\n            if (value === 10) {\n                return value;\n            }\n            if (value > ret) {\n                ret = value;\n            }\n        }\n        return ret;\n\n    } else if (typeof selector === 'string') {\n\n        if (!candidateIsSynchronized) {\n            return 0;\n        }\n\n        if (selector === '*') {\n            return 5;\n        } else if (selector === candidateLanguage) {\n            return 10;\n        } else {\n            return 0;\n        }\n\n    } else if (selector) {\n        const { language, pattern, scheme, hasAccessToAllModels } = selector;\n\n        if (!candidateIsSynchronized && !hasAccessToAllModels) {\n            return 0;\n        }\n\n        let result = 0;\n\n        if (scheme) {\n            if (scheme === uriScheme) {\n                result = 10;\n            } else if (scheme === '*') {\n                result = 5;\n            } else {\n                return 0;\n            }\n        }\n\n        if (language) {\n            if (language === candidateLanguage) {\n                result = 10;\n            } else if (language === '*') {\n                result = Math.max(result, 5);\n            } else {\n                return 0;\n            }\n        }\n\n        if (pattern) {\n            if (pattern === path || matchGlobPattern(pattern, path)) {\n                result = 10;\n            } else {\n                return 0;\n            }\n        }\n\n        return result;\n\n    } else {\n        return 0;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/platform/files/common/files.ts\n\nimport URI from '@theia/core/lib/common/uri';\nimport { Event } from '@theia/core/lib/common/event';\nimport { Disposable as IDisposable } from '@theia/core/lib/common/disposable';\nimport { BinaryBuffer, BinaryBufferReadableStream } from '@theia/core/lib/common/buffer';\nimport type { TextDocumentContentChangeEvent } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { ReadableStreamEvents } from '@theia/core/lib/common/stream';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\nexport const enum FileOperation {\n    CREATE,\n    DELETE,\n    MOVE,\n    COPY\n}\n\nexport class FileOperationEvent {\n\n    constructor(resource: URI, operation: FileOperation.DELETE);\n    constructor(resource: URI, operation: FileOperation.CREATE | FileOperation.MOVE | FileOperation.COPY, target: FileStatWithMetadata);\n    constructor(public readonly resource: URI, public readonly operation: FileOperation, public readonly target?: FileStatWithMetadata) { }\n\n    isOperation(operation: FileOperation.DELETE): boolean;\n    isOperation(operation: FileOperation.MOVE | FileOperation.COPY | FileOperation.CREATE): this is { readonly target: FileStatWithMetadata };\n    isOperation(operation: FileOperation): boolean {\n        return this.operation === operation;\n    }\n}\n\n/**\n * Possible changes that can occur to a file.\n */\nexport const enum FileChangeType {\n    UPDATED = 0,\n    ADDED = 1,\n    DELETED = 2\n}\n\n/**\n * Identifies a single change in a file.\n */\nexport interface FileChange {\n\n    /**\n     * The type of change that occurred to the file.\n     */\n    readonly type: FileChangeType;\n\n    /**\n     * The unified resource identifier of the file that changed.\n     */\n    readonly resource: URI;\n}\n\nexport class FileChangesEvent {\n\n    constructor(public readonly changes: readonly FileChange[]) { }\n\n    /**\n     * Returns true if this change event contains the provided file with the given change type (if provided). In case of\n     * type DELETED, this method will also return true if a folder got deleted that is the parent of the\n     * provided file path.\n     */\n    contains(resource: URI, type?: FileChangeType): boolean {\n        if (!resource) {\n            return false;\n        }\n\n        const checkForChangeType = typeof type === 'number';\n\n        return this.changes.some(change => {\n            if (checkForChangeType && change.type !== type) {\n                return false;\n            }\n\n            // For deleted also return true when deleted folder is parent of target path\n            if (change.type === FileChangeType.DELETED) {\n                return change.resource.isEqualOrParent(resource);\n            }\n\n            return change.resource.toString() === resource.toString();\n        });\n    }\n\n    /**\n     * Returns the changes that describe added files.\n     */\n    getAdded(): FileChange[] {\n        return this.getOfType(FileChangeType.ADDED);\n    }\n\n    /**\n     * Returns if this event contains added files.\n     */\n    gotAdded(): boolean {\n        return this.hasType(FileChangeType.ADDED);\n    }\n\n    /**\n     * Returns the changes that describe deleted files.\n     */\n    getDeleted(): FileChange[] {\n        return this.getOfType(FileChangeType.DELETED);\n    }\n\n    /**\n     * Returns if this event contains deleted files.\n     */\n    gotDeleted(): boolean {\n        return this.hasType(FileChangeType.DELETED);\n    }\n\n    /**\n     * Returns the changes that describe updated files.\n     */\n    getUpdated(): FileChange[] {\n        return this.getOfType(FileChangeType.UPDATED);\n    }\n\n    /**\n     * Returns if this event contains updated files.\n     */\n    gotUpdated(): boolean {\n        return this.hasType(FileChangeType.UPDATED);\n    }\n\n    private getOfType(type: FileChangeType): FileChange[] {\n        return this.changes.filter(change => change.type === type);\n    }\n\n    private hasType(type: FileChangeType): boolean {\n        return this.changes.some(change => change.type === type);\n    }\n}\n\nexport interface BaseStat {\n\n    /**\n     * The unified resource identifier of this file or folder.\n     */\n    resource: URI;\n\n    /**\n     * The name which is the last segment\n     * of the {{path}}.\n     */\n    name: string;\n\n    /**\n     * The size of the file.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    size?: number;\n\n    /**\n     * The last modification date represented as millis from unix epoch.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    mtime?: number;\n\n    /**\n     * The creation date represented as millis from unix epoch.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    ctime?: number;\n\n    /**\n     * A unique identifier that represents the\n     * current state of the file or directory.\n     *\n     * The value may or may not be resolved as\n     * it is optional.\n     */\n    etag?: string;\n}\nexport namespace BaseStat {\n    export function is(arg: unknown): arg is BaseStat {\n        return !!arg && typeof arg === 'object'\n            && ('resource' in arg && (arg as BaseStat).resource instanceof URI)\n            && ('name' in arg && typeof (arg as BaseStat).name === 'string');\n    }\n}\n\nexport interface BaseStatWithMetadata extends BaseStat {\n    mtime: number;\n    ctime: number;\n    etag: string;\n    size: number;\n}\n\n/**\n * A file resource with meta information.\n */\nexport interface FileStat extends BaseStat {\n\n    /**\n     * The resource is a file.\n     */\n    isFile: boolean;\n\n    /**\n     * The resource is a directory.\n     */\n    isDirectory: boolean;\n\n    /**\n     * The resource is a symbolic link.\n     */\n    isSymbolicLink: boolean;\n\n    /**\n     * The children of the file stat or undefined if none.\n     */\n    children?: FileStat[];\n}\nexport namespace FileStat {\n    export function is(arg: unknown): arg is FileStat {\n        const fileStat = arg as FileStat;\n        return BaseStat.is(fileStat) &&\n            ('isFile' in fileStat && typeof fileStat.isFile === 'boolean') &&\n            ('isDirectory' in fileStat && typeof fileStat.isDirectory === 'boolean') &&\n            ('isSymbolicLink' in fileStat && typeof fileStat.isSymbolicLink === 'boolean');\n    }\n    export function asFileType(stat: FileStat): FileType {\n        let res = 0;\n        if (stat.isFile) {\n            res += FileType.File;\n\n        } else if (stat.isDirectory) {\n            res += FileType.Directory;\n        }\n        if (stat.isSymbolicLink) {\n            res += FileType.SymbolicLink;\n        }\n        return res;\n    }\n    export function toStat(stat: FileStat): Stat | { type: FileType } & Partial<Stat> {\n        return {\n            type: asFileType(stat),\n            ctime: stat.ctime,\n            mtime: stat.mtime,\n            size: stat.size\n        };\n    }\n    export function fromStat(resource: URI, stat: Stat): FileStatWithMetadata;\n    export function fromStat(resource: URI, stat: { type: FileType } & Partial<Stat>): FileStat;\n    export function fromStat(resource: URI, stat: Stat | { type: FileType } & Partial<Stat>): FileStat {\n        return {\n            resource,\n            name: resource.path.base || resource.path.toString(),\n            isFile: (stat.type & FileType.File) !== 0,\n            isDirectory: (stat.type & FileType.Directory) !== 0,\n            isSymbolicLink: (stat.type & FileType.SymbolicLink) !== 0,\n            mtime: stat.mtime,\n            ctime: stat.ctime,\n            size: stat.size,\n            etag: etag({ mtime: stat.mtime, size: stat.size })\n        };\n    }\n    export function dir(resource: string | URI, stat?: Partial<Omit<Stat, 'type'>>): FileStat {\n        return fromStat(resource instanceof URI ? resource : new URI(resource), { type: FileType.Directory, ...stat });\n    }\n    export function file(resource: string | URI, stat?: Partial<Omit<Stat, 'type'>>): FileStat {\n        return fromStat(resource instanceof URI ? resource : new URI(resource), { type: FileType.File, ...stat });\n    }\n}\n\nexport interface FileStatWithMetadata extends FileStat, BaseStatWithMetadata {\n    mtime: number;\n    ctime: number;\n    etag: string;\n    size: number;\n    children?: FileStatWithMetadata[];\n}\n\nexport interface ResolveFileResult {\n    stat?: FileStat;\n    success: boolean;\n}\n\nexport interface ResolveFileResultWithMetadata extends ResolveFileResult {\n    stat?: FileStatWithMetadata;\n}\n\nexport interface FileContent extends BaseStatWithMetadata {\n\n    /**\n     * The content of a file as buffer.\n     */\n    value: BinaryBuffer;\n}\n\nexport interface FileStreamContent extends BaseStatWithMetadata {\n\n    /**\n     * The content of a file as stream.\n     */\n    value: BinaryBufferReadableStream;\n}\n\nexport interface WriteFileOptions {\n\n    /**\n     * The last known modification time of the file. This can be used to prevent dirty writes.\n     */\n    readonly mtime?: number;\n\n    /**\n     * The etag of the file. This can be used to prevent dirty writes.\n     */\n    readonly etag?: string;\n}\n\nexport interface ReadFileOptions extends FileReadStreamOptions {\n\n    /**\n     * The optional etag parameter allows to return early from resolving the resource if\n     * the contents on disk match the etag. This prevents accumulated reading of resources\n     * that have been read already with the same etag.\n     * It is the task of the caller to makes sure to handle this error case from the promise.\n     */\n    readonly etag?: string;\n}\n\nexport interface WriteFileOptions {\n\n    /**\n     * The last known modification time of the file. This can be used to prevent dirty writes.\n     */\n    readonly mtime?: number;\n\n    /**\n     * The etag of the file. This can be used to prevent dirty writes.\n     */\n    readonly etag?: string;\n}\n\nexport interface ResolveFileOptions {\n\n    /**\n     * Automatically continue resolving children of a directory until the provided resources\n     * are found.\n     */\n    readonly resolveTo?: readonly URI[];\n\n    /**\n     * Automatically continue resolving children of a directory if the number of children is 1.\n     */\n    readonly resolveSingleChildDescendants?: boolean;\n\n    /**\n     * Will resolve mtime, ctime, size and etag of files if enabled. This can have a negative impact\n     * on performance and thus should only be used when these values are required.\n     */\n    readonly resolveMetadata?: boolean;\n}\n\nexport interface ResolveMetadataFileOptions extends ResolveFileOptions {\n    readonly resolveMetadata: true;\n}\n\nexport interface FileOperationOptions {\n    /**\n     * Indicates that a user action triggered the opening, e.g.\n     * via mouse or keyboard use. Default is true.\n     */\n    fromUserGesture?: boolean\n}\n\nexport interface MoveFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport interface CopyFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport interface CreateFileOptions extends FileOperationOptions, Partial<FileOverwriteOptions> {\n}\n\nexport class FileOperationError extends Error {\n    constructor(message: string, public fileOperationResult: FileOperationResult, public options?: ReadFileOptions & WriteFileOptions & CreateFileOptions) {\n        super(message);\n        Object.setPrototypeOf(this, FileOperationError.prototype);\n    }\n}\n\nexport const enum FileOperationResult {\n    FILE_IS_DIRECTORY,\n    FILE_NOT_FOUND,\n    FILE_NOT_MODIFIED_SINCE,\n    FILE_MODIFIED_SINCE,\n    FILE_MOVE_CONFLICT,\n    FILE_READ_ONLY,\n    FILE_PERMISSION_DENIED,\n    FILE_TOO_LARGE,\n    FILE_INVALID_PATH,\n    FILE_EXCEEDS_MEMORY_LIMIT,\n    FILE_NOT_DIRECTORY,\n    FILE_OTHER_ERROR\n}\n\nexport interface FileOverwriteOptions {\n    /**\n     * Overwrite the file to create if it already exists on disk. Otherwise\n     * an error will be thrown (FILE_MODIFIED_SINCE).\n     */\n    overwrite: boolean;\n}\n\nexport interface FileReadStreamOptions {\n\n    /**\n     * Is an integer specifying where to begin reading from in the file. If position is undefined,\n     * data will be read from the current file position.\n     */\n    readonly position?: number;\n\n    /**\n     * Is an integer specifying how many bytes to read from the file. By default, all bytes\n     * will be read.\n     */\n    readonly length?: number;\n\n    /**\n     * If provided, the size of the file will be checked against the limits.\n     */\n    limits?: {\n        readonly size?: number;\n        readonly memory?: number;\n    };\n}\n\nexport interface FileUpdateOptions {\n    readEncoding: string;\n    writeEncoding: string;\n    overwriteEncoding: boolean;\n}\nexport interface FileUpdateResult extends Stat {\n    encoding: string;\n}\n\nexport interface FileWriteOptions {\n    overwrite: boolean;\n    create: boolean;\n}\n\nexport interface FileOpenOptions {\n    create: boolean;\n}\n\nexport interface FileDeleteOptions {\n    recursive: boolean;\n    useTrash: boolean;\n}\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport interface Stat {\n    type: FileType;\n\n    /**\n     * The last modification date represented as millis from unix epoch.\n     */\n    mtime: number;\n\n    /**\n     * The creation date represented as millis from unix epoch.\n     */\n    ctime: number;\n\n    size: number;\n}\n\nexport interface WatchOptions {\n    recursive: boolean;\n    excludes: string[];\n}\n\nexport const enum FileSystemProviderCapabilities {\n    FileReadWrite = 1 << 1,\n    FileOpenReadWriteClose = 1 << 2,\n    FileReadStream = 1 << 4,\n\n    FileFolderCopy = 1 << 3,\n\n    PathCaseSensitive = 1 << 10,\n    Readonly = 1 << 11,\n\n    Trash = 1 << 12,\n\n    Access = 1 << 24,\n    Update = 1 << 25\n}\n\nexport enum FileSystemProviderErrorCode {\n    FileExists = 'EntryExists',\n    FileNotFound = 'EntryNotFound',\n    FileNotADirectory = 'EntryNotADirectory',\n    FileIsADirectory = 'EntryIsADirectory',\n    FileExceedsMemoryLimit = 'EntryExceedsMemoryLimit',\n    FileTooLarge = 'EntryTooLarge',\n    NoPermissions = 'NoPermissions',\n    Unavailable = 'Unavailable',\n    Unknown = 'Unknown'\n}\n\nexport class FileSystemProviderError extends Error {\n\n    constructor(message: string, public readonly code: FileSystemProviderErrorCode) {\n        super(message);\n        Object.setPrototypeOf(this, FileSystemProviderError.prototype);\n    }\n}\n\nexport function createFileSystemProviderError(error: Error | string, code: FileSystemProviderErrorCode): FileSystemProviderError {\n    const providerError = new FileSystemProviderError(error.toString(), code);\n    markAsFileSystemProviderError(providerError, code);\n\n    return providerError;\n}\n\nexport function ensureFileSystemProviderError(error?: Error): Error {\n    if (!error) {\n        return createFileSystemProviderError('Unknown Error', FileSystemProviderErrorCode.Unknown); // https://github.com/Microsoft/vscode/issues/72798\n    }\n\n    return error;\n}\n\nexport const FileSystemProvider = Symbol('FileSystemProvider');\n/**\n * A {@link FileSystemProvider} provides the capabilities to read, write, discover, and to manage files and folders\n * of the underlying (potentially virtual) file system. {@link FileSystemProvider}s can be used to serve files from both the\n * local disk as well as remote locations like ftp-servers, REST-services etc. A {@link FileSystemProvider} is registered for a certain\n * scheme and can handle all resources whose uri does conform to that scheme.\n */\nexport interface FileSystemProvider {\n\n    /** The {@link FileSystemProviderCapabilities} for this provider. */\n    readonly capabilities: FileSystemProviderCapabilities;\n\n    /** * Event that is fired if the capabilities of this provider have changed. */\n    readonly onDidChangeCapabilities: Event<void>;\n\n    /** Event that is fired if a (watched) file in the filesystem of this provider has changed. */\n    readonly onDidChangeFile: Event<readonly FileChange[]>;\n\n    /** Event that is fired if an error occurred when watching files in the filesystem of this provider. */\n    readonly onFileWatchError: Event<void>;\n\n    /**\n     * Watch the given resource and react to changes by firing the {@link FileSystemProvider#onDidChangeFile} event.\n     * @param resource `URI` of the resource to be watched.\n     * @param opts Options to define if the resource should be watched recursively and to\n     *  provide a set of resources that should be excluded from watching.\n     *\n     * @returns A `Disposable` that can be invoked to stop watching the resource.\n     */\n    watch(resource: URI, opts: WatchOptions): IDisposable;\n\n    /**\n     * Retrieve metadata about a given file.\n     *\n     * @param uri The `URI` of the file to retrieve meta data about.\n     * @returns A promise of the metadata about the resource.\n     */\n    stat(resource: URI): Promise<Stat>;\n\n    /**\n     * Create a new directory using the given resource uri.\n     * @param resource The `URI` of the new folder.\n     */\n    mkdir(resource: URI): Promise<void>;\n\n    /**\n     * Retrieve the content of a given directory.\n     * @param resource The `URI` of the directory.\n     *\n     * @returns A map containing the {@link FileType} for each child resource, identified by name.\n     */\n    readdir(resource: URI): Promise<[string, FileType][]>;\n\n    /**\n     * Delete the given resource.\n     * @param resource The `URI` of the resource to delete.\n     * @param opts Options to define if files should be deleted recursively and if the trash should be used.\n     */\n    delete(resource: URI, opts: FileDeleteOptions): Promise<void>;\n\n    /**\n     * Rename a file or folder.\n     * @param from `URI` of the existing file or folder.\n     * @param to `URI` of the target location.\n     * @param opts Options to define if existing files should be overwritten.\n     */\n    rename(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileFolderCopyCapability}.\n     * See {@link FileSystemProviderWithFileFolderCopyCapability#copy}} for additional documentation.\n     */\n    copy?(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadWriteCapability}.\n     * See {@link FileSystemProviderWithFileReadWriteCapability#readFile} for additional documentation.\n     */\n    readFile?(resource: URI): Promise<Uint8Array>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadWriteCapability}.\n     * See {@link FileSystemProviderWithFileReadWriteCapability#writeFile} for additional documentation.\n     */\n    writeFile?(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithFileReadStreamCapability}.\n     * See {@link FileSystemProviderWithFileReadStreamCapability#readFileStream} for additional documentation.\n     */\n    readFileStream?(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#open} for additional documentation.\n     */\n    open?(resource: URI, opts: FileOpenOptions): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#close} for additional documentation.\n     */\n    close?(fd: number): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#read} for additional documentation.\n     */\n    read?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithOpenReadWriteCloseCapability}.\n     * See {@link FileSystemProviderWithOpenReadWriteCloseCapability#write} for additional documentation.\n     */\n    write?(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithAccessCapability}.\n     * See {@link FileSystemProviderWithAccessCapability#access} for additional documentation.\n     */\n    access?(resource: URI, mode?: number): Promise<void>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithAccessCapability}.\n     * See {@link FileSystemProviderWithAccessCapability#fsPath} for additional documentation.\n     */\n    fsPath?(resource: URI): Promise<string>;\n\n    /**\n     * Optional function that has to be implemented by {@link FileSystemProviderWithUpdateCapability}.\n     * See {@link FileSystemProviderWithUpdateCapability#updateFile} for additional documentation.\n     */\n    updateFile?(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult>;\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions needed for providers, that should be\n * able access files, are implemented.\n */\nexport interface FileSystemProviderWithAccessCapability extends FileSystemProvider {\n    /**\n     * Tests a user's permissions for the file or directory specified by URI.\n     * @param resource The `URI` of the file that should be tested.\n     * @param mode An optional integer that specifies the accessibility checks to be performed.\n     *      Check `FileAccess.Constants` for possible values of mode.\n     *      It is possible to create a mask consisting of the bitwise `OR` of two or more values (e.g. FileAccess.Constants.W_OK | FileAccess.Constants.R_OK).\n     *      If `mode` is not defined, `FileAccess.Constants.F_OK` will be used instead.\n     *\n     * @returns A promise that resolves if the user has the required permissions, should be rejected otherwise.\n     */\n    access(resource: URI, mode?: number): Promise<void>;\n\n    /**\n     * Returns the path of the given file URI, specific to the backend's operating system.\n     * If the URI is not a file URI, undefined is returned.\n     *\n     * USE WITH CAUTION: You should always prefer URIs to paths if possible, as they are\n     * portable and platform independent. Paths should only be used in cases you directly\n     * interact with the OS, e.g. when running a command on the shell.\n     *\n     * @param resource `URI` of the resource to derive the path from.\n     *\n     * @returns A promise of the corresponding file system path.\n     */\n    fsPath(resource: URI): Promise<string>;\n}\n\nexport function hasAccessCapability(provider: FileSystemProvider): provider is FileSystemProviderWithAccessCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.Access);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions needed, for providers that should be\n * able to update (text) files, are implemented.\n */\nexport interface FileSystemProviderWithUpdateCapability extends FileSystemProvider {\n    /**\n     * Update the content of the given (text) file according to the given text document changes.\n     * @param resource `URI` of the resource to update.\n     * @param changes Array of events describing the changes to the file.\n     * @param opts The encoding options.\n     *\n     * @returns A promise of the file metadata that resolves after the update process has completed.\n     */\n    updateFile(resource: URI, changes: TextDocumentContentChangeEvent[], opts: FileUpdateOptions): Promise<FileUpdateResult>;\n}\n\nexport function hasUpdateCapability(provider: FileSystemProvider): provider is FileSystemProviderWithUpdateCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.Update);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers\n * that should be able to read & write files, are implemented.\n */\nexport interface FileSystemProviderWithFileReadWriteCapability extends FileSystemProvider {\n    /**\n     * Read the contents of the given file as stream.\n     * @param resource The `URI` of the file.\n     *\n     * @return The `ReadableStreamEvents` for the readable stream of the given file.\n     */\n    readFile(resource: URI): Promise<Uint8Array>;\n\n    /**\n     *  Write data to a file, replacing its entire contents.\n     * @param resource The uri of the file.\n     * @param content The new content of the file.\n     * @param opts Options to define if the file should be created if missing and if an existing file should be overwritten.\n     */\n    writeFile(resource: URI, content: Uint8Array, opts: FileWriteOptions): Promise<void>;\n}\n\nexport function hasReadWriteCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileReadWriteCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileReadWrite);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to copy\n * file folders, are implemented.\n */\nexport interface FileSystemProviderWithFileFolderCopyCapability extends FileSystemProvider {\n    /**\n     * Copy files or folders.\n     * @param from `URI` of the existing file or folder.\n     * @param to `URI` of the destination location.\n     * @param opts Options to define if existing files should be overwritten.\n     */\n    copy(from: URI, to: URI, opts: FileOverwriteOptions): Promise<void>;\n}\n\nexport function hasFileFolderCopyCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileFolderCopyCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileFolderCopy);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to open,read, write\n * or close files, are implemented.\n */\nexport interface FileSystemProviderWithOpenReadWriteCloseCapability extends FileSystemProvider {\n    /**\n     * Open the give file.\n     * @param resource The `URI` of the file to open.\n     * @param opts Options to define if the file should be created if it does not exist yet.\n     *\n     * @returns A promise of the file descriptor that resolves after the file is open.\n     */\n    open(resource: URI, opts: FileOpenOptions): Promise<number>;\n\n    /**\n     * Close the file with the given file descriptor.\n     * @param fd the file descriptor to close.\n     */\n    close(fd: number): Promise<void>;\n\n    /**\n     * Read specified content from a given file descriptor into a data buffer.\n     * @param fd The file descriptor referencing the file to read from.\n     * @param pos The offset from the beginning of the file from which data should be read.\n     * @param data The buffer that the data will be written to.\n     * @param offset The offset in the buffer at which to start writing.\n     * @param length The number of bytes to read.\n     *\n     * @returns A promise of the number of bytes read.\n     */\n    read(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n\n    /**\n     * Write specified content from the data buffer to the file referenced by the given file descriptor.\n     * @param fd The file descriptor referencing the file to write to.\n     * @param pos The offset from the beginning of the file where this data should be written.\n     * @param offset The part of the buffer to be read from.\n     * @param length The number of bytes to write.\n     *\n     * @returns A promise of the number of bytes written.\n     */\n    write(fd: number, pos: number, data: Uint8Array, offset: number, length: number): Promise<number>;\n}\n\nexport function hasOpenReadWriteCloseCapability(provider: FileSystemProvider): provider is FileSystemProviderWithOpenReadWriteCloseCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileOpenReadWriteClose);\n}\n\n/**\n * Subtype of {@link FileSystemProvider} that ensures that the optional functions, needed for providers that should be able to read\n * files as streams, are implemented.\n */\nexport interface FileSystemProviderWithFileReadStreamCapability extends FileSystemProvider {\n    /**\n     * Read the contents of the given file as stream.\n     * @param resource The `URI` of the file.\n     *\n     * @return The `ReadableStreamEvents` for the readable stream of the given file.\n     */\n    readFileStream(resource: URI, opts: FileReadStreamOptions, token: CancellationToken): ReadableStreamEvents<Uint8Array>;\n}\n\nexport function hasFileReadStreamCapability(provider: FileSystemProvider): provider is FileSystemProviderWithFileReadStreamCapability {\n    return !!(provider.capabilities & FileSystemProviderCapabilities.FileReadStream);\n}\n\nexport function markAsFileSystemProviderError(error: Error, code: FileSystemProviderErrorCode): Error {\n    error.name = code ? `${code} (FileSystemError)` : 'FileSystemError';\n\n    return error;\n}\n\nexport function toFileSystemProviderErrorCode(error: Error | undefined | null): FileSystemProviderErrorCode {\n\n    // Guard against abuse\n    if (!error) {\n        return FileSystemProviderErrorCode.Unknown;\n    }\n\n    // FileSystemProviderError comes with the code\n    if (error instanceof FileSystemProviderError) {\n        return error.code;\n    }\n\n    // Any other error, check for name match by assuming that the error\n    // went through the markAsFileSystemProviderError() method\n    const match = /^(.+) \\(FileSystemError\\)$/.exec(error.name);\n    if (!match) {\n        return FileSystemProviderErrorCode.Unknown;\n    }\n\n    switch (match[1]) {\n        case FileSystemProviderErrorCode.FileExists: return FileSystemProviderErrorCode.FileExists;\n        case FileSystemProviderErrorCode.FileIsADirectory: return FileSystemProviderErrorCode.FileIsADirectory;\n        case FileSystemProviderErrorCode.FileNotADirectory: return FileSystemProviderErrorCode.FileNotADirectory;\n        case FileSystemProviderErrorCode.FileNotFound: return FileSystemProviderErrorCode.FileNotFound;\n        case FileSystemProviderErrorCode.FileExceedsMemoryLimit: return FileSystemProviderErrorCode.FileExceedsMemoryLimit;\n        case FileSystemProviderErrorCode.FileTooLarge: return FileSystemProviderErrorCode.FileTooLarge;\n        case FileSystemProviderErrorCode.NoPermissions: return FileSystemProviderErrorCode.NoPermissions;\n        case FileSystemProviderErrorCode.Unavailable: return FileSystemProviderErrorCode.Unavailable;\n    }\n\n    return FileSystemProviderErrorCode.Unknown;\n}\n\nexport function toFileOperationResult(error: Error): FileOperationResult {\n\n    // FileSystemProviderError comes with the result already\n    if (error instanceof FileOperationError) {\n        return error.fileOperationResult;\n    }\n\n    // Otherwise try to find from code\n    switch (toFileSystemProviderErrorCode(error)) {\n        case FileSystemProviderErrorCode.FileNotFound:\n            return FileOperationResult.FILE_NOT_FOUND;\n        case FileSystemProviderErrorCode.FileIsADirectory:\n            return FileOperationResult.FILE_IS_DIRECTORY;\n        case FileSystemProviderErrorCode.FileNotADirectory:\n            return FileOperationResult.FILE_NOT_DIRECTORY;\n        case FileSystemProviderErrorCode.NoPermissions:\n            return FileOperationResult.FILE_PERMISSION_DENIED;\n        case FileSystemProviderErrorCode.FileExists:\n            return FileOperationResult.FILE_MOVE_CONFLICT;\n        case FileSystemProviderErrorCode.FileExceedsMemoryLimit:\n            return FileOperationResult.FILE_EXCEEDS_MEMORY_LIMIT;\n        case FileSystemProviderErrorCode.FileTooLarge:\n            return FileOperationResult.FILE_TOO_LARGE;\n        default:\n            return FileOperationResult.FILE_OTHER_ERROR;\n    }\n}\n\n/**\n * A hint to disable etag checking for reading/writing.\n */\nexport const ETAG_DISABLED = '';\n\nexport function etag(stat: { mtime: number, size: number }): string;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined;\nexport function etag(stat: { mtime: number | undefined, size: number | undefined }): string | undefined {\n    if (typeof stat.size !== 'number' || typeof stat.mtime !== 'number') {\n        return undefined;\n    }\n\n    return stat.mtime.toString(29) + stat.size.toString(31);\n}\n/**\n * Helper to format a raw byte size into a human readable label.\n */\nexport class BinarySize {\n    static readonly KB = 1024;\n    static readonly MB = BinarySize.KB * BinarySize.KB;\n    static readonly GB = BinarySize.MB * BinarySize.KB;\n    static readonly TB = BinarySize.GB * BinarySize.KB;\n\n    static formatSize(size: number): string {\n        if (size < BinarySize.KB) {\n            return size + 'B';\n        }\n        if (size < BinarySize.MB) {\n            return (size / BinarySize.KB).toFixed(2) + 'KB';\n        }\n        if (size < BinarySize.GB) {\n            return (size / BinarySize.MB).toFixed(2) + 'MB';\n        }\n        if (size < BinarySize.TB) {\n            return (size / BinarySize.GB).toFixed(2) + 'GB';\n        }\n        return (size / BinarySize.TB).toFixed(2) + 'TB';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from './cancellation';\nimport { CancellationError } from './errors';\nimport { ISplice } from './sequence';\n\n/**\n * Returns the last element of an array.\n * @param array The array.\n * @param n Which element from the end (default is zero).\n */\nexport function tail<T>(array: ArrayLike<T>, n: number = 0): T {\n\treturn array[array.length - (1 + n)];\n}\n\nexport function tail2<T>(arr: T[]): [T[], T] {\n\tif (arr.length === 0) {\n\t\tthrow new Error('Invalid tail call');\n\t}\n\n\treturn [arr.slice(0, arr.length - 1), arr[arr.length - 1]];\n}\n\nexport function equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\n\tif (!one || !other) {\n\t\treturn false;\n\t}\n\n\tif (one.length !== other.length) {\n\t\treturn false;\n\t}\n\n\tfor (let i = 0, len = one.length; i < len; i++) {\n\t\tif (!itemEquals(one[i], other[i])) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\nexport function binarySearch<T>(array: ReadonlyArray<T>, key: T, comparator: (op1: T, op2: T) => number): number {\n\tlet low = 0,\n\t\thigh = array.length - 1;\n\n\twhile (low <= high) {\n\t\tconst mid = ((low + high) / 2) | 0;\n\t\tconst comp = comparator(array[mid], key);\n\t\tif (comp < 0) {\n\t\t\tlow = mid + 1;\n\t\t} else if (comp > 0) {\n\t\t\thigh = mid - 1;\n\t\t} else {\n\t\t\treturn mid;\n\t\t}\n\t}\n\treturn -(low + 1);\n}\n\n/**\n * Takes a sorted array and a function p. The array is sorted in such a way that all elements where p(x) is false\n * are located before all elements where p(x) is true.\n * @returns the least x for which p(x) is true or array.length if no element fullfills the given function.\n */\nexport function findFirstInSorted<T>(array: ReadonlyArray<T>, p: (x: T) => boolean): number {\n\tlet low = 0, high = array.length;\n\tif (high === 0) {\n\t\treturn 0; // no children\n\t}\n\twhile (low < high) {\n\t\tconst mid = Math.floor((low + high) / 2);\n\t\tif (p(array[mid])) {\n\t\t\thigh = mid;\n\t\t} else {\n\t\t\tlow = mid + 1;\n\t\t}\n\t}\n\treturn low;\n}\n\ntype Compare<T> = (a: T, b: T) => number;\n\n\nexport function quickSelect<T>(nth: number, data: T[], compare: Compare<T>): T {\n\n\tnth = nth | 0;\n\n\tif (nth >= data.length) {\n\t\tthrow new TypeError('invalid index');\n\t}\n\n\tlet pivotValue = data[Math.floor(data.length * Math.random())];\n\tlet lower: T[] = [];\n\tlet higher: T[] = [];\n\tlet pivots: T[] = [];\n\n\tfor (let value of data) {\n\t\tconst val = compare(value, pivotValue);\n\t\tif (val < 0) {\n\t\t\tlower.push(value);\n\t\t} else if (val > 0) {\n\t\t\thigher.push(value);\n\t\t} else {\n\t\t\tpivots.push(value);\n\t\t}\n\t}\n\n\tif (nth < lower.length) {\n\t\treturn quickSelect(nth, lower, compare);\n\t} else if (nth < lower.length + pivots.length) {\n\t\treturn pivots[0];\n\t} else {\n\t\treturn quickSelect(nth - (lower.length + pivots.length), higher, compare);\n\t}\n}\n\nexport function groupBy<T>(data: ReadonlyArray<T>, compare: (a: T, b: T) => number): T[][] {\n\tconst result: T[][] = [];\n\tlet currentGroup: T[] | undefined = undefined;\n\tfor (const element of data.slice(0).sort(compare)) {\n\t\tif (!currentGroup || compare(currentGroup[0], element) !== 0) {\n\t\t\tcurrentGroup = [element];\n\t\t\tresult.push(currentGroup);\n\t\t} else {\n\t\t\tcurrentGroup.push(element);\n\t\t}\n\t}\n\treturn result;\n}\n\ninterface IMutableSplice<T> extends ISplice<T> {\n\tdeleteCount: number;\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nexport function sortedDiff<T>(before: ReadonlyArray<T>, after: ReadonlyArray<T>, compare: (a: T, b: T) => number): ISplice<T>[] {\n\tconst result: IMutableSplice<T>[] = [];\n\n\tfunction pushSplice(start: number, deleteCount: number, toInsert: T[]): void {\n\t\tif (deleteCount === 0 && toInsert.length === 0) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst latest = result[result.length - 1];\n\n\t\tif (latest && latest.start + latest.deleteCount === start) {\n\t\t\tlatest.deleteCount += deleteCount;\n\t\t\tlatest.toInsert.push(...toInsert);\n\t\t} else {\n\t\t\tresult.push({ start, deleteCount, toInsert });\n\t\t}\n\t}\n\n\tlet beforeIdx = 0;\n\tlet afterIdx = 0;\n\n\twhile (true) {\n\t\tif (beforeIdx === before.length) {\n\t\t\tpushSplice(beforeIdx, 0, after.slice(afterIdx));\n\t\t\tbreak;\n\t\t}\n\t\tif (afterIdx === after.length) {\n\t\t\tpushSplice(beforeIdx, before.length - beforeIdx, []);\n\t\t\tbreak;\n\t\t}\n\n\t\tconst beforeElement = before[beforeIdx];\n\t\tconst afterElement = after[afterIdx];\n\t\tconst n = compare(beforeElement, afterElement);\n\t\tif (n === 0) {\n\t\t\t// equal\n\t\t\tbeforeIdx += 1;\n\t\t\tafterIdx += 1;\n\t\t} else if (n < 0) {\n\t\t\t// beforeElement is smaller -> before element removed\n\t\t\tpushSplice(beforeIdx, 1, []);\n\t\t\tbeforeIdx += 1;\n\t\t} else if (n > 0) {\n\t\t\t// beforeElement is greater -> after element added\n\t\t\tpushSplice(beforeIdx, 0, [afterElement]);\n\t\t\tafterIdx += 1;\n\t\t}\n\t}\n\n\treturn result;\n}\n\n/**\n * Takes two *sorted* arrays and computes their delta (removed, added elements).\n * Finishes in `Math.min(before.length, after.length)` steps.\n */\nexport function delta<T>(before: ReadonlyArray<T>, after: ReadonlyArray<T>, compare: (a: T, b: T) => number): { removed: T[]; added: T[] } {\n\tconst splices = sortedDiff(before, after, compare);\n\tconst removed: T[] = [];\n\tconst added: T[] = [];\n\n\tfor (const splice of splices) {\n\t\tremoved.push(...before.slice(splice.start, splice.start + splice.deleteCount));\n\t\tadded.push(...splice.toInsert);\n\t}\n\n\treturn { removed, added };\n}\n\n/**\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @return The first n elements from array when sorted with compare.\n */\nexport function top<T>(array: ReadonlyArray<T>, compare: (a: T, b: T) => number, n: number): T[] {\n\tif (n === 0) {\n\t\treturn [];\n\t}\n\tconst result = array.slice(0, n).sort(compare);\n\ttopStep(array, compare, result, n, array.length);\n\treturn result;\n}\n\n/**\n * Asynchronous variant of `top()` allowing for splitting up work in batches between which the event loop can run.\n *\n * Returns the top N elements from the array.\n *\n * Faster than sorting the entire array when the array is a lot larger than N.\n *\n * @param array The unsorted array.\n * @param compare A sort function for the elements.\n * @param n The number of elements to return.\n * @param batch The number of elements to examine before yielding to the event loop.\n * @return The first n elements from array when sorted with compare.\n */\nexport function topAsync<T>(array: T[], compare: (a: T, b: T) => number, n: number, batch: number, token?: CancellationToken): Promise<T[]> {\n\tif (n === 0) {\n\t\treturn Promise.resolve([]);\n\t}\n\n\treturn new Promise((resolve, reject) => {\n\t\t(async () => {\n\t\t\tconst o = array.length;\n\t\t\tconst result = array.slice(0, n).sort(compare);\n\t\t\tfor (let i = n, m = Math.min(n + batch, o); i < o; i = m, m = Math.min(m + batch, o)) {\n\t\t\t\tif (i > n) {\n\t\t\t\t\tawait new Promise(resolve => setTimeout(resolve)); // any other delay function would starve I/O\n\t\t\t\t}\n\t\t\t\tif (token && token.isCancellationRequested) {\n\t\t\t\t\tthrow new CancellationError();\n\t\t\t\t}\n\t\t\t\ttopStep(array, compare, result, i, m);\n\t\t\t}\n\t\t\treturn result;\n\t\t})()\n\t\t\t.then(resolve, reject);\n\t});\n}\n\nfunction topStep<T>(array: ReadonlyArray<T>, compare: (a: T, b: T) => number, result: T[], i: number, m: number): void {\n\tfor (const n = result.length; i < m; i++) {\n\t\tconst element = array[i];\n\t\tif (compare(element, result[n - 1]) < 0) {\n\t\t\tresult.pop();\n\t\t\tconst j = findFirstInSorted(result, e => compare(element, e) < 0);\n\t\t\tresult.splice(j, 0, element);\n\t\t}\n\t}\n}\n\n/**\n * @returns New array with all falsy values removed. The original array IS NOT modified.\n */\nexport function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n\treturn <T[]>array.filter(e => !!e);\n}\n\n/**\n * Remove all falsy values from `array`. The original array IS modified.\n */\nexport function coalesceInPlace<T>(array: Array<T | undefined | null>): void {\n\tlet to = 0;\n\tfor (let i = 0; i < array.length; i++) {\n\t\tif (!!array[i]) {\n\t\t\tarray[to] = array[i];\n\t\t\tto += 1;\n\t\t}\n\t}\n\tarray.length = to;\n}\n\n/**\n * @deprecated Use `Array.copyWithin` instead\n */\nexport function move(array: any[], from: number, to: number): void {\n\tarray.splice(to, 0, array.splice(from, 1)[0]);\n}\n\n/**\n * @returns false if the provided object is an array and not empty.\n */\nexport function isFalsyOrEmpty(obj: any): boolean {\n\treturn !Array.isArray(obj) || obj.length === 0;\n}\n\n/**\n * @returns True if the provided object is an array and has at least one element.\n */\nexport function isNonEmptyArray<T>(obj: T[] | undefined | null): obj is T[];\nexport function isNonEmptyArray<T>(obj: readonly T[] | undefined | null): obj is readonly T[];\nexport function isNonEmptyArray<T>(obj: T[] | readonly T[] | undefined | null): obj is T[] | readonly T[] {\n\treturn Array.isArray(obj) && obj.length > 0;\n}\n\n/**\n * Removes duplicates from the given array. The optional keyFn allows to specify\n * how elements are checked for equality by returning an alternate value for each.\n */\nexport function distinct<T>(array: ReadonlyArray<T>, keyFn: (value: T) => any = value => value): T[] {\n\tconst seen = new Set<any>();\n\n\treturn array.filter(element => {\n\t\tconst key = keyFn!(element);\n\t\tif (seen.has(key)) {\n\t\t\treturn false;\n\t\t}\n\t\tseen.add(key);\n\t\treturn true;\n\t});\n}\n\nexport function uniqueFilter<T, R>(keyFn: (t: T) => R): (t: T) => boolean {\n\tconst seen = new Set<R>();\n\n\treturn element => {\n\t\tconst key = keyFn(element);\n\n\t\tif (seen.has(key)) {\n\t\t\treturn false;\n\t\t}\n\n\t\tseen.add(key);\n\t\treturn true;\n\t};\n}\n\nexport function findLast<T>(arr: readonly T[], predicate: (item: T) => boolean): T | undefined {\n\tconst idx = lastIndex(arr, predicate);\n\tif (idx === -1) {\n\t\treturn undefined;\n\t}\n\treturn arr[idx];\n}\n\nexport function lastIndex<T>(array: ReadonlyArray<T>, fn: (item: T) => boolean): number {\n\tfor (let i = array.length - 1; i >= 0; i--) {\n\t\tconst element = array[i];\n\n\t\tif (fn(element)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn -1;\n}\n\nexport function firstOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue: NotFound): T | NotFound;\nexport function firstOrDefault<T>(array: ReadonlyArray<T>): T | undefined;\nexport function firstOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue?: NotFound): T | NotFound | undefined {\n\treturn array.length > 0 ? array[0] : notFoundValue;\n}\n\nexport function lastOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue: NotFound): T | NotFound;\nexport function lastOrDefault<T>(array: ReadonlyArray<T>): T | undefined;\nexport function lastOrDefault<T, NotFound = T>(array: ReadonlyArray<T>, notFoundValue?: NotFound): T | NotFound | undefined {\n\treturn array.length > 0 ? array[array.length - 1] : notFoundValue;\n}\n\nexport function commonPrefixLength<T>(one: ReadonlyArray<T>, other: ReadonlyArray<T>, equals: (a: T, b: T) => boolean = (a, b) => a === b): number {\n\tlet result = 0;\n\n\tfor (let i = 0, len = Math.min(one.length, other.length); i < len && equals(one[i], other[i]); i++) {\n\t\tresult++;\n\t}\n\n\treturn result;\n}\n\n/**\n * @deprecated Use `[].flat()`\n */\nexport function flatten<T>(arr: T[][]): T[] {\n\treturn (<T[]>[]).concat(...arr);\n}\n\nexport function range(to: number): number[];\nexport function range(from: number, to: number): number[];\nexport function range(arg: number, to?: number): number[] {\n\tlet from = typeof to === 'number' ? arg : 0;\n\n\tif (typeof to === 'number') {\n\t\tfrom = arg;\n\t} else {\n\t\tfrom = 0;\n\t\tto = arg;\n\t}\n\n\tconst result: number[] = [];\n\n\tif (from <= to) {\n\t\tfor (let i = from; i < to; i++) {\n\t\t\tresult.push(i);\n\t\t}\n\t} else {\n\t\tfor (let i = from; i > to; i--) {\n\t\t\tresult.push(i);\n\t\t}\n\t}\n\n\treturn result;\n}\n\nexport function index<T>(array: ReadonlyArray<T>, indexer: (t: T) => string): { [key: string]: T };\nexport function index<T, R>(array: ReadonlyArray<T>, indexer: (t: T) => string, mapper: (t: T) => R): { [key: string]: R };\nexport function index<T, R>(array: ReadonlyArray<T>, indexer: (t: T) => string, mapper?: (t: T) => R): { [key: string]: R } {\n\treturn array.reduce((r, t) => {\n\t\tr[indexer(t)] = mapper ? mapper(t) : t;\n\t\treturn r;\n\t}, Object.create(null));\n}\n\n/**\n * Inserts an element into an array. Returns a function which, when\n * called, will remove that element from the array.\n *\n * @deprecated In almost all cases, use a `Set<T>` instead.\n */\nexport function insert<T>(array: T[], element: T): () => void {\n\tarray.push(element);\n\n\treturn () => remove(array, element);\n}\n\n/**\n * Removes an element from an array if it can be found.\n *\n * @deprecated In almost all cases, use a `Set<T>` instead.\n */\nexport function remove<T>(array: T[], element: T): T | undefined {\n\tconst index = array.indexOf(element);\n\tif (index > -1) {\n\t\tarray.splice(index, 1);\n\n\t\treturn element;\n\t}\n\n\treturn undefined;\n}\n\n/**\n * Insert `insertArr` inside `target` at `insertIndex`.\n * Please don't touch unless you understand https://jsperf.com/inserting-an-array-within-an-array\n */\nexport function arrayInsert<T>(target: T[], insertIndex: number, insertArr: T[]): T[] {\n\tconst before = target.slice(0, insertIndex);\n\tconst after = target.slice(insertIndex);\n\treturn before.concat(insertArr, after);\n}\n\n/**\n * Uses Fisher-Yates shuffle to shuffle the given array\n */\nexport function shuffle<T>(array: T[], _seed?: number): void {\n\tlet rand: () => number;\n\n\tif (typeof _seed === 'number') {\n\t\tlet seed = _seed;\n\t\t// Seeded random number generator in JS. Modified from:\n\t\t// https://stackoverflow.com/questions/521295/seeding-the-random-number-generator-in-javascript\n\t\trand = () => {\n\t\t\tconst x = Math.sin(seed++) * 179426549; // throw away most significant digits and reduce any potential bias\n\t\t\treturn x - Math.floor(x);\n\t\t};\n\t} else {\n\t\trand = Math.random;\n\t}\n\n\tfor (let i = array.length - 1; i > 0; i -= 1) {\n\t\tconst j = Math.floor(rand() * (i + 1));\n\t\tconst temp = array[i];\n\t\tarray[i] = array[j];\n\t\tarray[j] = temp;\n\t}\n}\n\n/**\n * Pushes an element to the start of the array, if found.\n */\nexport function pushToStart<T>(arr: T[], value: T): void {\n\tconst index = arr.indexOf(value);\n\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t\tarr.unshift(value);\n\t}\n}\n\n/**\n * Pushes an element to the end of the array, if found.\n */\nexport function pushToEnd<T>(arr: T[], value: T): void {\n\tconst index = arr.indexOf(value);\n\n\tif (index > -1) {\n\t\tarr.splice(index, 1);\n\t\tarr.push(value);\n\t}\n}\n\nexport function pushMany<T>(arr: T[], items: ReadonlyArray<T>): void {\n\tfor (const item of items) {\n\t\tarr.push(item);\n\t}\n}\n\nexport function mapArrayOrNot<T, U>(items: T | T[], fn: (_: T) => U): U | U[] {\n\treturn Array.isArray(items) ?\n\t\titems.map(fn) :\n\t\tfn(items);\n}\n\nexport function asArray<T>(x: T | T[]): T[];\nexport function asArray<T>(x: T | readonly T[]): readonly T[];\nexport function asArray<T>(x: T | T[]): T[] {\n\treturn Array.isArray(x) ? x : [x];\n}\n\nexport function getRandomElement<T>(arr: T[]): T | undefined {\n\treturn arr[Math.floor(Math.random() * arr.length)];\n}\n\n/**\n * Returns the first mapped value of the array which is not undefined.\n */\nexport function mapFind<T, R>(array: Iterable<T>, mapFn: (value: T) => R | undefined): R | undefined {\n\tfor (const value of array) {\n\t\tconst mapped = mapFn(value);\n\t\tif (mapped !== undefined) {\n\t\t\treturn mapped;\n\t\t}\n\t}\n\n\treturn undefined;\n}\n\n/**\n * Insert the new items in the array.\n * @param array The original array.\n * @param start The zero-based location in the array from which to start inserting elements.\n * @param newItems The items to be inserted\n */\nexport function insertInto<T>(array: T[], start: number, newItems: T[]): void {\n\tconst startIdx = getActualStartIndex(array, start);\n\tconst originalLength = array.length;\n\tconst newItemsLength = newItems.length;\n\tarray.length = originalLength + newItemsLength;\n\t// Move the items after the start index, start from the end so that we don't overwrite any value.\n\tfor (let i = originalLength - 1; i >= startIdx; i--) {\n\t\tarray[i + newItemsLength] = array[i];\n\t}\n\n\tfor (let i = 0; i < newItemsLength; i++) {\n\t\tarray[i + startIdx] = newItems[i];\n\t}\n}\n\n/**\n * Removes elements from an array and inserts new elements in their place, returning the deleted elements. Alternative to the native Array.splice method, it\n * can only support limited number of items due to the maximum call stack size limit.\n * @param array The original array.\n * @param start The zero-based location in the array from which to start removing elements.\n * @param deleteCount The number of elements to remove.\n * @returns An array containing the elements that were deleted.\n */\nexport function splice<T>(array: T[], start: number, deleteCount: number, newItems: T[]): T[] {\n\tconst index = getActualStartIndex(array, start);\n\tconst result = array.splice(index, deleteCount);\n\tinsertInto(array, index, newItems);\n\treturn result;\n}\n\n/**\n * Determine the actual start index (same logic as the native splice() or slice())\n * If greater than the length of the array, start will be set to the length of the array. In this case, no element will be deleted but the method will behave as an adding function, adding as many element as item[n*] provided.\n * If negative, it will begin that many elements from the end of the array. (In this case, the origin -1, meaning -n is the index of the nth last element, and is therefore equivalent to the index of array.length - n.) If array.length + start is less than 0, it will begin from index 0.\n * @param array The target array.\n * @param start The operation index.\n */\nfunction getActualStartIndex<T>(array: T[], start: number): number {\n\treturn start < 0 ? Math.max(start + array.length, 0) : Math.min(start, array.length);\n}\n\n/**\n * A comparator `c` defines a total order `<=` on `T` as following:\n * `c(a, b) <= 0` iff `a` <= `b`.\n * We also have `c(a, b) == 0` iff `c(b, a) == 0`.\n*/\nexport type Comparator<T> = (a: T, b: T) => number;\n\nexport function compareBy<TItem, TCompareBy>(selector: (item: TItem) => TCompareBy, comparator: Comparator<TCompareBy>): Comparator<TItem> {\n\treturn (a, b) => comparator(selector(a), selector(b));\n}\n\n/**\n * The natural order on numbers.\n*/\nexport const numberComparator: Comparator<number> = (a, b) => a - b;\n\n/**\n * Returns the first item that is equal to or greater than every other item.\n*/\nexport function findMaxBy<T>(items: readonly T[], comparator: Comparator<T>): T | undefined {\n\tif (items.length === 0) {\n\t\treturn undefined;\n\t}\n\n\tlet max = items[0];\n\tfor (let i = 1; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (comparator(item, max) > 0) {\n\t\t\tmax = item;\n\t\t}\n\t}\n\treturn max;\n}\n\n/**\n * Returns the last item that is equal to or greater than every other item.\n*/\nexport function findLastMaxBy<T>(items: readonly T[], comparator: Comparator<T>): T | undefined {\n\tif (items.length === 0) {\n\t\treturn undefined;\n\t}\n\n\tlet max = items[0];\n\tfor (let i = 1; i < items.length; i++) {\n\t\tconst item = items[i];\n\t\tif (comparator(item, max) >= 0) {\n\t\t\tmax = item;\n\t\t}\n\t}\n\treturn max;\n}\n\n/**\n * Returns the first item that is equal to or less than every other item.\n*/\nexport function findMinBy<T>(items: readonly T[], comparator: Comparator<T>): T | undefined {\n\treturn findMaxBy(items, (a, b) => -comparator(a, b));\n}\n\nexport class ArrayQueue<T> {\n\tprivate firstIdx = 0;\n\tprivate lastIdx = this.items.length - 1;\n\n\t/**\n\t * Constructs a queue that is backed by the given array. Runtime is O(1).\n\t*/\n\tconstructor(private readonly items: T[]) { }\n\n\tget length(): number {\n\t\treturn this.lastIdx - this.firstIdx + 1;\n\t}\n\n\t/**\n\t * Consumes elements from the beginning of the queue as long as the predicate returns true.\n\t * If no elements were consumed, `null` is returned. Has a runtime of O(result.length).\n\t*/\n\ttakeWhile(predicate: (value: T) => boolean): T[] | null {\n\t\t// P(k) := k <= this.lastIdx && predicate(this.items[k])\n\t\t// Find s := min { k | k >= this.firstIdx && !P(k) } and return this.data[this.firstIdx...s)\n\n\t\tlet startIdx = this.firstIdx;\n\t\twhile (startIdx < this.items.length && predicate(this.items[startIdx])) {\n\t\t\tstartIdx++;\n\t\t}\n\t\tconst result = startIdx === this.firstIdx ? null : this.items.slice(this.firstIdx, startIdx);\n\t\tthis.firstIdx = startIdx;\n\t\treturn result;\n\t}\n\n\t/**\n\t * Consumes elements from the end of the queue as long as the predicate returns true.\n\t * If no elements were consumed, `null` is returned.\n\t * The result has the same order as the underlying array!\n\t*/\n\ttakeFromEndWhile(predicate: (value: T) => boolean): T[] | null {\n\t\t// P(k) := this.firstIdx >= k && predicate(this.items[k])\n\t\t// Find s := max { k | k <= this.lastIdx && !P(k) } and return this.data(s...this.lastIdx]\n\n\t\tlet endIdx = this.lastIdx;\n\t\twhile (endIdx >= 0 && predicate(this.items[endIdx])) {\n\t\t\tendIdx--;\n\t\t}\n\t\tconst result = endIdx === this.lastIdx ? null : this.items.slice(endIdx + 1, this.lastIdx + 1);\n\t\tthis.lastIdx = endIdx;\n\t\treturn result;\n\t}\n\n\tpeek(): T | undefined {\n\t\treturn this.items[this.firstIdx];\n\t}\n\n\tdequeue(): T | undefined {\n\t\tconst result = this.items[this.firstIdx];\n\t\tthis.firstIdx++;\n\t\treturn result;\n\t}\n\n\ttakeCount(count: number): T[] {\n\t\tconst result = this.items.slice(this.firstIdx, this.firstIdx + count);\n\t\tthis.firstIdx += count;\n\t\treturn result;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Throws an error with the provided message if the provided value does not evaluate to a true Javascript value.\n */\nexport function ok(value?: unknown, message?: string) {\n\tif (!value) {\n\t\tthrow new Error(message ? `Assertion failed (${message})` : 'Assertion Failed');\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken, CancellationTokenSource } from './cancellation';\nimport { IDisposable } from './lifecycle';\n\nexport interface CacheResult<T> extends IDisposable {\n\tpromise: Promise<T>;\n}\n\nexport class Cache<T> {\n\n\tprivate result: CacheResult<T> | null = null;\n\tconstructor(private task: (ct: CancellationToken) => Promise<T>) { }\n\n\tget(): CacheResult<T> {\n\t\tif (this.result) {\n\t\t\treturn this.result;\n\t\t}\n\n\t\tconst cts = new CancellationTokenSource();\n\t\tconst promise = this.task(cts.token);\n\n\t\tthis.result = {\n\t\t\tpromise,\n\t\t\tdispose: () => {\n\t\t\t\tthis.result = null;\n\t\t\t\tcts.cancel();\n\t\t\t\tcts.dispose();\n\t\t\t}\n\t\t};\n\n\t\treturn this.result;\n\t}\n}\n\n/**\n * Uses a LRU cache to make a given parametrized function cached.\n * Caches just the last value.\n * The key must be JSON serializable.\n*/\nexport class LRUCachedFunction<TArg, TComputed> {\n\tprivate lastCache: TComputed | undefined = undefined;\n\tprivate lastArgKey: string | undefined = undefined;\n\n\tconstructor(private readonly fn: (arg: TArg) => TComputed) {\n\t}\n\n\tpublic get(arg: TArg): TComputed {\n\t\tconst key = JSON.stringify(arg);\n\t\tif (this.lastArgKey !== key) {\n\t\t\tthis.lastArgKey = key;\n\t\t\tthis.lastCache = this.fn(arg);\n\t\t}\n\t\treturn this.lastCache!;\n\t}\n}\n\n/**\n * Uses an unbounded cache (referential equality) to memoize the results of the given function.\n*/\nexport class CachedFunction<TArg, TValue> {\n\tprivate readonly _map = new Map<TArg, TValue>();\n\tpublic get cachedValues(): ReadonlyMap<TArg, TValue> {\n\t\treturn this._map;\n\t}\n\n\tconstructor(private readonly fn: (arg: TArg) => TValue) { }\n\n\tpublic get(arg: TArg): TValue {\n\t\tif (this._map.has(arg)) {\n\t\t\treturn this._map.get(arg)!;\n\t\t}\n\t\tconst value = this.fn(arg);\n\t\tthis._map.set(arg, value);\n\t\treturn value;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from './event';\nimport { IDisposable } from './lifecycle';\n\nexport interface CancellationToken {\n\n\t/**\n\t * A flag signalling is cancellation has been requested.\n\t */\n\treadonly isCancellationRequested: boolean;\n\n\t/**\n\t * An event which fires when cancellation is requested. This event\n\t * only ever fires `once` as cancellation can only happen once. Listeners\n\t * that are registered after cancellation will be called (next event loop run),\n\t * but also only once.\n\t *\n\t * @event\n\t */\n\treadonly onCancellationRequested: (listener: (e: any) => any, thisArgs?: any, disposables?: IDisposable[]) => IDisposable;\n}\n\nconst shortcutEvent: Event<any> = Object.freeze(function (callback, context?): IDisposable {\n\tconst handle = setTimeout(callback.bind(context), 0);\n\treturn { dispose() { clearTimeout(handle); } };\n});\n\nexport namespace CancellationToken {\n\n\texport function isCancellationToken(thing: unknown): thing is CancellationToken {\n\t\tif (thing === CancellationToken.None || thing === CancellationToken.Cancelled) {\n\t\t\treturn true;\n\t\t}\n\t\tif (thing instanceof MutableToken) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!thing || typeof thing !== 'object') {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof (thing as CancellationToken).isCancellationRequested === 'boolean'\n\t\t\t&& typeof (thing as CancellationToken).onCancellationRequested === 'function';\n\t}\n\n\n\texport const None = Object.freeze<CancellationToken>({\n\t\tisCancellationRequested: false,\n\t\tonCancellationRequested: Event.None\n\t});\n\n\texport const Cancelled = Object.freeze<CancellationToken>({\n\t\tisCancellationRequested: true,\n\t\tonCancellationRequested: shortcutEvent\n\t});\n}\n\nclass MutableToken implements CancellationToken {\n\n\tprivate _isCancelled: boolean = false;\n\tprivate _emitter: Emitter<any> | null = null;\n\n\tpublic cancel() {\n\t\tif (!this._isCancelled) {\n\t\t\tthis._isCancelled = true;\n\t\t\tif (this._emitter) {\n\t\t\t\tthis._emitter.fire(undefined);\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t}\n\t}\n\n\tget isCancellationRequested(): boolean {\n\t\treturn this._isCancelled;\n\t}\n\n\tget onCancellationRequested(): Event<any> {\n\t\tif (this._isCancelled) {\n\t\t\treturn shortcutEvent;\n\t\t}\n\t\tif (!this._emitter) {\n\t\t\tthis._emitter = new Emitter<any>();\n\t\t}\n\t\treturn this._emitter.event;\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this._emitter) {\n\t\t\tthis._emitter.dispose();\n\t\t\tthis._emitter = null;\n\t\t}\n\t}\n}\n\nexport class CancellationTokenSource {\n\n\tprivate _token?: CancellationToken = undefined;\n\tprivate _parentListener?: IDisposable = undefined;\n\n\tconstructor(parent?: CancellationToken) {\n\t\tthis._parentListener = parent && parent.onCancellationRequested(this.cancel, this);\n\t}\n\n\tget token(): CancellationToken {\n\t\tif (!this._token) {\n\t\t\t// be lazy and create the token only when\n\t\t\t// actually needed\n\t\t\tthis._token = new MutableToken();\n\t\t}\n\t\treturn this._token;\n\t}\n\n\tcancel(): void {\n\t\tif (!this._token) {\n\t\t\t// save an object by returning the default\n\t\t\t// cancelled token when cancellation happens\n\t\t\t// before someone asks for the token\n\t\t\tthis._token = CancellationToken.Cancelled;\n\n\t\t} else if (this._token instanceof MutableToken) {\n\t\t\t// actually cancel\n\t\t\tthis._token.cancel();\n\t\t}\n\t}\n\n\tdispose(cancel: boolean = false): void {\n\t\tif (cancel) {\n\t\t\tthis.cancel();\n\t\t}\n\t\tif (this._parentListener) {\n\t\t\tthis._parentListener.dispose();\n\t\t}\n\t\tif (!this._token) {\n\t\t\t// ensure to initialize with an empty token if we had none\n\t\t\tthis._token = CancellationToken.None;\n\n\t\t} else if (this._token instanceof MutableToken) {\n\t\t\t// actually dispose\n\t\t\tthis._token.dispose();\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ErrorListenerCallback {\n\t(error: any): void;\n}\n\nexport interface ErrorListenerUnbind {\n\t(): void;\n}\n\n// Avoid circular dependency on EventEmitter by implementing a subset of the interface.\nexport class ErrorHandler {\n\tprivate unexpectedErrorHandler: (e: any) => void;\n\tprivate listeners: ErrorListenerCallback[];\n\n\tconstructor() {\n\n\t\tthis.listeners = [];\n\n\t\tthis.unexpectedErrorHandler = function (e: any) {\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (e.stack) {\n\t\t\t\t\tthrow new Error(e.message + '\\n\\n' + e.stack);\n\t\t\t\t}\n\n\t\t\t\tthrow e;\n\t\t\t}, 0);\n\t\t};\n\t}\n\n\taddListener(listener: ErrorListenerCallback): ErrorListenerUnbind {\n\t\tthis.listeners.push(listener);\n\n\t\treturn () => {\n\t\t\tthis._removeListener(listener);\n\t\t};\n\t}\n\n\tprivate emit(e: any): void {\n\t\tthis.listeners.forEach((listener) => {\n\t\t\tlistener(e);\n\t\t});\n\t}\n\n\tprivate _removeListener(listener: ErrorListenerCallback): void {\n\t\tthis.listeners.splice(this.listeners.indexOf(listener), 1);\n\t}\n\n\tsetUnexpectedErrorHandler(newUnexpectedErrorHandler: (e: any) => void): void {\n\t\tthis.unexpectedErrorHandler = newUnexpectedErrorHandler;\n\t}\n\n\tgetUnexpectedErrorHandler(): (e: any) => void {\n\t\treturn this.unexpectedErrorHandler;\n\t}\n\n\tonUnexpectedError(e: any): void {\n\t\tthis.unexpectedErrorHandler(e);\n\t\tthis.emit(e);\n\t}\n\n\t// For external errors, we don't want the listeners to be called\n\tonUnexpectedExternalError(e: any): void {\n\t\tthis.unexpectedErrorHandler(e);\n\t}\n}\n\nexport const errorHandler = new ErrorHandler();\n\nexport function setUnexpectedErrorHandler(newUnexpectedErrorHandler: (e: any) => void): void {\n\terrorHandler.setUnexpectedErrorHandler(newUnexpectedErrorHandler);\n}\n\nexport function onUnexpectedError(e: any): undefined {\n\t// ignore errors from cancelled promises\n\tif (!isCancellationError(e)) {\n\t\terrorHandler.onUnexpectedError(e);\n\t}\n\treturn undefined;\n}\n\nexport function onUnexpectedExternalError(e: any): undefined {\n\t// ignore errors from cancelled promises\n\tif (!isCancellationError(e)) {\n\t\terrorHandler.onUnexpectedExternalError(e);\n\t}\n\treturn undefined;\n}\n\nexport interface SerializedError {\n\treadonly $isError: true;\n\treadonly name: string;\n\treadonly message: string;\n\treadonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError;\nexport function transformErrorForSerialization(error: any): any;\nexport function transformErrorForSerialization(error: any): any {\n\tif (error instanceof Error) {\n\t\tlet { name, message } = error;\n\t\tconst stack: string = (<any>error).stacktrace || (<any>error).stack;\n\t\treturn {\n\t\t\t$isError: true,\n\t\t\tname,\n\t\t\tmessage,\n\t\t\tstack\n\t\t};\n\t}\n\n\t// return as is\n\treturn error;\n}\n\n// see https://github.com/v8/v8/wiki/Stack%20Trace%20API#basic-stack-traces\nexport interface V8CallSite {\n\tgetThis(): any;\n\tgetTypeName(): string;\n\tgetFunction(): string;\n\tgetFunctionName(): string;\n\tgetMethodName(): string;\n\tgetFileName(): string;\n\tgetLineNumber(): number;\n\tgetColumnNumber(): number;\n\tgetEvalOrigin(): string;\n\tisToplevel(): boolean;\n\tisEval(): boolean;\n\tisNative(): boolean;\n\tisConstructor(): boolean;\n\ttoString(): string;\n}\n\nconst canceledName = 'Canceled';\n\n/**\n * Checks if the given error is a promise in canceled state\n */\nexport function isCancellationError(error: any): boolean {\n\tif (error instanceof CancellationError) {\n\t\treturn true;\n\t}\n\treturn error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n\n// !!!IMPORTANT!!!\n// Do NOT change this class because it is also used as an API-type.\nexport class CancellationError extends Error {\n\tconstructor() {\n\t\tsuper(canceledName);\n\t\tthis.name = this.message;\n\t}\n}\n\n/**\n * @deprecated use {@link CancellationError `new CancellationError()`} instead\n */\nexport function canceled(): Error {\n\tconst error = new Error(canceledName);\n\terror.name = error.message;\n\treturn error;\n}\n\nexport function illegalArgument(name?: string): Error {\n\tif (name) {\n\t\treturn new Error(`Illegal argument: ${name}`);\n\t} else {\n\t\treturn new Error('Illegal argument');\n\t}\n}\n\nexport function illegalState(name?: string): Error {\n\tif (name) {\n\t\treturn new Error(`Illegal state: ${name}`);\n\t} else {\n\t\treturn new Error('Illegal state');\n\t}\n}\n\nexport function readonly(name?: string): Error {\n\treturn name\n\t\t? new Error(`readonly property '${name} cannot be changed'`)\n\t\t: new Error('readonly property cannot be changed');\n}\n\nexport function disposed(what: string): Error {\n\tconst result = new Error(`${what} has been disposed`);\n\tresult.name = 'DISPOSED';\n\treturn result;\n}\n\nexport function getErrorMessage(err: any): string {\n\tif (!err) {\n\t\treturn 'Error';\n\t}\n\n\tif (err.message) {\n\t\treturn err.message;\n\t}\n\n\tif (err.stack) {\n\t\treturn err.stack.split('\\n')[0];\n\t}\n\n\treturn String(err);\n}\n\nexport class NotImplementedError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper('NotImplemented');\n\t\tif (message) {\n\t\t\tthis.message = message;\n\t\t}\n\t}\n}\n\nexport class NotSupportedError extends Error {\n\tconstructor(message?: string) {\n\t\tsuper('NotSupported');\n\t\tif (message) {\n\t\t\tthis.message = message;\n\t\t}\n\t}\n}\n\nexport class ExpectedError extends Error {\n\treadonly isExpected = true;\n}\n\n/**\n * Error that when thrown won't be logged in telemetry as an unhandled error.\n */\nexport class ErrorNoTelemetry extends Error {\n\n\tpublic static fromError(err: any): ErrorNoTelemetry {\n\t\tif (err && err instanceof ErrorNoTelemetry) {\n\t\t\treturn err;\n\t\t}\n\n\t\tif (err && err instanceof Error) {\n\t\t\tconst result = new ErrorNoTelemetry();\n\t\t\tresult.name = err.name;\n\t\t\tresult.message = err.message;\n\t\t\tresult.stack = err.stack;\n\t\t\treturn result;\n\t\t}\n\n\t\treturn new ErrorNoTelemetry(err);\n\t}\n\n\treadonly logTelemetry = false;\n}\n\n/**\n * This error indicates a bug.\n * Do not throw this for invalid user input.\n * Only catch this error to recover gracefully from bugs.\n */\nexport class BugIndicatingError extends Error {\n\tconstructor(message: string) {\n\t\tsuper(message);\n\t\tObject.setPrototypeOf(this, BugIndicatingError.prototype);\n\n\t\t// Because we know for sure only buggy code throws this,\n\t\t// we definitely want to break here and fix the bug.\n\t\t// eslint-disable-next-line no-debugger\n\t\tdebugger;\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CancellationToken } from './cancellation';\nimport { onUnexpectedError } from './errors';\nimport { once as onceFn } from './functional';\nimport { combinedDisposable, Disposable, DisposableStore, IDisposable, SafeDisposable, toDisposable } from './lifecycle';\nimport { LinkedList } from './linkedList';\nimport { StopWatch } from './stopwatch';\n\n\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever an emitter with listeners is disposed. That is a sign of code smell.\n// -----------------------------------------------------------------------------------------------------------------------\nlet _enableDisposeWithListenerWarning = false;\n// _enableDisposeWithListenerWarning = Boolean(\"TRUE\"); // causes a linter warning so that it cannot be pushed\n\n\n// -----------------------------------------------------------------------------------------------------------------------\n// Uncomment the next line to print warnings whenever a snapshotted event is used repeatedly without cleanup.\n// See https://github.com/microsoft/vscode/issues/142851\n// -----------------------------------------------------------------------------------------------------------------------\nlet _enableSnapshotPotentialLeakWarning = false;\n// _enableSnapshotPotentialLeakWarning = Boolean(\"TRUE\"); // causes a linter warning so that it cannot be pushed\n\n/**\n * To an event a function with one or zero parameters\n * can be subscribed. The event is the subscriber function itself.\n */\nexport interface Event<T> {\n\t(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable;\n}\n\nexport namespace Event {\n\texport const None: Event<any> = () => Disposable.None;\n\n\n\tfunction _addLeakageTraceLogic(options: EmitterOptions) {\n\t\tif (_enableSnapshotPotentialLeakWarning) {\n\t\t\tconst { onListenerDidAdd: origListenerDidAdd } = options;\n\t\t\tconst stack = Stacktrace.create();\n\t\t\tlet count = 0;\n\t\t\toptions.onListenerDidAdd = () => {\n\t\t\t\tif (++count === 2) {\n\t\t\t\t\tconsole.warn('snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here');\n\t\t\t\t\tstack.print();\n\t\t\t\t}\n\t\t\t\torigListenerDidAdd?.();\n\t\t\t};\n\t\t}\n\t}\n\n\n\t/**\n\t * Given an event, returns another event which only fires once.\n\t */\n\texport function once<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => {\n\t\t\t// we need this, in case the event fires during the listener call\n\t\t\tlet didFire = false;\n\t\t\tlet result: IDisposable;\n\t\t\tresult = event(e => {\n\t\t\t\tif (didFire) {\n\t\t\t\t\treturn;\n\t\t\t\t} else if (result) {\n\t\t\t\t\tresult.dispose();\n\t\t\t\t} else {\n\t\t\t\t\tdidFire = true;\n\t\t\t\t}\n\n\t\t\t\treturn listener.call(thisArgs, e);\n\t\t\t}, null, disposables);\n\n\t\t\tif (didFire) {\n\t\t\t\tresult.dispose();\n\t\t\t}\n\n\t\t\treturn result;\n\t\t};\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function map<I, O>(event: Event<I>, map: (i: I) => O, disposable?: DisposableStore): Event<O> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => listener.call(thisArgs, map(i)), null, disposables), disposable);\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function forEach<I>(event: Event<I>, each: (i: I) => void, disposable?: DisposableStore): Event<I> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(i => { each(i); listener.call(thisArgs, i); }, null, disposables), disposable);\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function filter<T, U>(event: Event<T | U>, filter: (e: T | U) => e is T, disposable?: DisposableStore): Event<T>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean, disposable?: DisposableStore): Event<T>;\n\texport function filter<T, R>(event: Event<T | R>, filter: (e: T | R) => e is R, disposable?: DisposableStore): Event<R>;\n\texport function filter<T>(event: Event<T>, filter: (e: T) => boolean, disposable?: DisposableStore): Event<T> {\n\t\treturn snapshot((listener, thisArgs = null, disposables?) => event(e => filter(e) && listener.call(thisArgs, e), null, disposables), disposable);\n\t}\n\n\t/**\n\t * Given an event, returns the same event but typed as `Event<void>`.\n\t */\n\texport function signal<T>(event: Event<T>): Event<void> {\n\t\treturn event as Event<any> as Event<void>;\n\t}\n\n\t/**\n\t * Given a collection of events, returns a single event which emits\n\t * whenever any of the provided events emit.\n\t */\n\texport function any<T>(...events: Event<T>[]): Event<T>;\n\texport function any(...events: Event<any>[]): Event<void>;\n\texport function any<T>(...events: Event<T>[]): Event<T> {\n\t\treturn (listener, thisArgs = null, disposables?) => combinedDisposable(...events.map(event => event(e => listener.call(thisArgs, e), null, disposables)));\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function reduce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, initial?: O, disposable?: DisposableStore): Event<O> {\n\t\tlet output: O | undefined = initial;\n\n\t\treturn map<I, O>(event, e => {\n\t\t\toutput = merge(output, e);\n\t\t\treturn output;\n\t\t}, disposable);\n\t}\n\n\tfunction snapshot<T>(event: Event<T>, disposable: DisposableStore | undefined): Event<T> {\n\t\tlet listener: IDisposable;\n\n\t\tconst options: EmitterOptions | undefined = {\n\t\t\tonFirstListenerAdd() {\n\t\t\t\tlistener = event(emitter.fire, emitter);\n\t\t\t},\n\t\t\tonLastListenerRemove() {\n\t\t\t\tlistener.dispose();\n\t\t\t}\n\t\t};\n\n\t\tif (!disposable) {\n\t\t\t_addLeakageTraceLogic(options);\n\t\t}\n\n\t\tconst emitter = new Emitter<T>(options);\n\n\t\tif (disposable) {\n\t\t\tdisposable.add(emitter);\n\t\t}\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function debounce<T>(event: Event<T>, merge: (last: T | undefined, event: T) => T, delay?: number, leading?: boolean, leakWarningThreshold?: number, disposable?: DisposableStore): Event<T>;\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay?: number, leading?: boolean, leakWarningThreshold?: number, disposable?: DisposableStore): Event<O>;\n\n\texport function debounce<I, O>(event: Event<I>, merge: (last: O | undefined, event: I) => O, delay: number = 100, leading = false, leakWarningThreshold?: number, disposable?: DisposableStore): Event<O> {\n\n\t\tlet subscription: IDisposable;\n\t\tlet output: O | undefined = undefined;\n\t\tlet handle: any = undefined;\n\t\tlet numDebouncedCalls = 0;\n\n\t\tconst options: EmitterOptions | undefined = {\n\t\t\tleakWarningThreshold,\n\t\t\tonFirstListenerAdd() {\n\t\t\t\tsubscription = event(cur => {\n\t\t\t\t\tnumDebouncedCalls++;\n\t\t\t\t\toutput = merge(output, cur);\n\n\t\t\t\t\tif (leading && !handle) {\n\t\t\t\t\t\temitter.fire(output);\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t}\n\n\t\t\t\t\tclearTimeout(handle);\n\t\t\t\t\thandle = setTimeout(() => {\n\t\t\t\t\t\tconst _output = output;\n\t\t\t\t\t\toutput = undefined;\n\t\t\t\t\t\thandle = undefined;\n\t\t\t\t\t\tif (!leading || numDebouncedCalls > 1) {\n\t\t\t\t\t\t\temitter.fire(_output!);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tnumDebouncedCalls = 0;\n\t\t\t\t\t}, delay);\n\t\t\t\t});\n\t\t\t},\n\t\t\tonLastListenerRemove() {\n\t\t\t\tsubscription.dispose();\n\t\t\t}\n\t\t};\n\n\t\tif (!disposable) {\n\t\t\t_addLeakageTraceLogic(options);\n\t\t}\n\n\t\tconst emitter = new Emitter<O>(options);\n\n\t\tif (disposable) {\n\t\t\tdisposable.add(emitter);\n\t\t}\n\n\t\treturn emitter.event;\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function latch<T>(event: Event<T>, equals: (a: T, b: T) => boolean = (a, b) => a === b, disposable?: DisposableStore): Event<T> {\n\t\tlet firstCall = true;\n\t\tlet cache: T;\n\n\t\treturn filter(event, value => {\n\t\t\tconst shouldEmit = firstCall || !equals(value, cache);\n\t\t\tfirstCall = false;\n\t\t\tcache = value;\n\t\t\treturn shouldEmit;\n\t\t}, disposable);\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function split<T, U>(event: Event<T | U>, isT: (e: T | U) => e is T, disposable?: DisposableStore): [Event<T>, Event<U>] {\n\t\treturn [\n\t\t\tEvent.filter(event, isT, disposable),\n\t\t\tEvent.filter(event, e => !isT(e), disposable) as Event<U>,\n\t\t];\n\t}\n\n\t/**\n\t * *NOTE* that this function returns an `Event` and it MUST be called with a `DisposableStore` whenever the returned\n\t * event is accessible to \"third parties\", e.g the event is a public property. Otherwise a leaked listener on the\n\t * returned event causes this utility to leak a listener on the original event.\n\t */\n\texport function buffer<T>(event: Event<T>, flushAfterTimeout = false, _buffer: T[] = []): Event<T> {\n\t\tlet buffer: T[] | null = _buffer.slice();\n\n\t\tlet listener: IDisposable | null = event(e => {\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.push(e);\n\t\t\t} else {\n\t\t\t\temitter.fire(e);\n\t\t\t}\n\t\t});\n\n\t\tconst flush = () => {\n\t\t\tif (buffer) {\n\t\t\t\tbuffer.forEach(e => emitter.fire(e));\n\t\t\t}\n\t\t\tbuffer = null;\n\t\t};\n\n\t\tconst emitter = new Emitter<T>({\n\t\t\tonFirstListenerAdd() {\n\t\t\t\tif (!listener) {\n\t\t\t\t\tlistener = event(e => emitter.fire(e));\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonFirstListenerDidAdd() {\n\t\t\t\tif (buffer) {\n\t\t\t\t\tif (flushAfterTimeout) {\n\t\t\t\t\t\tsetTimeout(flush);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tflush();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\n\t\t\tonLastListenerRemove() {\n\t\t\t\tif (listener) {\n\t\t\t\t\tlistener.dispose();\n\t\t\t\t}\n\t\t\t\tlistener = null;\n\t\t\t}\n\t\t});\n\n\t\treturn emitter.event;\n\t}\n\n\texport interface IChainableEvent<T> {\n\n\t\tevent: Event<T>;\n\t\tmap<O>(fn: (i: T) => O): IChainableEvent<O>;\n\t\tforEach(fn: (i: T) => void): IChainableEvent<T>;\n\t\tfilter(fn: (e: T) => boolean): IChainableEvent<T>;\n\t\tfilter<R>(fn: (e: T | R) => e is R): IChainableEvent<R>;\n\t\treduce<R>(merge: (last: R | undefined, event: T) => R, initial?: R): IChainableEvent<R>;\n\t\tlatch(): IChainableEvent<T>;\n\t\tdebounce(merge: (last: T | undefined, event: T) => T, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<T>;\n\t\tdebounce<R>(merge: (last: R | undefined, event: T) => R, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<R>;\n\t\ton(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore): IDisposable;\n\t\tonce(listener: (e: T) => any, thisArgs?: any, disposables?: IDisposable[]): IDisposable;\n\t}\n\n\tclass ChainableEvent<T> implements IChainableEvent<T> {\n\n\t\tconstructor(readonly event: Event<T>) { }\n\n\t\tmap<O>(fn: (i: T) => O): IChainableEvent<O> {\n\t\t\treturn new ChainableEvent(map(this.event, fn));\n\t\t}\n\n\t\tforEach(fn: (i: T) => void): IChainableEvent<T> {\n\t\t\treturn new ChainableEvent(forEach(this.event, fn));\n\t\t}\n\n\t\tfilter(fn: (e: T) => boolean): IChainableEvent<T>;\n\t\tfilter<R>(fn: (e: T | R) => e is R): IChainableEvent<R>;\n\t\tfilter(fn: (e: T) => boolean): IChainableEvent<T> {\n\t\t\treturn new ChainableEvent(filter(this.event, fn));\n\t\t}\n\n\t\treduce<R>(merge: (last: R | undefined, event: T) => R, initial?: R): IChainableEvent<R> {\n\t\t\treturn new ChainableEvent(reduce(this.event, merge, initial));\n\t\t}\n\n\t\tlatch(): IChainableEvent<T> {\n\t\t\treturn new ChainableEvent(latch(this.event));\n\t\t}\n\n\t\tdebounce(merge: (last: T | undefined, event: T) => T, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<T>;\n\t\tdebounce<R>(merge: (last: R | undefined, event: T) => R, delay?: number, leading?: boolean, leakWarningThreshold?: number): IChainableEvent<R>;\n\t\tdebounce<R>(merge: (last: R | undefined, event: T) => R, delay: number = 100, leading = false, leakWarningThreshold?: number): IChainableEvent<R> {\n\t\t\treturn new ChainableEvent(debounce(this.event, merge, delay, leading, leakWarningThreshold));\n\t\t}\n\n\t\ton(listener: (e: T) => any, thisArgs: any, disposables: IDisposable[] | DisposableStore) {\n\t\t\treturn this.event(listener, thisArgs, disposables);\n\t\t}\n\n\t\tonce(listener: (e: T) => any, thisArgs: any, disposables: IDisposable[]) {\n\t\t\treturn once(this.event)(listener, thisArgs, disposables);\n\t\t}\n\t}\n\n\t/**\n\t * @deprecated DO NOT use, this leaks memory\n\t */\n\texport function chain<T>(event: Event<T>): IChainableEvent<T> {\n\t\treturn new ChainableEvent(event);\n\t}\n\n\texport interface NodeEventEmitter {\n\t\ton(event: string | symbol, listener: Function): unknown;\n\t\tremoveListener(event: string | symbol, listener: Function): unknown;\n\t}\n\n\texport function fromNodeEventEmitter<T>(emitter: NodeEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.on(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onFirstListenerAdd, onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\texport interface DOMEventEmitter {\n\t\taddEventListener(event: string | symbol, listener: Function): void;\n\t\tremoveEventListener(event: string | symbol, listener: Function): void;\n\t}\n\n\texport function fromDOMEventEmitter<T>(emitter: DOMEventEmitter, eventName: string, map: (...args: any[]) => T = id => id): Event<T> {\n\t\tconst fn = (...args: any[]) => result.fire(map(...args));\n\t\tconst onFirstListenerAdd = () => emitter.addEventListener(eventName, fn);\n\t\tconst onLastListenerRemove = () => emitter.removeEventListener(eventName, fn);\n\t\tconst result = new Emitter<T>({ onFirstListenerAdd, onLastListenerRemove });\n\n\t\treturn result.event;\n\t}\n\n\texport function toPromise<T>(event: Event<T>): Promise<T> {\n\t\treturn new Promise(resolve => once(event)(resolve));\n\t}\n\n\texport function runAndSubscribe<T>(event: Event<T>, handler: (e: T | undefined) => any): IDisposable {\n\t\thandler(undefined);\n\t\treturn event(e => handler(e));\n\t}\n\n\texport function runAndSubscribeWithStore<T>(event: Event<T>, handler: (e: T | undefined, disposableStore: DisposableStore) => any): IDisposable {\n\t\tlet store: DisposableStore | null = null;\n\n\t\tfunction run(e: T | undefined) {\n\t\t\tstore?.dispose();\n\t\t\tstore = new DisposableStore();\n\t\t\thandler(e, store);\n\t\t}\n\n\t\trun(undefined);\n\t\tconst disposable = event(e => run(e));\n\t\treturn toDisposable(() => {\n\t\t\tdisposable.dispose();\n\t\t\tstore?.dispose();\n\t\t});\n\t}\n}\n\nexport interface EmitterOptions {\n\tonFirstListenerAdd?: Function;\n\tonFirstListenerDidAdd?: Function;\n\tonListenerDidAdd?: Function;\n\tonLastListenerRemove?: Function;\n\tleakWarningThreshold?: number;\n\n\t/**\n\t * Pass in a delivery queue, which is useful for ensuring\n\t * in order event delivery across multiple emitters.\n\t */\n\tdeliveryQueue?: EventDeliveryQueue;\n\n\t/** ONLY enable this during development */\n\t_profName?: string;\n}\n\n\nclass EventProfiling {\n\n\tprivate static _idPool = 0;\n\n\tprivate _name: string;\n\tprivate _stopWatch?: StopWatch;\n\tprivate _listenerCount: number = 0;\n\tprivate _invocationCount = 0;\n\tprivate _elapsedOverall = 0;\n\n\tconstructor(name: string) {\n\t\tthis._name = `${name}_${EventProfiling._idPool++}`;\n\t}\n\n\tstart(listenerCount: number): void {\n\t\tthis._stopWatch = new StopWatch(true);\n\t\tthis._listenerCount = listenerCount;\n\t}\n\n\tstop(): void {\n\t\tif (this._stopWatch) {\n\t\t\tconst elapsed = this._stopWatch.elapsed();\n\t\t\tthis._elapsedOverall += elapsed;\n\t\t\tthis._invocationCount += 1;\n\n\t\t\tconsole.info(`did FIRE ${this._name}: elapsed_ms: ${elapsed.toFixed(5)}, listener: ${this._listenerCount} (elapsed_overall: ${this._elapsedOverall.toFixed(2)}, invocations: ${this._invocationCount})`);\n\t\t\tthis._stopWatch = undefined;\n\t\t}\n\t}\n}\n\nlet _globalLeakWarningThreshold = -1;\nexport function setGlobalLeakWarningThreshold(n: number): IDisposable {\n\tconst oldValue = _globalLeakWarningThreshold;\n\t_globalLeakWarningThreshold = n;\n\treturn {\n\t\tdispose() {\n\t\t\t_globalLeakWarningThreshold = oldValue;\n\t\t}\n\t};\n}\n\nclass LeakageMonitor {\n\n\tprivate _stacks: Map<string, number> | undefined;\n\tprivate _warnCountdown: number = 0;\n\n\tconstructor(\n\t\treadonly customThreshold?: number,\n\t\treadonly name: string = Math.random().toString(18).slice(2, 5),\n\t) { }\n\n\tdispose(): void {\n\t\tif (this._stacks) {\n\t\t\tthis._stacks.clear();\n\t\t}\n\t}\n\n\tcheck(stack: Stacktrace, listenerCount: number): undefined | (() => void) {\n\n\t\tlet threshold = _globalLeakWarningThreshold;\n\t\tif (typeof this.customThreshold === 'number') {\n\t\t\tthreshold = this.customThreshold;\n\t\t}\n\n\t\tif (threshold <= 0 || listenerCount < threshold) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\tif (!this._stacks) {\n\t\t\tthis._stacks = new Map();\n\t\t}\n\t\tconst count = (this._stacks.get(stack.value) || 0);\n\t\tthis._stacks.set(stack.value, count + 1);\n\t\tthis._warnCountdown -= 1;\n\n\t\tif (this._warnCountdown <= 0) {\n\t\t\t// only warn on first exceed and then every time the limit\n\t\t\t// is exceeded by 50% again\n\t\t\tthis._warnCountdown = threshold * 0.5;\n\n\t\t\t// find most frequent listener and print warning\n\t\t\tlet topStack: string | undefined;\n\t\t\tlet topCount: number = 0;\n\t\t\tfor (const [stack, count] of this._stacks) {\n\t\t\t\tif (!topStack || topCount < count) {\n\t\t\t\t\ttopStack = stack;\n\t\t\t\t\ttopCount = count;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconsole.warn(`[${this.name}] potential listener LEAK detected, having ${listenerCount} listeners already. MOST frequent listener (${topCount}):`);\n\t\t\tconsole.warn(topStack!);\n\t\t}\n\n\t\treturn () => {\n\t\t\tconst count = (this._stacks!.get(stack.value) || 0);\n\t\t\tthis._stacks!.set(stack.value, count - 1);\n\t\t};\n\t}\n}\n\nclass Stacktrace {\n\n\tstatic create() {\n\t\treturn new Stacktrace(new Error().stack ?? '');\n\t}\n\n\tprivate constructor(readonly value: string) { }\n\n\tprint() {\n\t\tconsole.warn(this.value.split('\\n').slice(2).join('\\n'));\n\t}\n}\n\nclass Listener<T> {\n\n\treadonly subscription = new SafeDisposable();\n\n\tconstructor(\n\t\treadonly callback: (e: T) => void,\n\t\treadonly callbackThis: any | undefined,\n\t\treadonly stack: Stacktrace | undefined\n\t) { }\n\n\tinvoke(e: T) {\n\t\tthis.callback.call(this.callbackThis, e);\n\t}\n}\n\n/**\n * The Emitter can be used to expose an Event to the public\n * to fire it from the insides.\n * Sample:\n\tclass Document {\n\n\t\tprivate readonly _onDidChange = new Emitter<(value:string)=>any>();\n\n\t\tpublic onDidChange = this._onDidChange.event;\n\n\t\t// getter-style\n\t\t// get onDidChange(): Event<(value:string)=>any> {\n\t\t// \treturn this._onDidChange.event;\n\t\t// }\n\n\t\tprivate _doIt() {\n\t\t\t//...\n\t\t\tthis._onDidChange.fire(value);\n\t\t}\n\t}\n */\nexport class Emitter<T> {\n\n\tprivate readonly _options?: EmitterOptions;\n\tprivate readonly _leakageMon?: LeakageMonitor;\n\tprivate readonly _perfMon?: EventProfiling;\n\tprivate _disposed: boolean = false;\n\tprivate _event?: Event<T>;\n\tprivate _deliveryQueue?: EventDeliveryQueue;\n\tprotected _listeners?: LinkedList<Listener<T>>;\n\n\tconstructor(options?: EmitterOptions) {\n\t\tthis._options = options;\n\t\tthis._leakageMon = _globalLeakWarningThreshold > 0 ? new LeakageMonitor(this._options && this._options.leakWarningThreshold) : undefined;\n\t\tthis._perfMon = this._options?._profName ? new EventProfiling(this._options._profName) : undefined;\n\t\tthis._deliveryQueue = this._options?.deliveryQueue;\n\t}\n\n\tdispose() {\n\t\tif (!this._disposed) {\n\t\t\tthis._disposed = true;\n\n\t\t\t// It is bad to have listeners at the time of disposing an emitter, it is worst to have listeners keep the emitter\n\t\t\t// alive via the reference that's embedded in their disposables. Therefore we loop over all remaining listeners and\n\t\t\t// unset their subscriptions/disposables. Looping and blaming remaining listeners is done on next tick because the\n\t\t\t// the following programming pattern is very popular:\n\t\t\t//\n\t\t\t// const someModel = this._disposables.add(new ModelObject()); // (1) create and register model\n\t\t\t// this._disposables.add(someModel.onDidChange(() => { ... }); // (2) subscribe and register model-event listener\n\t\t\t// ...later...\n\t\t\t// this._disposables.dispose(); disposes (1) then (2): don't warn after (1) but after the \"overall dispose\" is done\n\n\t\t\tif (this._listeners) {\n\t\t\t\tif (_enableDisposeWithListenerWarning) {\n\t\t\t\t\tconst listeners = Array.from(this._listeners);\n\t\t\t\t\tqueueMicrotask(() => {\n\t\t\t\t\t\tfor (const listener of listeners) {\n\t\t\t\t\t\t\tif (listener.subscription.isset()) {\n\t\t\t\t\t\t\t\tlistener.subscription.unset();\n\t\t\t\t\t\t\t\tlistener.stack?.print();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tthis._listeners.clear();\n\t\t\t}\n\t\t\tthis._deliveryQueue?.clear(this);\n\t\t\tthis._options?.onLastListenerRemove?.();\n\t\t\tthis._leakageMon?.dispose();\n\t\t}\n\t}\n\n\t/**\n\t * For the public to allow to subscribe\n\t * to events from this Emitter\n\t */\n\tget event(): Event<T> {\n\t\tif (!this._event) {\n\t\t\tthis._event = (callback: (e: T) => any, thisArgs?: any, disposables?: IDisposable[] | DisposableStore) => {\n\t\t\t\tif (!this._listeners) {\n\t\t\t\t\tthis._listeners = new LinkedList();\n\t\t\t\t}\n\n\t\t\t\tconst firstListener = this._listeners.isEmpty();\n\n\t\t\t\tif (firstListener && this._options?.onFirstListenerAdd) {\n\t\t\t\t\tthis._options.onFirstListenerAdd(this);\n\t\t\t\t}\n\n\t\t\t\tlet removeMonitor: Function | undefined;\n\t\t\t\tlet stack: Stacktrace | undefined;\n\t\t\t\tif (this._leakageMon && this._listeners.size >= 30) {\n\t\t\t\t\t// check and record this emitter for potential leakage\n\t\t\t\t\tstack = Stacktrace.create();\n\t\t\t\t\tremoveMonitor = this._leakageMon.check(stack, this._listeners.size + 1);\n\t\t\t\t}\n\n\t\t\t\tif (_enableDisposeWithListenerWarning) {\n\t\t\t\t\tstack = stack ?? Stacktrace.create();\n\t\t\t\t}\n\n\t\t\t\tconst listener = new Listener(callback, thisArgs, stack);\n\t\t\t\tconst removeListener = this._listeners.push(listener);\n\n\t\t\t\tif (firstListener && this._options?.onFirstListenerDidAdd) {\n\t\t\t\t\tthis._options.onFirstListenerDidAdd(this);\n\t\t\t\t}\n\n\t\t\t\tif (this._options?.onListenerDidAdd) {\n\t\t\t\t\tthis._options.onListenerDidAdd(this, callback, thisArgs);\n\t\t\t\t}\n\n\t\t\t\tconst result = listener.subscription.set(() => {\n\t\t\t\t\tif (removeMonitor) {\n\t\t\t\t\t\tremoveMonitor();\n\t\t\t\t\t}\n\t\t\t\t\tif (!this._disposed) {\n\t\t\t\t\t\tremoveListener();\n\t\t\t\t\t\tif (this._options && this._options.onLastListenerRemove) {\n\t\t\t\t\t\t\tconst hasListeners = (this._listeners && !this._listeners.isEmpty());\n\t\t\t\t\t\t\tif (!hasListeners) {\n\t\t\t\t\t\t\t\tthis._options.onLastListenerRemove(this);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif (disposables instanceof DisposableStore) {\n\t\t\t\t\tdisposables.add(result);\n\t\t\t\t} else if (Array.isArray(disposables)) {\n\t\t\t\t\tdisposables.push(result);\n\t\t\t\t}\n\n\t\t\t\treturn result;\n\t\t\t};\n\t\t}\n\t\treturn this._event;\n\t}\n\n\t/**\n\t * To be kept private to fire an event to\n\t * subscribers\n\t */\n\tfire(event: T): void {\n\t\tif (this._listeners) {\n\t\t\t// put all [listener,event]-pairs into delivery queue\n\t\t\t// then emit all event. an inner/nested event might be\n\t\t\t// the driver of this\n\n\t\t\tif (!this._deliveryQueue) {\n\t\t\t\tthis._deliveryQueue = new PrivateEventDeliveryQueue();\n\t\t\t}\n\n\t\t\tfor (let listener of this._listeners) {\n\t\t\t\tthis._deliveryQueue.push(this, listener, event);\n\t\t\t}\n\n\t\t\t// start/stop performance insight collection\n\t\t\tthis._perfMon?.start(this._deliveryQueue.size);\n\n\t\t\tthis._deliveryQueue.deliver();\n\n\t\t\tthis._perfMon?.stop();\n\t\t}\n\t}\n\n\thasListeners(): boolean {\n\t\tif (!this._listeners) {\n\t\t\treturn false;\n\t\t}\n\t\treturn (!this._listeners.isEmpty());\n\t}\n}\n\nexport class EventDeliveryQueue {\n\tprotected _queue = new LinkedList<EventDeliveryQueueElement>();\n\n\tget size(): number {\n\t\treturn this._queue.size;\n\t}\n\n\tpush<T>(emitter: Emitter<T>, listener: Listener<T>, event: T): void {\n\t\tthis._queue.push(new EventDeliveryQueueElement(emitter, listener, event));\n\t}\n\n\tclear<T>(emitter: Emitter<T>): void {\n\t\tconst newQueue = new LinkedList<EventDeliveryQueueElement>();\n\t\tfor (const element of this._queue) {\n\t\t\tif (element.emitter !== emitter) {\n\t\t\t\tnewQueue.push(element);\n\t\t\t}\n\t\t}\n\t\tthis._queue = newQueue;\n\t}\n\n\tdeliver(): void {\n\t\twhile (this._queue.size > 0) {\n\t\t\tconst element = this._queue.shift()!;\n\t\t\ttry {\n\t\t\t\telement.listener.invoke(element.event);\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * An `EventDeliveryQueue` that is guaranteed to be used by a single `Emitter`.\n */\nclass PrivateEventDeliveryQueue extends EventDeliveryQueue {\n\toverride clear<T>(emitter: Emitter<T>): void {\n\t\t// Here we can just clear the entire linked list because\n\t\t// all elements are guaranteed to belong to this emitter\n\t\tthis._queue.clear();\n\t}\n}\n\nclass EventDeliveryQueueElement<T = any> {\n\tconstructor(\n\t\treadonly emitter: Emitter<T>,\n\t\treadonly listener: Listener<T>,\n\t\treadonly event: T\n\t) { }\n}\n\nexport interface IWaitUntil {\n\ttoken: CancellationToken;\n\twaitUntil(thenable: Promise<unknown>): void;\n}\n\nexport type IWaitUntilData<T> = Omit<Omit<T, 'waitUntil'>, 'token'>;\n\nexport class AsyncEmitter<T extends IWaitUntil> extends Emitter<T> {\n\n\tprivate _asyncDeliveryQueue?: LinkedList<[Listener<T>, IWaitUntilData<T>]>;\n\n\tasync fireAsync(data: IWaitUntilData<T>, token: CancellationToken, promiseJoin?: (p: Promise<unknown>, listener: Function) => Promise<unknown>): Promise<void> {\n\t\tif (!this._listeners) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (!this._asyncDeliveryQueue) {\n\t\t\tthis._asyncDeliveryQueue = new LinkedList();\n\t\t}\n\n\t\tfor (const listener of this._listeners) {\n\t\t\tthis._asyncDeliveryQueue.push([listener, data]);\n\t\t}\n\n\t\twhile (this._asyncDeliveryQueue.size > 0 && !token.isCancellationRequested) {\n\n\t\t\tconst [listener, data] = this._asyncDeliveryQueue.shift()!;\n\t\t\tconst thenables: Promise<unknown>[] = [];\n\n\t\t\tconst event = <T>{\n\t\t\t\t...data,\n\t\t\t\ttoken,\n\t\t\t\twaitUntil: (p: Promise<unknown>): void => {\n\t\t\t\t\tif (Object.isFrozen(thenables)) {\n\t\t\t\t\t\tthrow new Error('waitUntil can NOT be called asynchronous');\n\t\t\t\t\t}\n\t\t\t\t\tif (promiseJoin) {\n\t\t\t\t\t\tp = promiseJoin(p, listener.callback);\n\t\t\t\t\t}\n\t\t\t\t\tthenables.push(p);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ttry {\n\t\t\t\tlistener.invoke(event);\n\t\t\t} catch (e) {\n\t\t\t\tonUnexpectedError(e);\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\t// freeze thenables-collection to enforce sync-calls to\n\t\t\t// wait until and then wait for all thenables to resolve\n\t\t\tObject.freeze(thenables);\n\n\t\t\tawait Promise.allSettled(thenables).then(values => {\n\t\t\t\tfor (const value of values) {\n\t\t\t\t\tif (value.status === 'rejected') {\n\t\t\t\t\t\tonUnexpectedError(value.reason);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n}\n\n\nexport class PauseableEmitter<T> extends Emitter<T> {\n\n\tprivate _isPaused = 0;\n\tprotected _eventQueue = new LinkedList<T>();\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\n\tpause(): void {\n\t\tthis._isPaused++;\n\t}\n\n\tresume(): void {\n\t\tif (this._isPaused !== 0 && --this._isPaused === 0) {\n\t\t\tif (this._mergeFn) {\n\t\t\t\t// use the merge function to create a single composite\n\t\t\t\t// event. make a copy in case firing pauses this emitter\n\t\t\t\tconst events = Array.from(this._eventQueue);\n\t\t\t\tthis._eventQueue.clear();\n\t\t\t\tsuper.fire(this._mergeFn(events));\n\n\t\t\t} else {\n\t\t\t\t// no merging, fire each event individually and test\n\t\t\t\t// that this emitter isn't paused halfway through\n\t\t\t\twhile (!this._isPaused && this._eventQueue.size !== 0) {\n\t\t\t\t\tsuper.fire(this._eventQueue.shift()!);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (this._listeners) {\n\t\t\tif (this._isPaused !== 0) {\n\t\t\t\tthis._eventQueue.push(event);\n\t\t\t} else {\n\t\t\t\tsuper.fire(event);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport class DebounceEmitter<T> extends PauseableEmitter<T> {\n\n\tprivate readonly _delay: number;\n\tprivate _handle: any | undefined;\n\n\tconstructor(options: EmitterOptions & { merge: (input: T[]) => T; delay?: number }) {\n\t\tsuper(options);\n\t\tthis._delay = options.delay ?? 100;\n\t}\n\n\toverride fire(event: T): void {\n\t\tif (!this._handle) {\n\t\t\tthis.pause();\n\t\t\tthis._handle = setTimeout(() => {\n\t\t\t\tthis._handle = undefined;\n\t\t\t\tthis.resume();\n\t\t\t}, this._delay);\n\t\t}\n\t\tsuper.fire(event);\n\t}\n}\n\n/**\n * An emitter which queue all events and then process them at the\n * end of the event loop.\n */\nexport class MicrotaskEmitter<T> extends Emitter<T> {\n\tprivate _queuedEvents: T[] = [];\n\tprivate _mergeFn?: (input: T[]) => T;\n\n\tconstructor(options?: EmitterOptions & { merge?: (input: T[]) => T }) {\n\t\tsuper(options);\n\t\tthis._mergeFn = options?.merge;\n\t}\n\toverride fire(event: T): void {\n\t\tthis._queuedEvents.push(event);\n\t\tif (this._queuedEvents.length === 1) {\n\t\t\tqueueMicrotask(() => {\n\t\t\t\tif (this._mergeFn) {\n\t\t\t\t\tsuper.fire(this._mergeFn(this._queuedEvents));\n\t\t\t\t} else {\n\t\t\t\t\tthis._queuedEvents.forEach(e => super.fire(e));\n\t\t\t\t}\n\t\t\t\tthis._queuedEvents = [];\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport class EventMultiplexer<T> implements IDisposable {\n\n\tprivate readonly emitter: Emitter<T>;\n\tprivate hasListeners = false;\n\tprivate events: { event: Event<T>; listener: IDisposable | null }[] = [];\n\n\tconstructor() {\n\t\tthis.emitter = new Emitter<T>({\n\t\t\tonFirstListenerAdd: () => this.onFirstListenerAdd(),\n\t\t\tonLastListenerRemove: () => this.onLastListenerRemove()\n\t\t});\n\t}\n\n\tget event(): Event<T> {\n\t\treturn this.emitter.event;\n\t}\n\n\tadd(event: Event<T>): IDisposable {\n\t\tconst e = { event: event, listener: null };\n\t\tthis.events.push(e);\n\n\t\tif (this.hasListeners) {\n\t\t\tthis.hook(e);\n\t\t}\n\n\t\tconst dispose = () => {\n\t\t\tif (this.hasListeners) {\n\t\t\t\tthis.unhook(e);\n\t\t\t}\n\n\t\t\tconst idx = this.events.indexOf(e);\n\t\t\tthis.events.splice(idx, 1);\n\t\t};\n\n\t\treturn toDisposable(onceFn(dispose));\n\t}\n\n\tprivate onFirstListenerAdd(): void {\n\t\tthis.hasListeners = true;\n\t\tthis.events.forEach(e => this.hook(e));\n\t}\n\n\tprivate onLastListenerRemove(): void {\n\t\tthis.hasListeners = false;\n\t\tthis.events.forEach(e => this.unhook(e));\n\t}\n\n\tprivate hook(e: { event: Event<T>; listener: IDisposable | null }): void {\n\t\te.listener = e.event(r => this.emitter.fire(r));\n\t}\n\n\tprivate unhook(e: { event: Event<T>; listener: IDisposable | null }): void {\n\t\tif (e.listener) {\n\t\t\te.listener.dispose();\n\t\t}\n\t\te.listener = null;\n\t}\n\n\tdispose(): void {\n\t\tthis.emitter.dispose();\n\t}\n}\n\n/**\n * The EventBufferer is useful in situations in which you want\n * to delay firing your events during some code.\n * You can wrap that code and be sure that the event will not\n * be fired during that wrap.\n *\n * ```\n * const emitter: Emitter;\n * const delayer = new EventDelayer();\n * const delayedEvent = delayer.wrapEvent(emitter.event);\n *\n * delayedEvent(console.log);\n *\n * delayer.bufferEvents(() => {\n *   emitter.fire(); // event will not be fired yet\n * });\n *\n * // event will only be fired at this point\n * ```\n */\nexport class EventBufferer {\n\n\tprivate buffers: Function[][] = [];\n\n\twrapEvent<T>(event: Event<T>): Event<T> {\n\t\treturn (listener, thisArgs?, disposables?) => {\n\t\t\treturn event(i => {\n\t\t\t\tconst buffer = this.buffers[this.buffers.length - 1];\n\n\t\t\t\tif (buffer) {\n\t\t\t\t\tbuffer.push(() => listener.call(thisArgs, i));\n\t\t\t\t} else {\n\t\t\t\t\tlistener.call(thisArgs, i);\n\t\t\t\t}\n\t\t\t}, undefined, disposables);\n\t\t};\n\t}\n\n\tbufferEvents<R = void>(fn: () => R): R {\n\t\tconst buffer: Array<() => R> = [];\n\t\tthis.buffers.push(buffer);\n\t\tconst r = fn();\n\t\tthis.buffers.pop();\n\t\tbuffer.forEach(flush => flush());\n\t\treturn r;\n\t}\n}\n\n/**\n * A Relay is an event forwarder which functions as a replugabble event pipe.\n * Once created, you can connect an input event to it and it will simply forward\n * events from that input event through its own `event` property. The `input`\n * can be changed at any point in time.\n */\nexport class Relay<T> implements IDisposable {\n\n\tprivate listening = false;\n\tprivate inputEvent: Event<T> = Event.None;\n\tprivate inputEventListener: IDisposable = Disposable.None;\n\n\tprivate readonly emitter = new Emitter<T>({\n\t\tonFirstListenerDidAdd: () => {\n\t\t\tthis.listening = true;\n\t\t\tthis.inputEventListener = this.inputEvent(this.emitter.fire, this.emitter);\n\t\t},\n\t\tonLastListenerRemove: () => {\n\t\t\tthis.listening = false;\n\t\t\tthis.inputEventListener.dispose();\n\t\t}\n\t});\n\n\treadonly event: Event<T> = this.emitter.event;\n\n\tset input(event: Event<T>) {\n\t\tthis.inputEvent = event;\n\n\t\tif (this.listening) {\n\t\t\tthis.inputEventListener.dispose();\n\t\t\tthis.inputEventListener = event(this.emitter.fire, this.emitter);\n\t\t}\n\t}\n\n\tdispose() {\n\t\tthis.inputEventListener.dispose();\n\t\tthis.emitter.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './charCode';\nimport { isAbsolute, join, normalize, posix, sep } from './path';\nimport { isWindows } from './platform';\nimport { equalsIgnoreCase, rtrim, startsWithIgnoreCase } from './strings';\nimport { isNumber } from './types';\n\nexport function isPathSeparator(code: number) {\n\treturn code === CharCode.Slash || code === CharCode.Backslash;\n}\n\n/**\n * Takes a Windows OS path and changes backward slashes to forward slashes.\n * This should only be done for OS paths from Windows (or user provided paths potentially from Windows).\n * Using it on a Linux or MaxOS path might change it.\n */\nexport function toSlashes(osPath: string) {\n\treturn osPath.replace(/[\\\\/]/g, posix.sep);\n}\n\n/**\n * Takes a Windows OS path (using backward or forward slashes) and turns it into a posix path:\n * - turns backward slashes into forward slashes\n * - makes it absolute if it starts with a drive letter\n * This should only be done for OS paths from Windows (or user provided paths potentially from Windows).\n * Using it on a Linux or MaxOS path might change it.\n */\nexport function toPosixPath(osPath: string) {\n\tif (osPath.indexOf('/') === -1) {\n\t\tosPath = toSlashes(osPath);\n\t}\n\tif (/^[a-zA-Z]:(\\/|$)/.test(osPath)) { // starts with a drive letter\n\t\tosPath = '/' + osPath;\n\t}\n\treturn osPath;\n}\n\n/**\n * Computes the _root_ this path, like `getRoot('c:\\files') === c:\\`,\n * `getRoot('files:///files/path') === files:///`,\n * or `getRoot('\\\\server\\shares\\path') === \\\\server\\shares\\`\n */\nexport function getRoot(path: string, sep: string = posix.sep): string {\n\tif (!path) {\n\t\treturn '';\n\t}\n\n\tconst len = path.length;\n\tconst firstLetter = path.charCodeAt(0);\n\tif (isPathSeparator(firstLetter)) {\n\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t// UNC candidate \\\\localhost\\shares\\ddd\n\t\t\t//               ^^^^^^^^^^^^^^^^^^^\n\t\t\tif (!isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\tlet pos = 3;\n\t\t\t\tconst start = pos;\n\t\t\t\tfor (; pos < len; pos++) {\n\t\t\t\t\tif (isPathSeparator(path.charCodeAt(pos))) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (start !== pos && !isPathSeparator(path.charCodeAt(pos + 1))) {\n\t\t\t\t\tpos += 1;\n\t\t\t\t\tfor (; pos < len; pos++) {\n\t\t\t\t\t\tif (isPathSeparator(path.charCodeAt(pos))) {\n\t\t\t\t\t\t\treturn path.slice(0, pos + 1) // consume this separator\n\t\t\t\t\t\t\t\t.replace(/[\\\\/]/g, sep);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// /user/far\n\t\t// ^\n\t\treturn sep;\n\n\t} else if (isWindowsDriveLetter(firstLetter)) {\n\t\t// check for windows drive letter c:\\ or c:\n\n\t\tif (path.charCodeAt(1) === CharCode.Colon) {\n\t\t\tif (isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\t// C:\\fff\n\t\t\t\t// ^^^\n\t\t\t\treturn path.slice(0, 2) + sep;\n\t\t\t} else {\n\t\t\t\t// C:\n\t\t\t\t// ^^\n\t\t\t\treturn path.slice(0, 2);\n\t\t\t}\n\t\t}\n\t}\n\n\t// check for URI\n\t// scheme://authority/path\n\t// ^^^^^^^^^^^^^^^^^^^\n\tlet pos = path.indexOf('://');\n\tif (pos !== -1) {\n\t\tpos += 3; // 3 -> \"://\".length\n\t\tfor (; pos < len; pos++) {\n\t\t\tif (isPathSeparator(path.charCodeAt(pos))) {\n\t\t\t\treturn path.slice(0, pos + 1); // consume this separator\n\t\t\t}\n\t\t}\n\t}\n\n\treturn '';\n}\n\n/**\n * Check if the path follows this pattern: `\\\\hostname\\sharename`.\n *\n * @see https://msdn.microsoft.com/en-us/library/gg465305.aspx\n * @return A boolean indication if the path is a UNC path, on none-windows\n * always false.\n */\nexport function isUNC(path: string): boolean {\n\tif (!isWindows) {\n\t\t// UNC is a windows concept\n\t\treturn false;\n\t}\n\n\tif (!path || path.length < 5) {\n\t\t// at least \\\\a\\b\n\t\treturn false;\n\t}\n\n\tlet code = path.charCodeAt(0);\n\tif (code !== CharCode.Backslash) {\n\t\treturn false;\n\t}\n\n\tcode = path.charCodeAt(1);\n\n\tif (code !== CharCode.Backslash) {\n\t\treturn false;\n\t}\n\n\tlet pos = 2;\n\tconst start = pos;\n\tfor (; pos < path.length; pos++) {\n\t\tcode = path.charCodeAt(pos);\n\t\tif (code === CharCode.Backslash) {\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif (start === pos) {\n\t\treturn false;\n\t}\n\n\tcode = path.charCodeAt(pos + 1);\n\n\tif (isNaN(code) || code === CharCode.Backslash) {\n\t\treturn false;\n\t}\n\n\treturn true;\n}\n\n// Reference: https://en.wikipedia.org/wiki/Filename\nconst WINDOWS_INVALID_FILE_CHARS = /[\\\\/:\\*\\?\"<>\\|]/g;\nconst UNIX_INVALID_FILE_CHARS = /[\\\\/]/g;\nconst WINDOWS_FORBIDDEN_NAMES = /^(con|prn|aux|clock\\$|nul|lpt[0-9]|com[0-9])(\\.(.*?))?$/i;\nexport function isValidBasename(name: string | null | undefined, isWindowsOS: boolean = isWindows): boolean {\n\tconst invalidFileChars = isWindowsOS ? WINDOWS_INVALID_FILE_CHARS : UNIX_INVALID_FILE_CHARS;\n\n\tif (!name || name.length === 0 || /^\\s+$/.test(name)) {\n\t\treturn false; // require a name that is not just whitespace\n\t}\n\n\tinvalidFileChars.lastIndex = 0; // the holy grail of software development\n\tif (invalidFileChars.test(name)) {\n\t\treturn false; // check for certain invalid file characters\n\t}\n\n\tif (isWindowsOS && WINDOWS_FORBIDDEN_NAMES.test(name)) {\n\t\treturn false; // check for certain invalid file names\n\t}\n\n\tif (name === '.' || name === '..') {\n\t\treturn false; // check for reserved values\n\t}\n\n\tif (isWindowsOS && name[name.length - 1] === '.') {\n\t\treturn false; // Windows: file cannot end with a \".\"\n\t}\n\n\tif (isWindowsOS && name.length !== name.trim().length) {\n\t\treturn false; // Windows: file cannot end with a whitespace\n\t}\n\n\tif (name.length > 255) {\n\t\treturn false; // most file systems do not allow files > 255 length\n\t}\n\n\treturn true;\n}\n\n/**\n * @deprecated please use `IUriIdentityService.extUri.isEqual` instead. If you are\n * in a context without services, consider to pass down the `extUri` from the outside\n * or use `extUriBiasedIgnorePathCase` if you know what you are doing.\n */\nexport function isEqual(pathA: string, pathB: string, ignoreCase?: boolean): boolean {\n\tconst identityEquals = (pathA === pathB);\n\tif (!ignoreCase || identityEquals) {\n\t\treturn identityEquals;\n\t}\n\n\tif (!pathA || !pathB) {\n\t\treturn false;\n\t}\n\n\treturn equalsIgnoreCase(pathA, pathB);\n}\n\n/**\n * @deprecated please use `IUriIdentityService.extUri.isEqualOrParent` instead. If\n * you are in a context without services, consider to pass down the `extUri` from the\n * outside, or use `extUriBiasedIgnorePathCase` if you know what you are doing.\n */\nexport function isEqualOrParent(base: string, parentCandidate: string, ignoreCase?: boolean, separator = sep): boolean {\n\tif (base === parentCandidate) {\n\t\treturn true;\n\t}\n\n\tif (!base || !parentCandidate) {\n\t\treturn false;\n\t}\n\n\tif (parentCandidate.length > base.length) {\n\t\treturn false;\n\t}\n\n\tif (ignoreCase) {\n\t\tconst beginsWith = startsWithIgnoreCase(base, parentCandidate);\n\t\tif (!beginsWith) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (parentCandidate.length === base.length) {\n\t\t\treturn true; // same path, different casing\n\t\t}\n\n\t\tlet sepOffset = parentCandidate.length;\n\t\tif (parentCandidate.charAt(parentCandidate.length - 1) === separator) {\n\t\t\tsepOffset--; // adjust the expected sep offset in case our candidate already ends in separator character\n\t\t}\n\n\t\treturn base.charAt(sepOffset) === separator;\n\t}\n\n\tif (parentCandidate.charAt(parentCandidate.length - 1) !== separator) {\n\t\tparentCandidate += separator;\n\t}\n\n\treturn base.indexOf(parentCandidate) === 0;\n}\n\nexport function isWindowsDriveLetter(char0: number): boolean {\n\treturn char0 >= CharCode.A && char0 <= CharCode.Z || char0 >= CharCode.a && char0 <= CharCode.z;\n}\n\nexport function sanitizeFilePath(candidate: string, cwd: string): string {\n\n\t// Special case: allow to open a drive letter without trailing backslash\n\tif (isWindows && candidate.endsWith(':')) {\n\t\tcandidate += sep;\n\t}\n\n\t// Ensure absolute\n\tif (!isAbsolute(candidate)) {\n\t\tcandidate = join(cwd, candidate);\n\t}\n\n\t// Ensure normalized\n\tcandidate = normalize(candidate);\n\n\t// Ensure no trailing slash/backslash\n\tif (isWindows) {\n\t\tcandidate = rtrim(candidate, sep);\n\n\t\t// Special case: allow to open drive root ('C:\\')\n\t\tif (candidate.endsWith(':')) {\n\t\t\tcandidate += sep;\n\t\t}\n\n\t} else {\n\t\tcandidate = rtrim(candidate, sep);\n\n\t\t// Special case: allow to open root ('/')\n\t\tif (!candidate) {\n\t\t\tcandidate = sep;\n\t\t}\n\t}\n\n\treturn candidate;\n}\n\nexport function isRootOrDriveLetter(path: string): boolean {\n\tconst pathNormalized = normalize(path);\n\n\tif (isWindows) {\n\t\tif (path.length > 3) {\n\t\t\treturn false;\n\t\t}\n\n\t\treturn hasDriveLetter(pathNormalized) &&\n\t\t\t(path.length === 2 || pathNormalized.charCodeAt(2) === CharCode.Backslash);\n\t}\n\n\treturn pathNormalized === posix.sep;\n}\n\nexport function hasDriveLetter(path: string, isWindowsOS: boolean = isWindows): boolean {\n\tif (isWindowsOS) {\n\t\treturn isWindowsDriveLetter(path.charCodeAt(0)) && path.charCodeAt(1) === CharCode.Colon;\n\t}\n\n\treturn false;\n}\n\nexport function getDriveLetter(path: string): string | undefined {\n\treturn hasDriveLetter(path) ? path[0] : undefined;\n}\n\nexport function indexOfPath(path: string, candidate: string, ignoreCase?: boolean): number {\n\tif (candidate.length > path.length) {\n\t\treturn -1;\n\t}\n\n\tif (path === candidate) {\n\t\treturn 0;\n\t}\n\n\tif (ignoreCase) {\n\t\tpath = path.toLowerCase();\n\t\tcandidate = candidate.toLowerCase();\n\t}\n\n\treturn path.indexOf(candidate);\n}\n\nexport interface IPathWithLineAndColumn {\n\tpath: string;\n\tline?: number;\n\tcolumn?: number;\n}\n\nexport function parseLineAndColumnAware(rawPath: string): IPathWithLineAndColumn {\n\tconst segments = rawPath.split(':'); // C:\\file.txt:<line>:<column>\n\n\tlet path: string | undefined = undefined;\n\tlet line: number | undefined = undefined;\n\tlet column: number | undefined = undefined;\n\n\tfor (const segment of segments) {\n\t\tconst segmentAsNumber = Number(segment);\n\t\tif (!isNumber(segmentAsNumber)) {\n\t\t\tpath = !!path ? [path, segment].join(':') : segment; // a colon can well be part of a path (e.g. C:\\...)\n\t\t} else if (line === undefined) {\n\t\t\tline = segmentAsNumber;\n\t\t} else if (column === undefined) {\n\t\t\tcolumn = segmentAsNumber;\n\t\t}\n\t}\n\n\tif (!path) {\n\t\tthrow new Error('Format for `--goto` should be: `FILE:LINE(:COLUMN)`');\n\t}\n\n\treturn {\n\t\tpath,\n\t\tline: line !== undefined ? line : undefined,\n\t\tcolumn: column !== undefined ? column : line !== undefined ? 1 : undefined // if we have a line, make sure column is also set\n\t};\n}\n\nconst pathChars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789';\n\nexport function randomPath(parent?: string, prefix?: string, randomLength = 8): string {\n\tlet suffix = '';\n\tfor (let i = 0; i < randomLength; i++) {\n\t\tsuffix += pathChars.charAt(Math.floor(Math.random() * pathChars.length));\n\t}\n\n\tlet randomFileName: string;\n\tif (prefix) {\n\t\trandomFileName = `${prefix}-${suffix}`;\n\t} else {\n\t\trandomFileName = suffix;\n\t}\n\n\tif (parent) {\n\t\treturn join(parent, randomFileName);\n\t}\n\n\treturn randomFileName;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport function once<T extends Function>(this: unknown, fn: T): T {\n\tconst _this = this;\n\tlet didCall = false;\n\tlet result: unknown;\n\n\treturn function () {\n\t\tif (didCall) {\n\t\t\treturn result;\n\t\t}\n\n\t\tdidCall = true;\n\t\tresult = fn.apply(_this, arguments);\n\n\t\treturn result;\n\t} as unknown as T;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport namespace Iterable {\n\n\texport function is<T = any>(thing: any): thing is IterableIterator<T> {\n\t\treturn thing && typeof thing === 'object' && typeof thing[Symbol.iterator] === 'function';\n\t}\n\n\tconst _empty: Iterable<any> = Object.freeze([]);\n\texport function empty<T = any>(): Iterable<T> {\n\t\treturn _empty;\n\t}\n\n\texport function* single<T>(element: T): Iterable<T> {\n\t\tyield element;\n\t}\n\n\texport function from<T>(iterable: Iterable<T> | undefined | null): Iterable<T> {\n\t\treturn iterable || _empty;\n\t}\n\n\texport function isEmpty<T>(iterable: Iterable<T> | undefined | null): boolean {\n\t\treturn !iterable || iterable[Symbol.iterator]().next().done === true;\n\t}\n\n\texport function first<T>(iterable: Iterable<T>): T | undefined {\n\t\treturn iterable[Symbol.iterator]().next().value;\n\t}\n\n\texport function some<T>(iterable: Iterable<T>, predicate: (t: T) => unknown): boolean {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\texport function find<T, R extends T>(iterable: Iterable<T>, predicate: (t: T) => t is R): T | undefined;\n\texport function find<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): T | undefined;\n\texport function find<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): T | undefined {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\treturn element;\n\t\t\t}\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\texport function filter<T, R extends T>(iterable: Iterable<T>, predicate: (t: T) => t is R): Iterable<R>;\n\texport function filter<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): Iterable<T>;\n\texport function* filter<T>(iterable: Iterable<T>, predicate: (t: T) => boolean): Iterable<T> {\n\t\tfor (const element of iterable) {\n\t\t\tif (predicate(element)) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function* map<T, R>(iterable: Iterable<T>, fn: (t: T, index: number) => R): Iterable<R> {\n\t\tlet index = 0;\n\t\tfor (const element of iterable) {\n\t\t\tyield fn(element, index++);\n\t\t}\n\t}\n\n\texport function* concat<T>(...iterables: Iterable<T>[]): Iterable<T> {\n\t\tfor (const iterable of iterables) {\n\t\t\tfor (const element of iterable) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function* concatNested<T>(iterables: Iterable<Iterable<T>>): Iterable<T> {\n\t\tfor (const iterable of iterables) {\n\t\t\tfor (const element of iterable) {\n\t\t\t\tyield element;\n\t\t\t}\n\t\t}\n\t}\n\n\texport function reduce<T, R>(iterable: Iterable<T>, reducer: (previousValue: R, currentValue: T) => R, initialValue: R): R {\n\t\tlet value = initialValue;\n\t\tfor (const element of iterable) {\n\t\t\tvalue = reducer(value, element);\n\t\t}\n\t\treturn value;\n\t}\n\n\t/**\n\t * Returns an iterable slice of the array, with the same semantics as `array.slice()`.\n\t */\n\texport function* slice<T>(arr: ReadonlyArray<T>, from: number, to = arr.length): Iterable<T> {\n\t\tif (from < 0) {\n\t\t\tfrom += arr.length;\n\t\t}\n\n\t\tif (to < 0) {\n\t\t\tto += arr.length;\n\t\t} else if (to > arr.length) {\n\t\t\tto = arr.length;\n\t\t}\n\n\t\tfor (; from < to; from++) {\n\t\t\tyield arr[from];\n\t\t}\n\t}\n\n\t/**\n\t * Consumes `atMost` elements from iterable and returns the consumed elements,\n\t * and an iterable for the rest of the elements.\n\t */\n\texport function consume<T>(iterable: Iterable<T>, atMost: number = Number.POSITIVE_INFINITY): [T[], Iterable<T>] {\n\t\tconst consumed: T[] = [];\n\n\t\tif (atMost === 0) {\n\t\t\treturn [consumed, iterable];\n\t\t}\n\n\t\tconst iterator = iterable[Symbol.iterator]();\n\n\t\tfor (let i = 0; i < atMost; i++) {\n\t\t\tconst next = iterator.next();\n\n\t\t\tif (next.done) {\n\t\t\t\treturn [consumed, Iterable.empty()];\n\t\t\t}\n\n\t\t\tconsumed.push(next.value);\n\t\t}\n\n\t\treturn [consumed, { [Symbol.iterator]() { return iterator; } }];\n\t}\n\n\t/**\n\t * Returns whether the iterables are the same length and all items are\n\t * equal using the comparator function.\n\t */\n\texport function equals<T>(a: Iterable<T>, b: Iterable<T>, comparator = (at: T, bt: T) => at === bt) {\n\t\tconst ai = a[Symbol.iterator]();\n\t\tconst bi = b[Symbol.iterator]();\n\t\twhile (true) {\n\t\t\tconst an = ai.next();\n\t\t\tconst bn = bi.next();\n\n\t\t\tif (an.done !== bn.done) {\n\t\t\t\treturn false;\n\t\t\t} else if (an.done) {\n\t\t\t\treturn true;\n\t\t\t} else if (!comparator(an.value, bn.value)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport const enum ScanError {\n\tNone = 0,\n\tUnexpectedEndOfComment = 1,\n\tUnexpectedEndOfString = 2,\n\tUnexpectedEndOfNumber = 3,\n\tInvalidUnicode = 4,\n\tInvalidEscapeCharacter = 5,\n\tInvalidCharacter = 6\n}\n\nexport const enum SyntaxKind {\n\tOpenBraceToken = 1,\n\tCloseBraceToken = 2,\n\tOpenBracketToken = 3,\n\tCloseBracketToken = 4,\n\tCommaToken = 5,\n\tColonToken = 6,\n\tNullKeyword = 7,\n\tTrueKeyword = 8,\n\tFalseKeyword = 9,\n\tStringLiteral = 10,\n\tNumericLiteral = 11,\n\tLineCommentTrivia = 12,\n\tBlockCommentTrivia = 13,\n\tLineBreakTrivia = 14,\n\tTrivia = 15,\n\tUnknown = 16,\n\tEOF = 17\n}\n\n/**\n * The scanner object, representing a JSON scanner at a position in the input string.\n */\nexport interface JSONScanner {\n\t/**\n\t * Sets the scan position to a new offset. A call to 'scan' is needed to get the first token.\n\t */\n\tsetPosition(pos: number): void;\n\t/**\n\t * Read the next token. Returns the token code.\n\t */\n\tscan(): SyntaxKind;\n\t/**\n\t * Returns the current scan position, which is after the last read token.\n\t */\n\tgetPosition(): number;\n\t/**\n\t * Returns the last read token.\n\t */\n\tgetToken(): SyntaxKind;\n\t/**\n\t * Returns the last read token value. The value for strings is the decoded string content. For numbers its of type number, for boolean it's true or false.\n\t */\n\tgetTokenValue(): string;\n\t/**\n\t * The start offset of the last read token.\n\t */\n\tgetTokenOffset(): number;\n\t/**\n\t * The length of the last read token.\n\t */\n\tgetTokenLength(): number;\n\t/**\n\t * An error code of the last scan.\n\t */\n\tgetTokenError(): ScanError;\n}\n\n\n\nexport interface ParseError {\n\terror: ParseErrorCode;\n\toffset: number;\n\tlength: number;\n}\n\nexport const enum ParseErrorCode {\n\tInvalidSymbol = 1,\n\tInvalidNumberFormat = 2,\n\tPropertyNameExpected = 3,\n\tValueExpected = 4,\n\tColonExpected = 5,\n\tCommaExpected = 6,\n\tCloseBraceExpected = 7,\n\tCloseBracketExpected = 8,\n\tEndOfFileExpected = 9,\n\tInvalidCommentToken = 10,\n\tUnexpectedEndOfComment = 11,\n\tUnexpectedEndOfString = 12,\n\tUnexpectedEndOfNumber = 13,\n\tInvalidUnicode = 14,\n\tInvalidEscapeCharacter = 15,\n\tInvalidCharacter = 16\n}\n\nexport type NodeType = 'object' | 'array' | 'property' | 'string' | 'number' | 'boolean' | 'null';\n\nexport interface Node {\n\treadonly type: NodeType;\n\treadonly value?: any;\n\treadonly offset: number;\n\treadonly length: number;\n\treadonly colonOffset?: number;\n\treadonly parent?: Node;\n\treadonly children?: Node[];\n}\n\nexport type Segment = string | number;\nexport type JSONPath = Segment[];\n\nexport interface Location {\n\t/**\n\t * The previous property key or literal value (string, number, boolean or null) or undefined.\n\t */\n\tpreviousNode?: Node;\n\t/**\n\t * The path describing the location in the JSON document. The path consists of a sequence strings\n\t * representing an object property or numbers for array indices.\n\t */\n\tpath: JSONPath;\n\t/**\n\t * Matches the locations path against a pattern consisting of strings (for properties) and numbers (for array indices).\n\t * '*' will match a single segment, of any property name or index.\n\t * '**' will match a sequence of segments or no segment, of any property name or index.\n\t */\n\tmatches: (patterns: JSONPath) => boolean;\n\t/**\n\t * If set, the location's offset is at a property key.\n\t */\n\tisAtPropertyKey: boolean;\n}\n\nexport interface ParseOptions {\n\tdisallowComments?: boolean;\n\tallowTrailingComma?: boolean;\n\tallowEmptyContent?: boolean;\n}\n\nexport namespace ParseOptions {\n\texport const DEFAULT = {\n\t\tallowTrailingComma: true\n\t};\n}\n\nexport interface JSONVisitor {\n\t/**\n\t * Invoked when an open brace is encountered and an object is started. The offset and length represent the location of the open brace.\n\t */\n\tonObjectBegin?: (offset: number, length: number) => void;\n\n\t/**\n\t * Invoked when a property is encountered. The offset and length represent the location of the property name.\n\t */\n\tonObjectProperty?: (property: string, offset: number, length: number) => void;\n\n\t/**\n\t * Invoked when a closing brace is encountered and an object is completed. The offset and length represent the location of the closing brace.\n\t */\n\tonObjectEnd?: (offset: number, length: number) => void;\n\n\t/**\n\t * Invoked when an open bracket is encountered. The offset and length represent the location of the open bracket.\n\t */\n\tonArrayBegin?: (offset: number, length: number) => void;\n\n\t/**\n\t * Invoked when a closing bracket is encountered. The offset and length represent the location of the closing bracket.\n\t */\n\tonArrayEnd?: (offset: number, length: number) => void;\n\n\t/**\n\t * Invoked when a literal value is encountered. The offset and length represent the location of the literal value.\n\t */\n\tonLiteralValue?: (value: any, offset: number, length: number) => void;\n\n\t/**\n\t * Invoked when a comma or colon separator is encountered. The offset and length represent the location of the separator.\n\t */\n\tonSeparator?: (character: string, offset: number, length: number) => void;\n\n\t/**\n\t * When comments are allowed, invoked when a line or block comment is encountered. The offset and length represent the location of the comment.\n\t */\n\tonComment?: (offset: number, length: number) => void;\n\n\t/**\n\t * Invoked on an error.\n\t */\n\tonError?: (error: ParseErrorCode, offset: number, length: number) => void;\n}\n\n/**\n * Creates a JSON scanner on the given text.\n * If ignoreTrivia is set, whitespaces or comments are ignored.\n */\nexport function createScanner(text: string, ignoreTrivia: boolean = false): JSONScanner {\n\n\tlet pos = 0,\n\t\tlen = text.length,\n\t\tvalue: string = '',\n\t\ttokenOffset = 0,\n\t\ttoken: SyntaxKind = SyntaxKind.Unknown,\n\t\tscanError: ScanError = ScanError.None;\n\n\tfunction scanHexDigits(count: number): number {\n\t\tlet digits = 0;\n\t\tlet hexValue = 0;\n\t\twhile (digits < count) {\n\t\t\tconst ch = text.charCodeAt(pos);\n\t\t\tif (ch >= CharacterCodes._0 && ch <= CharacterCodes._9) {\n\t\t\t\thexValue = hexValue * 16 + ch - CharacterCodes._0;\n\t\t\t}\n\t\t\telse if (ch >= CharacterCodes.A && ch <= CharacterCodes.F) {\n\t\t\t\thexValue = hexValue * 16 + ch - CharacterCodes.A + 10;\n\t\t\t}\n\t\t\telse if (ch >= CharacterCodes.a && ch <= CharacterCodes.f) {\n\t\t\t\thexValue = hexValue * 16 + ch - CharacterCodes.a + 10;\n\t\t\t}\n\t\t\telse {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tpos++;\n\t\t\tdigits++;\n\t\t}\n\t\tif (digits < count) {\n\t\t\thexValue = -1;\n\t\t}\n\t\treturn hexValue;\n\t}\n\n\tfunction setPosition(newPosition: number) {\n\t\tpos = newPosition;\n\t\tvalue = '';\n\t\ttokenOffset = 0;\n\t\ttoken = SyntaxKind.Unknown;\n\t\tscanError = ScanError.None;\n\t}\n\n\tfunction scanNumber(): string {\n\t\tconst start = pos;\n\t\tif (text.charCodeAt(pos) === CharacterCodes._0) {\n\t\t\tpos++;\n\t\t} else {\n\t\t\tpos++;\n\t\t\twhile (pos < text.length && isDigit(text.charCodeAt(pos))) {\n\t\t\t\tpos++;\n\t\t\t}\n\t\t}\n\t\tif (pos < text.length && text.charCodeAt(pos) === CharacterCodes.dot) {\n\t\t\tpos++;\n\t\t\tif (pos < text.length && isDigit(text.charCodeAt(pos))) {\n\t\t\t\tpos++;\n\t\t\t\twhile (pos < text.length && isDigit(text.charCodeAt(pos))) {\n\t\t\t\t\tpos++;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tscanError = ScanError.UnexpectedEndOfNumber;\n\t\t\t\treturn text.substring(start, pos);\n\t\t\t}\n\t\t}\n\t\tlet end = pos;\n\t\tif (pos < text.length && (text.charCodeAt(pos) === CharacterCodes.E || text.charCodeAt(pos) === CharacterCodes.e)) {\n\t\t\tpos++;\n\t\t\tif (pos < text.length && text.charCodeAt(pos) === CharacterCodes.plus || text.charCodeAt(pos) === CharacterCodes.minus) {\n\t\t\t\tpos++;\n\t\t\t}\n\t\t\tif (pos < text.length && isDigit(text.charCodeAt(pos))) {\n\t\t\t\tpos++;\n\t\t\t\twhile (pos < text.length && isDigit(text.charCodeAt(pos))) {\n\t\t\t\t\tpos++;\n\t\t\t\t}\n\t\t\t\tend = pos;\n\t\t\t} else {\n\t\t\t\tscanError = ScanError.UnexpectedEndOfNumber;\n\t\t\t}\n\t\t}\n\t\treturn text.substring(start, end);\n\t}\n\n\tfunction scanString(): string {\n\n\t\tlet result = '',\n\t\t\tstart = pos;\n\n\t\twhile (true) {\n\t\t\tif (pos >= len) {\n\t\t\t\tresult += text.substring(start, pos);\n\t\t\t\tscanError = ScanError.UnexpectedEndOfString;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tconst ch = text.charCodeAt(pos);\n\t\t\tif (ch === CharacterCodes.doubleQuote) {\n\t\t\t\tresult += text.substring(start, pos);\n\t\t\t\tpos++;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tif (ch === CharacterCodes.backslash) {\n\t\t\t\tresult += text.substring(start, pos);\n\t\t\t\tpos++;\n\t\t\t\tif (pos >= len) {\n\t\t\t\t\tscanError = ScanError.UnexpectedEndOfString;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tconst ch2 = text.charCodeAt(pos++);\n\t\t\t\tswitch (ch2) {\n\t\t\t\t\tcase CharacterCodes.doubleQuote:\n\t\t\t\t\t\tresult += '\\\"';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.backslash:\n\t\t\t\t\t\tresult += '\\\\';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.slash:\n\t\t\t\t\t\tresult += '/';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.b:\n\t\t\t\t\t\tresult += '\\b';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.f:\n\t\t\t\t\t\tresult += '\\f';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.n:\n\t\t\t\t\t\tresult += '\\n';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.r:\n\t\t\t\t\t\tresult += '\\r';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.t:\n\t\t\t\t\t\tresult += '\\t';\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase CharacterCodes.u: {\n\t\t\t\t\t\tconst ch3 = scanHexDigits(4);\n\t\t\t\t\t\tif (ch3 >= 0) {\n\t\t\t\t\t\t\tresult += String.fromCharCode(ch3);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tscanError = ScanError.InvalidUnicode;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tscanError = ScanError.InvalidEscapeCharacter;\n\t\t\t\t}\n\t\t\t\tstart = pos;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (ch >= 0 && ch <= 0x1F) {\n\t\t\t\tif (isLineBreak(ch)) {\n\t\t\t\t\tresult += text.substring(start, pos);\n\t\t\t\t\tscanError = ScanError.UnexpectedEndOfString;\n\t\t\t\t\tbreak;\n\t\t\t\t} else {\n\t\t\t\t\tscanError = ScanError.InvalidCharacter;\n\t\t\t\t\t// mark as error but continue with string\n\t\t\t\t}\n\t\t\t}\n\t\t\tpos++;\n\t\t}\n\t\treturn result;\n\t}\n\n\tfunction scanNext(): SyntaxKind {\n\n\t\tvalue = '';\n\t\tscanError = ScanError.None;\n\n\t\ttokenOffset = pos;\n\n\t\tif (pos >= len) {\n\t\t\t// at the end\n\t\t\ttokenOffset = len;\n\t\t\treturn token = SyntaxKind.EOF;\n\t\t}\n\n\t\tlet code = text.charCodeAt(pos);\n\t\t// trivia: whitespace\n\t\tif (isWhitespace(code)) {\n\t\t\tdo {\n\t\t\t\tpos++;\n\t\t\t\tvalue += String.fromCharCode(code);\n\t\t\t\tcode = text.charCodeAt(pos);\n\t\t\t} while (isWhitespace(code));\n\n\t\t\treturn token = SyntaxKind.Trivia;\n\t\t}\n\n\t\t// trivia: newlines\n\t\tif (isLineBreak(code)) {\n\t\t\tpos++;\n\t\t\tvalue += String.fromCharCode(code);\n\t\t\tif (code === CharacterCodes.carriageReturn && text.charCodeAt(pos) === CharacterCodes.lineFeed) {\n\t\t\t\tpos++;\n\t\t\t\tvalue += '\\n';\n\t\t\t}\n\t\t\treturn token = SyntaxKind.LineBreakTrivia;\n\t\t}\n\n\t\tswitch (code) {\n\t\t\t// tokens: []{}:,\n\t\t\tcase CharacterCodes.openBrace:\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.OpenBraceToken;\n\t\t\tcase CharacterCodes.closeBrace:\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.CloseBraceToken;\n\t\t\tcase CharacterCodes.openBracket:\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.OpenBracketToken;\n\t\t\tcase CharacterCodes.closeBracket:\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.CloseBracketToken;\n\t\t\tcase CharacterCodes.colon:\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.ColonToken;\n\t\t\tcase CharacterCodes.comma:\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.CommaToken;\n\n\t\t\t// strings\n\t\t\tcase CharacterCodes.doubleQuote:\n\t\t\t\tpos++;\n\t\t\t\tvalue = scanString();\n\t\t\t\treturn token = SyntaxKind.StringLiteral;\n\n\t\t\t// comments\n\t\t\tcase CharacterCodes.slash: {\n\t\t\t\tconst start = pos - 1;\n\t\t\t\t// Single-line comment\n\t\t\t\tif (text.charCodeAt(pos + 1) === CharacterCodes.slash) {\n\t\t\t\t\tpos += 2;\n\n\t\t\t\t\twhile (pos < len) {\n\t\t\t\t\t\tif (isLineBreak(text.charCodeAt(pos))) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos++;\n\n\t\t\t\t\t}\n\t\t\t\t\tvalue = text.substring(start, pos);\n\t\t\t\t\treturn token = SyntaxKind.LineCommentTrivia;\n\t\t\t\t}\n\n\t\t\t\t// Multi-line comment\n\t\t\t\tif (text.charCodeAt(pos + 1) === CharacterCodes.asterisk) {\n\t\t\t\t\tpos += 2;\n\n\t\t\t\t\tconst safeLength = len - 1; // For lookahead.\n\t\t\t\t\tlet commentClosed = false;\n\t\t\t\t\twhile (pos < safeLength) {\n\t\t\t\t\t\tconst ch = text.charCodeAt(pos);\n\n\t\t\t\t\t\tif (ch === CharacterCodes.asterisk && text.charCodeAt(pos + 1) === CharacterCodes.slash) {\n\t\t\t\t\t\t\tpos += 2;\n\t\t\t\t\t\t\tcommentClosed = true;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!commentClosed) {\n\t\t\t\t\t\tpos++;\n\t\t\t\t\t\tscanError = ScanError.UnexpectedEndOfComment;\n\t\t\t\t\t}\n\n\t\t\t\t\tvalue = text.substring(start, pos);\n\t\t\t\t\treturn token = SyntaxKind.BlockCommentTrivia;\n\t\t\t\t}\n\t\t\t\t// just a single slash\n\t\t\t\tvalue += String.fromCharCode(code);\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.Unknown;\n\t\t\t}\n\t\t\t// numbers\n\t\t\tcase CharacterCodes.minus:\n\t\t\t\tvalue += String.fromCharCode(code);\n\t\t\t\tpos++;\n\t\t\t\tif (pos === len || !isDigit(text.charCodeAt(pos))) {\n\t\t\t\t\treturn token = SyntaxKind.Unknown;\n\t\t\t\t}\n\t\t\t// found a minus, followed by a number so\n\t\t\t// we fall through to proceed with scanning\n\t\t\t// numbers\n\t\t\tcase CharacterCodes._0:\n\t\t\tcase CharacterCodes._1:\n\t\t\tcase CharacterCodes._2:\n\t\t\tcase CharacterCodes._3:\n\t\t\tcase CharacterCodes._4:\n\t\t\tcase CharacterCodes._5:\n\t\t\tcase CharacterCodes._6:\n\t\t\tcase CharacterCodes._7:\n\t\t\tcase CharacterCodes._8:\n\t\t\tcase CharacterCodes._9:\n\t\t\t\tvalue += scanNumber();\n\t\t\t\treturn token = SyntaxKind.NumericLiteral;\n\t\t\t// literals and unknown symbols\n\t\t\tdefault:\n\t\t\t\t// is a literal? Read the full word.\n\t\t\t\twhile (pos < len && isUnknownContentCharacter(code)) {\n\t\t\t\t\tpos++;\n\t\t\t\t\tcode = text.charCodeAt(pos);\n\t\t\t\t}\n\t\t\t\tif (tokenOffset !== pos) {\n\t\t\t\t\tvalue = text.substring(tokenOffset, pos);\n\t\t\t\t\t// keywords: true, false, null\n\t\t\t\t\tswitch (value) {\n\t\t\t\t\t\tcase 'true': return token = SyntaxKind.TrueKeyword;\n\t\t\t\t\t\tcase 'false': return token = SyntaxKind.FalseKeyword;\n\t\t\t\t\t\tcase 'null': return token = SyntaxKind.NullKeyword;\n\t\t\t\t\t}\n\t\t\t\t\treturn token = SyntaxKind.Unknown;\n\t\t\t\t}\n\t\t\t\t// some\n\t\t\t\tvalue += String.fromCharCode(code);\n\t\t\t\tpos++;\n\t\t\t\treturn token = SyntaxKind.Unknown;\n\t\t}\n\t}\n\n\tfunction isUnknownContentCharacter(code: CharacterCodes) {\n\t\tif (isWhitespace(code) || isLineBreak(code)) {\n\t\t\treturn false;\n\t\t}\n\t\tswitch (code) {\n\t\t\tcase CharacterCodes.closeBrace:\n\t\t\tcase CharacterCodes.closeBracket:\n\t\t\tcase CharacterCodes.openBrace:\n\t\t\tcase CharacterCodes.openBracket:\n\t\t\tcase CharacterCodes.doubleQuote:\n\t\t\tcase CharacterCodes.colon:\n\t\t\tcase CharacterCodes.comma:\n\t\t\tcase CharacterCodes.slash:\n\t\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\n\tfunction scanNextNonTrivia(): SyntaxKind {\n\t\tlet result: SyntaxKind;\n\t\tdo {\n\t\t\tresult = scanNext();\n\t\t} while (result >= SyntaxKind.LineCommentTrivia && result <= SyntaxKind.Trivia);\n\t\treturn result;\n\t}\n\n\treturn {\n\t\tsetPosition: setPosition,\n\t\tgetPosition: () => pos,\n\t\tscan: ignoreTrivia ? scanNextNonTrivia : scanNext,\n\t\tgetToken: () => token,\n\t\tgetTokenValue: () => value,\n\t\tgetTokenOffset: () => tokenOffset,\n\t\tgetTokenLength: () => pos - tokenOffset,\n\t\tgetTokenError: () => scanError\n\t};\n}\n\nfunction isWhitespace(ch: number): boolean {\n\treturn ch === CharacterCodes.space || ch === CharacterCodes.tab || ch === CharacterCodes.verticalTab || ch === CharacterCodes.formFeed ||\n\t\tch === CharacterCodes.nonBreakingSpace || ch === CharacterCodes.ogham || ch >= CharacterCodes.enQuad && ch <= CharacterCodes.zeroWidthSpace ||\n\t\tch === CharacterCodes.narrowNoBreakSpace || ch === CharacterCodes.mathematicalSpace || ch === CharacterCodes.ideographicSpace || ch === CharacterCodes.byteOrderMark;\n}\n\nfunction isLineBreak(ch: number): boolean {\n\treturn ch === CharacterCodes.lineFeed || ch === CharacterCodes.carriageReturn || ch === CharacterCodes.lineSeparator || ch === CharacterCodes.paragraphSeparator;\n}\n\nfunction isDigit(ch: number): boolean {\n\treturn ch >= CharacterCodes._0 && ch <= CharacterCodes._9;\n}\n\nconst enum CharacterCodes {\n\tnullCharacter = 0,\n\tmaxAsciiCharacter = 0x7F,\n\n\tlineFeed = 0x0A,              // \\n\n\tcarriageReturn = 0x0D,        // \\r\n\tlineSeparator = 0x2028,\n\tparagraphSeparator = 0x2029,\n\n\t// REVIEW: do we need to support this?  The scanner doesn't, but our IText does.  This seems\n\t// like an odd disparity?  (Or maybe it's completely fine for them to be different).\n\tnextLine = 0x0085,\n\n\t// Unicode 3.0 space characters\n\tspace = 0x0020,   // \" \"\n\tnonBreakingSpace = 0x00A0,   //\n\tenQuad = 0x2000,\n\temQuad = 0x2001,\n\tenSpace = 0x2002,\n\temSpace = 0x2003,\n\tthreePerEmSpace = 0x2004,\n\tfourPerEmSpace = 0x2005,\n\tsixPerEmSpace = 0x2006,\n\tfigureSpace = 0x2007,\n\tpunctuationSpace = 0x2008,\n\tthinSpace = 0x2009,\n\thairSpace = 0x200A,\n\tzeroWidthSpace = 0x200B,\n\tnarrowNoBreakSpace = 0x202F,\n\tideographicSpace = 0x3000,\n\tmathematicalSpace = 0x205F,\n\togham = 0x1680,\n\n\t_ = 0x5F,\n\t$ = 0x24,\n\n\t_0 = 0x30,\n\t_1 = 0x31,\n\t_2 = 0x32,\n\t_3 = 0x33,\n\t_4 = 0x34,\n\t_5 = 0x35,\n\t_6 = 0x36,\n\t_7 = 0x37,\n\t_8 = 0x38,\n\t_9 = 0x39,\n\n\ta = 0x61,\n\tb = 0x62,\n\tc = 0x63,\n\td = 0x64,\n\te = 0x65,\n\tf = 0x66,\n\tg = 0x67,\n\th = 0x68,\n\ti = 0x69,\n\tj = 0x6A,\n\tk = 0x6B,\n\tl = 0x6C,\n\tm = 0x6D,\n\tn = 0x6E,\n\to = 0x6F,\n\tp = 0x70,\n\tq = 0x71,\n\tr = 0x72,\n\ts = 0x73,\n\tt = 0x74,\n\tu = 0x75,\n\tv = 0x76,\n\tw = 0x77,\n\tx = 0x78,\n\ty = 0x79,\n\tz = 0x7A,\n\n\tA = 0x41,\n\tB = 0x42,\n\tC = 0x43,\n\tD = 0x44,\n\tE = 0x45,\n\tF = 0x46,\n\tG = 0x47,\n\tH = 0x48,\n\tI = 0x49,\n\tJ = 0x4A,\n\tK = 0x4B,\n\tL = 0x4C,\n\tM = 0x4D,\n\tN = 0x4E,\n\tO = 0x4F,\n\tP = 0x50,\n\tQ = 0x51,\n\tR = 0x52,\n\tS = 0x53,\n\tT = 0x54,\n\tU = 0x55,\n\tV = 0x56,\n\tW = 0x57,\n\tX = 0x58,\n\tY = 0x59,\n\tZ = 0x5A,\n\n\tampersand = 0x26,             // &\n\tasterisk = 0x2A,              // *\n\tat = 0x40,                    // @\n\tbackslash = 0x5C,             // \\\n\tbar = 0x7C,                   // |\n\tcaret = 0x5E,                 // ^\n\tcloseBrace = 0x7D,            // }\n\tcloseBracket = 0x5D,          // ]\n\tcloseParen = 0x29,            // )\n\tcolon = 0x3A,                 // :\n\tcomma = 0x2C,                 // ,\n\tdot = 0x2E,                   // .\n\tdoubleQuote = 0x22,           // \"\n\tequals = 0x3D,                // =\n\texclamation = 0x21,           // !\n\tgreaterThan = 0x3E,           // >\n\tlessThan = 0x3C,              // <\n\tminus = 0x2D,                 // -\n\topenBrace = 0x7B,             // {\n\topenBracket = 0x5B,           // [\n\topenParen = 0x28,             // (\n\tpercent = 0x25,               // %\n\tplus = 0x2B,                  // +\n\tquestion = 0x3F,              // ?\n\tsemicolon = 0x3B,             // ;\n\tsingleQuote = 0x27,           // '\n\tslash = 0x2F,                 // /\n\ttilde = 0x7E,                 // ~\n\n\tbackspace = 0x08,             // \\b\n\tformFeed = 0x0C,              // \\f\n\tbyteOrderMark = 0xFEFF,\n\ttab = 0x09,                   // \\t\n\tverticalTab = 0x0B,           // \\v\n}\n\ninterface NodeImpl extends Node {\n\ttype: NodeType;\n\tvalue?: any;\n\toffset: number;\n\tlength: number;\n\tcolonOffset?: number;\n\tparent?: NodeImpl;\n\tchildren?: NodeImpl[];\n}\n\n/**\n * For a given offset, evaluate the location in the JSON document. Each segment in the location path is either a property name or an array index.\n */\nexport function getLocation(text: string, position: number): Location {\n\tconst segments: Segment[] = []; // strings or numbers\n\tconst earlyReturnException = new Object();\n\tlet previousNode: NodeImpl | undefined = undefined;\n\tconst previousNodeInst: NodeImpl = {\n\t\tvalue: {},\n\t\toffset: 0,\n\t\tlength: 0,\n\t\ttype: 'object',\n\t\tparent: undefined\n\t};\n\tlet isAtPropertyKey = false;\n\tfunction setPreviousNode(value: string, offset: number, length: number, type: NodeType) {\n\t\tpreviousNodeInst.value = value;\n\t\tpreviousNodeInst.offset = offset;\n\t\tpreviousNodeInst.length = length;\n\t\tpreviousNodeInst.type = type;\n\t\tpreviousNodeInst.colonOffset = undefined;\n\t\tpreviousNode = previousNodeInst;\n\t}\n\ttry {\n\n\t\tvisit(text, {\n\t\t\tonObjectBegin: (offset: number, length: number) => {\n\t\t\t\tif (position <= offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tpreviousNode = undefined;\n\t\t\t\tisAtPropertyKey = position > offset;\n\t\t\t\tsegments.push(''); // push a placeholder (will be replaced)\n\t\t\t},\n\t\t\tonObjectProperty: (name: string, offset: number, length: number) => {\n\t\t\t\tif (position < offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tsetPreviousNode(name, offset, length, 'property');\n\t\t\t\tsegments[segments.length - 1] = name;\n\t\t\t\tif (position <= offset + length) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonObjectEnd: (offset: number, length: number) => {\n\t\t\t\tif (position <= offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tpreviousNode = undefined;\n\t\t\t\tsegments.pop();\n\t\t\t},\n\t\t\tonArrayBegin: (offset: number, length: number) => {\n\t\t\t\tif (position <= offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tpreviousNode = undefined;\n\t\t\t\tsegments.push(0);\n\t\t\t},\n\t\t\tonArrayEnd: (offset: number, length: number) => {\n\t\t\t\tif (position <= offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tpreviousNode = undefined;\n\t\t\t\tsegments.pop();\n\t\t\t},\n\t\t\tonLiteralValue: (value: any, offset: number, length: number) => {\n\t\t\t\tif (position < offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tsetPreviousNode(value, offset, length, getNodeType(value));\n\n\t\t\t\tif (position <= offset + length) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t},\n\t\t\tonSeparator: (sep: string, offset: number, length: number) => {\n\t\t\t\tif (position <= offset) {\n\t\t\t\t\tthrow earlyReturnException;\n\t\t\t\t}\n\t\t\t\tif (sep === ':' && previousNode && previousNode.type === 'property') {\n\t\t\t\t\tpreviousNode.colonOffset = offset;\n\t\t\t\t\tisAtPropertyKey = false;\n\t\t\t\t\tpreviousNode = undefined;\n\t\t\t\t} else if (sep === ',') {\n\t\t\t\t\tconst last = segments[segments.length - 1];\n\t\t\t\t\tif (typeof last === 'number') {\n\t\t\t\t\t\tsegments[segments.length - 1] = last + 1;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tisAtPropertyKey = true;\n\t\t\t\t\t\tsegments[segments.length - 1] = '';\n\t\t\t\t\t}\n\t\t\t\t\tpreviousNode = undefined;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t} catch (e) {\n\t\tif (e !== earlyReturnException) {\n\t\t\tthrow e;\n\t\t}\n\t}\n\n\treturn {\n\t\tpath: segments,\n\t\tpreviousNode,\n\t\tisAtPropertyKey,\n\t\tmatches: (pattern: Segment[]) => {\n\t\t\tlet k = 0;\n\t\t\tfor (let i = 0; k < pattern.length && i < segments.length; i++) {\n\t\t\t\tif (pattern[k] === segments[i] || pattern[k] === '*') {\n\t\t\t\t\tk++;\n\t\t\t\t} else if (pattern[k] !== '**') {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn k === pattern.length;\n\t\t}\n\t};\n}\n\n\n/**\n * Parses the given text and returns the object the JSON content represents. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n * Therefore always check the errors list to find out if the input was valid.\n */\nexport function parse(text: string, errors: ParseError[] = [], options: ParseOptions = ParseOptions.DEFAULT): any {\n\tlet currentProperty: string | null = null;\n\tlet currentParent: any = [];\n\tconst previousParents: any[] = [];\n\n\tfunction onValue(value: any) {\n\t\tif (Array.isArray(currentParent)) {\n\t\t\t(<any[]>currentParent).push(value);\n\t\t} else if (currentProperty !== null) {\n\t\t\tcurrentParent[currentProperty] = value;\n\t\t}\n\t}\n\n\tconst visitor: JSONVisitor = {\n\t\tonObjectBegin: () => {\n\t\t\tconst object = {};\n\t\t\tonValue(object);\n\t\t\tpreviousParents.push(currentParent);\n\t\t\tcurrentParent = object;\n\t\t\tcurrentProperty = null;\n\t\t},\n\t\tonObjectProperty: (name: string) => {\n\t\t\tcurrentProperty = name;\n\t\t},\n\t\tonObjectEnd: () => {\n\t\t\tcurrentParent = previousParents.pop();\n\t\t},\n\t\tonArrayBegin: () => {\n\t\t\tconst array: any[] = [];\n\t\t\tonValue(array);\n\t\t\tpreviousParents.push(currentParent);\n\t\t\tcurrentParent = array;\n\t\t\tcurrentProperty = null;\n\t\t},\n\t\tonArrayEnd: () => {\n\t\t\tcurrentParent = previousParents.pop();\n\t\t},\n\t\tonLiteralValue: onValue,\n\t\tonError: (error: ParseErrorCode, offset: number, length: number) => {\n\t\t\terrors.push({ error, offset, length });\n\t\t}\n\t};\n\tvisit(text, visitor, options);\n\treturn currentParent[0];\n}\n\n\n/**\n * Parses the given text and returns a tree representation the JSON content. On invalid input, the parser tries to be as fault tolerant as possible, but still return a result.\n */\nexport function parseTree(text: string, errors: ParseError[] = [], options: ParseOptions = ParseOptions.DEFAULT): Node {\n\tlet currentParent: NodeImpl = { type: 'array', offset: -1, length: -1, children: [], parent: undefined }; // artificial root\n\n\tfunction ensurePropertyComplete(endOffset: number) {\n\t\tif (currentParent.type === 'property') {\n\t\t\tcurrentParent.length = endOffset - currentParent.offset;\n\t\t\tcurrentParent = currentParent.parent!;\n\t\t}\n\t}\n\n\tfunction onValue(valueNode: Node): Node {\n\t\tcurrentParent.children!.push(valueNode);\n\t\treturn valueNode;\n\t}\n\n\tconst visitor: JSONVisitor = {\n\t\tonObjectBegin: (offset: number) => {\n\t\t\tcurrentParent = onValue({ type: 'object', offset, length: -1, parent: currentParent, children: [] });\n\t\t},\n\t\tonObjectProperty: (name: string, offset: number, length: number) => {\n\t\t\tcurrentParent = onValue({ type: 'property', offset, length: -1, parent: currentParent, children: [] });\n\t\t\tcurrentParent.children!.push({ type: 'string', value: name, offset, length, parent: currentParent });\n\t\t},\n\t\tonObjectEnd: (offset: number, length: number) => {\n\t\t\tcurrentParent.length = offset + length - currentParent.offset;\n\t\t\tcurrentParent = currentParent.parent!;\n\t\t\tensurePropertyComplete(offset + length);\n\t\t},\n\t\tonArrayBegin: (offset: number, length: number) => {\n\t\t\tcurrentParent = onValue({ type: 'array', offset, length: -1, parent: currentParent, children: [] });\n\t\t},\n\t\tonArrayEnd: (offset: number, length: number) => {\n\t\t\tcurrentParent.length = offset + length - currentParent.offset;\n\t\t\tcurrentParent = currentParent.parent!;\n\t\t\tensurePropertyComplete(offset + length);\n\t\t},\n\t\tonLiteralValue: (value: any, offset: number, length: number) => {\n\t\t\tonValue({ type: getNodeType(value), offset, length, parent: currentParent, value });\n\t\t\tensurePropertyComplete(offset + length);\n\t\t},\n\t\tonSeparator: (sep: string, offset: number, length: number) => {\n\t\t\tif (currentParent.type === 'property') {\n\t\t\t\tif (sep === ':') {\n\t\t\t\t\tcurrentParent.colonOffset = offset;\n\t\t\t\t} else if (sep === ',') {\n\t\t\t\t\tensurePropertyComplete(offset);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonError: (error: ParseErrorCode, offset: number, length: number) => {\n\t\t\terrors.push({ error, offset, length });\n\t\t}\n\t};\n\tvisit(text, visitor, options);\n\n\tconst result = currentParent.children![0];\n\tif (result) {\n\t\tdelete result.parent;\n\t}\n\treturn result;\n}\n\n/**\n * Finds the node at the given path in a JSON DOM.\n */\nexport function findNodeAtLocation(root: Node, path: JSONPath): Node | undefined {\n\tif (!root) {\n\t\treturn undefined;\n\t}\n\tlet node = root;\n\tfor (let segment of path) {\n\t\tif (typeof segment === 'string') {\n\t\t\tif (node.type !== 'object' || !Array.isArray(node.children)) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tlet found = false;\n\t\t\tfor (const propertyNode of node.children) {\n\t\t\t\tif (Array.isArray(propertyNode.children) && propertyNode.children[0].value === segment) {\n\t\t\t\t\tnode = propertyNode.children[1];\n\t\t\t\t\tfound = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!found) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t} else {\n\t\t\tconst index = <number>segment;\n\t\t\tif (node.type !== 'array' || index < 0 || !Array.isArray(node.children) || index >= node.children.length) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tnode = node.children[index];\n\t\t}\n\t}\n\treturn node;\n}\n\n/**\n * Gets the JSON path of the given JSON DOM node\n */\nexport function getNodePath(node: Node): JSONPath {\n\tif (!node.parent || !node.parent.children) {\n\t\treturn [];\n\t}\n\tconst path = getNodePath(node.parent);\n\tif (node.parent.type === 'property') {\n\t\tconst key = node.parent.children[0].value;\n\t\tpath.push(key);\n\t} else if (node.parent.type === 'array') {\n\t\tconst index = node.parent.children.indexOf(node);\n\t\tif (index !== -1) {\n\t\t\tpath.push(index);\n\t\t}\n\t}\n\treturn path;\n}\n\n/**\n * Evaluates the JavaScript object of the given JSON DOM node\n */\nexport function getNodeValue(node: Node): any {\n\tswitch (node.type) {\n\t\tcase 'array':\n\t\t\treturn node.children!.map(getNodeValue);\n\t\tcase 'object': {\n\t\t\tconst obj = Object.create(null);\n\t\t\tfor (let prop of node.children!) {\n\t\t\t\tconst valueNode = prop.children![1];\n\t\t\t\tif (valueNode) {\n\t\t\t\t\tobj[prop.children![0].value] = getNodeValue(valueNode);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn obj;\n\t\t}\n\t\tcase 'null':\n\t\tcase 'string':\n\t\tcase 'number':\n\t\tcase 'boolean':\n\t\t\treturn node.value;\n\t\tdefault:\n\t\t\treturn undefined;\n\t}\n\n}\n\nexport function contains(node: Node, offset: number, includeRightBound = false): boolean {\n\treturn (offset >= node.offset && offset < (node.offset + node.length)) || includeRightBound && (offset === (node.offset + node.length));\n}\n\n/**\n * Finds the most inner node at the given offset. If includeRightBound is set, also finds nodes that end at the given offset.\n */\nexport function findNodeAtOffset(node: Node, offset: number, includeRightBound = false): Node | undefined {\n\tif (contains(node, offset, includeRightBound)) {\n\t\tconst children = node.children;\n\t\tif (Array.isArray(children)) {\n\t\t\tfor (let i = 0; i < children.length && children[i].offset <= offset; i++) {\n\t\t\t\tconst item = findNodeAtOffset(children[i], offset, includeRightBound);\n\t\t\t\tif (item) {\n\t\t\t\t\treturn item;\n\t\t\t\t}\n\t\t\t}\n\n\t\t}\n\t\treturn node;\n\t}\n\treturn undefined;\n}\n\n\n/**\n * Parses the given text and invokes the visitor functions for each object, array and literal reached.\n */\nexport function visit(text: string, visitor: JSONVisitor, options: ParseOptions = ParseOptions.DEFAULT): any {\n\n\tconst _scanner = createScanner(text, false);\n\n\tfunction toNoArgVisit(visitFunction?: (offset: number, length: number) => void): () => void {\n\t\treturn visitFunction ? () => visitFunction(_scanner.getTokenOffset(), _scanner.getTokenLength()) : () => true;\n\t}\n\tfunction toOneArgVisit<T>(visitFunction?: (arg: T, offset: number, length: number) => void): (arg: T) => void {\n\t\treturn visitFunction ? (arg: T) => visitFunction(arg, _scanner.getTokenOffset(), _scanner.getTokenLength()) : () => true;\n\t}\n\n\tconst onObjectBegin = toNoArgVisit(visitor.onObjectBegin),\n\t\tonObjectProperty = toOneArgVisit(visitor.onObjectProperty),\n\t\tonObjectEnd = toNoArgVisit(visitor.onObjectEnd),\n\t\tonArrayBegin = toNoArgVisit(visitor.onArrayBegin),\n\t\tonArrayEnd = toNoArgVisit(visitor.onArrayEnd),\n\t\tonLiteralValue = toOneArgVisit(visitor.onLiteralValue),\n\t\tonSeparator = toOneArgVisit(visitor.onSeparator),\n\t\tonComment = toNoArgVisit(visitor.onComment),\n\t\tonError = toOneArgVisit(visitor.onError);\n\n\tconst disallowComments = options && options.disallowComments;\n\tconst allowTrailingComma = options && options.allowTrailingComma;\n\tfunction scanNext(): SyntaxKind {\n\t\twhile (true) {\n\t\t\tconst token = _scanner.scan();\n\t\t\tswitch (_scanner.getTokenError()) {\n\t\t\t\tcase ScanError.InvalidUnicode:\n\t\t\t\t\thandleError(ParseErrorCode.InvalidUnicode);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScanError.InvalidEscapeCharacter:\n\t\t\t\t\thandleError(ParseErrorCode.InvalidEscapeCharacter);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScanError.UnexpectedEndOfNumber:\n\t\t\t\t\thandleError(ParseErrorCode.UnexpectedEndOfNumber);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScanError.UnexpectedEndOfComment:\n\t\t\t\t\tif (!disallowComments) {\n\t\t\t\t\t\thandleError(ParseErrorCode.UnexpectedEndOfComment);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScanError.UnexpectedEndOfString:\n\t\t\t\t\thandleError(ParseErrorCode.UnexpectedEndOfString);\n\t\t\t\t\tbreak;\n\t\t\t\tcase ScanError.InvalidCharacter:\n\t\t\t\t\thandleError(ParseErrorCode.InvalidCharacter);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tswitch (token) {\n\t\t\t\tcase SyntaxKind.LineCommentTrivia:\n\t\t\t\tcase SyntaxKind.BlockCommentTrivia:\n\t\t\t\t\tif (disallowComments) {\n\t\t\t\t\t\thandleError(ParseErrorCode.InvalidCommentToken);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tonComment();\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tcase SyntaxKind.Unknown:\n\t\t\t\t\thandleError(ParseErrorCode.InvalidSymbol);\n\t\t\t\t\tbreak;\n\t\t\t\tcase SyntaxKind.Trivia:\n\t\t\t\tcase SyntaxKind.LineBreakTrivia:\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\treturn token;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction handleError(error: ParseErrorCode, skipUntilAfter: SyntaxKind[] = [], skipUntil: SyntaxKind[] = []): void {\n\t\tonError(error);\n\t\tif (skipUntilAfter.length + skipUntil.length > 0) {\n\t\t\tlet token = _scanner.getToken();\n\t\t\twhile (token !== SyntaxKind.EOF) {\n\t\t\t\tif (skipUntilAfter.indexOf(token) !== -1) {\n\t\t\t\t\tscanNext();\n\t\t\t\t\tbreak;\n\t\t\t\t} else if (skipUntil.indexOf(token) !== -1) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\ttoken = scanNext();\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction parseString(isValue: boolean): boolean {\n\t\tconst value = _scanner.getTokenValue();\n\t\tif (isValue) {\n\t\t\tonLiteralValue(value);\n\t\t} else {\n\t\t\tonObjectProperty(value);\n\t\t}\n\t\tscanNext();\n\t\treturn true;\n\t}\n\n\tfunction parseLiteral(): boolean {\n\t\tswitch (_scanner.getToken()) {\n\t\t\tcase SyntaxKind.NumericLiteral: {\n\t\t\t\tlet value = 0;\n\t\t\t\ttry {\n\t\t\t\t\tvalue = JSON.parse(_scanner.getTokenValue());\n\t\t\t\t\tif (typeof value !== 'number') {\n\t\t\t\t\t\thandleError(ParseErrorCode.InvalidNumberFormat);\n\t\t\t\t\t\tvalue = 0;\n\t\t\t\t\t}\n\t\t\t\t} catch (e) {\n\t\t\t\t\thandleError(ParseErrorCode.InvalidNumberFormat);\n\t\t\t\t}\n\t\t\t\tonLiteralValue(value);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tcase SyntaxKind.NullKeyword:\n\t\t\t\tonLiteralValue(null);\n\t\t\t\tbreak;\n\t\t\tcase SyntaxKind.TrueKeyword:\n\t\t\t\tonLiteralValue(true);\n\t\t\t\tbreak;\n\t\t\tcase SyntaxKind.FalseKeyword:\n\t\t\t\tonLiteralValue(false);\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\treturn false;\n\t\t}\n\t\tscanNext();\n\t\treturn true;\n\t}\n\n\tfunction parseProperty(): boolean {\n\t\tif (_scanner.getToken() !== SyntaxKind.StringLiteral) {\n\t\t\thandleError(ParseErrorCode.PropertyNameExpected, [], [SyntaxKind.CloseBraceToken, SyntaxKind.CommaToken]);\n\t\t\treturn false;\n\t\t}\n\t\tparseString(false);\n\t\tif (_scanner.getToken() === SyntaxKind.ColonToken) {\n\t\t\tonSeparator(':');\n\t\t\tscanNext(); // consume colon\n\n\t\t\tif (!parseValue()) {\n\t\t\t\thandleError(ParseErrorCode.ValueExpected, [], [SyntaxKind.CloseBraceToken, SyntaxKind.CommaToken]);\n\t\t\t}\n\t\t} else {\n\t\t\thandleError(ParseErrorCode.ColonExpected, [], [SyntaxKind.CloseBraceToken, SyntaxKind.CommaToken]);\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction parseObject(): boolean {\n\t\tonObjectBegin();\n\t\tscanNext(); // consume open brace\n\n\t\tlet needsComma = false;\n\t\twhile (_scanner.getToken() !== SyntaxKind.CloseBraceToken && _scanner.getToken() !== SyntaxKind.EOF) {\n\t\t\tif (_scanner.getToken() === SyntaxKind.CommaToken) {\n\t\t\t\tif (!needsComma) {\n\t\t\t\t\thandleError(ParseErrorCode.ValueExpected, [], []);\n\t\t\t\t}\n\t\t\t\tonSeparator(',');\n\t\t\t\tscanNext(); // consume comma\n\t\t\t\tif (_scanner.getToken() === SyntaxKind.CloseBraceToken && allowTrailingComma) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (needsComma) {\n\t\t\t\thandleError(ParseErrorCode.CommaExpected, [], []);\n\t\t\t}\n\t\t\tif (!parseProperty()) {\n\t\t\t\thandleError(ParseErrorCode.ValueExpected, [], [SyntaxKind.CloseBraceToken, SyntaxKind.CommaToken]);\n\t\t\t}\n\t\t\tneedsComma = true;\n\t\t}\n\t\tonObjectEnd();\n\t\tif (_scanner.getToken() !== SyntaxKind.CloseBraceToken) {\n\t\t\thandleError(ParseErrorCode.CloseBraceExpected, [SyntaxKind.CloseBraceToken], []);\n\t\t} else {\n\t\t\tscanNext(); // consume close brace\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction parseArray(): boolean {\n\t\tonArrayBegin();\n\t\tscanNext(); // consume open bracket\n\n\t\tlet needsComma = false;\n\t\twhile (_scanner.getToken() !== SyntaxKind.CloseBracketToken && _scanner.getToken() !== SyntaxKind.EOF) {\n\t\t\tif (_scanner.getToken() === SyntaxKind.CommaToken) {\n\t\t\t\tif (!needsComma) {\n\t\t\t\t\thandleError(ParseErrorCode.ValueExpected, [], []);\n\t\t\t\t}\n\t\t\t\tonSeparator(',');\n\t\t\t\tscanNext(); // consume comma\n\t\t\t\tif (_scanner.getToken() === SyntaxKind.CloseBracketToken && allowTrailingComma) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (needsComma) {\n\t\t\t\thandleError(ParseErrorCode.CommaExpected, [], []);\n\t\t\t}\n\t\t\tif (!parseValue()) {\n\t\t\t\thandleError(ParseErrorCode.ValueExpected, [], [SyntaxKind.CloseBracketToken, SyntaxKind.CommaToken]);\n\t\t\t}\n\t\t\tneedsComma = true;\n\t\t}\n\t\tonArrayEnd();\n\t\tif (_scanner.getToken() !== SyntaxKind.CloseBracketToken) {\n\t\t\thandleError(ParseErrorCode.CloseBracketExpected, [SyntaxKind.CloseBracketToken], []);\n\t\t} else {\n\t\t\tscanNext(); // consume close bracket\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction parseValue(): boolean {\n\t\tswitch (_scanner.getToken()) {\n\t\t\tcase SyntaxKind.OpenBracketToken:\n\t\t\t\treturn parseArray();\n\t\t\tcase SyntaxKind.OpenBraceToken:\n\t\t\t\treturn parseObject();\n\t\t\tcase SyntaxKind.StringLiteral:\n\t\t\t\treturn parseString(true);\n\t\t\tdefault:\n\t\t\t\treturn parseLiteral();\n\t\t}\n\t}\n\n\tscanNext();\n\tif (_scanner.getToken() === SyntaxKind.EOF) {\n\t\tif (options.allowEmptyContent) {\n\t\t\treturn true;\n\t\t}\n\t\thandleError(ParseErrorCode.ValueExpected, [], []);\n\t\treturn false;\n\t}\n\tif (!parseValue()) {\n\t\thandleError(ParseErrorCode.ValueExpected, [], []);\n\t\treturn false;\n\t}\n\tif (_scanner.getToken() !== SyntaxKind.EOF) {\n\t\thandleError(ParseErrorCode.EndOfFileExpected, [], []);\n\t}\n\treturn true;\n}\n\n/**\n * Takes JSON with JavaScript-style comments and remove\n * them. Optionally replaces every none-newline character\n * of comments with a replaceCharacter\n */\nexport function stripComments(text: string, replaceCh?: string): string {\n\n\tlet _scanner = createScanner(text),\n\t\tparts: string[] = [],\n\t\tkind: SyntaxKind,\n\t\toffset = 0,\n\t\tpos: number;\n\n\tdo {\n\t\tpos = _scanner.getPosition();\n\t\tkind = _scanner.scan();\n\t\tswitch (kind) {\n\t\t\tcase SyntaxKind.LineCommentTrivia:\n\t\t\tcase SyntaxKind.BlockCommentTrivia:\n\t\t\tcase SyntaxKind.EOF:\n\t\t\t\tif (offset !== pos) {\n\t\t\t\t\tparts.push(text.substring(offset, pos));\n\t\t\t\t}\n\t\t\t\tif (replaceCh !== undefined) {\n\t\t\t\t\tparts.push(_scanner.getTokenValue().replace(/[^\\r\\n]/g, replaceCh));\n\t\t\t\t}\n\t\t\t\toffset = _scanner.getPosition();\n\t\t\t\tbreak;\n\t\t}\n\t} while (kind !== SyntaxKind.EOF);\n\n\treturn parts.join('');\n}\n\nexport function getNodeType(value: any): NodeType {\n\tswitch (typeof value) {\n\t\tcase 'boolean': return 'boolean';\n\t\tcase 'number': return 'number';\n\t\tcase 'string': return 'string';\n\t\tcase 'object': {\n\t\t\tif (!value) {\n\t\t\t\treturn 'null';\n\t\t\t} else if (Array.isArray(value)) {\n\t\t\t\treturn 'array';\n\t\t\t}\n\t\t\treturn 'object';\n\t\t}\n\t\tdefault: return 'null';\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * A value that is resolved synchronously when it is first needed.\n */\nexport interface Lazy<T> {\n\n\thasValue(): boolean;\n\n\n\tgetValue(): T;\n\n\n\tmap<R>(f: (x: T) => R): Lazy<R>;\n}\n\nexport class Lazy<T> {\n\n\tprivate _didRun: boolean = false;\n\tprivate _value?: T;\n\tprivate _error: Error | undefined;\n\n\tconstructor(\n\t\tprivate readonly executor: () => T,\n\t) { }\n\n\t/**\n\t * True if the lazy value has been resolved.\n\t */\n\thasValue() { return this._didRun; }\n\n\t/**\n\t * Get the wrapped value.\n\t *\n\t * This will force evaluation of the lazy value if it has not been resolved yet. Lazy values are only\n\t * resolved once. `getValue` will re-throw exceptions that are hit while resolving the value\n\t */\n\tgetValue(): T {\n\t\tif (!this._didRun) {\n\t\t\ttry {\n\t\t\t\tthis._value = this.executor();\n\t\t\t} catch (err) {\n\t\t\t\tthis._error = err;\n\t\t\t} finally {\n\t\t\t\tthis._didRun = true;\n\t\t\t}\n\t\t}\n\t\tif (this._error) {\n\t\t\tthrow this._error;\n\t\t}\n\t\treturn this._value!;\n\t}\n\n\t/**\n\t * Get the wrapped value without forcing evaluation.\n\t */\n\tget rawValue(): T | undefined { return this._value; }\n\n\t/**\n\t * Create a new lazy value that is the result of applying `f` to the wrapped value.\n\t *\n\t * This does not force the evaluation of the current lazy value.\n\t */\n\tmap<R>(f: (x: T) => R): Lazy<R> {\n\t\treturn new Lazy<R>(() => f(this.getValue()));\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { once } from './functional';\nimport { Iterable } from './iterator';\n\n/**\n * Enables logging of potentially leaked disposables.\n *\n * A disposable is considered leaked if it is not disposed or not registered as the child of\n * another disposable. This tracking is very simple an only works for classes that either\n * extend Disposable or use a DisposableStore. This means there are a lot of false positives.\n */\nconst TRACK_DISPOSABLES = false;\nlet disposableTracker: IDisposableTracker | null = null;\n\nexport interface IDisposableTracker {\n\t/**\n\t * Is called on construction of a disposable.\n\t*/\n\ttrackDisposable(disposable: IDisposable): void;\n\n\t/**\n\t * Is called when a disposable is registered as child of another disposable (e.g. {@link DisposableStore}).\n\t * If parent is `null`, the disposable is removed from its former parent.\n\t*/\n\tsetParent(child: IDisposable, parent: IDisposable | null): void;\n\n\t/**\n\t * Is called after a disposable is disposed.\n\t*/\n\tmarkAsDisposed(disposable: IDisposable): void;\n\n\t/**\n\t * Indicates that the given object is a singleton which does not need to be disposed.\n\t*/\n\tmarkAsSingleton(disposable: IDisposable): void;\n}\n\nexport function setDisposableTracker(tracker: IDisposableTracker | null): void {\n\tdisposableTracker = tracker;\n}\n\nif (TRACK_DISPOSABLES) {\n\tconst __is_disposable_tracked__ = '__is_disposable_tracked__';\n\tsetDisposableTracker(new class implements IDisposableTracker {\n\t\ttrackDisposable(x: IDisposable): void {\n\t\t\tconst stack = new Error('Potentially leaked disposable').stack!;\n\t\t\tsetTimeout(() => {\n\t\t\t\tif (!(x as any)[__is_disposable_tracked__]) {\n\t\t\t\t\tconsole.log(stack);\n\t\t\t\t}\n\t\t\t}, 3000);\n\t\t}\n\n\t\tsetParent(child: IDisposable, parent: IDisposable | null): void {\n\t\t\tif (child && child !== Disposable.None) {\n\t\t\t\ttry {\n\t\t\t\t\t(child as any)[__is_disposable_tracked__] = true;\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tmarkAsDisposed(disposable: IDisposable): void {\n\t\t\tif (disposable && disposable !== Disposable.None) {\n\t\t\t\ttry {\n\t\t\t\t\t(disposable as any)[__is_disposable_tracked__] = true;\n\t\t\t\t} catch {\n\t\t\t\t\t// noop\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmarkAsSingleton(disposable: IDisposable): void { }\n\t});\n}\n\nfunction trackDisposable<T extends IDisposable>(x: T): T {\n\tdisposableTracker?.trackDisposable(x);\n\treturn x;\n}\n\nfunction markAsDisposed(disposable: IDisposable): void {\n\tdisposableTracker?.markAsDisposed(disposable);\n}\n\nfunction setParentOfDisposable(child: IDisposable, parent: IDisposable | null): void {\n\tdisposableTracker?.setParent(child, parent);\n}\n\nfunction setParentOfDisposables(children: IDisposable[], parent: IDisposable | null): void {\n\tif (!disposableTracker) {\n\t\treturn;\n\t}\n\tfor (const child of children) {\n\t\tdisposableTracker.setParent(child, parent);\n\t}\n}\n\n/**\n * Indicates that the given object is a singleton which does not need to be disposed.\n*/\nexport function markAsSingleton<T extends IDisposable>(singleton: T): T {\n\tdisposableTracker?.markAsSingleton(singleton);\n\treturn singleton;\n}\n\nexport class MultiDisposeError extends Error {\n\tconstructor(\n\t\tpublic readonly errors: any[]\n\t) {\n\t\tsuper(`Encountered errors while disposing of store. Errors: [${errors.join(', ')}]`);\n\t}\n}\n\nexport interface IDisposable {\n\tdispose(): void;\n}\n\nexport function isDisposable<E extends object>(thing: E): thing is E & IDisposable {\n\treturn typeof (<IDisposable>thing).dispose === 'function' && (<IDisposable>thing).dispose.length === 0;\n}\n\nexport function dispose<T extends IDisposable>(disposable: T): T;\nexport function dispose<T extends IDisposable>(disposable: T | undefined): T | undefined;\nexport function dispose<T extends IDisposable, A extends IterableIterator<T> = IterableIterator<T>>(disposables: IterableIterator<T>): A;\nexport function dispose<T extends IDisposable>(disposables: Array<T>): Array<T>;\nexport function dispose<T extends IDisposable>(disposables: ReadonlyArray<T>): ReadonlyArray<T>;\nexport function dispose<T extends IDisposable>(arg: T | IterableIterator<T> | undefined): any {\n\tif (Iterable.is(arg)) {\n\t\tlet errors: any[] = [];\n\n\t\tfor (const d of arg) {\n\t\t\tif (d) {\n\t\t\t\ttry {\n\t\t\t\t\td.dispose();\n\t\t\t\t} catch (e) {\n\t\t\t\t\terrors.push(e);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (errors.length === 1) {\n\t\t\tthrow errors[0];\n\t\t} else if (errors.length > 1) {\n\t\t\tthrow new MultiDisposeError(errors);\n\t\t}\n\n\t\treturn Array.isArray(arg) ? [] : arg;\n\t} else if (arg) {\n\t\targ.dispose();\n\t\treturn arg;\n\t}\n}\n\n\nexport function combinedDisposable(...disposables: IDisposable[]): IDisposable {\n\tconst parent = toDisposable(() => dispose(disposables));\n\tsetParentOfDisposables(disposables, parent);\n\treturn parent;\n}\n\nexport function toDisposable(fn: () => void): IDisposable {\n\tconst self = trackDisposable({\n\t\tdispose: once(() => {\n\t\t\tmarkAsDisposed(self);\n\t\t\tfn();\n\t\t})\n\t});\n\treturn self;\n}\n\nexport class DisposableStore implements IDisposable {\n\n\tstatic DISABLE_DISPOSED_WARNING = false;\n\n\tprivate _toDispose = new Set<IDisposable>();\n\tprivate _isDisposed = false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\t/**\n\t * Dispose of all registered disposables and mark this object as disposed.\n\t *\n\t * Any future disposables added to this object will be disposed of on `add`.\n\t */\n\tpublic dispose(): void {\n\t\tif (this._isDisposed) {\n\t\t\treturn;\n\t\t}\n\n\t\tmarkAsDisposed(this);\n\t\tthis._isDisposed = true;\n\t\tthis.clear();\n\t}\n\n\t/**\n\t * Returns `true` if this object has been disposed\n\t */\n\tpublic get isDisposed(): boolean {\n\t\treturn this._isDisposed;\n\t}\n\n\t/**\n\t * Dispose of all registered disposables but do not mark this object as disposed.\n\t */\n\tpublic clear(): void {\n\t\ttry {\n\t\t\tdispose(this._toDispose.values());\n\t\t} finally {\n\t\t\tthis._toDispose.clear();\n\t\t}\n\t}\n\n\tpublic add<T extends IDisposable>(o: T): T {\n\t\tif (!o) {\n\t\t\treturn o;\n\t\t}\n\t\tif ((o as unknown as DisposableStore) === this) {\n\t\t\tthrow new Error('Cannot register a disposable on itself!');\n\t\t}\n\n\t\tsetParentOfDisposable(o, this);\n\t\tif (this._isDisposed) {\n\t\t\tif (!DisposableStore.DISABLE_DISPOSED_WARNING) {\n\t\t\t\tconsole.warn(new Error('Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!').stack);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._toDispose.add(o);\n\t\t}\n\n\t\treturn o;\n\t}\n}\n\nexport abstract class Disposable implements IDisposable {\n\n\tstatic readonly None = Object.freeze<IDisposable>({ dispose() { } });\n\n\tprotected readonly _store = new DisposableStore();\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t\tsetParentOfDisposable(this._store, this);\n\t}\n\n\tpublic dispose(): void {\n\t\tmarkAsDisposed(this);\n\n\t\tthis._store.dispose();\n\t}\n\n\tprotected _register<T extends IDisposable>(o: T): T {\n\t\tif ((o as unknown as Disposable) === this) {\n\t\t\tthrow new Error('Cannot register a disposable on itself!');\n\t\t}\n\t\treturn this._store.add(o);\n\t}\n}\n\n/**\n * Manages the lifecycle of a disposable value that may be changed.\n *\n * This ensures that when the disposable value is changed, the previously held disposable is disposed of. You can\n * also register a `MutableDisposable` on a `Disposable` to ensure it is automatically cleaned up.\n */\nexport class MutableDisposable<T extends IDisposable> implements IDisposable {\n\tprivate _value?: T;\n\tprivate _isDisposed = false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\tget value(): T | undefined {\n\t\treturn this._isDisposed ? undefined : this._value;\n\t}\n\n\tset value(value: T | undefined) {\n\t\tif (this._isDisposed || value === this._value) {\n\t\t\treturn;\n\t\t}\n\n\t\tthis._value?.dispose();\n\t\tif (value) {\n\t\t\tsetParentOfDisposable(value, this);\n\t\t}\n\t\tthis._value = value;\n\t}\n\n\tclear() {\n\t\tthis.value = undefined;\n\t}\n\n\tdispose(): void {\n\t\tthis._isDisposed = true;\n\t\tmarkAsDisposed(this);\n\t\tthis._value?.dispose();\n\t\tthis._value = undefined;\n\t}\n\n\t/**\n\t * Clears the value, but does not dispose it.\n\t * The old value is returned.\n\t*/\n\tclearAndLeak(): T | undefined {\n\t\tconst oldValue = this._value;\n\t\tthis._value = undefined;\n\t\tif (oldValue) {\n\t\t\tsetParentOfDisposable(oldValue, null);\n\t\t}\n\t\treturn oldValue;\n\t}\n}\n\nexport class RefCountedDisposable {\n\n\tprivate _counter: number = 1;\n\n\tconstructor(\n\t\tprivate readonly _disposable: IDisposable,\n\t) { }\n\n\tacquire() {\n\t\tthis._counter++;\n\t\treturn this;\n\t}\n\n\trelease() {\n\t\tif (--this._counter === 0) {\n\t\t\tthis._disposable.dispose();\n\t\t}\n\t\treturn this;\n\t}\n}\n\n/**\n * A safe disposable can be `unset` so that a leaked reference (listener)\n * can be cut-off.\n */\nexport class SafeDisposable implements IDisposable {\n\n\tdispose: () => void = () => { };\n\tunset: () => void = () => { };\n\tisset: () => boolean = () => false;\n\n\tconstructor() {\n\t\ttrackDisposable(this);\n\t}\n\n\tset(fn: Function) {\n\t\tlet callback: Function | undefined = fn;\n\t\tthis.unset = () => callback = undefined;\n\t\tthis.isset = () => callback !== undefined;\n\t\tthis.dispose = () => {\n\t\t\tif (callback) {\n\t\t\t\tcallback();\n\t\t\t\tcallback = undefined;\n\t\t\t\tmarkAsDisposed(this);\n\t\t\t}\n\t\t};\n\t\treturn this;\n\t}\n}\n\nexport interface IReference<T> extends IDisposable {\n\treadonly object: T;\n}\n\nexport abstract class ReferenceCollection<T> {\n\n\tprivate readonly references: Map<string, { readonly object: T; counter: number }> = new Map();\n\n\tacquire(key: string, ...args: any[]): IReference<T> {\n\t\tlet reference = this.references.get(key);\n\n\t\tif (!reference) {\n\t\t\treference = { counter: 0, object: this.createReferencedObject(key, ...args) };\n\t\t\tthis.references.set(key, reference);\n\t\t}\n\n\t\tconst { object } = reference;\n\t\tconst dispose = once(() => {\n\t\t\tif (--reference!.counter === 0) {\n\t\t\t\tthis.destroyReferencedObject(key, reference!.object);\n\t\t\t\tthis.references.delete(key);\n\t\t\t}\n\t\t});\n\n\t\treference.counter++;\n\n\t\treturn { object, dispose };\n\t}\n\n\tprotected abstract createReferencedObject(key: string, ...args: any[]): T;\n\tprotected abstract destroyReferencedObject(key: string, object: T): void;\n}\n\n/**\n * Unwraps a reference collection of promised values. Makes sure\n * references are disposed whenever promises get rejected.\n */\nexport class AsyncReferenceCollection<T> {\n\n\tconstructor(private referenceCollection: ReferenceCollection<Promise<T>>) { }\n\n\tasync acquire(key: string, ...args: any[]): Promise<IReference<T>> {\n\t\tconst ref = this.referenceCollection.acquire(key, ...args);\n\n\t\ttry {\n\t\t\tconst object = await ref.object;\n\n\t\t\treturn {\n\t\t\t\tobject,\n\t\t\t\tdispose: () => ref.dispose()\n\t\t\t};\n\t\t} catch (error) {\n\t\t\tref.dispose();\n\t\t\tthrow error;\n\t\t}\n\t}\n}\n\nexport class ImmortalReference<T> implements IReference<T> {\n\tconstructor(public object: T) { }\n\tdispose(): void { /* noop */ }\n}\n\nexport function disposeOnReturn(fn: (store: DisposableStore) => void): void {\n\tconst store = new DisposableStore();\n\ttry {\n\t\tfn(store);\n\t} finally {\n\t\tstore.dispose();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nclass Node<E> {\n\n\tstatic readonly Undefined = new Node<any>(undefined);\n\n\telement: E;\n\tnext: Node<E>;\n\tprev: Node<E>;\n\n\tconstructor(element: E) {\n\t\tthis.element = element;\n\t\tthis.next = Node.Undefined;\n\t\tthis.prev = Node.Undefined;\n\t}\n}\n\nexport class LinkedList<E> {\n\n\tprivate _first: Node<E> = Node.Undefined;\n\tprivate _last: Node<E> = Node.Undefined;\n\tprivate _size: number = 0;\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._first === Node.Undefined;\n\t}\n\n\tclear(): void {\n\t\tlet node = this._first;\n\t\twhile (node !== Node.Undefined) {\n\t\t\tconst next = node.next;\n\t\t\tnode.prev = Node.Undefined;\n\t\t\tnode.next = Node.Undefined;\n\t\t\tnode = next;\n\t\t}\n\n\t\tthis._first = Node.Undefined;\n\t\tthis._last = Node.Undefined;\n\t\tthis._size = 0;\n\t}\n\n\tunshift(element: E): () => void {\n\t\treturn this._insert(element, false);\n\t}\n\n\tpush(element: E): () => void {\n\t\treturn this._insert(element, true);\n\t}\n\n\tprivate _insert(element: E, atTheEnd: boolean): () => void {\n\t\tconst newNode = new Node(element);\n\t\tif (this._first === Node.Undefined) {\n\t\t\tthis._first = newNode;\n\t\t\tthis._last = newNode;\n\n\t\t} else if (atTheEnd) {\n\t\t\t// push\n\t\t\tconst oldLast = this._last!;\n\t\t\tthis._last = newNode;\n\t\t\tnewNode.prev = oldLast;\n\t\t\toldLast.next = newNode;\n\n\t\t} else {\n\t\t\t// unshift\n\t\t\tconst oldFirst = this._first;\n\t\t\tthis._first = newNode;\n\t\t\tnewNode.next = oldFirst;\n\t\t\toldFirst.prev = newNode;\n\t\t}\n\t\tthis._size += 1;\n\n\t\tlet didRemove = false;\n\t\treturn () => {\n\t\t\tif (!didRemove) {\n\t\t\t\tdidRemove = true;\n\t\t\t\tthis._remove(newNode);\n\t\t\t}\n\t\t};\n\t}\n\n\tshift(): E | undefined {\n\t\tif (this._first === Node.Undefined) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst res = this._first.element;\n\t\t\tthis._remove(this._first);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tpop(): E | undefined {\n\t\tif (this._last === Node.Undefined) {\n\t\t\treturn undefined;\n\t\t} else {\n\t\t\tconst res = this._last.element;\n\t\t\tthis._remove(this._last);\n\t\t\treturn res;\n\t\t}\n\t}\n\n\tprivate _remove(node: Node<E>): void {\n\t\tif (node.prev !== Node.Undefined && node.next !== Node.Undefined) {\n\t\t\t// middle\n\t\t\tconst anchor = node.prev;\n\t\t\tanchor.next = node.next;\n\t\t\tnode.next.prev = anchor;\n\n\t\t} else if (node.prev === Node.Undefined && node.next === Node.Undefined) {\n\t\t\t// only node\n\t\t\tthis._first = Node.Undefined;\n\t\t\tthis._last = Node.Undefined;\n\n\t\t} else if (node.next === Node.Undefined) {\n\t\t\t// last\n\t\t\tthis._last = this._last!.prev!;\n\t\t\tthis._last.next = Node.Undefined;\n\n\t\t} else if (node.prev === Node.Undefined) {\n\t\t\t// first\n\t\t\tthis._first = this._first!.next!;\n\t\t\tthis._first.prev = Node.Undefined;\n\t\t}\n\n\t\t// done\n\t\tthis._size -= 1;\n\t}\n\n\t*[Symbol.iterator](): Iterator<E> {\n\t\tlet node = this._first;\n\t\twhile (node !== Node.Undefined) {\n\t\t\tyield node.element;\n\t\t\tnode = node.next;\n\t\t}\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { shuffle } from './arrays';\nimport { CharCode } from './charCode';\nimport { compare, compareIgnoreCase, compareSubstring, compareSubstringIgnoreCase } from './strings';\nimport { URI } from './uri';\n\nexport function getOrSet<K, V>(map: Map<K, V>, key: K, value: V): V {\n\tlet result = map.get(key);\n\tif (result === undefined) {\n\t\tresult = value;\n\t\tmap.set(key, result);\n\t}\n\n\treturn result;\n}\n\nexport function mapToString<K, V>(map: Map<K, V>): string {\n\tconst entries: string[] = [];\n\tmap.forEach((value, key) => {\n\t\tentries.push(`${key} => ${value}`);\n\t});\n\n\treturn `Map(${map.size}) {${entries.join(', ')}}`;\n}\n\nexport function setToString<K>(set: Set<K>): string {\n\tconst entries: K[] = [];\n\tset.forEach(value => {\n\t\tentries.push(value);\n\t});\n\n\treturn `Set(${set.size}) {${entries.join(', ')}}`;\n}\n\nexport interface IKeyIterator<K> {\n\treset(key: K): this;\n\tnext(): this;\n\n\thasNext(): boolean;\n\tcmp(a: string): number;\n\tvalue(): string;\n}\n\nexport class StringIterator implements IKeyIterator<string> {\n\n\tprivate _value: string = '';\n\tprivate _pos: number = 0;\n\n\treset(key: string): this {\n\t\tthis._value = key;\n\t\tthis._pos = 0;\n\t\treturn this;\n\t}\n\n\tnext(): this {\n\t\tthis._pos += 1;\n\t\treturn this;\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._pos < this._value.length - 1;\n\t}\n\n\tcmp(a: string): number {\n\t\tconst aCode = a.charCodeAt(0);\n\t\tconst thisCode = this._value.charCodeAt(this._pos);\n\t\treturn aCode - thisCode;\n\t}\n\n\tvalue(): string {\n\t\treturn this._value[this._pos];\n\t}\n}\n\nexport class ConfigKeysIterator implements IKeyIterator<string> {\n\n\tprivate _value!: string;\n\tprivate _from!: number;\n\tprivate _to!: number;\n\n\tconstructor(\n\t\tprivate readonly _caseSensitive: boolean = true\n\t) { }\n\n\treset(key: string): this {\n\t\tthis._value = key;\n\t\tthis._from = 0;\n\t\tthis._to = 0;\n\t\treturn this.next();\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._to < this._value.length;\n\t}\n\n\tnext(): this {\n\t\t// this._data = key.split(/[\\\\/]/).filter(s => !!s);\n\t\tthis._from = this._to;\n\t\tlet justSeps = true;\n\t\tfor (; this._to < this._value.length; this._to++) {\n\t\t\tconst ch = this._value.charCodeAt(this._to);\n\t\t\tif (ch === CharCode.Period) {\n\t\t\t\tif (justSeps) {\n\t\t\t\t\tthis._from++;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjustSeps = false;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tcmp(a: string): number {\n\t\treturn this._caseSensitive\n\t\t\t? compareSubstring(a, this._value, 0, a.length, this._from, this._to)\n\t\t\t: compareSubstringIgnoreCase(a, this._value, 0, a.length, this._from, this._to);\n\t}\n\n\tvalue(): string {\n\t\treturn this._value.substring(this._from, this._to);\n\t}\n}\n\nexport class PathIterator implements IKeyIterator<string> {\n\n\tprivate _value!: string;\n\tprivate _valueLen!: number;\n\tprivate _from!: number;\n\tprivate _to!: number;\n\n\tconstructor(\n\t\tprivate readonly _splitOnBackslash: boolean = true,\n\t\tprivate readonly _caseSensitive: boolean = true\n\t) { }\n\n\treset(key: string): this {\n\t\tthis._from = 0;\n\t\tthis._to = 0;\n\t\tthis._value = key;\n\t\tthis._valueLen = key.length;\n\t\tfor (let pos = key.length - 1; pos >= 0; pos--, this._valueLen--) {\n\t\t\tconst ch = this._value.charCodeAt(pos);\n\t\t\tif (!(ch === CharCode.Slash || this._splitOnBackslash && ch === CharCode.Backslash)) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\treturn this.next();\n\t}\n\n\thasNext(): boolean {\n\t\treturn this._to < this._valueLen;\n\t}\n\n\tnext(): this {\n\t\t// this._data = key.split(/[\\\\/]/).filter(s => !!s);\n\t\tthis._from = this._to;\n\t\tlet justSeps = true;\n\t\tfor (; this._to < this._valueLen; this._to++) {\n\t\t\tconst ch = this._value.charCodeAt(this._to);\n\t\t\tif (ch === CharCode.Slash || this._splitOnBackslash && ch === CharCode.Backslash) {\n\t\t\t\tif (justSeps) {\n\t\t\t\t\tthis._from++;\n\t\t\t\t} else {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tjustSeps = false;\n\t\t\t}\n\t\t}\n\t\treturn this;\n\t}\n\n\tcmp(a: string): number {\n\t\treturn this._caseSensitive\n\t\t\t? compareSubstring(a, this._value, 0, a.length, this._from, this._to)\n\t\t\t: compareSubstringIgnoreCase(a, this._value, 0, a.length, this._from, this._to);\n\t}\n\n\tvalue(): string {\n\t\treturn this._value.substring(this._from, this._to);\n\t}\n}\n\nconst enum UriIteratorState {\n\tScheme = 1, Authority = 2, Path = 3, Query = 4, Fragment = 5\n}\n\nexport class UriIterator implements IKeyIterator<URI> {\n\n\tprivate _pathIterator!: PathIterator;\n\tprivate _value!: URI;\n\tprivate _states: UriIteratorState[] = [];\n\tprivate _stateIdx: number = 0;\n\n\tconstructor(\n\t\tprivate readonly _ignorePathCasing: (uri: URI) => boolean,\n\t\tprivate readonly _ignoreQueryAndFragment: (uri: URI) => boolean) { }\n\n\treset(key: URI): this {\n\t\tthis._value = key;\n\t\tthis._states = [];\n\t\tif (this._value.scheme) {\n\t\t\tthis._states.push(UriIteratorState.Scheme);\n\t\t}\n\t\tif (this._value.authority) {\n\t\t\tthis._states.push(UriIteratorState.Authority);\n\t\t}\n\t\tif (this._value.path) {\n\t\t\tthis._pathIterator = new PathIterator(false, !this._ignorePathCasing(key));\n\t\t\tthis._pathIterator.reset(key.path);\n\t\t\tif (this._pathIterator.value()) {\n\t\t\t\tthis._states.push(UriIteratorState.Path);\n\t\t\t}\n\t\t}\n\t\tif (!this._ignoreQueryAndFragment(key)) {\n\t\t\tif (this._value.query) {\n\t\t\t\tthis._states.push(UriIteratorState.Query);\n\t\t\t}\n\t\t\tif (this._value.fragment) {\n\t\t\t\tthis._states.push(UriIteratorState.Fragment);\n\t\t\t}\n\t\t}\n\t\tthis._stateIdx = 0;\n\t\treturn this;\n\t}\n\n\tnext(): this {\n\t\tif (this._states[this._stateIdx] === UriIteratorState.Path && this._pathIterator.hasNext()) {\n\t\t\tthis._pathIterator.next();\n\t\t} else {\n\t\t\tthis._stateIdx += 1;\n\t\t}\n\t\treturn this;\n\t}\n\n\thasNext(): boolean {\n\t\treturn (this._states[this._stateIdx] === UriIteratorState.Path && this._pathIterator.hasNext())\n\t\t\t|| this._stateIdx < this._states.length - 1;\n\t}\n\n\tcmp(a: string): number {\n\t\tif (this._states[this._stateIdx] === UriIteratorState.Scheme) {\n\t\t\treturn compareIgnoreCase(a, this._value.scheme);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Authority) {\n\t\t\treturn compareIgnoreCase(a, this._value.authority);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Path) {\n\t\t\treturn this._pathIterator.cmp(a);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Query) {\n\t\t\treturn compare(a, this._value.query);\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Fragment) {\n\t\t\treturn compare(a, this._value.fragment);\n\t\t}\n\t\tthrow new Error();\n\t}\n\n\tvalue(): string {\n\t\tif (this._states[this._stateIdx] === UriIteratorState.Scheme) {\n\t\t\treturn this._value.scheme;\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Authority) {\n\t\t\treturn this._value.authority;\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Path) {\n\t\t\treturn this._pathIterator.value();\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Query) {\n\t\t\treturn this._value.query;\n\t\t} else if (this._states[this._stateIdx] === UriIteratorState.Fragment) {\n\t\t\treturn this._value.fragment;\n\t\t}\n\t\tthrow new Error();\n\t}\n}\n\nclass TernarySearchTreeNode<K, V> {\n\theight: number = 1;\n\tsegment!: string;\n\tvalue: V | undefined;\n\tkey: K | undefined;\n\tleft: TernarySearchTreeNode<K, V> | undefined;\n\tmid: TernarySearchTreeNode<K, V> | undefined;\n\tright: TernarySearchTreeNode<K, V> | undefined;\n\n\tisEmpty(): boolean {\n\t\treturn !this.left && !this.mid && !this.right && !this.value;\n\t}\n\n\trotateLeft() {\n\t\tconst tmp = this.right!;\n\t\tthis.right = tmp.left;\n\t\ttmp.left = this;\n\t\tthis.updateHeight();\n\t\ttmp.updateHeight();\n\t\treturn tmp;\n\t}\n\n\trotateRight() {\n\t\tconst tmp = this.left!;\n\t\tthis.left = tmp.right;\n\t\ttmp.right = this;\n\t\tthis.updateHeight();\n\t\ttmp.updateHeight();\n\t\treturn tmp;\n\t}\n\n\tupdateHeight() {\n\t\tthis.height = 1 + Math.max(this.heightLeft, this.heightRight);\n\t}\n\n\tbalanceFactor() {\n\t\treturn this.heightRight - this.heightLeft;\n\t}\n\n\tget heightLeft() {\n\t\treturn this.left?.height ?? 0;\n\t}\n\n\tget heightRight() {\n\t\treturn this.right?.height ?? 0;\n\t}\n}\n\nconst enum Dir {\n\tLeft = -1,\n\tMid = 0,\n\tRight = 1,\n}\n\nexport class TernarySearchTree<K, V> {\n\n\tstatic forUris<E>(ignorePathCasing: (key: URI) => boolean = () => false, ignoreQueryAndFragment: (key: URI) => boolean = () => false): TernarySearchTree<URI, E> {\n\t\treturn new TernarySearchTree<URI, E>(new UriIterator(ignorePathCasing, ignoreQueryAndFragment));\n\t}\n\n\tstatic forPaths<E>(ignorePathCasing = false): TernarySearchTree<string, E> {\n\t\treturn new TernarySearchTree<string, E>(new PathIterator(undefined, !ignorePathCasing));\n\t}\n\n\tstatic forStrings<E>(): TernarySearchTree<string, E> {\n\t\treturn new TernarySearchTree<string, E>(new StringIterator());\n\t}\n\n\tstatic forConfigKeys<E>(): TernarySearchTree<string, E> {\n\t\treturn new TernarySearchTree<string, E>(new ConfigKeysIterator());\n\t}\n\n\tprivate _iter: IKeyIterator<K>;\n\tprivate _root: TernarySearchTreeNode<K, V> | undefined;\n\n\tconstructor(segments: IKeyIterator<K>) {\n\t\tthis._iter = segments;\n\t}\n\n\tclear(): void {\n\t\tthis._root = undefined;\n\t}\n\n\t/**\n\t * Fill the tree with the same value of the given keys\n\t */\n\tfill(element: V, keys: readonly K[]): void;\n\t/**\n\t * Fill the tree with given [key,value]-tuples\n\t */\n\tfill(values: readonly [K, V][]): void;\n\tfill(values: readonly [K, V][] | V, keys?: readonly K[]): void {\n\t\tif (keys) {\n\t\t\tconst arr = keys.slice(0);\n\t\t\tshuffle(arr);\n\t\t\tfor (let k of arr) {\n\t\t\t\tthis.set(k, (<V>values));\n\t\t\t}\n\t\t} else {\n\t\t\tconst arr = (<[K, V][]>values).slice(0);\n\t\t\tshuffle(arr);\n\t\t\tfor (let entry of arr) {\n\t\t\t\tthis.set(entry[0], entry[1]);\n\t\t\t}\n\t\t}\n\t}\n\n\tset(key: K, element: V): V | undefined {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node: TernarySearchTreeNode<K, V>;\n\n\t\tif (!this._root) {\n\t\t\tthis._root = new TernarySearchTreeNode<K, V>();\n\t\t\tthis._root.segment = iter.value();\n\t\t}\n\t\tconst stack: [Dir, TernarySearchTreeNode<K, V>][] = [];\n\n\t\t// find insert_node\n\t\tnode = this._root;\n\t\twhile (true) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tif (!node.left) {\n\t\t\t\t\tnode.left = new TernarySearchTreeNode<K, V>();\n\t\t\t\t\tnode.left.segment = iter.value();\n\t\t\t\t}\n\t\t\t\tstack.push([Dir.Left, node]);\n\t\t\t\tnode = node.left;\n\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tif (!node.right) {\n\t\t\t\t\tnode.right = new TernarySearchTreeNode<K, V>();\n\t\t\t\t\tnode.right.segment = iter.value();\n\t\t\t\t}\n\t\t\t\tstack.push([Dir.Right, node]);\n\t\t\t\tnode = node.right;\n\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tif (!node.mid) {\n\t\t\t\t\tnode.mid = new TernarySearchTreeNode<K, V>();\n\t\t\t\t\tnode.mid.segment = iter.value();\n\t\t\t\t}\n\t\t\t\tstack.push([Dir.Mid, node]);\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\t// set value\n\t\tconst oldElement = node.value;\n\t\tnode.value = element;\n\t\tnode.key = key;\n\n\t\t// balance\n\t\tfor (let i = stack.length - 1; i >= 0; i--) {\n\t\t\tconst node = stack[i][1];\n\n\t\t\tnode.updateHeight();\n\t\t\tconst bf = node.balanceFactor();\n\n\t\t\tif (bf < -1 || bf > 1) {\n\t\t\t\t// needs rotate\n\t\t\t\tconst d1 = stack[i][0];\n\t\t\t\tconst d2 = stack[i + 1][0];\n\n\t\t\t\tif (d1 === Dir.Right && d2 === Dir.Right) {\n\t\t\t\t\t//right, right -> rotate left\n\t\t\t\t\tstack[i][1] = node.rotateLeft();\n\n\t\t\t\t} else if (d1 === Dir.Left && d2 === Dir.Left) {\n\t\t\t\t\t// left, left -> rotate right\n\t\t\t\t\tstack[i][1] = node.rotateRight();\n\n\t\t\t\t} else if (d1 === Dir.Right && d2 === Dir.Left) {\n\t\t\t\t\t// right, left -> double rotate right, left\n\t\t\t\t\tnode.right = stack[i + 1][1] = stack[i + 1][1].rotateRight();\n\t\t\t\t\tstack[i][1] = node.rotateLeft();\n\n\t\t\t\t} else if (d1 === Dir.Left && d2 === Dir.Right) {\n\t\t\t\t\t// left, right -> double rotate left, right\n\t\t\t\t\tnode.left = stack[i + 1][1] = stack[i + 1][1].rotateLeft();\n\t\t\t\t\tstack[i][1] = node.rotateRight();\n\n\t\t\t\t} else {\n\t\t\t\t\tthrow new Error();\n\t\t\t\t}\n\n\t\t\t\t// patch path to parent\n\t\t\t\tif (i > 0) {\n\t\t\t\t\tswitch (stack[i - 1][0]) {\n\t\t\t\t\t\tcase Dir.Left:\n\t\t\t\t\t\t\tstack[i - 1][1].left = stack[i][1];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Dir.Right:\n\t\t\t\t\t\t\tstack[i - 1][1].right = stack[i][1];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase Dir.Mid:\n\t\t\t\t\t\t\tstack[i - 1][1].mid = stack[i][1];\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._root = stack[0][1];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn oldElement;\n\t}\n\n\tget(key: K): V | undefined {\n\t\treturn this._getNode(key)?.value;\n\t}\n\n\tprivate _getNode(key: K) {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node = this._root;\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn node;\n\t}\n\n\thas(key: K): boolean {\n\t\tconst node = this._getNode(key);\n\t\treturn !(node?.value === undefined && node?.mid === undefined);\n\t}\n\n\tdelete(key: K): void {\n\t\treturn this._delete(key, false);\n\t}\n\n\tdeleteSuperstr(key: K): void {\n\t\treturn this._delete(key, true);\n\t}\n\n\tprivate _delete(key: K, superStr: boolean): void {\n\t\tconst iter = this._iter.reset(key);\n\t\tconst stack: [Dir, TernarySearchTreeNode<K, V>][] = [];\n\t\tlet node = this._root;\n\n\t\t// find node\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tstack.push([Dir.Left, node]);\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tstack.push([Dir.Right, node]);\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tstack.push([Dir.Mid, node]);\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\t\tif (!node) {\n\t\t\t// node not found\n\t\t\treturn;\n\t\t}\n\n\t\tif (superStr) {\n\t\t\t// removing children, reset height\n\t\t\tnode.left = undefined;\n\t\t\tnode.mid = undefined;\n\t\t\tnode.right = undefined;\n\t\t\tnode.height = 1;\n\t\t} else {\n\t\t\t// removing element\n\t\t\tnode.key = undefined;\n\t\t\tnode.value = undefined;\n\t\t}\n\n\t\t// BST node removal\n\t\tif (!node.mid && !node.value) {\n\t\t\tif (node.left && node.right) {\n\t\t\t\t// full node\n\t\t\t\tconst min = this._min(node.right);\n\t\t\t\tconst { key, value, segment } = min;\n\t\t\t\tthis._delete(min.key!, false);\n\t\t\t\tnode.key = key;\n\t\t\t\tnode.value = value;\n\t\t\t\tnode.segment = segment;\n\n\t\t\t} else {\n\t\t\t\t// empty or half empty\n\t\t\t\tconst newChild = node.left ?? node.right;\n\t\t\t\tif (stack.length > 0) {\n\t\t\t\t\tconst [dir, parent] = stack[stack.length - 1];\n\t\t\t\t\tswitch (dir) {\n\t\t\t\t\t\tcase Dir.Left: parent.left = newChild; break;\n\t\t\t\t\t\tcase Dir.Mid: parent.mid = newChild; break;\n\t\t\t\t\t\tcase Dir.Right: parent.right = newChild; break;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis._root = newChild;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// AVL balance\n\t\tfor (let i = stack.length - 1; i >= 0; i--) {\n\t\t\tconst node = stack[i][1];\n\n\t\t\tnode.updateHeight();\n\t\t\tconst bf = node.balanceFactor();\n\t\t\tif (bf > 1) {\n\t\t\t\t// right heavy\n\t\t\t\tif (node.right!.balanceFactor() >= 0) {\n\t\t\t\t\t// right, right -> rotate left\n\t\t\t\t\tstack[i][1] = node.rotateLeft();\n\t\t\t\t} else {\n\t\t\t\t\t// right, left -> double rotate\n\t\t\t\t\tnode.right = node.right!.rotateRight();\n\t\t\t\t\tstack[i][1] = node.rotateLeft();\n\t\t\t\t}\n\n\t\t\t} else if (bf < -1) {\n\t\t\t\t// left heavy\n\t\t\t\tif (node.left!.balanceFactor() <= 0) {\n\t\t\t\t\t// left, left -> rotate right\n\t\t\t\t\tstack[i][1] = node.rotateRight();\n\t\t\t\t} else {\n\t\t\t\t\t// left, right -> double rotate\n\t\t\t\t\tnode.left = node.left!.rotateLeft();\n\t\t\t\t\tstack[i][1] = node.rotateRight();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// patch path to parent\n\t\t\tif (i > 0) {\n\t\t\t\tswitch (stack[i - 1][0]) {\n\t\t\t\t\tcase Dir.Left:\n\t\t\t\t\t\tstack[i - 1][1].left = stack[i][1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Dir.Right:\n\t\t\t\t\t\tstack[i - 1][1].right = stack[i][1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase Dir.Mid:\n\t\t\t\t\t\tstack[i - 1][1].mid = stack[i][1];\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._root = stack[0][1];\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _min(node: TernarySearchTreeNode<K, V>): TernarySearchTreeNode<K, V> {\n\t\twhile (node.left) {\n\t\t\tnode = node.left;\n\t\t}\n\t\treturn node;\n\t}\n\n\tfindSubstr(key: K): V | undefined {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node = this._root;\n\t\tlet candidate: V | undefined = undefined;\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tcandidate = node.value || candidate;\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\treturn node && node.value || candidate;\n\t}\n\n\tfindSuperstr(key: K): IterableIterator<[K, V]> | undefined {\n\t\tconst iter = this._iter.reset(key);\n\t\tlet node = this._root;\n\t\twhile (node) {\n\t\t\tconst val = iter.cmp(node.segment);\n\t\t\tif (val > 0) {\n\t\t\t\t// left\n\t\t\t\tnode = node.left;\n\t\t\t} else if (val < 0) {\n\t\t\t\t// right\n\t\t\t\tnode = node.right;\n\t\t\t} else if (iter.hasNext()) {\n\t\t\t\t// mid\n\t\t\t\titer.next();\n\t\t\t\tnode = node.mid;\n\t\t\t} else {\n\t\t\t\t// collect\n\t\t\t\tif (!node.mid) {\n\t\t\t\t\treturn undefined;\n\t\t\t\t} else {\n\t\t\t\t\treturn this._entries(node.mid);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\tforEach(callback: (value: V, index: K) => any): void {\n\t\tfor (const [key, value] of this) {\n\t\t\tcallback(value, key);\n\t\t}\n\t}\n\n\t*[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\tyield* this._entries(this._root);\n\t}\n\n\tprivate *_entries(node: TernarySearchTreeNode<K, V> | undefined): IterableIterator<[K, V]> {\n\t\t// DFS\n\t\tif (!node) {\n\t\t\treturn;\n\t\t}\n\t\tif (node.left) {\n\t\t\tyield* this._entries(node.left);\n\t\t}\n\t\tif (node.value) {\n\t\t\tyield [node.key!, node.value];\n\t\t}\n\t\tif (node.mid) {\n\t\t\tyield* this._entries(node.mid);\n\t\t}\n\t\tif (node.right) {\n\t\t\tyield* this._entries(node.right);\n\t\t}\n\t}\n\n\t// for debug/testing\n\t_isBalanced(): boolean {\n\t\tconst nodeIsBalanced = (node: TernarySearchTreeNode<any, any> | undefined): boolean => {\n\t\t\tif (!node) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\tconst bf = node.balanceFactor();\n\t\t\tif (bf < -1 || bf > 1) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\treturn nodeIsBalanced(node.left) && nodeIsBalanced(node.right);\n\t\t};\n\t\treturn nodeIsBalanced(this._root);\n\t}\n}\n\ninterface ResourceMapKeyFn {\n\t(resource: URI): string;\n}\n\nclass ResourceMapEntry<T> {\n\tconstructor(readonly uri: URI, readonly value: T) { }\n}\n\nexport class ResourceMap<T> implements Map<URI, T> {\n\n\tprivate static readonly defaultToKey = (resource: URI) => resource.toString();\n\n\treadonly [Symbol.toStringTag] = 'ResourceMap';\n\n\tprivate readonly map: Map<string, ResourceMapEntry<T>>;\n\tprivate readonly toKey: ResourceMapKeyFn;\n\n\t/**\n\t *\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(toKey?: ResourceMapKeyFn);\n\n\t/**\n\t *\n\t * @param other Another resource which this maps is created from\n\t * @param toKey Custom uri identity function, e.g use an existing `IExtUri#getComparison`-util\n\t */\n\tconstructor(other?: ResourceMap<T>, toKey?: ResourceMapKeyFn);\n\n\tconstructor(mapOrKeyFn?: ResourceMap<T> | ResourceMapKeyFn, toKey?: ResourceMapKeyFn) {\n\t\tif (mapOrKeyFn instanceof ResourceMap) {\n\t\t\tthis.map = new Map(mapOrKeyFn.map);\n\t\t\tthis.toKey = toKey ?? ResourceMap.defaultToKey;\n\t\t} else {\n\t\t\tthis.map = new Map();\n\t\t\tthis.toKey = mapOrKeyFn ?? ResourceMap.defaultToKey;\n\t\t}\n\t}\n\n\tset(resource: URI, value: T): this {\n\t\tthis.map.set(this.toKey(resource), new ResourceMapEntry(resource, value));\n\t\treturn this;\n\t}\n\n\tget(resource: URI): T | undefined {\n\t\treturn this.map.get(this.toKey(resource))?.value;\n\t}\n\n\thas(resource: URI): boolean {\n\t\treturn this.map.has(this.toKey(resource));\n\t}\n\n\tget size(): number {\n\t\treturn this.map.size;\n\t}\n\n\tclear(): void {\n\t\tthis.map.clear();\n\t}\n\n\tdelete(resource: URI): boolean {\n\t\treturn this.map.delete(this.toKey(resource));\n\t}\n\n\tforEach(clb: (value: T, key: URI, map: Map<URI, T>) => void, thisArg?: any): void {\n\t\tif (typeof thisArg !== 'undefined') {\n\t\t\tclb = clb.bind(thisArg);\n\t\t}\n\t\tfor (let [_, entry] of this.map) {\n\t\t\tclb(entry.value, entry.uri, <any>this);\n\t\t}\n\t}\n\n\t*values(): IterableIterator<T> {\n\t\tfor (let entry of this.map.values()) {\n\t\t\tyield entry.value;\n\t\t}\n\t}\n\n\t*keys(): IterableIterator<URI> {\n\t\tfor (let entry of this.map.values()) {\n\t\t\tyield entry.uri;\n\t\t}\n\t}\n\n\t*entries(): IterableIterator<[URI, T]> {\n\t\tfor (let entry of this.map.values()) {\n\t\t\tyield [entry.uri, entry.value];\n\t\t}\n\t}\n\n\t*[Symbol.iterator](): IterableIterator<[URI, T]> {\n\t\tfor (let [, entry] of this.map) {\n\t\t\tyield [entry.uri, entry.value];\n\t\t}\n\t}\n}\n\nexport class ResourceSet implements Set<URI> {\n\n\treadonly [Symbol.toStringTag]: string = 'ResourceSet';\n\n\tprivate readonly _map: ResourceMap<URI>;\n\n\tconstructor(toKey?: ResourceMapKeyFn);\n\tconstructor(entries: readonly URI[], toKey?: ResourceMapKeyFn);\n\tconstructor(entriesOrKey?: readonly URI[] | ResourceMapKeyFn, toKey?: ResourceMapKeyFn) {\n\t\tif (!entriesOrKey || typeof entriesOrKey === 'function') {\n\t\t\tthis._map = new ResourceMap(entriesOrKey);\n\t\t} else {\n\t\t\tthis._map = new ResourceMap(toKey);\n\t\t\tentriesOrKey.forEach(this.add, this);\n\t\t}\n\t}\n\n\n\tget size(): number {\n\t\treturn this._map.size;\n\t}\n\n\tadd(value: URI): this {\n\t\tthis._map.set(value, value);\n\t\treturn this;\n\t}\n\n\tclear(): void {\n\t\tthis._map.clear();\n\t}\n\n\tdelete(value: URI): boolean {\n\t\treturn this._map.delete(value);\n\t}\n\n\tforEach(callbackfn: (value: URI, value2: URI, set: Set<URI>) => void, thisArg?: any): void {\n\t\tthis._map.forEach((_value, key) => callbackfn.call(thisArg, key, key, this));\n\t}\n\n\thas(value: URI): boolean {\n\t\treturn this._map.has(value);\n\t}\n\n\tentries(): IterableIterator<[URI, URI]> {\n\t\treturn this._map.entries();\n\t}\n\n\tkeys(): IterableIterator<URI> {\n\t\treturn this._map.keys();\n\t}\n\n\tvalues(): IterableIterator<URI> {\n\t\treturn this._map.keys();\n\t}\n\n\t[Symbol.iterator](): IterableIterator<URI> {\n\t\treturn this.keys();\n\t}\n}\n\n\ninterface Item<K, V> {\n\tprevious: Item<K, V> | undefined;\n\tnext: Item<K, V> | undefined;\n\tkey: K;\n\tvalue: V;\n}\n\nexport const enum Touch {\n\tNone = 0,\n\tAsOld = 1,\n\tAsNew = 2\n}\n\nexport class LinkedMap<K, V> implements Map<K, V> {\n\n\treadonly [Symbol.toStringTag] = 'LinkedMap';\n\n\tprivate _map: Map<K, Item<K, V>>;\n\tprivate _head: Item<K, V> | undefined;\n\tprivate _tail: Item<K, V> | undefined;\n\tprivate _size: number;\n\n\tprivate _state: number;\n\n\tconstructor() {\n\t\tthis._map = new Map<K, Item<K, V>>();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state = 0;\n\t}\n\n\tclear(): void {\n\t\tthis._map.clear();\n\t\tthis._head = undefined;\n\t\tthis._tail = undefined;\n\t\tthis._size = 0;\n\t\tthis._state++;\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn !this._head && !this._tail;\n\t}\n\n\tget size(): number {\n\t\treturn this._size;\n\t}\n\n\tget first(): V | undefined {\n\t\treturn this._head?.value;\n\t}\n\n\tget last(): V | undefined {\n\t\treturn this._tail?.value;\n\t}\n\n\thas(key: K): boolean {\n\t\treturn this._map.has(key);\n\t}\n\n\tget(key: K, touch: Touch = Touch.None): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (touch !== Touch.None) {\n\t\t\tthis.touch(item, touch);\n\t\t}\n\t\treturn item.value;\n\t}\n\n\tset(key: K, value: V, touch: Touch = Touch.None): this {\n\t\tlet item = this._map.get(key);\n\t\tif (item) {\n\t\t\titem.value = value;\n\t\t\tif (touch !== Touch.None) {\n\t\t\t\tthis.touch(item, touch);\n\t\t\t}\n\t\t} else {\n\t\t\titem = { key, value, next: undefined, previous: undefined };\n\t\t\tswitch (touch) {\n\t\t\t\tcase Touch.None:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.AsOld:\n\t\t\t\t\tthis.addItemFirst(item);\n\t\t\t\t\tbreak;\n\t\t\t\tcase Touch.AsNew:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis.addItemLast(item);\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t\tthis._map.set(key, item);\n\t\t\tthis._size++;\n\t\t}\n\t\treturn this;\n\t}\n\n\tdelete(key: K): boolean {\n\t\treturn !!this.remove(key);\n\t}\n\n\tremove(key: K): V | undefined {\n\t\tconst item = this._map.get(key);\n\t\tif (!item) {\n\t\t\treturn undefined;\n\t\t}\n\t\tthis._map.delete(key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tshift(): V | undefined {\n\t\tif (!this._head && !this._tail) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tconst item = this._head;\n\t\tthis._map.delete(item.key);\n\t\tthis.removeItem(item);\n\t\tthis._size--;\n\t\treturn item.value;\n\t}\n\n\tforEach(callbackfn: (value: V, key: K, map: LinkedMap<K, V>) => void, thisArg?: any): void {\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\twhile (current) {\n\t\t\tif (thisArg) {\n\t\t\t\tcallbackfn.bind(thisArg)(current.value, current.key, this);\n\t\t\t} else {\n\t\t\t\tcallbackfn(current.value, current.key, this);\n\t\t\t}\n\t\t\tif (this._state !== state) {\n\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t}\n\t\t\tcurrent = current.next;\n\t\t}\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<K> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<K> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.key, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<V> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<V> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result = { value: current.value, done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\tentries(): IterableIterator<[K, V]> {\n\t\tconst map = this;\n\t\tconst state = this._state;\n\t\tlet current = this._head;\n\t\tconst iterator: IterableIterator<[K, V]> = {\n\t\t\t[Symbol.iterator]() {\n\t\t\t\treturn iterator;\n\t\t\t},\n\t\t\tnext(): IteratorResult<[K, V]> {\n\t\t\t\tif (map._state !== state) {\n\t\t\t\t\tthrow new Error(`LinkedMap got modified during iteration.`);\n\t\t\t\t}\n\t\t\t\tif (current) {\n\t\t\t\t\tconst result: IteratorResult<[K, V]> = { value: [current.key, current.value], done: false };\n\t\t\t\t\tcurrent = current.next;\n\t\t\t\t\treturn result;\n\t\t\t\t} else {\n\t\t\t\t\treturn { value: undefined, done: true };\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\treturn iterator;\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this.entries();\n\t}\n\n\tprotected trimOld(newSize: number) {\n\t\tif (newSize >= this.size) {\n\t\t\treturn;\n\t\t}\n\t\tif (newSize === 0) {\n\t\t\tthis.clear();\n\t\t\treturn;\n\t\t}\n\t\tlet current = this._head;\n\t\tlet currentSize = this.size;\n\t\twhile (current && currentSize > newSize) {\n\t\t\tthis._map.delete(current.key);\n\t\t\tcurrent = current.next;\n\t\t\tcurrentSize--;\n\t\t}\n\t\tthis._head = current;\n\t\tthis._size = currentSize;\n\t\tif (current) {\n\t\t\tcurrent.previous = undefined;\n\t\t}\n\t\tthis._state++;\n\t}\n\n\tprivate addItemFirst(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._tail = item;\n\t\t} else if (!this._head) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t}\n\t\tthis._head = item;\n\t\tthis._state++;\n\t}\n\n\tprivate addItemLast(item: Item<K, V>): void {\n\t\t// First time Insert\n\t\tif (!this._head && !this._tail) {\n\t\t\tthis._head = item;\n\t\t} else if (!this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t} else {\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t}\n\t\tthis._tail = item;\n\t\tthis._state++;\n\t}\n\n\tprivate removeItem(item: Item<K, V>): void {\n\t\tif (item === this._head && item === this._tail) {\n\t\t\tthis._head = undefined;\n\t\t\tthis._tail = undefined;\n\t\t}\n\t\telse if (item === this._head) {\n\t\t\t// This can only happen if size === 1 which is handled\n\t\t\t// by the case above.\n\t\t\tif (!item.next) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.next.previous = undefined;\n\t\t\tthis._head = item.next;\n\t\t}\n\t\telse if (item === this._tail) {\n\t\t\t// This can only happen if size === 1 which is handled\n\t\t\t// by the case above.\n\t\t\tif (!item.previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\titem.previous.next = undefined;\n\t\t\tthis._tail = item.previous;\n\t\t}\n\t\telse {\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\t\t\tif (!next || !previous) {\n\t\t\t\tthrow new Error('Invalid list');\n\t\t\t}\n\t\t\tnext.previous = previous;\n\t\t\tprevious.next = next;\n\t\t}\n\t\titem.next = undefined;\n\t\titem.previous = undefined;\n\t\tthis._state++;\n\t}\n\n\tprivate touch(item: Item<K, V>, touch: Touch): void {\n\t\tif (!this._head || !this._tail) {\n\t\t\tthrow new Error('Invalid list');\n\t\t}\n\t\tif ((touch !== Touch.AsOld && touch !== Touch.AsNew)) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (touch === Touch.AsOld) {\n\t\t\tif (item === this._head) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item\n\t\t\tif (item === this._tail) {\n\t\t\t\t// previous must be defined since item was not head but is tail\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tprevious!.next = undefined;\n\t\t\t\tthis._tail = previous;\n\t\t\t}\n\t\t\telse {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\n\t\t\t// Insert the node at head\n\t\t\titem.previous = undefined;\n\t\t\titem.next = this._head;\n\t\t\tthis._head.previous = item;\n\t\t\tthis._head = item;\n\t\t\tthis._state++;\n\t\t} else if (touch === Touch.AsNew) {\n\t\t\tif (item === this._tail) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tconst next = item.next;\n\t\t\tconst previous = item.previous;\n\n\t\t\t// Unlink the item.\n\t\t\tif (item === this._head) {\n\t\t\t\t// next must be defined since item was not tail but is head\n\t\t\t\t// So there are more than on item in the map\n\t\t\t\tnext!.previous = undefined;\n\t\t\t\tthis._head = next;\n\t\t\t} else {\n\t\t\t\t// Both next and previous are not undefined since item was neither head nor tail.\n\t\t\t\tnext!.previous = previous;\n\t\t\t\tprevious!.next = next;\n\t\t\t}\n\t\t\titem.next = undefined;\n\t\t\titem.previous = this._tail;\n\t\t\tthis._tail.next = item;\n\t\t\tthis._tail = item;\n\t\t\tthis._state++;\n\t\t}\n\t}\n\n\ttoJSON(): [K, V][] {\n\t\tconst data: [K, V][] = [];\n\n\t\tthis.forEach((value, key) => {\n\t\t\tdata.push([key, value]);\n\t\t});\n\n\t\treturn data;\n\t}\n\n\tfromJSON(data: [K, V][]): void {\n\t\tthis.clear();\n\n\t\tfor (const [key, value] of data) {\n\t\t\tthis.set(key, value);\n\t\t}\n\t}\n}\n\nexport class LRUCache<K, V> extends LinkedMap<K, V> {\n\n\tprivate _limit: number;\n\tprivate _ratio: number;\n\n\tconstructor(limit: number, ratio: number = 1) {\n\t\tsuper();\n\t\tthis._limit = limit;\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t}\n\n\tget limit(): number {\n\t\treturn this._limit;\n\t}\n\n\tset limit(limit: number) {\n\t\tthis._limit = limit;\n\t\tthis.checkTrim();\n\t}\n\n\tget ratio(): number {\n\t\treturn this._ratio;\n\t}\n\n\tset ratio(ratio: number) {\n\t\tthis._ratio = Math.min(Math.max(0, ratio), 1);\n\t\tthis.checkTrim();\n\t}\n\n\toverride get(key: K, touch: Touch = Touch.AsNew): V | undefined {\n\t\treturn super.get(key, touch);\n\t}\n\n\tpeek(key: K): V | undefined {\n\t\treturn super.get(key, Touch.None);\n\t}\n\n\toverride set(key: K, value: V): this {\n\t\tsuper.set(key, value, Touch.AsNew);\n\t\tthis.checkTrim();\n\t\treturn this;\n\t}\n\n\tprivate checkTrim() {\n\t\tif (this.size > this._limit) {\n\t\t\tthis.trimOld(Math.round(this._limit * this._ratio));\n\t\t}\n\t}\n}\n\n/**\n * Wraps the map in type that only implements readonly properties. Useful\n * in the extension host to prevent the consumer from making any mutations.\n */\nexport class ReadonlyMapView<K, V> implements ReadonlyMap<K, V>{\n\treadonly #source: ReadonlyMap<K, V>;\n\n\tpublic get size() {\n\t\treturn this.#source.size;\n\t}\n\n\tconstructor(source: ReadonlyMap<K, V>) {\n\t\tthis.#source = source;\n\t}\n\n\tforEach(callbackfn: (value: V, key: K, map: ReadonlyMap<K, V>) => void, thisArg?: any): void {\n\t\tthis.#source.forEach(callbackfn, thisArg);\n\t}\n\n\tget(key: K): V | undefined {\n\t\treturn this.#source.get(key);\n\t}\n\n\thas(key: K): boolean {\n\t\treturn this.#source.has(key);\n\t}\n\n\tentries(): IterableIterator<[K, V]> {\n\t\treturn this.#source.entries();\n\t}\n\n\tkeys(): IterableIterator<K> {\n\t\treturn this.#source.keys();\n\t}\n\n\tvalues(): IterableIterator<V> {\n\t\treturn this.#source.values();\n\t}\n\n\t[Symbol.iterator](): IterableIterator<[K, V]> {\n\t\treturn this.#source.entries();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as platform from './platform';\nimport { URI } from './uri';\n\nexport namespace Schemas {\n\n\t/**\n\t * A schema that is used for models that exist in memory\n\t * only and that have no correspondence on a server or such.\n\t */\n\texport const inMemory = 'inmemory';\n\n\t/**\n\t * A schema that is used for setting files\n\t */\n\texport const vscode = 'vscode';\n\n\t/**\n\t * A schema that is used for internal private files\n\t */\n\texport const internal = 'private';\n\n\t/**\n\t * A walk-through document.\n\t */\n\texport const walkThrough = 'walkThrough';\n\n\t/**\n\t * An embedded code snippet.\n\t */\n\texport const walkThroughSnippet = 'walkThroughSnippet';\n\n\texport const http = 'http';\n\n\texport const https = 'https';\n\n\texport const file = 'file';\n\n\texport const mailto = 'mailto';\n\n\texport const untitled = 'untitled';\n\n\texport const data = 'data';\n\n\texport const command = 'command';\n\n\texport const vscodeRemote = 'vscode-remote';\n\n\texport const vscodeRemoteResource = 'vscode-remote-resource';\n\n\texport const vscodeUserData = 'vscode-userdata';\n\n\texport const vscodeCustomEditor = 'vscode-custom-editor';\n\n\texport const vscodeNotebook = 'vscode-notebook';\n\n\texport const vscodeNotebookCell = 'vscode-notebook-cell';\n\n\texport const vscodeNotebookCellMetadata = 'vscode-notebook-cell-metadata';\n\texport const vscodeNotebookCellOutput = 'vscode-notebook-cell-output';\n\texport const vscodeInteractive = 'vscode-interactive';\n\texport const vscodeInteractiveInput = 'vscode-interactive-input';\n\n\texport const vscodeSettings = 'vscode-settings';\n\n\texport const vscodeWorkspaceTrust = 'vscode-workspace-trust';\n\n\texport const vscodeTerminal = 'vscode-terminal';\n\n\t/**\n\t * Scheme used internally for webviews that aren't linked to a resource (i.e. not custom editors)\n\t */\n\texport const webviewPanel = 'webview-panel';\n\n\t/**\n\t * Scheme used for loading the wrapper html and script in webviews.\n\t */\n\texport const vscodeWebview = 'vscode-webview';\n\n\t/**\n\t * Scheme used for extension pages\n\t */\n\texport const extension = 'extension';\n\n\t/**\n\t * Scheme used as a replacement of `file` scheme to load\n\t * files with our custom protocol handler (desktop only).\n\t */\n\texport const vscodeFileResource = 'vscode-file';\n\n\t/**\n\t * Scheme used for temporary resources\n\t */\n\texport const tmp = 'tmp';\n\n\t/**\n\t * Scheme used vs live share\n\t */\n\texport const vsls = 'vsls';\n}\n\nexport const connectionTokenCookieName = 'vscode-tkn';\nexport const connectionTokenQueryName = 'tkn';\n\nclass RemoteAuthoritiesImpl {\n\tprivate readonly _hosts: { [authority: string]: string | undefined } = Object.create(null);\n\tprivate readonly _ports: { [authority: string]: number | undefined } = Object.create(null);\n\tprivate readonly _connectionTokens: { [authority: string]: string | undefined } = Object.create(null);\n\tprivate _preferredWebSchema: 'http' | 'https' = 'http';\n\tprivate _delegate: ((uri: URI) => URI) | null = null;\n\n\tsetPreferredWebSchema(schema: 'http' | 'https') {\n\t\tthis._preferredWebSchema = schema;\n\t}\n\n\tsetDelegate(delegate: (uri: URI) => URI): void {\n\t\tthis._delegate = delegate;\n\t}\n\n\tset(authority: string, host: string, port: number): void {\n\t\tthis._hosts[authority] = host;\n\t\tthis._ports[authority] = port;\n\t}\n\n\tsetConnectionToken(authority: string, connectionToken: string): void {\n\t\tthis._connectionTokens[authority] = connectionToken;\n\t}\n\n\tgetPreferredWebSchema(): 'http' | 'https' {\n\t\treturn this._preferredWebSchema;\n\t}\n\n\trewrite(uri: URI): URI {\n\t\tif (this._delegate) {\n\t\t\treturn this._delegate(uri);\n\t\t}\n\t\tconst authority = uri.authority;\n\t\tlet host = this._hosts[authority];\n\t\tif (host && host.indexOf(':') !== -1) {\n\t\t\thost = `[${host}]`;\n\t\t}\n\t\tconst port = this._ports[authority];\n\t\tconst connectionToken = this._connectionTokens[authority];\n\t\tlet query = `path=${encodeURIComponent(uri.path)}`;\n\t\tif (typeof connectionToken === 'string') {\n\t\t\tquery += `&${connectionTokenQueryName}=${encodeURIComponent(connectionToken)}`;\n\t\t}\n\t\treturn URI.from({\n\t\t\tscheme: platform.isWeb ? this._preferredWebSchema : Schemas.vscodeRemoteResource,\n\t\t\tauthority: `${host}:${port}`,\n\t\t\tpath: `/vscode-remote-resource`,\n\t\t\tquery\n\t\t});\n\t}\n}\n\nexport const RemoteAuthorities = new RemoteAuthoritiesImpl();\n\nclass FileAccessImpl {\n\n\tprivate static readonly FALLBACK_AUTHORITY = 'vscode-app';\n\n\t/**\n\t * Returns a URI to use in contexts where the browser is responsible\n\t * for loading (e.g. fetch()) or when used within the DOM.\n\t *\n\t * **Note:** use `dom.ts#asCSSUrl` whenever the URL is to be used in CSS context.\n\t */\n\tasBrowserUri(uri: URI): URI;\n\tasBrowserUri(moduleId: string, moduleIdToUrl: { toUrl(moduleId: string): string }): URI;\n\tasBrowserUri(uriOrModule: URI | string, moduleIdToUrl?: { toUrl(moduleId: string): string }): URI {\n\t\tconst uri = this.toUri(uriOrModule, moduleIdToUrl);\n\n\t\t// Handle remote URIs via `RemoteAuthorities`\n\t\tif (uri.scheme === Schemas.vscodeRemote) {\n\t\t\treturn RemoteAuthorities.rewrite(uri);\n\t\t}\n\n\t\t// Convert to `vscode-file` resource..\n\t\tif (\n\t\t\t// ...only ever for `file` resources\n\t\t\turi.scheme === Schemas.file &&\n\t\t\t(\n\t\t\t\t// ...and we run in native environments\n\t\t\t\tplatform.isNative ||\n\t\t\t\t// ...or web worker extensions on desktop\n\t\t\t\t(platform.isWebWorker && platform.globals.origin === `${Schemas.vscodeFileResource}://${FileAccessImpl.FALLBACK_AUTHORITY}`)\n\t\t\t)\n\t\t) {\n\t\t\treturn uri.with({\n\t\t\t\tscheme: Schemas.vscodeFileResource,\n\t\t\t\t// We need to provide an authority here so that it can serve\n\t\t\t\t// as origin for network and loading matters in chromium.\n\t\t\t\t// If the URI is not coming with an authority already, we\n\t\t\t\t// add our own\n\t\t\t\tauthority: uri.authority || FileAccessImpl.FALLBACK_AUTHORITY,\n\t\t\t\tquery: null,\n\t\t\t\tfragment: null\n\t\t\t});\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\t/**\n\t * Returns the `file` URI to use in contexts where node.js\n\t * is responsible for loading.\n\t */\n\tasFileUri(uri: URI): URI;\n\tasFileUri(moduleId: string, moduleIdToUrl: { toUrl(moduleId: string): string }): URI;\n\tasFileUri(uriOrModule: URI | string, moduleIdToUrl?: { toUrl(moduleId: string): string }): URI {\n\t\tconst uri = this.toUri(uriOrModule, moduleIdToUrl);\n\n\t\t// Only convert the URI if it is `vscode-file:` scheme\n\t\tif (uri.scheme === Schemas.vscodeFileResource) {\n\t\t\treturn uri.with({\n\t\t\t\tscheme: Schemas.file,\n\t\t\t\t// Only preserve the `authority` if it is different from\n\t\t\t\t// our fallback authority. This ensures we properly preserve\n\t\t\t\t// Windows UNC paths that come with their own authority.\n\t\t\t\tauthority: uri.authority !== FileAccessImpl.FALLBACK_AUTHORITY ? uri.authority : null,\n\t\t\t\tquery: null,\n\t\t\t\tfragment: null\n\t\t\t});\n\t\t}\n\n\t\treturn uri;\n\t}\n\n\tprivate toUri(uriOrModule: URI | string, moduleIdToUrl?: { toUrl(moduleId: string): string }): URI {\n\t\tif (URI.isUri(uriOrModule)) {\n\t\t\treturn uriOrModule;\n\t\t}\n\n\t\treturn URI.parse(moduleIdToUrl!.toUrl(uriOrModule));\n\t}\n}\n\nexport const FileAccess = new FileAccessImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { isArray, isTypedArray, isObject, isUndefinedOrNull } from './types';\n\nexport function deepClone<T>(obj: T): T {\n\tif (!obj || typeof obj !== 'object') {\n\t\treturn obj;\n\t}\n\tif (obj instanceof RegExp) {\n\t\t// See https://github.com/microsoft/TypeScript/issues/10990\n\t\treturn obj as any;\n\t}\n\tconst result: any = Array.isArray(obj) ? [] : {};\n\tObject.keys(<any>obj).forEach((key: string) => {\n\t\tif ((<any>obj)[key] && typeof (<any>obj)[key] === 'object') {\n\t\t\tresult[key] = deepClone((<any>obj)[key]);\n\t\t} else {\n\t\t\tresult[key] = (<any>obj)[key];\n\t\t}\n\t});\n\treturn result;\n}\n\nexport function deepFreeze<T>(obj: T): T {\n\tif (!obj || typeof obj !== 'object') {\n\t\treturn obj;\n\t}\n\tconst stack: any[] = [obj];\n\twhile (stack.length > 0) {\n\t\tconst obj = stack.shift();\n\t\tObject.freeze(obj);\n\t\tfor (const key in obj) {\n\t\t\tif (_hasOwnProperty.call(obj, key)) {\n\t\t\t\tconst prop = obj[key];\n\t\t\t\tif (typeof prop === 'object' && !Object.isFrozen(prop) && !isTypedArray(prop)) {\n\t\t\t\t\tstack.push(prop);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn obj;\n}\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n\treturn _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n\tif (isUndefinedOrNull(obj)) {\n\t\treturn obj;\n\t}\n\n\tconst changed = changer(obj);\n\tif (typeof changed !== 'undefined') {\n\t\treturn changed;\n\t}\n\n\tif (isArray(obj)) {\n\t\tconst r1: any[] = [];\n\t\tfor (const e of obj) {\n\t\t\tr1.push(_cloneAndChange(e, changer, seen));\n\t\t}\n\t\treturn r1;\n\t}\n\n\tif (isObject(obj)) {\n\t\tif (seen.has(obj)) {\n\t\t\tthrow new Error('Cannot clone recursive data-structure');\n\t\t}\n\t\tseen.add(obj);\n\t\tconst r2 = {};\n\t\tfor (let i2 in obj) {\n\t\t\tif (_hasOwnProperty.call(obj, i2)) {\n\t\t\t\t(r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n\t\t\t}\n\t\t}\n\t\tseen.delete(obj);\n\t\treturn r2;\n\t}\n\n\treturn obj;\n}\n\n/**\n * Copies all properties of source into destination. The optional parameter \"overwrite\" allows to control\n * if existing properties on the destination should be overwritten or not. Defaults to true (overwrite).\n */\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n\tif (!isObject(destination)) {\n\t\treturn source;\n\t}\n\n\tif (isObject(source)) {\n\t\tObject.keys(source).forEach(key => {\n\t\t\tif (key in destination) {\n\t\t\t\tif (overwrite) {\n\t\t\t\t\tif (isObject(destination[key]) && isObject(source[key])) {\n\t\t\t\t\t\tmixin(destination[key], source[key], overwrite);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdestination[key] = source[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tdestination[key] = source[key];\n\t\t\t}\n\t\t});\n\t}\n\treturn destination;\n}\n\nexport function equals(one: any, other: any): boolean {\n\tif (one === other) {\n\t\treturn true;\n\t}\n\tif (one === null || one === undefined || other === null || other === undefined) {\n\t\treturn false;\n\t}\n\tif (typeof one !== typeof other) {\n\t\treturn false;\n\t}\n\tif (typeof one !== 'object') {\n\t\treturn false;\n\t}\n\tif ((Array.isArray(one)) !== (Array.isArray(other))) {\n\t\treturn false;\n\t}\n\n\tlet i: number;\n\tlet key: string;\n\n\tif (Array.isArray(one)) {\n\t\tif (one.length !== other.length) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < one.length; i++) {\n\t\t\tif (!equals(one[i], other[i])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t} else {\n\t\tconst oneKeys: string[] = [];\n\n\t\tfor (key in one) {\n\t\t\toneKeys.push(key);\n\t\t}\n\t\toneKeys.sort();\n\t\tconst otherKeys: string[] = [];\n\t\tfor (key in other) {\n\t\t\totherKeys.push(key);\n\t\t}\n\t\totherKeys.sort();\n\t\tif (!equals(oneKeys, otherKeys)) {\n\t\t\treturn false;\n\t\t}\n\t\tfor (i = 0; i < oneKeys.length; i++) {\n\t\t\tif (!equals(one[oneKeys[i]], other[oneKeys[i]])) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t}\n\treturn true;\n}\n\n/**\n * Calls `JSON.Stringify` with a replacer to break apart any circular references.\n * This prevents `JSON`.stringify` from throwing the exception\n *  \"Uncaught TypeError: Converting circular structure to JSON\"\n */\nexport function safeStringify(obj: any): string {\n\tconst seen = new Set<any>();\n\treturn JSON.stringify(obj, (key, value) => {\n\t\tif (isObject(value) || Array.isArray(value)) {\n\t\t\tif (seen.has(value)) {\n\t\t\t\treturn '[Circular]';\n\t\t\t} else {\n\t\t\t\tseen.add(value);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t});\n}\n\nexport function getOrDefault<T, R>(obj: T, fn: (obj: T) => R | undefined, defaultValue: R): R {\n\tconst result = fn(obj);\n\treturn typeof result === 'undefined' ? defaultValue : result;\n}\n\ntype obj = { [key: string]: any };\n/**\n * Returns an object that has keys for each value that is different in the base object. Keys\n * that do not exist in the target but in the base object are not considered.\n *\n * Note: This is not a deep-diffing method, so the values are strictly taken into the resulting\n * object if they differ.\n *\n * @param base the object to diff against\n * @param obj the object to use for diffing\n */\nexport function distinct(base: obj, target: obj): obj {\n\tconst result = Object.create(null);\n\n\tif (!base || !target) {\n\t\treturn result;\n\t}\n\n\tconst targetKeys = Object.keys(target);\n\ttargetKeys.forEach(k => {\n\t\tconst baseValue = base[k];\n\t\tconst targetValue = target[k];\n\n\t\tif (!equals(baseValue, targetValue)) {\n\t\t\tresult[k] = targetValue;\n\t\t}\n\t});\n\n\treturn result;\n}\n\nexport function getCaseInsensitive(target: obj, key: string): any {\n\tconst lowercaseKey = key.toLowerCase();\n\tconst equivalentKey = Object.keys(target).find(k => k.toLowerCase() === lowercaseKey);\n\treturn equivalentKey ? target[equivalentKey] : target[key];\n}\n\nexport function filter(obj: obj, predicate: (key: string, value: any) => boolean): obj {\n\tconst result = Object.create(null);\n\tfor (const [key, value] of Object.entries(obj)) {\n\t\tif (predicate(key, value)) {\n\t\t\tresult[key] = value;\n\t\t}\n\t}\n\treturn result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// NOTE: VSCode's copy of nodejs path library to be usable in common (non-node) namespace\n// Copied from: https://github.com/nodejs/node/blob/v14.16.0/lib/path.js\n\n/**\n * Copyright Joyent, Inc. and other Node contributors.\n *\n * Permission is hereby granted, free of charge, to any person obtaining a\n * copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to permit\n * persons to whom the Software is furnished to do so, subject to the\n * following conditions:\n *\n * The above copyright notice and this permission notice shall be included\n * in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n * NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n * DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n * OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n * USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\nimport * as process from './process';\n\nconst CHAR_UPPERCASE_A = 65;/* A */\nconst CHAR_LOWERCASE_A = 97; /* a */\nconst CHAR_UPPERCASE_Z = 90; /* Z */\nconst CHAR_LOWERCASE_Z = 122; /* z */\nconst CHAR_DOT = 46; /* . */\nconst CHAR_FORWARD_SLASH = 47; /* / */\nconst CHAR_BACKWARD_SLASH = 92; /* \\ */\nconst CHAR_COLON = 58; /* : */\nconst CHAR_QUESTION_MARK = 63; /* ? */\n\nclass ErrorInvalidArgType extends Error {\n\tcode: 'ERR_INVALID_ARG_TYPE';\n\tconstructor(name: string, expected: string, actual: unknown) {\n\t\t// determiner: 'must be' or 'must not be'\n\t\tlet determiner;\n\t\tif (typeof expected === 'string' && expected.indexOf('not ') === 0) {\n\t\t\tdeterminer = 'must not be';\n\t\t\texpected = expected.replace(/^not /, '');\n\t\t} else {\n\t\t\tdeterminer = 'must be';\n\t\t}\n\n\t\tconst type = name.indexOf('.') !== -1 ? 'property' : 'argument';\n\t\tlet msg = `The \"${name}\" ${type} ${determiner} of type ${expected}`;\n\n\t\tmsg += `. Received type ${typeof actual}`;\n\t\tsuper(msg);\n\n\t\tthis.code = 'ERR_INVALID_ARG_TYPE';\n\t}\n}\n\nfunction validateString(value: string, name: string) {\n\tif (typeof value !== 'string') {\n\t\tthrow new ErrorInvalidArgType(name, 'string', value);\n\t}\n}\n\nfunction isPathSeparator(code: number | undefined) {\n\treturn code === CHAR_FORWARD_SLASH || code === CHAR_BACKWARD_SLASH;\n}\n\nfunction isPosixPathSeparator(code: number | undefined) {\n\treturn code === CHAR_FORWARD_SLASH;\n}\n\nfunction isWindowsDeviceRoot(code: number) {\n\treturn (code >= CHAR_UPPERCASE_A && code <= CHAR_UPPERCASE_Z) ||\n\t\t(code >= CHAR_LOWERCASE_A && code <= CHAR_LOWERCASE_Z);\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeString(path: string, allowAboveRoot: boolean, separator: string, isPathSeparator: (code?: number) => boolean) {\n\tlet res = '';\n\tlet lastSegmentLength = 0;\n\tlet lastSlash = -1;\n\tlet dots = 0;\n\tlet code = 0;\n\tfor (let i = 0; i <= path.length; ++i) {\n\t\tif (i < path.length) {\n\t\t\tcode = path.charCodeAt(i);\n\t\t}\n\t\telse if (isPathSeparator(code)) {\n\t\t\tbreak;\n\t\t}\n\t\telse {\n\t\t\tcode = CHAR_FORWARD_SLASH;\n\t\t}\n\n\t\tif (isPathSeparator(code)) {\n\t\t\tif (lastSlash === i - 1 || dots === 1) {\n\t\t\t\t// NOOP\n\t\t\t} else if (dots === 2) {\n\t\t\t\tif (res.length < 2 || lastSegmentLength !== 2 ||\n\t\t\t\t\tres.charCodeAt(res.length - 1) !== CHAR_DOT ||\n\t\t\t\t\tres.charCodeAt(res.length - 2) !== CHAR_DOT) {\n\t\t\t\t\tif (res.length > 2) {\n\t\t\t\t\t\tconst lastSlashIndex = res.lastIndexOf(separator);\n\t\t\t\t\t\tif (lastSlashIndex === -1) {\n\t\t\t\t\t\t\tres = '';\n\t\t\t\t\t\t\tlastSegmentLength = 0;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tres = res.slice(0, lastSlashIndex);\n\t\t\t\t\t\t\tlastSegmentLength = res.length - 1 - res.lastIndexOf(separator);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlastSlash = i;\n\t\t\t\t\t\tdots = 0;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else if (res.length !== 0) {\n\t\t\t\t\t\tres = '';\n\t\t\t\t\t\tlastSegmentLength = 0;\n\t\t\t\t\t\tlastSlash = i;\n\t\t\t\t\t\tdots = 0;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (allowAboveRoot) {\n\t\t\t\t\tres += res.length > 0 ? `${separator}..` : '..';\n\t\t\t\t\tlastSegmentLength = 2;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (res.length > 0) {\n\t\t\t\t\tres += `${separator}${path.slice(lastSlash + 1, i)}`;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tres = path.slice(lastSlash + 1, i);\n\t\t\t\t}\n\t\t\t\tlastSegmentLength = i - lastSlash - 1;\n\t\t\t}\n\t\t\tlastSlash = i;\n\t\t\tdots = 0;\n\t\t} else if (code === CHAR_DOT && dots !== -1) {\n\t\t\t++dots;\n\t\t} else {\n\t\t\tdots = -1;\n\t\t}\n\t}\n\treturn res;\n}\n\nfunction _format(sep: string, pathObject: ParsedPath) {\n\tif (pathObject === null || typeof pathObject !== 'object') {\n\t\tthrow new ErrorInvalidArgType('pathObject', 'Object', pathObject);\n\t}\n\tconst dir = pathObject.dir || pathObject.root;\n\tconst base = pathObject.base ||\n\t\t`${pathObject.name || ''}${pathObject.ext || ''}`;\n\tif (!dir) {\n\t\treturn base;\n\t}\n\treturn dir === pathObject.root ? `${dir}${base}` : `${dir}${sep}${base}`;\n}\n\nexport interface ParsedPath {\n\troot: string;\n\tdir: string;\n\tbase: string;\n\text: string;\n\tname: string;\n}\n\nexport interface IPath {\n\tnormalize(path: string): string;\n\tisAbsolute(path: string): boolean;\n\tjoin(...paths: string[]): string;\n\tresolve(...pathSegments: string[]): string;\n\trelative(from: string, to: string): string;\n\tdirname(path: string): string;\n\tbasename(path: string, ext?: string): string;\n\textname(path: string): string;\n\tformat(pathObject: ParsedPath): string;\n\tparse(path: string): ParsedPath;\n\ttoNamespacedPath(path: string): string;\n\tsep: '\\\\' | '/';\n\tdelimiter: string;\n\twin32: IPath | null;\n\tposix: IPath | null;\n}\n\nexport const win32: IPath = {\n\t// path.resolve([from ...], to)\n\tresolve(...pathSegments: string[]): string {\n\t\tlet resolvedDevice = '';\n\t\tlet resolvedTail = '';\n\t\tlet resolvedAbsolute = false;\n\n\t\tfor (let i = pathSegments.length - 1; i >= -1; i--) {\n\t\t\tlet path;\n\t\t\tif (i >= 0) {\n\t\t\t\tpath = pathSegments[i];\n\t\t\t\tvalidateString(path, 'path');\n\n\t\t\t\t// Skip empty entries\n\t\t\t\tif (path.length === 0) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t} else if (resolvedDevice.length === 0) {\n\t\t\t\tpath = process.cwd();\n\t\t\t} else {\n\t\t\t\t// Windows has the concept of drive-specific current working\n\t\t\t\t// directories. If we've resolved a drive letter but not yet an\n\t\t\t\t// absolute path, get cwd for that drive, or the process cwd if\n\t\t\t\t// the drive cwd is not available. We're sure the device is not\n\t\t\t\t// a UNC path at this points, because UNC paths are always absolute.\n\t\t\t\tpath = process.env[`=${resolvedDevice}`] || process.cwd();\n\n\t\t\t\t// Verify that a cwd was found and that it actually points\n\t\t\t\t// to our drive. If not, default to the drive's root.\n\t\t\t\tif (path === undefined ||\n\t\t\t\t\t(path.slice(0, 2).toLowerCase() !== resolvedDevice.toLowerCase() &&\n\t\t\t\t\t\tpath.charCodeAt(2) === CHAR_BACKWARD_SLASH)) {\n\t\t\t\t\tpath = `${resolvedDevice}\\\\`;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst len = path.length;\n\t\t\tlet rootEnd = 0;\n\t\t\tlet device = '';\n\t\t\tlet isAbsolute = false;\n\t\t\tconst code = path.charCodeAt(0);\n\n\t\t\t// Try to match a root\n\t\t\tif (len === 1) {\n\t\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t\t// `path` contains just a path separator\n\t\t\t\t\trootEnd = 1;\n\t\t\t\t\tisAbsolute = true;\n\t\t\t\t}\n\t\t\t} else if (isPathSeparator(code)) {\n\t\t\t\t// Possible UNC root\n\n\t\t\t\t// If we started with a separator, we know we at least have an\n\t\t\t\t// absolute path of some kind (UNC or otherwise)\n\t\t\t\tisAbsolute = true;\n\n\t\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t\t// Matched double path separator at beginning\n\t\t\t\t\tlet j = 2;\n\t\t\t\t\tlet last = j;\n\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\tconst firstPart = path.slice(last, j);\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (j === len || j !== last) {\n\t\t\t\t\t\t\t\t// We matched a UNC root\n\t\t\t\t\t\t\t\tdevice = `\\\\\\\\${firstPart}\\\\${path.slice(last, j)}`;\n\t\t\t\t\t\t\t\trootEnd = j;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\trootEnd = 1;\n\t\t\t\t}\n\t\t\t} else if (isWindowsDeviceRoot(code) &&\n\t\t\t\tpath.charCodeAt(1) === CHAR_COLON) {\n\t\t\t\t// Possible device root\n\t\t\t\tdevice = path.slice(0, 2);\n\t\t\t\trootEnd = 2;\n\t\t\t\tif (len > 2 && isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\t\t// Treat separator following drive name as an absolute path\n\t\t\t\t\t// indicator\n\t\t\t\t\tisAbsolute = true;\n\t\t\t\t\trootEnd = 3;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (device.length > 0) {\n\t\t\t\tif (resolvedDevice.length > 0) {\n\t\t\t\t\tif (device.toLowerCase() !== resolvedDevice.toLowerCase()) {\n\t\t\t\t\t\t// This path points to another device so it is not applicable\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tresolvedDevice = device;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (resolvedAbsolute) {\n\t\t\t\tif (resolvedDevice.length > 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolvedTail = `${path.slice(rootEnd)}\\\\${resolvedTail}`;\n\t\t\t\tresolvedAbsolute = isAbsolute;\n\t\t\t\tif (isAbsolute && resolvedDevice.length > 0) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t// At this point the path should be resolved to a full absolute path,\n\t\t// but handle relative paths to be safe (might happen when process.cwd()\n\t\t// fails)\n\n\t\t// Normalize the tail path\n\t\tresolvedTail = normalizeString(resolvedTail, !resolvedAbsolute, '\\\\',\n\t\t\tisPathSeparator);\n\n\t\treturn resolvedAbsolute ?\n\t\t\t`${resolvedDevice}\\\\${resolvedTail}` :\n\t\t\t`${resolvedDevice}${resolvedTail}` || '.';\n\t},\n\n\tnormalize(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tconst len = path.length;\n\t\tif (len === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tlet rootEnd = 0;\n\t\tlet device;\n\t\tlet isAbsolute = false;\n\t\tconst code = path.charCodeAt(0);\n\n\t\t// Try to match a root\n\t\tif (len === 1) {\n\t\t\t// `path` contains just a single char, exit early to avoid\n\t\t\t// unnecessary work\n\t\t\treturn isPosixPathSeparator(code) ? '\\\\' : path;\n\t\t}\n\t\tif (isPathSeparator(code)) {\n\t\t\t// Possible UNC root\n\n\t\t\t// If we started with a separator, we know we at least have an absolute\n\t\t\t// path of some kind (UNC or otherwise)\n\t\t\tisAbsolute = true;\n\n\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t// Matched double path separator at beginning\n\t\t\t\tlet j = 2;\n\t\t\t\tlet last = j;\n\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\tconst firstPart = path.slice(last, j);\n\t\t\t\t\t// Matched!\n\t\t\t\t\tlast = j;\n\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === len) {\n\t\t\t\t\t\t\t// We matched a UNC root only\n\t\t\t\t\t\t\t// Return the normalized version of the UNC root since there\n\t\t\t\t\t\t\t// is nothing left to process\n\t\t\t\t\t\t\treturn `\\\\\\\\${firstPart}\\\\${path.slice(last)}\\\\`;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j !== last) {\n\t\t\t\t\t\t\t// We matched a UNC root with leftovers\n\t\t\t\t\t\t\tdevice = `\\\\\\\\${firstPart}\\\\${path.slice(last, j)}`;\n\t\t\t\t\t\t\trootEnd = j;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\trootEnd = 1;\n\t\t\t}\n\t\t} else if (isWindowsDeviceRoot(code) && path.charCodeAt(1) === CHAR_COLON) {\n\t\t\t// Possible device root\n\t\t\tdevice = path.slice(0, 2);\n\t\t\trootEnd = 2;\n\t\t\tif (len > 2 && isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\t// Treat separator following drive name as an absolute path\n\t\t\t\t// indicator\n\t\t\t\tisAbsolute = true;\n\t\t\t\trootEnd = 3;\n\t\t\t}\n\t\t}\n\n\t\tlet tail = rootEnd < len ?\n\t\t\tnormalizeString(path.slice(rootEnd), !isAbsolute, '\\\\', isPathSeparator) :\n\t\t\t'';\n\t\tif (tail.length === 0 && !isAbsolute) {\n\t\t\ttail = '.';\n\t\t}\n\t\tif (tail.length > 0 && isPathSeparator(path.charCodeAt(len - 1))) {\n\t\t\ttail += '\\\\';\n\t\t}\n\t\tif (device === undefined) {\n\t\t\treturn isAbsolute ? `\\\\${tail}` : tail;\n\t\t}\n\t\treturn isAbsolute ? `${device}\\\\${tail}` : `${device}${tail}`;\n\t},\n\n\tisAbsolute(path: string): boolean {\n\t\tvalidateString(path, 'path');\n\t\tconst len = path.length;\n\t\tif (len === 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tconst code = path.charCodeAt(0);\n\t\treturn isPathSeparator(code) ||\n\t\t\t// Possible device root\n\t\t\t(len > 2 &&\n\t\t\t\tisWindowsDeviceRoot(code) &&\n\t\t\t\tpath.charCodeAt(1) === CHAR_COLON &&\n\t\t\t\tisPathSeparator(path.charCodeAt(2)));\n\t},\n\n\tjoin(...paths: string[]): string {\n\t\tif (paths.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\n\t\tlet joined;\n\t\tlet firstPart: string | undefined;\n\t\tfor (let i = 0; i < paths.length; ++i) {\n\t\t\tconst arg = paths[i];\n\t\t\tvalidateString(arg, 'path');\n\t\t\tif (arg.length > 0) {\n\t\t\t\tif (joined === undefined) {\n\t\t\t\t\tjoined = firstPart = arg;\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tjoined += `\\\\${arg}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (joined === undefined) {\n\t\t\treturn '.';\n\t\t}\n\n\t\t// Make sure that the joined path doesn't start with two slashes, because\n\t\t// normalize() will mistake it for a UNC path then.\n\t\t//\n\t\t// This step is skipped when it is very clear that the user actually\n\t\t// intended to point at a UNC path. This is assumed when the first\n\t\t// non-empty string arguments starts with exactly two slashes followed by\n\t\t// at least one more non-slash character.\n\t\t//\n\t\t// Note that for normalize() to treat a path as a UNC path it needs to\n\t\t// have at least 2 components, so we don't filter for that here.\n\t\t// This means that the user can use join to construct UNC paths from\n\t\t// a server name and a share name; for example:\n\t\t//   path.join('//server', 'share') -> '\\\\\\\\server\\\\share\\\\')\n\t\tlet needsReplace = true;\n\t\tlet slashCount = 0;\n\t\tif (typeof firstPart === 'string' && isPathSeparator(firstPart.charCodeAt(0))) {\n\t\t\t++slashCount;\n\t\t\tconst firstLen = firstPart.length;\n\t\t\tif (firstLen > 1 && isPathSeparator(firstPart.charCodeAt(1))) {\n\t\t\t\t++slashCount;\n\t\t\t\tif (firstLen > 2) {\n\t\t\t\t\tif (isPathSeparator(firstPart.charCodeAt(2))) {\n\t\t\t\t\t\t++slashCount;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// We matched a UNC path in the first part\n\t\t\t\t\t\tneedsReplace = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (needsReplace) {\n\t\t\t// Find any more consecutive slashes we need to replace\n\t\t\twhile (slashCount < joined.length &&\n\t\t\t\tisPathSeparator(joined.charCodeAt(slashCount))) {\n\t\t\t\tslashCount++;\n\t\t\t}\n\n\t\t\t// Replace the slashes if needed\n\t\t\tif (slashCount >= 2) {\n\t\t\t\tjoined = `\\\\${joined.slice(slashCount)}`;\n\t\t\t}\n\t\t}\n\n\t\treturn win32.normalize(joined);\n\t},\n\n\n\t// It will solve the relative path from `from` to `to`, for instance:\n\t//  from = 'C:\\\\orandea\\\\test\\\\aaa'\n\t//  to = 'C:\\\\orandea\\\\impl\\\\bbb'\n\t// The output of the function should be: '..\\\\..\\\\impl\\\\bbb'\n\trelative(from: string, to: string): string {\n\t\tvalidateString(from, 'from');\n\t\tvalidateString(to, 'to');\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromOrig = win32.resolve(from);\n\t\tconst toOrig = win32.resolve(to);\n\n\t\tif (fromOrig === toOrig) {\n\t\t\treturn '';\n\t\t}\n\n\t\tfrom = fromOrig.toLowerCase();\n\t\tto = toOrig.toLowerCase();\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// Trim any leading backslashes\n\t\tlet fromStart = 0;\n\t\twhile (fromStart < from.length &&\n\t\t\tfrom.charCodeAt(fromStart) === CHAR_BACKWARD_SLASH) {\n\t\t\tfromStart++;\n\t\t}\n\t\t// Trim trailing backslashes (applicable to UNC paths only)\n\t\tlet fromEnd = from.length;\n\t\twhile (fromEnd - 1 > fromStart &&\n\t\t\tfrom.charCodeAt(fromEnd - 1) === CHAR_BACKWARD_SLASH) {\n\t\t\tfromEnd--;\n\t\t}\n\t\tconst fromLen = fromEnd - fromStart;\n\n\t\t// Trim any leading backslashes\n\t\tlet toStart = 0;\n\t\twhile (toStart < to.length &&\n\t\t\tto.charCodeAt(toStart) === CHAR_BACKWARD_SLASH) {\n\t\t\ttoStart++;\n\t\t}\n\t\t// Trim trailing backslashes (applicable to UNC paths only)\n\t\tlet toEnd = to.length;\n\t\twhile (toEnd - 1 > toStart &&\n\t\t\tto.charCodeAt(toEnd - 1) === CHAR_BACKWARD_SLASH) {\n\t\t\ttoEnd--;\n\t\t}\n\t\tconst toLen = toEnd - toStart;\n\n\t\t// Compare paths to find the longest common path from root\n\t\tconst length = fromLen < toLen ? fromLen : toLen;\n\t\tlet lastCommonSep = -1;\n\t\tlet i = 0;\n\t\tfor (; i < length; i++) {\n\t\t\tconst fromCode = from.charCodeAt(fromStart + i);\n\t\t\tif (fromCode !== to.charCodeAt(toStart + i)) {\n\t\t\t\tbreak;\n\t\t\t} else if (fromCode === CHAR_BACKWARD_SLASH) {\n\t\t\t\tlastCommonSep = i;\n\t\t\t}\n\t\t}\n\n\t\t// We found a mismatch before the first common path separator was seen, so\n\t\t// return the original `to`.\n\t\tif (i !== length) {\n\t\t\tif (lastCommonSep === -1) {\n\t\t\t\treturn toOrig;\n\t\t\t}\n\t\t} else {\n\t\t\tif (toLen > length) {\n\t\t\t\tif (to.charCodeAt(toStart + i) === CHAR_BACKWARD_SLASH) {\n\t\t\t\t\t// We get here if `from` is the exact base path for `to`.\n\t\t\t\t\t// For example: from='C:\\\\foo\\\\bar'; to='C:\\\\foo\\\\bar\\\\baz'\n\t\t\t\t\treturn toOrig.slice(toStart + i + 1);\n\t\t\t\t}\n\t\t\t\tif (i === 2) {\n\t\t\t\t\t// We get here if `from` is the device root.\n\t\t\t\t\t// For example: from='C:\\\\'; to='C:\\\\foo'\n\t\t\t\t\treturn toOrig.slice(toStart + i);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (fromLen > length) {\n\t\t\t\tif (from.charCodeAt(fromStart + i) === CHAR_BACKWARD_SLASH) {\n\t\t\t\t\t// We get here if `to` is the exact base path for `from`.\n\t\t\t\t\t// For example: from='C:\\\\foo\\\\bar'; to='C:\\\\foo'\n\t\t\t\t\tlastCommonSep = i;\n\t\t\t\t} else if (i === 2) {\n\t\t\t\t\t// We get here if `to` is the device root.\n\t\t\t\t\t// For example: from='C:\\\\foo\\\\bar'; to='C:\\\\'\n\t\t\t\t\tlastCommonSep = 3;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (lastCommonSep === -1) {\n\t\t\t\tlastCommonSep = 0;\n\t\t\t}\n\t\t}\n\n\t\tlet out = '';\n\t\t// Generate the relative path based on the path difference between `to` and\n\t\t// `from`\n\t\tfor (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n\t\t\tif (i === fromEnd || from.charCodeAt(i) === CHAR_BACKWARD_SLASH) {\n\t\t\t\tout += out.length === 0 ? '..' : '\\\\..';\n\t\t\t}\n\t\t}\n\n\t\ttoStart += lastCommonSep;\n\n\t\t// Lastly, append the rest of the destination (`to`) path that comes after\n\t\t// the common path parts\n\t\tif (out.length > 0) {\n\t\t\treturn `${out}${toOrig.slice(toStart, toEnd)}`;\n\t\t}\n\n\t\tif (toOrig.charCodeAt(toStart) === CHAR_BACKWARD_SLASH) {\n\t\t\t++toStart;\n\t\t}\n\n\t\treturn toOrig.slice(toStart, toEnd);\n\t},\n\n\ttoNamespacedPath(path: string): string {\n\t\t// Note: this will *probably* throw somewhere.\n\t\tif (typeof path !== 'string') {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (path.length === 0) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst resolvedPath = win32.resolve(path);\n\n\t\tif (resolvedPath.length <= 2) {\n\t\t\treturn path;\n\t\t}\n\n\t\tif (resolvedPath.charCodeAt(0) === CHAR_BACKWARD_SLASH) {\n\t\t\t// Possible UNC root\n\t\t\tif (resolvedPath.charCodeAt(1) === CHAR_BACKWARD_SLASH) {\n\t\t\t\tconst code = resolvedPath.charCodeAt(2);\n\t\t\t\tif (code !== CHAR_QUESTION_MARK && code !== CHAR_DOT) {\n\t\t\t\t\t// Matched non-long UNC root, convert the path to a long UNC path\n\t\t\t\t\treturn `\\\\\\\\?\\\\UNC\\\\${resolvedPath.slice(2)}`;\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isWindowsDeviceRoot(resolvedPath.charCodeAt(0)) &&\n\t\t\tresolvedPath.charCodeAt(1) === CHAR_COLON &&\n\t\t\tresolvedPath.charCodeAt(2) === CHAR_BACKWARD_SLASH) {\n\t\t\t// Matched device root, convert the path to a long UNC path\n\t\t\treturn `\\\\\\\\?\\\\${resolvedPath}`;\n\t\t}\n\n\t\treturn path;\n\t},\n\n\tdirname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tconst len = path.length;\n\t\tif (len === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tlet rootEnd = -1;\n\t\tlet offset = 0;\n\t\tconst code = path.charCodeAt(0);\n\n\t\tif (len === 1) {\n\t\t\t// `path` contains just a path separator, exit early to avoid\n\t\t\t// unnecessary work or a dot.\n\t\t\treturn isPathSeparator(code) ? path : '.';\n\t\t}\n\n\t\t// Try to match a root\n\t\tif (isPathSeparator(code)) {\n\t\t\t// Possible UNC root\n\n\t\t\trootEnd = offset = 1;\n\n\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t// Matched double path separator at beginning\n\t\t\t\tlet j = 2;\n\t\t\t\tlet last = j;\n\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t// Matched!\n\t\t\t\t\tlast = j;\n\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === len) {\n\t\t\t\t\t\t\t// We matched a UNC root only\n\t\t\t\t\t\t\treturn path;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j !== last) {\n\t\t\t\t\t\t\t// We matched a UNC root with leftovers\n\n\t\t\t\t\t\t\t// Offset by 1 to include the separator after the UNC root to\n\t\t\t\t\t\t\t// treat it as a \"normal root\" on top of a (UNC) root\n\t\t\t\t\t\t\trootEnd = offset = j + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Possible device root\n\t\t} else if (isWindowsDeviceRoot(code) && path.charCodeAt(1) === CHAR_COLON) {\n\t\t\trootEnd = len > 2 && isPathSeparator(path.charCodeAt(2)) ? 3 : 2;\n\t\t\toffset = rootEnd;\n\t\t}\n\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tfor (let i = len - 1; i >= offset; --i) {\n\t\t\tif (isPathSeparator(path.charCodeAt(i))) {\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tend = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We saw the first non-path separator\n\t\t\t\tmatchedSlash = false;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\tif (rootEnd === -1) {\n\t\t\t\treturn '.';\n\t\t\t}\n\n\t\t\tend = rootEnd;\n\t\t}\n\t\treturn path.slice(0, end);\n\t},\n\n\tbasename(path: string, ext?: string): string {\n\t\tif (ext !== undefined) {\n\t\t\tvalidateString(ext, 'ext');\n\t\t}\n\t\tvalidateString(path, 'path');\n\t\tlet start = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i;\n\n\t\t// Check for a drive letter prefix so as not to mistake the following\n\t\t// path separator as an extra separator at the end of the path that can be\n\t\t// disregarded\n\t\tif (path.length >= 2 &&\n\t\t\tisWindowsDeviceRoot(path.charCodeAt(0)) &&\n\t\t\tpath.charCodeAt(1) === CHAR_COLON) {\n\t\t\tstart = 2;\n\t\t}\n\n\t\tif (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n\t\t\tif (ext === path) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tlet extIdx = ext.length - 1;\n\t\t\tlet firstNonSlashEnd = -1;\n\t\t\tfor (i = path.length - 1; i >= start; --i) {\n\t\t\t\tconst code = path.charCodeAt(i);\n\t\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\t\tstart = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (firstNonSlashEnd === -1) {\n\t\t\t\t\t\t// We saw the first non-path separator, remember this index in case\n\t\t\t\t\t\t// we need it if the extension ends up not matching\n\t\t\t\t\t\tmatchedSlash = false;\n\t\t\t\t\t\tfirstNonSlashEnd = i + 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (extIdx >= 0) {\n\t\t\t\t\t\t// Try to match the explicit extension\n\t\t\t\t\t\tif (code === ext.charCodeAt(extIdx)) {\n\t\t\t\t\t\t\tif (--extIdx === -1) {\n\t\t\t\t\t\t\t\t// We matched the extension, so mark this as the end of our path\n\t\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\t\tend = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Extension does not match, so our result is the entire path\n\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\textIdx = -1;\n\t\t\t\t\t\t\tend = firstNonSlashEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (start === end) {\n\t\t\t\tend = firstNonSlashEnd;\n\t\t\t} else if (end === -1) {\n\t\t\t\tend = path.length;\n\t\t\t}\n\t\t\treturn path.slice(start, end);\n\t\t}\n\t\tfor (i = path.length - 1; i >= start; --i) {\n\t\t\tif (isPathSeparator(path.charCodeAt(i))) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// path component\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(start, end);\n\t},\n\n\textname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tlet start = 0;\n\t\tlet startDot = -1;\n\t\tlet startPart = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\n\t\t// Check for a drive letter prefix so as not to mistake the following\n\t\t// path separator as an extra separator at the end of the path that can be\n\t\t// disregarded\n\n\t\tif (path.length >= 2 &&\n\t\t\tpath.charCodeAt(1) === CHAR_COLON &&\n\t\t\tisWindowsDeviceRoot(path.charCodeAt(0))) {\n\t\t\tstart = startPart = 2;\n\t\t}\n\n\t\tfor (let i = path.length - 1; i >= start; --i) {\n\t\t\tconst code = path.charCodeAt(i);\n\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t}\n\t\t\t\telse if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (startDot === -1 ||\n\t\t\tend === -1 ||\n\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\tpreDotState === 0 ||\n\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t(preDotState === 1 &&\n\t\t\t\tstartDot === end - 1 &&\n\t\t\t\tstartDot === startPart + 1)) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(startDot, end);\n\t},\n\n\tformat: _format.bind(null, '\\\\'),\n\n\tparse(path) {\n\t\tvalidateString(path, 'path');\n\n\t\tconst ret = { root: '', dir: '', base: '', ext: '', name: '' };\n\t\tif (path.length === 0) {\n\t\t\treturn ret;\n\t\t}\n\n\t\tconst len = path.length;\n\t\tlet rootEnd = 0;\n\t\tlet code = path.charCodeAt(0);\n\n\t\tif (len === 1) {\n\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t// `path` contains just a path separator, exit early to avoid\n\t\t\t\t// unnecessary work\n\t\t\t\tret.root = ret.dir = path;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t\tret.base = ret.name = path;\n\t\t\treturn ret;\n\t\t}\n\t\t// Try to match a root\n\t\tif (isPathSeparator(code)) {\n\t\t\t// Possible UNC root\n\n\t\t\trootEnd = 1;\n\t\t\tif (isPathSeparator(path.charCodeAt(1))) {\n\t\t\t\t// Matched double path separator at beginning\n\t\t\t\tlet j = 2;\n\t\t\t\tlet last = j;\n\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\tj++;\n\t\t\t\t}\n\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t// Matched!\n\t\t\t\t\tlast = j;\n\t\t\t\t\t// Match 1 or more path separators\n\t\t\t\t\twhile (j < len && isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t\tif (j < len && j !== last) {\n\t\t\t\t\t\t// Matched!\n\t\t\t\t\t\tlast = j;\n\t\t\t\t\t\t// Match 1 or more non-path separators\n\t\t\t\t\t\twhile (j < len && !isPathSeparator(path.charCodeAt(j))) {\n\t\t\t\t\t\t\tj++;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (j === len) {\n\t\t\t\t\t\t\t// We matched a UNC root only\n\t\t\t\t\t\t\trootEnd = j;\n\t\t\t\t\t\t} else if (j !== last) {\n\t\t\t\t\t\t\t// We matched a UNC root with leftovers\n\t\t\t\t\t\t\trootEnd = j + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (isWindowsDeviceRoot(code) && path.charCodeAt(1) === CHAR_COLON) {\n\t\t\t// Possible device root\n\t\t\tif (len <= 2) {\n\t\t\t\t// `path` contains just a drive root, exit early to avoid\n\t\t\t\t// unnecessary work\n\t\t\t\tret.root = ret.dir = path;\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t\trootEnd = 2;\n\t\t\tif (isPathSeparator(path.charCodeAt(2))) {\n\t\t\t\tif (len === 3) {\n\t\t\t\t\t// `path` contains just a drive root, exit early to avoid\n\t\t\t\t\t// unnecessary work\n\t\t\t\t\tret.root = ret.dir = path;\n\t\t\t\t\treturn ret;\n\t\t\t\t}\n\t\t\t\trootEnd = 3;\n\t\t\t}\n\t\t}\n\t\tif (rootEnd > 0) {\n\t\t\tret.root = path.slice(0, rootEnd);\n\t\t}\n\n\t\tlet startDot = -1;\n\t\tlet startPart = rootEnd;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i = path.length - 1;\n\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\n\t\t// Get non-dir info\n\t\tfor (; i >= rootEnd; --i) {\n\t\t\tcode = path.charCodeAt(i);\n\t\t\tif (isPathSeparator(code)) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t} else if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (end !== -1) {\n\t\t\tif (startDot === -1 ||\n\t\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\t\tpreDotState === 0 ||\n\t\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t\t(preDotState === 1 &&\n\t\t\t\t\tstartDot === end - 1 &&\n\t\t\t\t\tstartDot === startPart + 1)) {\n\t\t\t\tret.base = ret.name = path.slice(startPart, end);\n\t\t\t} else {\n\t\t\t\tret.name = path.slice(startPart, startDot);\n\t\t\t\tret.base = path.slice(startPart, end);\n\t\t\t\tret.ext = path.slice(startDot, end);\n\t\t\t}\n\t\t}\n\n\t\t// If the directory is the root, use the entire root as the `dir` including\n\t\t// the trailing slash if any (`C:\\abc` -> `C:\\`). Otherwise, strip out the\n\t\t// trailing slash (`C:\\abc\\def` -> `C:\\abc`).\n\t\tif (startPart > 0 && startPart !== rootEnd) {\n\t\t\tret.dir = path.slice(0, startPart - 1);\n\t\t} else {\n\t\t\tret.dir = ret.root;\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tsep: '\\\\',\n\tdelimiter: ';',\n\twin32: null,\n\tposix: null\n};\n\nexport const posix: IPath = {\n\t// path.resolve([from ...], to)\n\tresolve(...pathSegments: string[]): string {\n\t\tlet resolvedPath = '';\n\t\tlet resolvedAbsolute = false;\n\n\t\tfor (let i = pathSegments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n\t\t\tconst path = i >= 0 ? pathSegments[i] : process.cwd();\n\n\t\t\tvalidateString(path, 'path');\n\n\t\t\t// Skip empty entries\n\t\t\tif (path.length === 0) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tresolvedPath = `${path}/${resolvedPath}`;\n\t\t\tresolvedAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\t}\n\n\t\t// At this point the path should be resolved to a full absolute path, but\n\t\t// handle relative paths to be safe (might happen when process.cwd() fails)\n\n\t\t// Normalize the path\n\t\tresolvedPath = normalizeString(resolvedPath, !resolvedAbsolute, '/',\n\t\t\tisPosixPathSeparator);\n\n\t\tif (resolvedAbsolute) {\n\t\t\treturn `/${resolvedPath}`;\n\t\t}\n\t\treturn resolvedPath.length > 0 ? resolvedPath : '.';\n\t},\n\n\tnormalize(path: string): string {\n\t\tvalidateString(path, 'path');\n\n\t\tif (path.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\n\t\tconst isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\tconst trailingSeparator =\n\t\t\tpath.charCodeAt(path.length - 1) === CHAR_FORWARD_SLASH;\n\n\t\t// Normalize the path\n\t\tpath = normalizeString(path, !isAbsolute, '/', isPosixPathSeparator);\n\n\t\tif (path.length === 0) {\n\t\t\tif (isAbsolute) {\n\t\t\t\treturn '/';\n\t\t\t}\n\t\t\treturn trailingSeparator ? './' : '.';\n\t\t}\n\t\tif (trailingSeparator) {\n\t\t\tpath += '/';\n\t\t}\n\n\t\treturn isAbsolute ? `/${path}` : path;\n\t},\n\n\tisAbsolute(path: string): boolean {\n\t\tvalidateString(path, 'path');\n\t\treturn path.length > 0 && path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t},\n\n\tjoin(...paths: string[]): string {\n\t\tif (paths.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tlet joined;\n\t\tfor (let i = 0; i < paths.length; ++i) {\n\t\t\tconst arg = paths[i];\n\t\t\tvalidateString(arg, 'path');\n\t\t\tif (arg.length > 0) {\n\t\t\t\tif (joined === undefined) {\n\t\t\t\t\tjoined = arg;\n\t\t\t\t} else {\n\t\t\t\t\tjoined += `/${arg}`;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (joined === undefined) {\n\t\t\treturn '.';\n\t\t}\n\t\treturn posix.normalize(joined);\n\t},\n\n\trelative(from: string, to: string): string {\n\t\tvalidateString(from, 'from');\n\t\tvalidateString(to, 'to');\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\t// Trim leading forward slashes.\n\t\tfrom = posix.resolve(from);\n\t\tto = posix.resolve(to);\n\n\t\tif (from === to) {\n\t\t\treturn '';\n\t\t}\n\n\t\tconst fromStart = 1;\n\t\tconst fromEnd = from.length;\n\t\tconst fromLen = fromEnd - fromStart;\n\t\tconst toStart = 1;\n\t\tconst toLen = to.length - toStart;\n\n\t\t// Compare paths to find the longest common path from root\n\t\tconst length = (fromLen < toLen ? fromLen : toLen);\n\t\tlet lastCommonSep = -1;\n\t\tlet i = 0;\n\t\tfor (; i < length; i++) {\n\t\t\tconst fromCode = from.charCodeAt(fromStart + i);\n\t\t\tif (fromCode !== to.charCodeAt(toStart + i)) {\n\t\t\t\tbreak;\n\t\t\t} else if (fromCode === CHAR_FORWARD_SLASH) {\n\t\t\t\tlastCommonSep = i;\n\t\t\t}\n\t\t}\n\t\tif (i === length) {\n\t\t\tif (toLen > length) {\n\t\t\t\tif (to.charCodeAt(toStart + i) === CHAR_FORWARD_SLASH) {\n\t\t\t\t\t// We get here if `from` is the exact base path for `to`.\n\t\t\t\t\t// For example: from='/foo/bar'; to='/foo/bar/baz'\n\t\t\t\t\treturn to.slice(toStart + i + 1);\n\t\t\t\t}\n\t\t\t\tif (i === 0) {\n\t\t\t\t\t// We get here if `from` is the root\n\t\t\t\t\t// For example: from='/'; to='/foo'\n\t\t\t\t\treturn to.slice(toStart + i);\n\t\t\t\t}\n\t\t\t} else if (fromLen > length) {\n\t\t\t\tif (from.charCodeAt(fromStart + i) === CHAR_FORWARD_SLASH) {\n\t\t\t\t\t// We get here if `to` is the exact base path for `from`.\n\t\t\t\t\t// For example: from='/foo/bar/baz'; to='/foo/bar'\n\t\t\t\t\tlastCommonSep = i;\n\t\t\t\t} else if (i === 0) {\n\t\t\t\t\t// We get here if `to` is the root.\n\t\t\t\t\t// For example: from='/foo/bar'; to='/'\n\t\t\t\t\tlastCommonSep = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet out = '';\n\t\t// Generate the relative path based on the path difference between `to`\n\t\t// and `from`.\n\t\tfor (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n\t\t\tif (i === fromEnd || from.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n\t\t\t\tout += out.length === 0 ? '..' : '/..';\n\t\t\t}\n\t\t}\n\n\t\t// Lastly, append the rest of the destination (`to`) path that comes after\n\t\t// the common path parts.\n\t\treturn `${out}${to.slice(toStart + lastCommonSep)}`;\n\t},\n\n\ttoNamespacedPath(path: string): string {\n\t\t// Non-op on posix systems\n\t\treturn path;\n\t},\n\n\tdirname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tif (path.length === 0) {\n\t\t\treturn '.';\n\t\t}\n\t\tconst hasRoot = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tfor (let i = path.length - 1; i >= 1; --i) {\n\t\t\tif (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tend = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// We saw the first non-path separator\n\t\t\t\tmatchedSlash = false;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\treturn hasRoot ? '/' : '.';\n\t\t}\n\t\tif (hasRoot && end === 1) {\n\t\t\treturn '//';\n\t\t}\n\t\treturn path.slice(0, end);\n\t},\n\n\tbasename(path: string, ext?: string): string {\n\t\tif (ext !== undefined) {\n\t\t\tvalidateString(ext, 'ext');\n\t\t}\n\t\tvalidateString(path, 'path');\n\n\t\tlet start = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i;\n\n\t\tif (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n\t\t\tif (ext === path) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tlet extIdx = ext.length - 1;\n\t\t\tlet firstNonSlashEnd = -1;\n\t\t\tfor (i = path.length - 1; i >= 0; --i) {\n\t\t\t\tconst code = path.charCodeAt(i);\n\t\t\t\tif (code === CHAR_FORWARD_SLASH) {\n\t\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\t\tstart = i + 1;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (firstNonSlashEnd === -1) {\n\t\t\t\t\t\t// We saw the first non-path separator, remember this index in case\n\t\t\t\t\t\t// we need it if the extension ends up not matching\n\t\t\t\t\t\tmatchedSlash = false;\n\t\t\t\t\t\tfirstNonSlashEnd = i + 1;\n\t\t\t\t\t}\n\t\t\t\t\tif (extIdx >= 0) {\n\t\t\t\t\t\t// Try to match the explicit extension\n\t\t\t\t\t\tif (code === ext.charCodeAt(extIdx)) {\n\t\t\t\t\t\t\tif (--extIdx === -1) {\n\t\t\t\t\t\t\t\t// We matched the extension, so mark this as the end of our path\n\t\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\t\tend = i;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Extension does not match, so our result is the entire path\n\t\t\t\t\t\t\t// component\n\t\t\t\t\t\t\textIdx = -1;\n\t\t\t\t\t\t\tend = firstNonSlashEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (start === end) {\n\t\t\t\tend = firstNonSlashEnd;\n\t\t\t} else if (end === -1) {\n\t\t\t\tend = path.length;\n\t\t\t}\n\t\t\treturn path.slice(start, end);\n\t\t}\n\t\tfor (i = path.length - 1; i >= 0; --i) {\n\t\t\tif (path.charCodeAt(i) === CHAR_FORWARD_SLASH) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t} else if (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// path component\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t}\n\n\t\tif (end === -1) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(start, end);\n\t},\n\n\textname(path: string): string {\n\t\tvalidateString(path, 'path');\n\t\tlet startDot = -1;\n\t\tlet startPart = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\t\tfor (let i = path.length - 1; i >= 0; --i) {\n\t\t\tconst code = path.charCodeAt(i);\n\t\t\tif (code === CHAR_FORWARD_SLASH) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t}\n\t\t\t\telse if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (startDot === -1 ||\n\t\t\tend === -1 ||\n\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\tpreDotState === 0 ||\n\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t(preDotState === 1 &&\n\t\t\t\tstartDot === end - 1 &&\n\t\t\t\tstartDot === startPart + 1)) {\n\t\t\treturn '';\n\t\t}\n\t\treturn path.slice(startDot, end);\n\t},\n\n\tformat: _format.bind(null, '/'),\n\n\tparse(path: string): ParsedPath {\n\t\tvalidateString(path, 'path');\n\n\t\tconst ret = { root: '', dir: '', base: '', ext: '', name: '' };\n\t\tif (path.length === 0) {\n\t\t\treturn ret;\n\t\t}\n\t\tconst isAbsolute = path.charCodeAt(0) === CHAR_FORWARD_SLASH;\n\t\tlet start;\n\t\tif (isAbsolute) {\n\t\t\tret.root = '/';\n\t\t\tstart = 1;\n\t\t} else {\n\t\t\tstart = 0;\n\t\t}\n\t\tlet startDot = -1;\n\t\tlet startPart = 0;\n\t\tlet end = -1;\n\t\tlet matchedSlash = true;\n\t\tlet i = path.length - 1;\n\n\t\t// Track the state of characters (if any) we see before our first dot and\n\t\t// after any path separator we find\n\t\tlet preDotState = 0;\n\n\t\t// Get non-dir info\n\t\tfor (; i >= start; --i) {\n\t\t\tconst code = path.charCodeAt(i);\n\t\t\tif (code === CHAR_FORWARD_SLASH) {\n\t\t\t\t// If we reached a path separator that was not part of a set of path\n\t\t\t\t// separators at the end of the string, stop now\n\t\t\t\tif (!matchedSlash) {\n\t\t\t\t\tstartPart = i + 1;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (end === -1) {\n\t\t\t\t// We saw the first non-path separator, mark this as the end of our\n\t\t\t\t// extension\n\t\t\t\tmatchedSlash = false;\n\t\t\t\tend = i + 1;\n\t\t\t}\n\t\t\tif (code === CHAR_DOT) {\n\t\t\t\t// If this is our first dot, mark it as the start of our extension\n\t\t\t\tif (startDot === -1) {\n\t\t\t\t\tstartDot = i;\n\t\t\t\t} else if (preDotState !== 1) {\n\t\t\t\t\tpreDotState = 1;\n\t\t\t\t}\n\t\t\t} else if (startDot !== -1) {\n\t\t\t\t// We saw a non-dot and non-path separator before our dot, so we should\n\t\t\t\t// have a good chance at having a non-empty extension\n\t\t\t\tpreDotState = -1;\n\t\t\t}\n\t\t}\n\n\t\tif (end !== -1) {\n\t\t\tconst start = startPart === 0 && isAbsolute ? 1 : startPart;\n\t\t\tif (startDot === -1 ||\n\t\t\t\t// We saw a non-dot character immediately before the dot\n\t\t\t\tpreDotState === 0 ||\n\t\t\t\t// The (right-most) trimmed path component is exactly '..'\n\t\t\t\t(preDotState === 1 &&\n\t\t\t\t\tstartDot === end - 1 &&\n\t\t\t\t\tstartDot === startPart + 1)) {\n\t\t\t\tret.base = ret.name = path.slice(start, end);\n\t\t\t} else {\n\t\t\t\tret.name = path.slice(start, startDot);\n\t\t\t\tret.base = path.slice(start, end);\n\t\t\t\tret.ext = path.slice(startDot, end);\n\t\t\t}\n\t\t}\n\n\t\tif (startPart > 0) {\n\t\t\tret.dir = path.slice(0, startPart - 1);\n\t\t} else if (isAbsolute) {\n\t\t\tret.dir = '/';\n\t\t}\n\n\t\treturn ret;\n\t},\n\n\tsep: '/',\n\tdelimiter: ':',\n\twin32: null,\n\tposix: null\n};\n\nposix.win32 = win32.win32 = win32;\nposix.posix = win32.posix = posix;\n\nexport const normalize = (process.platform === 'win32' ? win32.normalize : posix.normalize);\nexport const isAbsolute = (process.platform === 'win32' ? win32.isAbsolute : posix.isAbsolute);\nexport const join = (process.platform === 'win32' ? win32.join : posix.join);\nexport const resolve = (process.platform === 'win32' ? win32.resolve : posix.resolve);\nexport const relative = (process.platform === 'win32' ? win32.relative : posix.relative);\nexport const dirname = (process.platform === 'win32' ? win32.dirname : posix.dirname);\nexport const basename = (process.platform === 'win32' ? win32.basename : posix.basename);\nexport const extname = (process.platform === 'win32' ? win32.extname : posix.extname);\nexport const format = (process.platform === 'win32' ? win32.format : posix.format);\nexport const parse = (process.platform === 'win32' ? win32.parse : posix.parse);\nexport const toNamespacedPath = (process.platform === 'win32' ? win32.toNamespacedPath : posix.toNamespacedPath);\nexport const sep = (process.platform === 'win32' ? win32.sep : posix.sep);\nexport const delimiter = (process.platform === 'win32' ? win32.delimiter : posix.delimiter);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nconst LANGUAGE_DEFAULT = 'en';\n\nlet _isWindows = false;\nlet _isMacintosh = false;\nlet _isLinux = false;\nlet _isLinuxSnap = false;\nlet _isNative = false;\nlet _isWeb = false;\nlet _isElectron = false;\nlet _isIOS = false;\nlet _isCI = false;\nlet _locale: string | undefined = undefined;\nlet _language: string = LANGUAGE_DEFAULT;\nlet _translationsConfigFile: string | undefined = undefined;\nlet _userAgent: string | undefined = undefined;\n\ninterface NLSConfig {\n\tlocale: string;\n\tavailableLanguages: { [key: string]: string };\n\t_translationsConfigFile: string;\n}\n\nexport interface IProcessEnvironment {\n\t[key: string]: string | undefined;\n}\n\n/**\n * This interface is intentionally not identical to node.js\n * process because it also works in sandboxed environments\n * where the process object is implemented differently. We\n * define the properties here that we need for `platform`\n * to work and nothing else.\n */\nexport interface INodeProcess {\n\tplatform: string;\n\tarch: string;\n\tenv: IProcessEnvironment;\n\tversions?: {\n\t\telectron?: string;\n\t};\n\ttype?: string;\n\tcwd: () => string;\n}\n\ndeclare const process: INodeProcess;\ndeclare const global: unknown;\ndeclare const self: unknown;\n\nexport const globals: any = (typeof self === 'object' ? self : typeof global === 'object' ? global : {});\n\nlet nodeProcess: INodeProcess | undefined = undefined;\nif (typeof globals.vscode !== 'undefined' && typeof globals.vscode.process !== 'undefined') {\n\t// Native environment (sandboxed)\n\tnodeProcess = globals.vscode.process;\n} else if (typeof process !== 'undefined') {\n\t// Native environment (non-sandboxed)\n\tnodeProcess = process;\n}\n\nconst isElectronProcess = typeof nodeProcess?.versions?.electron === 'string';\nconst isElectronRenderer = isElectronProcess && nodeProcess?.type === 'renderer';\n\ninterface INavigator {\n\tuserAgent: string;\n\tlanguage: string;\n\tmaxTouchPoints?: number;\n}\ndeclare const navigator: INavigator;\n\n// Web environment\nif (typeof navigator === 'object' && !isElectronRenderer) {\n\t_userAgent = navigator.userAgent;\n\t_isWindows = _userAgent.indexOf('Windows') >= 0;\n\t_isMacintosh = _userAgent.indexOf('Macintosh') >= 0;\n\t_isIOS = (_userAgent.indexOf('Macintosh') >= 0 || _userAgent.indexOf('iPad') >= 0 || _userAgent.indexOf('iPhone') >= 0) && !!navigator.maxTouchPoints && navigator.maxTouchPoints > 0;\n\t_isLinux = _userAgent.indexOf('Linux') >= 0;\n\t_isWeb = true;\n\t_locale = navigator.language;\n\t_language = _locale;\n}\n\n// Native environment\nelse if (typeof nodeProcess === 'object') {\n\t_isWindows = (nodeProcess.platform === 'win32');\n\t_isMacintosh = (nodeProcess.platform === 'darwin');\n\t_isLinux = (nodeProcess.platform === 'linux');\n\t_isLinuxSnap = _isLinux && !!nodeProcess.env['SNAP'] && !!nodeProcess.env['SNAP_REVISION'];\n\t_isElectron = isElectronProcess;\n\t_isCI = !!nodeProcess.env['CI'] || !!nodeProcess.env['BUILD_ARTIFACTSTAGINGDIRECTORY'];\n\t_locale = LANGUAGE_DEFAULT;\n\t_language = LANGUAGE_DEFAULT;\n\tconst rawNlsConfig = nodeProcess.env['VSCODE_NLS_CONFIG'];\n\tif (rawNlsConfig) {\n\t\ttry {\n\t\t\tconst nlsConfig: NLSConfig = JSON.parse(rawNlsConfig);\n\t\t\tconst resolved = nlsConfig.availableLanguages['*'];\n\t\t\t_locale = nlsConfig.locale;\n\t\t\t// VSCode's default language is 'en'\n\t\t\t_language = resolved ? resolved : LANGUAGE_DEFAULT;\n\t\t\t_translationsConfigFile = nlsConfig._translationsConfigFile;\n\t\t} catch (e) {\n\t\t}\n\t}\n\t_isNative = true;\n}\n\n// Unknown environment\nelse {\n\tconsole.error('Unable to resolve platform.');\n}\n\nexport const enum Platform {\n\tWeb,\n\tMac,\n\tLinux,\n\tWindows\n}\nexport function PlatformToString(platform: Platform) {\n\tswitch (platform) {\n\t\tcase Platform.Web: return 'Web';\n\t\tcase Platform.Mac: return 'Mac';\n\t\tcase Platform.Linux: return 'Linux';\n\t\tcase Platform.Windows: return 'Windows';\n\t}\n}\n\nlet _platform: Platform = Platform.Web;\nif (_isMacintosh) {\n\t_platform = Platform.Mac;\n} else if (_isWindows) {\n\t_platform = Platform.Windows;\n} else if (_isLinux) {\n\t_platform = Platform.Linux;\n}\n\nexport const isWindows = _isWindows;\nexport const isMacintosh = _isMacintosh;\nexport const isLinux = _isLinux;\nexport const isLinuxSnap = _isLinuxSnap;\nexport const isNative = _isNative;\nexport const isElectron = _isElectron;\nexport const isWeb = _isWeb;\nexport const isWebWorker = (_isWeb && typeof globals.importScripts === 'function');\nexport const isIOS = _isIOS;\n/**\n * Whether we run inside a CI environment, such as\n * GH actions or Azure Pipelines.\n */\nexport const isCI = _isCI;\nexport const platform = _platform;\nexport const userAgent = _userAgent;\n\n/**\n * The language used for the user interface. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese)\n */\nexport const language = _language;\n\nexport namespace Language {\n\n\texport function value(): string {\n\t\treturn language;\n\t}\n\n\texport function isDefaultVariant(): boolean {\n\t\tif (language.length === 2) {\n\t\t\treturn language === 'en';\n\t\t} else if (language.length >= 3) {\n\t\t\treturn language[0] === 'e' && language[1] === 'n' && language[2] === '-';\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\texport function isDefault(): boolean {\n\t\treturn language === 'en';\n\t}\n}\n\n/**\n * The OS locale or the locale specified by --locale. The format of\n * the string is all lower case (e.g. zh-tw for Traditional\n * Chinese). The UI is not necessarily shown in the provided locale.\n */\nexport const locale = _locale;\n\n/**\n * The translations that are available through language packs.\n */\nexport const translationsConfigFile = _translationsConfigFile;\n\n/**\n * See https://html.spec.whatwg.org/multipage/timers-and-user-prompts.html#:~:text=than%204%2C%20then-,set%20timeout%20to%204,-.\n *\n * Works similarly to `setTimeout(0)` but doesn't suffer from the 4ms artificial delay\n * that browsers set when the nesting level is > 5.\n */\nexport const setTimeout0 = (() => {\n\tif (typeof globals.postMessage === 'function' && !globals.importScripts) {\n\t\tinterface IQueueElement {\n\t\t\tid: number;\n\t\t\tcallback: () => void;\n\t\t}\n\t\tlet pending: IQueueElement[] = [];\n\t\tglobals.addEventListener('message', (e: MessageEvent) => {\n\t\t\tif (e.data && e.data.vscodeScheduleAsyncWork) {\n\t\t\t\tfor (let i = 0, len = pending.length; i < len; i++) {\n\t\t\t\t\tconst candidate = pending[i];\n\t\t\t\t\tif (candidate.id === e.data.vscodeScheduleAsyncWork) {\n\t\t\t\t\t\tpending.splice(i, 1);\n\t\t\t\t\t\tcandidate.callback();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tlet lastId = 0;\n\t\treturn (callback: () => void) => {\n\t\t\tconst myId = ++lastId;\n\t\t\tpending.push({\n\t\t\t\tid: myId,\n\t\t\t\tcallback: callback\n\t\t\t});\n\t\t\tglobals.postMessage({ vscodeScheduleAsyncWork: myId }, '*');\n\t\t};\n\t}\n\treturn (callback: () => void) => setTimeout(callback);\n})();\n\nexport const enum OperatingSystem {\n\tWindows = 1,\n\tMacintosh = 2,\n\tLinux = 3\n}\nexport const OS = (_isMacintosh || _isIOS ? OperatingSystem.Macintosh : (_isWindows ? OperatingSystem.Windows : OperatingSystem.Linux));\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nexport function isLittleEndian(): boolean {\n\tif (!_isLittleEndianComputed) {\n\t\t_isLittleEndianComputed = true;\n\t\tconst test = new Uint8Array(2);\n\t\ttest[0] = 1;\n\t\ttest[1] = 2;\n\t\tconst view = new Uint16Array(test.buffer);\n\t\t_isLittleEndian = (view[0] === (2 << 8) + 1);\n\t}\n\treturn _isLittleEndian;\n}\n\nexport const isChrome = !!(userAgent && userAgent.indexOf('Chrome') >= 0);\nexport const isFirefox = !!(userAgent && userAgent.indexOf('Firefox') >= 0);\nexport const isSafari = !!(!isChrome && (userAgent && userAgent.indexOf('Safari') >= 0));\nexport const isEdge = !!(userAgent && userAgent.indexOf('Edg/') >= 0);\nexport const isAndroid = !!(userAgent && userAgent.indexOf('Android') >= 0);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { globals, INodeProcess, isMacintosh, isWindows } from './platform';\n\nlet safeProcess: Omit<INodeProcess, 'arch'> & { arch: string | undefined };\ndeclare const process: INodeProcess;\n\n// Native sandbox environment\nif (typeof globals.vscode !== 'undefined' && typeof globals.vscode.process !== 'undefined') {\n\tconst sandboxProcess: INodeProcess = globals.vscode.process;\n\tsafeProcess = {\n\t\tget platform() { return sandboxProcess.platform; },\n\t\tget arch() { return sandboxProcess.arch; },\n\t\tget env() { return sandboxProcess.env; },\n\t\tcwd() { return sandboxProcess.cwd(); }\n\t};\n}\n\n// Native node.js environment\nelse if (typeof process !== 'undefined') {\n\tsafeProcess = {\n\t\tget platform() { return process.platform; },\n\t\tget arch() { return process.arch; },\n\t\tget env() { return process.env; },\n\t\tcwd() { return process.env['VSCODE_CWD'] || process.cwd(); }\n\t};\n}\n\n// Web environment\nelse {\n\tsafeProcess = {\n\n\t\t// Supported\n\t\tget platform() { return isWindows ? 'win32' : isMacintosh ? 'darwin' : 'linux'; },\n\t\tget arch() { return undefined; /* arch is undefined in web */ },\n\n\t\t// Unsupported\n\t\tget env() { return {}; },\n\t\tcwd() { return '/'; }\n\t};\n}\n\n/**\n * Provides safe access to the `cwd` property in node.js, sandboxed or web\n * environments.\n *\n * Note: in web, this property is hardcoded to be `/`.\n */\nexport const cwd = safeProcess.cwd;\n\n/**\n * Provides safe access to the `env` property in node.js, sandboxed or web\n * environments.\n *\n * Note: in web, this property is hardcoded to be `{}`.\n */\nexport const env = safeProcess.env;\n\n/**\n * Provides safe access to the `platform` property in node.js, sandboxed or web\n * environments.\n */\nexport const platform = safeProcess.platform;\n\n/**\n * Provides safe access to the `arch` method in node.js, sandboxed or web\n * environments.\n * Note: `arch` is `undefined` in web\n */\nexport const arch = safeProcess.arch;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './charCode';\nimport * as extpath from './extpath';\nimport { Schemas } from './network';\nimport * as paths from './path';\nimport { isLinux, isWindows } from './platform';\nimport { compare as strCompare, equalsIgnoreCase } from './strings';\nimport { URI, uriToFsPath } from './uri';\n\nexport function originalFSPath(uri: URI): string {\n\treturn uriToFsPath(uri, true);\n}\n\n//#region IExtUri\n\nexport interface IExtUri {\n\n\t// --- identity\n\n\t/**\n\t * Compares two uris.\n\t *\n\t * @param uri1 Uri\n\t * @param uri2 Uri\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tcompare(uri1: URI, uri2: URI, ignoreFragment?: boolean): number;\n\n\t/**\n\t * Tests whether two uris are equal\n\t *\n\t * @param uri1 Uri\n\t * @param uri2 Uri\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tisEqual(uri1: URI | undefined, uri2: URI | undefined, ignoreFragment?: boolean): boolean;\n\n\t/**\n\t * Tests whether a `candidate` URI is a parent or equal of a given `base` URI.\n\t *\n\t * @param base A uri which is \"longer\" or at least same length as `parentCandidate`\n\t * @param parentCandidate A uri which is \"shorter\" or up to same length as `base`\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tisEqualOrParent(base: URI, parentCandidate: URI, ignoreFragment?: boolean): boolean;\n\n\t/**\n\t * Creates a key from a resource URI to be used to resource comparison and for resource maps.\n\t * @see {@link ResourceMap}\n\t * @param uri Uri\n\t * @param ignoreFragment Ignore the fragment (defaults to `false`)\n\t */\n\tgetComparisonKey(uri: URI, ignoreFragment?: boolean): string;\n\n\t/**\n\t * Whether the casing of the path-component of the uri should be ignored.\n\t */\n\tignorePathCasing(uri: URI): boolean;\n\n\t// --- path math\n\n\tbasenameOrAuthority(resource: URI): string;\n\n\t/**\n\t * Returns the basename of the path component of an uri.\n\t * @param resource\n\t */\n\tbasename(resource: URI): string;\n\n\t/**\n\t * Returns the extension of the path component of an uri.\n\t * @param resource\n\t */\n\textname(resource: URI): string;\n\t/**\n\t * Return a URI representing the directory of a URI path.\n\t *\n\t * @param resource The input URI.\n\t * @returns The URI representing the directory of the input URI.\n\t */\n\tdirname(resource: URI): URI;\n\t/**\n\t * Join a URI path with path fragments and normalizes the resulting path.\n\t *\n\t * @param resource The input URI.\n\t * @param pathFragment The path fragment to add to the URI path.\n\t * @returns The resulting URI.\n\t */\n\tjoinPath(resource: URI, ...pathFragment: string[]): URI;\n\t/**\n\t * Normalizes the path part of a URI: Resolves `.` and `..` elements with directory names.\n\t *\n\t * @param resource The URI to normalize the path.\n\t * @returns The URI with the normalized path.\n\t */\n\tnormalizePath(resource: URI): URI;\n\t/**\n\t *\n\t * @param from\n\t * @param to\n\t */\n\trelativePath(from: URI, to: URI): string | undefined;\n\t/**\n\t * Resolves an absolute or relative path against a base URI.\n\t * The path can be relative or absolute posix or a Windows path\n\t */\n\tresolvePath(base: URI, path: string): URI;\n\n\t// --- misc\n\n\t/**\n\t * Returns true if the URI path is absolute.\n\t */\n\tisAbsolutePath(resource: URI): boolean;\n\t/**\n\t * Tests whether the two authorities are the same\n\t */\n\tisEqualAuthority(a1: string, a2: string): boolean;\n\t/**\n\t * Returns true if the URI path has a trailing path separator\n\t */\n\thasTrailingPathSeparator(resource: URI, sep?: string): boolean;\n\t/**\n\t * Removes a trailing path separator, if there's one.\n\t * Important: Doesn't remove the first slash, it would make the URI invalid\n\t */\n\tremoveTrailingPathSeparator(resource: URI, sep?: string): URI;\n\t/**\n\t * Adds a trailing path separator to the URI if there isn't one already.\n\t * For example, c:\\ would be unchanged, but c:\\users would become c:\\users\\\n\t */\n\taddTrailingPathSeparator(resource: URI, sep?: string): URI;\n}\n\nexport class ExtUri implements IExtUri {\n\n\tconstructor(private _ignorePathCasing: (uri: URI) => boolean) { }\n\n\tcompare(uri1: URI, uri2: URI, ignoreFragment: boolean = false): number {\n\t\tif (uri1 === uri2) {\n\t\t\treturn 0;\n\t\t}\n\t\treturn strCompare(this.getComparisonKey(uri1, ignoreFragment), this.getComparisonKey(uri2, ignoreFragment));\n\t}\n\n\tisEqual(uri1: URI | undefined, uri2: URI | undefined, ignoreFragment: boolean = false): boolean {\n\t\tif (uri1 === uri2) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!uri1 || !uri2) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.getComparisonKey(uri1, ignoreFragment) === this.getComparisonKey(uri2, ignoreFragment);\n\t}\n\n\tgetComparisonKey(uri: URI, ignoreFragment: boolean = false): string {\n\t\treturn uri.with({\n\t\t\tpath: this._ignorePathCasing(uri) ? uri.path.toLowerCase() : undefined,\n\t\t\tfragment: ignoreFragment ? null : undefined\n\t\t}).toString();\n\t}\n\n\tignorePathCasing(uri: URI): boolean {\n\t\treturn this._ignorePathCasing(uri);\n\t}\n\n\tisEqualOrParent(base: URI, parentCandidate: URI, ignoreFragment: boolean = false): boolean {\n\t\tif (base.scheme === parentCandidate.scheme) {\n\t\t\tif (base.scheme === Schemas.file) {\n\t\t\t\treturn extpath.isEqualOrParent(originalFSPath(base), originalFSPath(parentCandidate), this._ignorePathCasing(base)) && base.query === parentCandidate.query && (ignoreFragment || base.fragment === parentCandidate.fragment);\n\t\t\t}\n\t\t\tif (isEqualAuthority(base.authority, parentCandidate.authority)) {\n\t\t\t\treturn extpath.isEqualOrParent(base.path, parentCandidate.path, this._ignorePathCasing(base), '/') && base.query === parentCandidate.query && (ignoreFragment || base.fragment === parentCandidate.fragment);\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t// --- path math\n\n\tjoinPath(resource: URI, ...pathFragment: string[]): URI {\n\t\treturn URI.joinPath(resource, ...pathFragment);\n\t}\n\n\tbasenameOrAuthority(resource: URI): string {\n\t\treturn basename(resource) || resource.authority;\n\t}\n\n\tbasename(resource: URI): string {\n\t\treturn paths.posix.basename(resource.path);\n\t}\n\n\textname(resource: URI): string {\n\t\treturn paths.posix.extname(resource.path);\n\t}\n\n\tdirname(resource: URI): URI {\n\t\tif (resource.path.length === 0) {\n\t\t\treturn resource;\n\t\t}\n\t\tlet dirname;\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tdirname = URI.file(paths.dirname(originalFSPath(resource))).path;\n\t\t} else {\n\t\t\tdirname = paths.posix.dirname(resource.path);\n\t\t\tif (resource.authority && dirname.length && dirname.charCodeAt(0) !== CharCode.Slash) {\n\t\t\t\tconsole.error(`dirname(\"${resource.toString})) resulted in a relative path`);\n\t\t\t\tdirname = '/'; // If a URI contains an authority component, then the path component must either be empty or begin with a CharCode.Slash (\"/\") character\n\t\t\t}\n\t\t}\n\t\treturn resource.with({\n\t\t\tpath: dirname\n\t\t});\n\t}\n\n\tnormalizePath(resource: URI): URI {\n\t\tif (!resource.path.length) {\n\t\t\treturn resource;\n\t\t}\n\t\tlet normalizedPath: string;\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tnormalizedPath = URI.file(paths.normalize(originalFSPath(resource))).path;\n\t\t} else {\n\t\t\tnormalizedPath = paths.posix.normalize(resource.path);\n\t\t}\n\t\treturn resource.with({\n\t\t\tpath: normalizedPath\n\t\t});\n\t}\n\n\trelativePath(from: URI, to: URI): string | undefined {\n\t\tif (from.scheme !== to.scheme || !isEqualAuthority(from.authority, to.authority)) {\n\t\t\treturn undefined;\n\t\t}\n\t\tif (from.scheme === Schemas.file) {\n\t\t\tconst relativePath = paths.relative(originalFSPath(from), originalFSPath(to));\n\t\t\treturn isWindows ? extpath.toSlashes(relativePath) : relativePath;\n\t\t}\n\t\tlet fromPath = from.path || '/', toPath = to.path || '/';\n\t\tif (this._ignorePathCasing(from)) {\n\t\t\t// make casing of fromPath match toPath\n\t\t\tlet i = 0;\n\t\t\tfor (const len = Math.min(fromPath.length, toPath.length); i < len; i++) {\n\t\t\t\tif (fromPath.charCodeAt(i) !== toPath.charCodeAt(i)) {\n\t\t\t\t\tif (fromPath.charAt(i).toLowerCase() !== toPath.charAt(i).toLowerCase()) {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tfromPath = toPath.substr(0, i) + fromPath.substr(i);\n\t\t}\n\t\treturn paths.posix.relative(fromPath, toPath);\n\t}\n\n\tresolvePath(base: URI, path: string): URI {\n\t\tif (base.scheme === Schemas.file) {\n\t\t\tconst newURI = URI.file(paths.resolve(originalFSPath(base), path));\n\t\t\treturn base.with({\n\t\t\t\tauthority: newURI.authority,\n\t\t\t\tpath: newURI.path\n\t\t\t});\n\t\t}\n\t\tpath = extpath.toPosixPath(path); // we allow path to be a windows path\n\t\treturn base.with({\n\t\t\tpath: paths.posix.resolve(base.path, path)\n\t\t});\n\t}\n\n\t// --- misc\n\n\tisAbsolutePath(resource: URI): boolean {\n\t\treturn !!resource.path && resource.path[0] === '/';\n\t}\n\n\tisEqualAuthority(a1: string | undefined, a2: string | undefined) {\n\t\treturn a1 === a2 || (a1 !== undefined && a2 !== undefined && equalsIgnoreCase(a1, a2));\n\t}\n\n\thasTrailingPathSeparator(resource: URI, sep: string = paths.sep): boolean {\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tconst fsp = originalFSPath(resource);\n\t\t\treturn fsp.length > extpath.getRoot(fsp).length && fsp[fsp.length - 1] === sep;\n\t\t} else {\n\t\t\tconst p = resource.path;\n\t\t\treturn (p.length > 1 && p.charCodeAt(p.length - 1) === CharCode.Slash) && !(/^[a-zA-Z]:(\\/$|\\\\$)/.test(resource.fsPath)); // ignore the slash at offset 0\n\t\t}\n\t}\n\n\tremoveTrailingPathSeparator(resource: URI, sep: string = paths.sep): URI {\n\t\t// Make sure that the path isn't a drive letter. A trailing separator there is not removable.\n\t\tif (hasTrailingPathSeparator(resource, sep)) {\n\t\t\treturn resource.with({ path: resource.path.substr(0, resource.path.length - 1) });\n\t\t}\n\t\treturn resource;\n\t}\n\n\taddTrailingPathSeparator(resource: URI, sep: string = paths.sep): URI {\n\t\tlet isRootSep: boolean = false;\n\t\tif (resource.scheme === Schemas.file) {\n\t\t\tconst fsp = originalFSPath(resource);\n\t\t\tisRootSep = ((fsp !== undefined) && (fsp.length === extpath.getRoot(fsp).length) && (fsp[fsp.length - 1] === sep));\n\t\t} else {\n\t\t\tsep = '/';\n\t\t\tconst p = resource.path;\n\t\t\tisRootSep = p.length === 1 && p.charCodeAt(p.length - 1) === CharCode.Slash;\n\t\t}\n\t\tif (!isRootSep && !hasTrailingPathSeparator(resource, sep)) {\n\t\t\treturn resource.with({ path: resource.path + '/' });\n\t\t}\n\t\treturn resource;\n\t}\n}\n\n\n/**\n * Unbiased utility that takes uris \"as they are\". This means it can be interchanged with\n * uri#toString() usages. The following is true\n * ```\n * assertEqual(aUri.toString() === bUri.toString(), exturi.isEqual(aUri, bUri))\n * ```\n */\nexport const extUri = new ExtUri(() => false);\n\n/**\n * BIASED utility that _mostly_ ignored the case of urs paths. ONLY use this util if you\n * understand what you are doing.\n *\n * This utility is INCOMPATIBLE with `uri.toString()`-usages and both CANNOT be used interchanged.\n *\n * When dealing with uris from files or documents, `extUri` (the unbiased friend)is sufficient\n * because those uris come from a \"trustworthy source\". When creating unknown uris it's always\n * better to use `IUriIdentityService` which exposes an `IExtUri`-instance which knows when path\n * casing matters.\n */\nexport const extUriBiasedIgnorePathCase = new ExtUri(uri => {\n\t// A file scheme resource is in the same platform as code, so ignore case for non linux platforms\n\t// Resource can be from another platform. Lowering the case as an hack. Should come from File system provider\n\treturn uri.scheme === Schemas.file ? !isLinux : true;\n});\n\n\n/**\n * BIASED utility that always ignores the casing of uris paths. ONLY use this util if you\n * understand what you are doing.\n *\n * This utility is INCOMPATIBLE with `uri.toString()`-usages and both CANNOT be used interchanged.\n *\n * When dealing with uris from files or documents, `extUri` (the unbiased friend)is sufficient\n * because those uris come from a \"trustworthy source\". When creating unknown uris it's always\n * better to use `IUriIdentityService` which exposes an `IExtUri`-instance which knows when path\n * casing matters.\n */\nexport const extUriIgnorePathCase = new ExtUri(_ => true);\n\nexport const isEqual = extUri.isEqual.bind(extUri);\nexport const isEqualOrParent = extUri.isEqualOrParent.bind(extUri);\nexport const getComparisonKey = extUri.getComparisonKey.bind(extUri);\nexport const basenameOrAuthority = extUri.basenameOrAuthority.bind(extUri);\nexport const basename = extUri.basename.bind(extUri);\nexport const extname = extUri.extname.bind(extUri);\nexport const dirname = extUri.dirname.bind(extUri);\nexport const joinPath = extUri.joinPath.bind(extUri);\nexport const normalizePath = extUri.normalizePath.bind(extUri);\nexport const relativePath = extUri.relativePath.bind(extUri);\nexport const resolvePath = extUri.resolvePath.bind(extUri);\nexport const isAbsolutePath = extUri.isAbsolutePath.bind(extUri);\nexport const isEqualAuthority = extUri.isEqualAuthority.bind(extUri);\nexport const hasTrailingPathSeparator = extUri.hasTrailingPathSeparator.bind(extUri);\nexport const removeTrailingPathSeparator = extUri.removeTrailingPathSeparator.bind(extUri);\nexport const addTrailingPathSeparator = extUri.addTrailingPathSeparator.bind(extUri);\n\n//#endregion\n\nexport function distinctParents<T>(items: T[], resourceAccessor: (item: T) => URI): T[] {\n\tconst distinctParents: T[] = [];\n\tfor (let i = 0; i < items.length; i++) {\n\t\tconst candidateResource = resourceAccessor(items[i]);\n\t\tif (items.some((otherItem, index) => {\n\t\t\tif (index === i) {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\treturn isEqualOrParent(candidateResource, resourceAccessor(otherItem));\n\t\t})) {\n\t\t\tcontinue;\n\t\t}\n\n\t\tdistinctParents.push(items[i]);\n\t}\n\n\treturn distinctParents;\n}\n\n/**\n * Data URI related helpers.\n */\nexport namespace DataUri {\n\n\texport const META_DATA_LABEL = 'label';\n\texport const META_DATA_DESCRIPTION = 'description';\n\texport const META_DATA_SIZE = 'size';\n\texport const META_DATA_MIME = 'mime';\n\n\texport function parseMetaData(dataUri: URI): Map<string, string> {\n\t\tconst metadata = new Map<string, string>();\n\n\t\t// Given a URI of:  data:image/png;size:2313;label:SomeLabel;description:SomeDescription;base64,77+9UE5...\n\t\t// the metadata is: size:2313;label:SomeLabel;description:SomeDescription\n\t\tconst meta = dataUri.path.substring(dataUri.path.indexOf(';') + 1, dataUri.path.lastIndexOf(';'));\n\t\tmeta.split(';').forEach(property => {\n\t\t\tconst [key, value] = property.split(':');\n\t\t\tif (key && value) {\n\t\t\t\tmetadata.set(key, value);\n\t\t\t}\n\t\t});\n\n\t\t// Given a URI of:  data:image/png;size:2313;label:SomeLabel;description:SomeDescription;base64,77+9UE5...\n\t\t// the mime is: image/png\n\t\tconst mime = dataUri.path.substring(0, dataUri.path.indexOf(';'));\n\t\tif (mime) {\n\t\t\tmetadata.set(META_DATA_MIME, mime);\n\t\t}\n\n\t\treturn metadata;\n\t}\n}\n\nexport function toLocalResource(resource: URI, authority: string | undefined, localScheme: string): URI {\n\tif (authority) {\n\t\tlet path = resource.path;\n\t\tif (path && path[0] !== paths.posix.sep) {\n\t\t\tpath = paths.posix.sep + path;\n\t\t}\n\n\t\treturn resource.with({ scheme: localScheme, authority, path });\n\t}\n\n\treturn resource.with({ scheme: localScheme });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as strings from './strings';\n\nenum Severity {\n\tIgnore = 0,\n\tInfo = 1,\n\tWarning = 2,\n\tError = 3\n}\n\nnamespace Severity {\n\n\tconst _error = 'error';\n\tconst _warning = 'warning';\n\tconst _warn = 'warn';\n\tconst _info = 'info';\n\tconst _ignore = 'ignore';\n\n\t/**\n\t * Parses 'error', 'warning', 'warn', 'info' in call casings\n\t * and falls back to ignore.\n\t */\n\texport function fromValue(value: string): Severity {\n\t\tif (!value) {\n\t\t\treturn Severity.Ignore;\n\t\t}\n\n\t\tif (strings.equalsIgnoreCase(_error, value)) {\n\t\t\treturn Severity.Error;\n\t\t}\n\n\t\tif (strings.equalsIgnoreCase(_warning, value) || strings.equalsIgnoreCase(_warn, value)) {\n\t\t\treturn Severity.Warning;\n\t\t}\n\n\t\tif (strings.equalsIgnoreCase(_info, value)) {\n\t\t\treturn Severity.Info;\n\t\t}\n\t\treturn Severity.Ignore;\n\t}\n\n\texport function toString(severity: Severity): string {\n\t\tswitch (severity) {\n\t\t\tcase Severity.Error: return _error;\n\t\t\tcase Severity.Warning: return _warning;\n\t\t\tcase Severity.Info: return _info;\n\t\t\tdefault: return _ignore;\n\t\t}\n\t}\n}\n\nexport default Severity;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { globals } from './platform';\n\nconst hasPerformanceNow = (globals.performance && typeof globals.performance.now === 'function');\n\nexport class StopWatch {\n\n\tprivate _highResolution: boolean;\n\tprivate _startTime: number;\n\tprivate _stopTime: number;\n\n\tpublic static create(highResolution: boolean = true): StopWatch {\n\t\treturn new StopWatch(highResolution);\n\t}\n\n\tconstructor(highResolution: boolean) {\n\t\tthis._highResolution = hasPerformanceNow && highResolution;\n\t\tthis._startTime = this._now();\n\t\tthis._stopTime = -1;\n\t}\n\n\tpublic stop(): void {\n\t\tthis._stopTime = this._now();\n\t}\n\n\tpublic elapsed(): number {\n\t\tif (this._stopTime !== -1) {\n\t\t\treturn this._stopTime - this._startTime;\n\t\t}\n\t\treturn this._now() - this._startTime;\n\t}\n\n\tprivate _now(): number {\n\t\treturn this._highResolution ? globals.performance.now() : Date.now();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { LRUCachedFunction } from './cache';\nimport { CharCode } from './charCode';\nimport { Lazy } from './lazy';\nimport { Constants } from './uint';\n\nexport function isFalsyOrWhitespace(str: string | undefined): boolean {\n\tif (!str || typeof str !== 'string') {\n\t\treturn true;\n\t}\n\treturn str.trim().length === 0;\n}\n\nconst _formatRegexp = /{(\\d+)}/g;\n\n/**\n * Helper to produce a string with a variable number of arguments. Insert variable segments\n * into the string using the {n} notation where N is the index of the argument following the string.\n * @param value string to which formatting is applied\n * @param args replacements for {n}-entries\n */\nexport function format(value: string, ...args: any[]): string {\n\tif (args.length === 0) {\n\t\treturn value;\n\t}\n\treturn value.replace(_formatRegexp, function (match, group) {\n\t\tconst idx = parseInt(group, 10);\n\t\treturn isNaN(idx) || idx < 0 || idx >= args.length ?\n\t\t\tmatch :\n\t\t\targs[idx];\n\t});\n}\n\nconst _format2Regexp = /{([^}]+)}/g;\n\n/**\n * Helper to create a string from a template and a string record.\n * Similar to `format` but with objects instead of positional arguments.\n */\nexport function format2(template: string, values: Record<string, unknown>): string {\n\treturn template.replace(_format2Regexp, (match, group) => (values[group] ?? match) as string);\n}\n\n/**\n * Converts HTML characters inside the string to use entities instead. Makes the string safe from\n * being used e.g. in HTMLElement.innerHTML.\n */\nexport function escape(html: string): string {\n\treturn html.replace(/[<>&]/g, function (match) {\n\t\tswitch (match) {\n\t\t\tcase '<': return '&lt;';\n\t\t\tcase '>': return '&gt;';\n\t\t\tcase '&': return '&amp;';\n\t\t\tdefault: return match;\n\t\t}\n\t});\n}\n\n/**\n * Escapes regular expression characters in a given string\n */\nexport function escapeRegExpCharacters(value: string): string {\n\treturn value.replace(/[\\\\\\{\\}\\*\\+\\?\\|\\^\\$\\.\\[\\]\\(\\)]/g, '\\\\$&');\n}\n\n/**\n * Counts how often `character` occurs inside `value`.\n */\nexport function count(value: string, character: string): number {\n\tlet result = 0;\n\tconst ch = character.charCodeAt(0);\n\tfor (let i = value.length - 1; i >= 0; i--) {\n\t\tif (value.charCodeAt(i) === ch) {\n\t\t\tresult++;\n\t\t}\n\t}\n\treturn result;\n}\n\nexport function truncate(value: string, maxLength: number, suffix = ''): string {\n\tif (value.length <= maxLength) {\n\t\treturn value;\n\t}\n\n\treturn `${value.substr(0, maxLength)}${suffix}`;\n}\n\n/**\n * Removes all occurrences of needle from the beginning and end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim (default is a blank)\n */\nexport function trim(haystack: string, needle: string = ' '): string {\n\tconst trimmed = ltrim(haystack, needle);\n\treturn rtrim(trimmed, needle);\n}\n\n/**\n * Removes all occurrences of needle from the beginning of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nexport function ltrim(haystack: string, needle: string): string {\n\tif (!haystack || !needle) {\n\t\treturn haystack;\n\t}\n\n\tconst needleLen = needle.length;\n\tif (needleLen === 0 || haystack.length === 0) {\n\t\treturn haystack;\n\t}\n\n\tlet offset = 0;\n\n\twhile (haystack.indexOf(needle, offset) === offset) {\n\t\toffset = offset + needleLen;\n\t}\n\treturn haystack.substring(offset);\n}\n\n/**\n * Removes all occurrences of needle from the end of haystack.\n * @param haystack string to trim\n * @param needle the thing to trim\n */\nexport function rtrim(haystack: string, needle: string): string {\n\tif (!haystack || !needle) {\n\t\treturn haystack;\n\t}\n\n\tconst needleLen = needle.length,\n\t\thaystackLen = haystack.length;\n\n\tif (needleLen === 0 || haystackLen === 0) {\n\t\treturn haystack;\n\t}\n\n\tlet offset = haystackLen,\n\t\tidx = -1;\n\n\twhile (true) {\n\t\tidx = haystack.lastIndexOf(needle, offset - 1);\n\t\tif (idx === -1 || idx + needleLen !== offset) {\n\t\t\tbreak;\n\t\t}\n\t\tif (idx === 0) {\n\t\t\treturn '';\n\t\t}\n\t\toffset = idx;\n\t}\n\n\treturn haystack.substring(0, offset);\n}\n\nexport function convertSimple2RegExpPattern(pattern: string): string {\n\treturn pattern.replace(/[\\-\\\\\\{\\}\\+\\?\\|\\^\\$\\.\\,\\[\\]\\(\\)\\#\\s]/g, '\\\\$&').replace(/[\\*]/g, '.*');\n}\n\nexport function stripWildcards(pattern: string): string {\n\treturn pattern.replace(/\\*/g, '');\n}\n\nexport interface RegExpOptions {\n\tmatchCase?: boolean;\n\twholeWord?: boolean;\n\tmultiline?: boolean;\n\tglobal?: boolean;\n\tunicode?: boolean;\n}\n\nexport function createRegExp(searchString: string, isRegex: boolean, options: RegExpOptions = {}): RegExp {\n\tif (!searchString) {\n\t\tthrow new Error('Cannot create regex from empty string');\n\t}\n\tif (!isRegex) {\n\t\tsearchString = escapeRegExpCharacters(searchString);\n\t}\n\tif (options.wholeWord) {\n\t\tif (!/\\B/.test(searchString.charAt(0))) {\n\t\t\tsearchString = '\\\\b' + searchString;\n\t\t}\n\t\tif (!/\\B/.test(searchString.charAt(searchString.length - 1))) {\n\t\t\tsearchString = searchString + '\\\\b';\n\t\t}\n\t}\n\tlet modifiers = '';\n\tif (options.global) {\n\t\tmodifiers += 'g';\n\t}\n\tif (!options.matchCase) {\n\t\tmodifiers += 'i';\n\t}\n\tif (options.multiline) {\n\t\tmodifiers += 'm';\n\t}\n\tif (options.unicode) {\n\t\tmodifiers += 'u';\n\t}\n\n\treturn new RegExp(searchString, modifiers);\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n\t// Exit early if it's one of these special cases which are meant to match\n\t// against an empty string\n\tif (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n\t\treturn false;\n\t}\n\n\t// We check against an empty string. If the regular expression doesn't advance\n\t// (e.g. ends in an endless loop) it will match an empty string.\n\tconst match = regexp.exec('');\n\treturn !!(match && regexp.lastIndex === 0);\n}\n\nexport function regExpContainsBackreference(regexpValue: string): boolean {\n\treturn !!regexpValue.match(/([^\\\\]|^)(\\\\\\\\)*\\\\\\d+/);\n}\n\nexport function regExpFlags(regexp: RegExp): string {\n\treturn (regexp.global ? 'g' : '')\n\t\t+ (regexp.ignoreCase ? 'i' : '')\n\t\t+ (regexp.multiline ? 'm' : '')\n\t\t+ ((regexp as any /* standalone editor compilation */).unicode ? 'u' : '');\n}\n\nexport function splitLines(str: string): string[] {\n\treturn str.split(/\\r\\n|\\r|\\n/);\n}\n\n/**\n * Returns first index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nexport function firstNonWhitespaceIndex(str: string): number {\n\tfor (let i = 0, len = str.length; i < len; i++) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Returns the leading whitespace of the string.\n * If the string contains only whitespaces, returns entire string\n */\nexport function getLeadingWhitespace(str: string, start: number = 0, end: number = str.length): string {\n\tfor (let i = start; i < end; i++) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn str.substring(start, i);\n\t\t}\n\t}\n\treturn str.substring(start, end);\n}\n\n/**\n * Returns last index of the string that is not whitespace.\n * If string is empty or contains only whitespaces, returns -1\n */\nexport function lastNonWhitespaceIndex(str: string, startIndex: number = str.length - 1): number {\n\tfor (let i = startIndex; i >= 0; i--) {\n\t\tconst chCode = str.charCodeAt(i);\n\t\tif (chCode !== CharCode.Space && chCode !== CharCode.Tab) {\n\t\t\treturn i;\n\t\t}\n\t}\n\treturn -1;\n}\n\n/**\n * Function that works identically to String.prototype.replace, except, the\n * replace function is allowed to be async and return a Promise.\n */\nexport function replaceAsync(str: string, search: RegExp, replacer: (match: string, ...args: any[]) => Promise<string>): Promise<string> {\n\tlet parts: (string | Promise<string>)[] = [];\n\n\tlet last = 0;\n\tfor (const match of str.matchAll(search)) {\n\t\tparts.push(str.slice(last, match.index));\n\t\tif (match.index === undefined) {\n\t\t\tthrow new Error('match.index should be defined');\n\t\t}\n\n\t\tlast = match.index + match[0].length;\n\t\tparts.push(replacer(match[0], ...match.slice(1), match.index, str, match.groups));\n\t}\n\n\tparts.push(str.slice(last));\n\n\treturn Promise.all(parts).then(p => p.join(''));\n}\n\nexport function compare(a: string, b: string): number {\n\tif (a < b) {\n\t\treturn -1;\n\t} else if (a > b) {\n\t\treturn 1;\n\t} else {\n\t\treturn 0;\n\t}\n}\n\nexport function compareSubstring(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\tfor (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\t\tlet codeA = a.charCodeAt(aStart);\n\t\tlet codeB = b.charCodeAt(bStart);\n\t\tif (codeA < codeB) {\n\t\t\treturn -1;\n\t\t} else if (codeA > codeB) {\n\t\t\treturn 1;\n\t\t}\n\t}\n\tconst aLen = aEnd - aStart;\n\tconst bLen = bEnd - bStart;\n\tif (aLen < bLen) {\n\t\treturn -1;\n\t} else if (aLen > bLen) {\n\t\treturn 1;\n\t}\n\treturn 0;\n}\n\nexport function compareIgnoreCase(a: string, b: string): number {\n\treturn compareSubstringIgnoreCase(a, b, 0, a.length, 0, b.length);\n}\n\nexport function compareSubstringIgnoreCase(a: string, b: string, aStart: number = 0, aEnd: number = a.length, bStart: number = 0, bEnd: number = b.length): number {\n\n\tfor (; aStart < aEnd && bStart < bEnd; aStart++, bStart++) {\n\n\t\tlet codeA = a.charCodeAt(aStart);\n\t\tlet codeB = b.charCodeAt(bStart);\n\n\t\tif (codeA === codeB) {\n\t\t\t// equal\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (codeA >= 128 || codeB >= 128) {\n\t\t\t// not ASCII letters -> fallback to lower-casing strings\n\t\t\treturn compareSubstring(a.toLowerCase(), b.toLowerCase(), aStart, aEnd, bStart, bEnd);\n\t\t}\n\n\t\t// mapper lower-case ascii letter onto upper-case varinats\n\t\t// [97-122] (lower ascii) --> [65-90] (upper ascii)\n\t\tif (isLowerAsciiLetter(codeA)) {\n\t\t\tcodeA -= 32;\n\t\t}\n\t\tif (isLowerAsciiLetter(codeB)) {\n\t\t\tcodeB -= 32;\n\t\t}\n\n\t\t// compare both code points\n\t\tconst diff = codeA - codeB;\n\t\tif (diff === 0) {\n\t\t\tcontinue;\n\t\t}\n\n\t\treturn diff;\n\t}\n\n\tconst aLen = aEnd - aStart;\n\tconst bLen = bEnd - bStart;\n\n\tif (aLen < bLen) {\n\t\treturn -1;\n\t} else if (aLen > bLen) {\n\t\treturn 1;\n\t}\n\n\treturn 0;\n}\n\nexport function isLowerAsciiLetter(code: number): boolean {\n\treturn code >= CharCode.a && code <= CharCode.z;\n}\n\nexport function isUpperAsciiLetter(code: number): boolean {\n\treturn code >= CharCode.A && code <= CharCode.Z;\n}\n\nexport function equalsIgnoreCase(a: string, b: string): boolean {\n\treturn a.length === b.length && compareSubstringIgnoreCase(a, b) === 0;\n}\n\nexport function startsWithIgnoreCase(str: string, candidate: string): boolean {\n\tconst candidateLength = candidate.length;\n\tif (candidate.length > str.length) {\n\t\treturn false;\n\t}\n\n\treturn compareSubstringIgnoreCase(str, candidate, 0, candidateLength) === 0;\n}\n\n/**\n * @returns the length of the common prefix of the two strings.\n */\nexport function commonPrefixLength(a: string, b: string): number {\n\n\tlet i: number,\n\t\tlen = Math.min(a.length, b.length);\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a.charCodeAt(i) !== b.charCodeAt(i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn len;\n}\n\n/**\n * @returns the length of the common suffix of the two strings.\n */\nexport function commonSuffixLength(a: string, b: string): number {\n\n\tlet i: number,\n\t\tlen = Math.min(a.length, b.length);\n\n\tconst aLastIndex = a.length - 1;\n\tconst bLastIndex = b.length - 1;\n\n\tfor (i = 0; i < len; i++) {\n\t\tif (a.charCodeAt(aLastIndex - i) !== b.charCodeAt(bLastIndex - i)) {\n\t\t\treturn i;\n\t\t}\n\t}\n\n\treturn len;\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function isHighSurrogate(charCode: number): boolean {\n\treturn (0xD800 <= charCode && charCode <= 0xDBFF);\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function isLowSurrogate(charCode: number): boolean {\n\treturn (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\n\n/**\n * See http://en.wikipedia.org/wiki/Surrogate_pair\n */\nexport function computeCodePoint(highSurrogate: number, lowSurrogate: number): number {\n\treturn ((highSurrogate - 0xD800) << 10) + (lowSurrogate - 0xDC00) + 0x10000;\n}\n\n/**\n * get the code point that begins at offset `offset`\n */\nexport function getNextCodePoint(str: string, len: number, offset: number): number {\n\tconst charCode = str.charCodeAt(offset);\n\tif (isHighSurrogate(charCode) && offset + 1 < len) {\n\t\tconst nextCharCode = str.charCodeAt(offset + 1);\n\t\tif (isLowSurrogate(nextCharCode)) {\n\t\t\treturn computeCodePoint(charCode, nextCharCode);\n\t\t}\n\t}\n\treturn charCode;\n}\n\n/**\n * get the code point that ends right before offset `offset`\n */\nfunction getPrevCodePoint(str: string, offset: number): number {\n\tconst charCode = str.charCodeAt(offset - 1);\n\tif (isLowSurrogate(charCode) && offset > 1) {\n\t\tconst prevCharCode = str.charCodeAt(offset - 2);\n\t\tif (isHighSurrogate(prevCharCode)) {\n\t\t\treturn computeCodePoint(prevCharCode, charCode);\n\t\t}\n\t}\n\treturn charCode;\n}\n\nexport class CodePointIterator {\n\n\tprivate readonly _str: string;\n\tprivate readonly _len: number;\n\tprivate _offset: number;\n\n\tpublic get offset(): number {\n\t\treturn this._offset;\n\t}\n\n\tconstructor(str: string, offset: number = 0) {\n\t\tthis._str = str;\n\t\tthis._len = str.length;\n\t\tthis._offset = offset;\n\t}\n\n\tpublic setOffset(offset: number): void {\n\t\tthis._offset = offset;\n\t}\n\n\tpublic prevCodePoint(): number {\n\t\tconst codePoint = getPrevCodePoint(this._str, this._offset);\n\t\tthis._offset -= (codePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\treturn codePoint;\n\t}\n\n\tpublic nextCodePoint(): number {\n\t\tconst codePoint = getNextCodePoint(this._str, this._len, this._offset);\n\t\tthis._offset += (codePoint >= Constants.UNICODE_SUPPLEMENTARY_PLANE_BEGIN ? 2 : 1);\n\t\treturn codePoint;\n\t}\n\n\tpublic eol(): boolean {\n\t\treturn (this._offset >= this._len);\n\t}\n}\n\nexport class GraphemeIterator {\n\n\tprivate readonly _iterator: CodePointIterator;\n\n\tpublic get offset(): number {\n\t\treturn this._iterator.offset;\n\t}\n\n\tconstructor(str: string, offset: number = 0) {\n\t\tthis._iterator = new CodePointIterator(str, offset);\n\t}\n\n\tpublic nextGraphemeLength(): number {\n\t\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\t\tconst iterator = this._iterator;\n\t\tconst initialOffset = iterator.offset;\n\n\t\tlet graphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.nextCodePoint());\n\t\twhile (!iterator.eol()) {\n\t\t\tconst offset = iterator.offset;\n\t\t\tconst nextGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.nextCodePoint());\n\t\t\tif (breakBetweenGraphemeBreakType(graphemeBreakType, nextGraphemeBreakType)) {\n\t\t\t\t// move iterator back\n\t\t\t\titerator.setOffset(offset);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tgraphemeBreakType = nextGraphemeBreakType;\n\t\t}\n\t\treturn (iterator.offset - initialOffset);\n\t}\n\n\tpublic prevGraphemeLength(): number {\n\t\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\t\tconst iterator = this._iterator;\n\t\tconst initialOffset = iterator.offset;\n\n\t\tlet graphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.prevCodePoint());\n\t\twhile (iterator.offset > 0) {\n\t\t\tconst offset = iterator.offset;\n\t\t\tconst prevGraphemeBreakType = graphemeBreakTree.getGraphemeBreakType(iterator.prevCodePoint());\n\t\t\tif (breakBetweenGraphemeBreakType(prevGraphemeBreakType, graphemeBreakType)) {\n\t\t\t\t// move iterator back\n\t\t\t\titerator.setOffset(offset);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tgraphemeBreakType = prevGraphemeBreakType;\n\t\t}\n\t\treturn (initialOffset - iterator.offset);\n\t}\n\n\tpublic eol(): boolean {\n\t\treturn this._iterator.eol();\n\t}\n}\n\nexport function nextCharLength(str: string, initialOffset: number): number {\n\tconst iterator = new GraphemeIterator(str, initialOffset);\n\treturn iterator.nextGraphemeLength();\n}\n\nexport function prevCharLength(str: string, initialOffset: number): number {\n\tconst iterator = new GraphemeIterator(str, initialOffset);\n\treturn iterator.prevGraphemeLength();\n}\n\nexport function getCharContainingOffset(str: string, offset: number): [number, number] {\n\tif (offset > 0 && isLowSurrogate(str.charCodeAt(offset))) {\n\t\toffset--;\n\t}\n\tconst endOffset = offset + nextCharLength(str, offset);\n\tconst startOffset = endOffset - prevCharLength(str, endOffset);\n\treturn [startOffset, endOffset];\n}\n\n/**\n * Generated using https://github.com/alexdima/unicode-utils/blob/main/rtl-test.js\n */\nconst CONTAINS_RTL = /(?:[\\u05BE\\u05C0\\u05C3\\u05C6\\u05D0-\\u05F4\\u0608\\u060B\\u060D\\u061B-\\u064A\\u066D-\\u066F\\u0671-\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1-\\u07EA\\u07F4\\u07F5\\u07FA\\u07FE-\\u0815\\u081A\\u0824\\u0828\\u0830-\\u0858\\u085E-\\u088E\\u08A0-\\u08C9\\u200F\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFD3D\\uFD50-\\uFDC7\\uFDF0-\\uFDFC\\uFE70-\\uFEFC]|\\uD802[\\uDC00-\\uDD1B\\uDD20-\\uDE00\\uDE10-\\uDE35\\uDE40-\\uDEE4\\uDEEB-\\uDF35\\uDF40-\\uDFFF]|\\uD803[\\uDC00-\\uDD23\\uDE80-\\uDEA9\\uDEAD-\\uDF45\\uDF51-\\uDF81\\uDF86-\\uDFF6]|\\uD83A[\\uDC00-\\uDCCF\\uDD00-\\uDD43\\uDD4B-\\uDFFF]|\\uD83B[\\uDC00-\\uDEBB])/;\n\n/**\n * Returns true if `str` contains any Unicode character that is classified as \"R\" or \"AL\".\n */\nexport function containsRTL(str: string): boolean {\n\treturn CONTAINS_RTL.test(str);\n}\n\nconst IS_BASIC_ASCII = /^[\\t\\n\\r\\x20-\\x7E]*$/;\n/**\n * Returns true if `str` contains only basic ASCII characters in the range 32 - 126 (including 32 and 126) or \\n, \\r, \\t\n */\nexport function isBasicASCII(str: string): boolean {\n\treturn IS_BASIC_ASCII.test(str);\n}\n\nexport const UNUSUAL_LINE_TERMINATORS = /[\\u2028\\u2029]/; // LINE SEPARATOR (LS) or PARAGRAPH SEPARATOR (PS)\n/**\n * Returns true if `str` contains unusual line terminators, like LS or PS\n */\nexport function containsUnusualLineTerminators(str: string): boolean {\n\treturn UNUSUAL_LINE_TERMINATORS.test(str);\n}\n\nexport function isFullWidthCharacter(charCode: number): boolean {\n\t// Do a cheap trick to better support wrapping of wide characters, treat them as 2 columns\n\t// http://jrgraphix.net/research/unicode_blocks.php\n\t//          2E80 - 2EFF   CJK Radicals Supplement\n\t//          2F00 - 2FDF   Kangxi Radicals\n\t//          2FF0 - 2FFF   Ideographic Description Characters\n\t//          3000 - 303F   CJK Symbols and Punctuation\n\t//          3040 - 309F   Hiragana\n\t//          30A0 - 30FF   Katakana\n\t//          3100 - 312F   Bopomofo\n\t//          3130 - 318F   Hangul Compatibility Jamo\n\t//          3190 - 319F   Kanbun\n\t//          31A0 - 31BF   Bopomofo Extended\n\t//          31F0 - 31FF   Katakana Phonetic Extensions\n\t//          3200 - 32FF   Enclosed CJK Letters and Months\n\t//          3300 - 33FF   CJK Compatibility\n\t//          3400 - 4DBF   CJK Unified Ideographs Extension A\n\t//          4DC0 - 4DFF   Yijing Hexagram Symbols\n\t//          4E00 - 9FFF   CJK Unified Ideographs\n\t//          A000 - A48F   Yi Syllables\n\t//          A490 - A4CF   Yi Radicals\n\t//          AC00 - D7AF   Hangul Syllables\n\t// [IGNORE] D800 - DB7F   High Surrogates\n\t// [IGNORE] DB80 - DBFF   High Private Use Surrogates\n\t// [IGNORE] DC00 - DFFF   Low Surrogates\n\t// [IGNORE] E000 - F8FF   Private Use Area\n\t//          F900 - FAFF   CJK Compatibility Ideographs\n\t// [IGNORE] FB00 - FB4F   Alphabetic Presentation Forms\n\t// [IGNORE] FB50 - FDFF   Arabic Presentation Forms-A\n\t// [IGNORE] FE00 - FE0F   Variation Selectors\n\t// [IGNORE] FE20 - FE2F   Combining Half Marks\n\t// [IGNORE] FE30 - FE4F   CJK Compatibility Forms\n\t// [IGNORE] FE50 - FE6F   Small Form Variants\n\t// [IGNORE] FE70 - FEFF   Arabic Presentation Forms-B\n\t//          FF00 - FFEF   Halfwidth and Fullwidth Forms\n\t//               [https://en.wikipedia.org/wiki/Halfwidth_and_fullwidth_forms]\n\t//               of which FF01 - FF5E fullwidth ASCII of 21 to 7E\n\t// [IGNORE]    and FF65 - FFDC halfwidth of Katakana and Hangul\n\t// [IGNORE] FFF0 - FFFF   Specials\n\treturn (\n\t\t(charCode >= 0x2E80 && charCode <= 0xD7AF)\n\t\t|| (charCode >= 0xF900 && charCode <= 0xFAFF)\n\t\t|| (charCode >= 0xFF01 && charCode <= 0xFF5E)\n\t);\n}\n\n/**\n * A fast function (therefore imprecise) to check if code points are emojis.\n * Generated using https://github.com/alexdima/unicode-utils/blob/main/emoji-test.js\n */\nexport function isEmojiImprecise(x: number): boolean {\n\treturn (\n\t\t(x >= 0x1F1E6 && x <= 0x1F1FF) || (x === 8986) || (x === 8987) || (x === 9200)\n\t\t|| (x === 9203) || (x >= 9728 && x <= 10175) || (x === 11088) || (x === 11093)\n\t\t|| (x >= 127744 && x <= 128591) || (x >= 128640 && x <= 128764)\n\t\t|| (x >= 128992 && x <= 129008) || (x >= 129280 && x <= 129535)\n\t\t|| (x >= 129648 && x <= 129782)\n\t);\n}\n\n/**\n * Given a string and a max length returns a shorted version. Shorting\n * happens at favorable positions - such as whitespace or punctuation characters.\n */\nexport function lcut(text: string, n: number) {\n\tif (text.length < n) {\n\t\treturn text;\n\t}\n\n\tconst re = /\\b/g;\n\tlet i = 0;\n\twhile (re.test(text)) {\n\t\tif (text.length - re.lastIndex < n) {\n\t\t\tbreak;\n\t\t}\n\n\t\ti = re.lastIndex;\n\t\tre.lastIndex += 1;\n\t}\n\n\treturn text.substring(i).replace(/^\\s/, '');\n}\n\n// Escape codes\n// http://en.wikipedia.org/wiki/ANSI_escape_code\nconst EL = /\\x1B\\x5B[12]?K/g; // Erase in line\nconst COLOR_START = /\\x1b\\[\\d+m/g; // Color\nconst COLOR_END = /\\x1b\\[0?m/g; // Color\n\nexport function removeAnsiEscapeCodes(str: string): string {\n\tif (str) {\n\t\tstr = str.replace(EL, '');\n\t\tstr = str.replace(COLOR_START, '');\n\t\tstr = str.replace(COLOR_END, '');\n\t}\n\n\treturn str;\n}\n\n// -- UTF-8 BOM\n\nexport const UTF8_BOM_CHARACTER = String.fromCharCode(CharCode.UTF8_BOM);\n\nexport function startsWithUTF8BOM(str: string): boolean {\n\treturn !!(str && str.length > 0 && str.charCodeAt(0) === CharCode.UTF8_BOM);\n}\n\nexport function stripUTF8BOM(str: string): string {\n\treturn startsWithUTF8BOM(str) ? str.substr(1) : str;\n}\n\n/**\n * Checks if the characters of the provided query string are included in the\n * target string. The characters do not have to be contiguous within the string.\n */\nexport function fuzzyContains(target: string, query: string): boolean {\n\tif (!target || !query) {\n\t\treturn false; // return early if target or query are undefined\n\t}\n\n\tif (target.length < query.length) {\n\t\treturn false; // impossible for query to be contained in target\n\t}\n\n\tconst queryLen = query.length;\n\tconst targetLower = target.toLowerCase();\n\n\tlet index = 0;\n\tlet lastIndexOf = -1;\n\twhile (index < queryLen) {\n\t\tconst indexOf = targetLower.indexOf(query[index], lastIndexOf + 1);\n\t\tif (indexOf < 0) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlastIndexOf = indexOf;\n\n\t\tindex++;\n\t}\n\n\treturn true;\n}\n\nexport function containsUppercaseCharacter(target: string, ignoreEscapedChars = false): boolean {\n\tif (!target) {\n\t\treturn false;\n\t}\n\n\tif (ignoreEscapedChars) {\n\t\ttarget = target.replace(/\\\\./g, '');\n\t}\n\n\treturn target.toLowerCase() !== target;\n}\n\nexport function uppercaseFirstLetter(str: string): string {\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\n}\n\nexport function getNLines(str: string, n = 1): string {\n\tif (n === 0) {\n\t\treturn '';\n\t}\n\n\tlet idx = -1;\n\tdo {\n\t\tidx = str.indexOf('\\n', idx + 1);\n\t\tn--;\n\t} while (n > 0 && idx >= 0);\n\n\tif (idx === -1) {\n\t\treturn str;\n\t}\n\n\tif (str[idx - 1] === '\\r') {\n\t\tidx--;\n\t}\n\n\treturn str.substr(0, idx);\n}\n\n/**\n * Produces 'a'-'z', followed by 'A'-'Z'... followed by 'a'-'z', etc.\n */\nexport function singleLetterHash(n: number): string {\n\tconst LETTERS_CNT = (CharCode.Z - CharCode.A + 1);\n\n\tn = n % (2 * LETTERS_CNT);\n\n\tif (n < LETTERS_CNT) {\n\t\treturn String.fromCharCode(CharCode.a + n);\n\t}\n\n\treturn String.fromCharCode(CharCode.A + n - LETTERS_CNT);\n}\n\n//#region Unicode Grapheme Break\n\nexport function getGraphemeBreakType(codePoint: number): GraphemeBreakType {\n\tconst graphemeBreakTree = GraphemeBreakTree.getInstance();\n\treturn graphemeBreakTree.getGraphemeBreakType(codePoint);\n}\n\nfunction breakBetweenGraphemeBreakType(breakTypeA: GraphemeBreakType, breakTypeB: GraphemeBreakType): boolean {\n\t// http://www.unicode.org/reports/tr29/#Grapheme_Cluster_Boundary_Rules\n\n\t// !!! Let's make the common case a bit faster\n\tif (breakTypeA === GraphemeBreakType.Other) {\n\t\t// see https://www.unicode.org/Public/13.0.0/ucd/auxiliary/GraphemeBreakTest-13.0.0d10.html#table\n\t\treturn (breakTypeB !== GraphemeBreakType.Extend && breakTypeB !== GraphemeBreakType.SpacingMark);\n\t}\n\n\t// Do not break between a CR and LF. Otherwise, break before and after controls.\n\t// GB3                                        CR  LF\n\t// GB4                       (Control | CR | LF) \n\t// GB5                                            (Control | CR | LF)\n\tif (breakTypeA === GraphemeBreakType.CR) {\n\t\tif (breakTypeB === GraphemeBreakType.LF) {\n\t\t\treturn false; // GB3\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.Control || breakTypeA === GraphemeBreakType.CR || breakTypeA === GraphemeBreakType.LF) {\n\t\treturn true; // GB4\n\t}\n\tif (breakTypeB === GraphemeBreakType.Control || breakTypeB === GraphemeBreakType.CR || breakTypeB === GraphemeBreakType.LF) {\n\t\treturn true; // GB5\n\t}\n\n\t// Do not break Hangul syllable sequences.\n\t// GB6                                         L  (L | V | LV | LVT)\n\t// GB7                                  (LV | V)  (V | T)\n\t// GB8                                 (LVT | T)  T\n\tif (breakTypeA === GraphemeBreakType.L) {\n\t\tif (breakTypeB === GraphemeBreakType.L || breakTypeB === GraphemeBreakType.V || breakTypeB === GraphemeBreakType.LV || breakTypeB === GraphemeBreakType.LVT) {\n\t\t\treturn false; // GB6\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.LV || breakTypeA === GraphemeBreakType.V) {\n\t\tif (breakTypeB === GraphemeBreakType.V || breakTypeB === GraphemeBreakType.T) {\n\t\t\treturn false; // GB7\n\t\t}\n\t}\n\tif (breakTypeA === GraphemeBreakType.LVT || breakTypeA === GraphemeBreakType.T) {\n\t\tif (breakTypeB === GraphemeBreakType.T) {\n\t\t\treturn false; // GB8\n\t\t}\n\t}\n\n\t// Do not break before extending characters or ZWJ.\n\t// GB9                                            (Extend | ZWJ)\n\tif (breakTypeB === GraphemeBreakType.Extend || breakTypeB === GraphemeBreakType.ZWJ) {\n\t\treturn false; // GB9\n\t}\n\n\t// The GB9a and GB9b rules only apply to extended grapheme clusters:\n\t// Do not break before SpacingMarks, or after Prepend characters.\n\t// GB9a                                           SpacingMark\n\t// GB9b                                  Prepend \n\tif (breakTypeB === GraphemeBreakType.SpacingMark) {\n\t\treturn false; // GB9a\n\t}\n\tif (breakTypeA === GraphemeBreakType.Prepend) {\n\t\treturn false; // GB9b\n\t}\n\n\t// Do not break within emoji modifier sequences or emoji zwj sequences.\n\t// GB11    \\p{Extended_Pictographic} Extend* ZWJ  \\p{Extended_Pictographic}\n\tif (breakTypeA === GraphemeBreakType.ZWJ && breakTypeB === GraphemeBreakType.Extended_Pictographic) {\n\t\t// Note: we are not implementing the rule entirely here to avoid introducing states\n\t\treturn false; // GB11\n\t}\n\n\t// GB12                          sot (RI RI)* RI  RI\n\t// GB13                        [^RI] (RI RI)* RI  RI\n\tif (breakTypeA === GraphemeBreakType.Regional_Indicator && breakTypeB === GraphemeBreakType.Regional_Indicator) {\n\t\t// Note: we are not implementing the rule entirely here to avoid introducing states\n\t\treturn false; // GB12 & GB13\n\t}\n\n\t// GB999                                     Any  Any\n\treturn true;\n}\n\nexport const enum GraphemeBreakType {\n\tOther = 0,\n\tPrepend = 1,\n\tCR = 2,\n\tLF = 3,\n\tControl = 4,\n\tExtend = 5,\n\tRegional_Indicator = 6,\n\tSpacingMark = 7,\n\tL = 8,\n\tV = 9,\n\tT = 10,\n\tLV = 11,\n\tLVT = 12,\n\tZWJ = 13,\n\tExtended_Pictographic = 14\n}\n\nclass GraphemeBreakTree {\n\n\tprivate static _INSTANCE: GraphemeBreakTree | null = null;\n\tpublic static getInstance(): GraphemeBreakTree {\n\t\tif (!GraphemeBreakTree._INSTANCE) {\n\t\t\tGraphemeBreakTree._INSTANCE = new GraphemeBreakTree();\n\t\t}\n\t\treturn GraphemeBreakTree._INSTANCE;\n\t}\n\n\tprivate readonly _data: number[];\n\n\tconstructor() {\n\t\tthis._data = getGraphemeBreakRawData();\n\t}\n\n\tpublic getGraphemeBreakType(codePoint: number): GraphemeBreakType {\n\t\t// !!! Let's make 7bit ASCII a bit faster: 0..31\n\t\tif (codePoint < 32) {\n\t\t\tif (codePoint === CharCode.LineFeed) {\n\t\t\t\treturn GraphemeBreakType.LF;\n\t\t\t}\n\t\t\tif (codePoint === CharCode.CarriageReturn) {\n\t\t\t\treturn GraphemeBreakType.CR;\n\t\t\t}\n\t\t\treturn GraphemeBreakType.Control;\n\t\t}\n\t\t// !!! Let's make 7bit ASCII a bit faster: 32..126\n\t\tif (codePoint < 127) {\n\t\t\treturn GraphemeBreakType.Other;\n\t\t}\n\n\t\tconst data = this._data;\n\t\tconst nodeCount = data.length / 3;\n\t\tlet nodeIndex = 1;\n\t\twhile (nodeIndex <= nodeCount) {\n\t\t\tif (codePoint < data[3 * nodeIndex]) {\n\t\t\t\t// go left\n\t\t\t\tnodeIndex = 2 * nodeIndex;\n\t\t\t} else if (codePoint > data[3 * nodeIndex + 1]) {\n\t\t\t\t// go right\n\t\t\t\tnodeIndex = 2 * nodeIndex + 1;\n\t\t\t} else {\n\t\t\t\t// hit\n\t\t\t\treturn data[3 * nodeIndex + 2];\n\t\t\t}\n\t\t}\n\n\t\treturn GraphemeBreakType.Other;\n\t}\n}\n\nfunction getGraphemeBreakRawData(): number[] {\n\t// generated using https://github.com/alexdima/unicode-utils/blob/main/grapheme-break.js\n\treturn JSON.parse('[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]');\n}\n\n//#endregion\n\n/**\n * Computes the offset after performing a left delete on the given string,\n * while considering unicode grapheme/emoji rules.\n*/\nexport function getLeftDeleteOffset(offset: number, str: string): number {\n\tif (offset === 0) {\n\t\treturn 0;\n\t}\n\n\t// Try to delete emoji part.\n\tconst emojiOffset = getOffsetBeforeLastEmojiComponent(offset, str);\n\tif (emojiOffset !== undefined) {\n\t\treturn emojiOffset;\n\t}\n\n\t// Otherwise, just skip a single code point.\n\tconst iterator = new CodePointIterator(str, offset);\n\titerator.prevCodePoint();\n\treturn iterator.offset;\n}\n\nfunction getOffsetBeforeLastEmojiComponent(initialOffset: number, str: string): number | undefined {\n\t// See https://www.unicode.org/reports/tr51/tr51-14.html#EBNF_and_Regex for the\n\t// structure of emojis.\n\tconst iterator = new CodePointIterator(str, initialOffset);\n\tlet codePoint = iterator.prevCodePoint();\n\n\t// Skip modifiers\n\twhile ((isEmojiModifier(codePoint) || codePoint === CodePoint.emojiVariantSelector || codePoint === CodePoint.enclosingKeyCap)) {\n\t\tif (iterator.offset === 0) {\n\t\t\t// Cannot skip modifier, no preceding emoji base.\n\t\t\treturn undefined;\n\t\t}\n\t\tcodePoint = iterator.prevCodePoint();\n\t}\n\n\t// Expect base emoji\n\tif (!isEmojiImprecise(codePoint)) {\n\t\t// Unexpected code point, not a valid emoji.\n\t\treturn undefined;\n\t}\n\n\tlet resultOffset = iterator.offset;\n\n\tif (resultOffset > 0) {\n\t\t// Skip optional ZWJ code points that combine multiple emojis.\n\t\t// In theory, we should check if that ZWJ actually combines multiple emojis\n\t\t// to prevent deleting ZWJs in situations we didn't account for.\n\t\tconst optionalZwjCodePoint = iterator.prevCodePoint();\n\t\tif (optionalZwjCodePoint === CodePoint.zwj) {\n\t\t\tresultOffset = iterator.offset;\n\t\t}\n\t}\n\n\treturn resultOffset;\n}\n\nfunction isEmojiModifier(codePoint: number): boolean {\n\treturn 0x1F3FB <= codePoint && codePoint <= 0x1F3FF;\n}\n\nconst enum CodePoint {\n\tzwj = 0x200D,\n\n\t/**\n\t * Variation Selector-16 (VS16)\n\t*/\n\temojiVariantSelector = 0xFE0F,\n\n\t/**\n\t * Combining Enclosing Keycap\n\t */\n\tenclosingKeyCap = 0x20E3,\n}\n\nexport const noBreakWhitespace = '\\xa0';\n\nexport class AmbiguousCharacters {\n\tprivate static readonly ambiguousCharacterData = new Lazy<\n\t\tRecord<\n\t\t\tstring | '_common' | '_default',\n\t\t\t/* code point -> ascii code point */ number[]\n\t\t>\n\t>(() => {\n\t\t// Generated using https://github.com/hediet/vscode-unicode-data\n\t\t// Stored as key1, value1, key2, value2, ...\n\t\treturn JSON.parse(\n\t\t\t'{\\\"_common\\\":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,8218,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,8242,96,1370,96,1523,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71922,67,71913,67,65315,67,8557,67,8450,67,8493,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71919,87,71910,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,66293,90,71909,90,65338,90,8484,90,8488,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65297,49,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125],\\\"_default\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"cs\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"de\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"es\\\":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"fr\\\":[65374,126,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"it\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"ja\\\":[8211,45,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65292,44,65307,59],\\\"ko\\\":[8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"pl\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"pt-BR\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"qps-ploc\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"ru\\\":[65374,126,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"tr\\\":[160,32,8211,45,65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65288,40,65289,41,65292,44,65307,59,65311,63],\\\"zh-hans\\\":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41],\\\"zh-hant\\\":[8211,45,65374,126,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65283,35,65307,59]}'\n\t\t);\n\t});\n\n\tprivate static readonly cache = new LRUCachedFunction<\n\t\tstring[],\n\t\tAmbiguousCharacters\n\t>((locales) => {\n\t\tfunction arrayToMap(arr: number[]): Map<number, number> {\n\t\t\tconst result = new Map<number, number>();\n\t\t\tfor (let i = 0; i < arr.length; i += 2) {\n\t\t\t\tresult.set(arr[i], arr[i + 1]);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tfunction mergeMaps(\n\t\t\tmap1: Map<number, number>,\n\t\t\tmap2: Map<number, number>\n\t\t): Map<number, number> {\n\t\t\tconst result = new Map<number, number>(map1);\n\t\t\tfor (const [key, value] of map2) {\n\t\t\t\tresult.set(key, value);\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tfunction intersectMaps(\n\t\t\tmap1: Map<number, number> | undefined,\n\t\t\tmap2: Map<number, number>\n\t\t) {\n\t\t\tif (!map1) {\n\t\t\t\treturn map2;\n\t\t\t}\n\t\t\tconst result = new Map<number, number>();\n\t\t\tfor (const [key, value] of map1) {\n\t\t\t\tif (map2.has(key)) {\n\t\t\t\t\tresult.set(key, value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\n\t\tconst data = this.ambiguousCharacterData.getValue();\n\n\t\tlet filteredLocales = locales.filter(\n\t\t\t(l) => !l.startsWith('_') && l in data\n\t\t);\n\t\tif (filteredLocales.length === 0) {\n\t\t\tfilteredLocales = ['_default'];\n\t\t}\n\n\t\tlet languageSpecificMap: Map<number, number> | undefined = undefined;\n\t\tfor (const locale of filteredLocales) {\n\t\t\tconst map = arrayToMap(data[locale]);\n\t\t\tlanguageSpecificMap = intersectMaps(languageSpecificMap, map);\n\t\t}\n\n\t\tconst commonMap = arrayToMap(data['_common']);\n\t\tconst map = mergeMaps(commonMap, languageSpecificMap!);\n\n\t\treturn new AmbiguousCharacters(map);\n\t});\n\n\tpublic static getInstance(locales: Set<string>): AmbiguousCharacters {\n\t\treturn AmbiguousCharacters.cache.get(Array.from(locales));\n\t}\n\n\tprivate static _locales = new Lazy<string[]>(() =>\n\t\tObject.keys(AmbiguousCharacters.ambiguousCharacterData.getValue()).filter(\n\t\t\t(k) => !k.startsWith('_')\n\t\t)\n\t);\n\tpublic static getLocales(): string[] {\n\t\treturn AmbiguousCharacters._locales.getValue();\n\t}\n\n\tprivate constructor(\n\t\tprivate readonly confusableDictionary: Map<number, number>\n\t) { }\n\n\tpublic isAmbiguous(codePoint: number): boolean {\n\t\treturn this.confusableDictionary.has(codePoint);\n\t}\n\n\t/**\n\t * Returns the non basic ASCII code point that the given code point can be confused,\n\t * or undefined if such code point does note exist.\n\t */\n\tpublic getPrimaryConfusable(codePoint: number): number | undefined {\n\t\treturn this.confusableDictionary.get(codePoint);\n\t}\n\n\tpublic getConfusableCodePoints(): ReadonlySet<number> {\n\t\treturn new Set(this.confusableDictionary.keys());\n\t}\n}\n\nexport class InvisibleCharacters {\n\tprivate static getRawData(): number[] {\n\t\t// Generated using https://github.com/hediet/vscode-unicode-data\n\t\treturn JSON.parse('[9,10,11,12,13,32,127,160,173,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12288,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999]');\n\t}\n\n\tprivate static _data: Set<number> | undefined = undefined;\n\n\tprivate static getData() {\n\t\tif (!this._data) {\n\t\t\tthis._data = new Set(InvisibleCharacters.getRawData());\n\t\t}\n\t\treturn this._data;\n\t}\n\n\tpublic static isInvisibleCharacter(codePoint: number): boolean {\n\t\treturn InvisibleCharacters.getData().has(codePoint);\n\t}\n\n\tpublic static get codePoints(): ReadonlySet<number> {\n\t\treturn InvisibleCharacters.getData();\n\t}\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { URI, UriComponents } from './uri';\n\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n\treturn Array.isArray(array);\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript String or not.\n */\nexport function isString(str: unknown): str is string {\n\treturn (typeof str === 'string');\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Array and each element in the array is a string.\n */\nexport function isStringArray(value: unknown): value is string[] {\n\treturn Array.isArray(value) && (<unknown[]>value).every(elem => isString(elem));\n}\n\n/**\n *\n * @returns whether the provided parameter is of type `object` but **not**\n *\t`null`, an `array`, a `regexp`, nor a `date`.\n */\nexport function isObject(obj: unknown): obj is Object {\n\t// The method can't do a type cast since there are type (like strings) which\n\t// are subclasses of any put not positvely matched by the function. Hence type\n\t// narrowing results in wrong results.\n\treturn typeof obj === 'object'\n\t\t&& obj !== null\n\t\t&& !Array.isArray(obj)\n\t\t&& !(obj instanceof RegExp)\n\t\t&& !(obj instanceof Date);\n}\n\n/**\n *\n * @returns whether the provided parameter is of type `Buffer` or Uint8Array dervived type\n */\nexport function isTypedArray(obj: unknown): obj is Object {\n\treturn typeof obj === 'object'\n\t\t&& (obj instanceof Uint8Array ||\n\t\t\tobj instanceof Uint16Array ||\n\t\t\tobj instanceof Uint32Array ||\n\t\t\tobj instanceof Float32Array ||\n\t\t\tobj instanceof Float64Array ||\n\t\t\tobj instanceof Int8Array ||\n\t\t\tobj instanceof Int16Array ||\n\t\t\tobj instanceof Int32Array ||\n\t\t\tobj instanceof BigInt64Array ||\n\t\t\tobj instanceof BigUint64Array ||\n\t\t\tobj instanceof Uint8ClampedArray);\n}\n\n/**\n * In **contrast** to just checking `typeof` this will return `false` for `NaN`.\n * @returns whether the provided parameter is a JavaScript Number or not.\n */\nexport function isNumber(obj: unknown): obj is number {\n\treturn (typeof obj === 'number' && !isNaN(obj));\n}\n\n/**\n * @returns whether the provided parameter is an Iterable, casting to the given generic\n */\nexport function isIterable<T>(obj: unknown): obj is Iterable<T> {\n\treturn !!obj && typeof (obj as any)[Symbol.iterator] === 'function';\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Boolean or not.\n */\nexport function isBoolean(obj: unknown): obj is boolean {\n\treturn (obj === true || obj === false);\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: unknown): obj is undefined {\n\treturn (typeof obj === 'undefined');\n}\n\n/**\n * @returns whether the provided parameter is defined.\n */\nexport function isDefined<T>(arg: T | null | undefined): arg is T {\n\treturn !isUndefinedOrNull(arg);\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: unknown): obj is undefined | null {\n\treturn (isUndefined(obj) || obj === null);\n}\n\n\nexport function assertType(condition: unknown, type?: string): asserts condition {\n\tif (!condition) {\n\t\tthrow new Error(type ? `Unexpected type, expected '${type}'` : 'Unexpected type');\n\t}\n}\n\n/**\n * Asserts that the argument passed in is neither undefined nor null.\n */\nexport function assertIsDefined<T>(arg: T | null | undefined): T {\n\tif (isUndefinedOrNull(arg)) {\n\t\tthrow new Error('Assertion Failed: argument is undefined or null');\n\t}\n\n\treturn arg;\n}\n\n/**\n * Asserts that each argument passed in is neither undefined nor null.\n */\nexport function assertAllDefined<T1, T2>(t1: T1 | null | undefined, t2: T2 | null | undefined): [T1, T2];\nexport function assertAllDefined<T1, T2, T3>(t1: T1 | null | undefined, t2: T2 | null | undefined, t3: T3 | null | undefined): [T1, T2, T3];\nexport function assertAllDefined<T1, T2, T3, T4>(t1: T1 | null | undefined, t2: T2 | null | undefined, t3: T3 | null | undefined, t4: T4 | null | undefined): [T1, T2, T3, T4];\nexport function assertAllDefined(...args: (unknown | null | undefined)[]): unknown[] {\n\tconst result = [];\n\n\tfor (let i = 0; i < args.length; i++) {\n\t\tconst arg = args[i];\n\n\t\tif (isUndefinedOrNull(arg)) {\n\t\t\tthrow new Error(`Assertion Failed: argument at index ${i} is undefined or null`);\n\t\t}\n\n\t\tresult.push(arg);\n\t}\n\n\treturn result;\n}\n\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\n\n/**\n * @returns whether the provided parameter is an empty JavaScript Object or not.\n */\nexport function isEmptyObject(obj: unknown): obj is object {\n\tif (!isObject(obj)) {\n\t\treturn false;\n\t}\n\n\tfor (let key in obj) {\n\t\tif (hasOwnProperty.call(obj, key)) {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * @returns whether the provided parameter is a JavaScript Function or not.\n */\nexport function isFunction(obj: unknown): obj is Function {\n\treturn (typeof obj === 'function');\n}\n\n/**\n * @returns whether the provided parameters is are JavaScript Function or not.\n */\nexport function areFunctions(...objects: unknown[]): boolean {\n\treturn objects.length > 0 && objects.every(isFunction);\n}\n\nexport type TypeConstraint = string | Function;\n\nexport function validateConstraints(args: unknown[], constraints: Array<TypeConstraint | undefined>): void {\n\tconst len = Math.min(args.length, constraints.length);\n\tfor (let i = 0; i < len; i++) {\n\t\tvalidateConstraint(args[i], constraints[i]);\n\t}\n}\n\nexport function validateConstraint(arg: unknown, constraint: TypeConstraint | undefined): void {\n\n\tif (isString(constraint)) {\n\t\tif (typeof arg !== constraint) {\n\t\t\tthrow new Error(`argument does not match constraint: typeof ${constraint}`);\n\t\t}\n\t} else if (isFunction(constraint)) {\n\t\ttry {\n\t\t\tif (arg instanceof constraint) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t} catch {\n\t\t\t// ignore\n\t\t}\n\t\tif (!isUndefinedOrNull(arg) && (arg as any).constructor === constraint) {\n\t\t\treturn;\n\t\t}\n\t\tif (constraint.length === 1 && constraint.call(undefined, arg) === true) {\n\t\t\treturn;\n\t\t}\n\t\tthrow new Error(`argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true`);\n\t}\n}\n\nexport function getAllPropertyNames(obj: object): string[] {\n\tlet res: string[] = [];\n\tlet proto = Object.getPrototypeOf(obj);\n\twhile (Object.prototype !== proto) {\n\t\tres = res.concat(Object.getOwnPropertyNames(proto));\n\t\tproto = Object.getPrototypeOf(proto);\n\t}\n\treturn res;\n}\n\nexport function getAllMethodNames(obj: object): string[] {\n\tconst methods: string[] = [];\n\tfor (const prop of getAllPropertyNames(obj)) {\n\t\tif (typeof (obj as any)[prop] === 'function') {\n\t\t\tmethods.push(prop);\n\t\t}\n\t}\n\treturn methods;\n}\n\nexport function createProxyObject<T extends object>(methodNames: string[], invoke: (method: string, args: unknown[]) => unknown): T {\n\tconst createProxyMethod = (method: string): () => unknown => {\n\t\treturn function () {\n\t\t\tconst args = Array.prototype.slice.call(arguments, 0);\n\t\t\treturn invoke(method, args);\n\t\t};\n\t};\n\n\tlet result = {} as T;\n\tfor (const methodName of methodNames) {\n\t\t(<any>result)[methodName] = createProxyMethod(methodName);\n\t}\n\treturn result;\n}\n\n/**\n * Converts null to undefined, passes all other values through.\n */\nexport function withNullAsUndefined<T>(x: T | null): T | undefined {\n\treturn x === null ? undefined : x;\n}\n\n/**\n * Converts undefined to null, passes all other values through.\n */\nexport function withUndefinedAsNull<T>(x: T | undefined): T | null {\n\treturn typeof x === 'undefined' ? null : x;\n}\n\ntype AddFirstParameterToFunction<T, TargetFunctionsReturnType, FirstParameter> = T extends (...args: any[]) => TargetFunctionsReturnType ?\n\t// Function: add param to function\n\t(firstArg: FirstParameter, ...args: Parameters<T>) => ReturnType<T> :\n\n\t// Else: just leave as is\n\tT;\n\n/**\n * Allows to add a first parameter to functions of a type.\n */\nexport type AddFirstParameterToFunctions<Target, TargetFunctionsReturnType, FirstParameter> = {\n\t// For every property\n\t[K in keyof Target]: AddFirstParameterToFunction<Target[K], TargetFunctionsReturnType, FirstParameter>;\n};\n\n/**\n * Mapped-type that replaces all occurrences of URI with UriComponents\n */\nexport type UriDto<T> = { [K in keyof T]: T[K] extends URI\n\t? UriComponents\n\t: UriDto<T[K]> };\n\nexport function assertNever(value: never, message = 'Unreachable'): never {\n\tthrow new Error(message);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { CharCode } from './charCode';\nimport { MarshalledId } from './marshallingIds';\nimport * as paths from './path';\nimport { isWindows } from './platform';\n\nconst _schemePattern = /^\\w[\\w\\d+.-]*$/;\nconst _singleSlashStart = /^\\//;\nconst _doubleSlashStart = /^\\/\\//;\n\nfunction _validateUri(ret: URI, _strict?: boolean): void {\n\n\t// scheme, must be set\n\tif (!ret.scheme && _strict) {\n\t\tthrow new Error(`[UriError]: Scheme is missing: {scheme: \"\", authority: \"${ret.authority}\", path: \"${ret.path}\", query: \"${ret.query}\", fragment: \"${ret.fragment}\"}`);\n\t}\n\n\t// scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n\t// ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n\tif (ret.scheme && !_schemePattern.test(ret.scheme)) {\n\t\tthrow new Error('[UriError]: Scheme contains illegal characters.');\n\t}\n\n\t// path, http://tools.ietf.org/html/rfc3986#section-3.3\n\t// If a URI contains an authority component, then the path component\n\t// must either be empty or begin with a slash (\"/\") character.  If a URI\n\t// does not contain an authority component, then the path cannot begin\n\t// with two slash characters (\"//\").\n\tif (ret.path) {\n\t\tif (ret.authority) {\n\t\t\tif (!_singleSlashStart.test(ret.path)) {\n\t\t\t\tthrow new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n\t\t\t}\n\t\t} else {\n\t\t\tif (_doubleSlashStart.test(ret.path)) {\n\t\t\t\tthrow new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n\t\t\t}\n\t\t}\n\t}\n}\n\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme: string, _strict: boolean): string {\n\tif (!scheme && !_strict) {\n\t\treturn 'file';\n\t}\n\treturn scheme;\n}\n\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme: string, path: string): string {\n\n\t// the slash-character is our 'default base' as we don't\n\t// support constructing URIs relative to other URIs. This\n\t// also means that we alter and potentially break paths.\n\t// see https://tools.ietf.org/html/rfc3986#section-5.1.4\n\tswitch (scheme) {\n\t\tcase 'https':\n\t\tcase 'http':\n\t\tcase 'file':\n\t\t\tif (!path) {\n\t\t\t\tpath = _slash;\n\t\t\t} else if (path[0] !== _slash) {\n\t\t\t\tpath = _slash + path;\n\t\t\t}\n\t\t\tbreak;\n\t}\n\treturn path;\n}\n\nconst _empty = '';\nconst _slash = '/';\nconst _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nexport class URI implements UriComponents {\n\n\tstatic isUri(thing: any): thing is URI {\n\t\tif (thing instanceof URI) {\n\t\t\treturn true;\n\t\t}\n\t\tif (!thing) {\n\t\t\treturn false;\n\t\t}\n\t\treturn typeof (<URI>thing).authority === 'string'\n\t\t\t&& typeof (<URI>thing).fragment === 'string'\n\t\t\t&& typeof (<URI>thing).path === 'string'\n\t\t\t&& typeof (<URI>thing).query === 'string'\n\t\t\t&& typeof (<URI>thing).scheme === 'string'\n\t\t\t&& typeof (<URI>thing).fsPath === 'string'\n\t\t\t&& typeof (<URI>thing).with === 'function'\n\t\t\t&& typeof (<URI>thing).toString === 'function';\n\t}\n\n\t/**\n\t * scheme is the 'http' part of 'http://www.example.com/some/path?query#fragment'.\n\t * The part before the first colon.\n\t */\n\treadonly scheme: string;\n\n\t/**\n\t * authority is the 'www.example.com' part of 'http://www.example.com/some/path?query#fragment'.\n\t * The part between the first double slashes and the next slash.\n\t */\n\treadonly authority: string;\n\n\t/**\n\t * path is the '/some/path' part of 'http://www.example.com/some/path?query#fragment'.\n\t */\n\treadonly path: string;\n\n\t/**\n\t * query is the 'query' part of 'http://www.example.com/some/path?query#fragment'.\n\t */\n\treadonly query: string;\n\n\t/**\n\t * fragment is the 'fragment' part of 'http://www.example.com/some/path?query#fragment'.\n\t */\n\treadonly fragment: string;\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(scheme: string, authority?: string, path?: string, query?: string, fragment?: string, _strict?: boolean);\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(components: UriComponents);\n\n\t/**\n\t * @internal\n\t */\n\tprotected constructor(schemeOrData: string | UriComponents, authority?: string, path?: string, query?: string, fragment?: string, _strict: boolean = false) {\n\n\t\tif (typeof schemeOrData === 'object') {\n\t\t\tthis.scheme = schemeOrData.scheme || _empty;\n\t\t\tthis.authority = schemeOrData.authority || _empty;\n\t\t\tthis.path = schemeOrData.path || _empty;\n\t\t\tthis.query = schemeOrData.query || _empty;\n\t\t\tthis.fragment = schemeOrData.fragment || _empty;\n\t\t\t// no validation because it's this URI\n\t\t\t// that creates uri components.\n\t\t\t// _validateUri(this);\n\t\t} else {\n\t\t\tthis.scheme = _schemeFix(schemeOrData, _strict);\n\t\t\tthis.authority = authority || _empty;\n\t\t\tthis.path = _referenceResolution(this.scheme, path || _empty);\n\t\t\tthis.query = query || _empty;\n\t\t\tthis.fragment = fragment || _empty;\n\n\t\t\t_validateUri(this, _strict);\n\t\t}\n\t}\n\n\t// ---- filesystem path -----------------------\n\n\t/**\n\t * Returns a string representing the corresponding file system path of this URI.\n\t * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n\t * platform specific path separator.\n\t *\n\t * * Will *not* validate the path for invalid characters and semantics.\n\t * * Will *not* look at the scheme of this URI.\n\t * * The result shall *not* be used for display purposes but for accessing a file on disk.\n\t *\n\t *\n\t * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n\t * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n\t *\n\t * ```ts\n\t\tconst u = URI.parse('file://server/c$/folder/file.txt')\n\t\tu.authority === 'server'\n\t\tu.path === '/shares/c$/file.txt'\n\t\tu.fsPath === '\\\\server\\c$\\folder\\file.txt'\n\t```\n\t *\n\t * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n\t * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n\t * with URIs that represent files on disk (`file` scheme).\n\t */\n\tget fsPath(): string {\n\t\t// if (this.scheme !== 'file') {\n\t\t// \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n\t\t// }\n\t\treturn uriToFsPath(this, false);\n\t}\n\n\t// ---- modify to new -------------------------\n\n\twith(change: { scheme?: string; authority?: string | null; path?: string | null; query?: string | null; fragment?: string | null }): URI {\n\n\t\tif (!change) {\n\t\t\treturn this;\n\t\t}\n\n\t\tlet { scheme, authority, path, query, fragment } = change;\n\t\tif (scheme === undefined) {\n\t\t\tscheme = this.scheme;\n\t\t} else if (scheme === null) {\n\t\t\tscheme = _empty;\n\t\t}\n\t\tif (authority === undefined) {\n\t\t\tauthority = this.authority;\n\t\t} else if (authority === null) {\n\t\t\tauthority = _empty;\n\t\t}\n\t\tif (path === undefined) {\n\t\t\tpath = this.path;\n\t\t} else if (path === null) {\n\t\t\tpath = _empty;\n\t\t}\n\t\tif (query === undefined) {\n\t\t\tquery = this.query;\n\t\t} else if (query === null) {\n\t\t\tquery = _empty;\n\t\t}\n\t\tif (fragment === undefined) {\n\t\t\tfragment = this.fragment;\n\t\t} else if (fragment === null) {\n\t\t\tfragment = _empty;\n\t\t}\n\n\t\tif (scheme === this.scheme\n\t\t\t&& authority === this.authority\n\t\t\t&& path === this.path\n\t\t\t&& query === this.query\n\t\t\t&& fragment === this.fragment) {\n\n\t\t\treturn this;\n\t\t}\n\n\t\treturn new Uri(scheme, authority, path, query, fragment);\n\t}\n\n\t// ---- parse & validate ------------------------\n\n\t/**\n\t * Creates a new URI from a string, e.g. `http://www.example.com/some/path`,\n\t * `file:///usr/home`, or `scheme:with/path`.\n\t *\n\t * @param value A string which represents an URI (see `URI#toString`).\n\t */\n\tstatic parse(value: string, _strict: boolean = false): URI {\n\t\tconst match = _regexp.exec(value);\n\t\tif (!match) {\n\t\t\treturn new Uri(_empty, _empty, _empty, _empty, _empty);\n\t\t}\n\t\treturn new Uri(\n\t\t\tmatch[2] || _empty,\n\t\t\tpercentDecode(match[4] || _empty),\n\t\t\tpercentDecode(match[5] || _empty),\n\t\t\tpercentDecode(match[7] || _empty),\n\t\t\tpercentDecode(match[9] || _empty),\n\t\t\t_strict\n\t\t);\n\t}\n\n\t/**\n\t * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n\t * `/usr/home`, or `\\\\server\\share\\some\\path`.\n\t *\n\t * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n\t * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n\t * `URI.parse('file://' + path)` because the path might contain characters that are\n\t * interpreted (# and ?). See the following sample:\n\t * ```ts\n\tconst good = URI.file('/coding/c#/project1');\n\tgood.scheme === 'file';\n\tgood.path === '/coding/c#/project1';\n\tgood.fragment === '';\n\tconst bad = URI.parse('file://' + '/coding/c#/project1');\n\tbad.scheme === 'file';\n\tbad.path === '/coding/c'; // path is now broken\n\tbad.fragment === '/project1';\n\t```\n\t *\n\t * @param path A file system path (see `URI#fsPath`)\n\t */\n\tstatic file(path: string): URI {\n\n\t\tlet authority = _empty;\n\n\t\t// normalize to fwd-slashes on windows,\n\t\t// on other systems bwd-slashes are valid\n\t\t// filename character, eg /f\\oo/ba\\r.txt\n\t\tif (isWindows) {\n\t\t\tpath = path.replace(/\\\\/g, _slash);\n\t\t}\n\n\t\t// check for authority as used in UNC shares\n\t\t// or use the path as given\n\t\tif (path[0] === _slash && path[1] === _slash) {\n\t\t\tconst idx = path.indexOf(_slash, 2);\n\t\t\tif (idx === -1) {\n\t\t\t\tauthority = path.substring(2);\n\t\t\t\tpath = _slash;\n\t\t\t} else {\n\t\t\t\tauthority = path.substring(2, idx);\n\t\t\t\tpath = path.substring(idx) || _slash;\n\t\t\t}\n\t\t}\n\n\t\treturn new Uri('file', authority, path, _empty, _empty);\n\t}\n\n\tstatic from(components: { scheme: string; authority?: string; path?: string; query?: string; fragment?: string }): URI {\n\t\tconst result = new Uri(\n\t\t\tcomponents.scheme,\n\t\t\tcomponents.authority,\n\t\t\tcomponents.path,\n\t\t\tcomponents.query,\n\t\t\tcomponents.fragment,\n\t\t);\n\t\t_validateUri(result, true);\n\t\treturn result;\n\t}\n\n\t/**\n\t * Join a URI path with path fragments and normalizes the resulting path.\n\t *\n\t * @param uri The input URI.\n\t * @param pathFragment The path fragment to add to the URI path.\n\t * @returns The resulting URI.\n\t */\n\tstatic joinPath(uri: URI, ...pathFragment: string[]): URI {\n\t\tif (!uri.path) {\n\t\t\tthrow new Error(`[UriError]: cannot call joinPath on URI without path`);\n\t\t}\n\t\tlet newPath: string;\n\t\tif (isWindows && uri.scheme === 'file') {\n\t\t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n\t\t} else {\n\t\t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n\t\t}\n\t\treturn uri.with({ path: newPath });\n\t}\n\n\t// ---- printing/externalize ---------------------------\n\n\t/**\n\t * Creates a string representation for this URI. It's guaranteed that calling\n\t * `URI.parse` with the result of this function creates an URI which is equal\n\t * to this URI.\n\t *\n\t * * The result shall *not* be used for display purposes but for externalization or transport.\n\t * * The result will be encoded using the percentage encoding and encoding happens mostly\n\t * ignore the scheme-specific encoding rules.\n\t *\n\t * @param skipEncoding Do not encode the result, default is `false`\n\t */\n\ttoString(skipEncoding: boolean = false): string {\n\t\treturn _asFormatted(this, skipEncoding);\n\t}\n\n\ttoJSON(): UriComponents {\n\t\treturn this;\n\t}\n\n\tstatic revive(data: UriComponents | URI): URI;\n\tstatic revive(data: UriComponents | URI | undefined): URI | undefined;\n\tstatic revive(data: UriComponents | URI | null): URI | null;\n\tstatic revive(data: UriComponents | URI | undefined | null): URI | undefined | null;\n\tstatic revive(data: UriComponents | URI | undefined | null): URI | undefined | null {\n\t\tif (!data) {\n\t\t\treturn data;\n\t\t} else if (data instanceof URI) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst result = new Uri(data);\n\t\t\tresult._formatted = (<UriState>data).external;\n\t\t\tresult._fsPath = (<UriState>data)._sep === _pathSepMarker ? (<UriState>data).fsPath : null;\n\t\t\treturn result;\n\t\t}\n\t}\n}\n\nexport interface UriComponents {\n\tscheme: string;\n\tauthority: string;\n\tpath: string;\n\tquery: string;\n\tfragment: string;\n}\n\ninterface UriState extends UriComponents {\n\t$mid: MarshalledId.Uri;\n\texternal: string;\n\tfsPath: string;\n\t_sep: 1 | undefined;\n}\n\nconst _pathSepMarker = isWindows ? 1 : undefined;\n\n// This class exists so that URI is compatible with vscode.Uri (API).\nclass Uri extends URI {\n\n\t_formatted: string | null = null;\n\t_fsPath: string | null = null;\n\n\toverride get fsPath(): string {\n\t\tif (!this._fsPath) {\n\t\t\tthis._fsPath = uriToFsPath(this, false);\n\t\t}\n\t\treturn this._fsPath;\n\t}\n\n\toverride toString(skipEncoding: boolean = false): string {\n\t\tif (!skipEncoding) {\n\t\t\tif (!this._formatted) {\n\t\t\t\tthis._formatted = _asFormatted(this, false);\n\t\t\t}\n\t\t\treturn this._formatted;\n\t\t} else {\n\t\t\t// we don't cache that\n\t\t\treturn _asFormatted(this, true);\n\t\t}\n\t}\n\n\toverride toJSON(): UriComponents {\n\t\tconst res = <UriState>{\n\t\t\t$mid: MarshalledId.Uri\n\t\t};\n\t\t// cached state\n\t\tif (this._fsPath) {\n\t\t\tres.fsPath = this._fsPath;\n\t\t\tres._sep = _pathSepMarker;\n\t\t}\n\t\tif (this._formatted) {\n\t\t\tres.external = this._formatted;\n\t\t}\n\t\t// uri components\n\t\tif (this.path) {\n\t\t\tres.path = this.path;\n\t\t}\n\t\tif (this.scheme) {\n\t\t\tres.scheme = this.scheme;\n\t\t}\n\t\tif (this.authority) {\n\t\t\tres.authority = this.authority;\n\t\t}\n\t\tif (this.query) {\n\t\t\tres.query = this.query;\n\t\t}\n\t\tif (this.fragment) {\n\t\t\tres.fragment = this.fragment;\n\t\t}\n\t\treturn res;\n\t}\n}\n\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nconst encodeTable: { [ch: number]: string } = {\n\t[CharCode.Colon]: '%3A', // gen-delims\n\t[CharCode.Slash]: '%2F',\n\t[CharCode.QuestionMark]: '%3F',\n\t[CharCode.Hash]: '%23',\n\t[CharCode.OpenSquareBracket]: '%5B',\n\t[CharCode.CloseSquareBracket]: '%5D',\n\t[CharCode.AtSign]: '%40',\n\n\t[CharCode.ExclamationMark]: '%21', // sub-delims\n\t[CharCode.DollarSign]: '%24',\n\t[CharCode.Ampersand]: '%26',\n\t[CharCode.SingleQuote]: '%27',\n\t[CharCode.OpenParen]: '%28',\n\t[CharCode.CloseParen]: '%29',\n\t[CharCode.Asterisk]: '%2A',\n\t[CharCode.Plus]: '%2B',\n\t[CharCode.Comma]: '%2C',\n\t[CharCode.Semicolon]: '%3B',\n\t[CharCode.Equals]: '%3D',\n\n\t[CharCode.Space]: '%20',\n};\n\nfunction encodeURIComponentFast(uriComponent: string, allowSlash: boolean): string {\n\tlet res: string | undefined = undefined;\n\tlet nativeEncodePos = -1;\n\n\tfor (let pos = 0; pos < uriComponent.length; pos++) {\n\t\tconst code = uriComponent.charCodeAt(pos);\n\n\t\t// unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n\t\tif (\n\t\t\t(code >= CharCode.a && code <= CharCode.z)\n\t\t\t|| (code >= CharCode.A && code <= CharCode.Z)\n\t\t\t|| (code >= CharCode.Digit0 && code <= CharCode.Digit9)\n\t\t\t|| code === CharCode.Dash\n\t\t\t|| code === CharCode.Period\n\t\t\t|| code === CharCode.Underline\n\t\t\t|| code === CharCode.Tilde\n\t\t\t|| (allowSlash && code === CharCode.Slash)\n\t\t) {\n\t\t\t// check if we are delaying native encode\n\t\t\tif (nativeEncodePos !== -1) {\n\t\t\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n\t\t\t\tnativeEncodePos = -1;\n\t\t\t}\n\t\t\t// check if we write into a new string (by default we try to return the param)\n\t\t\tif (res !== undefined) {\n\t\t\t\tres += uriComponent.charAt(pos);\n\t\t\t}\n\n\t\t} else {\n\t\t\t// encoding needed, we need to allocate a new string\n\t\t\tif (res === undefined) {\n\t\t\t\tres = uriComponent.substr(0, pos);\n\t\t\t}\n\n\t\t\t// check with default table first\n\t\t\tconst escaped = encodeTable[code];\n\t\t\tif (escaped !== undefined) {\n\n\t\t\t\t// check if we are delaying native encode\n\t\t\t\tif (nativeEncodePos !== -1) {\n\t\t\t\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n\t\t\t\t\tnativeEncodePos = -1;\n\t\t\t\t}\n\n\t\t\t\t// append escaped variant to result\n\t\t\t\tres += escaped;\n\n\t\t\t} else if (nativeEncodePos === -1) {\n\t\t\t\t// use native encode only when needed\n\t\t\t\tnativeEncodePos = pos;\n\t\t\t}\n\t\t}\n\t}\n\n\tif (nativeEncodePos !== -1) {\n\t\tres += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n\t}\n\n\treturn res !== undefined ? res : uriComponent;\n}\n\nfunction encodeURIComponentMinimal(path: string): string {\n\tlet res: string | undefined = undefined;\n\tfor (let pos = 0; pos < path.length; pos++) {\n\t\tconst code = path.charCodeAt(pos);\n\t\tif (code === CharCode.Hash || code === CharCode.QuestionMark) {\n\t\t\tif (res === undefined) {\n\t\t\t\tres = path.substr(0, pos);\n\t\t\t}\n\t\t\tres += encodeTable[code];\n\t\t} else {\n\t\t\tif (res !== undefined) {\n\t\t\t\tres += path[pos];\n\t\t\t}\n\t\t}\n\t}\n\treturn res !== undefined ? res : path;\n}\n\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri: URI, keepDriveLetterCasing: boolean): string {\n\n\tlet value: string;\n\tif (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n\t\t// unc path: file://shares/c$/far/boo\n\t\tvalue = `//${uri.authority}${uri.path}`;\n\t} else if (\n\t\turi.path.charCodeAt(0) === CharCode.Slash\n\t\t&& (uri.path.charCodeAt(1) >= CharCode.A && uri.path.charCodeAt(1) <= CharCode.Z || uri.path.charCodeAt(1) >= CharCode.a && uri.path.charCodeAt(1) <= CharCode.z)\n\t\t&& uri.path.charCodeAt(2) === CharCode.Colon\n\t) {\n\t\tif (!keepDriveLetterCasing) {\n\t\t\t// windows drive letter: file:///c:/far/boo\n\t\t\tvalue = uri.path[1].toLowerCase() + uri.path.substr(2);\n\t\t} else {\n\t\t\tvalue = uri.path.substr(1);\n\t\t}\n\t} else {\n\t\t// other path\n\t\tvalue = uri.path;\n\t}\n\tif (isWindows) {\n\t\tvalue = value.replace(/\\//g, '\\\\');\n\t}\n\treturn value;\n}\n\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri: URI, skipEncoding: boolean): string {\n\n\tconst encoder = !skipEncoding\n\t\t? encodeURIComponentFast\n\t\t: encodeURIComponentMinimal;\n\n\tlet res = '';\n\tlet { scheme, authority, path, query, fragment } = uri;\n\tif (scheme) {\n\t\tres += scheme;\n\t\tres += ':';\n\t}\n\tif (authority || scheme === 'file') {\n\t\tres += _slash;\n\t\tres += _slash;\n\t}\n\tif (authority) {\n\t\tlet idx = authority.indexOf('@');\n\t\tif (idx !== -1) {\n\t\t\t// <user>@<auth>\n\t\t\tconst userinfo = authority.substr(0, idx);\n\t\t\tauthority = authority.substr(idx + 1);\n\t\t\tidx = userinfo.indexOf(':');\n\t\t\tif (idx === -1) {\n\t\t\t\tres += encoder(userinfo, false);\n\t\t\t} else {\n\t\t\t\t// <user>:<pass>@<auth>\n\t\t\t\tres += encoder(userinfo.substr(0, idx), false);\n\t\t\t\tres += ':';\n\t\t\t\tres += encoder(userinfo.substr(idx + 1), false);\n\t\t\t}\n\t\t\tres += '@';\n\t\t}\n\t\tauthority = authority.toLowerCase();\n\t\tidx = authority.indexOf(':');\n\t\tif (idx === -1) {\n\t\t\tres += encoder(authority, false);\n\t\t} else {\n\t\t\t// <auth>:<port>\n\t\t\tres += encoder(authority.substr(0, idx), false);\n\t\t\tres += authority.substr(idx);\n\t\t}\n\t}\n\tif (path) {\n\t\t// lower-case windows drive letters in /C:/fff or C:/fff\n\t\tif (path.length >= 3 && path.charCodeAt(0) === CharCode.Slash && path.charCodeAt(2) === CharCode.Colon) {\n\t\t\tconst code = path.charCodeAt(1);\n\t\t\tif (code >= CharCode.A && code <= CharCode.Z) {\n\t\t\t\tpath = `/${String.fromCharCode(code + 32)}:${path.substr(3)}`; // \"/c:\".length === 3\n\t\t\t}\n\t\t} else if (path.length >= 2 && path.charCodeAt(1) === CharCode.Colon) {\n\t\t\tconst code = path.charCodeAt(0);\n\t\t\tif (code >= CharCode.A && code <= CharCode.Z) {\n\t\t\t\tpath = `${String.fromCharCode(code + 32)}:${path.substr(2)}`; // \"/c:\".length === 3\n\t\t\t}\n\t\t}\n\t\t// encode the rest of the path\n\t\tres += encoder(path, true);\n\t}\n\tif (query) {\n\t\tres += '?';\n\t\tres += encoder(query, false);\n\t}\n\tif (fragment) {\n\t\tres += '#';\n\t\tres += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n\t}\n\treturn res;\n}\n\n// --- decode\n\nfunction decodeURIComponentGraceful(str: string): string {\n\ttry {\n\t\treturn decodeURIComponent(str);\n\t} catch {\n\t\tif (str.length > 3) {\n\t\t\treturn str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n\t\t} else {\n\t\t\treturn str;\n\t\t}\n\t}\n}\n\nconst _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\n\nfunction percentDecode(str: string): string {\n\tif (!str.match(_rEncodedAsHex)) {\n\t\treturn str;\n\t}\n\treturn str.replace(_rEncodedAsHex, (match) => decodeURIComponentGraceful(match));\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport interface ILocalizeInfo {\n\tkey: string;\n\tcomment: string[];\n}\n\nfunction _format(message: string, args: any[]): string {\n\tlet result: string;\n\tif (args.length === 0) {\n\t\tresult = message;\n\t} else {\n\t\tresult = message.replace(/\\{(\\d+)\\}/g, function (match, rest) {\n\t\t\tconst index = rest[0];\n\t\t\treturn typeof args[index] !== 'undefined' ? args[index] : match;\n\t\t});\n\t}\n\treturn result;\n}\n\nexport function localize(data: ILocalizeInfo | string, message: string, ...args: any[]): string {\n\treturn _format(message, args);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Event } from '../../../base/common/event';\nimport * as types from '../../../base/common/types';\nimport { URI, UriComponents } from '../../../base/common/uri';\nimport { createDecorator } from '../../instantiation/common/instantiation';\nimport { IWorkspaceFolder } from '../../workspace/common/workspace';\n\nexport const IConfigurationService = createDecorator<IConfigurationService>('configurationService');\n\nexport function isConfigurationOverrides(thing: any): thing is IConfigurationOverrides {\n\treturn thing\n\t\t&& typeof thing === 'object'\n\t\t&& (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n\t\t&& (!thing.resource || thing.resource instanceof URI);\n}\n\nexport interface IConfigurationOverrides {\n\toverrideIdentifier?: string | null;\n\tresource?: URI | null;\n}\n\nexport function isConfigurationUpdateOverrides(thing: any): thing is IConfigurationUpdateOverrides {\n\treturn thing\n\t\t&& typeof thing === 'object'\n\t\t&& (!thing.overrideIdentifiers || types.isArray(thing.overrideIdentifiers))\n\t\t&& !thing.overrideIdentifier\n\t\t&& (!thing.resource || thing.resource instanceof URI);\n}\n\nexport type IConfigurationUpdateOverrides = Omit<IConfigurationOverrides, 'overrideIdentifier'> & { overrideIdentifiers?: string[] | null };\n\nexport const enum ConfigurationTarget {\n\tUSER = 1,\n\tUSER_LOCAL,\n\tUSER_REMOTE,\n\tWORKSPACE,\n\tWORKSPACE_FOLDER,\n\tDEFAULT,\n\tMEMORY\n}\nexport function ConfigurationTargetToString(configurationTarget: ConfigurationTarget) {\n\tswitch (configurationTarget) {\n\t\tcase ConfigurationTarget.USER: return 'USER';\n\t\tcase ConfigurationTarget.USER_LOCAL: return 'USER_LOCAL';\n\t\tcase ConfigurationTarget.USER_REMOTE: return 'USER_REMOTE';\n\t\tcase ConfigurationTarget.WORKSPACE: return 'WORKSPACE';\n\t\tcase ConfigurationTarget.WORKSPACE_FOLDER: return 'WORKSPACE_FOLDER';\n\t\tcase ConfigurationTarget.DEFAULT: return 'DEFAULT';\n\t\tcase ConfigurationTarget.MEMORY: return 'MEMORY';\n\t}\n}\n\nexport interface IConfigurationChange {\n\tkeys: string[];\n\toverrides: [string, string[]][];\n}\n\nexport interface IConfigurationChangeEvent {\n\n\treadonly source: ConfigurationTarget;\n\treadonly affectedKeys: string[];\n\treadonly change: IConfigurationChange;\n\n\taffectsConfiguration(configuration: string, overrides?: IConfigurationOverrides): boolean;\n\n\t// Following data is used for telemetry\n\treadonly sourceConfig: any;\n}\n\nexport interface IConfigurationValue<T> {\n\n\treadonly defaultValue?: T;\n\treadonly userValue?: T;\n\treadonly userLocalValue?: T;\n\treadonly userRemoteValue?: T;\n\treadonly workspaceValue?: T;\n\treadonly workspaceFolderValue?: T;\n\treadonly memoryValue?: T;\n\treadonly value?: T;\n\n\treadonly default?: { value?: T; override?: T };\n\treadonly user?: { value?: T; override?: T };\n\treadonly userLocal?: { value?: T; override?: T };\n\treadonly userRemote?: { value?: T; override?: T };\n\treadonly workspace?: { value?: T; override?: T };\n\treadonly workspaceFolder?: { value?: T; override?: T };\n\treadonly memory?: { value?: T; override?: T };\n\n\treadonly overrideIdentifiers?: string[];\n}\n\nexport interface IConfigurationService {\n\treadonly _serviceBrand: undefined;\n\n\tonDidChangeConfiguration: Event<IConfigurationChangeEvent>;\n\n\tgetConfigurationData(): IConfigurationData | null;\n\n\t/**\n\t * Fetches the value of the section for the given overrides.\n\t * Value can be of native type or an object keyed off the section name.\n\t *\n\t * @param section - Section of the configuraion. Can be `null` or `undefined`.\n\t * @param overrides - Overrides that has to be applied while fetching\n\t *\n\t */\n\tgetValue<T>(): T;\n\tgetValue<T>(section: string): T;\n\tgetValue<T>(overrides: IConfigurationOverrides): T;\n\tgetValue<T>(section: string, overrides: IConfigurationOverrides): T;\n\n\t/**\n\t * Update a configuration value.\n\t *\n\t * Use `target` to update the configuration in a specific `ConfigurationTarget`.\n\t *\n\t * Use `overrides` to update the configuration for a resource or for override identifiers or both.\n\t *\n\t * Passing a resource through overrides will update the configuration in the workspace folder containing that resource.\n\t *\n\t * *Note 1:* Updating configuraiton to a default value will remove the configuration from the requested target. If not target is passed, it will be removed from all writeable targets.\n\t *\n\t * *Note 2:* Use `undefined` value to remove the configuration from the given target. If not target is passed, it will be removed from all writeable targets.\n\t *\n\t * Use `donotNotifyError` and set it to `true` to surpresss errors.\n\t *\n\t * @param key setting to be updated\n\t * @param value The new value\n\t */\n\tupdateValue(key: string, value: any): Promise<void>;\n\tupdateValue(key: string, value: any, target: ConfigurationTarget): Promise<void>;\n\tupdateValue(key: string, value: any, overrides: IConfigurationOverrides | IConfigurationUpdateOverrides): Promise<void>;\n\tupdateValue(key: string, value: any, overrides: IConfigurationOverrides | IConfigurationUpdateOverrides, target: ConfigurationTarget, donotNotifyError?: boolean): Promise<void>;\n\n\tinspect<T>(key: string, overrides?: IConfigurationOverrides): IConfigurationValue<Readonly<T>>;\n\n\treloadConfiguration(target?: ConfigurationTarget | IWorkspaceFolder): Promise<void>;\n\n\tkeys(): {\n\t\tdefault: string[];\n\t\tuser: string[];\n\t\tworkspace: string[];\n\t\tworkspaceFolder: string[];\n\t\tmemory?: string[];\n\t};\n}\n\nexport interface IConfigurationModel {\n\tcontents: any;\n\tkeys: string[];\n\toverrides: IOverrides[];\n}\n\nexport interface IOverrides {\n\tkeys: string[];\n\tcontents: any;\n\tidentifiers: string[];\n}\n\nexport interface IConfigurationData {\n\tdefaults: IConfigurationModel;\n\tuser: IConfigurationModel;\n\tworkspace: IConfigurationModel;\n\tfolders: [UriComponents, IConfigurationModel][];\n}\n\nexport interface IConfigurationCompareResult {\n\tadded: string[];\n\tremoved: string[];\n\tupdated: string[];\n\toverrides: [string, string[]][];\n}\n\nexport function toValuesTree(properties: { [qualifiedKey: string]: any }, conflictReporter: (message: string) => void): any {\n\tconst root = Object.create(null);\n\n\tfor (let key in properties) {\n\t\taddToValueTree(root, key, properties[key], conflictReporter);\n\t}\n\n\treturn root;\n}\n\nexport function addToValueTree(settingsTreeRoot: any, key: string, value: any, conflictReporter: (message: string) => void): void {\n\tconst segments = key.split('.');\n\tconst last = segments.pop()!;\n\n\tlet curr = settingsTreeRoot;\n\tfor (let i = 0; i < segments.length; i++) {\n\t\tlet s = segments[i];\n\t\tlet obj = curr[s];\n\t\tswitch (typeof obj) {\n\t\t\tcase 'undefined':\n\t\t\t\tobj = curr[s] = Object.create(null);\n\t\t\t\tbreak;\n\t\t\tcase 'object':\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tconflictReporter(`Ignoring ${key} as ${segments.slice(0, i + 1).join('.')} is ${JSON.stringify(obj)}`);\n\t\t\t\treturn;\n\t\t}\n\t\tcurr = obj;\n\t}\n\n\tif (typeof curr === 'object' && curr !== null) {\n\t\ttry {\n\t\t\tcurr[last] = value; // workaround https://github.com/microsoft/vscode/issues/13606\n\t\t} catch (e) {\n\t\t\tconflictReporter(`Ignoring ${key} as ${segments.join('.')} is ${JSON.stringify(curr)}`);\n\t\t}\n\t} else {\n\t\tconflictReporter(`Ignoring ${key} as ${segments.join('.')} is ${JSON.stringify(curr)}`);\n\t}\n}\n\nexport function removeFromValueTree(valueTree: any, key: string): void {\n\tconst segments = key.split('.');\n\tdoRemoveFromValueTree(valueTree, segments);\n}\n\nfunction doRemoveFromValueTree(valueTree: any, segments: string[]): void {\n\tconst first = segments.shift()!;\n\tif (segments.length === 0) {\n\t\t// Reached last segment\n\t\tdelete valueTree[first];\n\t\treturn;\n\t}\n\n\tif (Object.keys(valueTree).indexOf(first) !== -1) {\n\t\tconst value = valueTree[first];\n\t\tif (typeof value === 'object' && !Array.isArray(value)) {\n\t\t\tdoRemoveFromValueTree(value, segments);\n\t\t\tif (Object.keys(value).length === 0) {\n\t\t\t\tdelete valueTree[first];\n\t\t\t}\n\t\t}\n\t}\n}\n\n/**\n * A helper function to get the configuration value with a specific settings path (e.g. config.some.setting)\n */\nexport function getConfigurationValue<T>(config: any, settingPath: string, defaultValue?: T): T {\n\tfunction accessSetting(config: any, path: string[]): any {\n\t\tlet current = config;\n\t\tfor (const component of path) {\n\t\t\tif (typeof current !== 'object' || current === null) {\n\t\t\t\treturn undefined;\n\t\t\t}\n\t\t\tcurrent = current[component];\n\t\t}\n\t\treturn <T>current;\n\t}\n\n\tconst path = settingPath.split('.');\n\tconst result = accessSetting(config, path);\n\n\treturn typeof result === 'undefined' ? defaultValue : result;\n}\n\nexport function merge(base: any, add: any, overwrite: boolean): void {\n\tObject.keys(add).forEach(key => {\n\t\tif (key !== '__proto__') {\n\t\t\tif (key in base) {\n\t\t\t\tif (types.isObject(base[key]) && types.isObject(add[key])) {\n\t\t\t\t\tmerge(base[key], add[key], overwrite);\n\t\t\t\t} else if (overwrite) {\n\t\t\t\t\tbase[key] = add[key];\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tbase[key] = add[key];\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function getMigratedSettingValue<T>(configurationService: IConfigurationService, currentSettingName: string, legacySettingName: string): T {\n\tconst setting = configurationService.inspect<T>(currentSettingName);\n\tconst legacySetting = configurationService.inspect<T>(legacySettingName);\n\n\tif (typeof setting.userValue !== 'undefined' || typeof setting.workspaceValue !== 'undefined' || typeof setting.workspaceFolderValue !== 'undefined') {\n\t\treturn setting.value!;\n\t} else if (typeof legacySetting.userValue !== 'undefined' || typeof legacySetting.workspaceValue !== 'undefined' || typeof legacySetting.workspaceFolderValue !== 'undefined') {\n\t\treturn legacySetting.value!;\n\t} else {\n\t\treturn setting.defaultValue!;\n\t}\n}\n\nexport function getLanguageTagSettingPlainKey(settingKey: string) {\n\treturn settingKey.replace(/[\\[\\]]/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as arrays from '../../../base/common/arrays';\nimport { IStringDictionary } from '../../../base/common/collections';\nimport { Emitter, Event } from '../../../base/common/event';\nimport * as json from '../../../base/common/json';\nimport { Disposable } from '../../../base/common/lifecycle';\nimport { getOrSet, ResourceMap } from '../../../base/common/map';\nimport * as objects from '../../../base/common/objects';\nimport { IExtUri } from '../../../base/common/resources';\nimport * as types from '../../../base/common/types';\nimport { URI, UriComponents } from '../../../base/common/uri';\nimport { addToValueTree, ConfigurationTarget, getConfigurationValue, IConfigurationChange, IConfigurationChangeEvent, IConfigurationCompareResult, IConfigurationData, IConfigurationModel, IConfigurationOverrides, IConfigurationUpdateOverrides, IConfigurationValue, IOverrides, removeFromValueTree, toValuesTree } from './configuration';\nimport { ConfigurationScope, Extensions, IConfigurationPropertySchema, IConfigurationRegistry, overrideIdentifiersFromKey, OVERRIDE_PROPERTY_REGEX } from './configurationRegistry';\nimport { FileOperation, IFileService } from '../../files/common/files';\nimport { Registry } from '../../registry/common/platform';\nimport { Workspace } from '../../workspace/common/workspace';\n\nexport class ConfigurationModel implements IConfigurationModel {\n\n\tprivate isFrozen: boolean = false;\n\tprivate readonly overrideConfigurations = new Map<string, ConfigurationModel>();\n\n\tconstructor(\n\t\tprivate readonly _contents: any = {},\n\t\tprivate readonly _keys: string[] = [],\n\t\tprivate readonly _overrides: IOverrides[] = []\n\t) {\n\t}\n\n\tget contents(): any {\n\t\treturn this.checkAndFreeze(this._contents);\n\t}\n\n\tget overrides(): IOverrides[] {\n\t\treturn this.checkAndFreeze(this._overrides);\n\t}\n\n\tget keys(): string[] {\n\t\treturn this.checkAndFreeze(this._keys);\n\t}\n\n\tisEmpty(): boolean {\n\t\treturn this._keys.length === 0 && Object.keys(this._contents).length === 0 && this._overrides.length === 0;\n\t}\n\n\tgetValue<V>(section: string | undefined): V {\n\t\treturn section ? getConfigurationValue<any>(this.contents, section) : this.contents;\n\t}\n\n\tgetOverrideValue<V>(section: string | undefined, overrideIdentifier: string): V | undefined {\n\t\tconst overrideContents = this.getContentsForOverrideIdentifer(overrideIdentifier);\n\t\treturn overrideContents\n\t\t\t? section ? getConfigurationValue<any>(overrideContents, section) : overrideContents\n\t\t\t: undefined;\n\t}\n\n\tgetKeysForOverrideIdentifier(identifier: string): string[] {\n\t\tconst keys: string[] = [];\n\t\tfor (const override of this.overrides) {\n\t\t\tif (override.identifiers.includes(identifier)) {\n\t\t\t\tkeys.push(...override.keys);\n\t\t\t}\n\t\t}\n\t\treturn arrays.distinct(keys);\n\t}\n\n\tgetAllOverrideIdentifiers(): string[] {\n\t\tconst result: string[] = [];\n\t\tfor (const override of this.overrides) {\n\t\t\tresult.push(...override.identifiers);\n\t\t}\n\t\treturn arrays.distinct(result);\n\t}\n\n\toverride(identifier: string): ConfigurationModel {\n\t\tlet overrideConfigurationModel = this.overrideConfigurations.get(identifier);\n\t\tif (!overrideConfigurationModel) {\n\t\t\toverrideConfigurationModel = this.createOverrideConfigurationModel(identifier);\n\t\t\tthis.overrideConfigurations.set(identifier, overrideConfigurationModel);\n\t\t}\n\t\treturn overrideConfigurationModel;\n\t}\n\n\tmerge(...others: ConfigurationModel[]): ConfigurationModel {\n\t\tconst contents = objects.deepClone(this.contents);\n\t\tconst overrides = objects.deepClone(this.overrides);\n\t\tconst keys = [...this.keys];\n\n\t\tfor (const other of others) {\n\t\t\tthis.mergeContents(contents, other.contents);\n\n\t\t\tfor (const otherOverride of other.overrides) {\n\t\t\t\tconst [override] = overrides.filter(o => arrays.equals(o.identifiers, otherOverride.identifiers));\n\t\t\t\tif (override) {\n\t\t\t\t\tthis.mergeContents(override.contents, otherOverride.contents);\n\t\t\t\t\toverride.keys.push(...otherOverride.keys);\n\t\t\t\t\toverride.keys = arrays.distinct(override.keys);\n\t\t\t\t} else {\n\t\t\t\t\toverrides.push(objects.deepClone(otherOverride));\n\t\t\t\t}\n\t\t\t}\n\t\t\tfor (const key of other.keys) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn new ConfigurationModel(contents, keys, overrides);\n\t}\n\n\tfreeze(): ConfigurationModel {\n\t\tthis.isFrozen = true;\n\t\treturn this;\n\t}\n\n\tprivate createOverrideConfigurationModel(identifier: string): ConfigurationModel {\n\t\tconst overrideContents = this.getContentsForOverrideIdentifer(identifier);\n\n\t\tif (!overrideContents || typeof overrideContents !== 'object' || !Object.keys(overrideContents).length) {\n\t\t\t// If there are no valid overrides, return self\n\t\t\treturn this;\n\t\t}\n\n\t\tlet contents: any = {};\n\t\tfor (const key of arrays.distinct([...Object.keys(this.contents), ...Object.keys(overrideContents)])) {\n\n\t\t\tlet contentsForKey = this.contents[key];\n\t\t\tlet overrideContentsForKey = overrideContents[key];\n\n\t\t\t// If there are override contents for the key, clone and merge otherwise use base contents\n\t\t\tif (overrideContentsForKey) {\n\t\t\t\t// Clone and merge only if base contents and override contents are of type object otherwise just override\n\t\t\t\tif (typeof contentsForKey === 'object' && typeof overrideContentsForKey === 'object') {\n\t\t\t\t\tcontentsForKey = objects.deepClone(contentsForKey);\n\t\t\t\t\tthis.mergeContents(contentsForKey, overrideContentsForKey);\n\t\t\t\t} else {\n\t\t\t\t\tcontentsForKey = overrideContentsForKey;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcontents[key] = contentsForKey;\n\t\t}\n\n\t\treturn new ConfigurationModel(contents, this.keys, this.overrides);\n\t}\n\n\tprivate mergeContents(source: any, target: any): void {\n\t\tfor (const key of Object.keys(target)) {\n\t\t\tif (key in source) {\n\t\t\t\tif (types.isObject(source[key]) && types.isObject(target[key])) {\n\t\t\t\t\tthis.mergeContents(source[key], target[key]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t}\n\t\t\tsource[key] = objects.deepClone(target[key]);\n\t\t}\n\t}\n\n\tprivate checkAndFreeze<T>(data: T): T {\n\t\tif (this.isFrozen && !Object.isFrozen(data)) {\n\t\t\treturn objects.deepFreeze(data);\n\t\t}\n\t\treturn data;\n\t}\n\n\tprivate getContentsForOverrideIdentifer(identifier: string): any {\n\t\tlet contentsForIdentifierOnly: IStringDictionary<any> | null = null;\n\t\tlet contents: IStringDictionary<any> | null = null;\n\t\tconst mergeContents = (contentsToMerge: any) => {\n\t\t\tif (contentsToMerge) {\n\t\t\t\tif (contents) {\n\t\t\t\t\tthis.mergeContents(contents, contentsToMerge);\n\t\t\t\t} else {\n\t\t\t\t\tcontents = objects.deepClone(contentsToMerge);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tfor (const override of this.overrides) {\n\t\t\tif (arrays.equals(override.identifiers, [identifier])) {\n\t\t\t\tcontentsForIdentifierOnly = override.contents;\n\t\t\t} else if (override.identifiers.includes(identifier)) {\n\t\t\t\tmergeContents(override.contents);\n\t\t\t}\n\t\t}\n\t\t// Merge contents of the identifier only at the end to take precedence.\n\t\tmergeContents(contentsForIdentifierOnly);\n\t\treturn contents;\n\t}\n\n\ttoJSON(): IConfigurationModel {\n\t\treturn {\n\t\t\tcontents: this.contents,\n\t\t\toverrides: this.overrides,\n\t\t\tkeys: this.keys\n\t\t};\n\t}\n\n\t// Update methods\n\n\tpublic setValue(key: string, value: any) {\n\t\tthis.addKey(key);\n\t\taddToValueTree(this.contents, key, value, e => { throw new Error(e); });\n\t}\n\n\tpublic removeValue(key: string): void {\n\t\tif (this.removeKey(key)) {\n\t\t\tremoveFromValueTree(this.contents, key);\n\t\t}\n\t}\n\n\tprivate addKey(key: string): void {\n\t\tlet index = this.keys.length;\n\t\tfor (let i = 0; i < index; i++) {\n\t\t\tif (key.indexOf(this.keys[i]) === 0) {\n\t\t\t\tindex = i;\n\t\t\t}\n\t\t}\n\t\tthis.keys.splice(index, 1, key);\n\t}\n\n\tprivate removeKey(key: string): boolean {\n\t\tlet index = this.keys.indexOf(key);\n\t\tif (index !== -1) {\n\t\t\tthis.keys.splice(index, 1);\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n}\n\nexport class DefaultConfigurationModel extends ConfigurationModel {\n\n\tconstructor(configurationDefaultsOverrides: IStringDictionary<any> = {}) {\n\t\tconst properties = Registry.as<IConfigurationRegistry>(Extensions.Configuration).getConfigurationProperties();\n\t\tconst keys = Object.keys(properties);\n\t\tconst contents: any = Object.create(null);\n\t\tconst overrides: IOverrides[] = [];\n\n\t\tfor (const key in properties) {\n\t\t\tconst defaultOverrideValue = configurationDefaultsOverrides[key];\n\t\t\tconst value = defaultOverrideValue !== undefined ? defaultOverrideValue : properties[key].default;\n\t\t\taddToValueTree(contents, key, value, message => console.error(`Conflict in default settings: ${message}`));\n\t\t}\n\t\tfor (const key of Object.keys(contents)) {\n\t\t\tif (OVERRIDE_PROPERTY_REGEX.test(key)) {\n\t\t\t\toverrides.push({\n\t\t\t\t\tidentifiers: overrideIdentifiersFromKey(key),\n\t\t\t\t\tkeys: Object.keys(contents[key]),\n\t\t\t\t\tcontents: toValuesTree(contents[key], message => console.error(`Conflict in default settings file: ${message}`)),\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\tsuper(contents, keys, overrides);\n\t}\n}\n\nexport interface ConfigurationParseOptions {\n\tscopes: ConfigurationScope[] | undefined;\n\tskipRestricted?: boolean;\n}\n\nexport class ConfigurationModelParser {\n\n\tprivate _raw: any = null;\n\tprivate _configurationModel: ConfigurationModel | null = null;\n\tprivate _restrictedConfigurations: string[] = [];\n\tprivate _parseErrors: any[] = [];\n\n\tconstructor(protected readonly _name: string) { }\n\n\tget configurationModel(): ConfigurationModel {\n\t\treturn this._configurationModel || new ConfigurationModel();\n\t}\n\n\tget restrictedConfigurations(): string[] {\n\t\treturn this._restrictedConfigurations;\n\t}\n\n\tget errors(): any[] {\n\t\treturn this._parseErrors;\n\t}\n\n\tpublic parse(content: string | null | undefined, options?: ConfigurationParseOptions): void {\n\t\tif (!types.isUndefinedOrNull(content)) {\n\t\t\tconst raw = this.doParseContent(content);\n\t\t\tthis.parseRaw(raw, options);\n\t\t}\n\t}\n\n\tpublic reparse(options: ConfigurationParseOptions): void {\n\t\tif (this._raw) {\n\t\t\tthis.parseRaw(this._raw, options);\n\t\t}\n\t}\n\n\tpublic parseRaw(raw: any, options?: ConfigurationParseOptions): void {\n\t\tthis._raw = raw;\n\t\tconst { contents, keys, overrides, restricted } = this.doParseRaw(raw, options);\n\t\tthis._configurationModel = new ConfigurationModel(contents, keys, overrides);\n\t\tthis._restrictedConfigurations = restricted || [];\n\t}\n\n\tprivate doParseContent(content: string): any {\n\t\tlet raw: any = {};\n\t\tlet currentProperty: string | null = null;\n\t\tlet currentParent: any = [];\n\t\tlet previousParents: any[] = [];\n\t\tlet parseErrors: json.ParseError[] = [];\n\n\t\tfunction onValue(value: any) {\n\t\t\tif (Array.isArray(currentParent)) {\n\t\t\t\t(<any[]>currentParent).push(value);\n\t\t\t} else if (currentProperty !== null) {\n\t\t\t\tcurrentParent[currentProperty] = value;\n\t\t\t}\n\t\t}\n\n\t\tlet visitor: json.JSONVisitor = {\n\t\t\tonObjectBegin: () => {\n\t\t\t\tlet object = {};\n\t\t\t\tonValue(object);\n\t\t\t\tpreviousParents.push(currentParent);\n\t\t\t\tcurrentParent = object;\n\t\t\t\tcurrentProperty = null;\n\t\t\t},\n\t\t\tonObjectProperty: (name: string) => {\n\t\t\t\tcurrentProperty = name;\n\t\t\t},\n\t\t\tonObjectEnd: () => {\n\t\t\t\tcurrentParent = previousParents.pop();\n\t\t\t},\n\t\t\tonArrayBegin: () => {\n\t\t\t\tlet array: any[] = [];\n\t\t\t\tonValue(array);\n\t\t\t\tpreviousParents.push(currentParent);\n\t\t\t\tcurrentParent = array;\n\t\t\t\tcurrentProperty = null;\n\t\t\t},\n\t\t\tonArrayEnd: () => {\n\t\t\t\tcurrentParent = previousParents.pop();\n\t\t\t},\n\t\t\tonLiteralValue: onValue,\n\t\t\tonError: (error: json.ParseErrorCode, offset: number, length: number) => {\n\t\t\t\tparseErrors.push({ error, offset, length });\n\t\t\t}\n\t\t};\n\t\tif (content) {\n\t\t\ttry {\n\t\t\t\tjson.visit(content, visitor);\n\t\t\t\traw = currentParent[0] || {};\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(`Error while parsing settings file ${this._name}: ${e}`);\n\t\t\t\tthis._parseErrors = [e];\n\t\t\t}\n\t\t}\n\n\t\treturn raw;\n\t}\n\n\tprotected doParseRaw(raw: any, options?: ConfigurationParseOptions): IConfigurationModel & { restricted?: string[] } {\n\t\tconst configurationProperties = Registry.as<IConfigurationRegistry>(Extensions.Configuration).getConfigurationProperties();\n\t\tconst filtered = this.filter(raw, configurationProperties, true, options);\n\t\traw = filtered.raw;\n\t\tconst contents = toValuesTree(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n\t\tconst keys = Object.keys(raw);\n\t\tconst overrides = this.toOverrides(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n\t\treturn { contents, keys, overrides, restricted: filtered.restricted };\n\t}\n\n\tprivate filter(properties: any, configurationProperties: { [qualifiedKey: string]: IConfigurationPropertySchema | undefined }, filterOverriddenProperties: boolean, options?: ConfigurationParseOptions): { raw: {}; restricted: string[] } {\n\t\tif (!options?.scopes && !options?.skipRestricted) {\n\t\t\treturn { raw: properties, restricted: [] };\n\t\t}\n\t\tconst raw: any = {};\n\t\tconst restricted: string[] = [];\n\t\tfor (let key in properties) {\n\t\t\tif (OVERRIDE_PROPERTY_REGEX.test(key) && filterOverriddenProperties) {\n\t\t\t\tconst result = this.filter(properties[key], configurationProperties, false, options);\n\t\t\t\traw[key] = result.raw;\n\t\t\t\trestricted.push(...result.restricted);\n\t\t\t} else {\n\t\t\t\tconst propertySchema = configurationProperties[key];\n\t\t\t\tconst scope = propertySchema ? typeof propertySchema.scope !== 'undefined' ? propertySchema.scope : ConfigurationScope.WINDOW : undefined;\n\t\t\t\tif (propertySchema?.restricted) {\n\t\t\t\t\trestricted.push(key);\n\t\t\t\t}\n\t\t\t\t// Load unregistered configurations always.\n\t\t\t\tif (scope === undefined || options.scopes === undefined || options.scopes.includes(scope)) {\n\t\t\t\t\tif (!(options.skipRestricted && propertySchema?.restricted)) {\n\t\t\t\t\t\traw[key] = properties[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn { raw, restricted };\n\t}\n\n\tprivate toOverrides(raw: any, conflictReporter: (message: string) => void): IOverrides[] {\n\t\tconst overrides: IOverrides[] = [];\n\t\tfor (const key of Object.keys(raw)) {\n\t\t\tif (OVERRIDE_PROPERTY_REGEX.test(key)) {\n\t\t\t\tconst overrideRaw: any = {};\n\t\t\t\tfor (const keyInOverrideRaw in raw[key]) {\n\t\t\t\t\toverrideRaw[keyInOverrideRaw] = raw[key][keyInOverrideRaw];\n\t\t\t\t}\n\t\t\t\toverrides.push({\n\t\t\t\t\tidentifiers: overrideIdentifiersFromKey(key),\n\t\t\t\t\tkeys: Object.keys(overrideRaw),\n\t\t\t\t\tcontents: toValuesTree(overrideRaw, conflictReporter)\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\treturn overrides;\n\t}\n\n}\n\nexport class UserSettings extends Disposable {\n\n\tprivate readonly parser: ConfigurationModelParser;\n\tprivate readonly parseOptions: ConfigurationParseOptions;\n\tprotected readonly _onDidChange: Emitter<void> = this._register(new Emitter<void>());\n\treadonly onDidChange: Event<void> = this._onDidChange.event;\n\n\tconstructor(\n\t\tprivate readonly userSettingsResource: URI,\n\t\tprivate readonly scopes: ConfigurationScope[] | undefined,\n\t\textUri: IExtUri,\n\t\tprivate readonly fileService: IFileService\n\t) {\n\t\tsuper();\n\t\tthis.parser = new ConfigurationModelParser(this.userSettingsResource.toString());\n\t\tthis.parseOptions = { scopes: this.scopes };\n\t\tthis._register(this.fileService.watch(extUri.dirname(this.userSettingsResource)));\n\t\t// Also listen to the resource incase the resource is a symlink - https://github.com/microsoft/vscode/issues/118134\n\t\tthis._register(this.fileService.watch(this.userSettingsResource));\n\t\tthis._register(Event.any(\n\t\t\tEvent.filter(this.fileService.onDidFilesChange, e => e.contains(this.userSettingsResource)),\n\t\t\tEvent.filter(this.fileService.onDidRunOperation, e => (e.isOperation(FileOperation.CREATE) || e.isOperation(FileOperation.COPY) || e.isOperation(FileOperation.DELETE) || e.isOperation(FileOperation.WRITE)) && extUri.isEqual(e.resource, userSettingsResource))\n\t\t)(() => this._onDidChange.fire()));\n\t}\n\n\tasync loadConfiguration(): Promise<ConfigurationModel> {\n\t\ttry {\n\t\t\tconst content = await this.fileService.readFile(this.userSettingsResource);\n\t\t\tthis.parser.parse(content.value.toString() || '{}', this.parseOptions);\n\t\t\treturn this.parser.configurationModel;\n\t\t} catch (e) {\n\t\t\treturn new ConfigurationModel();\n\t\t}\n\t}\n\n\treparse(): ConfigurationModel {\n\t\tthis.parser.reparse(this.parseOptions);\n\t\treturn this.parser.configurationModel;\n\t}\n\n\tgetRestrictedSettings(): string[] {\n\t\treturn this.parser.restrictedConfigurations;\n\t}\n}\n\n\nexport class Configuration {\n\n\tprivate _workspaceConsolidatedConfiguration: ConfigurationModel | null = null;\n\tprivate _foldersConsolidatedConfigurations: ResourceMap<ConfigurationModel> = new ResourceMap<ConfigurationModel>();\n\n\tconstructor(\n\t\tprivate _defaultConfiguration: ConfigurationModel,\n\t\tprivate _localUserConfiguration: ConfigurationModel,\n\t\tprivate _remoteUserConfiguration: ConfigurationModel = new ConfigurationModel(),\n\t\tprivate _workspaceConfiguration: ConfigurationModel = new ConfigurationModel(),\n\t\tprivate _folderConfigurations: ResourceMap<ConfigurationModel> = new ResourceMap<ConfigurationModel>(),\n\t\tprivate _memoryConfiguration: ConfigurationModel = new ConfigurationModel(),\n\t\tprivate _memoryConfigurationByResource: ResourceMap<ConfigurationModel> = new ResourceMap<ConfigurationModel>(),\n\t\tprivate _freeze: boolean = true) {\n\t}\n\n\tgetValue(section: string | undefined, overrides: IConfigurationOverrides, workspace: Workspace | undefined): any {\n\t\tconst consolidateConfigurationModel = this.getConsolidateConfigurationModel(overrides, workspace);\n\t\treturn consolidateConfigurationModel.getValue(section);\n\t}\n\n\tupdateValue(key: string, value: any, overrides: IConfigurationUpdateOverrides = {}): void {\n\t\tlet memoryConfiguration: ConfigurationModel | undefined;\n\t\tif (overrides.resource) {\n\t\t\tmemoryConfiguration = this._memoryConfigurationByResource.get(overrides.resource);\n\t\t\tif (!memoryConfiguration) {\n\t\t\t\tmemoryConfiguration = new ConfigurationModel();\n\t\t\t\tthis._memoryConfigurationByResource.set(overrides.resource, memoryConfiguration);\n\t\t\t}\n\t\t} else {\n\t\t\tmemoryConfiguration = this._memoryConfiguration;\n\t\t}\n\n\t\tif (value === undefined) {\n\t\t\tmemoryConfiguration.removeValue(key);\n\t\t} else {\n\t\t\tmemoryConfiguration.setValue(key, value);\n\t\t}\n\n\t\tif (!overrides.resource) {\n\t\t\tthis._workspaceConsolidatedConfiguration = null;\n\t\t}\n\t}\n\n\tinspect<C>(key: string, overrides: IConfigurationOverrides, workspace: Workspace | undefined): IConfigurationValue<C> {\n\t\tconst consolidateConfigurationModel = this.getConsolidateConfigurationModel(overrides, workspace);\n\t\tconst folderConfigurationModel = this.getFolderConfigurationModelForResource(overrides.resource, workspace);\n\t\tconst memoryConfigurationModel = overrides.resource ? this._memoryConfigurationByResource.get(overrides.resource) || this._memoryConfiguration : this._memoryConfiguration;\n\n\t\tconst defaultValue = overrides.overrideIdentifier ? this._defaultConfiguration.freeze().override(overrides.overrideIdentifier).getValue<C>(key) : this._defaultConfiguration.freeze().getValue<C>(key);\n\t\tconst userValue = overrides.overrideIdentifier ? this.userConfiguration.freeze().override(overrides.overrideIdentifier).getValue<C>(key) : this.userConfiguration.freeze().getValue<C>(key);\n\t\tconst userLocalValue = overrides.overrideIdentifier ? this.localUserConfiguration.freeze().override(overrides.overrideIdentifier).getValue<C>(key) : this.localUserConfiguration.freeze().getValue<C>(key);\n\t\tconst userRemoteValue = overrides.overrideIdentifier ? this.remoteUserConfiguration.freeze().override(overrides.overrideIdentifier).getValue<C>(key) : this.remoteUserConfiguration.freeze().getValue<C>(key);\n\t\tconst workspaceValue = workspace ? overrides.overrideIdentifier ? this._workspaceConfiguration.freeze().override(overrides.overrideIdentifier).getValue<C>(key) : this._workspaceConfiguration.freeze().getValue<C>(key) : undefined; //Check on workspace exists or not because _workspaceConfiguration is never null\n\t\tconst workspaceFolderValue = folderConfigurationModel ? overrides.overrideIdentifier ? folderConfigurationModel.freeze().override(overrides.overrideIdentifier).getValue<C>(key) : folderConfigurationModel.freeze().getValue<C>(key) : undefined;\n\t\tconst memoryValue = overrides.overrideIdentifier ? memoryConfigurationModel.override(overrides.overrideIdentifier).getValue<C>(key) : memoryConfigurationModel.getValue<C>(key);\n\t\tconst value = consolidateConfigurationModel.getValue<C>(key);\n\t\tconst overrideIdentifiers: string[] = arrays.distinct(arrays.flatten(consolidateConfigurationModel.overrides.map(override => override.identifiers))).filter(overrideIdentifier => consolidateConfigurationModel.getOverrideValue(key, overrideIdentifier) !== undefined);\n\n\t\treturn {\n\t\t\tdefaultValue: defaultValue,\n\t\t\tuserValue: userValue,\n\t\t\tuserLocalValue: userLocalValue,\n\t\t\tuserRemoteValue: userRemoteValue,\n\t\t\tworkspaceValue: workspaceValue,\n\t\t\tworkspaceFolderValue: workspaceFolderValue,\n\t\t\tmemoryValue: memoryValue,\n\t\t\tvalue,\n\n\t\t\tdefault: defaultValue !== undefined ? { value: this._defaultConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this._defaultConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\t\t\tuser: userValue !== undefined ? { value: this.userConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this.userConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\t\t\tuserLocal: userLocalValue !== undefined ? { value: this.localUserConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this.localUserConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\t\t\tuserRemote: userRemoteValue !== undefined ? { value: this.remoteUserConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this.remoteUserConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\t\t\tworkspace: workspaceValue !== undefined ? { value: this._workspaceConfiguration.freeze().getValue(key), override: overrides.overrideIdentifier ? this._workspaceConfiguration.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\t\t\tworkspaceFolder: workspaceFolderValue !== undefined ? { value: folderConfigurationModel?.freeze().getValue(key), override: overrides.overrideIdentifier ? folderConfigurationModel?.freeze().getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\t\t\tmemory: memoryValue !== undefined ? { value: memoryConfigurationModel.getValue(key), override: overrides.overrideIdentifier ? memoryConfigurationModel.getOverrideValue(key, overrides.overrideIdentifier) : undefined } : undefined,\n\n\t\t\toverrideIdentifiers: overrideIdentifiers.length ? overrideIdentifiers : undefined\n\t\t};\n\t}\n\n\tkeys(workspace: Workspace | undefined): {\n\t\tdefault: string[];\n\t\tuser: string[];\n\t\tworkspace: string[];\n\t\tworkspaceFolder: string[];\n\t} {\n\t\tconst folderConfigurationModel = this.getFolderConfigurationModelForResource(undefined, workspace);\n\t\treturn {\n\t\t\tdefault: this._defaultConfiguration.freeze().keys,\n\t\t\tuser: this.userConfiguration.freeze().keys,\n\t\t\tworkspace: this._workspaceConfiguration.freeze().keys,\n\t\t\tworkspaceFolder: folderConfigurationModel ? folderConfigurationModel.freeze().keys : []\n\t\t};\n\t}\n\n\tupdateDefaultConfiguration(defaultConfiguration: ConfigurationModel): void {\n\t\tthis._defaultConfiguration = defaultConfiguration;\n\t\tthis._workspaceConsolidatedConfiguration = null;\n\t\tthis._foldersConsolidatedConfigurations.clear();\n\t}\n\n\tupdateLocalUserConfiguration(localUserConfiguration: ConfigurationModel): void {\n\t\tthis._localUserConfiguration = localUserConfiguration;\n\t\tthis._userConfiguration = null;\n\t\tthis._workspaceConsolidatedConfiguration = null;\n\t\tthis._foldersConsolidatedConfigurations.clear();\n\t}\n\n\tupdateRemoteUserConfiguration(remoteUserConfiguration: ConfigurationModel): void {\n\t\tthis._remoteUserConfiguration = remoteUserConfiguration;\n\t\tthis._userConfiguration = null;\n\t\tthis._workspaceConsolidatedConfiguration = null;\n\t\tthis._foldersConsolidatedConfigurations.clear();\n\t}\n\n\tupdateWorkspaceConfiguration(workspaceConfiguration: ConfigurationModel): void {\n\t\tthis._workspaceConfiguration = workspaceConfiguration;\n\t\tthis._workspaceConsolidatedConfiguration = null;\n\t\tthis._foldersConsolidatedConfigurations.clear();\n\t}\n\n\tupdateFolderConfiguration(resource: URI, configuration: ConfigurationModel): void {\n\t\tthis._folderConfigurations.set(resource, configuration);\n\t\tthis._foldersConsolidatedConfigurations.delete(resource);\n\t}\n\n\tdeleteFolderConfiguration(resource: URI): void {\n\t\tthis.folderConfigurations.delete(resource);\n\t\tthis._foldersConsolidatedConfigurations.delete(resource);\n\t}\n\n\tcompareAndUpdateDefaultConfiguration(defaults: ConfigurationModel, keys?: string[]): IConfigurationChange {\n\t\tconst overrides: [string, string[]][] = [];\n\t\tif (!keys) {\n\t\t\tconst { added, updated, removed } = compare(this._defaultConfiguration, defaults);\n\t\t\tkeys = [...added, ...updated, ...removed];\n\t\t}\n\t\tfor (const key of keys) {\n\t\t\tfor (const overrideIdentifier of overrideIdentifiersFromKey(key)) {\n\t\t\t\tconst fromKeys = this._defaultConfiguration.getKeysForOverrideIdentifier(overrideIdentifier);\n\t\t\t\tconst toKeys = defaults.getKeysForOverrideIdentifier(overrideIdentifier);\n\t\t\t\tconst keys = [\n\t\t\t\t\t...toKeys.filter(key => fromKeys.indexOf(key) === -1),\n\t\t\t\t\t...fromKeys.filter(key => toKeys.indexOf(key) === -1),\n\t\t\t\t\t...fromKeys.filter(key => !objects.equals(this._defaultConfiguration.override(overrideIdentifier).getValue(key), defaults.override(overrideIdentifier).getValue(key)))\n\t\t\t\t];\n\t\t\t\toverrides.push([overrideIdentifier, keys]);\n\t\t\t}\n\t\t}\n\t\tthis.updateDefaultConfiguration(defaults);\n\t\treturn { keys, overrides };\n\t}\n\n\tcompareAndUpdateLocalUserConfiguration(user: ConfigurationModel): IConfigurationChange {\n\t\tconst { added, updated, removed, overrides } = compare(this.localUserConfiguration, user);\n\t\tconst keys = [...added, ...updated, ...removed];\n\t\tif (keys.length) {\n\t\t\tthis.updateLocalUserConfiguration(user);\n\t\t}\n\t\treturn { keys, overrides };\n\t}\n\n\tcompareAndUpdateRemoteUserConfiguration(user: ConfigurationModel): IConfigurationChange {\n\t\tconst { added, updated, removed, overrides } = compare(this.remoteUserConfiguration, user);\n\t\tlet keys = [...added, ...updated, ...removed];\n\t\tif (keys.length) {\n\t\t\tthis.updateRemoteUserConfiguration(user);\n\t\t}\n\t\treturn { keys, overrides };\n\t}\n\n\tcompareAndUpdateWorkspaceConfiguration(workspaceConfiguration: ConfigurationModel): IConfigurationChange {\n\t\tconst { added, updated, removed, overrides } = compare(this.workspaceConfiguration, workspaceConfiguration);\n\t\tlet keys = [...added, ...updated, ...removed];\n\t\tif (keys.length) {\n\t\t\tthis.updateWorkspaceConfiguration(workspaceConfiguration);\n\t\t}\n\t\treturn { keys, overrides };\n\t}\n\n\tcompareAndUpdateFolderConfiguration(resource: URI, folderConfiguration: ConfigurationModel): IConfigurationChange {\n\t\tconst currentFolderConfiguration = this.folderConfigurations.get(resource);\n\t\tconst { added, updated, removed, overrides } = compare(currentFolderConfiguration, folderConfiguration);\n\t\tlet keys = [...added, ...updated, ...removed];\n\t\tif (keys.length || !currentFolderConfiguration) {\n\t\t\tthis.updateFolderConfiguration(resource, folderConfiguration);\n\t\t}\n\t\treturn { keys, overrides };\n\t}\n\n\tcompareAndDeleteFolderConfiguration(folder: URI): IConfigurationChange {\n\t\tconst folderConfig = this.folderConfigurations.get(folder);\n\t\tif (!folderConfig) {\n\t\t\tthrow new Error('Unknown folder');\n\t\t}\n\t\tthis.deleteFolderConfiguration(folder);\n\t\tconst { added, updated, removed, overrides } = compare(folderConfig, undefined);\n\t\treturn { keys: [...added, ...updated, ...removed], overrides };\n\t}\n\n\tget defaults(): ConfigurationModel {\n\t\treturn this._defaultConfiguration;\n\t}\n\n\tprivate _userConfiguration: ConfigurationModel | null = null;\n\tget userConfiguration(): ConfigurationModel {\n\t\tif (!this._userConfiguration) {\n\t\t\tthis._userConfiguration = this._remoteUserConfiguration.isEmpty() ? this._localUserConfiguration : this._localUserConfiguration.merge(this._remoteUserConfiguration);\n\t\t\tif (this._freeze) {\n\t\t\t\tthis._userConfiguration.freeze();\n\t\t\t}\n\t\t}\n\t\treturn this._userConfiguration;\n\t}\n\n\tget localUserConfiguration(): ConfigurationModel {\n\t\treturn this._localUserConfiguration;\n\t}\n\n\tget remoteUserConfiguration(): ConfigurationModel {\n\t\treturn this._remoteUserConfiguration;\n\t}\n\n\tget workspaceConfiguration(): ConfigurationModel {\n\t\treturn this._workspaceConfiguration;\n\t}\n\n\tprotected get folderConfigurations(): ResourceMap<ConfigurationModel> {\n\t\treturn this._folderConfigurations;\n\t}\n\n\tprivate getConsolidateConfigurationModel(overrides: IConfigurationOverrides, workspace: Workspace | undefined): ConfigurationModel {\n\t\tlet configurationModel = this.getConsolidatedConfigurationModelForResource(overrides, workspace);\n\t\treturn overrides.overrideIdentifier ? configurationModel.override(overrides.overrideIdentifier) : configurationModel;\n\t}\n\n\tprivate getConsolidatedConfigurationModelForResource({ resource }: IConfigurationOverrides, workspace: Workspace | undefined): ConfigurationModel {\n\t\tlet consolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\n\n\t\tif (workspace && resource) {\n\t\t\tconst root = workspace.getFolder(resource);\n\t\t\tif (root) {\n\t\t\t\tconsolidateConfiguration = this.getFolderConsolidatedConfiguration(root.uri) || consolidateConfiguration;\n\t\t\t}\n\t\t\tconst memoryConfigurationForResource = this._memoryConfigurationByResource.get(resource);\n\t\t\tif (memoryConfigurationForResource) {\n\t\t\t\tconsolidateConfiguration = consolidateConfiguration.merge(memoryConfigurationForResource);\n\t\t\t}\n\t\t}\n\n\t\treturn consolidateConfiguration;\n\t}\n\n\tprivate getWorkspaceConsolidatedConfiguration(): ConfigurationModel {\n\t\tif (!this._workspaceConsolidatedConfiguration) {\n\t\t\tthis._workspaceConsolidatedConfiguration = this._defaultConfiguration.merge(this.userConfiguration, this._workspaceConfiguration, this._memoryConfiguration);\n\t\t\tif (this._freeze) {\n\t\t\t\tthis._workspaceConfiguration = this._workspaceConfiguration.freeze();\n\t\t\t}\n\t\t}\n\t\treturn this._workspaceConsolidatedConfiguration;\n\t}\n\n\tprivate getFolderConsolidatedConfiguration(folder: URI): ConfigurationModel {\n\t\tlet folderConsolidatedConfiguration = this._foldersConsolidatedConfigurations.get(folder);\n\t\tif (!folderConsolidatedConfiguration) {\n\t\t\tconst workspaceConsolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\n\t\t\tconst folderConfiguration = this._folderConfigurations.get(folder);\n\t\t\tif (folderConfiguration) {\n\t\t\t\tfolderConsolidatedConfiguration = workspaceConsolidateConfiguration.merge(folderConfiguration);\n\t\t\t\tif (this._freeze) {\n\t\t\t\t\tfolderConsolidatedConfiguration = folderConsolidatedConfiguration.freeze();\n\t\t\t\t}\n\t\t\t\tthis._foldersConsolidatedConfigurations.set(folder, folderConsolidatedConfiguration);\n\t\t\t} else {\n\t\t\t\tfolderConsolidatedConfiguration = workspaceConsolidateConfiguration;\n\t\t\t}\n\t\t}\n\t\treturn folderConsolidatedConfiguration;\n\t}\n\n\tprivate getFolderConfigurationModelForResource(resource: URI | null | undefined, workspace: Workspace | undefined): ConfigurationModel | undefined {\n\t\tif (workspace && resource) {\n\t\t\tconst root = workspace.getFolder(resource);\n\t\t\tif (root) {\n\t\t\t\treturn this._folderConfigurations.get(root.uri);\n\t\t\t}\n\t\t}\n\t\treturn undefined;\n\t}\n\n\ttoData(): IConfigurationData {\n\t\treturn {\n\t\t\tdefaults: {\n\t\t\t\tcontents: this._defaultConfiguration.contents,\n\t\t\t\toverrides: this._defaultConfiguration.overrides,\n\t\t\t\tkeys: this._defaultConfiguration.keys\n\t\t\t},\n\t\t\tuser: {\n\t\t\t\tcontents: this.userConfiguration.contents,\n\t\t\t\toverrides: this.userConfiguration.overrides,\n\t\t\t\tkeys: this.userConfiguration.keys\n\t\t\t},\n\t\t\tworkspace: {\n\t\t\t\tcontents: this._workspaceConfiguration.contents,\n\t\t\t\toverrides: this._workspaceConfiguration.overrides,\n\t\t\t\tkeys: this._workspaceConfiguration.keys\n\t\t\t},\n\t\t\tfolders: [...this._folderConfigurations.keys()].reduce<[UriComponents, IConfigurationModel][]>((result, folder) => {\n\t\t\t\tconst { contents, overrides, keys } = this._folderConfigurations.get(folder)!;\n\t\t\t\tresult.push([folder, { contents, overrides, keys }]);\n\t\t\t\treturn result;\n\t\t\t}, [])\n\t\t};\n\t}\n\n\tallKeys(): string[] {\n\t\tconst keys: Set<string> = new Set<string>();\n\t\tthis._defaultConfiguration.freeze().keys.forEach(key => keys.add(key));\n\t\tthis.userConfiguration.freeze().keys.forEach(key => keys.add(key));\n\t\tthis._workspaceConfiguration.freeze().keys.forEach(key => keys.add(key));\n\t\tthis._folderConfigurations.forEach(folderConfiguraiton => folderConfiguraiton.freeze().keys.forEach(key => keys.add(key)));\n\t\treturn [...keys.values()];\n\t}\n\n\tprotected allOverrideIdentifiers(): string[] {\n\t\tconst keys: Set<string> = new Set<string>();\n\t\tthis._defaultConfiguration.freeze().getAllOverrideIdentifiers().forEach(key => keys.add(key));\n\t\tthis.userConfiguration.freeze().getAllOverrideIdentifiers().forEach(key => keys.add(key));\n\t\tthis._workspaceConfiguration.freeze().getAllOverrideIdentifiers().forEach(key => keys.add(key));\n\t\tthis._folderConfigurations.forEach(folderConfiguraiton => folderConfiguraiton.freeze().getAllOverrideIdentifiers().forEach(key => keys.add(key)));\n\t\treturn [...keys.values()];\n\t}\n\n\tprotected getAllKeysForOverrideIdentifier(overrideIdentifier: string): string[] {\n\t\tconst keys: Set<string> = new Set<string>();\n\t\tthis._defaultConfiguration.getKeysForOverrideIdentifier(overrideIdentifier).forEach(key => keys.add(key));\n\t\tthis.userConfiguration.getKeysForOverrideIdentifier(overrideIdentifier).forEach(key => keys.add(key));\n\t\tthis._workspaceConfiguration.getKeysForOverrideIdentifier(overrideIdentifier).forEach(key => keys.add(key));\n\t\tthis._folderConfigurations.forEach(folderConfiguraiton => folderConfiguraiton.getKeysForOverrideIdentifier(overrideIdentifier).forEach(key => keys.add(key)));\n\t\treturn [...keys.values()];\n\t}\n\n\tstatic parse(data: IConfigurationData): Configuration {\n\t\tconst defaultConfiguration = this.parseConfigurationModel(data.defaults);\n\t\tconst userConfiguration = this.parseConfigurationModel(data.user);\n\t\tconst workspaceConfiguration = this.parseConfigurationModel(data.workspace);\n\t\tconst folders: ResourceMap<ConfigurationModel> = data.folders.reduce((result, value) => {\n\t\t\tresult.set(URI.revive(value[0]), this.parseConfigurationModel(value[1]));\n\t\t\treturn result;\n\t\t}, new ResourceMap<ConfigurationModel>());\n\t\treturn new Configuration(defaultConfiguration, userConfiguration, new ConfigurationModel(), workspaceConfiguration, folders, new ConfigurationModel(), new ResourceMap<ConfigurationModel>(), false);\n\t}\n\n\tprivate static parseConfigurationModel(model: IConfigurationModel): ConfigurationModel {\n\t\treturn new ConfigurationModel(model.contents, model.keys, model.overrides).freeze();\n\t}\n\n}\n\nexport function mergeChanges(...changes: IConfigurationChange[]): IConfigurationChange {\n\tif (changes.length === 0) {\n\t\treturn { keys: [], overrides: [] };\n\t}\n\tif (changes.length === 1) {\n\t\treturn changes[0];\n\t}\n\tconst keysSet = new Set<string>();\n\tconst overridesMap = new Map<string, Set<string>>();\n\tfor (const change of changes) {\n\t\tchange.keys.forEach(key => keysSet.add(key));\n\t\tchange.overrides.forEach(([identifier, keys]) => {\n\t\t\tconst result = getOrSet(overridesMap, identifier, new Set<string>());\n\t\t\tkeys.forEach(key => result.add(key));\n\t\t});\n\t}\n\tconst overrides: [string, string[]][] = [];\n\toverridesMap.forEach((keys, identifier) => overrides.push([identifier, [...keys.values()]]));\n\treturn { keys: [...keysSet.values()], overrides };\n}\n\nexport class ConfigurationChangeEvent implements IConfigurationChangeEvent {\n\n\tprivate readonly affectedKeysTree: any;\n\treadonly affectedKeys: string[];\n\tsource!: ConfigurationTarget;\n\tsourceConfig: any;\n\n\tconstructor(readonly change: IConfigurationChange, private readonly previous: { workspace?: Workspace; data: IConfigurationData } | undefined, private readonly currentConfiguraiton: Configuration, private readonly currentWorkspace?: Workspace) {\n\t\tconst keysSet = new Set<string>();\n\t\tchange.keys.forEach(key => keysSet.add(key));\n\t\tchange.overrides.forEach(([, keys]) => keys.forEach(key => keysSet.add(key)));\n\t\tthis.affectedKeys = [...keysSet.values()];\n\n\t\tconst configurationModel = new ConfigurationModel();\n\t\tthis.affectedKeys.forEach(key => configurationModel.setValue(key, {}));\n\t\tthis.affectedKeysTree = configurationModel.contents;\n\t}\n\n\tprivate _previousConfiguration: Configuration | undefined = undefined;\n\tget previousConfiguration(): Configuration | undefined {\n\t\tif (!this._previousConfiguration && this.previous) {\n\t\t\tthis._previousConfiguration = Configuration.parse(this.previous.data);\n\t\t}\n\t\treturn this._previousConfiguration;\n\t}\n\n\taffectsConfiguration(section: string, overrides?: IConfigurationOverrides): boolean {\n\t\tif (this.doesAffectedKeysTreeContains(this.affectedKeysTree, section)) {\n\t\t\tif (overrides) {\n\t\t\t\tconst value1 = this.previousConfiguration ? this.previousConfiguration.getValue(section, overrides, this.previous?.workspace) : undefined;\n\t\t\t\tconst value2 = this.currentConfiguraiton.getValue(section, overrides, this.currentWorkspace);\n\t\t\t\treturn !objects.equals(value1, value2);\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate doesAffectedKeysTreeContains(affectedKeysTree: any, section: string): boolean {\n\t\tlet requestedTree = toValuesTree({ [section]: true }, () => { });\n\n\t\tlet key;\n\t\twhile (typeof requestedTree === 'object' && (key = Object.keys(requestedTree)[0])) { // Only one key should present, since we added only one property\n\t\t\taffectedKeysTree = affectedKeysTree[key];\n\t\t\tif (!affectedKeysTree) {\n\t\t\t\treturn false; // Requested tree is not found\n\t\t\t}\n\t\t\trequestedTree = requestedTree[key];\n\t\t}\n\t\treturn true;\n\t}\n}\n\nexport class AllKeysConfigurationChangeEvent extends ConfigurationChangeEvent {\n\tconstructor(configuration: Configuration, workspace: Workspace, source: ConfigurationTarget, sourceConfig: any) {\n\t\tsuper({ keys: configuration.allKeys(), overrides: [] }, undefined, configuration, workspace);\n\t\tthis.source = source;\n\t\tthis.sourceConfig = sourceConfig;\n\t}\n}\n\nfunction compare(from: ConfigurationModel | undefined, to: ConfigurationModel | undefined): IConfigurationCompareResult {\n\tconst { added, removed, updated } = compareConfigurationContents(to, from);\n\tconst overrides: [string, string[]][] = [];\n\n\tconst fromOverrideIdentifiers = from?.getAllOverrideIdentifiers() || [];\n\tconst toOverrideIdentifiers = to?.getAllOverrideIdentifiers() || [];\n\n\tif (to) {\n\t\tconst addedOverrideIdentifiers = toOverrideIdentifiers.filter(key => !fromOverrideIdentifiers.includes(key));\n\t\tfor (const identifier of addedOverrideIdentifiers) {\n\t\t\toverrides.push([identifier, to.getKeysForOverrideIdentifier(identifier)]);\n\t\t}\n\t}\n\n\tif (from) {\n\t\tconst removedOverrideIdentifiers = fromOverrideIdentifiers.filter(key => !toOverrideIdentifiers.includes(key));\n\t\tfor (const identifier of removedOverrideIdentifiers) {\n\t\t\toverrides.push([identifier, from.getKeysForOverrideIdentifier(identifier)]);\n\t\t}\n\t}\n\n\tif (to && from) {\n\t\tfor (const identifier of fromOverrideIdentifiers) {\n\t\t\tif (toOverrideIdentifiers.includes(identifier)) {\n\t\t\t\tconst result = compareConfigurationContents({ contents: from.getOverrideValue(undefined, identifier) || {}, keys: from.getKeysForOverrideIdentifier(identifier) }, { contents: to.getOverrideValue(undefined, identifier) || {}, keys: to.getKeysForOverrideIdentifier(identifier) });\n\t\t\t\toverrides.push([identifier, [...result.added, ...result.removed, ...result.updated]]);\n\t\t\t}\n\t\t}\n\t}\n\n\treturn { added, removed, updated, overrides };\n}\n\nfunction compareConfigurationContents(to: { keys: string[]; contents: any } | undefined, from: { keys: string[]; contents: any } | undefined) {\n\tconst added = to\n\t\t? from ? to.keys.filter(key => from.keys.indexOf(key) === -1) : [...to.keys]\n\t\t: [];\n\tconst removed = from\n\t\t? to ? from.keys.filter(key => to.keys.indexOf(key) === -1) : [...from.keys]\n\t\t: [];\n\tconst updated: string[] = [];\n\n\tif (to && from) {\n\t\tfor (const key of from.keys) {\n\t\t\tif (to.keys.indexOf(key) !== -1) {\n\t\t\t\tconst value1 = getConfigurationValue(from.contents, key);\n\t\t\t\tconst value2 = getConfigurationValue(to.contents, key);\n\t\t\t\tif (!objects.equals(value1, value2)) {\n\t\t\t\t\tupdated.push(key);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn { added, removed, updated };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { distinct } from '../../../base/common/arrays';\nimport { IStringDictionary } from '../../../base/common/collections';\nimport { Emitter, Event } from '../../../base/common/event';\nimport { IJSONSchema } from '../../../base/common/jsonSchema';\nimport * as types from '../../../base/common/types';\nimport * as nls from '../../../nls';\nimport { getLanguageTagSettingPlainKey } from './configuration';\nimport { Extensions as JSONExtensions, IJSONContributionRegistry } from '../../jsonschemas/common/jsonContributionRegistry';\nimport { Registry } from '../../registry/common/platform';\n\nexport enum EditPresentationTypes {\n\tMultiline = 'multilineText',\n\tSingleline = 'singlelineText'\n}\n\nexport const Extensions = {\n\tConfiguration: 'base.contributions.configuration'\n};\n\nexport interface IConfigurationRegistry {\n\n\t/**\n\t * Register a configuration to the registry.\n\t */\n\tregisterConfiguration(configuration: IConfigurationNode): void;\n\n\t/**\n\t * Register multiple configurations to the registry.\n\t */\n\tregisterConfigurations(configurations: IConfigurationNode[], validate?: boolean): void;\n\n\t/**\n\t * Deregister multiple configurations from the registry.\n\t */\n\tderegisterConfigurations(configurations: IConfigurationNode[]): void;\n\n\t/**\n\t * update the configuration registry by\n\t * \t- registering the configurations to add\n\t * \t- dereigstering the configurations to remove\n\t */\n\tupdateConfigurations(configurations: { add: IConfigurationNode[]; remove: IConfigurationNode[] }): void;\n\n\t/**\n\t * Register multiple default configurations to the registry.\n\t */\n\tregisterDefaultConfigurations(defaultConfigurations: IConfigurationDefaults[]): void;\n\n\t/**\n\t * Deregister multiple default configurations from the registry.\n\t */\n\tderegisterDefaultConfigurations(defaultConfigurations: IConfigurationDefaults[]): void;\n\n\t/**\n\t * Return the registered configuration defaults overrides\n\t */\n\tgetConfigurationDefaultsOverrides(): Map<string, IConfigurationDefaultOverride>;\n\n\t/**\n\t * Signal that the schema of a configuration setting has changes. It is currently only supported to change enumeration values.\n\t * Property or default value changes are not allowed.\n\t */\n\tnotifyConfigurationSchemaUpdated(...configurations: IConfigurationNode[]): void;\n\n\t/**\n\t * Event that fires whenever a configuration has been\n\t * registered.\n\t */\n\treadonly onDidSchemaChange: Event<void>;\n\n\t/**\n\t * Event that fires whenever a configuration has been\n\t * registered.\n\t */\n\treadonly onDidUpdateConfiguration: Event<{ properties: string[]; defaultsOverrides?: boolean }>;\n\n\t/**\n\t * Returns all configuration nodes contributed to this registry.\n\t */\n\tgetConfigurations(): IConfigurationNode[];\n\n\t/**\n\t * Returns all configurations settings of all configuration nodes contributed to this registry.\n\t */\n\tgetConfigurationProperties(): IStringDictionary<IRegisteredConfigurationPropertySchema>;\n\n\t/**\n\t * Returns all excluded configurations settings of all configuration nodes contributed to this registry.\n\t */\n\tgetExcludedConfigurationProperties(): IStringDictionary<IRegisteredConfigurationPropertySchema>;\n\n\t/**\n\t * Register the identifiers for editor configurations\n\t */\n\tregisterOverrideIdentifiers(identifiers: string[]): void;\n}\n\nexport const enum ConfigurationScope {\n\t/**\n\t * Application specific configuration, which can be configured only in local user settings.\n\t */\n\tAPPLICATION = 1,\n\t/**\n\t * Machine specific configuration, which can be configured only in local and remote user settings.\n\t */\n\tMACHINE,\n\t/**\n\t * Window specific configuration, which can be configured in the user or workspace settings.\n\t */\n\tWINDOW,\n\t/**\n\t * Resource specific configuration, which can be configured in the user, workspace or folder settings.\n\t */\n\tRESOURCE,\n\t/**\n\t * Resource specific configuration that can be configured in language specific settings\n\t */\n\tLANGUAGE_OVERRIDABLE,\n\t/**\n\t * Machine specific configuration that can also be configured in workspace or folder settings.\n\t */\n\tMACHINE_OVERRIDABLE,\n}\n\nexport interface IConfigurationPropertySchema extends IJSONSchema {\n\n\tscope?: ConfigurationScope;\n\n\t/**\n\t * When restricted, value of this configuration will be read only from trusted sources.\n\t * For eg., If the workspace is not trusted, then the value of this configuration is not read from workspace settings file.\n\t */\n\trestricted?: boolean;\n\n\t/**\n\t * When `false` this property is excluded from the registry. Default is to include.\n\t */\n\tincluded?: boolean;\n\n\t/**\n\t * List of tags associated to the property.\n\t *  - A tag can be used for filtering\n\t *  - Use `experimental` tag for marking the setting as experimental. **Note:** Defaults of experimental settings can be changed by the running experiments.\n\t */\n\ttags?: string[];\n\n\t/**\n\t * When enabled this setting is ignored during sync and user can override this.\n\t */\n\tignoreSync?: boolean;\n\n\t/**\n\t * When enabled this setting is ignored during sync and user cannot override this.\n\t */\n\tdisallowSyncIgnore?: boolean;\n\n\t/**\n\t * Labels for enumeration items\n\t */\n\tenumItemLabels?: string[];\n\n\t/**\n\t * When specified, controls the presentation format of string settings.\n\t * Otherwise, the presentation format defaults to `singleline`.\n\t */\n\teditPresentation?: EditPresentationTypes;\n\n\t/**\n\t * When specified, gives an order number for the setting\n\t * within the settings editor. Otherwise, the setting is placed at the end.\n\t */\n\torder?: number;\n}\n\nexport interface IExtensionInfo {\n\tid: string;\n\tdisplayName?: string;\n}\n\nexport interface IConfigurationNode {\n\tid?: string;\n\torder?: number;\n\ttype?: string | string[];\n\ttitle?: string;\n\tdescription?: string;\n\tproperties?: IStringDictionary<IConfigurationPropertySchema>;\n\tallOf?: IConfigurationNode[];\n\tscope?: ConfigurationScope;\n\textensionInfo?: IExtensionInfo;\n\trestrictedProperties?: string[];\n}\n\nexport interface IConfigurationDefaults {\n\toverrides: IStringDictionary<any>;\n\tsource?: IExtensionInfo | string;\n}\n\nexport type IRegisteredConfigurationPropertySchema = IConfigurationPropertySchema & {\n\tdefaultDefaultValue?: any;\n\tsource?: IExtensionInfo;\n\tdefaultValueSource?: IExtensionInfo | string;\n};\n\nexport type IConfigurationDefaultOverride = { value: any; source?: IExtensionInfo | string };\n\nexport const allSettings: { properties: IStringDictionary<IConfigurationPropertySchema>; patternProperties: IStringDictionary<IConfigurationPropertySchema> } = { properties: {}, patternProperties: {} };\nexport const applicationSettings: { properties: IStringDictionary<IConfigurationPropertySchema>; patternProperties: IStringDictionary<IConfigurationPropertySchema> } = { properties: {}, patternProperties: {} };\nexport const machineSettings: { properties: IStringDictionary<IConfigurationPropertySchema>; patternProperties: IStringDictionary<IConfigurationPropertySchema> } = { properties: {}, patternProperties: {} };\nexport const machineOverridableSettings: { properties: IStringDictionary<IConfigurationPropertySchema>; patternProperties: IStringDictionary<IConfigurationPropertySchema> } = { properties: {}, patternProperties: {} };\nexport const windowSettings: { properties: IStringDictionary<IConfigurationPropertySchema>; patternProperties: IStringDictionary<IConfigurationPropertySchema> } = { properties: {}, patternProperties: {} };\nexport const resourceSettings: { properties: IStringDictionary<IConfigurationPropertySchema>; patternProperties: IStringDictionary<IConfigurationPropertySchema> } = { properties: {}, patternProperties: {} };\n\nexport const resourceLanguageSettingsSchemaId = 'vscode://schemas/settings/resourceLanguage';\nexport const configurationDefaultsSchemaId = 'vscode://schemas/settings/configurationDefaults';\n\nconst contributionRegistry = Registry.as<IJSONContributionRegistry>(JSONExtensions.JSONContribution);\n\nclass ConfigurationRegistry implements IConfigurationRegistry {\n\n\tprivate readonly configurationDefaultsOverrides: Map<string, IConfigurationDefaultOverride>;\n\tprivate readonly defaultLanguageConfigurationOverridesNode: IConfigurationNode;\n\tprivate readonly configurationContributors: IConfigurationNode[];\n\tprivate readonly configurationProperties: IStringDictionary<IRegisteredConfigurationPropertySchema>;\n\tprivate readonly excludedConfigurationProperties: IStringDictionary<IRegisteredConfigurationPropertySchema>;\n\tprivate readonly resourceLanguageSettingsSchema: IJSONSchema;\n\tprivate readonly overrideIdentifiers = new Set<string>();\n\n\tprivate readonly _onDidSchemaChange = new Emitter<void>();\n\treadonly onDidSchemaChange: Event<void> = this._onDidSchemaChange.event;\n\n\tprivate readonly _onDidUpdateConfiguration = new Emitter<{ properties: string[]; defaultsOverrides?: boolean }>();\n\treadonly onDidUpdateConfiguration = this._onDidUpdateConfiguration.event;\n\n\tconstructor() {\n\t\tthis.configurationDefaultsOverrides = new Map<string, IConfigurationDefaultOverride>();\n\t\tthis.defaultLanguageConfigurationOverridesNode = {\n\t\t\tid: 'defaultOverrides',\n\t\t\ttitle: nls.localize('defaultLanguageConfigurationOverrides.title', \"Default Language Configuration Overrides\"),\n\t\t\tproperties: {}\n\t\t};\n\t\tthis.configurationContributors = [this.defaultLanguageConfigurationOverridesNode];\n\t\tthis.resourceLanguageSettingsSchema = { properties: {}, patternProperties: {}, additionalProperties: false, errorMessage: 'Unknown editor configuration setting', allowTrailingCommas: true, allowComments: true };\n\t\tthis.configurationProperties = {};\n\t\tthis.excludedConfigurationProperties = {};\n\n\t\tcontributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n\t\tthis.registerOverridePropertyPatternKey();\n\t}\n\n\tpublic registerConfiguration(configuration: IConfigurationNode, validate: boolean = true): void {\n\t\tthis.registerConfigurations([configuration], validate);\n\t}\n\n\tpublic registerConfigurations(configurations: IConfigurationNode[], validate: boolean = true): void {\n\t\tconst properties = this.doRegisterConfigurations(configurations, validate);\n\n\t\tcontributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n\t\tthis._onDidSchemaChange.fire();\n\t\tthis._onDidUpdateConfiguration.fire({ properties });\n\t}\n\n\tpublic deregisterConfigurations(configurations: IConfigurationNode[]): void {\n\t\tconst properties = this.doDeregisterConfigurations(configurations);\n\n\t\tcontributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n\t\tthis._onDidSchemaChange.fire();\n\t\tthis._onDidUpdateConfiguration.fire({ properties });\n\t}\n\n\tpublic updateConfigurations({ add, remove }: { add: IConfigurationNode[]; remove: IConfigurationNode[] }): void {\n\t\tconst properties = [];\n\t\tproperties.push(...this.doDeregisterConfigurations(remove));\n\t\tproperties.push(...this.doRegisterConfigurations(add, false));\n\n\t\tcontributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n\t\tthis._onDidSchemaChange.fire();\n\t\tthis._onDidUpdateConfiguration.fire({ properties: distinct(properties) });\n\t}\n\n\tpublic registerDefaultConfigurations(configurationDefaults: IConfigurationDefaults[]): void {\n\t\tconst properties: string[] = [];\n\t\tconst overrideIdentifiers: string[] = [];\n\n\t\tfor (const { overrides, source } of configurationDefaults) {\n\t\t\tfor (const key in overrides) {\n\t\t\t\tproperties.push(key);\n\n\t\t\t\tif (OVERRIDE_PROPERTY_REGEX.test(key)) {\n\t\t\t\t\tconst defaultValue = { ...(this.configurationDefaultsOverrides.get(key)?.value || {}), ...overrides[key] };\n\t\t\t\t\tthis.configurationDefaultsOverrides.set(key, { source, value: defaultValue });\n\t\t\t\t\tconst plainKey = getLanguageTagSettingPlainKey(key);\n\t\t\t\t\tconst property: IRegisteredConfigurationPropertySchema = {\n\t\t\t\t\t\ttype: 'object',\n\t\t\t\t\t\tdefault: defaultValue,\n\t\t\t\t\t\tdescription: nls.localize('defaultLanguageConfiguration.description', \"Configure settings to be overridden for the {0} language.\", plainKey),\n\t\t\t\t\t\t$ref: resourceLanguageSettingsSchemaId,\n\t\t\t\t\t\tdefaultDefaultValue: defaultValue,\n\t\t\t\t\t\tsource: types.isString(source) ? undefined : source,\n\t\t\t\t\t};\n\t\t\t\t\toverrideIdentifiers.push(...overrideIdentifiersFromKey(key));\n\t\t\t\t\tthis.configurationProperties[key] = property;\n\t\t\t\t\tthis.defaultLanguageConfigurationOverridesNode.properties![key] = property;\n\t\t\t\t} else {\n\t\t\t\t\tthis.configurationDefaultsOverrides.set(key, { value: overrides[key], source });\n\t\t\t\t\tconst property = this.configurationProperties[key];\n\t\t\t\t\tif (property) {\n\t\t\t\t\t\tthis.updatePropertyDefaultValue(key, property);\n\t\t\t\t\t\tthis.updateSchema(key, property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.registerOverrideIdentifiers(overrideIdentifiers);\n\t\tthis._onDidSchemaChange.fire();\n\t\tthis._onDidUpdateConfiguration.fire({ properties, defaultsOverrides: true });\n\t}\n\n\tpublic deregisterDefaultConfigurations(defaultConfigurations: IConfigurationDefaults[]): void {\n\t\tconst properties: string[] = [];\n\t\tfor (const { overrides, source } of defaultConfigurations) {\n\t\t\tfor (const key in overrides) {\n\t\t\t\tconst configurationDefaultsOverride = this.configurationDefaultsOverrides.get(key);\n\t\t\t\tconst id = types.isString(source) ? source : source?.id;\n\t\t\t\tconst configurationDefaultsOverrideSourceId = types.isString(configurationDefaultsOverride?.source) ? configurationDefaultsOverride?.source : configurationDefaultsOverride?.source?.id;\n\t\t\t\tif (id !== configurationDefaultsOverrideSourceId) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tproperties.push(key);\n\t\t\t\tthis.configurationDefaultsOverrides.delete(key);\n\t\t\t\tif (OVERRIDE_PROPERTY_REGEX.test(key)) {\n\t\t\t\t\tdelete this.configurationProperties[key];\n\t\t\t\t\tdelete this.defaultLanguageConfigurationOverridesNode.properties![key];\n\t\t\t\t} else {\n\t\t\t\t\tconst property = this.configurationProperties[key];\n\t\t\t\t\tif (property) {\n\t\t\t\t\t\tthis.updatePropertyDefaultValue(key, property);\n\t\t\t\t\t\tthis.updateSchema(key, property);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tthis.updateOverridePropertyPatternKey();\n\t\tthis._onDidSchemaChange.fire();\n\t\tthis._onDidUpdateConfiguration.fire({ properties, defaultsOverrides: true });\n\t}\n\n\tpublic notifyConfigurationSchemaUpdated(...configurations: IConfigurationNode[]) {\n\t\tthis._onDidSchemaChange.fire();\n\t}\n\n\tpublic registerOverrideIdentifiers(overrideIdentifiers: string[]): void {\n\t\tfor (const overrideIdentifier of overrideIdentifiers) {\n\t\t\tthis.overrideIdentifiers.add(overrideIdentifier);\n\t\t}\n\t\tthis.updateOverridePropertyPatternKey();\n\t}\n\n\tprivate doRegisterConfigurations(configurations: IConfigurationNode[], validate: boolean): string[] {\n\t\tconst properties: string[] = [];\n\t\tconfigurations.forEach(configuration => {\n\t\t\tproperties.push(...this.validateAndRegisterProperties(configuration, validate, configuration.extensionInfo, configuration.restrictedProperties)); // fills in defaults\n\t\t\tthis.configurationContributors.push(configuration);\n\t\t\tthis.registerJSONConfiguration(configuration);\n\t\t});\n\t\treturn properties;\n\t}\n\n\tprivate doDeregisterConfigurations(configurations: IConfigurationNode[]): string[] {\n\t\tconst properties: string[] = [];\n\t\tconst deregisterConfiguration = (configuration: IConfigurationNode) => {\n\t\t\tif (configuration.properties) {\n\t\t\t\tfor (const key in configuration.properties) {\n\t\t\t\t\tproperties.push(key);\n\t\t\t\t\tdelete this.configurationProperties[key];\n\t\t\t\t\tthis.removeFromSchema(key, configuration.properties[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (configuration.allOf) {\n\t\t\t\tconfiguration.allOf.forEach(node => deregisterConfiguration(node));\n\t\t\t}\n\t\t};\n\t\tfor (const configuration of configurations) {\n\t\t\tderegisterConfiguration(configuration);\n\t\t\tconst index = this.configurationContributors.indexOf(configuration);\n\t\t\tif (index !== -1) {\n\t\t\t\tthis.configurationContributors.splice(index, 1);\n\t\t\t}\n\t\t}\n\t\treturn properties;\n\t}\n\n\tprivate validateAndRegisterProperties(configuration: IConfigurationNode, validate: boolean = true, extensionInfo: IExtensionInfo | undefined, restrictedProperties: string[] | undefined, scope: ConfigurationScope = ConfigurationScope.WINDOW): string[] {\n\t\tscope = types.isUndefinedOrNull(configuration.scope) ? scope : configuration.scope;\n\t\tlet propertyKeys: string[] = [];\n\t\tlet properties = configuration.properties;\n\t\tif (properties) {\n\t\t\tfor (let key in properties) {\n\t\t\t\tif (validate && validateProperty(key)) {\n\t\t\t\t\tdelete properties[key];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tconst property: IRegisteredConfigurationPropertySchema = properties[key];\n\t\t\t\tproperty.source = extensionInfo;\n\n\t\t\t\t// update default value\n\t\t\t\tproperty.defaultDefaultValue = properties[key].default;\n\t\t\t\tthis.updatePropertyDefaultValue(key, property);\n\n\t\t\t\t// update scope\n\t\t\t\tif (OVERRIDE_PROPERTY_REGEX.test(key)) {\n\t\t\t\t\tproperty.scope = undefined; // No scope for overridable properties `[${identifier}]`\n\t\t\t\t} else {\n\t\t\t\t\tproperty.scope = types.isUndefinedOrNull(property.scope) ? scope : property.scope;\n\t\t\t\t\tproperty.restricted = types.isUndefinedOrNull(property.restricted) ? !!restrictedProperties?.includes(key) : property.restricted;\n\t\t\t\t}\n\n\t\t\t\t// Add to properties maps\n\t\t\t\t// Property is included by default if 'included' is unspecified\n\t\t\t\tif (properties[key].hasOwnProperty('included') && !properties[key].included) {\n\t\t\t\t\tthis.excludedConfigurationProperties[key] = properties[key];\n\t\t\t\t\tdelete properties[key];\n\t\t\t\t\tcontinue;\n\t\t\t\t} else {\n\t\t\t\t\tthis.configurationProperties[key] = properties[key];\n\t\t\t\t}\n\n\t\t\t\tif (!properties[key].deprecationMessage && properties[key].markdownDeprecationMessage) {\n\t\t\t\t\t// If not set, default deprecationMessage to the markdown source\n\t\t\t\t\tproperties[key].deprecationMessage = properties[key].markdownDeprecationMessage;\n\t\t\t\t}\n\n\t\t\t\tpropertyKeys.push(key);\n\t\t\t}\n\t\t}\n\t\tlet subNodes = configuration.allOf;\n\t\tif (subNodes) {\n\t\t\tfor (let node of subNodes) {\n\t\t\t\tpropertyKeys.push(...this.validateAndRegisterProperties(node, validate, extensionInfo, restrictedProperties, scope));\n\t\t\t}\n\t\t}\n\t\treturn propertyKeys;\n\t}\n\n\t// TODO: @sandy081 - Remove this method and include required info in getConfigurationProperties\n\tgetConfigurations(): IConfigurationNode[] {\n\t\treturn this.configurationContributors;\n\t}\n\n\tgetConfigurationProperties(): IStringDictionary<IRegisteredConfigurationPropertySchema> {\n\t\treturn this.configurationProperties;\n\t}\n\n\tgetExcludedConfigurationProperties(): IStringDictionary<IRegisteredConfigurationPropertySchema> {\n\t\treturn this.excludedConfigurationProperties;\n\t}\n\n\tgetConfigurationDefaultsOverrides(): Map<string, IConfigurationDefaultOverride> {\n\t\treturn this.configurationDefaultsOverrides;\n\t}\n\n\tprivate registerJSONConfiguration(configuration: IConfigurationNode) {\n\t\tconst register = (configuration: IConfigurationNode) => {\n\t\t\tlet properties = configuration.properties;\n\t\t\tif (properties) {\n\t\t\t\tfor (const key in properties) {\n\t\t\t\t\tthis.updateSchema(key, properties[key]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet subNodes = configuration.allOf;\n\t\t\tif (subNodes) {\n\t\t\t\tsubNodes.forEach(register);\n\t\t\t}\n\t\t};\n\t\tregister(configuration);\n\t}\n\n\tprivate updateSchema(key: string, property: IConfigurationPropertySchema): void {\n\t\tallSettings.properties[key] = property;\n\t\tswitch (property.scope) {\n\t\t\tcase ConfigurationScope.APPLICATION:\n\t\t\t\tapplicationSettings.properties[key] = property;\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.MACHINE:\n\t\t\t\tmachineSettings.properties[key] = property;\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.MACHINE_OVERRIDABLE:\n\t\t\t\tmachineOverridableSettings.properties[key] = property;\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.WINDOW:\n\t\t\t\twindowSettings.properties[key] = property;\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.RESOURCE:\n\t\t\t\tresourceSettings.properties[key] = property;\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.LANGUAGE_OVERRIDABLE:\n\t\t\t\tresourceSettings.properties[key] = property;\n\t\t\t\tthis.resourceLanguageSettingsSchema.properties![key] = property;\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate removeFromSchema(key: string, property: IConfigurationPropertySchema): void {\n\t\tdelete allSettings.properties[key];\n\t\tswitch (property.scope) {\n\t\t\tcase ConfigurationScope.APPLICATION:\n\t\t\t\tdelete applicationSettings.properties[key];\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.MACHINE:\n\t\t\t\tdelete machineSettings.properties[key];\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.MACHINE_OVERRIDABLE:\n\t\t\t\tdelete machineOverridableSettings.properties[key];\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.WINDOW:\n\t\t\t\tdelete windowSettings.properties[key];\n\t\t\t\tbreak;\n\t\t\tcase ConfigurationScope.RESOURCE:\n\t\t\tcase ConfigurationScope.LANGUAGE_OVERRIDABLE:\n\t\t\t\tdelete resourceSettings.properties[key];\n\t\t\t\tdelete this.resourceLanguageSettingsSchema.properties![key];\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tprivate updateOverridePropertyPatternKey(): void {\n\t\tfor (const overrideIdentifier of this.overrideIdentifiers.values()) {\n\t\t\tconst overrideIdentifierProperty = `[${overrideIdentifier}]`;\n\t\t\tconst resourceLanguagePropertiesSchema: IJSONSchema = {\n\t\t\t\ttype: 'object',\n\t\t\t\tdescription: nls.localize('overrideSettings.defaultDescription', \"Configure editor settings to be overridden for a language.\"),\n\t\t\t\terrorMessage: nls.localize('overrideSettings.errorMessage', \"This setting does not support per-language configuration.\"),\n\t\t\t\t$ref: resourceLanguageSettingsSchemaId,\n\t\t\t};\n\t\t\tthis.updatePropertyDefaultValue(overrideIdentifierProperty, resourceLanguagePropertiesSchema);\n\t\t\tallSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n\t\t\tapplicationSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n\t\t\tmachineSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n\t\t\tmachineOverridableSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n\t\t\twindowSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n\t\t\tresourceSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n\t\t}\n\t\tthis._onDidSchemaChange.fire();\n\t}\n\n\tprivate registerOverridePropertyPatternKey(): void {\n\t\tconst resourceLanguagePropertiesSchema: IJSONSchema = {\n\t\t\ttype: 'object',\n\t\t\tdescription: nls.localize('overrideSettings.defaultDescription', \"Configure editor settings to be overridden for a language.\"),\n\t\t\terrorMessage: nls.localize('overrideSettings.errorMessage', \"This setting does not support per-language configuration.\"),\n\t\t\t$ref: resourceLanguageSettingsSchemaId,\n\t\t};\n\t\tallSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n\t\tapplicationSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n\t\tmachineSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n\t\tmachineOverridableSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n\t\twindowSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n\t\tresourceSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n\t\tthis._onDidSchemaChange.fire();\n\t}\n\n\tprivate updatePropertyDefaultValue(key: string, property: IRegisteredConfigurationPropertySchema): void {\n\t\tconst configurationdefaultOverride = this.configurationDefaultsOverrides.get(key);\n\t\tlet defaultValue = configurationdefaultOverride?.value;\n\t\tlet defaultSource = configurationdefaultOverride?.source;\n\t\tif (types.isUndefined(defaultValue)) {\n\t\t\tdefaultValue = property.defaultDefaultValue;\n\t\t\tdefaultSource = undefined;\n\t\t}\n\t\tif (types.isUndefined(defaultValue)) {\n\t\t\tdefaultValue = getDefaultValue(property.type);\n\t\t}\n\t\tproperty.default = defaultValue;\n\t\tproperty.defaultValueSource = defaultSource;\n\t}\n}\n\nconst OVERRIDE_IDENTIFIER_PATTERN = `\\\\[([^\\\\]]+)\\\\]`;\nconst OVERRIDE_IDENTIFIER_REGEX = new RegExp(OVERRIDE_IDENTIFIER_PATTERN, 'g');\nexport const OVERRIDE_PROPERTY_PATTERN = `^(${OVERRIDE_IDENTIFIER_PATTERN})+$`;\nexport const OVERRIDE_PROPERTY_REGEX = new RegExp(OVERRIDE_PROPERTY_PATTERN);\n\nexport function overrideIdentifiersFromKey(key: string): string[] {\n\tconst identifiers: string[] = [];\n\tif (OVERRIDE_PROPERTY_REGEX.test(key)) {\n\t\tlet matches = OVERRIDE_IDENTIFIER_REGEX.exec(key);\n\t\twhile (matches?.length) {\n\t\t\tconst identifier = matches[1].trim();\n\t\t\tif (identifier) {\n\t\t\t\tidentifiers.push(identifier);\n\t\t\t}\n\t\t\tmatches = OVERRIDE_IDENTIFIER_REGEX.exec(key);\n\t\t}\n\t}\n\treturn distinct(identifiers);\n}\n\nexport function keyFromOverrideIdentifiers(overrideIdentifiers: string[]): string {\n\treturn overrideIdentifiers.reduce((result, overrideIdentifier) => `${result}[${overrideIdentifier}]`, '');\n}\n\nexport function getDefaultValue(type: string | string[] | undefined): any {\n\tconst t = Array.isArray(type) ? (<string[]>type)[0] : <string>type;\n\tswitch (t) {\n\t\tcase 'boolean':\n\t\t\treturn false;\n\t\tcase 'integer':\n\t\tcase 'number':\n\t\t\treturn 0;\n\t\tcase 'string':\n\t\t\treturn '';\n\t\tcase 'array':\n\t\t\treturn [];\n\t\tcase 'object':\n\t\t\treturn {};\n\t\tdefault:\n\t\t\treturn null;\n\t}\n}\n\nconst configurationRegistry = new ConfigurationRegistry();\nRegistry.add(Extensions.Configuration, configurationRegistry);\n\nexport function validateProperty(property: string): string | null {\n\tif (!property.trim()) {\n\t\treturn nls.localize('config.property.empty', \"Cannot register an empty property\");\n\t}\n\tif (OVERRIDE_PROPERTY_REGEX.test(property)) {\n\t\treturn nls.localize('config.property.languageDefault', \"Cannot register '{0}'. This matches property pattern '\\\\\\\\[.*\\\\\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.\", property);\n\t}\n\tif (configurationRegistry.getConfigurationProperties()[property] !== undefined) {\n\t\treturn nls.localize('config.property.duplicate', \"Cannot register '{0}'. This property is already registered.\", property);\n\t}\n\treturn null;\n}\n\nexport function getScopes(): [string, ConfigurationScope | undefined][] {\n\tconst scopes: [string, ConfigurationScope | undefined][] = [];\n\tconst configurationProperties = configurationRegistry.getConfigurationProperties();\n\tfor (const key of Object.keys(configurationProperties)) {\n\t\tscopes.push([key, configurationProperties[key].scope]);\n\t}\n\tscopes.push(['launch', ConfigurationScope.RESOURCE]);\n\tscopes.push(['task', ConfigurationScope.RESOURCE]);\n\treturn scopes;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as descriptors from './descriptors';\nimport { ServiceCollection } from './serviceCollection';\n\n// ------ internal util\n\nexport namespace _util {\n\n\texport const serviceIds = new Map<string, ServiceIdentifier<any>>();\n\n\texport const DI_TARGET = '$di$target';\n\texport const DI_DEPENDENCIES = '$di$dependencies';\n\n\texport function getServiceDependencies(ctor: any): { id: ServiceIdentifier<any>; index: number }[] {\n\t\treturn ctor[DI_DEPENDENCIES] || [];\n\t}\n}\n\n// --- interfaces ------\n\nexport type BrandedService = { _serviceBrand: undefined };\n\nexport interface IConstructorSignature<T, Args extends any[] = []> {\n\tnew <Services extends BrandedService[]>(...args: [...Args, ...Services]): T;\n}\n\nexport interface ServicesAccessor {\n\tget<T>(id: ServiceIdentifier<T>): T;\n}\n\nexport const IInstantiationService = createDecorator<IInstantiationService>('instantiationService');\n\n/**\n * Given a list of arguments as a tuple, attempt to extract the leading, non-service arguments\n * to their own tuple.\n */\ntype GetLeadingNonServiceArgs<Args> =\n\tArgs extends [...BrandedService[]] ? []\n\t: Args extends [infer A, ...BrandedService[]] ? [A]\n\t: Args extends [infer A, ...infer R] ? [A, ...GetLeadingNonServiceArgs<R>]\n\t: never;\n\nexport interface IInstantiationService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * Synchronously creates an instance that is denoted by the descriptor\n\t */\n\tcreateInstance<T>(descriptor: descriptors.SyncDescriptor0<T>): T;\n\tcreateInstance<Ctor extends new (...args: any[]) => any, R extends InstanceType<Ctor>>(ctor: Ctor, ...args: GetLeadingNonServiceArgs<ConstructorParameters<Ctor>>): R;\n\n\t/**\n\t * Calls a function with a service accessor.\n\t */\n\tinvokeFunction<R, TS extends any[] = []>(fn: (accessor: ServicesAccessor, ...args: TS) => R, ...args: TS): R;\n\n\t/**\n\t * Creates a child of this service which inherits all current services\n\t * and adds/overwrites the given services.\n\t */\n\tcreateChild(services: ServiceCollection): IInstantiationService;\n}\n\n\n/**\n * Identifies a service of type `T`.\n */\nexport interface ServiceIdentifier<T> {\n\t(...args: any[]): void;\n\ttype: T;\n}\n\nfunction storeServiceDependency(id: Function, target: Function, index: number): void {\n\tif ((target as any)[_util.DI_TARGET] === target) {\n\t\t(target as any)[_util.DI_DEPENDENCIES].push({ id, index });\n\t} else {\n\t\t(target as any)[_util.DI_DEPENDENCIES] = [{ id, index }];\n\t\t(target as any)[_util.DI_TARGET] = target;\n\t}\n}\n\n/**\n * The *only* valid way to create a {{ServiceIdentifier}}.\n */\nexport function createDecorator<T>(serviceId: string): ServiceIdentifier<T> {\n\n\tif (_util.serviceIds.has(serviceId)) {\n\t\treturn _util.serviceIds.get(serviceId)!;\n\t}\n\n\tconst id = <any>function (target: Function, key: string, index: number): any {\n\t\tif (arguments.length !== 3) {\n\t\t\tthrow new Error('@IServiceName-decorator can only be used to decorate a parameter');\n\t\t}\n\t\tstoreServiceDependency(id, target, index);\n\t};\n\n\tid.toString = () => serviceId;\n\n\t_util.serviceIds.set(serviceId, id);\n\treturn id;\n}\n\nexport function refineServiceDecorator<T1, T extends T1>(serviceIdentifier: ServiceIdentifier<T1>): ServiceIdentifier<T> {\n\treturn <ServiceIdentifier<T>>serviceIdentifier;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { Emitter, Event } from '../../../base/common/event';\nimport { IJSONSchema } from '../../../base/common/jsonSchema';\nimport * as platform from '../../registry/common/platform';\n\nexport const Extensions = {\n\tJSONContribution: 'base.contributions.json'\n};\n\nexport interface ISchemaContributions {\n\tschemas: { [id: string]: IJSONSchema };\n}\n\nexport interface IJSONContributionRegistry {\n\n\treadonly onDidChangeSchema: Event<string>;\n\n\t/**\n\t * Register a schema to the registry.\n\t */\n\tregisterSchema(uri: string, unresolvedSchemaContent: IJSONSchema): void;\n\n\n\t/**\n\t * Notifies all listeners that the content of the given schema has changed.\n\t * @param uri The id of the schema\n\t */\n\tnotifySchemaChanged(uri: string): void;\n\n\t/**\n\t * Get all schemas\n\t */\n\tgetSchemaContributions(): ISchemaContributions;\n}\n\n\n\nfunction normalizeId(id: string) {\n\tif (id.length > 0 && id.charAt(id.length - 1) === '#') {\n\t\treturn id.substring(0, id.length - 1);\n\t}\n\treturn id;\n}\n\n\n\nclass JSONContributionRegistry implements IJSONContributionRegistry {\n\n\tprivate schemasById: { [id: string]: IJSONSchema };\n\n\tprivate readonly _onDidChangeSchema = new Emitter<string>();\n\treadonly onDidChangeSchema: Event<string> = this._onDidChangeSchema.event;\n\n\tconstructor() {\n\t\tthis.schemasById = {};\n\t}\n\n\tpublic registerSchema(uri: string, unresolvedSchemaContent: IJSONSchema): void {\n\t\tthis.schemasById[normalizeId(uri)] = unresolvedSchemaContent;\n\t\tthis._onDidChangeSchema.fire(uri);\n\t}\n\n\tpublic notifySchemaChanged(uri: string): void {\n\t\tthis._onDidChangeSchema.fire(uri);\n\t}\n\n\tpublic getSchemaContributions(): ISchemaContributions {\n\t\treturn {\n\t\t\tschemas: this.schemasById,\n\t\t};\n\t}\n\n}\n\nconst jsonContributionRegistry = new JSONContributionRegistry();\nplatform.Registry.add(Extensions.JSONContribution, jsonContributionRegistry);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as Assert from '../../../base/common/assert';\nimport * as Types from '../../../base/common/types';\n\nexport interface IRegistry {\n\n\t/**\n\t * Adds the extension functions and properties defined by data to the\n\t * platform. The provided id must be unique.\n\t * @param id a unique identifier\n\t * @param data a contribution\n\t */\n\tadd(id: string, data: any): void;\n\n\t/**\n\t * Returns true iff there is an extension with the provided id.\n\t * @param id an extension identifier\n\t */\n\tknows(id: string): boolean;\n\n\t/**\n\t * Returns the extension functions and properties defined by the specified key or null.\n\t * @param id an extension identifier\n\t */\n\tas<T>(id: string): T;\n}\n\nclass RegistryImpl implements IRegistry {\n\n\tprivate readonly data = new Map<string, any>();\n\n\tpublic add(id: string, data: any): void {\n\t\tAssert.ok(Types.isString(id));\n\t\tAssert.ok(Types.isObject(data));\n\t\tAssert.ok(!this.data.has(id), 'There is already an extension with this id');\n\n\t\tthis.data.set(id, data);\n\t}\n\n\tpublic knows(id: string): boolean {\n\t\treturn this.data.has(id);\n\t}\n\n\tpublic as(id: string): any {\n\t\treturn this.data.get(id) || null;\n\t}\n}\n\nexport const Registry: IRegistry = new RegistryImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport { localize } from '../../../nls';\nimport { Event } from '../../../base/common/event';\nimport { extname } from '../../../base/common/path';\nimport { TernarySearchTree } from '../../../base/common/map';\nimport { extname as resourceExtname, basenameOrAuthority, joinPath, extUriBiasedIgnorePathCase } from '../../../base/common/resources';\nimport { URI, UriComponents } from '../../../base/common/uri';\nimport { createDecorator } from '../../instantiation/common/instantiation';\nimport { IEnvironmentService } from '../../environment/common/environment';\nimport { Schemas } from '../../../base/common/network';\n\nexport const IWorkspaceContextService = createDecorator<IWorkspaceContextService>('contextService');\n\nexport interface IWorkspaceContextService {\n\n\treadonly _serviceBrand: undefined;\n\n\t/**\n\t * An event which fires on workbench state changes.\n\t */\n\treadonly onDidChangeWorkbenchState: Event<WorkbenchState>;\n\n\t/**\n\t * An event which fires on workspace name changes.\n\t */\n\treadonly onDidChangeWorkspaceName: Event<void>;\n\n\t/**\n\t * An event which fires before workspace folders change.\n\t */\n\treadonly onWillChangeWorkspaceFolders: Event<IWorkspaceFoldersWillChangeEvent>;\n\n\t/**\n\t * An event which fires on workspace folders change.\n\t */\n\treadonly onDidChangeWorkspaceFolders: Event<IWorkspaceFoldersChangeEvent>;\n\n\t/**\n\t * Provides access to the complete workspace object.\n\t */\n\tgetCompleteWorkspace(): Promise<IWorkspace>;\n\n\t/**\n\t * Provides access to the workspace object the window is running with.\n\t * Use `getCompleteWorkspace` to get complete workspace object.\n\t */\n\tgetWorkspace(): IWorkspace;\n\n\t/**\n\t * Return the state of the workbench.\n\t *\n\t * WorkbenchState.EMPTY - if the workbench was opened with empty window or file\n\t * WorkbenchState.FOLDER - if the workbench was opened with a folder\n\t * WorkbenchState.WORKSPACE - if the workbench was opened with a workspace\n\t */\n\tgetWorkbenchState(): WorkbenchState;\n\n\t/**\n\t * Returns the folder for the given resource from the workspace.\n\t * Can be null if there is no workspace or the resource is not inside the workspace.\n\t */\n\tgetWorkspaceFolder(resource: URI): IWorkspaceFolder | null;\n\n\t/**\n\t * Return `true` if the current workspace has the given identifier or root URI otherwise `false`.\n\t */\n\tisCurrentWorkspace(workspaceIdOrFolder: IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier | URI): boolean;\n\n\t/**\n\t * Returns if the provided resource is inside the workspace or not.\n\t */\n\tisInsideWorkspace(resource: URI): boolean;\n}\n\nexport interface IResolvedWorkspace extends IWorkspaceIdentifier, IBaseWorkspace {\n\treadonly folders: IWorkspaceFolder[];\n}\n\nexport interface IBaseWorkspace {\n\n\t/**\n\t * If present, marks the window that opens the workspace\n\t * as a remote window with the given authority.\n\t */\n\treadonly remoteAuthority?: string;\n\n\t/**\n\t * Transient workspaces are meant to go away after being used\n\t * once, e.g. a window reload of a transient workspace will\n\t * open an empty window.\n\t *\n\t * See: https://github.com/microsoft/vscode/issues/119695\n\t */\n\treadonly transient?: boolean;\n}\n\nexport interface IBaseWorkspaceIdentifier {\n\n\t/**\n\t * Every workspace (multi-root, single folder or empty)\n\t * has a unique identifier. It is not possible to open\n\t * a workspace with the same `id` in multiple windows\n\t */\n\treadonly id: string;\n}\n\n/**\n * A single folder workspace identifier is a path to a folder + id.\n */\nexport interface ISingleFolderWorkspaceIdentifier extends IBaseWorkspaceIdentifier {\n\n\t/**\n\t * Folder path as `URI`.\n\t */\n\treadonly uri: URI;\n}\n\n/**\n * A multi-root workspace identifier is a path to a workspace file + id.\n */\nexport interface IWorkspaceIdentifier extends IBaseWorkspaceIdentifier {\n\n\t/**\n\t * Workspace config file path as `URI`.\n\t */\n\tconfigPath: URI;\n}\n\nexport interface IEmptyWorkspaceIdentifier extends IBaseWorkspaceIdentifier { }\n\nexport type IAnyWorkspaceIdentifier = IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier | IEmptyWorkspaceIdentifier;\n\nexport function isSingleFolderWorkspaceIdentifier(obj: unknown): obj is ISingleFolderWorkspaceIdentifier {\n\tconst singleFolderIdentifier = obj as ISingleFolderWorkspaceIdentifier | undefined;\n\n\treturn typeof singleFolderIdentifier?.id === 'string' && URI.isUri(singleFolderIdentifier.uri);\n}\n\nexport function toWorkspaceIdentifier(workspace: IWorkspace): IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier | undefined {\n\n\t// Multi root\n\tif (workspace.configuration) {\n\t\treturn {\n\t\t\tid: workspace.id,\n\t\t\tconfigPath: workspace.configuration\n\t\t};\n\t}\n\n\t// Single folder\n\tif (workspace.folders.length === 1) {\n\t\treturn {\n\t\t\tid: workspace.id,\n\t\t\turi: workspace.folders[0].uri\n\t\t};\n\t}\n\n\t// Empty workspace\n\treturn undefined;\n}\n\nexport function isWorkspaceIdentifier(obj: unknown): obj is IWorkspaceIdentifier {\n\tconst workspaceIdentifier = obj as IWorkspaceIdentifier | undefined;\n\n\treturn typeof workspaceIdentifier?.id === 'string' && URI.isUri(workspaceIdentifier.configPath);\n}\n\nexport interface ISerializedSingleFolderWorkspaceIdentifier extends IBaseWorkspaceIdentifier {\n\treadonly uri: UriComponents;\n}\n\nexport interface ISerializedWorkspaceIdentifier extends IBaseWorkspaceIdentifier {\n\treadonly configPath: UriComponents;\n}\n\nexport function reviveIdentifier(identifier: undefined): undefined;\nexport function reviveIdentifier(identifier: ISerializedWorkspaceIdentifier): IWorkspaceIdentifier;\nexport function reviveIdentifier(identifier: ISerializedSingleFolderWorkspaceIdentifier): ISingleFolderWorkspaceIdentifier;\nexport function reviveIdentifier(identifier: IEmptyWorkspaceIdentifier): IEmptyWorkspaceIdentifier;\nexport function reviveIdentifier(identifier: ISerializedWorkspaceIdentifier | ISerializedSingleFolderWorkspaceIdentifier | IEmptyWorkspaceIdentifier | undefined): IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier | IEmptyWorkspaceIdentifier | undefined;\nexport function reviveIdentifier(identifier: ISerializedWorkspaceIdentifier | ISerializedSingleFolderWorkspaceIdentifier | IEmptyWorkspaceIdentifier | undefined): IWorkspaceIdentifier | ISingleFolderWorkspaceIdentifier | IEmptyWorkspaceIdentifier | undefined {\n\n\t// Single Folder\n\tconst singleFolderIdentifierCandidate = identifier as ISerializedSingleFolderWorkspaceIdentifier | undefined;\n\tif (singleFolderIdentifierCandidate?.uri) {\n\t\treturn { id: singleFolderIdentifierCandidate.id, uri: URI.revive(singleFolderIdentifierCandidate.uri) };\n\t}\n\n\t// Multi folder\n\tconst workspaceIdentifierCandidate = identifier as ISerializedWorkspaceIdentifier | undefined;\n\tif (workspaceIdentifierCandidate?.configPath) {\n\t\treturn { id: workspaceIdentifierCandidate.id, configPath: URI.revive(workspaceIdentifierCandidate.configPath) };\n\t}\n\n\t// Empty\n\tif (identifier?.id) {\n\t\treturn { id: identifier.id };\n\t}\n\n\treturn undefined;\n}\n\nexport const enum WorkbenchState {\n\tEMPTY = 1,\n\tFOLDER,\n\tWORKSPACE\n}\n\nexport interface IWorkspaceFoldersWillChangeEvent {\n\n\treadonly changes: IWorkspaceFoldersChangeEvent;\n\treadonly fromCache: boolean;\n\n\tjoin(promise: Promise<void>): void;\n}\n\nexport interface IWorkspaceFoldersChangeEvent {\n\tadded: IWorkspaceFolder[];\n\tremoved: IWorkspaceFolder[];\n\tchanged: IWorkspaceFolder[];\n}\n\nexport interface IWorkspace {\n\n\t/**\n\t * the unique identifier of the workspace.\n\t */\n\treadonly id: string;\n\n\t/**\n\t * Folders in the workspace.\n\t */\n\treadonly folders: IWorkspaceFolder[];\n\n\t/**\n\t * Transient workspaces are meant to go away after being used\n\t * once, e.g. a window reload of a transient workspace will\n\t * open an empty window.\n\t */\n\treadonly transient?: boolean;\n\n\t/**\n\t * the location of the workspace configuration\n\t */\n\treadonly configuration?: URI | null;\n}\n\nexport function isWorkspace(thing: unknown): thing is IWorkspace {\n\tconst candidate = thing as IWorkspace | undefined;\n\n\treturn !!(candidate && typeof candidate === 'object'\n\t\t&& typeof candidate.id === 'string'\n\t\t&& Array.isArray(candidate.folders));\n}\n\nexport interface IWorkspaceFolderData {\n\n\t/**\n\t * The associated URI for this workspace folder.\n\t */\n\treadonly uri: URI;\n\n\t/**\n\t * The name of this workspace folder. Defaults to\n\t * the basename of its [uri-path](#Uri.path)\n\t */\n\treadonly name: string;\n\n\t/**\n\t * The ordinal number of this workspace folder.\n\t */\n\treadonly index: number;\n}\n\nexport interface IWorkspaceFolder extends IWorkspaceFolderData {\n\n\t/**\n\t * Given workspace folder relative path, returns the resource with the absolute path.\n\t */\n\ttoResource: (relativePath: string) => URI;\n}\n\nexport function isWorkspaceFolder(thing: unknown): thing is IWorkspaceFolder {\n\tconst candidate = thing as IWorkspaceFolder;\n\n\treturn !!(candidate && typeof candidate === 'object'\n\t\t&& URI.isUri(candidate.uri)\n\t\t&& typeof candidate.name === 'string'\n\t\t&& typeof candidate.toResource === 'function');\n}\n\nexport class Workspace implements IWorkspace {\n\n\tprivate _foldersMap: TernarySearchTree<URI, WorkspaceFolder> = TernarySearchTree.forUris<WorkspaceFolder>(this._ignorePathCasing, () => true);\n\tprivate _folders!: WorkspaceFolder[];\n\n\tconstructor(\n\t\tprivate _id: string,\n\t\tfolders: WorkspaceFolder[],\n\t\tprivate _transient: boolean,\n\t\tprivate _configuration: URI | null,\n\t\tprivate _ignorePathCasing: (key: URI) => boolean,\n\t) {\n\t\tthis.folders = folders;\n\t}\n\n\tupdate(workspace: Workspace) {\n\t\tthis._id = workspace.id;\n\t\tthis._configuration = workspace.configuration;\n\t\tthis._transient = workspace.transient;\n\t\tthis._ignorePathCasing = workspace._ignorePathCasing;\n\t\tthis.folders = workspace.folders;\n\t}\n\n\tget folders(): WorkspaceFolder[] {\n\t\treturn this._folders;\n\t}\n\n\tset folders(folders: WorkspaceFolder[]) {\n\t\tthis._folders = folders;\n\t\tthis.updateFoldersMap();\n\t}\n\n\tget id(): string {\n\t\treturn this._id;\n\t}\n\n\tget transient(): boolean {\n\t\treturn this._transient;\n\t}\n\n\tget configuration(): URI | null {\n\t\treturn this._configuration;\n\t}\n\n\tset configuration(configuration: URI | null) {\n\t\tthis._configuration = configuration;\n\t}\n\n\tgetFolder(resource: URI): IWorkspaceFolder | null {\n\t\tif (!resource) {\n\t\t\treturn null;\n\t\t}\n\n\t\treturn this._foldersMap.findSubstr(resource.with({\n\t\t\tscheme: resource.scheme,\n\t\t\tauthority: resource.authority,\n\t\t\tpath: resource.path\n\t\t})) || null;\n\t}\n\n\tprivate updateFoldersMap(): void {\n\t\tthis._foldersMap = TernarySearchTree.forUris<WorkspaceFolder>(this._ignorePathCasing, () => true);\n\t\tfor (const folder of this.folders) {\n\t\t\tthis._foldersMap.set(folder.uri, folder);\n\t\t}\n\t}\n\n\ttoJSON(): IWorkspace {\n\t\treturn { id: this.id, folders: this.folders, transient: this.transient, configuration: this.configuration };\n\t}\n}\n\nexport interface IRawFileWorkspaceFolder {\n\treadonly path: string;\n\tname?: string;\n}\n\nexport interface IRawUriWorkspaceFolder {\n\treadonly uri: string;\n\tname?: string;\n}\n\nexport class WorkspaceFolder implements IWorkspaceFolder {\n\n\treadonly uri: URI;\n\treadonly name: string;\n\treadonly index: number;\n\n\tconstructor(\n\t\tdata: IWorkspaceFolderData,\n\t\t/**\n\t\t * Provides access to the original metadata for this workspace\n\t\t * folder. This can be different from the metadata provided in\n\t\t * this class:\n\t\t * - raw paths can be relative\n\t\t * - raw paths are not normalized\n\t\t */\n\t\treadonly raw?: IRawFileWorkspaceFolder | IRawUriWorkspaceFolder\n\t) {\n\t\tthis.uri = data.uri;\n\t\tthis.index = data.index;\n\t\tthis.name = data.name;\n\t}\n\n\ttoResource(relativePath: string): URI {\n\t\treturn joinPath(this.uri, relativePath);\n\t}\n\n\ttoJSON(): IWorkspaceFolderData {\n\t\treturn { uri: this.uri, name: this.name, index: this.index };\n\t}\n}\n\nexport function toWorkspaceFolder(resource: URI): WorkspaceFolder {\n\treturn new WorkspaceFolder({ uri: resource, index: 0, name: basenameOrAuthority(resource) }, { uri: resource.toString() });\n}\n\nexport const WORKSPACE_EXTENSION = 'code-workspace';\nconst WORKSPACE_SUFFIX = `.${WORKSPACE_EXTENSION}`;\nexport const WORKSPACE_FILTER = [{ name: localize('codeWorkspace', \"Code Workspace\"), extensions: [WORKSPACE_EXTENSION] }];\nexport const UNTITLED_WORKSPACE_NAME = 'workspace.json';\n\nexport function isUntitledWorkspace(path: URI, environmentService: IEnvironmentService): boolean {\n\treturn extUriBiasedIgnorePathCase.isEqualOrParent(path, environmentService.untitledWorkspacesHome);\n}\n\nexport function isTemporaryWorkspace(workspace: IWorkspace): boolean;\nexport function isTemporaryWorkspace(path: URI): boolean;\nexport function isTemporaryWorkspace(arg1: IWorkspace | URI): boolean {\n\tlet path: URI | null | undefined;\n\tif (URI.isUri(arg1)) {\n\t\tpath = arg1;\n\t} else {\n\t\tpath = arg1.configuration;\n\t}\n\n\treturn path?.scheme === Schemas.tmp;\n}\n\nexport function isSavedWorkspace(path: URI, environmentService: IEnvironmentService): boolean {\n\treturn !isUntitledWorkspace(path, environmentService) && !isTemporaryWorkspace(path);\n}\n\nexport function hasWorkspaceFileExtension(path: string | URI) {\n\tconst ext = (typeof path === 'string') ? extname(path) : resourceExtname(path);\n\n\treturn ext === WORKSPACE_SUFFIX;\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/arrays.ts\n\n/**\n * @returns New array with all falsy values removed. The original array IS NOT modified.\n */\nexport function coalesce<T>(array: ReadonlyArray<T | undefined | null>): T[] {\n    return <T[]>array.filter(e => !!e);\n}\n\n/**\n * @returns True if the provided object is an array and has at least one element.\n */\nexport function isNonEmptyArray<T>(obj: T[] | undefined | null): obj is T[];\nexport function isNonEmptyArray<T>(obj: readonly T[] | undefined | null): obj is readonly T[];\nexport function isNonEmptyArray<T>(obj: T[] | readonly T[] | undefined | null): obj is T[] | readonly T[] {\n    return Array.isArray(obj) && obj.length > 0;\n}\n\nexport function flatten<T>(arr: T[][]): T[] {\n    return (<T[]>[]).concat(...arr);\n}\n\nexport interface Splice<T> {\n    readonly start: number;\n    readonly deleteCount: number;\n    readonly toInsert: T[];\n}\n\n/**\n * @returns 'true' if the 'arg' is a 'ReadonlyArray'.\n */\nexport function isReadonlyArray(arg: unknown): arg is readonly unknown[] {\n    // Since Typescript does not properly narrow down typings for 'ReadonlyArray' we need to help it.\n    return Array.isArray(arg);\n}\n","\n// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function ok(val?: any, message?: string): void {\n    if (!val || val === null) {\n        throw new Error(message ? `Assertion failed (${message})` : 'Assertion failed');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/core/characterClassifier.ts\n\nimport { toUint8 } from './uint';\n\n/**\n * A fast character classifier that uses a compact array for ASCII values.\n */\nexport class CharacterClassifier<T extends number> {\n    /**\n     * Maintain a compact (fully initialized ASCII map for quickly classifying ASCII characters - used more often in code).\n     */\n    protected _asciiMap: Uint8Array;\n\n    /**\n     * The entire map (sparse array).\n     */\n    protected _map: Map<number, number>;\n\n    protected _defaultValue: number;\n\n    constructor(_defaultValue: T) {\n        const defaultValue = toUint8(_defaultValue);\n\n        this._defaultValue = defaultValue;\n        this._asciiMap = CharacterClassifier._createAsciiMap(defaultValue);\n        this._map = new Map<number, number>();\n    }\n\n    private static _createAsciiMap(defaultValue: number): Uint8Array {\n        const asciiMap: Uint8Array = new Uint8Array(256);\n        for (let i = 0; i < 256; i++) {\n            asciiMap[i] = defaultValue;\n        }\n        return asciiMap;\n    }\n\n    public set(charCode: number, _value: T): void {\n        const value = toUint8(_value);\n\n        if (charCode >= 0 && charCode < 256) {\n            this._asciiMap[charCode] = value;\n        } else {\n            this._map.set(charCode, value);\n        }\n    }\n\n    public get(charCode: number): T {\n        if (charCode >= 0 && charCode < 256) {\n            return <T>this._asciiMap[charCode];\n        } else {\n            return <T>(this._map.get(charCode) || this._defaultValue);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { DebugChannel } from '@theia/debug/lib/common/debug-service';\nimport { ConnectionExt, ConnectionMain } from './plugin-api-rpc';\nimport { Emitter } from '@theia/core/lib/common/event';\n\n/**\n * A channel communicating with a counterpart in a plugin host.\n */\nexport class PluginChannel implements DebugChannel {\n    private messageEmitter: Emitter<string> = new Emitter();\n    private errorEmitter: Emitter<unknown> = new Emitter();\n    private closedEmitter: Emitter<void> = new Emitter();\n\n    constructor(\n        protected readonly id: string,\n        protected readonly connection: ConnectionExt | ConnectionMain) { }\n\n    send(content: string): void {\n        this.connection.$sendMessage(this.id, content);\n    }\n\n    fireMessageReceived(msg: string): void {\n        this.messageEmitter.fire(msg);\n    }\n\n    fireError(error: unknown): void {\n        this.errorEmitter.fire(error);\n    }\n\n    fireClosed(): void {\n        this.closedEmitter.fire();\n    }\n\n    onMessage(cb: (message: string) => void): void {\n        this.messageEmitter.event(cb);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onError(cb: (reason: any) => void): void {\n        this.errorEmitter.event(cb);\n    }\n\n    onClose(cb: (code: number, reason: string) => void): void {\n        this.closedEmitter.event(() => cb(-1, 'closed'));\n    }\n\n    close(): void {\n        this.connection.$deleteConnection(this.id);\n    }\n}\n\nexport class ConnectionImpl implements ConnectionMain, ConnectionExt {\n    private readonly proxy: ConnectionExt | ConnectionExt;\n    private readonly connections = new Map<string, PluginChannel>();\n\n    constructor(proxy: ConnectionMain | ConnectionExt) {\n        this.proxy = proxy;\n    }\n\n    /**\n     * Gets the connection between plugin by id and sends string message to it.\n     *\n     * @param id connection's id\n     * @param message incoming message\n     */\n    async $sendMessage(id: string, message: string): Promise<void> {\n        if (this.connections.has(id)) {\n            this.connections.get(id)!.fireMessageReceived(message);\n        } else {\n            console.warn(`Received message for unknown connection: ${id}`);\n        }\n    }\n\n    /**\n     * Instantiates a new connection by the given id.\n     * @param id the connection id\n     */\n    async $createConnection(id: string): Promise<void> {\n        console.debug(`Creating plugin connection: ${id}`);\n\n        await this.doEnsureConnection(id);\n    }\n\n    /**\n     * Deletes a connection.\n     * @param id the connection id\n     */\n    async $deleteConnection(id: string): Promise<void> {\n        console.debug(`Deleting plugin connection: ${id}`);\n        const connection = this.connections.get(id);\n        if (connection) {\n            this.connections.delete(id);\n            connection.fireClosed();\n        }\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async ensureConnection(id: string): Promise<PluginChannel> {\n        console.debug(`Creating local connection: ${id}`);\n        const connection = await this.doEnsureConnection(id);\n        await this.proxy.$createConnection(id);\n        return connection;\n    }\n\n    /**\n     * Returns existed connection or creates a new one.\n     * @param id the connection id\n     */\n    async doEnsureConnection(id: string): Promise<PluginChannel> {\n        const connection = this.connections.get(id) || await this.doCreateConnection(id);\n        this.connections.set(id, connection);\n        return connection;\n    }\n\n    protected async doCreateConnection(id: string): Promise<PluginChannel> {\n        const channel = new PluginChannel(id, this.proxy);\n        channel.onClose(() => this.connections.delete(id));\n        return channel;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport interface Disposable {\n    dispose(): void;\n}\n\nexport function dispose<T extends Disposable>(disposable: T): T | undefined;\nexport function dispose<T extends Disposable>(...disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(disposables: T[]): T[] | undefined;\nexport function dispose<T extends Disposable>(first: T | T[], ...rest: T[]): T | T[] | undefined {\n    if (Array.isArray(first)) {\n        first.forEach(d => d && d.dispose());\n        return [];\n    } else if (rest.length === 0) {\n        if (first) {\n            first.dispose();\n            return first;\n        }\n        return undefined;\n    } else {\n        dispose(first);\n        dispose(rest);\n        return [];\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// enum copied from monaco.d.ts\n/**\n * The style in which the editor's cursor should be rendered.\n */\nexport enum TextEditorCursorStyle {\n    /**\n     * As a vertical line\n     */\n    Line = 1,\n\n    /**\n     * As a block\n     */\n    Block = 2,\n\n    /**\n     * As a horizontal line, under character\n     */\n    Underline = 3,\n\n    /**\n     * As a thin vertical line\n     */\n    LineThin = 4,\n\n    /**\n     * As an outlined block, on top of a character\n     */\n    BlockOutline = 5,\n\n    /**\n     * As a thin horizontal line, under a character\n     */\n    UnderlineThin = 6\n}\n\nexport function cursorStyleToString(cursorStyle: TextEditorCursorStyle): 'line' | 'block' | 'underline' | 'line-thin' | 'block-outline' | 'underline-thin' {\n    switch (cursorStyle) {\n        case TextEditorCursorStyle.Line:\n            return 'line';\n        case TextEditorCursorStyle.Block:\n            return 'block';\n        case TextEditorCursorStyle.Underline:\n            return 'underline';\n        case TextEditorCursorStyle.LineThin:\n            return 'line-thin';\n        case TextEditorCursorStyle.BlockOutline:\n            return 'block-outline';\n        case TextEditorCursorStyle.UnderlineThin:\n            return 'underline-thin';\n        default:\n            throw new Error('cursorStyleToString: Unknown cursorStyle');\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport function illegalArgument(message?: string): Error {\n    if (message) {\n        return new Error(`Illegal argument: ${message}`);\n    } else {\n        return new Error('Illegal argument');\n    }\n}\n\nexport function readonly(name?: string): Error {\n    if (name) {\n        return new Error(`readonly property '${name} cannot be changed'`);\n    } else {\n        return new Error('readonly property cannot be changed');\n    }\n}\n\nexport function disposed(what: string): Error {\n    const result = new Error(`${what} has been disposed`);\n    result.name = 'DISPOSED';\n    return result;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport class IdGenerator {\n    private lastId: number;\n    constructor(private prefix: string) {\n        this.lastId = 0;\n    }\n\n    nextId(): string {\n        return this.prefix + (++this.lastId);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// Here we expose types from @theia/plugin, so it becomes a direct dependency\nexport * from './plugin-protocol';\nexport * from './plugin-api-rpc';\nexport * from './plugin-ext-api-contribution';\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/editor/common/modes/linkComputer.ts\n\n/* eslint-disable max-len */\n\nimport { CharacterClassifier } from './character-classifier';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { DocumentLink as ILink } from './plugin-api-rpc-model';\n\nexport interface ILinkComputerTarget {\n    getLineCount(): number;\n    getLineContent(lineNumber: number): string;\n}\n\nexport const enum State {\n    Invalid = 0,\n    Start = 1,\n    H = 2,\n    HT = 3,\n    HTT = 4,\n    HTTP = 5,\n    F = 6,\n    FI = 7,\n    FIL = 8,\n    BeforeColon = 9,\n    AfterColon = 10,\n    AlmostThere = 11,\n    End = 12,\n    Accept = 13,\n    LastKnownState = 14 // marker, custom states may follow\n}\n\nexport type Edge = [State, number, State];\n\nexport class Uint8Matrix {\n\n    private readonly _data: Uint8Array;\n    public readonly rows: number;\n    public readonly cols: number;\n\n    constructor(rows: number, cols: number, defaultValue: number) {\n        const data = new Uint8Array(rows * cols);\n        for (let i = 0, len = rows * cols; i < len; i++) {\n            data[i] = defaultValue;\n        }\n\n        this._data = data;\n        this.rows = rows;\n        this.cols = cols;\n    }\n\n    public get(row: number, col: number): number {\n        return this._data[row * this.cols + col];\n    }\n\n    public set(row: number, col: number, value: number): void {\n        this._data[row * this.cols + col] = value;\n    }\n}\n\nexport class StateMachine {\n\n    private readonly _states: Uint8Matrix;\n    private readonly _maxCharCode: number;\n\n    constructor(edges: Edge[]) {\n        let maxCharCode = 0;\n        let maxState = State.Invalid;\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            if (chCode > maxCharCode) {\n                maxCharCode = chCode;\n            }\n            if (from > maxState) {\n                maxState = from;\n            }\n            if (to > maxState) {\n                maxState = to;\n            }\n        }\n\n        maxCharCode++;\n        maxState++;\n\n        const states = new Uint8Matrix(maxState, maxCharCode, State.Invalid);\n        for (let i = 0, len = edges.length; i < len; i++) {\n            const [from, chCode, to] = edges[i];\n            states.set(from, chCode, to);\n        }\n\n        this._states = states;\n        this._maxCharCode = maxCharCode;\n    }\n\n    public nextState(currentState: State, chCode: number): State {\n        if (chCode < 0 || chCode >= this._maxCharCode) {\n            return State.Invalid;\n        }\n        return this._states.get(currentState, chCode);\n    }\n}\n\n// State machine for http:// or https:// or file://\nlet _stateMachine: StateMachine | null = null;\nfunction getStateMachine(): StateMachine {\n    if (_stateMachine === null) {\n        _stateMachine = new StateMachine([\n            [State.Start, CharCode.h, State.H],\n            [State.Start, CharCode.H, State.H],\n            [State.Start, CharCode.f, State.F],\n            [State.Start, CharCode.F, State.F],\n\n            [State.H, CharCode.t, State.HT],\n            [State.H, CharCode.T, State.HT],\n\n            [State.HT, CharCode.t, State.HTT],\n            [State.HT, CharCode.T, State.HTT],\n\n            [State.HTT, CharCode.p, State.HTTP],\n            [State.HTT, CharCode.P, State.HTTP],\n\n            [State.HTTP, CharCode.s, State.BeforeColon],\n            [State.HTTP, CharCode.S, State.BeforeColon],\n            [State.HTTP, CharCode.Colon, State.AfterColon],\n\n            [State.F, CharCode.i, State.FI],\n            [State.F, CharCode.I, State.FI],\n\n            [State.FI, CharCode.l, State.FIL],\n            [State.FI, CharCode.L, State.FIL],\n\n            [State.FIL, CharCode.e, State.BeforeColon],\n            [State.FIL, CharCode.E, State.BeforeColon],\n\n            [State.BeforeColon, CharCode.Colon, State.AfterColon],\n\n            [State.AfterColon, CharCode.Slash, State.AlmostThere],\n\n            [State.AlmostThere, CharCode.Slash, State.End],\n        ]);\n    }\n    return _stateMachine;\n}\n\nconst enum CharacterClass {\n    None = 0,\n    ForceTermination = 1,\n    CannotEndIn = 2\n}\n\nlet _classifier: CharacterClassifier<CharacterClass> | null = null;\nfunction getClassifier(): CharacterClassifier<CharacterClass> {\n    if (_classifier === null) {\n        _classifier = new CharacterClassifier<CharacterClass>(CharacterClass.None);\n\n        const FORCE_TERMINATION_CHARACTERS = ' \\t<>\\'\\\"';\n        for (let i = 0; i < FORCE_TERMINATION_CHARACTERS.length; i++) {\n            _classifier.set(FORCE_TERMINATION_CHARACTERS.charCodeAt(i), CharacterClass.ForceTermination);\n        }\n\n        const CANNOT_END_WITH_CHARACTERS = '.,;';\n        for (let i = 0; i < CANNOT_END_WITH_CHARACTERS.length; i++) {\n            _classifier.set(CANNOT_END_WITH_CHARACTERS.charCodeAt(i), CharacterClass.CannotEndIn);\n        }\n    }\n    return _classifier;\n}\n\nexport class LinkComputer {\n\n    private static _createLink(classifier: CharacterClassifier<CharacterClass>, line: string, lineNumber: number, linkBeginIndex: number, linkEndIndex: number): ILink {\n        // Do not allow to end link in certain characters...\n        let lastIncludedCharIndex = linkEndIndex - 1;\n        do {\n            const chCode = line.charCodeAt(lastIncludedCharIndex);\n            const chClass = classifier.get(chCode);\n            if (chClass !== CharacterClass.CannotEndIn) {\n                break;\n            }\n            lastIncludedCharIndex--;\n        } while (lastIncludedCharIndex > linkBeginIndex);\n\n        // Handle links enclosed in parens, square and curly brackets.\n        if (linkBeginIndex > 0) {\n            const charCodeBeforeLink = line.charCodeAt(linkBeginIndex - 1);\n            const lastCharCodeInLink = line.charCodeAt(lastIncludedCharIndex);\n\n            if (\n                (charCodeBeforeLink === CharCode.OpenParen && lastCharCodeInLink === CharCode.CloseParen)\n                || (charCodeBeforeLink === CharCode.OpenSquareBracket && lastCharCodeInLink === CharCode.CloseSquareBracket)\n                || (charCodeBeforeLink === CharCode.OpenCurlyBrace && lastCharCodeInLink === CharCode.CloseCurlyBrace)\n            ) {\n                // Do not end in ) if ( is before the link start\n                // Do not end in ] if [ is before the link start\n                // Do not end in } if { is before the link start\n                lastIncludedCharIndex--;\n            }\n        }\n\n        return {\n            range: {\n                startLineNumber: lineNumber,\n                startColumn: linkBeginIndex + 1,\n                endLineNumber: lineNumber,\n                endColumn: lastIncludedCharIndex + 2\n            },\n            url: line.substring(linkBeginIndex, lastIncludedCharIndex + 1)\n        };\n    }\n\n    public static computeLinks(model: ILinkComputerTarget, stateMachine: StateMachine = getStateMachine()): ILink[] {\n        const classifier = getClassifier();\n\n        const result: ILink[] = [];\n        for (let i = 1, lineCount = model.getLineCount(); i <= lineCount; i++) {\n            const line = model.getLineContent(i);\n            const len = line.length;\n\n            let j = 0;\n            let linkBeginIndex = 0;\n            let linkBeginChCode = 0;\n            let state = State.Start;\n            let hasOpenParens = false;\n            let hasOpenSquareBracket = false;\n            let inSquareBrackets = false;\n            let hasOpenCurlyBracket = false;\n\n            while (j < len) {\n\n                let resetStateMachine = false;\n                const chCode = line.charCodeAt(j);\n\n                if (state === State.Accept) {\n                    let chClass: CharacterClass;\n                    switch (chCode) {\n                        case CharCode.OpenParen:\n                            hasOpenParens = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseParen:\n                            chClass = (hasOpenParens ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenSquareBracket:\n                            inSquareBrackets = true;\n                            hasOpenSquareBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseSquareBracket:\n                            inSquareBrackets = false;\n                            chClass = (hasOpenSquareBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        case CharCode.OpenCurlyBrace:\n                            hasOpenCurlyBracket = true;\n                            chClass = CharacterClass.None;\n                            break;\n                        case CharCode.CloseCurlyBrace:\n                            chClass = (hasOpenCurlyBracket ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        /* The following three rules make it that ' or \" or ` are allowed inside links if the link began with a different one */\n                        case CharCode.SingleQuote:\n                            chClass = (linkBeginChCode === CharCode.DoubleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.DoubleQuote:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.BackTick) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.BackTick:\n                            chClass = (linkBeginChCode === CharCode.SingleQuote || linkBeginChCode === CharCode.DoubleQuote) ? CharacterClass.None : CharacterClass.ForceTermination;\n                            break;\n                        case CharCode.Asterisk:\n                            // `*` terminates a link if the link began with `*`\n                            chClass = (linkBeginChCode === CharCode.Asterisk) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Pipe:\n                            // `|` terminates a link if the link began with `|`\n                            chClass = (linkBeginChCode === CharCode.Pipe) ? CharacterClass.ForceTermination : CharacterClass.None;\n                            break;\n                        case CharCode.Space:\n                            // ` ` allow space in between [ and ]\n                            chClass = (inSquareBrackets ? CharacterClass.None : CharacterClass.ForceTermination);\n                            break;\n                        default:\n                            chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, j));\n                        resetStateMachine = true;\n                    }\n                } else if (state === State.End) {\n\n                    let chClass: CharacterClass;\n                    if (chCode === CharCode.OpenSquareBracket) {\n                        // Allow for the authority part to contain ipv6 addresses which contain [ and ]\n                        hasOpenSquareBracket = true;\n                        chClass = CharacterClass.None;\n                    } else {\n                        chClass = classifier.get(chCode);\n                    }\n\n                    // Check if character terminates link\n                    if (chClass === CharacterClass.ForceTermination) {\n                        resetStateMachine = true;\n                    } else {\n                        state = State.Accept;\n                    }\n                } else {\n                    state = stateMachine.nextState(state, chCode);\n                    if (state === State.Invalid) {\n                        resetStateMachine = true;\n                    }\n                }\n\n                if (resetStateMachine) {\n                    state = State.Start;\n                    hasOpenParens = false;\n                    hasOpenSquareBracket = false;\n                    hasOpenCurlyBracket = false;\n\n                    // Record where the link started\n                    linkBeginIndex = j + 1;\n                    linkBeginChCode = chCode;\n                }\n\n                j++;\n            }\n\n            if (state === State.Accept) {\n                result.push(LinkComputer._createLink(classifier, line, i, linkBeginIndex, len));\n            }\n\n        }\n\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport interface ObjectIdentifier {\n    $ident: number;\n}\n\nexport namespace ObjectIdentifier {\n    export const name = '$ident';\n\n    export function mixin<T>(obj: T, id: number): T & ObjectIdentifier {\n        Object.defineProperty(obj, name, { value: id, enumerable: true });\n        return <T & ObjectIdentifier>obj;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function of(obj: any): number {\n        return obj[name];\n    }\n}\n","/* eslint-disable */\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/objects.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\nimport { isUndefinedOrNull, isArray, isObject } from './types';\n\nconst _hasOwnProperty = Object.prototype.hasOwnProperty;\n\nexport function cloneAndChange(obj: any, changer: (orig: any) => any): any {\n    return _cloneAndChange(obj, changer, new Set());\n}\n\nfunction _cloneAndChange(obj: any, changer: (orig: any) => any, seen: Set<any>): any {\n    if (isUndefinedOrNull(obj)) {\n        return obj;\n    }\n\n    const changed = changer(obj);\n    if (typeof changed !== 'undefined') {\n        return changed;\n    }\n\n    if (isArray(obj)) {\n        const r1: any[] = [];\n        for (const e of obj) {\n            r1.push(_cloneAndChange(e, changer, seen));\n        }\n        return r1;\n    }\n\n    if (isObject(obj)) {\n        if (seen.has(obj)) {\n            throw new Error('Cannot clone recursive data-structure');\n        }\n        seen.add(obj);\n        const r2 = {};\n        for (let i2 in obj) {\n            if (_hasOwnProperty.call(obj, i2)) {\n                (r2 as any)[i2] = _cloneAndChange(obj[i2], changer, seen);\n            }\n        }\n        seen.delete(obj);\n        return r2;\n    }\n\n    return obj;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// file copied from https://github.com/wjordan/browser-path/blob/master/src/node_path.ts\n// Original license:\n/*\n====\n\nCopyright (c) 2015 John Vilk and other contributors.\n\nPermission is hereby granted, free of charge, to any person obtaining a copy of\nthis software and associated documentation files (the \"Software\"), to deal in\nthe Software without restriction, including without limitation the rights to\nuse, copy, modify, merge, publish, distribute, sublicense, and/or sell copies\nof the Software, and to permit persons to whom the Software is furnished to do\nso, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n\n====\n*/\n\nimport { sep } from '@theia/core/lib/common/paths';\n\nconst replaceRegex = new RegExp('//+', 'g');\n\nexport function resolve(...paths: string[]): string {\n    let processed: string[] = [];\n    for (const p of paths) {\n        if (typeof p !== 'string') {\n            throw new TypeError('Invalid argument type to path.join: ' + (typeof p));\n        } else if (p !== '') {\n            if (p.charAt(0) === sep) {\n                processed = [];\n            }\n            processed.push(p);\n        }\n    }\n\n    const resolved = normalize(processed.join(sep));\n    if (resolved.length > 1 && resolved.charAt(resolved.length - 1) === sep) {\n        return resolved.substr(0, resolved.length - 1);\n    }\n\n    return resolved;\n}\n\nexport function relative(from: string, to: string): string {\n    let i: number;\n\n    from = resolve(from);\n    to = resolve(to);\n    const fromSegments = from.split(sep);\n    const toSegments = to.split(sep);\n\n    toSegments.shift();\n    fromSegments.shift();\n\n    let upCount = 0;\n    let downSegments: string[] = [];\n\n    for (i = 0; i < fromSegments.length; i++) {\n        const seg = fromSegments[i];\n        if (seg === toSegments[i]) {\n            continue;\n        }\n\n        upCount = fromSegments.length - i;\n        break;\n    }\n\n    downSegments = toSegments.slice(i);\n\n    if (fromSegments.length === 1 && fromSegments[0] === '') {\n        upCount = 0;\n    }\n\n    if (upCount > fromSegments.length) {\n        upCount = fromSegments.length;\n    }\n\n    let rv = '';\n    for (i = 0; i < upCount; i++) {\n        rv += '../';\n    }\n    rv += downSegments.join(sep);\n\n    if (rv.length > 1 && rv.charAt(rv.length - 1) === sep) {\n        rv = rv.substr(0, rv.length - 1);\n    }\n    return rv;\n}\nexport function normalize(p: string): string {\n\n    if (p === '') {\n        p = '.';\n    }\n\n    const absolute = p.charAt(0) === sep;\n\n    p = removeDuplicateSeparators(p);\n\n    const components = p.split(sep);\n    const goodComponents: string[] = [];\n    for (const c of components) {\n        if (c === '.') {\n            continue;\n        } else if (c === '..' && (absolute || (!absolute && goodComponents.length > 0 && goodComponents[0] !== '..'))) {\n            goodComponents.pop();\n        } else {\n            goodComponents.push(c);\n        }\n    }\n\n    if (!absolute && goodComponents.length < 2) {\n        switch (goodComponents.length) {\n            case 1:\n                if (goodComponents[0] === '') {\n                    goodComponents.unshift('.');\n                }\n                break;\n            default:\n                goodComponents.push('.');\n        }\n    }\n    p = goodComponents.join(sep);\n    if (absolute && p.charAt(0) !== sep) {\n        p = sep + p;\n    }\n    return p;\n}\n\nfunction removeDuplicateSeparators(p: string): string {\n    p = p.replace(replaceRegex, sep);\n    return p;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport type * as monaco from '@theia/monaco-editor-core';\nimport { MarkdownString as MarkdownStringDTO } from '@theia/core/lib/common/markdown-rendering';\nimport { UriComponents } from './uri-components';\nimport { CompletionItemTag } from '../plugin/types-impl';\nimport { Event as TheiaEvent } from '@theia/core/lib/common/event';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { SerializedRegExp } from './plugin-api-rpc';\n\n// Should contains internal Plugin API types\n\n/**\n * Represents options to configure the behavior of showing a document in an editor.\n */\nexport interface TextDocumentShowOptions {\n    /**\n     * An optional selection to apply for the document in the editor.\n     */\n    selection?: Range;\n\n    /**\n     * An optional flag that when `true` will stop the editor from taking focus.\n     */\n    preserveFocus?: boolean;\n\n    /**\n     * An optional flag that controls if an editor-tab will be replaced\n     * with the next editor or if it will be kept.\n     */\n    preview?: boolean;\n\n    /**\n     * Denotes a location of an editor in the window. Editors can be arranged in a grid\n     * and each column represents one editor location in that grid by counting the editors\n     * in order of their appearance.\n     */\n    viewColumn?: theia.ViewColumn;\n}\n\nexport interface Range {\n    /**\n     * Line number on which the range starts (starts at 1).\n     */\n    readonly startLineNumber: number;\n    /**\n     * Column on which the range starts in line `startLineNumber` (starts at 1).\n     */\n    readonly startColumn: number;\n    /**\n     * Line number on which the range ends.\n     */\n    readonly endLineNumber: number;\n    /**\n     * Column on which the range ends in line `endLineNumber`.\n     */\n    readonly endColumn: number;\n}\n\nexport { MarkdownStringDTO as MarkdownString };\n\nexport interface SerializedDocumentFilter {\n    $serialized: true;\n    language?: string;\n    scheme?: string;\n    pattern?: theia.GlobPattern;\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport interface CompletionContext {\n    triggerKind: CompletionTriggerKind;\n    triggerCharacter?: string;\n}\n\nexport enum CompletionItemInsertTextRule {\n    KeepWhitespace = 1,\n    InsertAsSnippet = 4\n}\n\nexport interface Completion {\n    label: string | theia.CompletionItemLabel;\n    label2?: string;\n    kind: CompletionItemKind;\n    detail?: string;\n    documentation?: string | MarkdownStringDTO;\n    sortText?: string;\n    filterText?: string;\n    preselect?: boolean;\n    insertText: string;\n    insertTextRules?: CompletionItemInsertTextRule;\n    range?: Range | {\n        insert: Range;\n        replace: Range;\n    };\n    commitCharacters?: string[];\n    additionalTextEdits?: SingleEditOperation[];\n    command?: Command;\n    tags?: CompletionItemTag[];\n    /** @deprecated use tags instead. */\n    deprecated?: boolean;\n}\n\nexport interface SingleEditOperation {\n    range: Range;\n    text: string | null;\n    /**\n     * This indicates that this operation has \"insert\" semantics.\n     * i.e. forceMoveMarkers = true => if `range` is collapsed, all markers at the position will be moved.\n     */\n    forceMoveMarkers?: boolean;\n}\n\nexport interface Command {\n    id: string;\n    title: string;\n    tooltip?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    arguments?: any[];\n}\n\nexport enum CompletionItemKind {\n    Method = 0,\n    Function = 1,\n    Constructor = 2,\n    Field = 3,\n    Variable = 4,\n    Class = 5,\n    Struct = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Event = 10,\n    Operator = 11,\n    Unit = 12,\n    Value = 13,\n    Constant = 14,\n    Enum = 15,\n    EnumMember = 16,\n    Keyword = 17,\n    Text = 18,\n    Color = 19,\n    File = 20,\n    Reference = 21,\n    Customcolor = 22,\n    Folder = 23,\n    TypeParameter = 24,\n    User = 25,\n    Issue = 26,\n    Snippet = 27\n}\n\nexport class IdObject {\n    id?: number;\n}\nexport interface CompletionDto extends Completion {\n    id: number;\n    parentId: number;\n}\n\nexport interface CompletionResultDto extends IdObject {\n    id: number;\n    defaultRange: {\n        insert: Range,\n        replace: Range\n    }\n    completions: CompletionDto[];\n    incomplete?: boolean;\n}\n\nexport interface MarkerData {\n    code?: string;\n    severity: MarkerSeverity;\n    message: string;\n    source?: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n    relatedInformation?: RelatedInformation[];\n    tags?: MarkerTag[];\n}\n\nexport interface RelatedInformation {\n    resource: string;\n    message: string;\n    startLineNumber: number;\n    startColumn: number;\n    endLineNumber: number;\n    endColumn: number;\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n    Deprecated = 2,\n}\n\nexport interface ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | MarkdownStringDTO;\n}\n\nexport interface SignatureInformation {\n    label: string;\n    documentation?: string | MarkdownStringDTO;\n    parameters: ParameterInformation[];\n    activeParameter?: number;\n}\n\nexport interface SignatureHelp extends IdObject {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n}\n\nexport interface SignatureHelpContext {\n    triggerKind: theia.SignatureHelpTriggerKind;\n    triggerCharacter?: string;\n    isRetrigger: boolean;\n    activeSignatureHelp?: SignatureHelp;\n}\n\nexport interface Hover {\n    contents: MarkdownStringDTO[];\n    range?: Range;\n}\n\nexport interface HoverProvider {\n    provideHover(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Hover | undefined | Thenable<Hover | undefined>;\n}\n\nexport interface EvaluatableExpression {\n    range: Range;\n    expression?: string;\n}\n\nexport interface EvaluatableExpressionProvider {\n    provideEvaluatableExpression(model: monaco.editor.ITextModel, position: monaco.Position,\n        token: monaco.CancellationToken): EvaluatableExpression | undefined | Thenable<EvaluatableExpression | undefined>;\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\nexport interface DocumentHighlight {\n    range: Range;\n    kind?: DocumentHighlightKind;\n}\n\nexport interface DocumentHighlightProvider {\n    provideDocumentHighlights(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): DocumentHighlight[] | undefined;\n}\n\nexport interface FormattingOptions {\n    tabSize: number;\n    insertSpaces: boolean;\n}\n\nexport interface TextEdit {\n    range: Range;\n    text: string;\n    eol?: monaco.editor.EndOfLineSequence;\n}\n\nexport interface Location {\n    uri: UriComponents;\n    range: Range;\n}\n\nexport type Definition = Location | Location[] | LocationLink[];\n\nexport interface LocationLink {\n    uri: UriComponents;\n    range: Range;\n    originSelectionRange?: Range;\n    targetSelectionRange?: Range;\n}\n\nexport interface DefinitionProvider {\n    provideDefinition(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | undefined;\n}\n\nexport interface DeclarationProvider {\n    provideDeclaration(model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken): Definition | undefined;\n}\n\n/**\n * Value-object that contains additional information when\n * requesting references.\n */\nexport interface ReferenceContext {\n\n    /**\n     * Include the declaration of the current symbol.\n     */\n    includeDeclaration: boolean;\n}\n\nexport type CacheId = number;\nexport type ChainedCacheId = [CacheId, CacheId];\n\nexport interface DocumentLink {\n    cacheId?: ChainedCacheId,\n    range: Range;\n    url?: UriComponents | string;\n    tooltip?: string;\n}\n\nexport interface DocumentLinkProvider {\n    provideLinks(model: monaco.editor.ITextModel, token: monaco.CancellationToken): DocumentLink[] | undefined | PromiseLike<DocumentLink[] | undefined>;\n    resolveLink?: (link: DocumentLink, token: monaco.CancellationToken) => DocumentLink | PromiseLike<DocumentLink[]>;\n}\n\nexport interface CodeLensSymbol {\n    range: Range;\n    command?: Command;\n}\n\nexport interface CodeAction {\n    cacheId: number;\n    title: string;\n    command?: Command;\n    edit?: WorkspaceEdit;\n    diagnostics?: MarkerData[];\n    kind?: string;\n    disabled?: { reason: string };\n    isPreferred?: boolean;\n}\n\nexport interface CodeActionContext {\n    only?: string;\n}\n\nexport type CodeActionProviderDocumentation = ReadonlyArray<{ command: Command, kind: string }>;\n\nexport interface CodeActionProvider {\n    provideCodeActions(\n        model: monaco.editor.ITextModel,\n        range: Range | Selection,\n        context: monaco.languages.CodeActionContext,\n        token: monaco.CancellationToken\n    ): CodeAction[] | PromiseLike<CodeAction[]>;\n\n    providedCodeActionKinds?: string[];\n}\n\n// copied from https://github.com/microsoft/vscode/blob/b165e20587dd0797f37251515bc9e4dbe513ede8/src/vs/editor/common/modes.ts\nexport interface WorkspaceEditMetadata {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: UriComponents;\n        dark: UriComponents;\n    };\n}\n\nexport interface WorkspaceFileEdit {\n    oldUri?: UriComponents;\n    newUri?: UriComponents;\n    options?: { overwrite?: boolean, ignoreIfNotExists?: boolean, ignoreIfExists?: boolean, recursive?: boolean };\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface WorkspaceTextEdit {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface WorkspaceEdit {\n    edits: Array<WorkspaceTextEdit | WorkspaceFileEdit>;\n}\n\nexport enum SymbolKind {\n    File = 0,\n    Module = 1,\n    Namespace = 2,\n    Package = 3,\n    Class = 4,\n    Method = 5,\n    Property = 6,\n    Field = 7,\n    Constructor = 8,\n    Enum = 9,\n    Interface = 10,\n    Function = 11,\n    Variable = 12,\n    Constant = 13,\n    String = 14,\n    Number = 15,\n    Boolean = 16,\n    Array = 17,\n    Object = 18,\n    Key = 19,\n    Null = 20,\n    EnumMember = 21,\n    Struct = 22,\n    Event = 23,\n    Operator = 24,\n    TypeParameter = 25\n}\n\nexport enum SymbolTag {\n    Deprecated = 1\n}\n\nexport interface DocumentSymbol {\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    tags: ReadonlyArray<SymbolTag>;\n    containerName?: string;\n    range: Range;\n    selectionRange: Range;\n    children?: DocumentSymbol[];\n}\n\nexport interface WorkspaceRootsChangeEvent {\n    roots: string[];\n}\n\nexport interface WorkspaceFolder {\n    uri: UriComponents;\n    name: string;\n    index: number;\n}\n\nexport interface Breakpoint {\n    readonly id: string;\n    readonly enabled: boolean;\n    readonly condition?: string;\n    readonly hitCondition?: string;\n    readonly logMessage?: string;\n    readonly location?: Location;\n    readonly functionName?: string;\n}\n\nexport interface WorkspaceSymbolParams {\n    query: string\n}\n\nexport interface FoldingContext {\n}\n\nexport interface FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n}\n\nexport class FoldingRangeKind {\n    static readonly Comment = new FoldingRangeKind('comment');\n    static readonly Imports = new FoldingRangeKind('imports');\n    static readonly Region = new FoldingRangeKind('region');\n    public constructor(public value: string) { }\n}\n\nexport interface SelectionRange {\n    range: Range;\n}\n\nexport interface Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n}\n\nexport interface ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n}\n\nexport interface ColorInformation {\n    range: Range;\n    color: Color;\n}\n\nexport interface DocumentColorProvider {\n    provideDocumentColors(model: monaco.editor.ITextModel): PromiseLike<ColorInformation[]>;\n    provideColorPresentations(model: monaco.editor.ITextModel, colorInfo: ColorInformation): PromiseLike<ColorPresentation[]>;\n}\n\nexport interface Rejection {\n    rejectReason?: string;\n}\n\nexport interface RenameLocation {\n    range: Range;\n    text: string;\n}\n\nexport interface CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: UriComponents;\n    range: Range;\n    selectionRange: Range;\n    tags?: readonly SymbolTag[];\n    data?: unknown;\n}\n\nexport interface CallHierarchyIncomingCall {\n    from: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface CallHierarchyOutgoingCall {\n    to: CallHierarchyItem;\n    fromRanges: Range[];\n}\n\nexport interface LinkedEditingRanges {\n    ranges: Range[];\n    wordPattern?: SerializedRegExp;\n}\n\nexport interface SearchInWorkspaceResult {\n    root: string;\n    fileUri: string;\n    matches: SearchMatch[];\n}\n\nexport interface SearchMatch {\n    line: number;\n    character: number;\n    length: number;\n    lineText: string | LinePreview;\n\n}\nexport interface LinePreview {\n    text: string;\n    character: number;\n}\n\n/**\n * @deprecated Use {@link theia.AuthenticationSession} instead.\n */\nexport interface AuthenticationSession extends theia.AuthenticationSession {\n}\n\n/**\n * @deprecated Use {@link theia.AuthenticationProviderAuthenticationSessionsChangeEvent} instead.\n */\nexport interface AuthenticationSessionsChangeEvent extends theia.AuthenticationProviderAuthenticationSessionsChangeEvent {\n}\n\n/**\n * @deprecated Use {@link theia.AuthenticationProviderInformation} instead.\n */\nexport interface AuthenticationProviderInformation extends theia.AuthenticationProviderInformation {\n}\n\nexport interface CommentOptions {\n    /**\n     * An optional string to show on the comment input box when it's collapsed.\n     */\n    prompt?: string;\n\n    /**\n     * An optional string to show as placeholder in the comment input box when it's focused.\n     */\n    placeHolder?: string;\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\nexport interface Comment {\n    readonly uniqueIdInThread: number;\n    readonly body: MarkdownStringDTO;\n    readonly userName: string;\n    readonly userIconPath?: string;\n    readonly contextValue?: string;\n    readonly label?: string;\n    readonly mode?: CommentMode;\n}\n\nexport enum CommentThreadCollapsibleState {\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 0,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 1\n}\n\nexport interface CommentInput {\n    value: string;\n    uri: URI;\n}\n\nexport interface CommentThread {\n    commentThreadHandle: number;\n    controllerHandle: number;\n    extensionId?: string;\n    threadId: string;\n    resource: string | null;\n    range: Range;\n    label: string | undefined;\n    contextValue: string | undefined;\n    comments: Comment[] | undefined;\n    onDidChangeComments: TheiaEvent<Comment[] | undefined>;\n    collapsibleState?: CommentThreadCollapsibleState;\n    input?: CommentInput;\n    onDidChangeInput: TheiaEvent<CommentInput | undefined>;\n    onDidChangeRange: TheiaEvent<Range>;\n    onDidChangeLabel: TheiaEvent<string | undefined>;\n    onDidChangeCollapsibleState: TheiaEvent<CommentThreadCollapsibleState | undefined>;\n    isDisposed: boolean;\n    canReply: boolean;\n    onDidChangeCanReply: TheiaEvent<boolean>;\n}\n\nexport interface CommentThreadChangedEventMain extends CommentThreadChangedEvent {\n    owner: string;\n}\n\nexport interface CommentThreadChangedEvent {\n    /**\n     * Added comment threads.\n     */\n    readonly added: CommentThread[];\n\n    /**\n     * Removed comment threads.\n     */\n    readonly removed: CommentThread[];\n\n    /**\n     * Changed comment threads.\n     */\n    readonly changed: CommentThread[];\n}\n\nexport interface CommentingRanges {\n    readonly resource: URI;\n    ranges: Range[];\n}\n\nexport interface CommentInfo {\n    extensionId?: string;\n    threads: CommentThread[];\n    commentingRanges: CommentingRanges;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { createProxyIdentifier, ProxyIdentifier, RPCProtocol } from './rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { PluginLifecycle, PluginModel, PluginMetadata, PluginPackage, IconUrl, PluginJsonValidationContribution } from './plugin-protocol';\nimport { QueryParameters } from './env';\nimport { TextEditorCursorStyle } from './editor-options';\nimport {\n    ConfigurationTarget,\n    TextEditorLineNumbersStyle,\n    EndOfLine,\n    OverviewRulerLane,\n    FileOperationOptions,\n    TextDocumentChangeReason,\n    IndentAction,\n} from '../plugin/types-impl';\nimport { UriComponents } from './uri-components';\nimport {\n    SerializedDocumentFilter,\n    CompletionContext,\n    MarkdownString,\n    Range,\n    Completion,\n    CompletionResultDto,\n    MarkerData,\n    SignatureHelp,\n    Hover,\n    EvaluatableExpression,\n    DocumentHighlight,\n    FormattingOptions,\n    ChainedCacheId,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    Command,\n    TextEdit,\n    DocumentSymbol,\n    ReferenceContext,\n    TextDocumentShowOptions,\n    WorkspaceRootsChangeEvent,\n    Location,\n    Breakpoint,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeAction,\n    CodeActionContext,\n    FoldingContext,\n    FoldingRange,\n    SelectionRange,\n    SearchInWorkspaceResult,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    Comment,\n    CommentOptions,\n    CommentThreadCollapsibleState,\n    CommentThread,\n    CommentThreadChangedEvent,\n    CodeActionProviderDocumentation,\n    LinkedEditingRanges\n} from './plugin-api-rpc-model';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport {\n    AuthenticationProviderAuthenticationSessionsChangeEvent,\n    CancellationToken,\n    Progress,\n    ProgressOptions,\n} from '@theia/plugin';\nimport { DebuggerDescription } from '@theia/debug/lib/common/debug-service';\nimport { DebugProtocol } from '@vscode/debugprotocol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { ArgumentProcessor } from '../plugin/command-registry';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineChangeEvent,\n    TimelineProviderDescriptor\n} from '@theia/timeline/lib/common/timeline-model';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\nimport { ThemeType } from '@theia/core/lib/common/theme';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { PickOptions, QuickInputButtonHandle, QuickPickItem } from '@theia/core/lib/common';\nimport { Severity } from '@theia/core/lib/common/severity';\n\nexport interface PreferenceData {\n    [scope: number]: any;\n}\n\nexport interface Plugin {\n    pluginPath: string | undefined;\n    pluginFolder: string;\n    pluginUri: string;\n    model: PluginModel;\n    rawModel: PluginPackage;\n    lifecycle: PluginLifecycle;\n    isUnderDevelopment: boolean;\n}\n\nexport interface ConfigStorage {\n    hostLogPath: string;\n    hostStoragePath?: string;\n    hostGlobalStoragePath: string;\n}\n\nexport enum UIKind {\n\n    /**\n     * Extensions are accessed from a desktop application.\n     */\n    Desktop = 1,\n\n    /**\n     * Extensions are accessed from a web browser.\n     */\n    Web = 2\n}\n\nexport interface EnvInit {\n    queryParams: QueryParameters;\n    language: string;\n    shell: string;\n    uiKind: UIKind,\n    appName: string;\n    appHost: string;\n}\n\nexport interface PluginAPI {\n\n}\n\nexport interface PluginManager {\n    getAllPlugins(): Plugin[];\n    getPluginById(pluginId: string): Plugin | undefined;\n    getPluginExport(pluginId: string): PluginAPI | undefined;\n    isRunning(pluginId: string): boolean;\n    isActive(pluginId: string): boolean;\n    activatePlugin(pluginId: string): PromiseLike<void>;\n    onDidChange: theia.Event<void>;\n}\n\nexport interface PluginAPIFactory {\n    (plugin: Plugin): typeof theia;\n}\n\nexport const emptyPlugin: Plugin = {\n    lifecycle: {\n        startMethod: 'empty',\n        stopMethod: 'empty'\n    },\n    model: {\n        id: 'emptyPlugin',\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engine: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty',\n        packageUri: 'empty',\n        entryPoint: {\n\n        }\n    },\n    pluginPath: 'empty',\n    pluginFolder: 'empty',\n    pluginUri: 'empty',\n    rawModel: {\n        name: 'emptyPlugin',\n        publisher: 'Theia',\n        version: 'empty',\n        displayName: 'empty',\n        description: 'empty',\n        engines: {\n            type: 'empty',\n            version: 'empty'\n        },\n        packagePath: 'empty'\n    },\n    isUnderDevelopment: false\n};\n\nexport interface PluginManagerInitializeParams {\n    preferences: PreferenceData\n    globalState: KeysToKeysToAnyValue\n    workspaceState: KeysToKeysToAnyValue\n    env: EnvInit\n    extApi?: ExtPluginApi[]\n    webview: WebviewInitData\n    jsonValidation: PluginJsonValidationContribution[]\n}\n\nexport interface PluginManagerStartParams {\n    plugins: PluginMetadata[]\n    configStorage: ConfigStorage\n    activationEvents: string[]\n}\n\nexport interface PluginManagerExt {\n\n    /** initialize the manager, should be called only once */\n    $init(params: PluginManagerInitializeParams): Promise<void>;\n\n    /** load and activate plugins */\n    $start(params: PluginManagerStartParams): Promise<void>;\n\n    /** deactivate the plugin */\n    $stop(pluginId: string): Promise<void>;\n\n    /** deactivate all plugins */\n    $stop(): Promise<void>;\n\n    $updateStoragePath(path: string | undefined): Promise<void>;\n\n    $activateByEvent(event: string): Promise<void>;\n\n    $activatePlugin(id: string): Promise<void>;\n}\n\nexport interface CommandRegistryMain {\n    $registerCommand(command: theia.CommandDescription): void;\n    $unregisterCommand(id: string): void;\n\n    $registerHandler(id: string): void;\n    $unregisterHandler(id: string): void;\n\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined>;\n    $getCommands(): PromiseLike<string[]>;\n    $getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined>;\n}\n\nexport interface CommandRegistryExt {\n    $executeCommand<T>(id: string, ...ars: any[]): PromiseLike<T | undefined>;\n    registerArgumentProcessor(processor: ArgumentProcessor): void;\n}\n\nexport interface TerminalServiceExt {\n    $terminalCreated(id: string, name: string): void;\n    $terminalNameChanged(id: string, name: string): void;\n    $terminalOpened(id: string, processId: number, terminalId: number, cols: number, rows: number): void;\n    $terminalClosed(id: string, exitStatus: theia.TerminalExitStatus | undefined): void;\n    $terminalOnInput(id: string, data: string): void;\n    $terminalSizeChanged(id: string, cols: number, rows: number): void;\n    $currentTerminalChanged(id: string | undefined): void;\n    $initEnvironmentVariableCollections(collections: [string, SerializableEnvironmentVariableCollection][]): void;\n    getEnvironmentVariableCollection(extensionIdentifier: string): theia.EnvironmentVariableCollection;\n}\nexport interface OutputChannelRegistryExt {\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel\n}\n\nexport interface ConnectionMain {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>;\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface ConnectionExt {\n    $createConnection(id: string): Promise<void>;\n    $deleteConnection(id: string): Promise<void>\n    $sendMessage(id: string, message: string): void;\n}\n\nexport interface TerminalServiceMain {\n    /**\n     * Create new Terminal with Terminal options.\n     * @param options - object with parameters to create new terminal.\n     */\n    $createTerminal(id: string, options: theia.TerminalOptions, isPseudoTerminal?: boolean): Promise<string>;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal widget id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendText(id: string, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Write data to the terminal by id.\n     * @param id - terminal widget id.\n     * @param data - data.\n     */\n    $write(id: string, data: string): void;\n\n    /**\n     * Resize the terminal by id.\n     * @param id - terminal widget id.\n     * @param cols - columns.\n     * @param rows - rows.\n     */\n    $resize(id: string, cols: number, rows: number): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal widget id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $show(id: string, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal widget id.\n     */\n    $hide(id: string): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal widget id.\n     */\n    $dispose(id: string): void;\n\n    /**\n     * Send text to the terminal by id.\n     * @param id - terminal id.\n     * @param text - text content.\n     * @param addNewLine - in case true - add new line after the text, otherwise - don't apply new line.\n     */\n    $sendTextByTerminalId(id: number, text: string, addNewLine?: boolean): void;\n\n    /**\n     * Write data to the terminal by id.\n     * @param id - terminal id.\n     * @param data - data.\n     */\n    $writeByTerminalId(id: number, data: string): void;\n\n    /**\n     * Resize the terminal by id.\n     * @param id - terminal id.\n     * @param cols - columns.\n     * @param rows - rows.\n     */\n    $resizeByTerminalId(id: number, cols: number, rows: number): void;\n\n    /**\n     * Show terminal on the UI panel.\n     * @param id - terminal id.\n     * @param preserveFocus - set terminal focus in case true value, and don't set focus otherwise.\n     */\n    $showByTerminalId(id: number, preserveFocus?: boolean): void;\n\n    /**\n     * Hide UI panel where is located terminal widget.\n     * @param id - terminal id.\n     */\n    $hideByTerminalId(id: number): void;\n\n    /**\n     * Destroy terminal.\n     * @param id - terminal id.\n     * @param waitOnExit - Whether to wait for a key press before closing the terminal.\n     */\n    $disposeByTerminalId(id: number, waitOnExit?: boolean | string): void;\n\n    $setEnvironmentVariableCollection(extensionIdentifier: string, persistent: boolean, collection: SerializableEnvironmentVariableCollection | undefined): void;\n}\n\nexport interface AutoFocus {\n    autoFocusFirstEntry?: boolean;\n    // TODO\n}\n\nexport enum MainMessageType {\n    Error,\n    Warning,\n    Info\n}\n\nexport interface MainMessageOptions {\n    detail?: string;\n    modal?: boolean\n    onCloseActionHandle?: number\n}\n\nexport interface MainMessageItem {\n    title: string,\n    isCloseAffordance?: boolean;\n    handle?: number\n}\n\nexport interface MessageRegistryMain {\n    $showMessage(type: MainMessageType, message: string, options: MainMessageOptions, actions: MainMessageItem[]): PromiseLike<number | undefined>;\n}\n\nexport interface StatusBarMessageRegistryMain {\n    $setMessage(id: string,\n        name: string | undefined,\n        text: string | undefined,\n        priority: number,\n        alignment: theia.StatusBarAlignment,\n        color: string | undefined,\n        backgroundColor: string | undefined,\n        tooltip: string | theia.MarkdownString | undefined,\n        command: string | undefined,\n        accessibilityInformation: theia.AccessibilityInformation,\n        args: any[] | undefined): PromiseLike<void>;\n    $dispose(id: string): void;\n}\n\nexport type Item = string | theia.QuickPickItem;\n\nexport interface QuickOpenExt {\n    $onItemSelected(handle: number): void;\n    $validateInput(input: string): Promise<string | { content: string; severity: Severity; } | null | undefined> | undefined;\n\n    $acceptOnDidAccept(sessionId: number): Promise<void>;\n    $acceptDidChangeValue(sessionId: number, changedValue: string): Promise<void>;\n    $acceptOnDidHide(sessionId: number): Promise<void>;\n    $acceptOnDidTriggerButton(sessionId: number, btn: QuickInputButtonHandle): Promise<void>;\n    $onDidChangeActive(sessionId: number, handles: number[]): void;\n    $onDidChangeSelection(sessionId: number, handles: number[]): void;\n\n    /* eslint-disable max-len */\n    showQuickPick(itemsOrItemsPromise: Array<theia.QuickPickItem> | Promise<Array<theia.QuickPickItem>>, options: theia.QuickPickOptions & { canPickMany: true; },\n        token?: theia.CancellationToken): Promise<Array<QuickPickItem> | undefined>;\n    showQuickPick(itemsOrItemsPromise: string[] | Promise<string[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<string | undefined>;\n    showQuickPick(itemsOrItemsPromise: Array<theia.QuickPickItem> | Promise<Array<theia.QuickPickItem>>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<theia.QuickPickItem | undefined>;\n    showQuickPick(itemsOrItemsPromise: Item[] | Promise<Item[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<Item | Item[] | undefined>;\n\n    showInput(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined>;\n    // showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions, token?: theia.CancellationToken): Promise<theia.WorkspaceFolder | undefined>\n    createQuickPick<T extends theia.QuickPickItem>(plugin: Plugin): theia.QuickPick<T>;\n    createInputBox(plugin: Plugin): theia.InputBox;\n}\n\n/**\n * Options to configure the behaviour of a file open dialog.\n */\nexport interface OpenDialogOptionsMain {\n\n    /**\n     * Dialog title.\n     * This parameter might be ignored, as not all operating systems display a title on open dialogs.\n     */\n    title?: string;\n\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the open button.\n     */\n    openLabel?: string;\n\n    /**\n     * Allow to select files, defaults to `true`.\n     */\n    canSelectFiles?: boolean;\n\n    /**\n     * Allow to select folders, defaults to `false`.\n     */\n    canSelectFolders?: boolean;\n\n    /**\n     * Allow to select many files or folders.\n     */\n    canSelectMany?: boolean;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file save dialog.\n */\nexport interface SaveDialogOptionsMain {\n\n    /**\n     * Dialog title.\n     * This parameter might be ignored, as not all operating systems display a title on save dialogs.\n     */\n    title?: string;\n\n    /**\n     * The resource the dialog shows when opened.\n     */\n    defaultUri?: string;\n\n    /**\n     * A human-readable string for the save button.\n     */\n    saveLabel?: string;\n\n    /**\n     * A set of file filters that are used by the dialog. Each entry is a human readable label,\n     * like \"TypeScript\", and an array of extensions, e.g.\n     * ```ts\n     * {\n     *  'Images': ['png', 'jpg']\n     *  'TypeScript': ['ts', 'tsx']\n     * }\n     * ```\n     */\n    filters?: { [name: string]: string[] };\n}\n\n/**\n * Options to configure the behaviour of a file upload dialog.\n */\nexport interface UploadDialogOptionsMain {\n    /**\n     * The resource, where files should be uploaded.\n     */\n    defaultUri?: string;\n}\n\nexport interface FileUploadResultMain {\n    uploaded: string[]\n}\n\n/**\n * Options to configure the behaviour of the [workspace folder](#WorkspaceFolder) pick UI.\n */\nexport interface WorkspaceFolderPickOptionsMain {\n    /**\n     * An optional string to show as place holder in the input box to guide the user what to pick on.\n     */\n    placeHolder?: string;\n\n    /**\n     * Set to `true` to keep the picker open when focus moves to another part of the editor or to another window.\n     */\n    ignoreFocusOut?: boolean;\n}\n\nexport type TransferQuickPickItems = TransferQuickPickItemValue | TransferQuickPickSeparator;\n\nexport interface TransferQuickPickItemValue extends theia.QuickPickItem {\n    handle: number;\n    type?: 'item'\n}\n\nexport interface TransferQuickPickSeparator extends theia.QuickPickItem {\n    handle: number;\n    type: 'separator';\n}\n\nexport interface TransferQuickInputButton extends theia.QuickInputButton {\n    handle?: number;\n}\n\nexport type TransferQuickInput = TransferQuickPick | TransferInputBox;\n\nexport interface BaseTransferQuickInput {\n    [key: string]: any;\n    id: number;\n    type?: 'quickPick' | 'inputBox';\n    enabled?: boolean;\n    busy?: boolean;\n    visible?: boolean;\n}\n\nexport interface TransferQuickPick extends BaseTransferQuickInput {\n    type?: 'quickPick';\n    value?: string;\n    placeholder?: string;\n    buttons?: TransferQuickInputButton[];\n    items?: TransferQuickPickItems[];\n    activeItems?: ReadonlyArray<theia.QuickPickItem>;\n    selectedItems?: ReadonlyArray<theia.QuickPickItem>;\n    canSelectMany?: boolean;\n    ignoreFocusOut?: boolean;\n    matchOnDescription?: boolean;\n    matchOnDetail?: boolean;\n    sortByLabel?: boolean;\n}\n\nexport interface TransferInputBox extends BaseTransferQuickInput {\n    type?: 'inputBox';\n    value?: string;\n    placeholder?: string;\n    password?: boolean;\n    buttons?: TransferQuickInputButton[];\n    prompt?: string;\n    validationMessage?: string;\n}\n\nexport interface IInputBoxOptions {\n    value?: string;\n    valueSelection?: [number, number];\n    prompt?: string;\n    placeHolder?: string;\n    password?: boolean;\n    ignoreFocusOut?: boolean;\n}\n\nexport interface QuickOpenMain {\n    $show(instance: number, options: PickOptions<TransferQuickPickItemValue>, token: CancellationToken): Promise<number | number[] | undefined>;\n    $setItems(instance: number, items: TransferQuickPickItems[]): Promise<any>;\n    $setError(instance: number, error: Error): Promise<void>;\n    $input(options: theia.InputBoxOptions, validateInput: boolean, token: CancellationToken): Promise<string | undefined>;\n    $createOrUpdate<T extends theia.QuickPickItem>(params: TransferQuickInput): Promise<void>;\n    $dispose(id: number): Promise<void>;\n\n    $hide(): void;\n    $showInputBox(options: TransferInputBox, validateInput: boolean): Promise<string | undefined>;\n}\n\nexport interface WorkspaceMain {\n    $pickWorkspaceFolder(options: WorkspaceFolderPickOptionsMain): Promise<theia.WorkspaceFolder | undefined>;\n    $startFileSearch(includePattern: string, includeFolder: string | undefined, excludePatternOrDisregardExcludes: string | false,\n        maxResults: number | undefined, token: theia.CancellationToken): PromiseLike<UriComponents[]>;\n    $findTextInFiles(query: theia.TextSearchQuery, options: theia.FindTextInFilesOptions, searchRequestId: number,\n        token?: theia.CancellationToken): Promise<theia.TextSearchComplete>\n    $registerTextDocumentContentProvider(scheme: string): Promise<void>;\n    $unregisterTextDocumentContentProvider(scheme: string): void;\n    $onTextDocumentContentChange(uri: string, content: string): void;\n    $updateWorkspaceFolders(start: number, deleteCount?: number, ...rootsToAdd: string[]): Promise<void>;\n    $getWorkspace(): Promise<files.FileStat | undefined>;\n    $requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined>;\n}\n\nexport interface WorkspaceExt {\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void;\n    $onWorkspaceLocationChanged(event: files.FileStat | undefined): void;\n    $provideTextDocumentContent(uri: string): Promise<string | undefined | null>;\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void;\n    $onWorkspaceTrustChanged(trust: boolean | undefined): void;\n}\n\nexport interface TimelineExt {\n    $getTimeline(source: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined>;\n}\n\nexport interface TimelineMain {\n    $registerTimelineProvider(provider: TimelineProviderDescriptor): Promise<void>;\n    $fireTimelineChanged(e: TimelineChangeEvent): Promise<void>;\n    $unregisterTimelineProvider(source: string): Promise<void>;\n}\n\nexport interface ThemingExt {\n    $onColorThemeChange(type: ThemeType): void;\n}\nexport interface ThemingMain extends Disposable {\n}\n\nexport interface DialogsMain {\n    $showOpenDialog(options: OpenDialogOptionsMain): Promise<string[] | undefined>;\n    $showSaveDialog(options: SaveDialogOptionsMain): Promise<string | undefined>;\n    $showUploadDialog(options: UploadDialogOptionsMain): Promise<string[] | undefined>;\n}\n\nexport interface TreeViewRevealOptions {\n    select: boolean\n    focus: boolean\n    expand: boolean | number\n}\n\nexport interface TreeViewsMain {\n    $registerTreeDataProvider(treeViewId: string): void;\n    $unregisterTreeDataProvider(treeViewId: string): void;\n    $refresh(treeViewId: string): Promise<void>;\n    $reveal(treeViewId: string, elementParentChain: string[], options: TreeViewRevealOptions): Promise<any>;\n    $setMessage(treeViewId: string, message: string): void;\n    $setTitle(treeViewId: string, title: string): void;\n    $setDescription(treeViewId: string, description: string): void;\n}\n\nexport interface TreeViewsExt {\n    $getChildren(treeViewId: string, treeItemId: string | undefined): Promise<TreeViewItem[] | undefined>;\n    $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any>;\n    $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void>;\n    $setVisible(treeViewId: string, visible: boolean): Promise<void>;\n}\n\nexport interface TreeViewItem {\n\n    id: string;\n\n    label: string;\n    /** Label highlights given as tuples of inclusive start index and exclusive end index. */\n    highlights?: [number, number][];\n\n    description?: string | boolean;\n\n    /* font-awesome icon for compatibility */\n    icon?: string;\n    iconUrl?: IconUrl;\n\n    themeIcon?: ThemeIcon;\n\n    resourceUri?: UriComponents;\n\n    tooltip?: string;\n\n    collapsibleState?: TreeViewItemCollapsibleState;\n\n    contextValue?: string;\n\n    command?: Command;\n\n    accessibilityInformation?: theia.AccessibilityInformation;\n\n}\n\nexport interface TreeViewSelection {\n    treeViewId: string\n    treeItemId: string\n}\nexport namespace TreeViewSelection {\n    export function is(arg: unknown): arg is TreeViewSelection {\n        return !!arg && typeof arg === 'object' && 'treeViewId' in arg && 'treeItemId' in arg;\n    }\n}\n\n/**\n * Collapsible state of the tree item\n */\nexport enum TreeViewItemCollapsibleState {\n    /**\n     * Determines an item can be neither collapsed nor expanded. Implies it has no children.\n     */\n    None = 0,\n    /**\n     * Determines an item is collapsed\n     */\n    Collapsed = 1,\n    /**\n     * Determines an item is expanded\n     */\n    Expanded = 2\n}\n\nexport interface WindowMain {\n    $openUri(uri: UriComponents): Promise<boolean>;\n    $asExternalUri(uri: UriComponents): Promise<UriComponents>;\n}\n\nexport interface WindowStateExt {\n    $onWindowStateChanged(focus: boolean): void;\n}\n\nexport interface NotificationExt {\n    withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): PromiseLike<R>;\n    $acceptProgressCanceled(progressId: string): void;\n}\n\nexport interface ScmCommandArg {\n    sourceControlHandle: number\n    resourceGroupHandle?: number\n    resourceStateHandle?: number\n}\nexport namespace ScmCommandArg {\n    export function is(arg: unknown): arg is ScmCommandArg {\n        return !!arg && typeof arg === 'object' && 'sourceControlHandle' in arg;\n    }\n}\n\nexport interface ScmExt {\n    createSourceControl(plugin: Plugin, id: string, label: string, rootUri?: theia.Uri): theia.SourceControl;\n    getLastInputBox(plugin: Plugin): theia.SourceControlInputBox | undefined;\n    $onInputBoxValueChange(sourceControlHandle: number, message: string): Promise<void>;\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, resourceHandle: number): Promise<void>;\n    $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined>;\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void>;\n    $provideOriginalResource(sourceControlHandle: number, uri: string, token: theia.CancellationToken): Promise<UriComponents | undefined>;\n}\n\nexport namespace TimelineCommandArg {\n    export function is(arg: unknown): arg is TimelineCommandArg {\n        return !!arg && typeof arg === 'object' && 'timelineHandle' in arg;\n    }\n}\nexport interface TimelineCommandArg {\n    timelineHandle: string;\n    source: string;\n    uri: string;\n}\n\nexport interface DecorationRequest {\n    readonly id: number;\n    readonly uri: UriComponents;\n}\n\nexport type DecorationData = [boolean, string, string, ThemeColor];\nexport interface DecorationReply { [id: number]: DecorationData; }\n\nexport namespace CommentsCommandArg {\n    export function is(arg: unknown): arg is CommentsCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'text' in arg && !('commentUniqueId' in arg);\n    }\n}\nexport interface CommentsCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    text: string\n}\n\nexport namespace CommentsContextCommandArg {\n    export function is(arg: unknown): arg is CommentsContextCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'commentUniqueId' in arg && !('text' in arg);\n    }\n}\nexport interface CommentsContextCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    commentUniqueId: number\n}\n\nexport namespace CommentsEditCommandArg {\n    export function is(arg: unknown): arg is CommentsEditCommandArg {\n        return !!arg && typeof arg === 'object' && 'commentControlHandle' in arg && 'commentThreadHandle' in arg && 'commentUniqueId' in arg && 'text' in arg;\n    }\n}\nexport interface CommentsEditCommandArg {\n    commentControlHandle: number;\n    commentThreadHandle: number;\n    commentUniqueId: number\n    text: string\n}\n\nexport interface DecorationsExt {\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable\n    $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply>;\n}\n\nexport interface DecorationsMain {\n    $registerDecorationProvider(handle: number): Promise<void>;\n    $unregisterDecorationProvider(handle: number): void;\n    $onDidChange(handle: number, resources: UriComponents[] | null): void;\n}\n\nexport interface ScmMain {\n    $registerSourceControl(sourceControlHandle: number, id: string, label: string, rootUri?: UriComponents): Promise<void>;\n    $updateSourceControl(sourceControlHandle: number, features: SourceControlProviderFeatures): Promise<void>;\n    $unregisterSourceControl(sourceControlHandle: number): Promise<void>;\n\n    $registerGroups(sourceControlHandle: number, groups: ScmRawResourceGroup[], splices: ScmRawResourceSplices[]): void;\n    $updateGroup(sourceControlHandle: number, groupHandle: number, features: SourceControlGroupFeatures): void;\n    $updateGroupLabel(sourceControlHandle: number, groupHandle: number, label: string): void;\n    $unregisterGroup(sourceControlHandle: number, groupHandle: number): void;\n\n    $spliceResourceStates(sourceControlHandle: number, splices: ScmRawResourceSplices[]): void;\n\n    $setInputBoxValue(sourceControlHandle: number, value: string): void;\n    $setInputBoxPlaceholder(sourceControlHandle: number, placeholder: string): void;\n    $setInputBoxVisible(sourceControlHandle: number, visible: boolean): void;\n}\n\nexport interface SourceControlProviderFeatures {\n    hasQuickDiffProvider?: boolean;\n    count?: number;\n    commitTemplate?: string;\n    acceptInputCommand?: Command;\n    statusBarCommands?: Command[];\n}\n\nexport interface SourceControlGroupFeatures {\n    hideWhenEmpty: boolean | undefined;\n}\n\nexport interface ScmRawResource {\n    handle: number,\n    sourceUri: UriComponents,\n    icons: UriComponents[],\n    tooltip: string,\n    strikeThrough: boolean,\n    faded: boolean,\n    contextValue: string,\n    command: Command | undefined\n}\n\nexport interface ScmRawResourceGroup {\n    handle: number,\n    id: string,\n    label: string,\n    features: SourceControlGroupFeatures\n}\n\nexport interface ScmRawResourceSplice {\n    start: number,\n    deleteCount: number,\n    rawResources: ScmRawResource[]\n}\n\nexport interface ScmRawResourceSplices {\n    handle: number,\n    splices: ScmRawResourceSplice[]\n}\n\nexport interface SourceControlResourceState {\n    readonly handle: number\n    /**\n     * The uri of the underlying resource inside the workspace.\n     */\n    readonly resourceUri: string;\n\n    /**\n     * The command which should be run when the resource\n     * state is open in the Source Control viewlet.\n     */\n    readonly command?: Command;\n\n    /**\n     * The decorations for this source control\n     * resource state.\n     */\n    readonly decorations?: SourceControlResourceDecorations;\n\n    readonly letter?: string;\n\n    readonly colorId?: string\n}\n\n/**\n * The decorations for a [source control resource state](#SourceControlResourceState).\n * Can be independently specified for light and dark themes.\n */\nexport interface SourceControlResourceDecorations {\n\n    /**\n     * Whether the source control resource state should be striked-through in the UI.\n     */\n    readonly strikeThrough?: boolean;\n\n    /**\n     * Whether the source control resource state should be faded in the UI.\n     */\n    readonly faded?: boolean;\n\n    /**\n     * The title for a specific source control resource state.\n     */\n    readonly tooltip?: string;\n\n    /**\n     * The icon path for a specific source control resource state.\n     */\n    readonly iconPath?: string;\n}\n\nexport interface NotificationMain {\n    $startProgress(options: NotificationMain.StartProgressOptions): Promise<string>;\n    $stopProgress(id: string): void;\n    $updateProgress(id: string, report: NotificationMain.ProgressReport): void;\n}\nexport namespace NotificationMain {\n    export interface StartProgressOptions {\n        title: string;\n        location?: string;\n        cancellable?: boolean;\n    }\n    export interface ProgressReport {\n        message?: string;\n        increment?: number;\n        total?: number;\n    }\n}\n\nexport enum EditorPosition {\n    ONE = 0,\n    TWO = 1,\n    THREE = 2,\n    FOUR = 3,\n    FIVE = 4,\n    SIX = 5,\n    SEVEN = 6,\n    EIGHT = 7,\n    NINE = 8\n}\n\nexport interface Position {\n    readonly lineNumber: number;\n    readonly column: number;\n}\n\nexport interface Selection {\n    /**\n     * The line number on which the selection has started.\n     */\n    readonly selectionStartLineNumber: number;\n    /**\n     * The column on `selectionStartLineNumber` where the selection has started.\n     */\n    readonly selectionStartColumn: number;\n    /**\n     * The line number on which the selection has ended.\n     */\n    readonly positionLineNumber: number;\n    /**\n     * The column on `positionLineNumber` where the selection has ended.\n     */\n    readonly positionColumn: number;\n}\n\nexport interface TextEditorConfiguration {\n    tabSize: number;\n    insertSpaces: boolean;\n    cursorStyle: TextEditorCursorStyle;\n    lineNumbers: TextEditorLineNumbersStyle;\n}\n\nexport interface TextEditorConfigurationUpdate {\n    tabSize?: number | 'auto';\n    insertSpaces?: boolean | 'auto';\n    cursorStyle?: TextEditorCursorStyle;\n    lineNumbers?: TextEditorLineNumbersStyle;\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\nexport interface SelectionChangeEvent {\n    selections: Selection[];\n    source?: string;\n}\n\nexport interface EditorChangedPropertiesData {\n    options?: TextEditorConfiguration;\n    selections?: SelectionChangeEvent;\n    visibleRanges?: Range[];\n}\n\nexport interface TextEditorPositionData {\n    [id: string]: EditorPosition;\n}\n\nexport interface TextEditorsExt {\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void;\n    $acceptEditorPositionData(data: TextEditorPositionData): void;\n}\n\nexport interface SingleEditOperation {\n    range?: Range;\n    text?: string;\n    forceMoveMarkers?: boolean;\n}\n\nexport interface UndoStopOptions {\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport interface ApplyEditsOptions extends UndoStopOptions {\n    setEndOfLine: EndOfLine;\n}\n\nexport interface ThemeColor {\n    id: string;\n}\n\nexport interface ThemeIcon {\n    id: string;\n    color?: ThemeColor;\n}\n\n/**\n * Describes the behavior of decorations when typing/editing near their edges.\n */\nexport enum TrackedRangeStickiness {\n    AlwaysGrowsWhenTypingAtEdges = 0,\n    NeverGrowsWhenTypingAtEdges = 1,\n    GrowsOnlyWhenTypingBefore = 2,\n    GrowsOnlyWhenTypingAfter = 3,\n}\nexport interface ContentDecorationRenderOptions {\n    contentText?: string;\n    contentIconPath?: UriComponents;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    color?: string | ThemeColor;\n    backgroundColor?: string | ThemeColor;\n\n    margin?: string;\n    width?: string;\n    height?: string;\n}\n\nexport interface ThemeDecorationRenderOptions {\n    backgroundColor?: string | ThemeColor;\n\n    outline?: string;\n    outlineColor?: string | ThemeColor;\n    outlineStyle?: string;\n    outlineWidth?: string;\n\n    border?: string;\n    borderColor?: string | ThemeColor;\n    borderRadius?: string;\n    borderSpacing?: string;\n    borderStyle?: string;\n    borderWidth?: string;\n\n    fontStyle?: string;\n    fontWeight?: string;\n    textDecoration?: string;\n    cursor?: string;\n    color?: string | ThemeColor;\n    opacity?: string;\n    letterSpacing?: string;\n\n    gutterIconPath?: UriComponents;\n    gutterIconSize?: string;\n\n    overviewRulerColor?: string | ThemeColor;\n\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationRenderOptions extends ThemeDecorationRenderOptions {\n    isWholeLine?: boolean;\n    rangeBehavior?: TrackedRangeStickiness;\n    overviewRulerLane?: OverviewRulerLane;\n\n    light?: ThemeDecorationRenderOptions;\n    dark?: ThemeDecorationRenderOptions;\n}\n\nexport interface ThemeDecorationInstanceRenderOptions {\n    before?: ContentDecorationRenderOptions;\n    after?: ContentDecorationRenderOptions;\n}\n\nexport interface DecorationInstanceRenderOptions extends ThemeDecorationInstanceRenderOptions {\n    light?: ThemeDecorationInstanceRenderOptions;\n    dark?: ThemeDecorationInstanceRenderOptions;\n}\n\nexport interface DecorationOptions {\n    range: Range;\n    hoverMessage?: MarkdownString | MarkdownString[];\n    renderOptions?: DecorationInstanceRenderOptions;\n}\n\nexport interface TextEditorsMain {\n    $tryShowTextDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void>;\n    $registerTextEditorDecorationType(key: string, options: DecorationRenderOptions): void;\n    $removeTextEditorDecorationType(key: string): void;\n    $tryHideEditor(id: string): Promise<void>;\n    $trySetOptions(id: string, options: TextEditorConfigurationUpdate): Promise<void>;\n    $trySetDecorations(id: string, key: string, ranges: DecorationOptions[]): Promise<void>;\n    $trySetDecorationsFast(id: string, key: string, ranges: number[]): Promise<void>;\n    $tryRevealRange(id: string, range: Range, revealType: TextEditorRevealType): Promise<void>;\n    $trySetSelections(id: string, selections: Selection[]): Promise<void>;\n    $tryApplyEdits(id: string, modelVersionId: number, edits: SingleEditOperation[], opts: ApplyEditsOptions): Promise<boolean>;\n    $tryApplyWorkspaceEdit(workspaceEditDto: WorkspaceEditDto): Promise<boolean>;\n    $tryInsertSnippet(id: string, template: string, selections: Range[], opts: UndoStopOptions): Promise<boolean>;\n    $saveAll(includeUntitled?: boolean): Promise<boolean>;\n    // $getDiffInformation(id: string): Promise<editorCommon.ILineChange[]>;\n}\n\nexport interface ModelAddedData {\n    uri: UriComponents;\n    versionId: number;\n    lines: string[];\n    EOL: string;\n    modeId: string;\n    isDirty: boolean;\n}\n\nexport interface TextEditorAddData {\n    id: string;\n    documentUri: UriComponents;\n    options: TextEditorConfiguration;\n    selections: Selection[];\n    visibleRanges: Range[];\n    editorPosition?: EditorPosition;\n}\n\nexport interface EditorsAndDocumentsDelta {\n    removedDocuments?: UriComponents[];\n    addedDocuments?: ModelAddedData[];\n    removedEditors?: string[];\n    addedEditors?: TextEditorAddData[];\n    /**\n     * undefined means no changes\n     * null means no active\n     * string means id of active\n     */\n    newActiveEditor?: string | null;\n}\n\nexport interface EditorsAndDocumentsExt {\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void;\n}\n\nexport interface ModelContentChange {\n    readonly range: Range;\n    readonly rangeOffset: number;\n    readonly rangeLength: number;\n    readonly text: string;\n}\nexport interface ModelChangedEvent {\n    readonly changes: ModelContentChange[];\n\n    readonly eol: string;\n\n    readonly versionId: number;\n\n    readonly reason: TextDocumentChangeReason | undefined;\n}\n\nexport interface DocumentsExt {\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void;\n    $acceptModelSaved(strUrl: UriComponents): void;\n    $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]>;\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void;\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void;\n}\n\nexport interface DocumentsMain {\n    $tryCreateDocument(options?: { language?: string; content?: string; }): Promise<UriComponents>;\n    $tryShowDocument(uri: UriComponents, options?: TextDocumentShowOptions): Promise<void>;\n    $tryOpenDocument(uri: UriComponents): Promise<boolean>;\n    $trySaveDocument(uri: UriComponents): Promise<boolean>;\n    $tryCloseDocument(uri: UriComponents): Promise<boolean>;\n}\n\nexport interface EnvMain {\n    $getEnvVariable(envVarName: string): Promise<string | undefined>;\n    $getClientOperatingSystem(): Promise<theia.OperatingSystem>;\n}\n\nexport interface PreferenceRegistryMain {\n    $updateConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        value: any,\n        resource?: string,\n        withLanguageOverride?: boolean\n    ): PromiseLike<void>;\n    $removeConfigurationOption(\n        target: boolean | ConfigurationTarget | undefined,\n        key: string,\n        resource?: string,\n        withLanguageOverride?: boolean,\n    ): PromiseLike<void>;\n}\n\nexport interface PreferenceChangeExt {\n    preferenceName: string,\n    newValue: any,\n    /**\n     * The URI the folder affected, or undefined if User scope.\n     */\n    scope?: string;\n}\n\nexport interface TerminalOptionsExt {\n    attributes?: {\n        [key: string]: string;\n    }\n}\n\nexport interface PreferenceRegistryExt {\n    $acceptConfigurationChanged(data: { [key: string]: any }, eventData: PreferenceChangeExt[]): void;\n}\n\nexport interface OutputChannelRegistryMain {\n    $append(channelName: string, value: string, pluginInfo: PluginInfo): PromiseLike<void>;\n    $clear(channelName: string): PromiseLike<void>;\n    $dispose(channelName: string): PromiseLike<void>;\n    $reveal(channelName: string, preserveFocus: boolean): PromiseLike<void>;\n    $close(channelName: string): PromiseLike<void>;\n}\n\nexport type CharacterPair = [string, string];\n\nexport interface CommentRule {\n    lineComment?: string;\n    blockComment?: CharacterPair;\n}\n\nexport interface SerializedRegExp {\n    pattern: string;\n    flags?: string;\n}\n\nexport interface SerializedIndentationRule {\n    decreaseIndentPattern?: SerializedRegExp;\n    increaseIndentPattern?: SerializedRegExp;\n    indentNextLinePattern?: SerializedRegExp;\n    unIndentedLinePattern?: SerializedRegExp;\n}\n\nexport interface SerializedOnEnterRule {\n    beforeText: SerializedRegExp;\n    afterText?: SerializedRegExp;\n    previousLineText?: SerializedRegExp;\n    action: SerializedEnterAction;\n}\n\nexport interface SerializedEnterAction {\n    indentAction: IndentAction;\n    outdentCurrentLine?: boolean;\n    appendText?: string;\n    removeText?: number;\n}\n\nexport interface SerializedLanguageConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    wordPattern?: SerializedRegExp;\n    indentationRules?: SerializedIndentationRule;\n    onEnterRules?: SerializedOnEnterRule[];\n}\n\nexport interface CodeActionDto {\n    title: string;\n    edit?: WorkspaceEditDto;\n    diagnostics?: MarkerData[];\n    command?: Command;\n    kind?: string;\n    isPreferred?: boolean;\n    disabled?: string;\n}\n\nexport interface WorkspaceEditMetadataDto {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: UriComponents;\n        dark: UriComponents;\n    };\n}\n\nexport interface WorkspaceFileEditDto {\n    oldUri?: UriComponents;\n    newUri?: UriComponents;\n    options?: FileOperationOptions;\n    metadata?: WorkspaceEditMetadataDto;\n}\n\nexport interface WorkspaceTextEditDto {\n    resource: UriComponents;\n    modelVersionId?: number;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadataDto;\n\n}\nexport namespace WorkspaceTextEditDto {\n    export function is(arg: WorkspaceTextEditDto | WorkspaceFileEditDto): arg is WorkspaceTextEditDto {\n        return !!arg\n            && 'resource' in arg\n            && 'edit' in arg\n            && arg.edit !== null\n            && typeof arg.edit === 'object';\n    }\n}\n\nexport interface WorkspaceEditDto {\n    edits: Array<WorkspaceTextEditDto | WorkspaceFileEditDto>;\n}\n\nexport interface CommandProperties {\n    command: string;\n    args?: string[];\n    options?: {\n        cwd?: string;\n        [key: string]: any\n    };\n}\n\nexport interface TaskDto {\n    type: string;\n    taskType?: 'shell' | 'process' | 'customExecution'; // the task execution type\n    executionId?: string,\n    label: string;\n    source?: string;\n    scope: string | number;\n    // Provide a more specific type when necessary (see ProblemMatcherContribution)\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    problemMatcher?: any;\n    group?: string;\n    detail?: string;\n    presentation?: TaskPresentationOptionsDTO;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    [key: string]: any;\n}\n\nexport interface TaskPresentationOptionsDTO {\n    reveal?: number;\n    focus?: boolean;\n    echo?: boolean;\n    panel?: number;\n    showReuseMessage?: boolean;\n    clear?: boolean;\n}\n\nexport interface TaskExecutionDto {\n    id: number;\n    task: TaskDto;\n}\n\nexport interface ProcessTaskDto extends TaskDto, CommandProperties {\n    windows?: CommandProperties;\n}\n\nexport interface PluginInfo {\n    id: string;\n    name: string;\n    displayName?: string;\n}\n\nexport interface LanguageStatus {\n    readonly id: string;\n    readonly name: string;\n    readonly selector: SerializedDocumentFilter[];\n    readonly severity: Severity;\n    readonly label: string;\n    readonly detail: string;\n    readonly busy: boolean;\n    readonly source: string;\n    readonly command: Command | undefined;\n    readonly accessibilityInfo: theia.AccessibilityInformation | undefined;\n}\n\nexport interface LanguagesExt {\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: CancellationToken): Promise<CompletionResultDto | undefined>;\n    $resolveCompletionItem(handle: number, chainedId: ChainedCacheId, token: CancellationToken): Promise<Completion | undefined>;\n    $releaseCompletionItems(handle: number, id: number): void;\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Definition | undefined>;\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: CancellationToken): Promise<Location[] | undefined>;\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: CancellationToken\n    ): Promise<SignatureHelp | undefined>;\n    $releaseSignatureHelp(handle: number, id: number): void;\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<Hover | undefined>;\n    $provideEvaluatableExpression(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<EvaluatableExpression | undefined>;\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<DocumentHighlight[] | undefined>;\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: CancellationToken): Promise<TextEdit[] | undefined>;\n    $provideOnTypeFormattingEdits(\n        handle: number,\n        resource: UriComponents,\n        position: Position,\n        ch: string,\n        options: FormattingOptions,\n        token: CancellationToken\n    ): Promise<TextEdit[] | undefined>;\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentLink[] | undefined>;\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: CancellationToken): Promise<DocumentLink | undefined>;\n    $releaseDocumentLinks(handle: number, ids: number[]): void;\n    $provideCodeLenses(handle: number, resource: UriComponents, token: CancellationToken): Promise<CodeLensSymbol[] | undefined>;\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: CancellationToken): Promise<CodeLensSymbol | undefined>;\n    $releaseCodeLenses(handle: number, ids: number[]): void;\n    $provideCodeActions(\n        handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: CancellationToken\n    ): Promise<CodeAction[] | undefined>;\n    $releaseCodeActions(handle: number, cacheIds: number[]): void;\n    $resolveCodeAction(handle: number, cacheId: number, token: CancellationToken): Promise<WorkspaceEditDto | undefined>;\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: CancellationToken): Promise<DocumentSymbol[] | undefined>;\n    $provideWorkspaceSymbols(handle: number, query: string, token: CancellationToken): PromiseLike<SymbolInformation[]>;\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: CancellationToken): PromiseLike<SymbolInformation | undefined>;\n    $provideFoldingRange(\n        handle: number,\n        resource: UriComponents,\n        context: FoldingContext,\n        token: CancellationToken\n    ): PromiseLike<FoldingRange[] | undefined>;\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: CancellationToken): PromiseLike<SelectionRange[][]>;\n    $provideDocumentColors(handle: number, resource: UriComponents, token: CancellationToken): PromiseLike<RawColorInfo[]>;\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: CancellationToken): PromiseLike<ColorPresentation[]>;\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: CancellationToken): PromiseLike<WorkspaceEditDto | undefined>;\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: CancellationToken): PromiseLike<RenameLocation | undefined>;\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: CancellationToken): Promise<BinaryBuffer | null>;\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void;\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: CancellationToken): Promise<BinaryBuffer | null>;\n    $provideRootDefinition(handle: number, resource: UriComponents, location: Position, token: CancellationToken): Promise<CallHierarchyItem[] | undefined>;\n    $provideCallers(handle: number, definition: CallHierarchyItem, token: CancellationToken): Promise<CallHierarchyIncomingCall[] | undefined>;\n    $provideCallees(handle: number, definition: CallHierarchyItem, token: CancellationToken): Promise<CallHierarchyOutgoingCall[] | undefined>;\n    $provideLinkedEditingRanges(handle: number, resource: UriComponents, position: Position, token: CancellationToken): Promise<LinkedEditingRanges | undefined>;\n    $releaseCallHierarchy(handle: number, session?: string): Promise<boolean>;\n}\n\nexport const LanguagesMainFactory = Symbol('LanguagesMainFactory');\nexport interface LanguagesMainFactory {\n    (proxy: RPCProtocol): LanguagesMain;\n}\n\nexport const OutputChannelRegistryFactory = Symbol('OutputChannelRegistryFactory');\nexport interface OutputChannelRegistryFactory {\n    (): OutputChannelRegistryMain;\n}\n\nexport interface LanguagesMain {\n    $getLanguages(): Promise<string[]>;\n    $changeLanguage(resource: UriComponents, languageId: string): Promise<void>;\n    $setLanguageConfiguration(handle: number, languageId: string, configuration: SerializedLanguageConfiguration): void;\n    $unregister(handle: number): void;\n    $registerCompletionSupport(handle: number, pluginInfo: PluginInfo,\n        selector: SerializedDocumentFilter[], triggerCharacters: string[], supportsResolveDetails: boolean): void;\n    $registerImplementationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerTypeDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDefinitionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDeclarationProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerReferenceProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSignatureHelpProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], metadata: theia.SignatureHelpProviderMetadata): void;\n    $registerHoverProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerEvaluatableExpressionProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentHighlightProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerQuickFixProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], codeActionKinds?: string[], documentation?: CodeActionProviderDocumentation): void;\n    $clearDiagnostics(id: string): void;\n    $changeDiagnostics(id: string, delta: [string, MarkerData[]][]): void;\n    $registerDocumentFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRangeFormattingSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerOnTypeFormattingProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], autoFormatTriggerCharacters: string[]): void;\n    $registerDocumentLinkProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerCodeLensSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], eventHandle?: number): void;\n    $emitCodeLensEvent(eventHandle: number, event?: any): void;\n    $registerOutlineSupport(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], displayName?: string): void;\n    $registerWorkspaceSymbolProvider(handle: number, pluginInfo: PluginInfo): void;\n    $registerFoldingRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerSelectionRangeProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerDocumentColorProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[]): void;\n    $registerRenameProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], supportsResolveInitialValues: boolean): void;\n    $registerDocumentSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[],\n        legend: theia.SemanticTokensLegend, eventHandle: number | undefined): void;\n    $emitDocumentSemanticTokensEvent(eventHandle: number): void;\n    $registerDocumentRangeSemanticTokensProvider(handle: number, pluginInfo: PluginInfo, selector: SerializedDocumentFilter[], legend: theia.SemanticTokensLegend): void;\n    $registerCallHierarchyProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n    $registerLinkedEditingRangeProvider(handle: number, selector: SerializedDocumentFilter[]): void;\n    $setLanguageStatus(handle: number, status: LanguageStatus): void;\n    $removeLanguageStatus(handle: number): void;\n}\n\nexport interface WebviewInitData {\n    webviewResourceRoot: string\n    webviewCspSource: string\n}\n\nexport interface WebviewPanelViewState {\n    readonly active: boolean;\n    readonly visible: boolean;\n    readonly position: number;\n}\n\nexport interface WebviewsExt {\n    $onMessage(handle: string, message: any): void;\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void;\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void>;\n    $deserializeWebviewPanel(newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void>;\n}\n\nexport interface WebviewsMain {\n    $createWebviewPanel(handle: string,\n        viewType: string,\n        title: string,\n        showOptions: theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions): void;\n    $disposeWebview(handle: string): void;\n    $reveal(handle: string, showOptions: theia.WebviewPanelShowOptions): void;\n    $setTitle(handle: string, value: string): void;\n    $setIconPath(handle: string, value: IconUrl | undefined): void;\n    $setHtml(handle: string, value: string): void;\n    $setOptions(handle: string, options: theia.WebviewOptions): void;\n    $postMessage(handle: string, value: any): Thenable<boolean>;\n\n    $registerSerializer(viewType: string): void;\n    $unregisterSerializer(viewType: string): void;\n}\n\nexport interface WebviewViewsExt {\n    $resolveWebviewView(handle: string,\n        viewType: string,\n        title: string | undefined,\n        state: any,\n        cancellation: CancellationToken): Promise<void>;\n    $onDidChangeWebviewViewVisibility(handle: string, visible: boolean): void;\n    $disposeWebviewView(handle: string): void;\n}\n\nexport interface WebviewViewsMain extends Disposable {\n    $registerWebviewViewProvider(viewType: string,\n        options: { retainContextWhenHidden?: boolean, serializeBuffersForPostMessage: boolean }): void;\n    $unregisterWebviewViewProvider(viewType: string): void;\n\n    $setWebviewViewTitle(handle: string, value: string | undefined): void;\n    $setWebviewViewDescription(handle: string, value: string | undefined): void;\n\n    $show(handle: string, preserveFocus: boolean): void;\n}\n\nexport interface CustomEditorsExt {\n    $resolveWebviewEditor<T>(\n        resource: UriComponents,\n        newWebviewHandle: string,\n        viewType: string,\n        title: string,\n        widgetOpenerOptions: T | undefined,\n        options: theia.WebviewPanelOptions,\n        cancellation: CancellationToken): Promise<void>;\n    $createCustomDocument(resource: UriComponents, viewType: string, openContext: theia.CustomDocumentOpenContext, cancellation: CancellationToken): Promise<{ editable: boolean }>;\n    $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void>;\n    $undo(resource: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void>;\n    $redo(resource: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void>;\n    $revert(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void>;\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void;\n    $onSave(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void>;\n    $onSaveAs(resource: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void>;\n    // $backup(resource: UriComponents, viewType: string, cancellation: CancellationToken): Promise<string>;\n    $onMoveCustomEditor(handle: string, newResource: UriComponents, viewType: string): Promise<void>;\n}\n\nexport interface CustomTextEditorCapabilities {\n    readonly supportsMove?: boolean;\n}\n\nexport interface CustomEditorsMain {\n    $registerTextEditorProvider(viewType: string, options: theia.WebviewPanelOptions, capabilities: CustomTextEditorCapabilities): void;\n    $registerCustomEditorProvider(viewType: string, options: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument: boolean): void;\n    $unregisterEditorProvider(viewType: string): void;\n    $createCustomEditorPanel<T>(handle: string, title: string, widgetOpenerOptions: T | undefined, options: theia.WebviewPanelOptions & theia.WebviewOptions): Promise<void>;\n    $onDidEdit(resource: UriComponents, viewType: string, editId: number, label: string | undefined): void;\n    $onContentChange(resource: UriComponents, viewType: string): void;\n}\n\nexport interface StorageMain {\n    $set(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean>;\n    $get(key: string, isGlobal: boolean): Promise<KeysToAnyValues>;\n    $getAll(isGlobal: boolean): Promise<KeysToKeysToAnyValue>;\n}\n\nexport interface StorageExt {\n    $updatePluginsWorkspaceData(data: KeysToKeysToAnyValue): void;\n}\n\n/**\n * A DebugConfigurationProviderTriggerKind specifies when the `provideDebugConfigurations` method of a `DebugConfigurationProvider` should be called.\n * Currently there are two situations:\n *  (1) providing debug configurations to populate a newly created `launch.json`\n *  (2) providing dynamically generated configurations when the user asks for them through the UI (e.g. via the \"Select and Start Debugging\" command).\n * A trigger kind is used when registering a `DebugConfigurationProvider` with {@link debug.registerDebugConfigurationProvider}.\n */\nexport enum DebugConfigurationProviderTriggerKind {\n    /**\n     * `DebugConfigurationProvider.provideDebugConfigurations` is called to provide the initial debug\n     * configurations for a newly created launch.json.\n     */\n    Initial = 1,\n    /**\n     * `DebugConfigurationProvider.provideDebugConfigurations` is called to provide dynamically generated debug configurations when the user asks for them through the UI\n     * (e.g. via the \"Select and Start Debugging\" command).\n     */\n    Dynamic = 2\n}\n\nexport interface DebugConfigurationProvider {\n    readonly handle: number;\n    readonly type: string;\n    readonly triggerKind: DebugConfigurationProviderTriggerKind;\n    provideDebugConfigurations?(folder: string | undefined): Promise<theia.DebugConfiguration[]>;\n    resolveDebugConfiguration?(\n        folder: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null>;\n    resolveDebugConfigurationWithSubstitutedVariables?(\n        folder: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null>;\n}\n\nexport interface DebugConfigurationProviderDescriptor {\n    readonly handle: number,\n    readonly type: string,\n    readonly trigger: DebugConfigurationProviderTriggerKind,\n    readonly provideDebugConfiguration: boolean,\n    readonly resolveDebugConfigurations: boolean,\n    readonly resolveDebugConfigurationWithSubstitutedVariables: boolean\n}\n\nexport interface DebugExt {\n    $onSessionCustomEvent(sessionId: string, event: string, body?: any): void;\n    $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): void;\n    $sessionDidCreate(sessionId: string): void;\n    $sessionDidDestroy(sessionId: string): void;\n    $sessionDidChange(sessionId: string | undefined): void;\n    $provideDebugConfigurationsByHandle(handle: number, workspaceFolder: string | undefined): Promise<theia.DebugConfiguration[]>;\n    $resolveDebugConfigurationByHandle(\n        handle: number,\n        workspaceFolder: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null>;\n    $resolveDebugConfigurationWithSubstitutedVariablesByHandle(\n        handle: number,\n        workspaceFolder: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null>;\n\n    $createDebugSession(debugConfiguration: theia.DebugConfiguration, workspaceFolder: string | undefined): Promise<string>;\n    $terminateDebugSession(sessionId: string): Promise<void>;\n    $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined>;\n}\n\nexport interface DebugMain {\n    $appendToDebugConsole(value: string): Promise<void>;\n    $appendLineToDebugConsole(value: string): Promise<void>;\n    $registerDebuggerContribution(description: DebuggerDescription): Promise<void>;\n    $unregisterDebuggerConfiguration(debugType: string): Promise<void>;\n    $registerDebugConfigurationProvider(description: DebugConfigurationProviderDescriptor): void;\n    $unregisterDebugConfigurationProvider(handle: number): Promise<void>;\n    $addBreakpoints(breakpoints: Breakpoint[]): Promise<void>;\n    $removeBreakpoints(breakpoints: string[]): Promise<void>;\n    $startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration, options: theia.DebugSessionOptions): Promise<boolean>;\n    $stopDebugging(sessionId?: string): Promise<void>;\n    $customRequest(sessionId: string, command: string, args?: any): Promise<DebugProtocol.Response>;\n    $getDebugProtocolBreakpoint(sessionId: string, breakpointId: string): Promise<theia.DebugProtocolBreakpoint | undefined>;\n}\n\nexport interface FileSystemExt {\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat>;\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]>;\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer>;\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void>;\n    $rename(handle: number, resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $copy(handle: number, resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $mkdir(handle: number, resource: UriComponents): Promise<void>;\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void>;\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void;\n    $unwatch(handle: number, session: number): void;\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number>;\n    $close(handle: number, fd: number): Promise<void>;\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer>;\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number>;\n}\n\nexport interface IFileChangeDto {\n    resource: UriComponents;\n    type: files.FileChangeType;\n}\n\nexport interface FileSystemMain {\n    $registerFileSystemProvider(handle: number, scheme: string, capabilities: files.FileSystemProviderCapabilities): void;\n    $unregisterProvider(handle: number): void;\n    $onFileSystemChange(handle: number, resource: IFileChangeDto[]): void;\n\n    $stat(uri: UriComponents): Promise<files.Stat>;\n    $readdir(resource: UriComponents): Promise<[string, files.FileType][]>;\n    $readFile(resource: UriComponents): Promise<BinaryBuffer>;\n    $writeFile(resource: UriComponents, content: BinaryBuffer): Promise<void>;\n    $rename(resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $copy(resource: UriComponents, target: UriComponents, opts: files.FileOverwriteOptions): Promise<void>;\n    $mkdir(resource: UriComponents): Promise<void>;\n    $delete(resource: UriComponents, opts: files.FileDeleteOptions): Promise<void>;\n}\n\nexport interface FileSystemEvents {\n    created: UriComponents[];\n    changed: UriComponents[];\n    deleted: UriComponents[];\n}\n\nexport interface ExtHostFileSystemEventServiceShape {\n    $onFileEvent(events: FileSystemEvents): void;\n    $onWillRunFileOperation(operation: files.FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any>;\n    $onDidRunFileOperation(operation: files.FileOperation, target: UriComponents, source: UriComponents | undefined): void;\n}\n\nexport interface ClipboardMain {\n    $readText(): Promise<string>;\n    $writeText(value: string): Promise<void>;\n}\n\nexport interface CommentsExt {\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void;\n    $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void>;\n    $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void>;\n    $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: CancellationToken): Promise<Range[] | undefined>;\n}\n\nexport interface CommentProviderFeatures {\n    options?: CommentOptions;\n}\n\nexport type CommentThreadChanges = Partial<{\n    range: Range,\n    label: string,\n    contextValue: string,\n    comments: Comment[],\n    collapseState: CommentThreadCollapsibleState;\n    canReply: boolean;\n}>;\n\nexport interface CommentsMain {\n    $registerCommentController(handle: number, id: string, label: string): void;\n    $unregisterCommentController(handle: number): void;\n    $updateCommentControllerFeatures(handle: number, features: CommentProviderFeatures): void;\n    $createCommentThread(handle: number, commentThreadHandle: number, threadId: string, resource: UriComponents, range: Range, extensionId: string): CommentThread | undefined;\n    $updateCommentThread(handle: number, commentThreadHandle: number, threadId: string, resource: UriComponents, changes: CommentThreadChanges): void;\n    $deleteCommentThread(handle: number, commentThreadHandle: number): void;\n    $onDidCommentThreadsChange(handle: number, event: CommentThreadChangedEvent): void;\n}\n\nexport const PLUGIN_RPC_CONTEXT = {\n    AUTHENTICATION_MAIN: <ProxyIdentifier<AuthenticationMain>>createProxyIdentifier<AuthenticationMain>('AuthenticationMain'),\n    COMMAND_REGISTRY_MAIN: <ProxyIdentifier<CommandRegistryMain>>createProxyIdentifier<CommandRegistryMain>('CommandRegistryMain'),\n    QUICK_OPEN_MAIN: createProxyIdentifier<QuickOpenMain>('QuickOpenMain'),\n    DIALOGS_MAIN: createProxyIdentifier<DialogsMain>('DialogsMain'),\n    WORKSPACE_MAIN: createProxyIdentifier<WorkspaceMain>('WorkspaceMain'),\n    MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<MessageRegistryMain>>createProxyIdentifier<MessageRegistryMain>('MessageRegistryMain'),\n    TEXT_EDITORS_MAIN: createProxyIdentifier<TextEditorsMain>('TextEditorsMain'),\n    DOCUMENTS_MAIN: createProxyIdentifier<DocumentsMain>('DocumentsMain'),\n    STATUS_BAR_MESSAGE_REGISTRY_MAIN: <ProxyIdentifier<StatusBarMessageRegistryMain>>createProxyIdentifier<StatusBarMessageRegistryMain>('StatusBarMessageRegistryMain'),\n    ENV_MAIN: createProxyIdentifier<EnvMain>('EnvMain'),\n    NOTIFICATION_MAIN: createProxyIdentifier<NotificationMain>('NotificationMain'),\n    NOTIFICATION_EXT: createProxyIdentifier<NotificationExt>('NotificationExt'),\n    TERMINAL_MAIN: createProxyIdentifier<TerminalServiceMain>('TerminalServiceMain'),\n    TREE_VIEWS_MAIN: createProxyIdentifier<TreeViewsMain>('TreeViewsMain'),\n    PREFERENCE_REGISTRY_MAIN: createProxyIdentifier<PreferenceRegistryMain>('PreferenceRegistryMain'),\n    OUTPUT_CHANNEL_REGISTRY_MAIN: <ProxyIdentifier<OutputChannelRegistryMain>>createProxyIdentifier<OutputChannelRegistryMain>('OutputChannelRegistryMain'),\n    LANGUAGES_MAIN: createProxyIdentifier<LanguagesMain>('LanguagesMain'),\n    CONNECTION_MAIN: createProxyIdentifier<ConnectionMain>('ConnectionMain'),\n    WEBVIEWS_MAIN: createProxyIdentifier<WebviewsMain>('WebviewsMain'),\n    CUSTOM_EDITORS_MAIN: createProxyIdentifier<CustomEditorsMain>('CustomEditorsMain'),\n    WEBVIEW_VIEWS_MAIN: createProxyIdentifier<WebviewViewsMain>('WebviewViewsMain'),\n    STORAGE_MAIN: createProxyIdentifier<StorageMain>('StorageMain'),\n    TASKS_MAIN: createProxyIdentifier<TasksMain>('TasksMain'),\n    DEBUG_MAIN: createProxyIdentifier<DebugMain>('DebugMain'),\n    FILE_SYSTEM_MAIN: createProxyIdentifier<FileSystemMain>('FileSystemMain'),\n    SCM_MAIN: createProxyIdentifier<ScmMain>('ScmMain'),\n    SECRETS_MAIN: createProxyIdentifier<SecretsMain>('SecretsMain'),\n    DECORATIONS_MAIN: createProxyIdentifier<DecorationsMain>('DecorationsMain'),\n    WINDOW_MAIN: createProxyIdentifier<WindowMain>('WindowMain'),\n    CLIPBOARD_MAIN: <ProxyIdentifier<ClipboardMain>>createProxyIdentifier<ClipboardMain>('ClipboardMain'),\n    LABEL_SERVICE_MAIN: <ProxyIdentifier<LabelServiceMain>>createProxyIdentifier<LabelServiceMain>('LabelServiceMain'),\n    TIMELINE_MAIN: <ProxyIdentifier<TimelineMain>>createProxyIdentifier<TimelineMain>('TimelineMain'),\n    THEMING_MAIN: <ProxyIdentifier<ThemingMain>>createProxyIdentifier<ThemingMain>('ThemingMain'),\n    COMMENTS_MAIN: <ProxyIdentifier<CommentsMain>>createProxyIdentifier<CommentsMain>('CommentsMain')\n};\n\nexport const MAIN_RPC_CONTEXT = {\n    AUTHENTICATION_EXT: createProxyIdentifier<AuthenticationExt>('AuthenticationExt'),\n    HOSTED_PLUGIN_MANAGER_EXT: createProxyIdentifier<PluginManagerExt>('PluginManagerExt'),\n    COMMAND_REGISTRY_EXT: createProxyIdentifier<CommandRegistryExt>('CommandRegistryExt'),\n    QUICK_OPEN_EXT: createProxyIdentifier<QuickOpenExt>('QuickOpenExt'),\n    WINDOW_STATE_EXT: createProxyIdentifier<WindowStateExt>('WindowStateExt'),\n    NOTIFICATION_EXT: createProxyIdentifier<NotificationExt>('NotificationExt'),\n    NOTIFICATION_MAIN: createProxyIdentifier<NotificationMain>('NotificationMain'),\n    WORKSPACE_EXT: createProxyIdentifier<WorkspaceExt>('WorkspaceExt'),\n    TEXT_EDITORS_EXT: createProxyIdentifier<TextEditorsExt>('TextEditorsExt'),\n    EDITORS_AND_DOCUMENTS_EXT: createProxyIdentifier<EditorsAndDocumentsExt>('EditorsAndDocumentsExt'),\n    DOCUMENTS_EXT: createProxyIdentifier<DocumentsExt>('DocumentsExt'),\n    TERMINAL_EXT: createProxyIdentifier<TerminalServiceExt>('TerminalServiceExt'),\n    OUTPUT_CHANNEL_REGISTRY_EXT: createProxyIdentifier<OutputChannelRegistryExt>('OutputChannelRegistryExt'),\n    TREE_VIEWS_EXT: createProxyIdentifier<TreeViewsExt>('TreeViewsExt'),\n    PREFERENCE_REGISTRY_EXT: createProxyIdentifier<PreferenceRegistryExt>('PreferenceRegistryExt'),\n    LANGUAGES_EXT: createProxyIdentifier<LanguagesExt>('LanguagesExt'),\n    CONNECTION_EXT: createProxyIdentifier<ConnectionExt>('ConnectionExt'),\n    WEBVIEWS_EXT: createProxyIdentifier<WebviewsExt>('WebviewsExt'),\n    CUSTOM_EDITORS_EXT: createProxyIdentifier<CustomEditorsExt>('CustomEditorsExt'),\n    WEBVIEW_VIEWS_EXT: createProxyIdentifier<WebviewViewsExt>('WebviewViewsExt'),\n    STORAGE_EXT: createProxyIdentifier<StorageExt>('StorageExt'),\n    TASKS_EXT: createProxyIdentifier<TasksExt>('TasksExt'),\n    DEBUG_EXT: createProxyIdentifier<DebugExt>('DebugExt'),\n    FILE_SYSTEM_EXT: createProxyIdentifier<FileSystemExt>('FileSystemExt'),\n    ExtHostFileSystemEventService: createProxyIdentifier<ExtHostFileSystemEventServiceShape>('ExtHostFileSystemEventService'),\n    SCM_EXT: createProxyIdentifier<ScmExt>('ScmExt'),\n    SECRETS_EXT: createProxyIdentifier<SecretsExt>('SecretsExt'),\n    DECORATIONS_EXT: createProxyIdentifier<DecorationsExt>('DecorationsExt'),\n    LABEL_SERVICE_EXT: createProxyIdentifier<LabelServiceExt>('LabelServiceExt'),\n    TIMELINE_EXT: createProxyIdentifier<TimelineExt>('TimeLineExt'),\n    THEMING_EXT: createProxyIdentifier<ThemingExt>('ThemingExt'),\n    COMMENTS_EXT: createProxyIdentifier<CommentsExt>('CommentsExt')\n};\n\nexport interface TasksExt {\n    $initLoadedTasks(executions: TaskExecutionDto[]): Promise<void>;\n    $provideTasks(handle: number): Promise<TaskDto[] | undefined>;\n    $resolveTask(handle: number, task: TaskDto, token?: CancellationToken): Promise<TaskDto | undefined>;\n    $onDidStartTask(execution: TaskExecutionDto, terminalId: number): void;\n    $onDidEndTask(id: number): void;\n    $onDidStartTaskProcess(processId: number | undefined, execution: TaskExecutionDto): void;\n    $onDidEndTaskProcess(exitCode: number | undefined, taskId: number): void;\n}\n\nexport interface TasksMain {\n    $registerTaskProvider(handle: number, type: string): void;\n    $fetchTasks(taskVersion: string | undefined, taskType: string | undefined): Promise<TaskDto[]>;\n    $executeTask(taskDto: TaskDto): Promise<TaskExecutionDto | undefined>;\n    $taskExecutions(): Promise<TaskExecutionDto[]>;\n    $unregister(handle: number): void;\n    $terminateTask(id: number): void;\n    $customExecutionComplete(id: number, exitCode: number | undefined): void;\n}\n\nexport interface AuthenticationExt {\n    $getSessions(id: string, scopes?: string[]): Promise<ReadonlyArray<theia.AuthenticationSession>>;\n    $createSession(id: string, scopes: string[]): Promise<theia.AuthenticationSession>;\n    $removeSession(id: string, sessionId: string): Promise<void>;\n    $onDidChangeAuthenticationSessions(provider: theia.AuthenticationProviderInformation): Promise<void>;\n}\n\nexport interface AuthenticationMain {\n    $registerAuthenticationProvider(id: string, label: string, supportsMultipleAccounts: boolean): void;\n    $unregisterAuthenticationProvider(id: string): void;\n    $onDidChangeSessions(providerId: string, event: AuthenticationProviderAuthenticationSessionsChangeEvent): void;\n    $getSession(providerId: string, scopes: readonly string[], extensionId: string, extensionName: string,\n        options: theia.AuthenticationGetSessionOptions): Promise<theia.AuthenticationSession | undefined>;\n}\n\nexport interface RawColorInfo {\n    color: [number, number, number, number];\n    range: Range;\n}\n\nexport interface LabelServiceExt {\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): theia.Disposable;\n}\n\nexport interface LabelServiceMain {\n    $registerResourceLabelFormatter(handle: number, formatter: ResourceLabelFormatter): void;\n    $unregisterResourceLabelFormatter(handle: number): void;\n}\n\nexport interface SecretsExt {\n    $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void>;\n}\n\nexport interface SecretsMain {\n    $getPassword(extensionId: string, key: string): Promise<string | undefined>;\n    $setPassword(extensionId: string, key: string, value: string): Promise<void>;\n    $deletePassword(extensionId: string, key: string): Promise<void>;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { RPCProtocol } from './rpc-protocol';\nimport { PluginManager, Plugin } from './plugin-api-rpc';\nimport { interfaces } from '@theia/core/shared/inversify';\n\nexport const ExtPluginApiProvider = 'extPluginApi';\n/**\n * Provider for extension API description\n */\nexport interface ExtPluginApiProvider {\n    /**\n     * Provide API description\n     */\n    provideApi(): ExtPluginApi;\n}\n\n/**\n * Plugin API extension description.\n * This interface describes scripts for both plugin runtimes: frontend(WebWorker) and backend(NodeJs)\n */\nexport interface ExtPluginApi {\n\n    /**\n     * Path to the script which should be loaded to provide api, module should export `provideApi` function with\n     * [ExtPluginApiBackendInitializationFn](#ExtPluginApiBackendInitializationFn) signature\n     */\n    backendInitPath?: string;\n\n    /**\n     * Initialization information for frontend part of Plugin API\n     */\n    frontendExtApi?: FrontendExtPluginApi;\n}\n\nexport interface ExtPluginApiFrontendInitializationFn {\n    (rpc: RPCProtocol, plugins: Map<string, Plugin>): void;\n}\n\nexport interface ExtPluginApiBackendInitializationFn {\n    (rpc: RPCProtocol, pluginManager: PluginManager): void;\n}\n\n/**\n * Interface contains information for frontend(WebWorker) Plugin API extension initialization\n */\nexport interface FrontendExtPluginApi {\n    /**\n     * path to js file\n     */\n    initPath: string;\n    /** global variable name */\n    initVariable: string;\n    /**\n     * init function name,\n     * function should have  [ExtPluginApiFrontendInitializationFn](#ExtPluginApiFrontendInitializationFn)\n     */\n    initFunction: string;\n}\n\nexport const MainPluginApiProvider = Symbol('mainPluginApi');\n\n/**\n * Implementation should contains main(Theia) part of new namespace in Plugin API.\n * [initialize](#initialize) will be called once per plugin runtime\n */\nexport interface MainPluginApiProvider {\n    initialize(rpc: RPCProtocol, container: interfaces.Container): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nexport namespace PluginIdentifiers {\n    export interface Components {\n        publisher?: string;\n        name: string;\n        version: string;\n    }\n\n    export interface IdAndVersion {\n        id: UnversionedId;\n        version: string;\n    }\n\n    export type VersionedId = `${string}.${string}@${string}`;\n    export type UnversionedId = `${string}.${string}`;\n    /** Unpublished plugins (not from Open VSX or VSCode plugin store) may not have a `publisher` field. */\n    export const UNPUBLISHED = '<unpublished>';\n\n    /**\n     * @returns a string in the format `<publisher>.<name>`\n     */\n    export function componentsToUnversionedId({ publisher = UNPUBLISHED, name }: Components): UnversionedId {\n        return `${publisher.toLowerCase()}.${name.toLowerCase()}`;\n    }\n    /**\n     * @returns a string in the format `<publisher>.<name>@<version>`.\n     */\n    export function componentsToVersionedId({ publisher = UNPUBLISHED, name, version }: Components): VersionedId {\n        return `${publisher.toLowerCase()}.${name.toLowerCase()}@${version}`;\n    }\n    export function componentsToVersionWithId(components: Components): IdAndVersion {\n        return { id: componentsToUnversionedId(components), version: components.version };\n    }\n    /**\n     * @returns a string in the format `<id>@<version>`.\n     */\n    export function idAndVersionToVersionedId({ id, version }: IdAndVersion): VersionedId {\n        return `${id}@${version}`;\n    }\n    /**\n     * @returns a string in the format `<publisher>.<name>`.\n     */\n    export function unversionedFromVersioned(id: VersionedId): UnversionedId {\n        const endOfId = id.indexOf('@');\n        return id.slice(0, endOfId) as UnversionedId;\n    }\n    /**\n     * @returns `undefined` if it looks like the string passed in does not have the format returned by {@link PluginIdentifiers.toVersionedId}.\n     */\n    export function identifiersFromVersionedId(probablyId: string): Components | undefined {\n        const endOfPublisher = probablyId.indexOf('.');\n        const endOfName = probablyId.indexOf('@', endOfPublisher);\n        if (endOfPublisher === -1 || endOfName === -1) {\n            return undefined;\n        }\n        return { publisher: probablyId.slice(0, endOfPublisher), name: probablyId.slice(endOfPublisher + 1, endOfName), version: probablyId.slice(endOfName + 1) };\n    }\n    /**\n     * @returns `undefined` if it looks like the string passed in does not have the format returned by {@link PluginIdentifiers.toVersionedId}.\n     */\n    export function idAndVersionFromVersionedId(probablyId: string): IdAndVersion | undefined {\n        const endOfPublisher = probablyId.indexOf('.');\n        const endOfName = probablyId.indexOf('@', endOfPublisher);\n        if (endOfPublisher === -1 || endOfName === -1) {\n            return undefined;\n        }\n        return { id: probablyId.slice(0, endOfName) as UnversionedId, version: probablyId.slice(endOfName + 1) };\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { JsonRpcServer } from '@theia/core/lib/common/messaging/proxy-factory';\nimport { RPCProtocol } from './rpc-protocol';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LogPart, KeysToAnyValues, KeysToKeysToAnyValue } from './types';\nimport { CharacterPair, CommentRule, PluginAPIFactory, Plugin } from './plugin-api-rpc';\nimport { ExtPluginApi } from './plugin-ext-api-contribution';\nimport { IJSONSchema, IJSONSchemaSnippet } from '@theia/core/lib/common/json-schema';\nimport { RecursivePartial } from '@theia/core/lib/common/types';\nimport { PreferenceSchema, PreferenceSchemaProperties } from '@theia/core/lib/common/preferences/preference-schema';\nimport { ProblemMatcherContribution, ProblemPatternContribution, TaskDefinition } from '@theia/task/lib/common';\nimport { ColorDefinition } from '@theia/core/lib/common/color';\nimport { ResourceLabelFormatter } from '@theia/core/lib/common/label-protocol';\nimport { PluginIdentifiers } from './plugin-identifiers';\n\nexport { PluginIdentifiers };\nexport const hostedServicePath = '/services/hostedPlugin';\n\n/**\n * Plugin engine (API) type, i.e. 'theiaPlugin', 'vscode', etc.\n */\nexport type PluginEngine = string;\n\n/**\n * This interface describes a package.json object.\n */\nexport interface PluginPackage {\n    name: string;\n    // The publisher is not guaranteed to be defined for unpublished plugins. https://github.com/microsoft/vscode-vsce/commit/a38657ece04c20e4fbde15d5ac1ed39ca51cb856\n    publisher: string | undefined;\n    version: string;\n    engines: {\n        [type in PluginEngine]: string;\n    };\n    theiaPlugin?: {\n        frontend?: string;\n        backend?: string;\n    };\n    main?: string;\n    browser?: string;\n    displayName: string;\n    description: string;\n    contributes?: PluginPackageContribution;\n    packagePath: string;\n    activationEvents?: string[];\n    extensionDependencies?: string[];\n    extensionPack?: string[];\n    icon?: string;\n    extensionKind?: Array<'ui' | 'workspace'>\n}\nexport namespace PluginPackage {\n    export function toPluginUrl(pck: PluginPackage | PluginModel, relativePath: string): string {\n        return `hostedPlugin/${getPluginId(pck)}/${encodeURIComponent(relativePath)}`;\n    }\n}\n\n/**\n * This interface describes a package.json contribution section object.\n */\nexport interface PluginPackageContribution {\n    configuration?: RecursivePartial<PreferenceSchema> | RecursivePartial<PreferenceSchema>[];\n    configurationDefaults?: RecursivePartial<PreferenceSchemaProperties>;\n    languages?: PluginPackageLanguageContribution[];\n    grammars?: PluginPackageGrammarsContribution[];\n    customEditors?: PluginPackageCustomEditor[];\n    viewsContainers?: { [location: string]: PluginPackageViewContainer[] };\n    views?: { [location: string]: PluginPackageView[] };\n    viewsWelcome?: PluginPackageViewWelcome[];\n    commands?: PluginPackageCommand | PluginPackageCommand[];\n    menus?: { [location: string]: PluginPackageMenu[] };\n    submenus?: PluginPackageSubmenu[];\n    keybindings?: PluginPackageKeybinding | PluginPackageKeybinding[];\n    debuggers?: PluginPackageDebuggersContribution[];\n    snippets?: PluginPackageSnippetsContribution[];\n    themes?: PluginThemeContribution[];\n    iconThemes?: PluginIconThemeContribution[];\n    colors?: PluginColorContribution[];\n    taskDefinitions?: PluginTaskDefinitionContribution[];\n    problemMatchers?: PluginProblemMatcherContribution[];\n    problemPatterns?: PluginProblemPatternContribution[];\n    jsonValidation?: PluginJsonValidationContribution[];\n    resourceLabelFormatters?: ResourceLabelFormatter[];\n    localizations?: PluginPackageLocalization[];\n}\n\nexport interface PluginPackageLocalization {\n    languageId: string;\n    languageName?: string;\n    localizedLanguageName?: string;\n    translations: PluginPackageTranslation[];\n    minimalTranslations?: { [key: string]: string };\n}\n\nexport interface PluginPackageTranslation {\n    id: string;\n    path: string;\n}\n\nexport interface PluginPackageCustomEditor {\n    viewType: string;\n    displayName: string;\n    selector?: CustomEditorSelector[];\n    priority?: CustomEditorPriority;\n}\n\nexport interface CustomEditorSelector {\n    readonly filenamePattern?: string;\n}\n\nexport enum CustomEditorPriority {\n    default = 'default',\n    builtin = 'builtin',\n    option = 'option',\n}\n\nexport interface PluginPackageViewContainer {\n    id: string;\n    title: string;\n    icon: string;\n}\n\nexport enum PluginViewType {\n    Tree = 'tree',\n    Webview = 'webview'\n}\n\nexport interface PluginPackageView {\n    id: string;\n    name: string;\n    when?: string;\n    type?: string;\n}\n\nexport interface PluginPackageViewWelcome {\n    view: string;\n    contents: string;\n    when?: string;\n}\n\nexport interface PluginPackageCommand {\n    command: string;\n    title: string;\n    original?: string;\n    category?: string;\n    icon?: string | { light: string; dark: string; };\n    enablement?: string;\n}\n\nexport interface PluginPackageMenu {\n    command?: string;\n    submenu?: string;\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface PluginPackageSubmenu {\n    id: string;\n    label: string;\n    icon: IconUrl;\n}\n\nexport interface PluginPackageKeybinding {\n    key?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\n\nexport interface PluginPackageGrammarsContribution {\n    language?: string;\n    scopeName: string;\n    path: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n}\n\nexport interface ScopeMap {\n    [scopeName: string]: string;\n}\n\nexport interface PluginPackageSnippetsContribution {\n    language?: string;\n    path?: string;\n}\n\nexport interface PluginColorContribution {\n    id?: string;\n    description?: string;\n    defaults?: { light?: string, dark?: string, highContrast?: string };\n}\n\nexport type PluginUiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface PluginThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PluginIconThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    path?: string;\n    uiTheme?: PluginUiTheme;\n}\n\nexport interface PlatformSpecificAdapterContribution {\n    program?: string;\n    args?: string[];\n    runtime?: string;\n    runtimeArgs?: string[];\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface PluginPackageDebuggersContribution extends PlatformSpecificAdapterContribution {\n    type: string;\n    label?: string;\n    languages?: string[];\n    enableBreakpointsFor?: { languageIds: string[] };\n    configurationAttributes: { [request: string]: IJSONSchema };\n    configurationSnippets: IJSONSchemaSnippet[];\n    variables?: ScopeMap;\n    adapterExecutableCommand?: string;\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\n/**\n * This interface describes a package.json languages contribution section object.\n */\nexport interface PluginPackageLanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: string;\n}\n\nexport interface PluginPackageLanguageContributionConfiguration {\n    comments?: CommentRule;\n    brackets?: CharacterPair[];\n    autoClosingPairs?: (CharacterPair | AutoClosingPairConditional)[];\n    surroundingPairs?: (CharacterPair | AutoClosingPair)[];\n    wordPattern?: string;\n    indentationRules?: IndentationRules;\n    folding?: FoldingRules;\n    onEnterRules?: OnEnterRule[];\n}\n\nexport interface PluginTaskDefinitionContribution {\n    type: string;\n    required: string[];\n    properties?: IJSONSchema['properties'];\n}\n\nexport interface PluginProblemMatcherContribution extends ProblemMatcherContribution {\n    name: string;\n}\n\nexport interface PluginProblemPatternContribution extends ProblemPatternContribution {\n    name: string;\n}\n\nexport interface PluginJsonValidationContribution {\n    fileMatch: string | string[];\n    url: string;\n}\n\nexport const PluginScanner = Symbol('PluginScanner');\n/**\n * This scanner process package.json object and returns plugin metadata objects.\n */\nexport interface PluginScanner {\n    /**\n     * The type of plugin's API (engine name)\n     */\n    apiType: PluginEngine;\n\n    /**\n     * Creates plugin's model.\n     *\n     * @param {PluginPackage} plugin\n     * @returns {PluginModel}\n     */\n    getModel(plugin: PluginPackage): PluginModel;\n\n    /**\n     * Creates plugin's lifecycle.\n     *\n     * @returns {PluginLifecycle}\n     */\n    getLifecycle(plugin: PluginPackage): PluginLifecycle;\n\n    getContribution(plugin: PluginPackage): PluginContribution | undefined;\n\n    /**\n     * A mapping between a dependency as its defined in package.json\n     * and its deployable form, e.g. `publisher.name` -> `vscode:extension/publisher.name`\n     */\n    getDependencies(plugin: PluginPackage): Map<string, string> | undefined;\n}\n\n/**\n * A plugin resolver is handling how to resolve a plugin link into a local resource.\n */\nexport const PluginDeployerResolver = Symbol('PluginDeployerResolver');\n/**\n * A resolver handle a set of resource\n */\nexport interface PluginDeployerResolver {\n\n    init?(pluginDeployerResolverInit: PluginDeployerResolverInit): void;\n\n    accept(pluginSourceId: string): boolean;\n\n    resolve(pluginResolverContext: PluginDeployerResolverContext, options?: PluginDeployOptions): Promise<void>;\n\n}\n\nexport const PluginDeployerDirectoryHandler = Symbol('PluginDeployerDirectoryHandler');\nexport interface PluginDeployerDirectoryHandler {\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerDirectoryHandlerContext): Promise<void>;\n}\n\nexport const PluginDeployerFileHandler = Symbol('PluginDeployerFileHandler');\nexport interface PluginDeployerFileHandler {\n\n    accept(pluginDeployerEntry: PluginDeployerEntry): boolean;\n\n    handle(context: PluginDeployerFileHandlerContext): Promise<void>;\n}\n\nexport interface PluginDeployerResolverInit {\n\n}\n\nexport interface PluginDeployerResolverContext {\n\n    addPlugin(pluginId: string, path: string): void;\n\n    getPlugins(): PluginDeployerEntry[];\n\n    getOriginId(): string;\n\n}\n\nexport interface PluginDeployerStartContext {\n    readonly userEntries: string[]\n    readonly systemEntries: string[]\n}\n\nexport const PluginDeployer = Symbol('PluginDeployer');\nexport interface PluginDeployer {\n\n    start(): void;\n\n}\n\nexport const PluginDeployerParticipant = Symbol('PluginDeployerParticipant');\n/**\n * A participant can hook into the plugin deployer lifecycle.\n */\nexport interface PluginDeployerParticipant {\n    onWillStart?(context: PluginDeployerStartContext): Promise<void>;\n}\n\nexport enum PluginDeployerEntryType {\n\n    FRONTEND,\n\n    BACKEND\n}\n\n/**\n * Whether a plugin installed by a user or system.\n */\nexport enum PluginType {\n    System,\n    User\n};\n\nexport interface UnresolvedPluginEntry {\n    id: string;\n    type?: PluginType;\n}\n\nexport interface PluginDeployerEntry {\n\n    /**\n     * ID (before any resolution)\n     */\n    id(): string;\n\n    /**\n     * Original resolved path\n     */\n    originalPath(): string;\n\n    /**\n     * Local path on the filesystem.\n     */\n    path(): string;\n\n    /**\n     * Get a specific entry\n     */\n    getValue<T>(key: string): T;\n\n    /**\n     * Store a value\n     */\n    storeValue<T>(key: string, value: T): void;\n\n    /**\n     * Update path\n     */\n    updatePath(newPath: string): void;\n\n    getChanges(): string[];\n\n    isFile(): boolean;\n\n    isDirectory(): boolean;\n\n    /**\n     * Resolved if a resolver has handle this plugin\n     */\n    isResolved(): boolean;\n\n    resolvedBy(): string;\n\n    /**\n     * Accepted when a handler is telling this location can go live\n     */\n    isAccepted(...types: PluginDeployerEntryType[]): boolean;\n\n    accept(...types: PluginDeployerEntryType[]): void;\n\n    hasError(): boolean;\n\n    type: PluginType\n    /**\n     * A fs path to a directory where a plugin is located.\n     * Depending on a plugin format it can be different from `path`.\n     * Use `path` if you want to resolve something within a plugin, like `README.md` file.\n     * Use `rootPath` if you want to manipulate the entire plugin location, like delete or move it.\n     */\n    rootPath: string\n}\n\nexport interface PluginDeployerFileHandlerContext {\n\n    unzip(sourcePath: string, destPath: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\nexport interface PluginDeployerDirectoryHandlerContext {\n\n    copy(origin: string, target: string): Promise<void>;\n\n    pluginEntry(): PluginDeployerEntry;\n\n}\n\n/**\n * This interface describes a plugin model object, which is populated from package.json.\n */\nexport interface PluginModel {\n    id: string;\n    name: string;\n    publisher: string;\n    version: string;\n    displayName: string;\n    description: string;\n    engine: {\n        type: PluginEngine;\n        version: string;\n    };\n    entryPoint: PluginEntryPoint;\n    packageUri: string;\n    /**\n     * @deprecated since 1.1.0 - because it lead to problems with getting a relative path\n     * needed by Icon Themes to correctly load Fonts, use packageUri instead.\n     */\n    packagePath: string;\n    iconUrl?: string;\n    readmeUrl?: string;\n    licenseUrl?: string;\n}\n\nexport interface PluginEntryPoint {\n    frontend?: string;\n    backend?: string;\n}\n\n/**\n * This interface describes some static plugin contributions.\n */\nexport interface PluginContribution {\n    activationEvents?: string[];\n    configuration?: PreferenceSchema[];\n    configurationDefaults?: PreferenceSchemaProperties;\n    languages?: LanguageContribution[];\n    grammars?: GrammarsContribution[];\n    customEditors?: CustomEditor[];\n    viewsContainers?: { [location: string]: ViewContainer[] };\n    views?: { [location: string]: View[] };\n    viewsWelcome?: ViewWelcome[];\n    commands?: PluginCommand[];\n    menus?: { [location: string]: Menu[] };\n    submenus?: Submenu[];\n    keybindings?: Keybinding[];\n    debuggers?: DebuggerContribution[];\n    snippets?: SnippetContribution[];\n    themes?: ThemeContribution[];\n    iconThemes?: IconThemeContribution[];\n    colors?: ColorDefinition[];\n    taskDefinitions?: TaskDefinition[];\n    problemMatchers?: ProblemMatcherContribution[];\n    problemPatterns?: ProblemPatternContribution[];\n    resourceLabelFormatters?: ResourceLabelFormatter[];\n    localizations?: Localization[];\n}\n\nexport interface Localization {\n    languageId: string;\n    languageName?: string;\n    localizedLanguageName?: string;\n    translations: Translation[];\n    minimalTranslations?: { [key: string]: string };\n}\n\nexport interface Translation {\n    id: string;\n    path: string;\n    version: string;\n    contents: { [scope: string]: { [key: string]: string } }\n}\n\nexport interface SnippetContribution {\n    uri: string\n    source: string\n    language?: string\n}\n\nexport type UiTheme = 'vs' | 'vs-dark' | 'hc-black';\n\nexport interface ThemeContribution {\n    id?: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface IconThemeContribution {\n    id: string;\n    label?: string;\n    description?: string;\n    uri: string;\n    uiTheme?: UiTheme;\n}\n\nexport interface GrammarsContribution {\n    format: 'json' | 'plist';\n    language?: string;\n    scope: string;\n    grammar?: string | object;\n    grammarLocation?: string;\n    embeddedLanguages?: ScopeMap;\n    tokenTypes?: ScopeMap;\n    injectTo?: string[];\n    balancedBracketScopes?: string[];\n    unbalancedBracketScopes?: string[];\n}\n\n/**\n * The language contribution\n */\nexport interface LanguageContribution {\n    id: string;\n    extensions?: string[];\n    filenames?: string[];\n    filenamePatterns?: string[];\n    firstLine?: string;\n    aliases?: string[];\n    mimetypes?: string[];\n    configuration?: LanguageConfiguration;\n}\n\nexport interface LanguageConfiguration {\n    brackets?: CharacterPair[];\n    indentationRules?: IndentationRules;\n    surroundingPairs?: AutoClosingPair[];\n    autoClosingPairs?: AutoClosingPairConditional[];\n    comments?: CommentRule;\n    folding?: FoldingRules;\n    wordPattern?: string;\n    onEnterRules?: OnEnterRule[];\n}\n\n/**\n * This interface describes a package.json debuggers contribution section object.\n */\nexport interface DebuggerContribution extends PlatformSpecificAdapterContribution {\n    type: string,\n    label?: string,\n    languages?: string[],\n    enableBreakpointsFor?: {\n        languageIds: string[]\n    },\n    configurationAttributes?: IJSONSchema[],\n    configurationSnippets?: IJSONSchemaSnippet[],\n    variables?: ScopeMap,\n    adapterExecutableCommand?: string\n    win?: PlatformSpecificAdapterContribution;\n    winx86?: PlatformSpecificAdapterContribution;\n    windows?: PlatformSpecificAdapterContribution;\n    osx?: PlatformSpecificAdapterContribution;\n    linux?: PlatformSpecificAdapterContribution;\n}\n\nexport interface IndentationRules {\n    increaseIndentPattern: string;\n    decreaseIndentPattern: string;\n    unIndentedLinePattern?: string;\n    indentNextLinePattern?: string;\n}\nexport interface AutoClosingPair {\n    close: string;\n    open: string;\n}\n\nexport interface AutoClosingPairConditional extends AutoClosingPair {\n    notIn?: string[];\n}\n\nexport interface FoldingMarkers {\n    start: string;\n    end: string;\n}\n\nexport interface FoldingRules {\n    offSide?: boolean;\n    markers?: FoldingMarkers;\n}\n\nexport interface OnEnterRule {\n    beforeText: string;\n    afterText?: string;\n    previousLineText?: string;\n    action: EnterAction;\n}\n\nexport interface EnterAction {\n    indent: 'none' | 'indent' | 'outdent' | 'indentOutdent';\n    appendText?: string;\n    removeText?: number;\n}\n\n/**\n * Custom Editors contribution\n */\nexport interface CustomEditor {\n    viewType: string;\n    displayName: string;\n    selector: CustomEditorSelector[];\n    priority: CustomEditorPriority;\n}\n\n/**\n * Views Containers contribution\n */\nexport interface ViewContainer {\n    id: string;\n    title: string;\n    iconUrl: string;\n    themeIcon?: string;\n}\n\n/**\n * View contribution\n */\nexport interface View {\n    id: string;\n    name: string;\n    when?: string;\n    type?: string;\n}\n\n/**\n * View Welcome contribution\n */\nexport interface ViewWelcome {\n    view: string;\n    content: string;\n    when?: string;\n    order: number;\n}\n\nexport interface PluginCommand {\n    command: string;\n    title: string;\n    originalTitle?: string;\n    category?: string;\n    iconUrl?: IconUrl;\n    themeIcon?: string;\n    enablement?: string;\n}\n\nexport type IconUrl = string | { light: string; dark: string; };\n\n/**\n * Menu contribution\n */\nexport interface Menu {\n    command?: string;\n    submenu?: string\n    alt?: string;\n    group?: string;\n    when?: string;\n}\n\nexport interface Submenu {\n    id: string;\n    label: string;\n    icon?: IconUrl;\n}\n\n/**\n * Keybinding contribution\n */\nexport interface Keybinding {\n    keybinding?: string;\n    command: string;\n    when?: string;\n    mac?: string;\n    linux?: string;\n    win?: string;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    args?: any;\n}\n\n/**\n * This interface describes a plugin lifecycle object.\n */\nexport interface PluginLifecycle {\n    startMethod: string;\n    stopMethod: string;\n    /**\n     * Frontend module name, frontend plugin should expose this name.\n     */\n    frontendModuleName?: string;\n    /**\n     * Path to the script which should do some initialization before frontend plugin is loaded.\n     */\n    frontendInitPath?: string;\n    /**\n     * Path to the script which should do some initialization before backend plugin is loaded.\n     */\n    backendInitPath?: string;\n}\n\n/**\n * The export function of initialization module of backend plugin.\n */\nexport interface BackendInitializationFn {\n    (apiFactory: PluginAPIFactory, plugin: Plugin): void;\n}\n\nexport interface BackendLoadingFn {\n    (rpc: RPCProtocol, plugin: Plugin): void;\n}\n\nexport interface PluginContext {\n    subscriptions: Disposable[];\n}\n\nexport interface ExtensionContext {\n    subscriptions: Disposable[];\n}\n\nexport interface PluginMetadata {\n    host: string;\n    model: PluginModel;\n    lifecycle: PluginLifecycle;\n    isUnderDevelopment?: boolean;\n    outOfSync: boolean;\n}\n\nexport const MetadataProcessor = Symbol('MetadataProcessor');\nexport interface MetadataProcessor {\n    process(pluginMetadata: PluginMetadata): void;\n}\n\nexport function getPluginId(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport function buildFrontendModuleName(plugin: PluginPackage | PluginModel): string {\n    return `${plugin.publisher}_${plugin.name}`.replace(/\\W/g, '_');\n}\n\nexport const HostedPluginClient = Symbol('HostedPluginClient');\nexport interface HostedPluginClient {\n    postMessage(pluginHost: string, message: string): Promise<void>;\n\n    log(logPart: LogPart): void;\n\n    onDidDeploy(): void;\n}\n\nexport interface PluginDependencies {\n    metadata: PluginMetadata\n    /**\n     * Actual listing of plugin dependencies.\n     * Mapping from {@link PluginIdentifiers.UnversionedId external representation} of plugin identity to a string\n     * that can be used to identify the resolver for the specific plugin case, e.g. with scheme `vscode://<id>`.\n     */\n    mapping?: Map<string, string>\n}\n\nexport const PluginDeployerHandler = Symbol('PluginDeployerHandler');\nexport interface PluginDeployerHandler {\n    deployFrontendPlugins(frontendPlugins: PluginDeployerEntry[]): Promise<number | undefined>;\n    deployBackendPlugins(backendPlugins: PluginDeployerEntry[]): Promise<number | undefined>;\n\n    getDeployedPluginsById(pluginId: string): DeployedPlugin[];\n\n    getDeployedPlugin(pluginId: PluginIdentifiers.VersionedId): DeployedPlugin | undefined;\n    /**\n     * Removes the plugin from the location it originally resided on disk.\n     * Unless `--uncompressed-plugins-in-place` is passed to the CLI, this operation is safe.\n     */\n    uninstallPlugin(pluginId: PluginIdentifiers.VersionedId): Promise<boolean>;\n    /**\n     * Removes the plugin from the locations to which it had been deployed.\n     * This operation is not safe - references to deleted assets may remain.\n     */\n    undeployPlugin(pluginId: PluginIdentifiers.VersionedId): Promise<boolean>;\n\n    getPluginDependencies(pluginToBeInstalled: PluginDeployerEntry): Promise<PluginDependencies | undefined>;\n}\n\nexport interface GetDeployedPluginsParams {\n    pluginIds: PluginIdentifiers.VersionedId[]\n}\n\nexport interface DeployedPlugin {\n    /**\n     * defaults to system\n     */\n    type?: PluginType;\n    metadata: PluginMetadata;\n    contributes?: PluginContribution;\n}\n\nexport const HostedPluginServer = Symbol('HostedPluginServer');\nexport interface HostedPluginServer extends JsonRpcServer<HostedPluginClient> {\n\n    getDeployedPluginIds(): Promise<PluginIdentifiers.VersionedId[]>;\n\n    getUninstalledPluginIds(): Promise<readonly PluginIdentifiers.VersionedId[]>;\n\n    getDeployedPlugins(params: GetDeployedPluginsParams): Promise<DeployedPlugin[]>;\n\n    getExtPluginAPI(): Promise<ExtPluginApi[]>;\n\n    onMessage(targetHost: string, message: string): Promise<void>;\n\n}\n\nexport const PLUGIN_HOST_BACKEND = 'main';\n\nexport interface WorkspaceStorageKind {\n    workspace?: string | undefined;\n    roots: string[];\n}\nexport type GlobalStorageKind = undefined;\nexport type PluginStorageKind = GlobalStorageKind | WorkspaceStorageKind;\n\nexport interface PluginDeployOptions {\n    version: string;\n    /** Instructs the deployer to ignore any existing plugins with different versions */\n    ignoreOtherVersions?: boolean;\n}\n\n/**\n * The JSON-RPC workspace interface.\n */\nexport const pluginServerJsonRpcPath = '/services/plugin-ext';\nexport const PluginServer = Symbol('PluginServer');\nexport interface PluginServer {\n\n    /**\n     * Deploy a plugin.\n     *\n     * @param type whether a plugin is installed by a system or a user, defaults to a user\n     */\n    deploy(pluginEntry: string, type?: PluginType, options?: PluginDeployOptions): Promise<void>;\n    uninstall(pluginId: PluginIdentifiers.VersionedId): Promise<void>;\n    undeploy(pluginId: PluginIdentifiers.VersionedId): Promise<void>;\n\n    setStorageValue(key: string, value: KeysToAnyValues, kind: PluginStorageKind): Promise<boolean>;\n    getStorageValue(key: string, kind: PluginStorageKind): Promise<KeysToAnyValues>;\n    getAllStorageValues(kind: PluginStorageKind): Promise<KeysToKeysToAnyValue>;\n}\n\nexport const ServerPluginRunner = Symbol('ServerPluginRunner');\nexport interface ServerPluginRunner {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    acceptMessage(pluginHostId: string, jsonMessage: string): boolean;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    onMessage(pluginHostId: string, jsonMessage: string): void;\n    setClient(client: HostedPluginClient): void;\n    setDefault(defaultRunner: ServerPluginRunner): void;\n    clientClosed(): void;\n\n    /**\n     * Provides additional deployed plugins.\n     */\n    getExtraDeployedPlugins(): Promise<DeployedPlugin[]>;\n\n    /**\n     * Provides additional plugin ids.\n     */\n    getExtraDeployedPluginIds(): Promise<PluginIdentifiers.VersionedId[]>;\n\n}\n\nexport const PluginHostEnvironmentVariable = Symbol('PluginHostEnvironmentVariable');\nexport interface PluginHostEnvironmentVariable {\n    process(env: NodeJS.ProcessEnv): void;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/extensions/node/rpcProtocol.ts\n// with small modifications\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection, Disposable } from '@theia/core/lib/common/disposable';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport { URI as VSCodeURI } from '@theia/core/shared/vscode-uri';\nimport URI from '@theia/core/lib/common/uri';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { Range, Position } from '../plugin/types-impl';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nexport interface MessageConnection {\n    send(msg: string): void;\n    onMessage: Event<string>;\n}\n\nexport const RPCProtocol = Symbol('RPCProtocol');\nexport interface RPCProtocol extends Disposable {\n    /**\n     * Returns a proxy to an object addressable/named in the plugin process or in the main process.\n     */\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T;\n\n    /**\n     * Register manually created instance.\n     */\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R;\n\n}\n\nexport class ProxyIdentifier<T> {\n    public readonly id: string;\n    constructor(public readonly isMain: boolean, id: string | T) {\n        // TODO this is nasty, rewrite this\n        this.id = (id as any).toString();\n    }\n}\n\nexport function createProxyIdentifier<T>(identifier: string): ProxyIdentifier<T> {\n    return new ProxyIdentifier(false, identifier);\n}\n\nexport interface ConnectionClosedError extends Error {\n    code: 'RPC_PROTOCOL_CLOSED'\n}\nexport namespace ConnectionClosedError {\n    const code: ConnectionClosedError['code'] = 'RPC_PROTOCOL_CLOSED';\n    export function create(message: string = 'connection is closed'): ConnectionClosedError {\n        return Object.assign(new Error(message), { code });\n    }\n    export function is(error: unknown): error is ConnectionClosedError {\n        return !!error && typeof error === 'object' && 'code' in error && (error as ConnectionClosedError).code === code;\n    }\n}\n\nexport class RPCProtocolImpl implements RPCProtocol {\n\n    private readonly locals = new Map<string, any>();\n    private readonly proxies = new Map<string, any>();\n    private lastMessageId = 0;\n    private readonly cancellationTokenSources = new Map<string, CancellationTokenSource>();\n    private readonly pendingRPCReplies = new Map<string, Deferred<any>>();\n    private readonly multiplexer: RPCMultiplexer;\n\n    private replacer: (key: string | undefined, value: any) => any;\n    private reviver: (key: string | undefined, value: any) => any;\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => { /* mark as no disposed */ })\n    );\n\n    constructor(connection: MessageConnection, transformations?: {\n        replacer?: (key: string | undefined, value: any) => any,\n        reviver?: (key: string | undefined, value: any) => any\n    }) {\n        this.toDispose.push(\n            this.multiplexer = new RPCMultiplexer(connection)\n        );\n        this.multiplexer.onMessage(msg => this.receiveOneMessage(msg));\n        this.toDispose.push(Disposable.create(() => {\n            this.proxies.clear();\n            for (const reply of this.pendingRPCReplies.values()) {\n                reply.reject(ConnectionClosedError.create());\n            }\n            this.pendingRPCReplies.clear();\n        }));\n\n        this.reviver = transformations?.reviver || ObjectsTransferrer.reviver;\n        this.replacer = transformations?.replacer || ObjectsTransferrer.replacer;\n    }\n\n    private get isDisposed(): boolean {\n        return this.toDispose.disposed;\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    getProxy<T>(proxyId: ProxyIdentifier<T>): T {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        let proxy = this.proxies.get(proxyId.id);\n        if (!proxy) {\n            proxy = this.createProxy(proxyId.id);\n            this.proxies.set(proxyId.id, proxy);\n        }\n        return proxy;\n    }\n\n    set<T, R extends T>(identifier: ProxyIdentifier<T>, instance: R): R {\n        if (this.isDisposed) {\n            throw ConnectionClosedError.create();\n        }\n        this.locals.set(identifier.id, instance);\n        if (Disposable.is(instance)) {\n            this.toDispose.push(instance);\n        }\n        this.toDispose.push(Disposable.create(() => this.locals.delete(identifier.id)));\n        return instance;\n    }\n\n    private createProxy<T>(proxyId: string): T {\n        const handler = {\n            get: (target: any, name: string) => {\n                if (!target[name] && name.charCodeAt(0) === 36 /* CharCode.DollarSign */) {\n                    target[name] = (...myArgs: any[]) =>\n                        this.remoteCall(proxyId, name, myArgs);\n                }\n                return target[name];\n            }\n        };\n        return new Proxy(Object.create(null), handler);\n    }\n\n    private remoteCall(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        if (this.isDisposed) {\n            return Promise.reject(ConnectionClosedError.create());\n        }\n        const cancellationToken: CancellationToken | undefined = args.length && CancellationToken.is(args[args.length - 1]) ? args.pop() : undefined;\n        if (cancellationToken && cancellationToken.isCancellationRequested) {\n            return Promise.reject(canceled());\n        }\n\n        const callId = String(++this.lastMessageId);\n        const result = new Deferred();\n\n        if (cancellationToken) {\n            args.push('add.cancellation.token');\n            cancellationToken.onCancellationRequested(() =>\n                this.multiplexer.send(this.cancel(callId))\n            );\n        }\n\n        this.pendingRPCReplies.set(callId, result);\n        this.multiplexer.send(this.request(callId, proxyId, methodName, args));\n        return result.promise;\n    }\n\n    private receiveOneMessage(rawmsg: string): void {\n        if (this.isDisposed) {\n            return;\n        }\n        try {\n            const msg = <RPCMessage>JSON.parse(rawmsg, this.reviver);\n\n            switch (msg.type) {\n                case MessageType.Request:\n                    this.receiveRequest(msg);\n                    break;\n                case MessageType.Reply:\n                    this.receiveReply(msg);\n                    break;\n                case MessageType.ReplyErr:\n                    this.receiveReplyErr(msg);\n                    break;\n                case MessageType.Cancel:\n                    this.receiveCancel(msg);\n                    break;\n            }\n        } catch (e) {\n            // exception does not show problematic content: log it!\n            console.log('failed to parse message: ' + rawmsg);\n            throw e;\n        }\n\n    }\n\n    private receiveCancel(msg: CancelMessage): void {\n        const cancellationTokenSource = this.cancellationTokenSources.get(msg.id);\n        if (cancellationTokenSource) {\n            cancellationTokenSource.cancel();\n        }\n    }\n\n    private receiveRequest(msg: RequestMessage): void {\n        const callId = msg.id;\n        const proxyId = msg.proxyId;\n        // convert `null` to `undefined`, since we don't use `null` in internal plugin APIs\n        const args = msg.args.map(arg => arg === null ? undefined : arg); // eslint-disable-line no-null/no-null\n\n        const addToken = args.length && args[args.length - 1] === 'add.cancellation.token' ? args.pop() : false;\n        if (addToken) {\n            const tokenSource = new CancellationTokenSource();\n            this.cancellationTokenSources.set(callId, tokenSource);\n            args.push(tokenSource.token);\n        }\n        const invocation = this.invokeHandler(proxyId, msg.method, args);\n\n        invocation.then(result => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexer.send(this.replyOK(callId, result));\n        }, error => {\n            this.cancellationTokenSources.delete(callId);\n            this.multiplexer.send(this.replyErr(callId, error));\n        });\n    }\n\n    private receiveReply(msg: ReplyMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n        pendingReply.resolve(msg.res);\n    }\n\n    private receiveReplyErr(msg: ReplyErrMessage): void {\n        const callId = msg.id;\n        const pendingReply = this.pendingRPCReplies.get(callId);\n        if (!pendingReply) {\n            return;\n        }\n        this.pendingRPCReplies.delete(callId);\n\n        let err: Error | undefined = undefined;\n        if (msg.err && msg.err.$isError) {\n            err = new Error();\n            err.name = msg.err.name;\n            err.message = msg.err.message;\n            err.stack = msg.err.stack;\n        }\n        pendingReply.reject(err);\n    }\n\n    private invokeHandler(proxyId: string, methodName: string, args: any[]): Promise<any> {\n        try {\n            return Promise.resolve(this.doInvokeHandler(proxyId, methodName, args));\n        } catch (err) {\n            return Promise.reject(err);\n        }\n    }\n\n    private doInvokeHandler(proxyId: string, methodName: string, args: any[]): any {\n        const actor = this.locals.get(proxyId);\n        if (!actor) {\n            throw new Error('Unknown actor ' + proxyId);\n        }\n        const method = actor[methodName];\n        if (typeof method !== 'function') {\n            throw new Error('Unknown method ' + methodName + ' on actor ' + proxyId);\n        }\n        return method.apply(actor, args);\n    }\n\n    private cancel(req: string): string {\n        return `{\"type\":${MessageType.Cancel},\"id\":\"${req}\"}`;\n    }\n\n    private request(req: string, rpcId: string, method: string, args: any[]): string {\n        return `{\"type\":${MessageType.Request},\"id\":\"${req}\",\"proxyId\":\"${rpcId}\",\"method\":\"${method}\",\"args\":${JSON.stringify(args, this.replacer)}}`;\n    }\n\n    private replyOK(req: string, res: any): string {\n        if (typeof res === 'undefined') {\n            return `{\"type\":${MessageType.Reply},\"id\":\"${req}\"}`;\n        }\n        return `{\"type\":${MessageType.Reply},\"id\":\"${req}\",\"res\":${safeStringify(res, this.replacer)}}`;\n    }\n\n    private replyErr(req: string, err: any): string {\n        err = typeof err === 'string' ? new Error(err) : err;\n        if (err instanceof Error) {\n            return `{\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":${safeStringify(transformErrorForSerialization(err))}}`;\n        }\n        return `{\"type\":${MessageType.ReplyErr},\"id\":\"${req}\",\"err\":null}`;\n    }\n}\n\nfunction canceled(): Error {\n    const error = new Error('Canceled');\n    error.name = error.message;\n    return error;\n}\n\n/**\n * Sends/Receives multiple messages in one go:\n *  - multiple messages to be sent from one stack get sent in bulk at `process.nextTick`.\n *  - each incoming message is handled in a separate `process.nextTick`.\n */\nclass RPCMultiplexer implements Disposable, MessageConnection {\n\n    private readonly connection: MessageConnection;\n    private readonly sendAccumulatedBound: () => void;\n\n    private messagesToSend: string[];\n\n    private readonly messageEmitter = new Emitter<string>();\n    private readonly toDispose = new DisposableCollection();\n\n    constructor(connection: MessageConnection) {\n        this.connection = connection;\n        this.sendAccumulatedBound = this.sendAccumulated.bind(this);\n\n        this.toDispose.push(Disposable.create(() => this.messagesToSend = []));\n        this.toDispose.push(this.connection.onMessage((msg: string) => {\n            const messages = JSON.parse(msg);\n            for (const message of messages) {\n                this.messageEmitter.fire(message);\n            }\n        }));\n        this.toDispose.push(this.messageEmitter);\n\n        this.messagesToSend = [];\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    get onMessage(): Event<string> {\n        return this.messageEmitter.event;\n    }\n\n    private sendAccumulated(): void {\n        const tmp = this.messagesToSend;\n        this.messagesToSend = [];\n        this.connection.send(JSON.stringify(tmp));\n    }\n\n    public send(msg: string): void {\n        if (this.toDispose.disposed) {\n            throw ConnectionClosedError.create();\n        }\n        if (this.messagesToSend.length === 0) {\n            if (typeof setImmediate !== 'undefined') {\n                setImmediate(this.sendAccumulatedBound);\n            } else {\n                setTimeout(this.sendAccumulatedBound, 0);\n            }\n        }\n        this.messagesToSend.push(msg);\n    }\n}\n\n/**\n * These functions are responsible for correct transferring objects via rpc channel.\n *\n * To reach that some specific kind of objects is converted to json in some custom way\n * and then, after receiving, revived to objects again,\n * so there is feeling that object was transferred via rpc channel.\n *\n * To distinguish between regular and altered objects, field $type is added to altered ones.\n * Also value of that field specifies kind of the object.\n */\nexport namespace ObjectsTransferrer {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function replacer(key: string | undefined, value: any): any {\n        if (value instanceof URI) {\n            return {\n                $type: SerializedObjectType.THEIA_URI,\n                data: value.toString()\n            } as SerializedObject;\n        } else if (value instanceof Range) {\n            const range = value as Range;\n            const serializedValue = {\n                start: {\n                    line: range.start.line,\n                    character: range.start.character\n                },\n                end: {\n                    line: range.end.line,\n                    character: range.end.character\n                }\n            };\n            return {\n                $type: SerializedObjectType.THEIA_RANGE,\n                data: JSON.stringify(serializedValue)\n            } as SerializedObject;\n        } else if (value && value['$mid'] === 1) {\n            // Given value is VSCode URI\n            // We cannot use instanceof here because VSCode URI has toJSON method which is invoked before this replacer.\n            const uri = VSCodeURI.revive(value);\n            return {\n                $type: SerializedObjectType.VSCODE_URI,\n                data: uri.toString()\n            } as SerializedObject;\n        } else if (value instanceof BinaryBuffer) {\n            const bytes = [...value.buffer.values()];\n            return {\n                $type: SerializedObjectType.TEXT_BUFFER,\n                data: JSON.stringify({ bytes })\n            };\n        }\n\n        return value;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function reviver(key: string | undefined, value: any): any {\n        if (isSerializedObject(value)) {\n            switch (value.$type) {\n                case SerializedObjectType.THEIA_URI:\n                    return new URI(value.data);\n                case SerializedObjectType.VSCODE_URI:\n                    return VSCodeURI.parse(value.data);\n                case SerializedObjectType.THEIA_RANGE:\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    const obj: any = JSON.parse(value.data);\n                    const start = new Position(obj.start.line, obj.start.character);\n                    const end = new Position(obj.end.line, obj.end.character);\n                    return new Range(start, end);\n                case SerializedObjectType.TEXT_BUFFER:\n                    const data: { bytes: number[] } = JSON.parse(value.data);\n                    return BinaryBuffer.wrap(Uint8Array.from(data.bytes));\n            }\n        }\n\n        return value;\n    }\n\n}\n\ninterface SerializedObject {\n    $type: SerializedObjectType;\n    data: string;\n}\n\nenum SerializedObjectType {\n    THEIA_URI,\n    VSCODE_URI,\n    THEIA_RANGE,\n    TEXT_BUFFER\n}\n\nfunction isSerializedObject(obj: unknown): obj is SerializedObject {\n    const serializedObject = obj as SerializedObject;\n    return !!obj && typeof obj === 'object' && serializedObject.$type !== undefined && serializedObject.data !== undefined;\n}\n\nexport const enum MessageType {\n    Request = 1,\n    Reply = 2,\n    ReplyErr = 3,\n    Cancel = 4,\n    Terminate = 5,\n    Terminated = 6\n}\n\nclass CancelMessage {\n    type: MessageType.Cancel;\n    id: string;\n}\n\nclass RequestMessage {\n    type: MessageType.Request;\n    id: string;\n    proxyId: string;\n    method: string;\n    args: any[];\n}\n\nclass ReplyMessage {\n    type: MessageType.Reply;\n    id: string;\n    res: any;\n}\n\nclass ReplyErrMessage {\n    type: MessageType.ReplyErr;\n    id: string;\n    err: SerializedError;\n}\n\ntype RPCMessage = RequestMessage | ReplyMessage | ReplyErrMessage | CancelMessage;\n\nexport interface SerializedError {\n    readonly $isError: true;\n    readonly name: string;\n    readonly message: string;\n    readonly stack: string;\n}\n\nexport function transformErrorForSerialization(error: Error): SerializedError {\n    if (error instanceof Error) {\n        const { name, message } = error;\n        const stack: string = (<any>error).stacktrace || error.stack;\n        return {\n            $isError: true,\n            name,\n            message,\n            stack\n        };\n    }\n\n    // return as is\n    return error;\n}\n\ninterface JSONStringifyReplacer {\n    (key: string, value: any): any;\n}\n\nfunction safeStringify(obj: any, replacer?: JSONStringifyReplacer): string {\n    try {\n        return JSON.stringify(obj, replacer);\n    } catch (err) {\n        console.error('error stringifying response: ', err);\n        return 'null';\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/shared/semanticTokensDto.ts\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\nlet _isLittleEndian = true;\nlet _isLittleEndianComputed = false;\nfunction isLittleEndian(): boolean {\n    if (!_isLittleEndianComputed) {\n        _isLittleEndianComputed = true;\n        const test = new Uint8Array(2);\n        test[0] = 1;\n        test[1] = 2;\n        const view = new Uint16Array(test.buffer);\n        _isLittleEndian = (view[0] === (2 << 8) + 1);\n    }\n    return _isLittleEndian;\n}\n\nexport interface IFullSemanticTokensDto {\n    id: number;\n    type: 'full';\n    data: Uint32Array;\n}\n\nexport interface IDeltaSemanticTokensDto {\n    id: number;\n    type: 'delta';\n    deltas: { start: number; deleteCount: number; data?: Uint32Array; }[];\n}\n\nexport type ISemanticTokensDto = IFullSemanticTokensDto | IDeltaSemanticTokensDto;\n\nconst enum EncodedSemanticTokensType {\n    Full = 1,\n    Delta = 2\n}\n\nfunction reverseEndianness(arr: Uint8Array): void {\n    for (let i = 0, len = arr.length; i < len; i += 4) {\n        // flip bytes 0<->3 and 1<->2\n        const b0 = arr[i + 0];\n        const b1 = arr[i + 1];\n        const b2 = arr[i + 2];\n        const b3 = arr[i + 3];\n        arr[i + 0] = b3;\n        arr[i + 1] = b2;\n        arr[i + 2] = b1;\n        arr[i + 3] = b0;\n    }\n}\n\nfunction toLittleEndianBuffer(arr: Uint32Array): BinaryBuffer {\n    const uint8Arr = new Uint8Array(arr.buffer, arr.byteOffset, arr.length * 4);\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    return BinaryBuffer.wrap(uint8Arr);\n}\n\nfunction fromLittleEndianBuffer(buff: BinaryBuffer): Uint32Array {\n    const uint8Arr = buff.buffer;\n    if (!isLittleEndian()) {\n        // the byte order must be changed\n        reverseEndianness(uint8Arr);\n    }\n    if (uint8Arr.byteOffset % 4 === 0) {\n        return new Uint32Array(uint8Arr.buffer, uint8Arr.byteOffset, uint8Arr.length / 4);\n    } else {\n        // unaligned memory access doesn't work on all platforms\n        const data = new Uint8Array(uint8Arr.byteLength);\n        data.set(uint8Arr);\n        return new Uint32Array(data.buffer, data.byteOffset, data.length / 4);\n    }\n}\n\nexport function encodeSemanticTokensDto(semanticTokens: ISemanticTokensDto): BinaryBuffer {\n    const dest = new Uint32Array(encodeSemanticTokensDtoSize(semanticTokens));\n    let offset = 0;\n    dest[offset++] = semanticTokens.id;\n    if (semanticTokens.type === 'full') {\n        dest[offset++] = EncodedSemanticTokensType.Full;\n        dest[offset++] = semanticTokens.data.length;\n        dest.set(semanticTokens.data, offset); offset += semanticTokens.data.length;\n    } else {\n        dest[offset++] = EncodedSemanticTokensType.Delta;\n        dest[offset++] = semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            dest[offset++] = delta.start;\n            dest[offset++] = delta.deleteCount;\n            if (delta.data) {\n                dest[offset++] = delta.data.length;\n                dest.set(delta.data, offset); offset += delta.data.length;\n            } else {\n                dest[offset++] = 0;\n            }\n        }\n    }\n    return toLittleEndianBuffer(dest);\n}\n\nfunction encodeSemanticTokensDtoSize(semanticTokens: ISemanticTokensDto): number {\n    let result = 0;\n    result += (\n        + 1 // id\n        + 1 // type\n    );\n    if (semanticTokens.type === 'full') {\n        result += (\n            + 1 // data length\n            + semanticTokens.data.length\n        );\n    } else {\n        result += (\n            + 1 // delta count\n        );\n        result += (\n            + 1 // start\n            + 1 // deleteCount\n            + 1 // data length\n        ) * semanticTokens.deltas.length;\n        for (const delta of semanticTokens.deltas) {\n            if (delta.data) {\n                result += delta.data.length;\n            }\n        }\n    }\n    return result;\n}\n\nexport function decodeSemanticTokensDto(_buff: BinaryBuffer): ISemanticTokensDto {\n    const src = fromLittleEndianBuffer(_buff);\n    let offset = 0;\n    const id = src[offset++];\n    const type: EncodedSemanticTokensType = src[offset++];\n    if (type === EncodedSemanticTokensType.Full) {\n        const length = src[offset++];\n        const data = src.subarray(offset, offset + length); offset += length;\n        return {\n            id: id,\n            type: 'full',\n            data: data\n        };\n    }\n    const deltaCount = src[offset++];\n    const deltas: { start: number; deleteCount: number; data?: Uint32Array; }[] = [];\n    for (let i = 0; i < deltaCount; i++) {\n        const start = src[offset++];\n        const deleteCount = src[offset++];\n        const length = src[offset++];\n        let data: Uint32Array | undefined;\n        if (length > 0) {\n            data = src.subarray(offset, offset + length); offset += length;\n        }\n        deltas[i] = { start, deleteCount, data };\n    }\n    return {\n        id: id,\n        type: 'delta',\n        deltas: deltas\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/base/common/types.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/**\n * Returns `true` if the parameter has type \"object\" and not null, an array, a regexp, a date.\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isObject(obj: any): boolean {\n    return typeof obj === 'object'\n        && obj !== null // eslint-disable-line @typescript-eslint/no-explicit-any\n        && !Array.isArray(obj)\n        && !(obj instanceof RegExp)\n        && !(obj instanceof Date);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function mixin(destination: any, source: any, overwrite: boolean = true): any {\n    if (!isObject(destination)) {\n        return source;\n    }\n\n    if (isObject(source)) {\n        Object.keys(source).forEach(key => {\n            if (key in destination) {\n                if (overwrite) {\n                    if (isObject(destination[key]) && isObject(source[key])) {\n                        mixin(destination[key], source[key], overwrite);\n                    } else {\n                        destination[key] = source[key];\n                    }\n                }\n            } else {\n                destination[key] = source[key];\n            }\n        });\n    }\n    return destination;\n}\n\nexport enum LogType {\n    Info,\n    Error\n}\n\nexport interface LogPart {\n    data: string;\n    type: LogType;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport interface KeysToAnyValues { [key: string]: any }\nexport interface KeysToKeysToAnyValue { [key: string]: KeysToAnyValues }\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/** copied from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostTypes.ts#L18-L27 */\nexport function es5ClassCompat<T extends Function>(target: T): T {\n    // @ts-ignore\n    function _(): any { return Reflect.construct(target, arguments, this.constructor); }\n    Object.defineProperty(_, 'name', Object.getOwnPropertyDescriptor(target, 'name')!);\n    Object.setPrototypeOf(_, target);\n    Object.setPrototypeOf(_.prototype, target.prototype);\n    return _ as unknown as T;\n}\n/* eslint-enable @typescript-eslint/no-explicit-any */\nconst _typeof = {\n    number: 'number',\n    string: 'string',\n    undefined: 'undefined',\n    object: 'object',\n    function: 'function'\n};\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * @returns whether the provided parameter is a JavaScript Array or not.\n */\nexport function isArray(array: any): array is any[] {\n    if (Array.isArray) {\n        return Array.isArray(array);\n    }\n\n    if (array && typeof (array.length) === _typeof.number && array.constructor === Array) {\n        return true;\n    }\n\n    return false;\n}\n\n/**\n * @returns whether the provided parameter is undefined.\n */\nexport function isUndefined(obj: any): obj is undefined {\n    return typeof (obj) === _typeof.undefined;\n}\n\n/**\n * @returns whether the provided parameter is undefined or null.\n */\nexport function isUndefinedOrNull(obj: any): obj is undefined | null {\n    return isUndefined(obj) || obj === null; // eslint-disable-line no-null/no-null\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/uint.ts\n\nexport const enum Constants {\n    /**\n     * Max unsigned integer that fits on 8 bits.\n     */\n    MAX_UINT_8 = 255, // 2^8 - 1\n}\n\nexport function toUint8(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > Constants.MAX_UINT_8) {\n        return Constants.MAX_UINT_8;\n    }\n    return v | 0;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport URI, { UriComponents } from '@theia/core/lib/common/uri';\n\nexport { UriComponents };\n\n// some well known URI schemas\n// based on https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/base/common/network.ts#L9-L79\n// TODO move to network.ts file\nexport namespace Schemes {\n\n    /**\n     * A schema that is used for models that exist in memory\n     * only and that have no correspondence on a server or such.\n     */\n    export const inMemory = 'inmemory';\n\n    /**\n     * A schema that is used for setting files\n     */\n    export const vscode = 'vscode';\n\n    /**\n     * A schema that is used for internal private files\n     */\n    export const internal = 'private';\n\n    /**\n     * A walk-through document.\n     */\n    export const walkThrough = 'walkThrough';\n\n    /**\n     * An embedded code snippet.\n     */\n    export const walkThroughSnippet = 'walkThroughSnippet';\n\n    export const http = 'http';\n\n    export const https = 'https';\n\n    export const file = 'file';\n\n    export const mailto = 'mailto';\n\n    export const untitled = 'untitled';\n\n    export const data = 'data';\n\n    export const command = 'command';\n\n    export const vscodeRemote = 'vscode-remote';\n\n    export const vscodeRemoteResource = 'vscode-remote-resource';\n\n    export const userData = 'vscode-userdata';\n\n    export const vscodeCustomEditor = 'vscode-custom-editor';\n\n    export const vscodeSettings = 'vscode-settings';\n\n    export const webviewPanel = 'webview-panel';\n}\n\nexport function theiaUritoUriComponents(uri: URI): UriComponents {\n    return uri.toComponents();\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// eslint-disable-next-line @theia/runtime-import-check\nimport { DebugExtImpl } from '../../../plugin/debug/debug-ext';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport function createDebugExtStub(rpc: RPCProtocol): DebugExtImpl {\n    return new Proxy(new DebugExtImpl(rpc), {\n        apply: function (target, that, args): void {\n            console.error('Debug API works only in plugin container');\n        }\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { PluginIdentifiers, PluginModel, PluginPackage } from '../../../common/plugin-protocol';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\nimport URI from '@theia/core/lib/common/uri';\n\nconst NLS_REGEX = /^%([\\w\\d.-]+)%$/i;\n\nfunction getUri(pluginModel: PluginModel, relativePath: string): URI {\n    const ownURI = new Endpoint().getRestUrl();\n    return ownURI.parent.resolve(PluginPackage.toPluginUrl(pluginModel, relativePath));\n}\n\nfunction readPluginFile(pluginModel: PluginModel, relativePath: string): Promise<string> {\n    return readContents(getUri(pluginModel, relativePath).toString());\n}\n\nfunction readContents(uri: string): Promise<string> {\n    return new Promise((resolve, reject) => {\n        const request = new XMLHttpRequest();\n\n        request.onreadystatechange = function (): void {\n            if (this.readyState === XMLHttpRequest.DONE) {\n                if (this.status === 200) {\n                    resolve(this.response);\n                } else if (this.status === 404) {\n                    reject('NotFound');\n                } else {\n                    reject(new Error('Could not fetch plugin resource'));\n                }\n            }\n        };\n\n        request.open('GET', uri, true);\n        request.send();\n    });\n}\n\nasync function readPluginJson(pluginModel: PluginModel, relativePath: string): Promise<any> {\n    const content = await readPluginFile(pluginModel, relativePath);\n    const json = JSON.parse(content) as PluginPackage;\n    json.publisher ??= PluginIdentifiers.UNPUBLISHED;\n    return json;\n}\n\nexport async function loadManifest(pluginModel: PluginModel): Promise<any> {\n    const [manifest, translations] = await Promise.all([\n        readPluginJson(pluginModel, 'package.json'),\n        loadTranslations(pluginModel)\n    ]);\n    // translate vscode builtins, as they are published with a prefix.\n    const built_prefix = '@theia/vscode-builtin-';\n    if (manifest && manifest.name && manifest.name.startsWith(built_prefix)) {\n        manifest.name = manifest.name.substr(built_prefix.length);\n    }\n    return manifest && translations && Object.keys(translations).length ?\n        localize(manifest, translations) :\n        manifest;\n}\n\nasync function loadTranslations(pluginModel: PluginModel): Promise<any> {\n    try {\n        return await readPluginJson(pluginModel, 'package.nls.json');\n    } catch (e) {\n        if (e !== 'NotFound') {\n            throw e;\n        }\n        return {};\n    }\n}\n\nfunction localize(value: any, translations: {\n    [key: string]: string\n}): any {\n    if (typeof value === 'string') {\n        const match = NLS_REGEX.exec(value);\n        return match && translations[match[1]] || value;\n    }\n    if (Array.isArray(value)) {\n        const result = [];\n        for (const item of value) {\n            result.push(localize(item, translations));\n        }\n        return result;\n    }\n    if (value === null) {\n        return value;\n    }\n    if (typeof value === 'object') {\n        const result: { [key: string]: any } = {};\n        // eslint-disable-next-line guard-for-in\n        for (const propertyName in value) {\n            result[propertyName] = localize(value[propertyName], translations);\n        }\n        return result;\n    }\n    return value;\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { EnvExtImpl } from '../../../plugin/env';\nimport { RPCProtocol } from '../../../common/rpc-protocol';\n\n/**\n * Worker specific implementation not returning any FileSystem details\n * Extending the common class\n */\nexport class WorkerEnvExtImpl extends EnvExtImpl {\n\n    constructor(rpc: RPCProtocol) {\n        super(rpc);\n    }\n\n    /**\n     * Throw error for app-root as there is no filesystem in worker context\n     */\n    get appRoot(): string {\n        throw new Error('There is no app root in worker context');\n    }\n\n    get isNewAppInstall(): boolean {\n        return false;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocolImpl } from '../../../common/rpc-protocol';\nimport { PluginManagerExtImpl } from '../../../plugin/plugin-manager';\nimport { MAIN_RPC_CONTEXT, Plugin, emptyPlugin, TerminalServiceExt } from '../../../common/plugin-api-rpc';\nimport { createAPIFactory } from '../../../plugin/plugin-context';\nimport { getPluginId, PluginMetadata } from '../../../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport { PreferenceRegistryExtImpl } from '../../../plugin/preference-registry';\nimport { ExtPluginApi } from '../../../common/plugin-ext-api-contribution';\nimport { createDebugExtStub } from './debug-stub';\nimport { EditorsAndDocumentsExtImpl } from '../../../plugin/editors-and-documents';\nimport { WorkspaceExtImpl } from '../../../plugin/workspace';\nimport { MessageRegistryExt } from '../../../plugin/message-registry';\nimport { WorkerEnvExtImpl } from './worker-env-ext';\nimport { ClipboardExt } from '../../../plugin/clipboard-ext';\nimport { KeyValueStorageProxy } from '../../../plugin/plugin-storage';\nimport { WebviewsExtImpl } from '../../../plugin/webviews';\nimport { loadManifest } from './plugin-manifest-loader';\nimport { TerminalServiceExtImpl } from '../../../plugin/terminal-ext';\nimport { reviver } from '../../../plugin/types-impl';\nimport { SecretsExtImpl } from '../../../plugin/secrets-ext';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst ctx = self as any;\n\nconst pluginsApiImpl = new Map<string, typeof theia>();\nconst pluginsModulesNames = new Map<string, Plugin>();\n\nconst emitter = new Emitter<string>();\nconst rpc = new RPCProtocolImpl({\n    onMessage: emitter.event,\n    send: (m: string) => {\n        ctx.postMessage(m);\n    },\n},\n{\n    reviver: reviver\n});\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\naddEventListener('message', (message: any) => {\n    emitter.fire(message.data);\n});\n\nconst scripts = new Set<string>();\n\nfunction initialize(contextPath: string, pluginMetadata: PluginMetadata): void {\n    const path = '/context/' + contextPath;\n\n    if (!scripts.has(path)) {\n        ctx.importScripts(path);\n        scripts.add(path);\n    }\n}\nconst envExt = new WorkerEnvExtImpl(rpc);\nconst storageProxy = new KeyValueStorageProxy(rpc);\nconst editorsAndDocuments = new EditorsAndDocumentsExtImpl(rpc);\nconst messageRegistryExt = new MessageRegistryExt(rpc);\nconst workspaceExt = new WorkspaceExtImpl(rpc, editorsAndDocuments, messageRegistryExt);\nconst preferenceRegistryExt = new PreferenceRegistryExtImpl(rpc, workspaceExt);\nconst debugExt = createDebugExtStub(rpc);\nconst clipboardExt = new ClipboardExt(rpc);\nconst webviewExt = new WebviewsExtImpl(rpc, workspaceExt);\nconst secretsExt = new SecretsExtImpl(rpc);\nconst terminalService: TerminalServiceExt = new TerminalServiceExtImpl(rpc);\n\nconst pluginManager = new PluginManagerExtImpl({\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any {\n        if (plugin.pluginPath) {\n            if (isElectron()) {\n                ctx.importScripts(plugin.pluginPath);\n            } else {\n                if (plugin.lifecycle.frontendModuleName) {\n                    // Set current module name being imported\n                    ctx.frontendModuleName = plugin.lifecycle.frontendModuleName;\n                }\n\n                ctx.importScripts('/hostedPlugin/' + getPluginId(plugin.model) + '/' + plugin.pluginPath);\n            }\n        }\n\n        if (plugin.lifecycle.frontendModuleName) {\n            if (!ctx[plugin.lifecycle.frontendModuleName]) {\n                console.error(`WebWorker: Cannot start plugin \"${plugin.model.name}\". Frontend plugin not found: \"${plugin.lifecycle.frontendModuleName}\"`);\n                return;\n            }\n            return ctx[plugin.lifecycle.frontendModuleName];\n        }\n    },\n    async init(rawPluginData: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> {\n        const result: Plugin[] = [];\n        const foreign: Plugin[] = [];\n        // Process the plugins concurrently, making sure to keep the order.\n        const plugins = await Promise.all<{\n            /** Where to push the plugin: `result` or `foreign` */\n            target: Plugin[],\n            plugin: Plugin\n        }>(rawPluginData.map(async plg => {\n            const pluginModel = plg.model;\n            const pluginLifecycle = plg.lifecycle;\n            if (pluginModel.entryPoint!.frontend) {\n                let frontendInitPath = pluginLifecycle.frontendInitPath;\n                if (frontendInitPath) {\n                    initialize(frontendInitPath, plg);\n                } else {\n                    frontendInitPath = '';\n                }\n                const rawModel = await loadManifest(pluginModel);\n                const plugin: Plugin = {\n                    pluginPath: pluginModel.entryPoint.frontend!,\n                    pluginFolder: pluginModel.packagePath,\n                    pluginUri: pluginModel.packageUri,\n                    model: pluginModel,\n                    lifecycle: pluginLifecycle,\n                    rawModel,\n                    isUnderDevelopment: !!plg.isUnderDevelopment\n                };\n                const apiImpl = apiFactory(plugin);\n                pluginsApiImpl.set(plugin.model.id, apiImpl);\n                pluginsModulesNames.set(plugin.lifecycle.frontendModuleName!, plugin);\n                return { target: result, plugin };\n            } else {\n                return {\n                    target: foreign,\n                    plugin: {\n                        pluginPath: pluginModel.entryPoint.backend,\n                        pluginFolder: pluginModel.packagePath,\n                        pluginUri: pluginModel.packageUri,\n                        model: pluginModel,\n                        lifecycle: pluginLifecycle,\n                        get rawModel(): never {\n                            throw new Error('not supported');\n                        },\n                        isUnderDevelopment: !!plg.isUnderDevelopment\n                    }\n                };\n            }\n        }));\n        // Collect the ordered plugins and insert them in the target array:\n        for (const { target, plugin } of plugins) {\n            target.push(plugin);\n        }\n        return [result, foreign];\n    },\n    initExtApi(extApi: ExtPluginApi[]): void {\n        for (const api of extApi) {\n            try {\n                if (api.frontendExtApi) {\n                    ctx.importScripts(api.frontendExtApi.initPath);\n                    ctx[api.frontendExtApi.initVariable][api.frontendExtApi.initFunction](rpc, pluginsModulesNames);\n                }\n\n            } catch (e) {\n                console.error(e);\n            }\n        }\n    }\n}, envExt, terminalService, storageProxy, secretsExt, preferenceRegistryExt, webviewExt, rpc);\n\nconst apiFactory = createAPIFactory(\n    rpc,\n    pluginManager,\n    envExt,\n    debugExt,\n    preferenceRegistryExt,\n    editorsAndDocuments,\n    workspaceExt,\n    messageRegistryExt,\n    clipboardExt,\n    webviewExt\n);\nlet defaultApi: typeof theia;\n\nconst handler = {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    get: (target: any, name: string) => {\n        const plugin = pluginsModulesNames.get(name);\n        if (plugin) {\n            const apiImpl = pluginsApiImpl.get(plugin.model.id);\n            return apiImpl;\n        }\n\n        if (!defaultApi) {\n            defaultApi = apiFactory(emptyPlugin);\n        }\n\n        return defaultApi;\n    }\n};\nctx['theia'] = new Proxy(Object.create(null), handler);\n\nrpc.set(MAIN_RPC_CONTEXT.HOSTED_PLUGIN_MANAGER_EXT, pluginManager);\nrpc.set(MAIN_RPC_CONTEXT.EDITORS_AND_DOCUMENTS_EXT, editorsAndDocuments);\nrpc.set(MAIN_RPC_CONTEXT.WORKSPACE_EXT, workspaceExt);\nrpc.set(MAIN_RPC_CONTEXT.PREFERENCE_REGISTRY_EXT, preferenceRegistryExt);\nrpc.set(MAIN_RPC_CONTEXT.STORAGE_EXT, storageProxy);\nrpc.set(MAIN_RPC_CONTEXT.WEBVIEWS_EXT, webviewExt);\n\nfunction isElectron(): boolean {\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.47.3/src/vs/workbench/api/common/extHostAuthentication.ts\n\nimport { Disposable } from './types-impl';\nimport {\n    AuthenticationExt,\n    AuthenticationMain, Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin/';\n\nexport class AuthenticationExtImpl implements AuthenticationExt {\n    private proxy: AuthenticationMain;\n    private authenticationProviders: Map<string, theia.AuthenticationProvider> = new Map<string, theia.AuthenticationProvider>();\n\n    private onDidChangeSessionsEmitter = new Emitter<theia.AuthenticationSessionsChangeEvent>();\n    readonly onDidChangeSessions: Event<theia.AuthenticationSessionsChangeEvent> = this.onDidChangeSessionsEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.AUTHENTICATION_MAIN);\n    }\n\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & ({ createIfNone: true } | { forceNewSession: true } | { forceNewSession: { detail: string } })):\n        Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & { forceNewSession: true }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions & { forceNewSession: { detail: string } }): Promise<theia.AuthenticationSession>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions): Promise<theia.AuthenticationSession | undefined>;\n    async getSession(requestingExtension: InternalPlugin, providerId: string, scopes: readonly string[],\n        options: theia.AuthenticationGetSessionOptions = {}): Promise<theia.AuthenticationSession | undefined> {\n        const extensionName = requestingExtension.model.displayName || requestingExtension.model.name;\n        const extensionId = requestingExtension.model.id.toLowerCase();\n        return this.proxy.$getSession(providerId, scopes, extensionId, extensionName, options);\n    }\n\n    registerAuthenticationProvider(id: string, label: string, provider: theia.AuthenticationProvider, options?: theia.AuthenticationProviderOptions): theia.Disposable {\n        if (this.authenticationProviders.get(id)) {\n            throw new Error(`An authentication provider with id '${id}' is already registered.`);\n        }\n\n        this.authenticationProviders.set(id, provider);\n        const listener = provider.onDidChangeSessions(e => {\n            this.proxy.$onDidChangeSessions(id, e);\n        });\n\n        this.proxy.$registerAuthenticationProvider(id, label, !!options?.supportsMultipleAccounts);\n\n        return new Disposable(() => {\n            listener.dispose();\n            this.authenticationProviders.delete(id);\n            this.proxy.$unregisterAuthenticationProvider(id);\n        });\n    }\n\n    $createSession(providerId: string, scopes: string[]): Promise<theia.AuthenticationSession> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.createSession(scopes));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    $removeSession(providerId: string, sessionId: string): Promise<void> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            return Promise.resolve(authProvider.removeSession(sessionId));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $getSessions(providerId: string, scopes?: string[]): Promise<ReadonlyArray<theia.AuthenticationSession>> {\n        const authProvider = this.authenticationProviders.get(providerId);\n        if (authProvider) {\n            const sessions = await authProvider.getSessions(scopes);\n\n            /* Wrap the session object received from the plugin to prevent serialization mismatches\n            e.g. if the plugin object is constructed with the help of getters they won't be serialized:\n            class SessionImpl implements AuthenticationSession {\n                private _id;\n                get id() {\n                    return _id;\n                }\n            ...\n            } will translate to JSON as { _id: '<sessionid>' } not { id: '<sessionid>' } */\n            return sessions.map(session => ({\n                id: session.id,\n                accessToken: session.accessToken,\n                account: { id: session.account.id, label: session.account.label },\n                scopes: session.scopes\n            }));\n        }\n\n        throw new Error(`Unable to find authentication provider with handle: ${providerId}`);\n    }\n\n    async $onDidChangeAuthenticationSessions(provider: theia.AuthenticationProviderInformation): Promise<void> {\n        this.onDidChangeSessionsEmitter.fire({ provider });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 RedHat and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, ClipboardMain } from '../common';\n\nexport class ClipboardExt implements theia.Clipboard {\n\n    protected readonly proxy: ClipboardMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CLIPBOARD_MAIN);\n    }\n\n    readText(): Promise<string> {\n        return this.proxy.$readText();\n    }\n\n    writeText(value: string): Promise<void> {\n        return this.proxy.$writeText(value);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nimport * as theia from '@theia/plugin';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { CommandRegistryExt, PLUGIN_RPC_CONTEXT as Ext, CommandRegistryMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable } from './types-impl';\nimport { DisposableCollection } from '@theia/core';\nimport { KnownCommands } from './known-commands';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport type Handler = <T>(...args: any[]) => T | PromiseLike<T | undefined>;\n\nexport interface ArgumentProcessor {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    processArgument(arg: any): any;\n}\n\nexport class CommandRegistryImpl implements CommandRegistryExt {\n\n    private proxy: CommandRegistryMain;\n    private readonly commands = new Set<string>();\n    private readonly handlers = new Map<string, Handler>();\n    private readonly argumentProcessors: ArgumentProcessor[];\n    private readonly commandsConverter: CommandsConverter;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.COMMAND_REGISTRY_MAIN);\n        this.argumentProcessors = [];\n        this.commandsConverter = new CommandsConverter(this);\n    }\n\n    get converter(): CommandsConverter {\n        return this.commandsConverter;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerCommand(command: theia.CommandDescription, handler?: Handler, thisArg?: any): Disposable {\n        if (this.commands.has(command.id)) {\n            throw new Error(`Command ${command.id} already exist`);\n        }\n        this.commands.add(command.id);\n        this.proxy.$registerCommand(command);\n\n        const toDispose: Disposable[] = [];\n        if (handler) {\n            toDispose.push(this.registerHandler(command.id, handler, thisArg));\n        }\n        toDispose.push(Disposable.create(() => {\n            this.commands.delete(command.id);\n            this.proxy.$unregisterCommand(command.id);\n        }));\n        return Disposable.from(...toDispose);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    registerHandler(commandId: string, handler: Handler, thisArg?: any): Disposable {\n        if (this.handlers.has(commandId)) {\n            throw new Error(`Command \"${commandId}\" already has handler`);\n        }\n        this.proxy.$registerHandler(commandId);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.handlers.set(commandId, (...args: any[]) => handler.apply(thisArg, args));\n        return Disposable.create(() => {\n            this.handlers.delete(commandId);\n            this.proxy.$unregisterHandler(commandId);\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else {\n            return Promise.reject(new Error(`Command: ${id} does not exist.`));\n        }\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    executeCommand<T>(id: string, ...args: any[]): PromiseLike<T | undefined> {\n        if (this.handlers.has(id)) {\n            return this.executeLocalCommand(id, ...args);\n        } else if (KnownCommands.mapped(id)) {\n            // Using the KnownCommand exclusions, convert the commands manually\n            return KnownCommands.map(id, args, (mappedId: string, mappedArgs: any[] | undefined, mappedResult: KnownCommands.ConversionFunction) => {\n                const mr: KnownCommands.ConversionFunction = mappedResult;\n                return this.proxy.$executeCommand(mappedId, ...mappedArgs || []).then((result: any) => {\n                    if (!result) {\n                        return undefined;\n                    }\n                    if (!mr) {\n                        return result;\n                    }\n                    return mr(result);\n                });\n            }\n            );\n        } else {\n            return this.proxy.$executeCommand(id, ...args);\n        }\n    }\n    /* eslint-enable @typescript-eslint/no-explicit-any */\n\n    getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n        return this.proxy.$getKeyBinding(commandId);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async executeLocalCommand<T>(id: string, ...args: any[]): Promise<T | undefined> {\n        const handler = this.handlers.get(id);\n        if (handler) {\n            return handler<T>(...args.map(arg => this.argumentProcessors.reduce((r, p) => p.processArgument(r), arg)));\n        } else {\n            throw new Error(`No handler exists for command '${id}'`);\n        }\n    }\n\n    async getCommands(filterUnderscoreCommands: boolean = false): Promise<string[]> {\n        const result = await this.proxy.$getCommands();\n        if (filterUnderscoreCommands) {\n            return result.filter(command => command[0] !== '_');\n        }\n        return result;\n    }\n\n    registerArgumentProcessor(processor: ArgumentProcessor): void {\n        this.argumentProcessors.push(processor);\n    }\n}\n\n// copied and modified from https://github.com/microsoft/vscode/blob/1.37.1/src/vs/workbench/api/common/extHostCommands.ts#L217-L259\nexport class CommandsConverter {\n\n    private readonly safeCommandId: string;\n    private readonly commands: CommandRegistryImpl;\n    private readonly commandsMap = new Map<number, theia.Command>();\n    private handle = 0;\n    private isSafeCommandRegistered: boolean;\n\n    constructor(commands: CommandRegistryImpl) {\n        this.safeCommandId = `theia_safe_cmd_${Date.now().toString()}`;\n        this.commands = commands;\n        this.isSafeCommandRegistered = false;\n    }\n\n    /**\n     * Convert to a command that can be safely passed over JSON-RPC.\n     */\n    toSafeCommand(command: undefined, disposables: DisposableCollection): undefined;\n    toSafeCommand(command: theia.Command, disposables: DisposableCollection): model.Command;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined;\n    toSafeCommand(command: theia.Command | undefined, disposables: DisposableCollection): model.Command | undefined {\n        if (!command) {\n            return undefined;\n        }\n\n        const result = this.toInternalCommand(command);\n        if (KnownCommands.mapped(result.id)) {\n            return result;\n        }\n\n        if (!this.isSafeCommandRegistered) {\n            this.commands.registerCommand({ id: this.safeCommandId }, this.executeSafeCommand, this);\n            this.isSafeCommandRegistered = true;\n        }\n\n        if (command.arguments && command.arguments.length > 0) {\n            const id = this.handle++;\n            this.commandsMap.set(id, command);\n            disposables.push(new Disposable(() => this.commandsMap.delete(id)));\n            result.id = this.safeCommandId;\n            result.arguments = [id];\n        }\n\n        return result;\n    }\n\n    protected toInternalCommand(external: theia.Command): model.Command {\n        // we're deprecating Command.id, so it has to be optional.\n        // Existing code will have compiled against a non - optional version of the field, so asserting it to exist is ok\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return KnownCommands.map(external.command, external.arguments, (mappedId: string, mappedArgs: any[]) =>\n        ({\n            id: mappedId,\n            title: external.title || ' ',\n            tooltip: external.tooltip,\n            arguments: mappedArgs\n        }));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private executeSafeCommand<R>(...args: any[]): PromiseLike<R | undefined> {\n        const command = this.commandsMap.get(args[0]);\n        if (!command || !command.command) {\n            return Promise.reject(`command ${args[0]} not found`);\n        }\n        return this.commands.executeCommand(command.command, ...(command.arguments || []));\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CommandRegistryImpl } from './command-registry';\nimport { UriComponents } from '../common/uri-components';\nimport { CommentThreadCollapsibleState, URI } from './types-impl';\nimport {\n    Range,\n    Comment,\n    CommentThreadCollapsibleState as CommentThreadCollapsibleStateModel,\n    CommentOptions\n} from '../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from './documents';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { fromMarkdown, fromRange, toRange } from './type-converters';\nimport {\n    CommentsCommandArg, CommentsContextCommandArg, CommentsEditCommandArg,\n    CommentsExt,\n    CommentsMain,\n    CommentThreadChanges,\n    Plugin as InternalPlugin,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.3/src/vs/workbench/api/common/extHostComments.ts\n\ntype ProviderHandle = number;\n\nexport class CommentsExtImpl implements CommentsExt {\n    private handle = 0;\n    private readonly proxy: CommentsMain;\n    private readonly commentControllers: Map<ProviderHandle, CommentController> = new Map<ProviderHandle, CommentController>();\n    private readonly commentControllersByExtension: Map<string, CommentController[]> = new Map<string, CommentController[]>();\n\n    constructor(readonly rpc: RPCProtocol, readonly commands: CommandRegistryImpl, readonly _documents: DocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.COMMENTS_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (CommentsCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    return {\n                        thread: commentThread,\n                        text: arg.text\n                    };\n                } else if (CommentsContextCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    return comment;\n                } else if (CommentsEditCommandArg.is(arg)) {\n                    const commentController = this.commentControllers.get(arg.commentControlHandle);\n\n                    if (!commentController) {\n                        return arg;\n                    }\n\n                    const commentThread = commentController.getCommentThread(arg.commentThreadHandle);\n\n                    if (!commentThread) {\n                        return arg;\n                    }\n\n                    const comment = commentThread.getCommentByUniqueId(arg.commentUniqueId);\n\n                    if (!comment) {\n                        return arg;\n                    }\n\n                    comment.body = arg.text;\n                    return comment;\n                }\n\n                return arg;\n            }\n        });\n    }\n\n    createCommentController(plugin: InternalPlugin, id: string, label: string): theia.CommentController {\n        const handle = this.handle++;\n        const commentController = new CommentController(plugin.model.id, this.proxy, handle, id, label);\n        this.commentControllers.set(commentController.handle, commentController);\n\n        const commentControllers = this.commentControllersByExtension.get(plugin.model.id.toLowerCase()) || [];\n        commentControllers.push(commentController);\n        this.commentControllersByExtension.set(plugin.model.id.toLowerCase(), commentControllers);\n\n        return commentController;\n    }\n\n    $createCommentThreadTemplate(commentControllerHandle: number, uriComponents: UriComponents, range: Range): void {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$createCommentThreadTemplate(uriComponents, range);\n    }\n\n    async $updateCommentThreadTemplate(commentControllerHandle: number, threadHandle: number, range: Range): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController) {\n            return;\n        }\n\n        commentController.$updateCommentThreadTemplate(threadHandle, range);\n    }\n\n    async $deleteCommentThread(commentControllerHandle: number, commentThreadHandle: number): Promise<void> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (commentController) {\n            commentController.$deleteCommentThread(commentThreadHandle);\n        }\n    }\n\n    async $provideCommentingRanges(commentControllerHandle: number, uriComponents: UriComponents, token: theia.CancellationToken): Promise<Range[] | undefined> {\n        const commentController = this.commentControllers.get(commentControllerHandle);\n\n        if (!commentController || !commentController.commentingRangeProvider) {\n            return Promise.resolve(undefined);\n        }\n\n        const documentData = this._documents.getDocumentData(URI.revive(uriComponents));\n        if (documentData) {\n            const ranges: theia.Range[] | undefined | null = await commentController.commentingRangeProvider!.provideCommentingRanges(documentData.document, token);\n            if (ranges) {\n                return ranges.map(x => fromRange(x));\n            }\n        }\n    }\n}\n\ntype CommentThreadModification = Partial<{\n    range: theia.Range,\n    label: string | undefined,\n    contextValue: string | undefined,\n    comments: theia.Comment[],\n    collapsibleState: theia.CommentThreadCollapsibleState\n    canReply: boolean;\n}>;\n\nexport class ExtHostCommentThread implements theia.CommentThread, theia.Disposable {\n    private static _handlePool: number = 0;\n    readonly handle = ExtHostCommentThread._handlePool++;\n    public commentHandle: number = 0;\n\n    private modifications: CommentThreadModification = Object.create(null);\n\n    set threadId(id: string) {\n        this._id = id;\n    }\n\n    get threadId(): string {\n        return this._id!;\n    }\n\n    get id(): string {\n        return this._id!;\n    }\n\n    get resource(): theia.Uri {\n        return this._uri;\n    }\n\n    get uri(): theia.Uri {\n        return this._uri;\n    }\n\n    private readonly _onDidUpdateCommentThread = new Emitter<void>();\n    readonly onDidUpdateCommentThread = this._onDidUpdateCommentThread.event;\n\n    set range(range: theia.Range) {\n        if (!range.isEqual(this._range)) {\n            this._range = range;\n            this.modifications.range = range;\n            this._onDidUpdateCommentThread.fire();\n        }\n    }\n\n    get range(): theia.Range {\n        return this._range;\n    }\n\n    private _label: string | undefined;\n\n    get label(): string | undefined {\n        return this._label;\n    }\n\n    set label(label: string | undefined) {\n        this._label = label;\n        this.modifications.label = label;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private _contextValue: string | undefined;\n\n    get contextValue(): string | undefined {\n        return this._contextValue;\n    }\n\n    set contextValue(context: string | undefined) {\n        this._contextValue = context;\n        this.modifications.contextValue = context;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    get comments(): theia.Comment[] {\n        return this._comments;\n    }\n\n    set comments(newComments: theia.Comment[]) {\n        this._comments = newComments;\n        this.modifications.comments = newComments;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private collapseState?: theia.CommentThreadCollapsibleState;\n\n    get collapsibleState(): theia.CommentThreadCollapsibleState {\n        return this.collapseState!;\n    }\n\n    set collapsibleState(newState: theia.CommentThreadCollapsibleState) {\n        this.collapseState = newState;\n        this.modifications.collapsibleState = newState;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private localDisposables: Disposable[];\n\n    private _isDisposed: boolean;\n\n    public get isDisposed(): boolean {\n        return this._isDisposed;\n    }\n\n    private _canReply: boolean = true;\n    get canReply(): boolean {\n        return this._canReply;\n    }\n\n    set canReply(canReply: boolean) {\n        this._canReply = canReply;\n        this.modifications.canReply = canReply;\n        this._onDidUpdateCommentThread.fire();\n    }\n\n    private commentsMap: Map<theia.Comment, number> = new Map<theia.Comment, number>();\n\n    private acceptInputDisposables = new DisposableCollection();\n\n    constructor(\n        private proxy: CommentsMain,\n        private commentController: CommentController,\n        private _id: string | undefined,\n        private _uri: theia.Uri,\n        private _range: theia.Range,\n        private _comments: theia.Comment[],\n        extensionId: string\n    ) {\n        if (this._id === undefined) {\n            this._id = `${commentController.id}.${this.handle}`;\n        }\n\n        this.proxy.$createCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id,\n            this._uri,\n            fromRange(this._range),\n            extensionId\n        );\n\n        this.localDisposables = [];\n        this._isDisposed = false;\n\n        this.localDisposables.push(this.onDidUpdateCommentThread(() => {\n            this.eventuallyUpdateCommentThread();\n        }));\n\n        // set up comments after ctor to batch update events.\n        this.comments = _comments;\n    }\n\n    eventuallyUpdateCommentThread(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        const modified = (value: keyof CommentThreadModification): boolean =>\n            Object.prototype.hasOwnProperty.call(this.modifications, value);\n\n        const formattedModifications: CommentThreadChanges = {};\n        if (modified('range')) {\n            formattedModifications.range = fromRange(this._range);\n        }\n        if (modified('label')) {\n            formattedModifications.label = this.label;\n        }\n        if (modified('contextValue')) {\n            formattedModifications.contextValue = this.contextValue;\n        }\n        if (modified('comments')) {\n            formattedModifications.comments =\n                this._comments.map(comment => convertToModeComment(this, this.commentController, comment, this.commentsMap));\n        }\n        if (modified('collapsibleState')) {\n            formattedModifications.collapseState = convertToCollapsibleState(this.collapseState);\n        }\n        if (modified('canReply')) {\n            formattedModifications.canReply = this.canReply;\n        }\n        this.modifications = {};\n\n        this.proxy.$updateCommentThread(\n            this.commentController.handle,\n            this.handle,\n            this._id!,\n            this._uri,\n            formattedModifications\n        );\n    }\n\n    getCommentByUniqueId(uniqueId: number): theia.Comment | undefined {\n        for (const key of this.commentsMap) {\n            const comment = key[0];\n            const id = key[1];\n            if (uniqueId === id) {\n                return comment;\n            }\n        }\n\n        return;\n    }\n\n    dispose(): void {\n        this._isDisposed = true;\n        this.acceptInputDisposables.dispose();\n        this.localDisposables.forEach(disposable => disposable.dispose());\n        this.proxy.$deleteCommentThread(\n            this.commentController.handle,\n            this.handle\n        );\n    }\n}\n\nclass CommentController implements theia.CommentController {\n\n    constructor(\n        private extension: string,\n        private proxy: CommentsMain,\n        private _handle: number,\n        private _id: string,\n        private _label: string\n    ) {\n        this.proxy.$registerCommentController(this.handle, _id, _label);\n    }\n\n    private readonly threads: Map<number, ExtHostCommentThread> = new Map<number, ExtHostCommentThread>();\n    readonly commentingRangeProvider?: theia.CommentingRangeProvider;\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get handle(): number {\n        return this._handle;\n    }\n\n    private _options: CommentOptions | undefined;\n\n    get options(): CommentOptions | undefined {\n        return this._options;\n    }\n\n    set options(options: CommentOptions | undefined) {\n        this._options = options;\n\n        this.proxy.$updateCommentControllerFeatures(this.handle, { options: this._options });\n    }\n\n    createCommentThread(resource: theia.Uri, range: theia.Range, comments: theia.Comment[]): theia.CommentThread;\n    createCommentThread(arg0: theia.Uri | string, arg1: theia.Uri | theia.Range, arg2: theia.Range | theia.Comment[], arg3?: theia.Comment[]): theia.CommentThread {\n        if (typeof arg0 === 'string') {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, arg0, arg1 as theia.Uri, arg2 as theia.Range, arg3 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        } else {\n            const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, arg0 as theia.Uri, arg1 as theia.Range, arg2 as theia.Comment[], this.extension);\n            this.threads.set(commentThread.handle, commentThread);\n            return commentThread;\n        }\n    }\n\n    $createCommentThreadTemplate(uriComponents: UriComponents, range: Range): ExtHostCommentThread {\n        const commentThread = new ExtHostCommentThread(this.proxy, this, undefined, URI.revive(uriComponents), toRange(range), [], this.extension);\n        commentThread.collapsibleState = CommentThreadCollapsibleStateModel.Expanded;\n        this.threads.set(commentThread.handle, commentThread);\n        return commentThread;\n    }\n\n    $updateCommentThreadTemplate(threadHandle: number, range: Range): void {\n        const thread = this.threads.get(threadHandle);\n        if (thread) {\n            thread.range = toRange(range);\n        }\n    }\n\n    $deleteCommentThread(threadHandle: number): void {\n        const thread = this.threads.get(threadHandle);\n\n        if (thread) {\n            thread.dispose();\n        }\n\n        this.threads.delete(threadHandle);\n    }\n\n    getCommentThread(handle: number): ExtHostCommentThread | undefined {\n        return this.threads.get(handle);\n    }\n\n    dispose(): void {\n        this.threads.forEach(value => {\n            value.dispose();\n        });\n\n        this.proxy.$unregisterCommentController(this.handle);\n    }\n}\n\nfunction convertToModeComment(thread: ExtHostCommentThread, commentController: CommentController, theiaComment: theia.Comment, commentsMap: Map<theia.Comment, number>): Comment {\n    let commentUniqueId = commentsMap.get(theiaComment)!;\n    if (!commentUniqueId) {\n        commentUniqueId = ++thread.commentHandle;\n        commentsMap.set(theiaComment, commentUniqueId);\n    }\n\n    const iconPath = theiaComment.author && theiaComment.author.iconPath ? theiaComment.author.iconPath.toString() : undefined;\n\n    return {\n        mode: theiaComment.mode,\n        contextValue: theiaComment.contextValue,\n        uniqueIdInThread: commentUniqueId,\n        body: fromMarkdown(theiaComment.body),\n        userName: theiaComment.author.name,\n        userIconPath: iconPath,\n        label: theiaComment.label,\n    };\n}\n\nfunction convertToCollapsibleState(kind: theia.CommentThreadCollapsibleState | undefined): CommentThreadCollapsibleStateModel {\n    if (kind !== undefined) {\n        switch (kind) {\n            case CommentThreadCollapsibleState.Expanded:\n                return CommentThreadCollapsibleStateModel.Expanded;\n            case CommentThreadCollapsibleState.Collapsed:\n                return CommentThreadCollapsibleStateModel.Collapsed;\n        }\n    }\n    return CommentThreadCollapsibleStateModel.Collapsed;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 SAP SE or an SAP affiliate company and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/extHostCustomEditors.ts\n\nimport { CustomEditorsExt, CustomEditorsMain, Plugin, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { DocumentsExtImpl } from './documents';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { WorkspaceExtImpl } from './workspace';\n\nexport class CustomEditorsExtImpl implements CustomEditorsExt {\n    private readonly proxy: CustomEditorsMain;\n    private readonly editorProviders = new EditorProviderStore();\n    private readonly documents = new CustomDocumentStore();\n\n    constructor(rpc: RPCProtocol,\n        private readonly documentExt: DocumentsExtImpl,\n        private readonly webviewExt: WebviewsExtImpl,\n        private readonly workspace: WorkspaceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.CUSTOM_EDITORS_MAIN);\n    }\n\n    registerCustomEditorProvider(\n        viewType: string,\n        provider: theia.CustomReadonlyEditorProvider | theia.CustomTextEditorProvider,\n        options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean },\n        plugin: Plugin\n    ): theia.Disposable {\n        const disposables = new DisposableCollection();\n        if ('resolveCustomTextEditor' in provider) {\n            disposables.push(this.editorProviders.addTextProvider(viewType, plugin, provider));\n            this.proxy.$registerTextEditorProvider(viewType, options.webviewOptions || {}, {\n                supportsMove: !!provider.moveCustomTextEditor,\n            });\n        } else {\n            disposables.push(this.editorProviders.addCustomProvider(viewType, plugin, provider));\n\n            if (this.supportEditing(provider)) {\n                disposables.push(provider.onDidChangeCustomDocument(e => {\n                    const entry = this.getCustomDocumentEntry(viewType, e.document.uri);\n                    if (isEditEvent(e)) {\n                        const editId = entry.addEdit(e);\n                        this.proxy.$onDidEdit(e.document.uri, viewType, editId, e.label);\n                    } else {\n                        this.proxy.$onContentChange(e.document.uri, viewType);\n                    }\n                }));\n            }\n\n            this.proxy.$registerCustomEditorProvider(viewType, options.webviewOptions || {}, !!options.supportsMultipleEditorsPerDocument);\n        }\n\n        return Disposable.from(\n            disposables,\n            Disposable.create(() => {\n                this.proxy.$unregisterEditorProvider(viewType);\n            })\n        );\n    }\n\n    async $createCustomDocument(resource: UriComponents, viewType: string, openContext: theia.CustomDocumentOpenContext, cancellation: CancellationToken): Promise<{\n        editable: boolean;\n    }> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provide type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const document = await entry.provider.openCustomDocument(revivedResource, openContext, cancellation);\n        this.documents.add(viewType, document);\n\n        return { editable: this.supportEditing(entry.provider) };\n    }\n\n    async $disposeCustomDocument(resource: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (entry.type !== CustomEditorType.Custom) {\n            throw new Error(`Invalid provider type for '${viewType}'`);\n        }\n\n        const revivedResource = URI.revive(resource);\n        const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n        this.documents.delete(viewType, document);\n        document.dispose();\n    }\n\n    async $resolveWebviewEditor<T>(\n        resource: UriComponents,\n        handler: string,\n        viewType: string,\n        title: string,\n        widgetOpenerOptions: T | undefined,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n        const panel = this.webviewExt.createWebviewPanel(viewType, title, {}, options, entry.plugin, handler);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, entry.plugin);\n        await this.proxy.$createCustomEditorPanel(handler, title, widgetOpenerOptions, webviewOptions);\n\n        const revivedResource = URI.revive(resource);\n\n        switch (entry.type) {\n            case CustomEditorType.Custom: {\n                const { document } = this.getCustomDocumentEntry(viewType, revivedResource);\n                return entry.provider.resolveCustomEditor(document, panel, cancellation);\n            }\n            case CustomEditorType.Text: {\n                const document = this.documentExt.getDocument(revivedResource);\n                return entry.provider.resolveCustomTextEditor(document, panel, cancellation);\n            }\n            default: {\n                throw new Error('Unknown webview provider type');\n            }\n        }\n    }\n\n    getCustomDocumentEntry(viewType: string, resource: UriComponents): CustomDocumentStoreEntry {\n        const entry = this.documents.get(viewType, URI.revive(resource));\n        if (!entry) {\n            throw new Error('No custom document found');\n        }\n        return entry;\n    }\n\n    $disposeEdits(resourceComponents: UriComponents, viewType: string, editIds: number[]): void {\n        const document = this.getCustomDocumentEntry(viewType, resourceComponents);\n        document.disposeEdits(editIds);\n    }\n\n    async $onMoveCustomEditor(handle: string, newResourceComponents: UriComponents, viewType: string): Promise<void> {\n        const entry = this.editorProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No provider found for '${viewType}'`);\n        }\n\n        if (!(entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor) {\n            throw new Error(`Provider does not implement move '${viewType}'`);\n        }\n\n        const webview = this.webviewExt.getWebviewPanel(handle);\n        if (!webview) {\n            throw new Error('No webview found');\n        }\n\n        const resource = URI.revive(newResourceComponents);\n        const document = this.documentExt.getDocument(resource);\n        const cancellationSource = new CancellationTokenSource();\n        await (entry.provider as theia.CustomTextEditorProvider).moveCustomTextEditor!(document, webview, cancellationSource.token);\n    }\n\n    async $undo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.undo(editId, isDirty);\n    }\n\n    async $redo(resourceComponents: UriComponents, viewType: string, editId: number, isDirty: boolean): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        return entry.redo(editId, isDirty);\n    }\n\n    async $revert(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.revertCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSave(resourceComponents: UriComponents, viewType: string, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        await provider.saveCustomDocument(entry.document, cancellation);\n    }\n\n    async $onSaveAs(resourceComponents: UriComponents, viewType: string, targetResource: UriComponents, cancellation: CancellationToken): Promise<void> {\n        const entry = this.getCustomDocumentEntry(viewType, resourceComponents);\n        const provider = this.getCustomEditorProvider(viewType);\n        return provider.saveCustomDocumentAs(entry.document, URI.revive(targetResource), cancellation);\n    }\n\n    private getCustomEditorProvider(viewType: string): theia.CustomEditorProvider {\n        const entry = this.editorProviders.get(viewType);\n        const provider = entry?.provider;\n        if (!provider || !this.supportEditing(provider)) {\n            throw new Error('Custom document is not editable');\n        }\n        return provider;\n    }\n\n    private supportEditing(\n        provider: theia.CustomTextEditorProvider | theia.CustomEditorProvider | theia.CustomReadonlyEditorProvider\n    ): provider is theia.CustomEditorProvider {\n        return !!(provider as theia.CustomEditorProvider).onDidChangeCustomDocument;\n    }\n}\n\nfunction isEditEvent(e: theia.CustomDocumentContentChangeEvent | theia.CustomDocumentEditEvent): e is theia.CustomDocumentEditEvent {\n    return typeof (e as theia.CustomDocumentEditEvent).undo === 'function'\n        && typeof (e as theia.CustomDocumentEditEvent).redo === 'function';\n}\n\nclass CustomDocumentStoreEntry {\n    constructor(\n        readonly document: theia.CustomDocument,\n    ) { }\n\n    private readonly edits = new Cache<theia.CustomDocumentEditEvent>('custom documents');\n\n    addEdit(item: theia.CustomDocumentEditEvent): number {\n        return this.edits.add([item]);\n    }\n\n    async undo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).undo();\n    }\n\n    async redo(editId: number, isDirty: boolean): Promise<void> {\n        await this.getEdit(editId).redo();\n    }\n\n    disposeEdits(editIds: number[]): void {\n        for (const id of editIds) {\n            this.edits.delete(id);\n        }\n    }\n\n    private getEdit(editId: number): theia.CustomDocumentEditEvent {\n        const edit = this.edits.get(editId, 0);\n        if (!edit) {\n            throw new Error('No edit found');\n        }\n        return edit;\n    }\n}\n\nconst enum CustomEditorType {\n    Text,\n    Custom\n}\n\ntype ProviderEntry = {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Text;\n    readonly provider: theia.CustomTextEditorProvider;\n} | {\n    readonly plugin: Plugin;\n    readonly type: CustomEditorType.Custom;\n    readonly provider: theia.CustomReadonlyEditorProvider;\n};\n\nclass EditorProviderStore {\n    private readonly providers = new Map<string, ProviderEntry>();\n\n    addTextProvider(viewType: string, plugin: Plugin, provider: theia.CustomTextEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Text, viewType, plugin, provider);\n    }\n\n    addCustomProvider(viewType: string, plugin: Plugin, provider: theia.CustomReadonlyEditorProvider): theia.Disposable {\n        return this.add(CustomEditorType.Custom, viewType, plugin, provider);\n    }\n\n    get(viewType: string): ProviderEntry | undefined {\n        return this.providers.get(viewType);\n    }\n\n    private add(type: CustomEditorType, viewType: string,\n        plugin: Plugin, provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider): theia.Disposable {\n        if (this.providers.has(viewType)) {\n            throw new Error(`Provider for viewType:${viewType} already registered`);\n        }\n        this.providers.set(viewType, { type, plugin: plugin, provider } as ProviderEntry);\n        return new Disposable(() => this.providers.delete(viewType));\n    }\n}\n\nclass CustomDocumentStore {\n    private readonly documents = new Map<string, CustomDocumentStoreEntry>();\n\n    get(viewType: string, resource: theia.Uri): CustomDocumentStoreEntry | undefined {\n        return this.documents.get(this.key(viewType, resource));\n    }\n\n    add(viewType: string, document: theia.CustomDocument): CustomDocumentStoreEntry {\n        const key = this.key(viewType, document.uri);\n        if (this.documents.has(key)) {\n            throw new Error(`Document already exists for viewType:${viewType} resource:${document.uri}`);\n        }\n        const entry = new CustomDocumentStoreEntry(document);\n        this.documents.set(key, entry);\n        return entry;\n    }\n\n    delete(viewType: string, document: theia.CustomDocument): void {\n        const key = this.key(viewType, document.uri);\n        this.documents.delete(key);\n    }\n\n    private key(viewType: string, resource: theia.Uri): string {\n        return `${viewType}@@@${resource}`;\n    }\n}\n\n// copied from https://github.com/microsoft/vscode/blob/53eac52308c4611000a171cc7bf1214293473c78/src/vs/workbench/api/common/cache.ts\nclass Cache<T> {\n    private static readonly enableDebugLogging = false;\n    private readonly _data = new Map<number, readonly T[]>();\n    private _idPool = 1;\n\n    constructor(\n        private readonly id: string\n    ) { }\n\n    add(item: readonly T[]): number {\n        const id = this._idPool++;\n        this._data.set(id, item);\n        this.logDebugInfo();\n        return id;\n    }\n\n    get(pid: number, id: number): T | undefined {\n        return this._data.has(pid) ? this._data.get(pid)![id] : undefined;\n    }\n\n    delete(id: number): void {\n        this._data.delete(id);\n        this.logDebugInfo();\n    }\n\n    private logDebugInfo(): void {\n        if (!Cache.enableDebugLogging) {\n            return;\n        }\n        console.log(`${this.id} cache size  ${this._data.size}`);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Path } from '@theia/core/lib/common/path';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Breakpoint } from '../../common/plugin-api-rpc-model';\nimport { DebugConfigurationProviderTriggerKind, DebugExt, DebugMain, PLUGIN_RPC_CONTEXT as Ext, TerminalOptionsExt } from '../../common/plugin-api-rpc';\nimport { PluginPackageDebuggersContribution } from '../../common/plugin-protocol';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { ConnectionImpl } from '../../common/connection';\nimport { DEBUG_SCHEME, SCHEME_PATTERN } from '@theia/debug/lib/common/debug-uri-utils';\nimport { Disposable, Breakpoint as BreakpointExt, SourceBreakpoint, FunctionBreakpoint, Location, Range, URI as URIImpl } from '../types-impl';\nimport { PluginDebugAdapterSession } from './plugin-debug-adapter-session';\nimport { PluginDebugAdapterTracker } from './plugin-debug-adapter-tracker';\nimport uuid = require('uuid');\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { PluginDebugAdapterCreator } from './plugin-debug-adapter-creator';\nimport { NodeDebugAdapterCreator } from '../node/debug/plugin-node-debug-adapter-creator';\nimport { DebugProtocol } from '@vscode/debugprotocol';\n\ninterface ConfigurationProviderRecord {\n    handle: number;\n    type: string;\n    trigger: DebugConfigurationProviderTriggerKind,\n    provider: theia.DebugConfigurationProvider;\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nexport class DebugExtImpl implements DebugExt {\n    // debug sessions by sessionId\n    private sessions = new Map<string, PluginDebugAdapterSession>();\n    private configurationProviderHandleGenerator: number;\n    private configurationProviders: ConfigurationProviderRecord[];\n\n    /**\n     * Only use internally, don't send it to the frontend. It's expensive!\n     * It's already there as a part of the plugin metadata.\n     */\n    private debuggersContributions = new Map<string, PluginPackageDebuggersContribution>();\n    private descriptorFactories = new Map<string, theia.DebugAdapterDescriptorFactory>();\n    private trackerFactories: [string, theia.DebugAdapterTrackerFactory][] = [];\n    private contributionPaths = new Map<string, string>();\n    private contributionTypes = new Map<string, theia.PluginType>();\n\n    private connectionExt: ConnectionImpl;\n    private commandRegistryExt: CommandRegistryImpl;\n\n    private proxy: DebugMain;\n\n    private readonly onDidChangeBreakpointsEmitter = new Emitter<theia.BreakpointsChangeEvent>();\n    private readonly onDidChangeActiveDebugSessionEmitter = new Emitter<theia.DebugSession | undefined>();\n    private readonly onDidTerminateDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidStartDebugSessionEmitter = new Emitter<theia.DebugSession>();\n    private readonly onDidReceiveDebugSessionCustomEmitter = new Emitter<theia.DebugSessionCustomEvent>();\n\n    activeDebugSession: theia.DebugSession | undefined;\n    activeDebugConsole: theia.DebugConsole;\n\n    private readonly _breakpoints = new Map<string, theia.Breakpoint>();\n\n    private frontendAdapterCreator = new PluginDebugAdapterCreator();\n    private backendAdapterCreator = new NodeDebugAdapterCreator();\n\n    get breakpoints(): theia.Breakpoint[] {\n        return [...this._breakpoints.values()];\n    }\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DEBUG_MAIN);\n        this.activeDebugConsole = {\n            append: (value: string) => this.proxy.$appendToDebugConsole(value),\n            appendLine: (value: string) => this.proxy.$appendLineToDebugConsole(value)\n        };\n        this.configurationProviderHandleGenerator = 0;\n        this.configurationProviders = [];\n    }\n\n    /**\n     * Sets dependencies.\n     */\n    assistedInject(connectionExt: ConnectionImpl, commandRegistryExt: CommandRegistryImpl): void {\n        this.connectionExt = connectionExt;\n        this.commandRegistryExt = commandRegistryExt;\n    }\n\n    /**\n     * Registers contributions.\n     * @param pluginFolder plugin folder path\n     * @param pluginType plugin type\n     * @param contributions available debuggers contributions\n     */\n    registerDebuggersContributions(pluginFolder: string, pluginType: theia.PluginType, contributions: PluginPackageDebuggersContribution[]): void {\n        contributions.forEach(contribution => {\n            this.contributionPaths.set(contribution.type, pluginFolder);\n            this.contributionTypes.set(contribution.type, pluginType);\n            this.debuggersContributions.set(contribution.type, contribution);\n            this.proxy.$registerDebuggerContribution({\n                type: contribution.type,\n                label: contribution.label || contribution.type\n            });\n            console.log(`Debugger contribution has been registered: ${contribution.type}`);\n        });\n    }\n\n    get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n        return this.onDidReceiveDebugSessionCustomEmitter.event;\n    }\n\n    get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n        return this.onDidChangeActiveDebugSessionEmitter.event;\n    }\n\n    get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidTerminateDebugSessionEmitter.event;\n    }\n\n    get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n        return this.onDidStartDebugSessionEmitter.event;\n    }\n\n    get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n        return this.onDidChangeBreakpointsEmitter.event;\n    }\n\n    addBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n        const added: theia.Breakpoint[] = [];\n        for (const b of breakpoints) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.set(b.id, b);\n            added.push(b);\n        }\n        if (added.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added, removed: [], changed: [] });\n            this.proxy.$addBreakpoints(added);\n        }\n    }\n\n    removeBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n        const removed: theia.Breakpoint[] = [];\n        const removedIds: string[] = [];\n        for (const b of breakpoints) {\n            if (!this._breakpoints.has(b.id)) {\n                continue;\n            }\n            this._breakpoints.delete(b.id);\n            removed.push(b);\n            removedIds.push(b.id);\n        }\n        if (removed.length) {\n            this.onDidChangeBreakpointsEmitter.fire({ added: [], removed, changed: [] });\n            this.proxy.$removeBreakpoints(removedIds);\n        }\n    }\n\n    startDebugging(folder: theia.WorkspaceFolder | undefined, nameOrConfiguration: string | theia.DebugConfiguration, options: theia.DebugSessionOptions): PromiseLike<boolean> {\n        return this.proxy.$startDebugging(folder, nameOrConfiguration, options);\n    }\n\n    stopDebugging(session?: theia.DebugSession): PromiseLike<void> {\n        return this.proxy.$stopDebugging(session?.id);\n    }\n\n    asDebugSourceUri(source: theia.DebugProtocolSource, session?: theia.DebugSession): theia.Uri {\n        return this.getDebugSourceUri(source, session?.id);\n    }\n\n    private getDebugSourceUri(raw: DebugProtocol.Source, sessionId?: string): theia.Uri {\n        if (raw.sourceReference && raw.sourceReference > 0) {\n            let query = 'ref=' + String(raw.sourceReference);\n            if (sessionId) {\n                query += `&session=${sessionId}`;\n            }\n            return URIImpl.from({ scheme: DEBUG_SCHEME, path: raw.path ?? '', query });\n        }\n        if (!raw.path) {\n            throw new Error('Unrecognized source type: ' + JSON.stringify(raw));\n        }\n        if (raw.path.match(SCHEME_PATTERN)) {\n            return URIImpl.parse(raw.path);\n        }\n        return URIImpl.file(raw.path);\n    }\n\n    registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n        if (this.descriptorFactories.has(debugType)) {\n            throw new Error(`Descriptor factory for ${debugType} has been already registered`);\n        }\n        this.descriptorFactories.set(debugType, factory);\n        return Disposable.create(() => this.descriptorFactories.delete(debugType));\n    }\n\n    registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n        if (!factory) {\n            return Disposable.create(() => { });\n        }\n\n        this.trackerFactories.push([debugType, factory]);\n        return Disposable.create(() => {\n            this.trackerFactories = this.trackerFactories.filter(tuple => tuple[1] !== factory);\n        });\n    }\n\n    registerDebugConfigurationProvider(debugType: string, provider: theia.DebugConfigurationProvider, trigger: DebugConfigurationProviderTriggerKind): Disposable {\n        console.log(`Debug configuration provider has been registered: ${debugType}, trigger: ${trigger}`);\n\n        const handle = this.configurationProviderHandleGenerator++;\n        this.configurationProviders.push({ handle, type: debugType, trigger, provider });\n        const descriptor = {\n            handle,\n            type: debugType,\n            trigger,\n            provideDebugConfiguration: !!provider.provideDebugConfigurations,\n            resolveDebugConfigurations: !!provider.resolveDebugConfiguration,\n            resolveDebugConfigurationWithSubstitutedVariables: !!provider.resolveDebugConfigurationWithSubstitutedVariables\n        };\n        this.proxy.$registerDebugConfigurationProvider(descriptor);\n        return Disposable.create(() => {\n            this.configurationProviders = this.configurationProviders.filter(p => (p.handle !== handle));\n            this.proxy.$unregisterDebugConfigurationProvider(handle);\n        });\n    }\n\n    async $onSessionCustomEvent(sessionId: string, event: string, body?: any): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidReceiveDebugSessionCustomEmitter.fire({ event, body, session });\n        }\n    }\n\n    async $sessionDidCreate(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidStartDebugSessionEmitter.fire(session);\n        }\n    }\n\n    async $sessionDidDestroy(sessionId: string): Promise<void> {\n        const session = this.sessions.get(sessionId);\n        if (session) {\n            this.onDidTerminateDebugSessionEmitter.fire(session);\n            this.sessions.delete(sessionId);\n        }\n    }\n\n    async $sessionDidChange(sessionId: string | undefined): Promise<void> {\n        this.activeDebugSession = sessionId ? this.sessions.get(sessionId) : undefined;\n        this.onDidChangeActiveDebugSessionEmitter.fire(this.activeDebugSession);\n    }\n\n    async $breakpointsDidChange(added: Breakpoint[], removed: string[], changed: Breakpoint[]): Promise<void> {\n        const a: theia.Breakpoint[] = [];\n        const r: theia.Breakpoint[] = [];\n        const c: theia.Breakpoint[] = [];\n        for (const b of added) {\n            if (this._breakpoints.has(b.id)) {\n                continue;\n            }\n            const bExt = this.toBreakpointExt(b);\n            if (bExt) {\n                this._breakpoints.set(bExt.id, bExt);\n                a.push(bExt);\n            }\n        }\n        for (const id of removed) {\n            const bExt = this._breakpoints.get(id);\n            if (bExt) {\n                this._breakpoints.delete(id);\n                r.push(bExt);\n            }\n        }\n        for (const b of changed) {\n            const bExt = this._breakpoints.get(b.id);\n            if (bExt) {\n                const { functionName, location, enabled, condition, hitCondition, logMessage } = b;\n                if (bExt instanceof FunctionBreakpoint && functionName) {\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, functionName });\n                } else if (bExt instanceof SourceBreakpoint && location) {\n                    const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n                    Object.assign(bExt, { enabled, condition, hitCondition, logMessage, location: new Location(URI.revive(location.uri), range) });\n                }\n                c.push(bExt);\n            }\n        }\n        this.onDidChangeBreakpointsEmitter.fire({ added: a, removed: r, changed: c });\n    }\n\n    protected toBreakpointExt({ functionName, location, enabled, condition, hitCondition, logMessage, id }: Breakpoint): BreakpointExt | undefined {\n        if (location) {\n            const range = new Range(location.range.startLineNumber, location.range.startColumn, location.range.endLineNumber, location.range.endColumn);\n            return new SourceBreakpoint(new Location(URI.revive(location.uri), range), enabled, condition, hitCondition, logMessage, id);\n        }\n        if (functionName) {\n            return new FunctionBreakpoint(functionName!, enabled, condition, hitCondition, logMessage, id);\n        }\n        return undefined;\n    }\n\n    async $createDebugSession(debugConfiguration: theia.DebugConfiguration, workspaceFolderUri: string | undefined): Promise<string> {\n        const sessionId = uuid.v4();\n\n        const theiaSession: theia.DebugSession = {\n            id: sessionId,\n            type: debugConfiguration.type,\n            name: debugConfiguration.name,\n            workspaceFolder: this.toWorkspaceFolder(workspaceFolderUri),\n            configuration: debugConfiguration,\n            customRequest: async (command: string, args?: any) => {\n                const response = await this.proxy.$customRequest(sessionId, command, args);\n                if (response && response.success) {\n                    return response.body;\n                }\n                return Promise.reject(new Error(response.message ?? 'custom request failed'));\n            },\n            getDebugProtocolBreakpoint: async (breakpoint: Breakpoint) =>\n                this.proxy.$getDebugProtocolBreakpoint(sessionId, breakpoint.id)\n        };\n\n        const tracker = await this.createDebugAdapterTracker(theiaSession);\n        const communicationProvider = await this.createDebugAdapter(theiaSession, debugConfiguration);\n\n        const debugAdapterSession = new PluginDebugAdapterSession(communicationProvider, tracker, theiaSession);\n        this.sessions.set(sessionId, debugAdapterSession);\n\n        const connection = await this.connectionExt!.ensureConnection(sessionId);\n        debugAdapterSession.start(connection);\n\n        return sessionId;\n    }\n\n    async $terminateDebugSession(sessionId: string): Promise<void> {\n        const debugAdapterSession = this.sessions.get(sessionId);\n        if (debugAdapterSession) {\n            await debugAdapterSession.stop();\n        }\n    }\n\n    async $getTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return this.doGetTerminalCreationOptions(debugType);\n    }\n\n    async doGetTerminalCreationOptions(debugType: string): Promise<TerminalOptionsExt | undefined> {\n        return undefined;\n    }\n\n    private getConfigurationProviderRecord(handle: number): {\n        provider: theia.DebugConfigurationProvider\n        type: string\n    } {\n        const record = this.configurationProviders.find(p => p.handle === handle);\n        if (!record) {\n            throw new Error('No Debug configuration provider found with given handle number: ' + handle);\n        }\n        const { provider, type } = record;\n        return { provider, type };\n    }\n\n    async $provideDebugConfigurationsByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined\n    ): Promise<theia.DebugConfiguration[]> {\n        const { provider, type } = this.getConfigurationProviderRecord(handle);\n\n        const configurations = await provider.provideDebugConfigurations?.(\n            this.toWorkspaceFolder(workspaceFolderUri)\n        );\n\n        if (!configurations) {\n            throw new Error(\n                'nothing returned from DebugConfigurationProvider.provideDebugConfigurations, type: ' + type\n            );\n        }\n\n        return configurations;\n    }\n\n    async $resolveDebugConfigurationByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null> {\n        const { provider } = this.getConfigurationProviderRecord(handle);\n        return provider.resolveDebugConfiguration?.(\n            this.toWorkspaceFolder(workspaceFolderUri),\n            debugConfiguration\n        );\n    }\n\n    async $resolveDebugConfigurationWithSubstitutedVariablesByHandle(\n        handle: number,\n        workspaceFolderUri: string | undefined,\n        debugConfiguration: theia.DebugConfiguration\n    ): Promise<theia.DebugConfiguration | undefined | null> {\n        const { provider } = this.getConfigurationProviderRecord(handle);\n        return provider.resolveDebugConfigurationWithSubstitutedVariables?.(\n            this.toWorkspaceFolder(workspaceFolderUri),\n            debugConfiguration\n        );\n    }\n\n    protected async createDebugAdapterTracker(session: theia.DebugSession): Promise<theia.DebugAdapterTracker> {\n        return PluginDebugAdapterTracker.create(session, this.trackerFactories);\n    }\n\n    protected async createDebugAdapter(session: theia.DebugSession, debugConfiguration: theia.DebugConfiguration): Promise<DebugAdapter> {\n        const executable = await this.resolveDebugAdapterExecutable(debugConfiguration);\n        const descriptorFactory = this.descriptorFactories.get(session.type);\n        return this.getAdapterCreator(debugConfiguration).createDebugAdapter(session, debugConfiguration, executable, descriptorFactory);\n    }\n\n    protected async resolveDebugAdapterExecutable(debugConfiguration: theia.DebugConfiguration): Promise<theia.DebugAdapterExecutable | undefined> {\n        const { type } = debugConfiguration;\n        const contribution = this.debuggersContributions.get(type);\n        if (contribution) {\n            if (contribution.adapterExecutableCommand) {\n                const executable = await this.commandRegistryExt.executeCommand<theia.DebugAdapterExecutable>(contribution.adapterExecutableCommand);\n                if (executable) {\n                    return executable;\n                }\n            } else {\n                const contributionPath = this.contributionPaths.get(type);\n                if (contributionPath) {\n                    return this.getAdapterCreator(debugConfiguration).resolveDebugAdapterExecutable(contributionPath, contribution);\n                }\n            }\n        }\n\n        throw new Error(`It is not possible to provide debug adapter executable for '${debugConfiguration.type}'.`);\n    }\n\n    private toWorkspaceFolder(folder: string | undefined): theia.WorkspaceFolder | undefined {\n        if (!folder) {\n            return undefined;\n        }\n\n        const uri = URI.parse(folder);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: 0\n        };\n    }\n\n    private getAdapterCreator(debugConfiguration: theia.DebugConfiguration): PluginDebugAdapterCreator {\n        const pluginType = this.contributionTypes.get(debugConfiguration.type);\n        return pluginType === 'frontend' ? this.frontendAdapterCreator : this.backendAdapterCreator;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { PluginPackageDebuggersContribution } from '../../common';\nimport { DebugAdapterInlineImplementation } from '../types-impl';\nimport { InlineDebugAdapter } from '@theia/debug/lib/common/inline-debug-adapter';\n\nexport class PluginDebugAdapterCreator {\n    public async resolveDebugAdapterExecutable(_pluginPath: string, _debuggerContribution: PluginPackageDebuggersContribution): Promise<theia.DebugAdapterExecutable | undefined> {\n        // Node is required to run the default executable\n        return undefined;\n    }\n\n    public async createDebugAdapter(\n        session: theia.DebugSession,\n        _debugConfiguration: theia.DebugConfiguration,\n        executable: theia.DebugAdapterExecutable | undefined,\n        descriptorFactory: theia.DebugAdapterDescriptorFactory | undefined\n    ): Promise<DebugAdapter> {\n        if (descriptorFactory) {\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return this.connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        throw new Error('It is not possible to provide debug adapter executable.');\n    }\n\n    public connectInlineDebugAdapter(adapter: DebugAdapterInlineImplementation): InlineDebugAdapter {\n        return new InlineDebugAdapter(adapter.implementation);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { DebugAdapterSessionImpl } from '@theia/debug/lib/common/debug-adapter-session';\nimport * as theia from '@theia/plugin';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { DebugChannel } from '@theia/debug/lib/common/debug-service';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\n/**\n * Server debug adapter session.\n */\nexport class PluginDebugAdapterSession extends DebugAdapterSessionImpl {\n    readonly type: string;\n    readonly name: string;\n    readonly workspaceFolder: theia.WorkspaceFolder | undefined;\n    readonly configuration: theia.DebugConfiguration;\n\n    constructor(\n        override readonly debugAdapter: DebugAdapter,\n        protected readonly tracker: theia.DebugAdapterTracker,\n        protected readonly theiaSession: theia.DebugSession) {\n\n        super(theiaSession.id, debugAdapter);\n\n        this.type = theiaSession.type;\n        this.name = theiaSession.name;\n        this.workspaceFolder = theiaSession.workspaceFolder;\n        this.configuration = theiaSession.configuration;\n    }\n\n    override async start(channel: DebugChannel): Promise<void> {\n        if (this.tracker.onWillStartSession) {\n            this.tracker.onWillStartSession();\n        }\n        await super.start(channel);\n    }\n\n    override async stop(): Promise<void> {\n        if (this.tracker.onWillStopSession) {\n            this.tracker.onWillStopSession();\n        }\n        await super.stop();\n    }\n\n    async customRequest(command: string, args?: any): Promise<any> {\n        return this.theiaSession.customRequest(command, args);\n    }\n\n    async getDebugProtocolBreakpoint(breakpoint: theia.Breakpoint): Promise<theia.DebugProtocolBreakpoint | undefined> {\n        return this.theiaSession.getDebugProtocolBreakpoint(breakpoint);\n    }\n\n    protected override onDebugAdapterError(error: Error): void {\n        if (this.tracker.onError) {\n            this.tracker.onError(error);\n        }\n        super.onDebugAdapterError(error);\n    }\n\n    protected override send(message: string): void {\n        try {\n            super.send(message);\n        } finally {\n            if (this.tracker.onDidSendMessage) {\n                this.tracker.onDidSendMessage(JSON.parse(message));\n            }\n        }\n    }\n\n    protected override write(message: string): void {\n        if (this.tracker.onWillReceiveMessage) {\n            this.tracker.onWillReceiveMessage(JSON.parse(message));\n        }\n        super.write(message);\n    }\n\n    protected override onDebugAdapterExit(): void {\n        if (this.tracker.onExit) {\n            this.tracker.onExit(undefined, undefined);\n        }\n        super.onDebugAdapterExit();\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport * as theia from '@theia/plugin';\n\nexport class PluginDebugAdapterTracker implements theia.DebugAdapterTracker {\n    constructor(protected readonly trackers: theia.DebugAdapterTracker[]) { }\n\n    static async create(session: theia.DebugSession, trackerFactories: [string, theia.DebugAdapterTrackerFactory][]): Promise<PluginDebugAdapterTracker> {\n        const trackers: theia.DebugAdapterTracker[] = [];\n\n        const factories = trackerFactories.filter(tuple => tuple[0] === '*' || tuple[0] === session.type).map(tuple => tuple[1]);\n        for (const factory of factories) {\n            const tracker = await factory.createDebugAdapterTracker(session);\n            if (tracker) {\n                trackers.push(tracker);\n            }\n        }\n\n        return new PluginDebugAdapterTracker(trackers);\n    }\n\n    onWillStartSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStartSession) {\n                tracker.onWillStartSession();\n            }\n        });\n    }\n\n    onWillReceiveMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillReceiveMessage) {\n                tracker.onWillReceiveMessage(message);\n            }\n        });\n    }\n\n    onDidSendMessage(message: any): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onDidSendMessage) {\n                tracker.onDidSendMessage(message);\n            }\n        });\n    }\n\n    onWillStopSession(): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onWillStopSession) {\n                tracker.onWillStopSession();\n            }\n        });\n    }\n\n    onError(error: Error): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onError) {\n                tracker.onError(error);\n            }\n        });\n    }\n\n    onExit(code: number | undefined, signal: string | undefined): void {\n        this.trackers.forEach(tracker => {\n            if (tracker.onExit) {\n                tracker.onExit(code, signal);\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport {\n    DecorationData,\n    DecorationReply,\n    DecorationRequest,\n    DecorationsExt,\n    DecorationsMain,\n    PLUGIN_RPC_CONTEXT, PluginInfo\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, FileDecoration, URI } from './types-impl';\nimport { CancellationToken } from '@theia/core/lib/common';\nimport { dirname } from 'path';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostDecorations.ts#L39-L38\n\ninterface ProviderData {\n    provider: theia.FileDecorationProvider;\n    pluginInfo: PluginInfo;\n}\n\nexport class DecorationsExtImpl implements DecorationsExt {\n    private static handle = 0;\n    private static maxEventSize = 250;\n\n    private readonly providersMap: Map<number, ProviderData>;\n    private readonly proxy: DecorationsMain;\n\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DECORATIONS_MAIN);\n        this.providersMap = new Map();\n    }\n\n    registerFileDecorationProvider(provider: theia.FileDecorationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = DecorationsExtImpl.handle++;\n        this.providersMap.set(handle, { provider, pluginInfo });\n        this.proxy.$registerDecorationProvider(handle);\n\n        const listener = provider.onDidChangeFileDecorations && provider.onDidChangeFileDecorations(e => {\n            if (!e) {\n                this.proxy.$onDidChange(handle, null);\n                return;\n            }\n            const array = Array.isArray(e) ? e : [e];\n            if (array.length <= DecorationsExtImpl.maxEventSize) {\n                this.proxy.$onDidChange(handle, array);\n                return;\n            }\n\n            // too many resources per event. pick one resource per folder, starting\n            // with parent folders\n            const mapped = array.map(uri => ({ uri, rank: (uri.path.match(/\\//g) || []).length }));\n            const groups = groupBy(mapped, (a, b) => a.rank - b.rank);\n            const picked: URI[] = [];\n            outer: for (const uris of groups) {\n                let lastDirname: string | undefined;\n                for (const obj of uris) {\n                    const myDirname = dirname(obj.uri.path);\n                    if (lastDirname !== myDirname) {\n                        lastDirname = myDirname;\n                        if (picked.push(obj.uri) >= DecorationsExtImpl.maxEventSize) {\n                            break outer;\n                        }\n                    }\n                }\n            }\n            this.proxy.$onDidChange(handle, picked);\n        });\n\n        return new Disposable(() => {\n            listener?.dispose();\n            this.proxy.$unregisterDecorationProvider(handle);\n            this.providersMap.delete(handle);\n        });\n\n        function groupBy<T>(data: ReadonlyArray<T>, compareFn: (a: T, b: T) => number): T[][] {\n            const result: T[][] = [];\n            let currentGroup: T[] | undefined = undefined;\n            for (const element of data.slice(0).sort(compareFn)) {\n                if (!currentGroup || compareFn(currentGroup[0], element) !== 0) {\n                    currentGroup = [element];\n                    result.push(currentGroup);\n                } else {\n                    currentGroup.push(element);\n                }\n            }\n            return result;\n        }\n    }\n\n    async $provideDecorations(handle: number, requests: DecorationRequest[], token: CancellationToken): Promise<DecorationReply> {\n        if (!this.providersMap.has(handle)) {\n            // might have been unregistered in the meantime\n            return Object.create(null);\n        }\n\n        const result: DecorationReply = Object.create(null);\n        const { provider, pluginInfo } = this.providersMap.get(handle)!;\n\n        await Promise.all(requests.map(async request => {\n            try {\n                const { uri, id } = request;\n                const data = await Promise.resolve(provider.provideFileDecoration(URI.revive(uri), token));\n                if (!data) {\n                    return;\n                }\n                try {\n                    FileDecoration.validate(data);\n                    result[id] = <DecorationData>[data.propagate, data.tooltip, data.badge, data.color];\n                } catch (e) {\n                    console.warn(`INVALID decoration from extension '${pluginInfo.name}': ${e}`);\n                }\n            } catch (err) {\n                console.error(err);\n            }\n        }));\n\n        return result;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { PLUGIN_RPC_CONTEXT as Ext, OpenDialogOptionsMain, DialogsMain, SaveDialogOptionsMain, UploadDialogOptionsMain } from '../common/plugin-api-rpc';\nimport { OpenDialogOptions, SaveDialogOptions, UploadDialogOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\n\nexport class DialogsExtImpl {\n    private proxy: DialogsMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.DIALOGS_MAIN);\n    }\n\n    showOpenDialog(options: OpenDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            title: options.title,\n            openLabel: options.openLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            canSelectFiles: options.canSelectFiles ? options.canSelectFiles : true,\n            canSelectFolders: options.canSelectFolders ? options.canSelectFolders : false,\n            canSelectMany: options.canSelectMany,\n            filters: options.filters\n        } as OpenDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showOpenDialog(optionsMain).then(result => {\n                if (result) {\n                    const uris = [];\n                    for (let i = 0; i < result.length; i++) {\n                        const uri = URI.parse('file://' + result[i]);\n                        uris.push(uri);\n                    }\n                    resolve(uris);\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showSaveDialog(options: SaveDialogOptions): PromiseLike<URI | undefined> {\n        const optionsMain = {\n            title: options.title,\n            saveLabel: options.saveLabel,\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined,\n            filters: options.filters\n        } as SaveDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showSaveDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(URI.parse('file://' + result));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n    showUploadDialog(options: UploadDialogOptions): PromiseLike<URI[] | undefined> {\n        const optionsMain = {\n            defaultUri: options.defaultUri ? options.defaultUri.path : undefined\n        } as UploadDialogOptionsMain;\n\n        return new Promise((resolve, reject) => {\n            this.proxy.$showUploadDialog(optionsMain).then(result => {\n                if (result) {\n                    resolve(result.map(uri => URI.parse(uri)));\n                } else {\n                    resolve(undefined);\n                }\n            }).catch(reason => {\n                reject(reason);\n            });\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { ModelChangedEvent, DocumentsMain } from '../common/plugin-api-rpc';\nimport { Range as ARange } from '../common/plugin-api-rpc-model';\nimport { EndOfLine, Position, Range, URI } from './types-impl';\nimport { ok } from '../common/assert';\nimport { PrefixSumComputer } from './prefix-sum-computer';\nimport { getWordAtText, ensureValidWordDefinition } from './word-helper';\n\nconst _modeId2WordDefinition = new Map<string, RegExp | null>();\nexport function setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n    _modeId2WordDefinition.set(modeId, wordDefinition);\n}\nexport function getWordDefinitionFor(modeId: string): RegExp {\n    return _modeId2WordDefinition.get(modeId)!;\n}\n\nexport class DocumentDataExt {\n\n    private disposed = false;\n    private dirty: boolean;\n    private _document: theia.TextDocument;\n    private textLines = new Array<theia.TextLine>();\n    private lineStarts: PrefixSumComputer | undefined;\n\n    constructor(private proxy: DocumentsMain, private uri: URI, private lines: string[], private eol: string,\n        private languageId: string, private versionId: number, isDirty: boolean) {\n        this.dirty = isDirty;\n    }\n\n    dispose(): void {\n        ok(!this.disposed);\n        this.dirty = false;\n        this.disposed = true;\n    }\n\n    onEvents(e: ModelChangedEvent): void {\n        if (e.eol && e.eol !== this.eol) {\n            this.eol = e.eol;\n            this.lineStarts = undefined;\n        }\n\n        // Update my lines\n        const changes = e.changes;\n        // tslint:disable-next-line:one-variable-per-declaration\n        for (let i = 0, len = changes.length; i < len; i++) {\n            const change = changes[i];\n            this.acceptDeleteRange(change.range);\n            this.acceptInsertText(new Position(change.range.startLineNumber, change.range.startColumn), change.text);\n        }\n\n        this.versionId = e.versionId;\n    }\n    acceptIsDirty(isDirty: boolean): void {\n        ok(!this.disposed);\n        this.dirty = isDirty;\n    }\n    acceptLanguageId(langId: string): void {\n        ok(!this.disposed);\n        this.languageId = langId;\n    }\n    get document(): theia.TextDocument {\n        if (!this._document) {\n            const that = this;\n            this._document = {\n                get uri(): theia.Uri { return that.uri; },\n                get fileName(): string { return that.uri.fsPath; },\n                get isUntitled(): boolean { return that.uri.scheme === 'untitled'; },\n                get languageId(): string { return that.languageId; },\n                get version(): number { return that.versionId; },\n                get isClosed(): boolean { return that.disposed; },\n                get isDirty(): boolean { return that.dirty; },\n                save(): Promise<boolean> { return that.save(); },\n                getText(range?): string { return range ? that.getTextInRange(range) : that.getText(); },\n                get eol(): theia.EndOfLine { return that.eol === '\\n' ? EndOfLine.LF : EndOfLine.CRLF; },\n                get lineCount(): number { return that.lines.length; },\n                lineAt(lineOrPos: number | theia.Position): theia.TextLine { return that.lineAt(lineOrPos); },\n                offsetAt(pos): number { return that.offsetAt(pos); },\n                positionAt(offset): theia.Position { return that.positionAt(offset); },\n                validateRange(ran): theia.Range { return that.validateRange(ran); },\n                validatePosition(pos): theia.Position { return that.validatePosition(pos); },\n                getWordRangeAtPosition(pos, regexp?): theia.Range | undefined { return that.getWordRangeAtPosition(pos, regexp); }\n            };\n        }\n        return Object.freeze(this._document);\n    }\n\n    private acceptInsertText(position: Position, insertText: string): void {\n        if (insertText.length === 0) {\n            // Nothing to insert\n            return;\n        }\n        const insertLines = insertText.split(/\\r\\n|\\r|\\n/);\n        if (insertLines.length === 1) {\n            // Inserting text on one line\n            this.setLineText(position.line - 1,\n                this.lines[position.line - 1].substring(0, position.character - 1)\n                + insertLines[0]\n                + this.lines[position.line - 1].substring(position.character - 1)\n            );\n            return;\n        }\n\n        // Append overflowing text from first line to the end of text to insert\n        insertLines[insertLines.length - 1] += this.lines[position.line - 1].substring(position.character - 1);\n\n        // Delete overflowing text from first line and insert text on first line\n        this.setLineText(position.line - 1,\n            this.lines[position.line - 1].substring(0, position.character - 1)\n            + insertLines[0]\n        );\n\n        // Insert new lines & store lengths\n        const newLengths = new Uint32Array(insertLines.length - 1);\n        for (let i = 1; i < insertLines.length; i++) {\n            this.lines.splice(position.line + i - 1, 0, insertLines[i]);\n            newLengths[i - 1] = insertLines[i].length + this.eol.length;\n        }\n\n        if (this.lineStarts) {\n            // update prefix sum\n            this.lineStarts.insertValues(position.line, newLengths);\n        }\n    }\n\n    private acceptDeleteRange(range: ARange): void {\n\n        if (range.startLineNumber === range.endLineNumber) {\n            if (range.startColumn === range.endColumn) {\n                // Nothing to delete\n                return;\n            }\n            // Delete text on the affected line\n            this.setLineText(range.startLineNumber - 1,\n                this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n                + this.lines[range.startLineNumber - 1].substring(range.endColumn - 1)\n            );\n            return;\n        }\n\n        // Take remaining text on last line and append it to remaining text on first line\n        this.setLineText(range.startLineNumber - 1,\n            this.lines[range.startLineNumber - 1].substring(0, range.startColumn - 1)\n            + this.lines[range.endLineNumber - 1].substring(range.endColumn - 1)\n        );\n\n        // Delete middle lines\n        this.lines.splice(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        if (this.lineStarts) {\n            this.lineStarts.removeValues(range.startLineNumber, range.endLineNumber - range.startLineNumber);\n        }\n    }\n\n    private setLineText(lineIndex: number, newValue: string): void {\n        this.lines[lineIndex] = newValue;\n        if (this.lineStarts) {\n            this.lineStarts.changeValue(lineIndex, this.lines[lineIndex].length + this.eol.length);\n        }\n    }\n\n    private save(): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('Document is closed'));\n        }\n        return this.proxy.$trySaveDocument(this.uri);\n    }\n\n    private getTextInRange(_range: theia.Range): string {\n        const range = this.validateRange(_range);\n\n        if (range.isEmpty) {\n            return '';\n        }\n\n        if (range.isSingleLine) {\n            return this.lines[range.start.line].substring(range.start.character, range.end.character);\n        }\n\n        const lineEnding = this.eol;\n        const startLineIndex = range.start.line;\n        const endLineIndex = range.end.line;\n        const resultLines: string[] = [];\n\n        resultLines.push(this.lines[startLineIndex].substring(range.start.character));\n        for (let i = startLineIndex + 1; i < endLineIndex; i++) {\n            resultLines.push(this.lines[i]);\n        }\n        resultLines.push(this.lines[endLineIndex].substring(0, range.end.character));\n\n        return resultLines.join(lineEnding);\n    }\n\n    private validateRange(range: theia.Range): theia.Range {\n        if (!(range instanceof Range)) {\n            throw new Error('Invalid argument');\n        }\n\n        const start = this.validatePosition(range.start);\n        const end = this.validatePosition(range.end);\n\n        if (start === range.start && end === range.end) {\n            return range;\n        }\n        return new Range(start.line, start.character, end.line, end.character);\n    }\n\n    private getText(): string {\n        return this.lines.join(this.eol);\n    }\n\n    private validatePosition(position: theia.Position): theia.Position {\n        if (!(position instanceof Position)) {\n            throw new Error('Invalid argument');\n        }\n\n        let { line, character } = position;\n        let hasChanged = false;\n\n        if (line < 0) {\n            line = 0;\n            character = 0;\n            hasChanged = true;\n        } else if (line >= this.lines.length) {\n            line = this.lines.length - 1;\n            character = this.lines[line].length;\n            hasChanged = true;\n        } else {\n            const maxCharacter = this.lines[line].length;\n            if (character < 0) {\n                character = 0;\n                hasChanged = true;\n            } else if (character > maxCharacter) {\n                character = maxCharacter;\n                hasChanged = true;\n            }\n        }\n\n        if (!hasChanged) {\n            return position;\n        }\n        return new Position(line, character);\n    }\n\n    private lineAt(lineOrPosition: number | theia.Position): theia.TextLine {\n\n        let line: number = -1;\n        if (lineOrPosition instanceof Position) {\n            line = lineOrPosition.line;\n        } else if (typeof lineOrPosition === 'number') {\n            line = lineOrPosition;\n        }\n\n        if (line < 0 || line >= this.lines.length) {\n            throw new Error('Illegal value for `line`');\n        }\n\n        let result = this.textLines[line];\n        if (!result || result.lineNumber !== line || result.text !== this.lines[line]) {\n\n            const text = this.lines[line];\n            const firstNonWhitespaceCharacterIndex = /^(\\s*)/.exec(text)![1].length;\n            const range = new Range(line, 0, line, text.length);\n            const rangeIncludingLineBreak = line < this.lines.length - 1\n                ? new Range(line, 0, line + 1, 0)\n                : range;\n\n            result = Object.freeze({\n                lineNumber: line,\n                range,\n                rangeIncludingLineBreak,\n                text,\n                firstNonWhitespaceCharacterIndex,\n                isEmptyOrWhitespace: firstNonWhitespaceCharacterIndex === text.length\n            });\n\n            this.textLines[line] = result;\n        }\n\n        return result;\n    }\n\n    private offsetAt(position: theia.Position): number {\n        position = this.validatePosition(position);\n        this.ensureLineStarts();\n        return this.lineStarts!.getAccumulatedValue(position.line - 1) + position.character;\n    }\n\n    private ensureLineStarts(): void {\n        if (!this.lineStarts) {\n            const eolLength = this.eol.length;\n            const linesLength = this.lines.length;\n            const lineStartValues = new Uint32Array(linesLength);\n            for (let i = 0; i < linesLength; i++) {\n                lineStartValues[i] = this.lines[i].length + eolLength;\n            }\n            this.lineStarts = new PrefixSumComputer(lineStartValues);\n        }\n    }\n\n    private positionAt(offset: number): theia.Position {\n        offset = Math.floor(offset);\n        offset = Math.max(0, offset);\n\n        this.ensureLineStarts();\n        const out = this.lineStarts!.getIndexOf(offset);\n\n        const lineLength = this.lines[out.index].length;\n\n        return new Position(out.index, Math.min(out.remainder, lineLength));\n    }\n\n    private getWordRangeAtPosition(_position: theia.Position, regexp?: RegExp): theia.Range | undefined {\n        const position = this.validatePosition(_position);\n\n        if (!regexp) {\n            // use default when custom-regexp isn't provided\n            regexp = getWordDefinitionFor(this.languageId);\n\n        } else if (regExpLeadsToEndlessLoop(regexp)) {\n            // use default when custom-regexp is bad\n            console.warn(`[getWordRangeAtPosition]: ignoring custom regexp '${regexp.source}' because it matches the empty string.`);\n            regexp = getWordDefinitionFor(this.languageId);\n        }\n\n        const wordAtText = getWordAtText(\n            position.character + 1,\n            ensureValidWordDefinition(regexp),\n            this.lines[position.line],\n            0\n        );\n\n        if (wordAtText) {\n            return new Range(position.line, wordAtText.startColumn - 1, position.line, wordAtText.endColumn - 1);\n        }\n        return undefined;\n    }\n}\n\nexport function regExpLeadsToEndlessLoop(regexp: RegExp): boolean {\n    // Exit early if it's one of these special cases which are meant to match\n    // against an empty string\n    if (regexp.source === '^' || regexp.source === '^$' || regexp.source === '$' || regexp.source === '^\\\\s*$') {\n        return false;\n    }\n\n    // We check against an empty string. If the regular expression doesn't advance\n    // (e.g. ends in an endless loop) it will match an empty string.\n    const match = regexp.exec('');\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return (match && <any>regexp.lastIndex === 0)!;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * based on https://github.com/Microsoft/vscode/blob/bf9a27ec01f2ef82fc45f69e0c946c7d74a57d3e/src/vs/workbench/api/node/extHostDocumentSaveParticipant.ts\n */\nimport { DocumentsExt, ModelChangedEvent, PLUGIN_RPC_CONTEXT, DocumentsMain, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { TextEdit, URI } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt, setWordDefinitionFor } from './document-data';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport * as Converter from './type-converters';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Range, TextDocumentShowOptions } from '../common/plugin-api-rpc-model';\n\nexport class DocumentsExtImpl implements DocumentsExt {\n    private toDispose = new DisposableCollection();\n    private _onDidAddDocument = new Emitter<theia.TextDocument>();\n    private _onDidRemoveDocument = new Emitter<theia.TextDocument>();\n    private _onDidChangeDocument = new Emitter<theia.TextDocumentChangeEvent>();\n    private _onDidSaveTextDocument = new Emitter<theia.TextDocument>();\n    private _onWillSaveTextDocument = new Emitter<theia.TextDocumentWillSaveEvent>();\n\n    readonly onDidAddDocument: Event<theia.TextDocument> = this._onDidAddDocument.event;\n    readonly onDidRemoveDocument: Event<theia.TextDocument> = this._onDidRemoveDocument.event;\n    readonly onDidChangeDocument: Event<theia.TextDocumentChangeEvent> = this._onDidChangeDocument.event;\n    readonly onDidSaveTextDocument: Event<theia.TextDocument> = this._onDidSaveTextDocument.event;\n    readonly onWillSaveTextDocument: Event<theia.TextDocumentWillSaveEvent> = this._onWillSaveTextDocument.event;\n\n    private proxy: DocumentsMain;\n    private loadingDocuments = new Map<string, Promise<DocumentDataExt | undefined>>();\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN);\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidAddDocuments(documents => {\n                for (const document of documents) {\n                    this._onDidAddDocument.fire(document.document);\n                }\n            })\n        );\n\n        this.toDispose.push(\n            this.editorsAndDocuments.onDidRemoveDocuments(documents => {\n                for (const data of documents) {\n                    this._onDidRemoveDocument.fire(data.document);\n                }\n            })\n        );\n    }\n    $acceptModelModeChanged(startUrl: UriComponents, oldModeId: string, newModeId: string): void {\n        const uri = URI.revive(startUrl);\n        const uriString = uri.toString();\n\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (data) {\n            this._onDidRemoveDocument.fire(data.document);\n            data.acceptLanguageId(newModeId);\n            this._onDidAddDocument.fire(data.document);\n        }\n    }\n    $acceptModelSaved(strUrl: UriComponents): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        this.$acceptDirtyStateChanged(strUrl, false);\n        if (data) {\n            this._onDidSaveTextDocument.fire(data.document);\n        }\n    }\n\n    async $acceptModelWillSave(strUrl: UriComponents, reason: theia.TextDocumentSaveReason, saveTimeout: number): Promise<SingleEditOperation[]> {\n        const uri = URI.revive(strUrl).toString();\n        const operations: SingleEditOperation[] = [];\n        let didTimeout = false;\n        // try to timeout early to squeeze edits at least from some save participants\n        const didTimeoutHandle = setTimeout(() => didTimeout = true, saveTimeout - 250);\n        try {\n            await this._onWillSaveTextDocument.sequence(async fireEvent => {\n                if (didTimeout) {\n                    return false;\n                }\n                try {\n                    const documentData = this.editorsAndDocuments.getDocument(uri);\n                    if (documentData) {\n                        const { document } = documentData;\n                        await this.fireTextDocumentWillSaveEvent({\n                            document, reason, fireEvent,\n                            accept: operation => operations.push(operation)\n                        });\n                    }\n                } catch (e) {\n                    console.error(e);\n                }\n                return !didTimeout;\n            });\n        } finally {\n            clearTimeout(didTimeoutHandle);\n        }\n        return operations;\n    }\n\n    /* eslint-disable @typescript-eslint/no-explicit-any */\n    protected async fireTextDocumentWillSaveEvent({\n        document, reason, fireEvent, accept\n    }: {\n        document: theia.TextDocument,\n        reason: theia.TextDocumentSaveReason,\n        fireEvent: (e: theia.TextDocumentWillSaveEvent) => any,\n        accept: (operation: SingleEditOperation) => void\n    }): Promise<void> {\n\n        const promises: PromiseLike<TextEdit[] | any>[] = [];\n        fireEvent(Object.freeze({\n            document, reason,\n            waitUntil(p: PromiseLike<TextEdit[] | any>): void {\n                if (Object.isFrozen(promises)) {\n                    throw new Error('waitUntil can not be called async');\n                }\n                promises.push(p);\n            }\n        }));\n        Object.freeze(promises);\n\n        await Promise.all(promises).then(allEdits => allEdits.forEach(edits => {\n            if (Array.isArray(edits)) {\n                edits.forEach(edit => {\n                    if (TextEdit.isTextEdit(edit)) {\n                        accept(Converter.fromTextEdit(edit));\n                    }\n                });\n            }\n        }));\n    }\n    /* eslint-enable  @typescript-eslint/no-explicit-any */\n\n    $acceptDirtyStateChanged(strUrl: UriComponents, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            contentChanges: [],\n            reason: undefined,\n        });\n    }\n    $acceptModelChanged(strUrl: UriComponents, e: ModelChangedEvent, isDirty: boolean): void {\n        const uri = URI.revive(strUrl);\n        const uriString = uri.toString();\n        const data = this.editorsAndDocuments.getDocument(uriString);\n        if (!data) {\n            throw new Error('unknown document');\n        }\n        data.acceptIsDirty(isDirty);\n        data.onEvents(e);\n        this._onDidChangeDocument.fire({\n            document: data.document,\n            reason: e.reason,\n            contentChanges: e.changes.map(change => ({\n                range: Converter.toRange(change.range),\n                rangeOffset: change.rangeOffset,\n                rangeLength: change.rangeLength,\n                text: change.text\n            }))\n        });\n    }\n    getAllDocumentData(): DocumentDataExt[] {\n        return this.editorsAndDocuments.allDocuments();\n    }\n\n    getDocumentData(resource: theia.Uri): DocumentDataExt | undefined {\n        if (resource) {\n            return this.editorsAndDocuments.getDocument(resource.toString());\n        }\n\n        return undefined;\n    }\n\n    public getDocument(resource: theia.Uri): theia.TextDocument {\n        const data = this.getDocumentData(resource);\n        if (!data?.document) {\n            throw new Error(`Unable to retrieve document from URI '${resource}'`);\n        }\n        return data.document;\n    }\n\n    /**\n     * Retrieve document and open it in the editor if need.\n     *\n     * @param uri path to the resource\n     * @param options if options exists, resource will be opened in editor, otherwise only document object is returned\n     */\n    async showDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        // Determine whether the document is already loading\n        const loadingDocument = this.loadingDocuments.get(uri.toString());\n        if (loadingDocument) {\n            // return the promise if document is already loading\n            return loadingDocument;\n        }\n\n        try {\n            // start opening document\n            const document = this.loadDocument(uri, options);\n            // add loader to the map\n            this.loadingDocuments.set(uri.toString(), document);\n            // wait the document being opened\n            await document;\n            // return opened document\n            return document;\n        } catch (error) {\n            return Promise.reject(error);\n        } finally {\n            // remove loader from the map\n            this.loadingDocuments.delete(uri.toString());\n        }\n    }\n\n    async openDocument(uri: URI): Promise<DocumentDataExt | undefined> {\n        const cached = this.editorsAndDocuments.getDocument(uri.toString());\n        if (cached) {\n            return cached;\n        }\n\n        await this.proxy.$tryOpenDocument(uri);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    private async loadDocument(uri: URI, options?: theia.TextDocumentShowOptions): Promise<DocumentDataExt | undefined> {\n        let documentOptions: TextDocumentShowOptions | undefined;\n        if (options) {\n            let selection: Range | undefined;\n            if (options.selection) {\n                const { start, end } = options.selection;\n                selection = {\n                    startLineNumber: start.line + 1,\n                    startColumn: start.character + 1,\n                    endLineNumber: end.line + 1,\n                    endColumn: end.character + 1\n                };\n            }\n            documentOptions = {\n                selection,\n                preserveFocus: options.preserveFocus,\n                preview: options.preview,\n                viewColumn: options.viewColumn\n            };\n        }\n        await this.proxy.$tryShowDocument(uri, documentOptions);\n        return this.editorsAndDocuments.getDocument(uri.toString());\n    }\n\n    async createDocumentData(options?: { language?: string; content?: string }): Promise<URI> {\n        return this.proxy.$tryCreateDocument(options).then(data => URI.revive(data));\n    }\n\n    setWordDefinitionFor(modeId: string, wordDefinition: RegExp | null): void {\n        setWordDefinitionFor(modeId, wordDefinition);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { EditorsAndDocumentsExt, EditorsAndDocumentsDelta, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { TextEditorExt } from './text-editor';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DocumentDataExt } from './document-data';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\nimport { dispose } from '../common/disposable-util';\nimport { URI } from './types-impl';\n\nexport class EditorsAndDocumentsExtImpl implements EditorsAndDocumentsExt {\n    private activeEditorId: string | null = null;\n\n    private readonly _onDidAddDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidRemoveDocuments = new Emitter<DocumentDataExt[]>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<TextEditorExt[]>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<TextEditorExt | undefined>();\n\n    readonly onDidAddDocuments: Event<DocumentDataExt[]> = this._onDidAddDocuments.event;\n    readonly onDidRemoveDocuments: Event<DocumentDataExt[]> = this._onDidRemoveDocuments.event;\n    readonly onDidChangeVisibleTextEditors: Event<TextEditorExt[]> = this._onDidChangeVisibleTextEditors.event;\n    readonly onDidChangeActiveTextEditor: Event<TextEditorExt | undefined> = this._onDidChangeActiveTextEditor.event;\n\n    private readonly documents = new Map<string, DocumentDataExt>();\n    private readonly editors = new Map<string, TextEditorExt>();\n\n    constructor(private readonly rpc: RPCProtocol) {\n    }\n\n    $acceptEditorsAndDocumentsDelta(delta: EditorsAndDocumentsDelta): void {\n        const removedDocuments = new Array<DocumentDataExt>();\n        const addedDocuments = new Array<DocumentDataExt>();\n        const removedEditors = new Array<TextEditorExt>();\n\n        if (delta.removedDocuments) {\n            for (const uriComponent of delta.removedDocuments) {\n                const uri = URI.revive(uriComponent);\n                const id = uri.toString();\n                const data = this.documents.get(id);\n                this.documents.delete(id);\n                if (data) {\n                    removedDocuments.push(data);\n                }\n            }\n        }\n\n        if (delta.addedDocuments) {\n            for (const data of delta.addedDocuments) {\n                const resource = URI.revive(data.uri);\n                ok(!this.documents.has(resource.toString()), `document '${resource}' already exists!`);\n                const documentData = new DocumentDataExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.DOCUMENTS_MAIN),\n                    resource,\n                    data.lines,\n                    data.EOL,\n                    data.modeId,\n                    data.versionId,\n                    data.isDirty\n                );\n                this.documents.set(resource.toString(), documentData);\n                addedDocuments.push(documentData);\n            }\n        }\n\n        if (delta.removedEditors) {\n            for (const id of delta.removedEditors) {\n                const editor = this.editors.get(id);\n                this.editors.delete(id);\n                if (editor) {\n                    removedEditors.push(editor);\n                }\n            }\n        }\n\n        if (delta.addedEditors) {\n            for (const data of delta.addedEditors) {\n                const resource = URI.revive(data.documentUri);\n                ok(this.documents.has(resource.toString()), `document '${resource}' doesn't exist`);\n                ok(!this.editors.has(data.id), `editor '${data.id}' already exists!`);\n\n                const documentData = this.documents.get(resource.toString());\n                const editor = new TextEditorExt(\n                    this.rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN),\n                    data.id,\n                    documentData!,\n                    data.selections.map(Converter.toSelection),\n                    data.options,\n                    data.visibleRanges.map(Converter.toRange),\n                    Converter.toViewColumn(data.editorPosition)\n                );\n                this.editors.set(data.id, editor);\n            }\n        }\n\n        // TODO investigate how to get rid of it to align with VS Code extension host code\n        if (this.activeEditorId && delta.removedEditors && delta.removedEditors.indexOf(this.activeEditorId) !== -1 && this.editors.size !== 0) {\n            // to be compatible with VSCode, when active editor is closed onDidChangeActiveTextEditor\n            // should be triggered with undefined before next editor, if any, become active.\n            this.activeEditorId = null;\n            this._onDidChangeActiveTextEditor.fire(undefined);\n        }\n\n        if (delta.newActiveEditor !== undefined) {\n            ok(delta.newActiveEditor === null || this.editors.has(delta.newActiveEditor), `active editor '${delta.newActiveEditor}' does not exist`);\n            this.activeEditorId = delta.newActiveEditor;\n        }\n\n        dispose(removedDocuments);\n        dispose(removedEditors);\n\n        // now that the internal state is complete, fire events\n        if (delta.removedDocuments) {\n            this._onDidRemoveDocuments.fire(removedDocuments);\n        }\n        if (delta.addedDocuments) {\n            this._onDidAddDocuments.fire(addedDocuments);\n        }\n\n        if (delta.removedEditors || delta.addedEditors) {\n            this._onDidChangeVisibleTextEditors.fire(this.allEditors());\n        }\n        if (delta.newActiveEditor !== undefined) {\n            this._onDidChangeActiveTextEditor.fire(this.activeEditor());\n        }\n    }\n\n    allEditors(): TextEditorExt[] {\n        const result = new Array<TextEditorExt>();\n        this.editors.forEach(editor => result.push(editor));\n        return result;\n    }\n\n    activeEditor(): TextEditorExt | undefined {\n        if (!this.activeEditorId) {\n            return undefined;\n        } else {\n            return this.editors.get(this.activeEditorId);\n        }\n    }\n\n    allDocuments(): DocumentDataExt[] {\n        const result = new Array<DocumentDataExt>();\n        this.documents.forEach(data => result.push(data));\n        return result;\n    }\n\n    getDocument(uri: string): DocumentDataExt | undefined {\n        return this.documents.get(uri);\n    }\n\n    getEditor(id: string): TextEditorExt | undefined {\n        return this.editors.get(id);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { EnvMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { QueryParameters } from '../common/env';\nimport { v4 } from 'uuid';\n\nexport abstract class EnvExtImpl {\n    private proxy: EnvMain;\n    private queryParameters: QueryParameters;\n    private lang: string;\n    private applicationName: string;\n    private defaultShell: string;\n    private ui: theia.UIKind;\n    private envMachineId: string;\n    private envSessionId: string;\n    private host: string;\n    private _isTelemetryEnabled: boolean;\n    private _remoteName: string | undefined;\n    private onDidChangeTelemetryEnabledEmitter = new Emitter<boolean>();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.ENV_MAIN);\n        this.envSessionId = v4();\n        this.envMachineId = v4();\n        // we don't support telemetry at the moment\n        this._isTelemetryEnabled = false;\n        this._remoteName = undefined;\n    }\n\n    getEnvVariable(envVarName: string): Promise<string | undefined> {\n        return this.proxy.$getEnvVariable(envVarName).then(x => {\n            if (x === null) {\n                return undefined;\n            }\n            return x;\n        });\n    }\n\n    getQueryParameter(queryParamName: string): string | string[] | undefined {\n        return this.queryParameters[queryParamName];\n    }\n\n    getQueryParameters(): QueryParameters {\n        return this.queryParameters;\n    }\n\n    setQueryParameters(queryParams: QueryParameters): void {\n        this.queryParameters = queryParams;\n    }\n\n    setApplicationName(applicationName: string): void {\n        this.applicationName = applicationName;\n    }\n\n    setLanguage(lang: string): void {\n        this.lang = lang;\n    }\n\n    setShell(shell: string): void {\n        this.defaultShell = shell;\n    }\n\n    setUIKind(uiKind: theia.UIKind): void {\n        this.ui = uiKind;\n    }\n\n    setAppHost(appHost: string): void {\n        this.host = appHost;\n    }\n\n    getClientOperatingSystem(): Promise<theia.OperatingSystem> {\n        return this.proxy.$getClientOperatingSystem();\n    }\n\n    get appName(): string {\n        return this.applicationName;\n    }\n\n    abstract get appRoot(): string;\n\n    abstract get isNewAppInstall(): boolean;\n\n    get appHost(): string {\n        return this.host;\n    }\n\n    get isTelemetryEnabled(): boolean {\n        return this._isTelemetryEnabled;\n    }\n\n    get onDidChangeTelemetryEnabled(): Event<boolean> {\n        return this.onDidChangeTelemetryEnabledEmitter.event;\n    }\n\n    get remoteName(): string | undefined {\n        return this._remoteName;\n    }\n\n    get language(): string {\n        return this.lang;\n    }\n    get machineId(): string {\n        return this.envMachineId;\n    }\n    get sessionId(): string {\n        return this.envSessionId;\n    }\n    get uriScheme(): string {\n        return 'theia';\n    }\n    get shell(): string {\n        return this.defaultShell;\n    }\n    get uiKind(): theia.UIKind {\n        return this.ui;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystemEventService.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable max-len */\n/* eslint-disable @typescript-eslint/no-shadow */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* eslint-disable @typescript-eslint/tslint/config */\n\nimport { Emitter, WaitUntilEvent, AsyncEmitter } from '@theia/core/lib/common/event';\nimport { IRelativePattern, parse } from '@theia/core/lib/common/glob';\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { Disposable, URI, WorkspaceEdit } from './types-impl';\nimport { EditorsAndDocumentsExtImpl as ExtHostDocumentsAndEditors } from './editors-and-documents';\nimport type * as vscode from '@theia/plugin';\nimport * as typeConverter from './type-converters';\nimport { FileOperation } from '@theia/filesystem/lib/common/files';\nimport { flatten } from '../common/arrays';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    Plugin, TextEditorsMain as MainThreadTextEditorsShape, PLUGIN_RPC_CONTEXT, FileSystemEvents, ExtHostFileSystemEventServiceShape,\n    WorkspaceFileEditDto, WorkspaceTextEditDto\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\ntype Event<T> = vscode.Event<T>;\ntype IExtensionDescription = Plugin;\ntype IWaitUntil = WaitUntilEvent;\n\nclass FileSystemWatcher implements vscode.FileSystemWatcher {\n\n    private readonly _onDidCreate = new Emitter<vscode.Uri>();\n    private readonly _onDidChange = new Emitter<vscode.Uri>();\n    private readonly _onDidDelete = new Emitter<vscode.Uri>();\n    private _disposable: Disposable;\n    private _config: number;\n\n    get ignoreCreateEvents(): boolean {\n        return Boolean(this._config & 0b001);\n    }\n\n    get ignoreChangeEvents(): boolean {\n        return Boolean(this._config & 0b010);\n    }\n\n    get ignoreDeleteEvents(): boolean {\n        return Boolean(this._config & 0b100);\n    }\n\n    constructor(dispatcher: Event<FileSystemEvents>, globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean) {\n\n        this._config = 0;\n        if (ignoreCreateEvents) {\n            this._config += 0b001;\n        }\n        if (ignoreChangeEvents) {\n            this._config += 0b010;\n        }\n        if (ignoreDeleteEvents) {\n            this._config += 0b100;\n        }\n\n        const parsedPattern = parse(globPattern);\n\n        const subscription = dispatcher(events => {\n            if (!ignoreCreateEvents) {\n                for (const created of events.created) {\n                    const uri = URI.revive(created);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidCreate.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreChangeEvents) {\n                for (const changed of events.changed) {\n                    const uri = URI.revive(changed);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidChange.fire(uri);\n                    }\n                }\n            }\n            if (!ignoreDeleteEvents) {\n                for (const deleted of events.deleted) {\n                    const uri = URI.revive(deleted);\n                    if (parsedPattern(uri.fsPath)) {\n                        this._onDidDelete.fire(uri);\n                    }\n                }\n            }\n        });\n\n        this._disposable = Disposable.from(this._onDidCreate, this._onDidChange, this._onDidDelete, subscription);\n    }\n\n    dispose() {\n        this._disposable.dispose();\n    }\n\n    get onDidCreate(): Event<vscode.Uri> {\n        return this._onDidCreate.event;\n    }\n\n    get onDidChange(): Event<vscode.Uri> {\n        return this._onDidChange.event;\n    }\n\n    get onDidDelete(): Event<vscode.Uri> {\n        return this._onDidDelete.event;\n    }\n}\n\ninterface IExtensionListener<E> {\n    extension: IExtensionDescription;\n    (e: E): any;\n}\n\nexport class ExtHostFileSystemEventService implements ExtHostFileSystemEventServiceShape {\n\n    private readonly _onFileSystemEvent = new Emitter<FileSystemEvents>();\n\n    private readonly _onDidRenameFile = new Emitter<vscode.FileRenameEvent>();\n    private readonly _onDidCreateFile = new Emitter<vscode.FileCreateEvent>();\n    private readonly _onDidDeleteFile = new Emitter<vscode.FileDeleteEvent>();\n    private readonly _onWillRenameFile = new AsyncEmitter<vscode.FileWillRenameEvent>();\n    private readonly _onWillCreateFile = new AsyncEmitter<vscode.FileWillCreateEvent>();\n    private readonly _onWillDeleteFile = new AsyncEmitter<vscode.FileWillDeleteEvent>();\n\n    readonly onDidRenameFile: Event<vscode.FileRenameEvent> = this._onDidRenameFile.event;\n    readonly onDidCreateFile: Event<vscode.FileCreateEvent> = this._onDidCreateFile.event;\n    readonly onDidDeleteFile: Event<vscode.FileDeleteEvent> = this._onDidDeleteFile.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly _extHostDocumentsAndEditors: ExtHostDocumentsAndEditors,\n        private readonly _mainThreadTextEditors: MainThreadTextEditorsShape = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN)\n    ) {\n        //\n    }\n\n    // --- file events\n\n    createFileSystemWatcher(globPattern: string | IRelativePattern, ignoreCreateEvents?: boolean, ignoreChangeEvents?: boolean, ignoreDeleteEvents?: boolean): vscode.FileSystemWatcher {\n        return new FileSystemWatcher(this._onFileSystemEvent.event, globPattern, ignoreCreateEvents, ignoreChangeEvents, ignoreDeleteEvents);\n    }\n\n    $onFileEvent(events: FileSystemEvents) {\n        this._onFileSystemEvent.fire(events);\n    }\n\n    // --- file operations\n\n    $onDidRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined): void {\n        switch (operation) {\n            case FileOperation.MOVE:\n                this._onDidRenameFile.fire(Object.freeze({ files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }));\n                break;\n            case FileOperation.DELETE:\n                this._onDidDeleteFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            case FileOperation.CREATE:\n                this._onDidCreateFile.fire(Object.freeze({ files: [URI.revive(target)] }));\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    getOnWillRenameFileEvent(extension: IExtensionDescription): Event<vscode.FileWillRenameEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillRenameFile);\n    }\n\n    getOnWillCreateFileEvent(extension: IExtensionDescription): Event<vscode.FileWillCreateEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillCreateFile);\n    }\n\n    getOnWillDeleteFileEvent(extension: IExtensionDescription): Event<vscode.FileWillDeleteEvent> {\n        return this._createWillExecuteEvent(extension, this._onWillDeleteFile);\n    }\n\n    private _createWillExecuteEvent<E extends IWaitUntil>(extension: IExtensionDescription, emitter: AsyncEmitter<E>): Event<E> {\n        return (listener, thisArg, disposables) => {\n            const wrappedListener: IExtensionListener<E> = function wrapped(e: E) { listener.call(thisArg, e); };\n            wrappedListener.extension = extension;\n            return emitter.event(wrappedListener, undefined, disposables);\n        };\n    }\n\n    async $onWillRunFileOperation(operation: FileOperation, target: UriComponents, source: UriComponents | undefined, timeout: number, token: CancellationToken): Promise<any> {\n        switch (operation) {\n            case FileOperation.MOVE:\n                await this._fireWillEvent(this._onWillRenameFile, { files: [{ oldUri: URI.revive(source!), newUri: URI.revive(target) }] }, timeout, token);\n                break;\n            case FileOperation.DELETE:\n                await this._fireWillEvent(this._onWillDeleteFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            case FileOperation.CREATE:\n                await this._fireWillEvent(this._onWillCreateFile, { files: [URI.revive(target)] }, timeout, token);\n                break;\n            default:\n            // ignore, dont send\n        }\n    }\n\n    private async _fireWillEvent<E extends IWaitUntil>(emitter: AsyncEmitter<E>, data: Omit<E, 'waitUntil'>, timeout: number, token: CancellationToken): Promise<any> {\n\n        const edits: WorkspaceEdit[] = [];\n        await emitter.fire(data, token, async (thenable, listener) => {\n            // ignore all results except for WorkspaceEdits. Those are stored in an array.\n            const now = Date.now();\n            const result = await Promise.resolve(thenable);\n            if (result instanceof WorkspaceEdit) {\n                edits.push(result);\n            }\n\n            if (Date.now() - now > timeout) {\n                console.warn('SLOW file-participant', (<IExtensionListener<E>>listener).extension?.model.id);\n            }\n        });\n\n        if (token.isCancellationRequested) {\n            return;\n        }\n\n        if (edits.length > 0) {\n            // flatten all WorkspaceEdits collected via waitUntil-call\n            // and apply them in one go.\n            const allEdits = new Array<Array<WorkspaceFileEditDto | WorkspaceTextEditDto>>();\n            for (const edit of edits) {\n                const { edits } = typeConverter.fromWorkspaceEdit(edit, this._extHostDocumentsAndEditors);\n                allEdits.push(edits);\n            }\n            return this._mainThreadTextEditors.$tryApplyWorkspaceEdit({ edits: flatten(allEdits) });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * **IMPORTANT** this code is running in the plugin host process and should be closed as possible to VS Code counterpart:\n * https://github.com/microsoft/vscode/blob/04c36be045a94fee58e5f8992d3e3fd980294a84/src/vs/workbench/api/common/extHostFileSystem.ts\n * One should be able to diff them to see differences.\n */\n\n/* eslint-disable arrow-body-style */\n/* eslint-disable @typescript-eslint/quotes */\n/* eslint-disable @typescript-eslint/tslint/config */\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { UriComponents } from '@theia/core/shared/vscode-uri';\nimport { FileChangeType, FileSystemError, URI } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, FileSystemExt, FileSystemMain, IFileChangeDto } from '../common/plugin-api-rpc';\nimport * as vscode from '@theia/plugin';\nimport * as files from '@theia/filesystem/lib/common/files';\nimport * as typeConverter from './type-converters';\nimport { LanguagesExtImpl } from './languages';\nimport { Schemes as Schemas } from '../common/uri-components';\nimport { State, StateMachine, LinkComputer, Edge } from '../common/link-computer';\nimport { commonPrefixLength } from '@theia/core/lib/common/strings';\nimport { CharCode } from '@theia/core/lib/common/char-code';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\n\ntype IDisposable = vscode.Disposable;\n\nclass FsLinkProvider {\n\n    private _schemes: string[] = [];\n    private _stateMachine?: StateMachine;\n\n    add(scheme: string): void {\n        this._stateMachine = undefined;\n        this._schemes.push(scheme);\n    }\n\n    delete(scheme: string): void {\n        const idx = this._schemes.indexOf(scheme);\n        if (idx >= 0) {\n            this._schemes.splice(idx, 1);\n            this._stateMachine = undefined;\n        }\n    }\n\n    private _initStateMachine(): void {\n        if (!this._stateMachine) {\n\n            // sort and compute common prefix with previous scheme\n            // then build state transitions based on the data\n            const schemes = this._schemes.sort();\n            const edges: Edge[] = [];\n            let prevScheme: string | undefined;\n            let prevState: State;\n            let lastState = State.LastKnownState;\n            let nextState = State.LastKnownState;\n            for (const scheme of schemes) {\n\n                // skip the common prefix of the prev scheme\n                // and continue with its last state\n                let pos = !prevScheme ? 0 : commonPrefixLength(prevScheme, scheme);\n                if (pos === 0) {\n                    prevState = State.Start;\n                } else {\n                    prevState = nextState;\n                }\n\n                for (; pos < scheme.length; pos++) {\n                    // keep creating new (next) states until the\n                    // end (and the BeforeColon-state) is reached\n                    if (pos + 1 === scheme.length) {\n                        // Save the last state here, because we need to continue for the next scheme\n                        lastState = nextState;\n                        nextState = State.BeforeColon;\n                    } else {\n                        nextState += 1;\n                    }\n                    edges.push([prevState, scheme.toUpperCase().charCodeAt(pos), nextState]);\n                    edges.push([prevState, scheme.toLowerCase().charCodeAt(pos), nextState]);\n                    prevState = nextState;\n                }\n\n                prevScheme = scheme;\n                // Restore the last state\n                nextState = lastState;\n            }\n\n            // all link must match this pattern `<scheme>:/<more>`\n            edges.push([State.BeforeColon, CharCode.Colon, State.AfterColon]);\n            edges.push([State.AfterColon, CharCode.Slash, State.End]);\n\n            this._stateMachine = new StateMachine(edges);\n        }\n    }\n\n    provideDocumentLinks(document: vscode.TextDocument): vscode.ProviderResult<vscode.DocumentLink[]> {\n        this._initStateMachine();\n\n        const result: vscode.DocumentLink[] = [];\n        const links = LinkComputer.computeLinks({\n            getLineContent(lineNumber: number): string {\n                return document.lineAt(lineNumber - 1).text;\n            },\n            getLineCount(): number {\n                return document.lineCount;\n            }\n        }, this._stateMachine);\n\n        for (const link of links) {\n            const docLink = typeConverter.DocumentLink.to(link);\n            if (docLink.target) {\n                result.push(docLink);\n            }\n        }\n        return result;\n    }\n}\n\nclass ConsumerFileSystem implements vscode.FileSystem {\n\n    constructor(private _proxy: FileSystemMain) { }\n\n    stat(uri: vscode.Uri): Promise<vscode.FileStat> {\n        return this._proxy.$stat(uri).catch(ConsumerFileSystem._handleError);\n    }\n    readDirectory(uri: vscode.Uri): Promise<[string, vscode.FileType][]> {\n        return this._proxy.$readdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    createDirectory(uri: vscode.Uri): Promise<void> {\n        return this._proxy.$mkdir(uri).catch(ConsumerFileSystem._handleError);\n    }\n    async readFile(uri: vscode.Uri): Promise<Uint8Array> {\n        return this._proxy.$readFile(uri).then(buff => buff.buffer).catch(ConsumerFileSystem._handleError);\n    }\n    writeFile(uri: vscode.Uri, content: Uint8Array): Promise<void> {\n        return this._proxy.$writeFile(uri, BinaryBuffer.wrap(content)).catch(ConsumerFileSystem._handleError);\n    }\n    delete(uri: vscode.Uri, options?: { recursive?: boolean; useTrash?: boolean; }): Promise<void> {\n        return this._proxy.$delete(uri, { ...{ recursive: false, useTrash: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    rename(oldUri: vscode.Uri, newUri: vscode.Uri, options?: { overwrite?: boolean; }): Promise<void> {\n        return this._proxy.$rename(oldUri, newUri, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    copy(source: vscode.Uri, destination: vscode.Uri, options?: { overwrite?: boolean }): Promise<void> {\n        return this._proxy.$copy(source, destination, { ...{ overwrite: false }, ...options }).catch(ConsumerFileSystem._handleError);\n    }\n    private static _handleError(err: any): never {\n        // generic error\n        if (!(err instanceof Error)) {\n            throw new FileSystemError(String(err));\n        }\n\n        // no provider (unknown scheme) error\n        if (err.name === 'ENOPRO') {\n            throw FileSystemError.Unavailable(err.message);\n        }\n\n        // file system error\n        switch (err.name) {\n            case files.FileSystemProviderErrorCode.FileExists: throw FileSystemError.FileExists(err.message);\n            case files.FileSystemProviderErrorCode.FileNotFound: throw FileSystemError.FileNotFound(err.message);\n            case files.FileSystemProviderErrorCode.FileNotADirectory: throw FileSystemError.FileNotADirectory(err.message);\n            case files.FileSystemProviderErrorCode.FileIsADirectory: throw FileSystemError.FileIsADirectory(err.message);\n            case files.FileSystemProviderErrorCode.NoPermissions: throw FileSystemError.NoPermissions(err.message);\n            case files.FileSystemProviderErrorCode.Unavailable: throw FileSystemError.Unavailable(err.message);\n\n            default: throw new FileSystemError(err.message, err.name as files.FileSystemProviderErrorCode);\n        }\n    }\n}\n\nexport class FileSystemExtImpl implements FileSystemExt {\n\n    private readonly _proxy: FileSystemMain;\n    private readonly _linkProvider = new FsLinkProvider();\n    private readonly _fsProvider = new Map<number, vscode.FileSystemProvider>();\n    private readonly _usedSchemes = new Set<string>();\n    private readonly _watches = new Map<number, IDisposable>();\n\n    private _linkProviderRegistration?: IDisposable;\n    private _handlePool: number = 0;\n\n    readonly fileSystem: vscode.FileSystem;\n\n    constructor(rpc: RPCProtocol, private _extHostLanguageFeatures: LanguagesExtImpl) {\n        this._proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.FILE_SYSTEM_MAIN);\n        this.fileSystem = new ConsumerFileSystem(this._proxy);\n\n        // register used schemes\n        Object.keys(Schemas).forEach(scheme => this._usedSchemes.add(scheme));\n    }\n\n    dispose(): void {\n        if (this._linkProviderRegistration) {\n            this._linkProviderRegistration.dispose();\n        }\n    }\n\n    private _registerLinkProviderIfNotYetRegistered(): void {\n        if (!this._linkProviderRegistration) {\n            this._linkProviderRegistration = this._extHostLanguageFeatures.registerDocumentLinkProvider('*', this._linkProvider, {\n                id: 'theia.fs-ext-impl',\n                name: 'fs-ext-impl'\n            });\n        }\n    }\n\n    registerFileSystemProvider(scheme: string, provider: vscode.FileSystemProvider, options: { isCaseSensitive?: boolean, isReadonly?: boolean } = {}) {\n\n        if (this._usedSchemes.has(scheme)) {\n            throw new Error(`a provider for the scheme '${scheme}' is already registered`);\n        }\n\n        //\n        this._registerLinkProviderIfNotYetRegistered();\n\n        const handle = this._handlePool++;\n        this._linkProvider.add(scheme);\n        this._usedSchemes.add(scheme);\n        this._fsProvider.set(handle, provider);\n\n        let capabilities = files.FileSystemProviderCapabilities.FileReadWrite;\n        if (options.isCaseSensitive) {\n            capabilities += files.FileSystemProviderCapabilities.PathCaseSensitive;\n        }\n        if (options.isReadonly) {\n            capabilities += files.FileSystemProviderCapabilities.Readonly;\n        }\n        if (typeof provider.copy === 'function') {\n            capabilities += files.FileSystemProviderCapabilities.FileFolderCopy;\n        }\n        if (typeof provider.open === 'function' && typeof provider.close === 'function'\n            && typeof provider.read === 'function' && typeof provider.write === 'function'\n        ) {\n            capabilities += files.FileSystemProviderCapabilities.FileOpenReadWriteClose;\n        }\n\n        this._proxy.$registerFileSystemProvider(handle, scheme, capabilities);\n\n        const subscription = provider.onDidChangeFile(event => {\n            const mapped: IFileChangeDto[] = [];\n            for (const e of event) {\n                const { uri: resource, type } = e;\n                if (resource.scheme !== scheme) {\n                    // dropping events for wrong scheme\n                    continue;\n                }\n                let newType: files.FileChangeType | undefined;\n                switch (type) {\n                    case FileChangeType.Changed:\n                        newType = files.FileChangeType.UPDATED;\n                        break;\n                    case FileChangeType.Created:\n                        newType = files.FileChangeType.ADDED;\n                        break;\n                    case FileChangeType.Deleted:\n                        newType = files.FileChangeType.DELETED;\n                        break;\n                    default:\n                        throw new Error('Unknown FileChangeType');\n                }\n                mapped.push({ resource, type: newType });\n            }\n            this._proxy.$onFileSystemChange(handle, mapped);\n        });\n\n        return {\n            dispose: () => {\n                subscription.dispose();\n                this._linkProvider.delete(scheme);\n                this._usedSchemes.delete(scheme);\n                this._fsProvider.delete(handle);\n                this._proxy.$unregisterProvider(handle);\n            }\n        };\n    }\n\n    private static _asIStat(stat: vscode.FileStat): files.Stat {\n        const { type, ctime, mtime, size } = stat;\n        return { type, ctime, mtime, size };\n    }\n\n    $stat(handle: number, resource: UriComponents): Promise<files.Stat> {\n        return Promise.resolve(this._getFsProvider(handle).stat(URI.revive(resource))).then(FileSystemExtImpl._asIStat);\n    }\n\n    $readdir(handle: number, resource: UriComponents): Promise<[string, files.FileType][]> {\n        return Promise.resolve(this._getFsProvider(handle).readDirectory(URI.revive(resource)));\n    }\n\n    $readFile(handle: number, resource: UriComponents): Promise<BinaryBuffer> {\n        return Promise.resolve(this._getFsProvider(handle).readFile(URI.revive(resource))).then(data => BinaryBuffer.wrap(data));\n    }\n\n    $writeFile(handle: number, resource: UriComponents, content: BinaryBuffer, opts: files.FileWriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).writeFile(URI.revive(resource), content.buffer, opts));\n    }\n\n    $delete(handle: number, resource: UriComponents, opts: files.FileDeleteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).delete(URI.revive(resource), opts));\n    }\n\n    $rename(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).rename(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $copy(handle: number, oldUri: UriComponents, newUri: UriComponents, opts: files.FileOverwriteOptions): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.copy) {\n            throw new Error('FileSystemProvider does not implement \"copy\"');\n        }\n        return Promise.resolve(provider.copy(URI.revive(oldUri), URI.revive(newUri), opts));\n    }\n\n    $mkdir(handle: number, resource: UriComponents): Promise<void> {\n        return Promise.resolve(this._getFsProvider(handle).createDirectory(URI.revive(resource)));\n    }\n\n    $watch(handle: number, session: number, resource: UriComponents, opts: files.WatchOptions): void {\n        const subscription = this._getFsProvider(handle).watch(URI.revive(resource), opts);\n        this._watches.set(session, subscription);\n    }\n\n    $unwatch(_handle: number, session: number): void {\n        const subscription = this._watches.get(session);\n        if (subscription) {\n            subscription.dispose();\n            this._watches.delete(session);\n        }\n    }\n\n    $open(handle: number, resource: UriComponents, opts: files.FileOpenOptions): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.open) {\n            throw new Error('FileSystemProvider does not implement \"open\"');\n        }\n        return Promise.resolve(provider.open(URI.revive(resource), opts));\n    }\n\n    $close(handle: number, fd: number): Promise<void> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.close) {\n            throw new Error('FileSystemProvider does not implement \"close\"');\n        }\n        return Promise.resolve(provider.close(fd));\n    }\n\n    $read(handle: number, fd: number, pos: number, length: number): Promise<BinaryBuffer> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.read) {\n            throw new Error('FileSystemProvider does not implement \"read\"');\n        }\n        const data = BinaryBuffer.alloc(length);\n        return Promise.resolve(provider.read(fd, pos, data.buffer, 0, length)).then(read => {\n            return data.slice(0, read); // don't send zeros\n        });\n    }\n\n    $write(handle: number, fd: number, pos: number, data: BinaryBuffer): Promise<number> {\n        const provider = this._getFsProvider(handle);\n        if (!provider.write) {\n            throw new Error('FileSystemProvider does not implement \"write\"');\n        }\n        return Promise.resolve(provider.write(fd, pos, data.buffer, 0, data.byteLength));\n    }\n\n    private _getFsProvider(handle: number): vscode.FileSystemProvider {\n        const provider = this._fsProvider.get(handle);\n        if (!provider) {\n            const err = new Error();\n            err.name = 'ENOPRO';\n            err.message = `no provider`;\n            throw err;\n        }\n        return provider;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Range as R, Position as P, Location as L } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\nimport { cloneAndChange } from '../common/objects';\nimport { Position, Range, Location, CallHierarchyItem, URI, TextDocumentShowOptions } from './types-impl';\nimport {\n    fromPosition, fromRange, fromLocation,\n    isModelLocation, toLocation,\n    isModelCallHierarchyItem, fromCallHierarchyItem, toCallHierarchyItem,\n    isModelCallHierarchyIncomingCall, toCallHierarchyIncomingCall,\n    isModelCallHierarchyOutgoingCall, toCallHierarchyOutgoingCall, fromTextDocumentShowOptions\n} from './type-converters';\n\n// Here is a mapping of VSCode commands to monaco commands with their conversions\nexport namespace KnownCommands {\n\n    /**\n     * Commands that you want to apply custom conversions to rather than pass through the automatic args converter.\n     * Would be useful in the case where theia provides some command and you need to provide custom conversions\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const mappings: { [id: string]: [string, (args: any[] | undefined) => any[] | undefined, ((results: any[] | undefined) => any[] | undefined)?] } = {};\n    mappings['editor.action.showReferences'] = ['textEditor.commands.showReferences', createConversionFunction(\n        (uri: URI) => uri.toString(),\n        fromPositionToP,\n        toArrayConversion(fromLocationToL)),\n        createConversionFunction()];\n\n    /**\n     * Mapping of all editor.action commands to their conversion function.\n     * executeCommand<T> inside of the plugin command registry will automatically convert\n     * incoming arguments from vscode api types to monaco types\n     */\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_VSCODE_TO_MONACO = (args: any[] | undefined) => {\n        if (!args) {\n            return args;\n        }\n        const argStack: ConversionFunction[] = [];\n        args.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => vscodeToMonacoArgsConverter(arg));\n        });\n        if (args) {\n            return createConversionFunction(...argStack)(args);\n        }\n    };\n\n    mappings['editor.action.select.all'] = ['editor.action.select.all', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleHighContrast'] = ['editor.action.toggleHighContrast', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretLeftAction'] = ['editor.action.moveCarretLeftAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveCarretRightAction'] = ['editor.action.moveCarretRightAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transposeLetters'] = ['editor.action.transposeLetters', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.clipboardCopyWithSyntaxHighlightingAction'] = ['editor.action.clipboardCopyWithSyntaxHighlightingAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.commentLine'] = ['editor.action.commentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCommentLine'] = ['editor.action.addCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.removeCommentLine'] = ['editor.action.removeCommentLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.blockComment'] = ['editor.action.blockComment', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showContextMenu'] = ['editor.action.showContextMenu', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUndo'] = ['cursorUndo', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfold'] = ['editor.unfold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldRecursively'] = ['editor.unfoldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.fold'] = ['editor.fold', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldRecursively'] = ['editor.foldRecursively', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAll'] = ['editor.foldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAll'] = ['editor.unfoldAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllBlockComments'] = ['editor.foldAllBlockComments', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldAllMarkerRegions'] = ['editor.foldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.unfoldAllMarkerRegions'] = ['editor.unfoldAllMarkerRegions', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel1'] = ['editor.foldLevel1', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel2'] = ['editor.foldLevel2', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel3'] = ['editor.foldLevel3', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel4'] = ['editor.foldLevel4', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel5'] = ['editor.foldLevel5', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel6'] = ['editor.foldLevel6', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.foldLevel7'] = ['editor.foldLevel7', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomIn'] = ['editor.action.fontZoomIn', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomOut'] = ['editor.action.fontZoomOut', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fontZoomReset'] = ['editor.action.fontZoomReset', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatDocument'] = ['editor.action.formatDocument', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.formatSelection'] = ['editor.action.formatSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesUpAction'] = ['editor.action.copyLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.copyLinesDownAction'] = ['editor.action.copyLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesUpAction'] = ['editor.action.moveLinesUpAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveLinesDownAction'] = ['editor.action.moveLinesDownAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesAscending'] = ['editor.action.sortLinesAscending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sortLinesDescending'] = ['editor.action.sortLinesDescending', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.trimTrailingWhitespace'] = ['editor.action.trimTrailingWhitespace', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.deleteLines'] = ['editor.action.deleteLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.indentLines'] = ['editor.action.indentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.outdentLines'] = ['editor.action.outdentLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineBefore'] = ['editor.action.insertLineBefore', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertLineAfter'] = ['editor.action.insertLineAfter', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllLeft'] = ['deleteAllLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteAllRight'] = ['deleteAllRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.joinLines'] = ['editor.action.joinLines', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transpose'] = ['editor.action.transpose', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToUppercase'] = ['editor.action.transformToUppercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToLowercase'] = ['editor.action.transformToLowercase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.transformToTitlecase'] = ['editor.action.transformToTitlecase', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.expand'] = ['editor.action.smartSelect.expand', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.smartSelect.shrink'] = ['editor.action.smartSelect.shrink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.forceRetokenize'] = ['editor.action.forceRetokenize', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.toggleTabFocusMode'] = ['editor.action.toggleTabFocusMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.gotoLine'] = ['editor.action.gotoLine', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickOutline'] = ['editor.action.quickOutline', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.up'] = ['editor.action.inPlaceReplace.up', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inPlaceReplace.down'] = ['editor.action.inPlaceReplace.down', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.next'] = ['editor.action.diffReview.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.diffReview.prev'] = ['editor.action.diffReview.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectToBracket'] = ['editor.action.selectToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.jumpToBracket'] = ['editor.action.jumpToBracket', CONVERT_VSCODE_TO_MONACO];\n    mappings['actions.findWithSelection'] = ['actions.findWithSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextMatchFindAction'] = ['editor.action.nextMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousMatchFindAction'] = ['editor.action.previousMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.nextSelectionMatchFindAction'] = ['editor.action.nextSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.previousSelectionMatchFindAction'] = ['editor.action.previousSelectionMatchFindAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.openLink'] = ['editor.action.openLink', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.quickFix'] = ['editor.action.quickFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.refactor'] = ['editor.action.refactor', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.sourceAction'] = ['editor.action.sourceAction', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.organizeImports'] = ['editor.action.organizeImports', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.autoFix'] = ['editor.action.autoFix', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.fixAll'] = ['editor.action.fixAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.rename'] = ['editor.action.rename', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAbove'] = ['editor.action.insertCursorAbove', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorBelow'] = ['editor.action.insertCursorBelow', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.insertCursorAtEndOfEachLineSelected'] = ['editor.action.insertCursorAtEndOfEachLineSelected', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToNextFindMatch'] = ['editor.action.addSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addSelectionToPreviousFindMatch'] = ['editor.action.addSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToNextFindMatch'] = ['editor.action.moveSelectionToNextFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.moveSelectionToPreviousFindMatch'] = ['editor.action.moveSelectionToPreviousFindMatch', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectHighlights'] = ['editor.action.selectHighlights', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.changeAll'] = ['editor.action.changeAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToBottom'] = ['editor.action.addCursorsToBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.addCursorsToTop'] = ['editor.action.addCursorsToTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerParameterHints'] = ['editor.action.triggerParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.next'] = ['editor.action.wordHighlight.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.prev'] = ['editor.action.wordHighlight.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.wordHighlight.trigger'] = ['editor.action.wordHighlight.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showAccessibilityHelp'] = ['editor.action.showAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.inspectTokens'] = ['editor.action.inspectTokens', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.next'] = ['editor.action.marker.next', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prev'] = ['editor.action.marker.prev', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.nextInFiles'] = ['editor.action.marker.nextInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.marker.prevInFiles'] = ['editor.action.marker.prevInFiles', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.showHover'] = ['editor.action.showHover', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinition'] = ['editor.action.revealDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDefinitionAside'] = ['editor.action.revealDefinitionAside', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDefinition'] = ['editor.action.peekDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.revealDeclaration'] = ['editor.action.revealDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekDeclaration'] = ['editor.action.peekDeclaration', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToImplementation'] = ['editor.action.goToImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekImplementation'] = ['editor.action.peekImplementation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.goToTypeDefinition'] = ['editor.action.goToTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.peekTypeDefinition'] = ['editor.action.peekTypeDefinition', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.referenceSearch.trigger'] = ['editor.action.referenceSearch.trigger', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.triggerSuggest'] = ['editor.action.triggerSuggest', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearchEditor'] = ['closeReferenceSearchEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelSelection'] = ['cancelSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottom'] = ['cursorBottom', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorBottomSelect'] = ['cursorBottomSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDown'] = ['cursorDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorDownSelect'] = ['cursorDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEnd'] = ['cursorEnd', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorEndSelect'] = ['cursorEndSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHome'] = ['cursorHome', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorHomeSelect'] = ['cursorHomeSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeft'] = ['cursorLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorLeftSelect'] = ['cursorLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDown'] = ['cursorPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageDownSelect'] = ['cursorPageDownSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUp'] = ['cursorPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorPageUpSelect'] = ['cursorPageUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRight'] = ['cursorRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorRightSelect'] = ['cursorRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTop'] = ['cursorTop', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorTopSelect'] = ['cursorTopSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUp'] = ['cursorUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorUpSelect'] = ['cursorUpSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteLeft'] = ['deleteLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteRight'] = ['deleteRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAll'] = ['editor.action.selectAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['expandLineSelection'] = ['expandLineSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['outdent'] = ['outdent', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineDown'] = ['scrollLineDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollLineUp'] = ['scrollLineUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageDown'] = ['scrollPageDown', CONVERT_VSCODE_TO_MONACO];\n    mappings['scrollPageUp'] = ['scrollPageUp', CONVERT_VSCODE_TO_MONACO];\n    mappings['tab'] = ['tab', CONVERT_VSCODE_TO_MONACO];\n    mappings['removeSecondaryCursors'] = ['removeSecondaryCursors', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRight'] = ['cursorWordEndRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordEndRightSelect'] = ['cursorWordEndRightSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeft'] = ['cursorWordStartLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['cursorWordStartLeftSelect'] = ['cursorWordStartLeftSelect', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordLeft'] = ['deleteWordLeft', CONVERT_VSCODE_TO_MONACO];\n    mappings['deleteWordRight'] = ['deleteWordRight', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.cancelOperation'] = ['editor.cancelOperation', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult'] = ['editor.gotoNextSymbolFromResult', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.gotoNextSymbolFromResult.cancel'] = ['editor.gotoNextSymbolFromResult.cancel', CONVERT_VSCODE_TO_MONACO];\n    mappings['openReferenceToSide'] = ['openReferenceToSide', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleExplainMode'] = ['toggleExplainMode', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeFindWidget'] = ['closeFindWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceAll'] = ['editor.action.replaceAll', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.replaceOne'] = ['editor.action.replaceOne', CONVERT_VSCODE_TO_MONACO];\n    mappings['editor.action.selectAllMatches'] = ['editor.action.selectAllMatches', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindCaseSensitive'] = ['toggleFindCaseSensitive', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindInSelection'] = ['toggleFindInSelection', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindRegex'] = ['toggleFindRegex', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleFindWholeWord'] = ['toggleFindWholeWord', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToNextSnippetPlaceholder'] = ['jumpToNextSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['jumpToPrevSnippetPlaceholder'] = ['jumpToPrevSnippetPlaceholder', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveEditorMessage'] = ['leaveEditorMessage', CONVERT_VSCODE_TO_MONACO];\n    mappings['leaveSnippet'] = ['leaveSnippet', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeMarkersNavigation'] = ['closeMarkersNavigation', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReferenceFromEmbeddedEditor'] = ['goToNextReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReferenceFromEmbeddedEditor'] = ['goToPreviousReferenceFromEmbeddedEditor', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeParameterHints'] = ['closeParameterHints', CONVERT_VSCODE_TO_MONACO];\n    mappings['showNextParameterHint'] = ['showNextParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['showPrevParameterHint'] = ['showPrevParameterHint', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestion'] = ['acceptSelectedSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptSelectedSuggestionOnEnter'] = ['acceptSelectedSuggestionOnEnter', CONVERT_VSCODE_TO_MONACO];\n    mappings['hideSuggestWidget'] = ['hideSuggestWidget', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertBestCompletion'] = ['insertBestCompletion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertNextSuggestion'] = ['insertNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['insertPrevSuggestion'] = ['insertPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextPageSuggestion'] = ['selectNextPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectNextSuggestion'] = ['selectNextSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevPageSuggestion'] = ['selectPrevPageSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['selectPrevSuggestion'] = ['selectPrevSuggestion', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionDetails'] = ['toggleSuggestionDetails', CONVERT_VSCODE_TO_MONACO];\n    mappings['toggleSuggestionFocus'] = ['toggleSuggestionFocus', CONVERT_VSCODE_TO_MONACO];\n    mappings['acceptRenameInput'] = ['acceptRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['cancelRenameInput'] = ['cancelRenameInput', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeAccessibilityHelp'] = ['closeAccessibilityHelp', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showNext'] = ['history.showNext', CONVERT_VSCODE_TO_MONACO];\n    mappings['history.showPrevious'] = ['history.showPrevious', CONVERT_VSCODE_TO_MONACO];\n    mappings['closeReferenceSearch'] = ['closeReferenceSearch', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToNextReference'] = ['goToNextReference', CONVERT_VSCODE_TO_MONACO];\n    mappings['goToPreviousReference'] = ['goToPreviousReference', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const CONVERT_MONACO_TO_VSCODE = (args: any | undefined) => {\n        if (!args) {\n            return args;\n        }\n        if (!Array.isArray(args)) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return monacoToVscodeArgsConverter(args);\n        }\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const argsArray: any[] = args;\n        const argStack: ConversionFunction[] = [];\n        argsArray.forEach(_ => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            argStack.push((arg: any) => monacoToVscodeArgsConverter(arg));\n        });\n        if (argsArray) {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return createConversionFunction(...argStack)(argsArray);\n        }\n    };\n\n    // vscode-'executeXXX'-like commands\n    mappings['vscode.executeReferenceProvider'] = ['vscode.executeReferenceProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeImplementationProvider'] = ['vscode.executeImplementationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDefinitionProvider'] = ['vscode.executeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDeclarationProvider'] = ['vscode.executeDeclarationProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeTypeDefinitionProvider'] = ['vscode.executeTypeDefinitionProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeHoverProvider'] = ['vscode.executeHoverProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeDocumentHighlights'] = ['vscode.executeDocumentHighlights', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatDocumentProvider'] = ['vscode.executeFormatDocumentProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatRangeProvider'] = ['vscode.executeFormatRangeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.executeFormatOnTypeProvider'] = ['vscode.executeFormatOnTypeProvider', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.prepareCallHierarchy'] = ['vscode.prepareCallHierarchy', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideIncomingCalls'] = ['vscode.provideIncomingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.provideOutgoingCalls'] = ['vscode.provideOutgoingCalls', CONVERT_VSCODE_TO_MONACO, CONVERT_MONACO_TO_VSCODE];\n    mappings['vscode.open'] = ['vscode.open', CONVERT_VSCODE_TO_MONACO];\n    mappings['vscode.diff'] = ['vscode.diff', CONVERT_VSCODE_TO_MONACO];\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export function map<T>(id: string, args: any[] | undefined, toDo: (mappedId: string, mappedArgs: any[] | undefined, mappedResult: ConversionFunction | undefined) => T): T {\n        if (mappings[id]) {\n            return toDo(mappings[id][0], mappings[id][1](args), mappings[id][2] ? (result => mappings[id][2]!(result)) : undefined);\n        } else {\n            return toDo(id, args, undefined);\n        }\n    }\n\n    export function mapped(id: string): boolean {\n        return !!mappings[id];\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    export type ConversionFunction = ((parameter: any) => any) | undefined;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    function createConversionFunction(...conversions: ConversionFunction[]): (args: any[] | undefined) => any[] | undefined {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return function (args: any[] | undefined): any[] | undefined {\n            if (!args) {\n                return args;\n            }\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            return args.map(function (arg: any, index: number): any {\n                if (index < conversions.length) {\n                    const conversion = conversions[index];\n                    if (conversion) {\n                        return conversion(arg);\n                    }\n                }\n                return arg;\n            });\n        };\n    }\n\n    function fromPositionToP(p: theia.Position): P {\n        return P.create(p.line, p.character);\n    }\n\n    function fromRangeToR(r: theia.Range): R {\n        return R.create(fromPositionToP(r.start), fromPositionToP(r.end));\n    }\n\n    function fromLocationToL(l: theia.Location): L {\n        return L.create(l.uri.toString(), fromRangeToR(l.range));\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function vscodeToMonacoArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (CallHierarchyItem.isCallHierarchyItem(value)) {\n                return fromCallHierarchyItem(value);\n            }\n            if (TextDocumentShowOptions.isTextDocumentShowOptions(value)) {\n                return fromTextDocumentShowOptions(value);\n            }\n            if (Position.isPosition(value)) {\n                return fromPosition(value);\n            }\n            if (Range.isRange(value)) {\n                return fromRange(value);\n            }\n            if (Location.isLocation(value)) {\n                return fromLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/tslint/config\n    function monacoToVscodeArgsConverter(args: any[]) {\n        // tslint:disable-next-line:typedef\n        return cloneAndChange(args, function (value) {\n            if (isModelCallHierarchyItem(value)) {\n                return toCallHierarchyItem(value);\n            }\n            if (isModelCallHierarchyIncomingCall(value)) {\n                return toCallHierarchyIncomingCall(value);\n            }\n            if (isModelCallHierarchyOutgoingCall(value)) {\n                return toCallHierarchyOutgoingCall(value);\n            }\n            if (isModelLocation(value)) {\n                return toLocation(value);\n            }\n            if (!Array.isArray(value)) {\n                return value;\n            }\n\n        });\n    }\n}\n\nfunction toArrayConversion<T, U>(f: (a: T) => U): (a: T[]) => U[] {\n    // tslint:disable-next-line:typedef\n    return function (a: T[]) {\n        return a.map(f);\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ResourceLabelFormatter } from '@theia/plugin';\nimport { Disposable } from '@theia/core/lib/common/disposable';\nimport { LabelServiceExt, LabelServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class LabelServiceExtImpl implements LabelServiceExt {\n    private handle: number = 0;\n    private proxy: LabelServiceMain;\n    constructor(readonly rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LABEL_SERVICE_MAIN);\n    }\n\n    $registerResourceLabelFormatter(formatter: ResourceLabelFormatter): Disposable {\n        const handle = this.handle++;\n        this.proxy.$registerResourceLabelFormatter(handle, formatter);\n        return Disposable.create(() => {\n            this.proxy.$unregisterResourceLabelFormatter(handle);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { SerializedIndentationRule, SerializedOnEnterRule, SerializedRegExp } from '../common';\n\nexport function serializeEnterRules(rules?: theia.OnEnterRule[]): SerializedOnEnterRule[] | undefined {\n    if (typeof rules === 'undefined' || rules === null) {\n        return undefined;\n    }\n\n    return rules.map(r =>\n    ({\n        beforeText: serializeRegExp(r.beforeText),\n        afterText: serializeRegExp(r.afterText),\n        previousLineText: serializeRegExp(r.previousLineText),\n        action: r.action,\n    } as SerializedOnEnterRule));\n}\n\nexport function serializeRegExp(regexp?: RegExp): SerializedRegExp | undefined {\n    if (typeof regexp === 'undefined' || regexp === null) {\n        return undefined;\n    }\n\n    return {\n        pattern: regexp.source,\n        flags: (regexp.global ? 'g' : '') + (regexp.ignoreCase ? 'i' : '') + (regexp.multiline ? 'm' : '')\n    };\n}\n\nexport function serializeIndentation(indentationRules?: theia.IndentationRule): SerializedIndentationRule | undefined {\n    if (typeof indentationRules === 'undefined' || indentationRules === null) {\n        return undefined;\n    }\n\n    return {\n        increaseIndentPattern: serializeRegExp(indentationRules.increaseIndentPattern),\n        decreaseIndentPattern: serializeRegExp(indentationRules.decreaseIndentPattern),\n        indentNextLinePattern: serializeRegExp(indentationRules.indentNextLinePattern),\n        unIndentedLinePattern: serializeRegExp(indentationRules.unIndentedLinePattern)\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    LanguagesExt,\n    PLUGIN_RPC_CONTEXT,\n    LanguagesMain,\n    SerializedLanguageConfiguration,\n    Position,\n    Selection,\n    RawColorInfo,\n    WorkspaceEditDto,\n    PluginInfo,\n    Plugin,\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from './documents';\nimport { PluginModel } from '../common/plugin-protocol';\nimport { Disposable, URI, LanguageStatusSeverity } from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport {\n    CodeActionProviderDocumentation,\n    CompletionContext,\n    CompletionResultDto,\n    Completion,\n    SerializedDocumentFilter,\n    SignatureHelp,\n    Hover,\n    DocumentHighlight,\n    Range,\n    TextEdit,\n    FormattingOptions,\n    Definition,\n    DocumentLink,\n    CodeLensSymbol,\n    DocumentSymbol,\n    ReferenceContext,\n    Location,\n    ColorPresentation,\n    RenameLocation,\n    SignatureHelpContext,\n    CodeActionContext,\n    CodeAction,\n    FoldingRange,\n    SelectionRange,\n    ChainedCacheId,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    LinkedEditingRanges,\n    EvaluatableExpression\n} from '../common/plugin-api-rpc-model';\nimport { CompletionAdapter } from './languages/completion';\nimport { Diagnostics } from './languages/diagnostics';\nimport { SignatureHelpAdapter } from './languages/signature';\nimport { HoverAdapter } from './languages/hover';\nimport { EvaluatableExpressionAdapter } from './languages/evaluatable-expression';\nimport { DocumentHighlightAdapter } from './languages/document-highlight';\nimport { DocumentFormattingAdapter } from './languages/document-formatting';\nimport { RangeFormattingAdapter } from './languages/range-formatting';\nimport { OnTypeFormattingAdapter } from './languages/on-type-formatting';\nimport { DefinitionAdapter } from './languages/definition';\nimport { ImplementationAdapter } from './languages/implementation';\nimport { TypeDefinitionAdapter } from './languages/type-definition';\nimport { CodeActionAdapter } from './languages/code-action';\nimport { LinkProviderAdapter } from './languages/link-provider';\nimport { CodeLensAdapter } from './languages/lens';\nimport { OutlineAdapter } from './languages/outline';\nimport { ReferenceAdapter } from './languages/reference';\nimport { WorkspaceSymbolAdapter } from './languages/workspace-symbol';\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport { FoldingProviderAdapter } from './languages/folding';\nimport { SelectionRangeProviderAdapter } from './languages/selection-range';\nimport { ColorProviderAdapter } from './languages/color';\nimport { RenameAdapter } from './languages/rename';\nimport { Event } from '@theia/core/lib/common/event';\nimport { CommandRegistryImpl } from './command-registry';\nimport { DeclarationAdapter } from './languages/declaration';\nimport { CallHierarchyAdapter } from './languages/call-hierarchy';\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport { DocumentSemanticTokensAdapter, DocumentRangeSemanticTokensAdapter } from './languages/semantic-highlighting';\nimport { isReadonlyArray } from '../common/arrays';\nimport { DisposableCollection, disposableTimeout, Disposable as TheiaDisposable } from '@theia/core/lib/common/disposable';\nimport { Severity } from '@theia/core/lib/common/severity';\nimport { LinkedEditingRangeAdapter } from './languages/linked-editing-range';\nimport { serializeEnterRules, serializeIndentation, serializeRegExp } from './languages-utils';\n\ntype Adapter = CompletionAdapter |\n    SignatureHelpAdapter |\n    HoverAdapter |\n    EvaluatableExpressionAdapter |\n    DocumentHighlightAdapter |\n    DocumentFormattingAdapter |\n    RangeFormattingAdapter |\n    OnTypeFormattingAdapter |\n    DefinitionAdapter |\n    DeclarationAdapter |\n    ImplementationAdapter |\n    TypeDefinitionAdapter |\n    LinkProviderAdapter |\n    CodeLensAdapter |\n    CodeActionAdapter |\n    OutlineAdapter |\n    ReferenceAdapter |\n    WorkspaceSymbolAdapter |\n    FoldingProviderAdapter |\n    SelectionRangeProviderAdapter |\n    ColorProviderAdapter |\n    RenameAdapter |\n    CallHierarchyAdapter |\n    DocumentRangeSemanticTokensAdapter |\n    DocumentSemanticTokensAdapter |\n    LinkedEditingRangeAdapter;\n\nexport class LanguagesExtImpl implements LanguagesExt {\n\n    private proxy: LanguagesMain;\n\n    private readonly diagnostics: Diagnostics;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, Adapter>();\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n        this.diagnostics = new Diagnostics(rpc);\n    }\n\n    get onDidChangeDiagnostics(): Event<theia.DiagnosticChangeEvent> {\n        return this.diagnostics.onDidChangeDiagnostics;\n    }\n\n    getLanguages(): Promise<string[]> {\n        return this.proxy.$getLanguages();\n    }\n\n    changeLanguage(uri: URI, languageId: string): Promise<theia.TextDocument> {\n        return this.proxy.$changeLanguage(uri, languageId).then(() => {\n            const doc = this.documents.getDocumentData(uri);\n            if (!doc) {\n                throw new Error('No document found by URI ' + uri.toString());\n            }\n            return doc.document;\n        });\n    }\n\n    setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n        const { wordPattern } = configuration;\n\n        if (wordPattern) {\n            this.documents.setWordDefinitionFor(language, wordPattern);\n        } else {\n            this.documents.setWordDefinitionFor(language, null);\n        }\n\n        const callId = this.nextCallId();\n\n        const config: SerializedLanguageConfiguration = {\n            brackets: configuration.brackets,\n            comments: configuration.comments,\n            onEnterRules: serializeEnterRules(configuration.onEnterRules),\n            wordPattern: serializeRegExp(configuration.wordPattern),\n            indentationRules: serializeIndentation(configuration.indentationRules)\n        };\n\n        this.proxy.$setLanguageConfiguration(callId, language, config);\n        return this.createDisposable(callId);\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number, onDispose?: () => void): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n            onDispose?.();\n        });\n    }\n\n    private addNewAdapter(adapter: Adapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async withAdapter<A, R>(handle: number, ctor: { new(...args: any[]): A }, callback: (adapter: A) => Promise<R>, fallbackValue: R): Promise<R> {\n        const adapter = this.adaptersMap.get(handle);\n        if (!adapter) {\n            return fallbackValue;\n        }\n        if (adapter instanceof ctor) {\n            return callback(adapter);\n        }\n        throw new Error('no adapter found');\n    }\n\n    private transformDocumentSelector(selector: theia.DocumentSelector): SerializedDocumentFilter[] {\n        if (isReadonlyArray(selector)) {\n            return selector.map(sel => this.doTransformDocumentSelector(sel)!);\n        }\n\n        return [this.doTransformDocumentSelector(selector)!];\n    }\n\n    private doTransformDocumentSelector(selector: string | theia.DocumentFilter): SerializedDocumentFilter | undefined {\n        if (typeof selector === 'string') {\n            return {\n                $serialized: true,\n                language: selector\n            };\n        }\n\n        if (selector) {\n            return {\n                $serialized: true,\n                language: selector.language,\n                scheme: selector.scheme,\n                pattern: selector.pattern\n            };\n        }\n\n        return undefined;\n    }\n\n    // ### Completion begin\n    $provideCompletionItems(handle: number, resource: UriComponents, position: Position,\n        context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.provideCompletionItems(URI.revive(resource), position, context, token), undefined);\n    }\n\n    $resolveCompletionItem(handle: number, chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        return this.withAdapter(handle, CompletionAdapter, adapter => adapter.resolveCompletionItem(chainedId, token), undefined);\n    }\n\n    $releaseCompletionItems(handle: number, id: number): void {\n        this.withAdapter(handle, CompletionAdapter, async adapter => adapter.releaseCompletionItems(id), undefined);\n    }\n\n    registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, triggerCharacters: string[],\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CompletionAdapter(provider, this.documents, this.commands));\n        this.proxy.$registerCompletionSupport(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters, CompletionAdapter.hasResolveSupport(provider));\n        return this.createDisposable(callId);\n    }\n    // ### Completion end\n\n    // ### Definition provider begin\n    $provideDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DefinitionAdapter, adapter => adapter.provideDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DefinitionAdapter(provider, this.documents));\n        this.proxy.$registerDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Definition provider end\n\n    // ### Declaration provider begin\n    $provideDeclaration(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, DeclarationAdapter, adapter => adapter.provideDeclaration(URI.revive(resource), position, token), undefined);\n    }\n\n    registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DeclarationAdapter(provider, this.documents));\n        this.proxy.$registerDeclarationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Declaration provider end\n\n    // ### Signature help begin\n    $provideSignatureHelp(\n        handle: number, resource: UriComponents, position: Position, context: SignatureHelpContext, token: theia.CancellationToken\n    ): Promise<SignatureHelp | undefined> {\n        return this.withAdapter(handle, SignatureHelpAdapter, adapter => adapter.provideSignatureHelp(URI.revive(resource), position, token, context), undefined);\n    }\n\n    $releaseSignatureHelp(handle: number, id: number): void {\n        this.withAdapter(handle, SignatureHelpAdapter, async adapter => adapter.releaseSignatureHelp(id), undefined);\n    }\n\n    registerSignatureHelpProvider(selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, metadata: theia.SignatureHelpProviderMetadata,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SignatureHelpAdapter(provider, this.documents));\n        this.proxy.$registerSignatureHelpProvider(callId, pluginInfo, this.transformDocumentSelector(selector), metadata);\n        return this.createDisposable(callId);\n    }\n    // ### Signature help end\n\n    // ### Diagnostics begin\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        return this.diagnostics.getDiagnostics(resource!);\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        return this.diagnostics.createDiagnosticCollection(name);\n    }\n    // ### Diagnostics end\n\n    // ### Implementation provider begin\n    $provideImplementation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, ImplementationAdapter, adapter => adapter.provideImplementation(URI.revive(resource), position, token), undefined);\n    }\n\n    registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ImplementationAdapter(provider, this.documents));\n        this.proxy.$registerImplementationProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Implementation provider end\n\n    // ### Type Definition provider begin\n    $provideTypeDefinition(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        return this.withAdapter(handle, TypeDefinitionAdapter, adapter => adapter.provideTypeDefinition(URI.revive(resource), position, token), undefined);\n    }\n\n    registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new TypeDefinitionAdapter(provider, this.documents));\n        this.proxy.$registerTypeDefinitionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Type Definition provider end\n\n    // ### Hover Provider begin\n    registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new HoverAdapter(provider, this.documents));\n        this.proxy.$registerHoverProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideHover(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        return this.withAdapter(handle, HoverAdapter, adapter => adapter.provideHover(URI.revive(resource), position, token), undefined);\n    }\n    // ### Hover Provider end\n\n    // ### EvaluatableExpression Provider begin\n    registerEvaluatableExpressionProvider(selector: theia.DocumentSelector, provider: theia.EvaluatableExpressionProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new EvaluatableExpressionAdapter(provider, this.documents));\n        this.proxy.$registerEvaluatableExpressionProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideEvaluatableExpression(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<EvaluatableExpression | undefined> {\n        return this.withAdapter(handle, EvaluatableExpressionAdapter, adapter => adapter.provideEvaluatableExpression(URI.revive(resource), position, token), undefined);\n    }\n    // ### EvaluatableExpression Provider end\n\n    // ### Document Highlight Provider begin\n    registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentHighlightAdapter(provider, this.documents));\n        this.proxy.$registerDocumentHighlightProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentHighlights(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        return this.withAdapter(handle, DocumentHighlightAdapter, adapter => adapter.provideDocumentHighlights(URI.revive(resource), position, token), undefined);\n    }\n    // ### Document Highlight Provider end\n\n    // ### WorkspaceSymbol Provider begin\n    registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new WorkspaceSymbolAdapter(provider));\n        this.proxy.$registerWorkspaceSymbolProvider(callId, pluginInfo);\n        return this.createDisposable(callId);\n    }\n\n    $provideWorkspaceSymbols(handle: number, query: string, token: theia.CancellationToken): PromiseLike<SymbolInformation[]> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.provideWorkspaceSymbols(query, token), []);\n    }\n\n    $resolveWorkspaceSymbol(handle: number, symbol: SymbolInformation, token: theia.CancellationToken): PromiseLike<SymbolInformation | undefined> {\n        return this.withAdapter(handle, WorkspaceSymbolAdapter, adapter => adapter.resolveWorkspaceSymbol(symbol, token), undefined);\n    }\n    // ### WorkspaceSymbol Provider end\n\n    // ### Document Formatting Edit begin\n    registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new DocumentFormattingAdapter(provider, this.documents));\n        this.proxy.$registerDocumentFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentFormattingEdits(handle: number, resource: UriComponents,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, DocumentFormattingAdapter, adapter => adapter.provideDocumentFormattingEdits(URI.revive(resource), options, token), undefined);\n    }\n    // ### Document Formatting Edit end\n\n    // ### Document Range Formatting Edit begin\n    registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RangeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerRangeFormattingSupport(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentRangeFormattingEdits(handle: number, resource: UriComponents, range: Range,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, RangeFormattingAdapter, adapter => adapter.provideDocumentRangeFormattingEdits(URI.revive(resource), range, options, token), undefined);\n    }\n    // ### Document Range Formatting Edit end\n\n    // ### On Type Formatting Edit begin\n    registerOnTypeFormattingEditProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.OnTypeFormattingEditProvider,\n        triggerCharacters: string[],\n        pluginInfo: PluginInfo\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new OnTypeFormattingAdapter(provider, this.documents));\n        this.proxy.$registerOnTypeFormattingProvider(callId, pluginInfo, this.transformDocumentSelector(selector), triggerCharacters);\n        return this.createDisposable(callId);\n    }\n\n    $provideOnTypeFormattingEdits(handle: number, resource: UriComponents, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        return this.withAdapter(handle, OnTypeFormattingAdapter, adapter => adapter.provideOnTypeFormattingEdits(URI.revive(resource), position, ch, options, token), undefined);\n    }\n    // ### On Type Formatting Edit end\n\n    // ### Document Link Provider begin\n    $provideDocumentLinks(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.provideLinks(URI.revive(resource), token), undefined);\n    }\n\n    $resolveDocumentLink(handle: number, link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        return this.withAdapter(handle, LinkProviderAdapter, adapter => adapter.resolveLink(link, token), undefined);\n    }\n\n    registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new LinkProviderAdapter(provider, this.documents));\n        this.proxy.$registerDocumentLinkProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $releaseDocumentLinks(handle: number, ids: number[]): void {\n        this.withAdapter(handle, LinkProviderAdapter, async adapter => adapter.releaseDocumentLinks(ids), undefined);\n    }\n\n    // ### Document Link Provider end\n\n    // ### Code Actions Provider begin\n    registerCodeActionsProvider(\n        selector: theia.DocumentSelector,\n        provider: theia.CodeActionProvider,\n        pluginModel: PluginModel,\n        pluginInfo: PluginInfo,\n        metadata?: theia.CodeActionProviderMetadata\n    ): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeActionAdapter(provider, this.documents, this.diagnostics, pluginModel ? pluginModel.id : '', this.commands));\n\n        let documentation: CodeActionProviderDocumentation | undefined;\n        let disposables: DisposableCollection | undefined;\n        if (metadata && metadata.documentation) {\n            disposables = new DisposableCollection();\n            documentation = metadata.documentation.map(doc => ({\n                kind: doc.kind.value,\n                command: this.commands.converter.toSafeCommand(doc.command, disposables!)\n            }));\n        }\n\n        this.proxy.$registerQuickFixProvider(\n            callId,\n            pluginInfo,\n            this.transformDocumentSelector(selector),\n            metadata && metadata.providedCodeActionKinds ? metadata.providedCodeActionKinds.map(kind => kind.value) : undefined,\n            documentation\n        );\n\n        return this.createDisposable(callId, disposables?.dispose);\n    }\n\n    $provideCodeActions(handle: number,\n        resource: UriComponents,\n        rangeOrSelection: Range | Selection,\n        context: CodeActionContext,\n        token: theia.CancellationToken\n    ): Promise<CodeAction[] | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.provideCodeAction(URI.revive(resource), rangeOrSelection, context, token), undefined);\n    }\n\n    $releaseCodeActions(handle: number, cacheIds: number[]): void {\n        this.withAdapter(handle, CodeActionAdapter, adapter => adapter.releaseCodeActions(cacheIds), undefined);\n    }\n\n    $resolveCodeAction(handle: number, cacheId: number, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, CodeActionAdapter, adapter => adapter.resolveCodeAction(cacheId, token), undefined);\n    };\n\n    // ### Code Actions Provider end\n\n    // ### Code Lens Provider begin\n    registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new CodeLensAdapter(provider, this.documents, this.commands));\n        const eventHandle = typeof provider.onDidChangeCodeLenses === 'function' ? this.nextCallId() : undefined;\n        this.proxy.$registerCodeLensSupport(callId, pluginInfo, this.transformDocumentSelector(selector), eventHandle);\n        let result = this.createDisposable(callId);\n\n        if (eventHandle !== undefined && provider.onDidChangeCodeLenses) {\n            const subscription = provider.onDidChangeCodeLenses(e => this.proxy.$emitCodeLensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideCodeLenses(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.provideCodeLenses(URI.revive(resource), token), undefined);\n    }\n\n    $resolveCodeLens(handle: number, resource: UriComponents, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        return this.withAdapter(handle, CodeLensAdapter, adapter => adapter.resolveCodeLens(URI.revive(resource), symbol, token), undefined);\n    }\n\n    $releaseCodeLenses(handle: number, ids: number[]): void {\n        this.withAdapter(handle, CodeLensAdapter, async adapter => adapter.releaseCodeLenses(ids), undefined);\n    }\n    // ### Code Lens Provider end\n\n    // ### Code Reference Provider begin\n    $provideReferences(handle: number, resource: UriComponents, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        return this.withAdapter(handle, ReferenceAdapter, adapter => adapter.provideReferences(URI.revive(resource), position, context, token), undefined);\n    }\n\n    registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ReferenceAdapter(provider, this.documents));\n        this.proxy.$registerReferenceProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n    // ### Code Reference Provider end\n\n    // ### Document Symbol Provider begin\n    registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider, pluginInfo: PluginInfo,\n        metadata?: theia.DocumentSymbolProviderMetadata): theia.Disposable {\n        const callId = this.addNewAdapter(new OutlineAdapter(this.documents, provider));\n        const displayName = (metadata && metadata.label) || getPluginLabel(pluginInfo);\n        this.proxy.$registerOutlineSupport(callId, pluginInfo, this.transformDocumentSelector(selector), displayName);\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentSymbols(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        return this.withAdapter(handle, OutlineAdapter, adapter => adapter.provideDocumentSymbols(URI.revive(resource), token), undefined);\n    }\n    // ### Document Symbol Provider end\n\n    // ### Color Provider begin\n    registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new ColorProviderAdapter(this.documents, provider));\n        this.proxy.$registerDocumentColorProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideDocumentColors(handle: number, resource: UriComponents, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColors(URI.revive(resource), token), []);\n    }\n\n    $provideColorPresentations(handle: number, resource: UriComponents, colorInfo: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        return this.withAdapter(handle, ColorProviderAdapter, adapter => adapter.provideColorPresentations(URI.revive(resource), colorInfo, token), []);\n    }\n    // ### Color Provider end\n\n    // ### Folding Range Provider begin\n    registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new FoldingProviderAdapter(provider, this.documents));\n        this.proxy.$registerFoldingRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideFoldingRange(\n        callId: number,\n        resource: UriComponents,\n        context: theia.FoldingContext,\n        token: theia.CancellationToken\n    ): Promise<FoldingRange[] | undefined> {\n        return this.withAdapter(callId, FoldingProviderAdapter, adapter => adapter.provideFoldingRanges(URI.revive(resource), context, token), undefined);\n    }\n    // ### Folding Range Provider end\n\n    registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new SelectionRangeProviderAdapter(provider, this.documents));\n        this.proxy.$registerSelectionRangeProvider(callId, pluginInfo, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideSelectionRanges(handle: number, resource: UriComponents, positions: Position[], token: theia.CancellationToken): Promise<SelectionRange[][]> {\n        return this.withAdapter(handle, SelectionRangeProviderAdapter, adapter => adapter.provideSelectionRanges(URI.revive(resource), positions, token), []);\n    }\n\n    // ### Rename Provider begin\n    registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider, pluginInfo: PluginInfo): theia.Disposable {\n        const callId = this.addNewAdapter(new RenameAdapter(provider, this.documents));\n        this.proxy.$registerRenameProvider(callId, pluginInfo, this.transformDocumentSelector(selector), RenameAdapter.supportsResolving(provider));\n        return this.createDisposable(callId);\n    }\n\n    $provideRenameEdits(handle: number, resource: UriComponents, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.provideRenameEdits(URI.revive(resource), position, newName, token), undefined);\n    }\n\n    $resolveRenameLocation(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<RenameLocation | undefined> {\n        return this.withAdapter(handle, RenameAdapter, adapter => adapter.resolveRenameLocation(URI.revive(resource), position, token), undefined);\n    }\n    // ### Rename Provider end\n\n    // ### Call Hierarchy Provider begin\n    registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new CallHierarchyAdapter(provider, this.documents));\n        this.proxy.$registerCallHierarchyProvider(callId, this.transformDocumentSelector(selector));\n        return this.createDisposable(callId);\n    }\n\n    $provideRootDefinition(\n        handle: number, resource: UriComponents, location: Position, token: theia.CancellationToken\n    ): Promise<CallHierarchyItem[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideRootDefinition(URI.revive(resource), location, token), undefined);\n    }\n\n    $provideCallers(handle: number, definition: CallHierarchyItem, token: theia.CancellationToken): Promise<CallHierarchyIncomingCall[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallers(definition, token), undefined);\n    }\n\n    $provideCallees(handle: number, definition: CallHierarchyItem, token: theia.CancellationToken): Promise<CallHierarchyOutgoingCall[] | undefined> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.provideCallees(definition, token), undefined);\n    }\n\n    $releaseCallHierarchy(handle: number, session?: string): Promise<boolean> {\n        return this.withAdapter(handle, CallHierarchyAdapter, adapter => adapter.releaseSession(session), false);\n    }\n    // ### Call Hierarchy Provider end\n\n    // ### Linked Editing Range Provider begin\n    registerLinkedEditingRangeProvider(selector: theia.DocumentSelector, provider: theia.LinkedEditingRangeProvider): theia.Disposable {\n        const handle = this.addNewAdapter(new LinkedEditingRangeAdapter(this.documents, provider));\n        this.proxy.$registerLinkedEditingRangeProvider(handle, this.transformDocumentSelector(selector));\n        return this.createDisposable(handle);\n    }\n\n    $provideLinkedEditingRanges(handle: number, resource: UriComponents, position: Position, token: theia.CancellationToken): Promise<LinkedEditingRanges | undefined> {\n        return this.withAdapter(handle, LinkedEditingRangeAdapter, async adapter => adapter.provideRanges(URI.revive(resource), position, token), undefined);\n    }\n\n    // ### Linked Editing Range Provider end\n\n    // #region semantic coloring\n\n    registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend,\n        pluginInfo: PluginInfo): theia.Disposable {\n        const eventHandle = (typeof provider.onDidChangeSemanticTokens === 'function' ? this.nextCallId() : undefined);\n\n        const handle = this.addNewAdapter(new DocumentSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend, eventHandle);\n        let result = this.createDisposable(handle);\n\n        if (eventHandle) {\n            // eslint-disable-next-line no-unsanitized/method\n            const subscription = provider.onDidChangeSemanticTokens!(_ => this.proxy.$emitDocumentSemanticTokensEvent(eventHandle));\n            result = Disposable.from(result, subscription);\n        }\n\n        return result;\n    }\n\n    $provideDocumentSemanticTokens(handle: number, resource: UriComponents, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.provideDocumentSemanticTokens(URI.revive(resource), previousResultId, token), null);\n    }\n\n    $releaseDocumentSemanticTokens(handle: number, semanticColoringResultId: number): void {\n        this.withAdapter(handle, DocumentSemanticTokensAdapter, adapter => adapter.releaseDocumentSemanticColoring(semanticColoringResultId), undefined);\n    }\n\n    registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider,\n        legend: theia.SemanticTokensLegend, pluginInfo: PluginInfo): theia.Disposable {\n        const handle = this.addNewAdapter(new DocumentRangeSemanticTokensAdapter(this.documents, provider));\n        this.proxy.$registerDocumentRangeSemanticTokensProvider(handle, pluginInfo, this.transformDocumentSelector(selector), legend);\n        return this.createDisposable(handle);\n    }\n\n    $provideDocumentRangeSemanticTokens(handle: number, resource: UriComponents, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        return this.withAdapter(handle, DocumentRangeSemanticTokensAdapter, adapter => adapter.provideDocumentRangeSemanticTokens(URI.revive(resource), range, token), null);\n    }\n\n    // Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/workbench/api/common/extHostLanguages.ts\n    protected statusItemHandlePool = 0;\n    protected readonly statusItemIds = new Set<string>();\n    createLanguageStatusItem(extension: Plugin, id: string, selector: theia.DocumentSelector): theia.LanguageStatusItem {\n\n        const handle = this.statusItemHandlePool++;\n        const proxy = this.proxy;\n        const ids = this.statusItemIds;\n\n        // enforce extension unique identifier\n        const fullyQualifiedId = `${extension.model.id}/${id}`;\n        if (ids.has(fullyQualifiedId)) {\n            throw new Error(`LanguageStatusItem with id '${id}' ALREADY exists`);\n        }\n        ids.add(fullyQualifiedId);\n\n        const data: Omit<theia.LanguageStatusItem, 'dispose'> = {\n            selector,\n            id,\n            name: extension.model.displayName ?? extension.model.name,\n            severity: LanguageStatusSeverity.Information,\n            command: undefined,\n            text: '',\n            detail: '',\n            busy: false\n        };\n\n        let soonHandle: TheiaDisposable | undefined;\n        const commandDisposables = new DisposableCollection();\n        const updateAsync = () => {\n            soonHandle?.dispose();\n            soonHandle = disposableTimeout(() => {\n                commandDisposables.dispose();\n                commandDisposables.push({ dispose: () => { } }); // Mark disposable as undisposed.\n                this.proxy.$setLanguageStatus(handle, {\n                    id: fullyQualifiedId,\n                    name: data.name ?? extension.model.displayName ?? extension.model.name,\n                    source: extension.model.displayName ?? extension.model.name,\n                    selector: this.transformDocumentSelector(data.selector),\n                    label: data.text,\n                    detail: data.detail ?? '',\n                    severity: data.severity === LanguageStatusSeverity.Error ? Severity.Error : data.severity === LanguageStatusSeverity.Warning ? Severity.Warning : Severity.Info,\n                    command: data.command && this.commands.converter.toSafeCommand(data.command, commandDisposables),\n                    accessibilityInfo: data.accessibilityInformation,\n                    busy: data.busy\n                });\n            }, 0);\n        };\n\n        const result: theia.LanguageStatusItem = {\n            dispose(): void {\n                commandDisposables.dispose();\n                soonHandle?.dispose();\n                proxy.$removeLanguageStatus(handle);\n                ids.delete(fullyQualifiedId);\n            },\n            get id(): string {\n                return data.id;\n            },\n            get name(): string | undefined {\n                return data.name;\n            },\n            set name(value) {\n                data.name = value;\n                updateAsync();\n            },\n            get selector(): theia.DocumentSelector {\n                return data.selector;\n            },\n            set selector(value) {\n                data.selector = value;\n                updateAsync();\n            },\n            get text(): string {\n                return data.text;\n            },\n            set text(value) {\n                data.text = value;\n                updateAsync();\n            },\n            get detail(): string | undefined {\n                return data.detail;\n            },\n            set detail(value) {\n                data.detail = value;\n                updateAsync();\n            },\n            get severity(): theia.LanguageStatusSeverity {\n                return data.severity;\n            },\n            set severity(value) {\n                data.severity = value;\n                updateAsync();\n            },\n            get accessibilityInformation(): theia.AccessibilityInformation | undefined {\n                return data.accessibilityInformation;\n            },\n            set accessibilityInformation(value) {\n                data.accessibilityInformation = value;\n                updateAsync();\n            },\n            get command(): theia.Command | undefined {\n                return data.command;\n            },\n            set command(value) {\n                data.command = value;\n                updateAsync();\n            },\n            get busy(): boolean {\n                return data.busy;\n            },\n            set busy(value: boolean) {\n                data.busy = value;\n                updateAsync();\n            }\n        };\n        updateAsync();\n        return result;\n    }\n    // #endregion\n}\n\nfunction getPluginLabel(pluginInfo: PluginInfo): string {\n    return pluginInfo.displayName || pluginInfo.name;\n}\n\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as dto from '../../common/plugin-api-rpc-model';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport * as types from '../types-impl';\nimport { fromRange } from '../type-converters';\n\nexport class CallHierarchyAdapter {\n\n    constructor(\n        private readonly provider: theia.CallHierarchyProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    protected sessionIds = 0;\n    protected readonly cache = new Map<string, Map<string, theia.CallHierarchyItem>>();\n\n    async provideRootDefinition(\n        resource: URI, position: rpc.Position, token: theia.CancellationToken\n    ): Promise<dto.CallHierarchyItem[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const definition = await this.provider.prepareCallHierarchy(documentData.document,\n            new types.Position(\n                position.lineNumber,\n                position.column\n            ),\n            token\n        );\n\n        if (!definition) {\n            return undefined;\n        }\n        const sessionId = (this.sessionIds++).toString(36);\n        this.cache.set(sessionId, new Map());\n        return Array.isArray(definition) ? definition.map(item => this.fromCallHierarchyItem(item, sessionId)) : [this.fromCallHierarchyItem(definition, sessionId)];\n    }\n\n    async provideCallers(definition: dto.CallHierarchyItem, token: theia.CancellationToken): Promise<dto.CallHierarchyIncomingCall[] | undefined> {\n        const callers = await this.provider.provideCallHierarchyIncomingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callers) {\n            return undefined;\n        }\n\n        return callers.map(item => this.fromCallHierarchyIncomingCall(item, definition._sessionId!));\n    }\n\n    async provideCallees(definition: dto.CallHierarchyItem, token: theia.CancellationToken): Promise<dto.CallHierarchyOutgoingCall[] | undefined> {\n        const callees = await this.provider.provideCallHierarchyOutgoingCalls(this.toCallHierarchyItem(definition), token);\n        if (!callees) {\n            return undefined;\n        }\n\n        return callees.map(item => this.fromCallHierarchyOutgoingCall(item, definition._sessionId!));\n    }\n\n    private fromCallHierarchyItem(item: theia.CallHierarchyItem, sessionId: string): dto.CallHierarchyItem {\n        const sessionCache = this.cache.get(sessionId)!;\n        const itemId = sessionCache.size.toString(36);\n        const definition: dto.CallHierarchyItem = {\n            uri: item.uri,\n            range: fromRange(item.range),\n            selectionRange: fromRange(item.selectionRange),\n            name: item.name,\n            kind: item.kind,\n            tags: item.tags,\n            _itemId: itemId,\n            _sessionId: sessionId,\n        };\n        sessionCache.set(itemId, item);\n        return definition;\n    }\n\n    private toCallHierarchyItem(definition: dto.CallHierarchyItem): theia.CallHierarchyItem {\n        const cached = this.cache.get(definition._sessionId!)?.get(definition._itemId!);\n        if (!cached) {\n            throw new Error(`Found no cached item corresponding to ${definition.name} in ${definition.uri.path} with ID ${definition.data}.`);\n        }\n        return cached;\n    }\n\n    private fromCallHierarchyIncomingCall(caller: theia.CallHierarchyIncomingCall, sessionId: string): dto.CallHierarchyIncomingCall {\n        return {\n            from: this.fromCallHierarchyItem(caller.from, sessionId),\n            fromRanges: caller.fromRanges.map(r => fromRange(r))\n        };\n    }\n\n    protected fromCallHierarchyOutgoingCall(caller: theia.CallHierarchyOutgoingCall, sessionId: string): dto.CallHierarchyOutgoingCall {\n        return {\n            to: this.fromCallHierarchyItem(caller.to, sessionId),\n            fromRanges: caller.fromRanges.map(r => fromRange(r)),\n        };\n    }\n\n    releaseSession(session?: string): Promise<boolean> {\n        if (session !== undefined) {\n            return Promise.resolve(this.cache.delete(session));\n        } else {\n            this.cache.clear();\n            return Promise.resolve(true);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { Selection, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range, CodeActionContext, CodeAction } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { DocumentsExtImpl } from '../documents';\nimport { Diagnostics } from './diagnostics';\nimport { CodeActionKind } from '../types-impl';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CodeActionAdapter {\n\n    constructor(\n        private readonly provider: theia.CodeActionProvider,\n        private readonly document: DocumentsExtImpl,\n        private readonly diagnostics: Diagnostics,\n        private readonly pluginId: string,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    private readonly cache = new Map<number, theia.CodeAction | theia.Command>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    private cacheId = 0;\n\n    async provideCodeAction(resource: URI, rangeOrSelection: Range | Selection,\n        context: CodeActionContext, token: theia.CancellationToken): Promise<CodeAction[] | undefined> {\n        const document = this.document.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = CodeActionAdapter._isSelection(rangeOrSelection)\n            ? <theia.Selection>Converter.toSelection(rangeOrSelection)\n            : <theia.Range>Converter.toRange(rangeOrSelection);\n        const allDiagnostics: theia.Diagnostic[] = [];\n\n        for (const diagnostic of this.diagnostics.getDiagnostics(resource)) {\n            if (ran.intersection(diagnostic.range)) {\n                allDiagnostics.push(diagnostic);\n            }\n        }\n\n        const codeActionContext: theia.CodeActionContext = {\n            diagnostics: allDiagnostics,\n            only: context.only ? new CodeActionKind(context.only) : undefined\n        };\n\n        const commandsOrActions = await this.provider.provideCodeActions(doc, ran, codeActionContext, token);\n\n        if (!Array.isArray(commandsOrActions) || commandsOrActions.length === 0) {\n            return undefined;\n        }\n        const result: CodeAction[] = [];\n        for (const candidate of commandsOrActions) {\n            if (!candidate) {\n                continue;\n            }\n\n            // Cache candidates and created commands.\n            const nextCacheId = this.nextCacheId();\n            const toDispose = new DisposableCollection();\n            this.cache.set(nextCacheId, candidate);\n            this.disposables.set(nextCacheId, toDispose);\n\n            if (CodeActionAdapter._isCommand(candidate)) {\n                result.push({\n                    cacheId: nextCacheId,\n                    title: candidate.title || '',\n                    command: this.commands.converter.toSafeCommand(candidate, toDispose)\n                });\n            } else {\n                if (codeActionContext.only) {\n                    if (!candidate.kind) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`);\n                    } else if (!codeActionContext.only.contains(candidate.kind)) {\n                        /* eslint-disable-next-line max-len */\n                        console.warn(`${this.pluginId} - Code actions of kind '${codeActionContext.only.value}' requested but returned code action is of kind '${candidate.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code action.`);\n                    }\n                }\n\n                result.push({\n                    cacheId: nextCacheId,\n                    title: candidate.title,\n                    command: this.commands.converter.toSafeCommand(candidate.command, toDispose),\n                    diagnostics: candidate.diagnostics && candidate.diagnostics.map(Converter.convertDiagnosticToMarkerData),\n                    edit: candidate.edit && Converter.fromWorkspaceEdit(candidate.edit),\n                    kind: candidate.kind && candidate.kind.value,\n                    disabled: candidate.disabled,\n                    isPreferred: candidate.isPreferred\n                });\n            }\n        }\n\n        return result;\n    }\n\n    async releaseCodeActions(cacheIds: number[]): Promise<void> {\n        cacheIds.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n\n    async resolveCodeAction(cacheId: number, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        if (!this.provider.resolveCodeAction) {\n            return undefined;\n        }\n\n        // Code actions are only resolved if they are not legacy commands and don't have an edit property\n        // https://code.visualstudio.com/api/references/vscode-api#CodeActionProvider\n        const candidate = this.cache.get(cacheId);\n        if (!candidate || CodeActionAdapter._isCommand(candidate) || candidate.edit) {\n            return undefined;\n        }\n\n        const resolved = await this.provider.resolveCodeAction(candidate, token);\n        return resolved?.edit && Converter.fromWorkspaceEdit(resolved.edit);\n    }\n\n    private nextCacheId(): number {\n        return this.cacheId++;\n    }\n\n    private static _isCommand(arg: unknown): arg is theia.Command {\n        return !!arg && typeof arg === 'object' && typeof (arg as theia.Command).command === 'string';\n    }\n\n    private static _isSelection(obj: unknown): obj is Selection {\n        const selection = obj as Selection;\n        return !!obj && typeof obj === 'object'\n            && typeof selection.selectionStartLineNumber === 'number'\n            && typeof selection.selectionStartColumn === 'number'\n            && typeof selection.positionLineNumber === 'number'\n            && typeof selection.positionColumn === 'number';\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { RawColorInfo } from '../../common/plugin-api-rpc';\nimport { ColorPresentation } from '../../common/plugin-api-rpc-model';\n\nexport class ColorProviderAdapter {\n\n    constructor(\n        private documents: DocumentsExtImpl,\n        private provider: theia.DocumentColorProvider\n    ) { }\n\n    provideColors(resource: URI, token: theia.CancellationToken): Promise<RawColorInfo[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(\n            this.provider.provideDocumentColors(doc, token)\n        ).then(colors => {\n            if (!Array.isArray(colors)) {\n                return [];\n            }\n\n            const colorInfos: RawColorInfo[] = colors.map(colorInfo => ({\n                color: Converter.fromColor(colorInfo.color),\n                range: Converter.fromRange(colorInfo.range)!\n            }));\n\n            return colorInfos;\n        });\n    }\n\n    provideColorPresentations(resource: URI, raw: RawColorInfo, token: theia.CancellationToken): Promise<ColorPresentation[]> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const range = Converter.toRange(raw.range);\n        const color = Converter.toColor(raw.color);\n        return Promise.resolve(\n            this.provider.provideColorPresentations(color, { document: doc, range: range }, token)\n        ).then(value => {\n            if (!Array.isArray(value)) {\n                return [];\n            }\n\n            return value.map(Converter.fromColorPresentation);\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { CompletionItemTag, CompletionList, Range, SnippetString } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { CompletionContext, CompletionResultDto, Completion, CompletionDto, CompletionItemInsertTextRule, ChainedCacheId } from '../../common/plugin-api-rpc-model';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\nexport class CompletionAdapter {\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CompletionItem[]>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly delegate: theia.CompletionItemProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCompletionItems(resource: URI, position: Position, context: CompletionContext, token: theia.CancellationToken): Promise<CompletionResultDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const doc = document.document;\n\n        const pos = Converter.toPosition(position);\n\n        // The default insert/replace ranges. It's important to compute them\n        // before asynchronously asking the provider for its results. See\n        // https://github.com/microsoft/vscode/issues/83400#issuecomment-546851421\n        const replacing = doc.getWordRangeAtPosition(pos) || new Range(pos, pos);\n        const inserting = replacing.with({ end: pos });\n\n        return Promise.resolve(this.delegate.provideCompletionItems(doc, pos, token, context)).then(value => {\n            const id = this.cacheId++;\n\n            const toDispose = new DisposableCollection();\n            this.disposables.set(id, toDispose);\n\n            const result: CompletionResultDto = {\n                id,\n                completions: [],\n                defaultRange: {\n                    insert: Converter.fromRange(inserting),\n                    replace: Converter.fromRange(replacing)\n                }\n            };\n\n            let list: CompletionList;\n            if (!value) {\n                return undefined;\n            } else if (Array.isArray(value)) {\n                list = new CompletionList(value);\n            } else {\n                list = value;\n                result.incomplete = list.isIncomplete;\n            }\n\n            for (let i = 0; i < list.items.length; i++) {\n                const suggestion = this.convertCompletionItem(list.items[i], i, id, inserting, replacing);\n                if (suggestion) {\n                    result.completions.push(suggestion);\n                }\n            }\n            this.cache.set(id, list.items);\n\n            return result;\n        });\n    }\n\n    async resolveCompletionItem(chainedId: ChainedCacheId, token: theia.CancellationToken): Promise<Completion | undefined> {\n        const [parentId, id] = chainedId;\n        if (typeof this.delegate.resolveCompletionItem !== 'function') {\n            return undefined;\n        }\n        const item = this.cache.get(parentId)?.[id];\n        if (!item) {\n            return undefined;\n        }\n        const resolvedItem = await this.delegate.resolveCompletionItem(item, token);\n        if (!resolvedItem) {\n            return undefined;\n        }\n        return this.convertCompletionItem(resolvedItem, id, parentId);\n    }\n\n    async releaseCompletionItems(id: number): Promise<void> {\n        this.cache.delete(id);\n        const toDispose = this.disposables.get(id);\n        if (toDispose) {\n            toDispose.dispose();\n            this.disposables.delete(id);\n        }\n    }\n\n    private convertCompletionItem(item: theia.CompletionItem, id: number, parentId: number,\n        defaultInserting?: theia.Range, defaultReplacing?: theia.Range): CompletionDto | undefined {\n\n        const itemLabel = typeof item.label === 'string' ? item.label : item.label.label;\n        if (itemLabel.length === 0) {\n            console.warn('Invalid Completion Item -> must have at least a label');\n            return undefined;\n        }\n\n        const toDispose = this.disposables.get(parentId);\n        if (!toDispose) {\n            throw Error('DisposableCollection is missing...');\n        }\n\n        let insertText = itemLabel;\n        let insertTextRules = item.keepWhitespace ? CompletionItemInsertTextRule.KeepWhitespace : 0;\n        if (item.textEdit) {\n            insertText = item.textEdit.newText;\n        } else if (typeof item.insertText === 'string') {\n            insertText = item.insertText;\n        } else if (item.insertText instanceof SnippetString) {\n            insertText = item.insertText.value;\n            insertTextRules |= CompletionItemInsertTextRule.InsertAsSnippet;\n        }\n\n        let range: Completion['range'] | undefined;\n        const itemRange = item.textEdit?.range || item.range;\n        if (Range.isRange(itemRange)) {\n            range = Converter.fromRange(itemRange);\n        } else if (itemRange && (!defaultInserting?.isEqual(itemRange.inserting) || !defaultReplacing?.isEqual(itemRange.replacing))) {\n            range = {\n                insert: Converter.fromRange(itemRange.inserting),\n                replace: Converter.fromRange(itemRange.replacing)\n            };\n        }\n\n        const tags = (!!item.tags?.length || item.deprecated === true)\n            ? [CompletionItemTag.Deprecated]\n            : undefined;\n\n        return {\n            id,\n            parentId,\n            label: item.label,\n            kind: Converter.fromCompletionItemKind(item.kind),\n            detail: item.detail,\n            documentation: item.documentation,\n            filterText: item.filterText,\n            sortText: item.sortText,\n            preselect: item.preselect,\n            insertText,\n            insertTextRules,\n            range,\n            additionalTextEdits: item.additionalTextEdits && item.additionalTextEdits.map(Converter.fromTextEdit),\n            command: this.commands.converter.toSafeCommand(item.command, toDispose),\n            commitCharacters: item.commitCharacters,\n            tags\n        };\n    }\n\n    static hasResolveSupport(provider: theia.CompletionItemProvider): boolean {\n        return typeof provider.resolveCompletionItem === 'function';\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, Location, LocationLink } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DeclarationAdapter {\n\n    constructor(\n        private readonly provider: theia.DeclarationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDeclaration(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDeclaration(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class DefinitionAdapter {\n\n    constructor(\n        private readonly delegate: theia.DefinitionProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    provideDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.delegate.provideDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { convertDiagnosticToMarkerData } from '../type-converters';\nimport { DiagnosticSeverity, MarkerSeverity } from '../types-impl';\nimport { MarkerData } from '../../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, LanguagesMain } from '../../common/plugin-api-rpc';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { v4 } from 'uuid';\n\nexport class DiagnosticCollection implements theia.DiagnosticCollection {\n    private static DIAGNOSTICS_PRIORITY = [\n        DiagnosticSeverity.Error, DiagnosticSeverity.Warning, DiagnosticSeverity.Information, DiagnosticSeverity.Hint\n    ];\n\n    private collectionName: string;\n    private diagnosticsLimitPerResource: number;\n    private proxy: LanguagesMain;\n    private onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>;\n\n    private diagnostics: Map<string, theia.Diagnostic[]>; // uri -> diagnostics\n    private isDisposed: boolean;\n    private onDisposeCallback: (() => void) | undefined;\n\n    constructor(name: string, maxCountPerFile: number, proxy: LanguagesMain, onDidChangeDiagnosticsEmitter: Emitter<theia.DiagnosticChangeEvent>) {\n        this.collectionName = name;\n        this.diagnosticsLimitPerResource = maxCountPerFile;\n        this.proxy = proxy;\n        this.onDidChangeDiagnosticsEmitter = onDidChangeDiagnosticsEmitter;\n\n        this.diagnostics = new Map<string, theia.Diagnostic[]>();\n        this.isDisposed = false;\n        this.onDisposeCallback = undefined;\n    }\n\n    get name(): string {\n        return this.collectionName;\n    }\n\n    set(uri: theia.Uri, diagnostics: theia.Diagnostic[] | undefined): void;\n    set(entries: [theia.Uri, theia.Diagnostic[] | undefined][]): void;\n    set(arg: theia.Uri | [theia.Uri, theia.Diagnostic[] | undefined][], diagnostics?: theia.Diagnostic[] | undefined): void {\n        this.ensureNotDisposed();\n\n        if (arg instanceof URI) {\n            this.setDiagnosticsForUri(arg, diagnostics);\n        } else if (!arg) {\n            this.clear();\n        } else if (arg instanceof Array) {\n            this.setDiagnostics(arg);\n        }\n    }\n\n    private setDiagnosticsForUri(uri: URI, diagnostics?: theia.Diagnostic[]): void {\n        if (!diagnostics) {\n            this.diagnostics.delete(uri.toString());\n        } else {\n            this.diagnostics.set(uri.toString(), diagnostics);\n        }\n        this.fireDiagnosticChangeEvent(uri);\n        this.sendChangesToEditor([uri]);\n    }\n\n    private setDiagnostics(entries: [URI, theia.Diagnostic[] | undefined][]): void {\n        const delta: URI[] = [];\n\n        // clear old diagnostics for given resources\n        for (const [uri] of entries) {\n            this.diagnostics.delete(uri.toString());\n        }\n\n        for (const [uri, diagnostics] of entries) {\n            const uriString = uri.toString();\n\n            if (!diagnostics) {\n                // clear existed\n                this.diagnostics.delete(uriString);\n                delta.push(uri);\n            } else {\n                // merge with existed if any\n                const existedDiagnostics = this.diagnostics.get(uriString);\n                if (existedDiagnostics) {\n                    existedDiagnostics.push(...diagnostics);\n                } else {\n                    this.diagnostics.set(uriString, diagnostics);\n                }\n            }\n\n            if (delta.indexOf(uri) === -1) {\n                delta.push(uri);\n            }\n        }\n\n        this.fireDiagnosticChangeEvent(delta);\n        this.sendChangesToEditor(delta);\n    }\n\n    delete(uri: URI): void {\n        if (this.has(uri)) {\n            this.fireDiagnosticChangeEvent(uri);\n            this.diagnostics.delete(uri.toString());\n            this.proxy.$changeDiagnostics(this.name, [[uri.toString(), []]]);\n        }\n    }\n\n    clear(): void {\n        this.ensureNotDisposed();\n        this.fireDiagnosticChangeEvent(this.getAllResourcesUris());\n        this.diagnostics.clear();\n        this.proxy.$clearDiagnostics(this.name);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (uri: URI, diagnostics: theia.Diagnostic[], collection: theia.DiagnosticCollection) => any, thisArg?: any): void {\n        this.ensureNotDisposed();\n        this.diagnostics.forEach((diagnostics, uriString) => {\n            const uri = URI.parse(uriString);\n            callback.apply(thisArg, [uri, this.getDiagnosticsByUri(uri), this]);\n        });\n    }\n\n    get(uri: URI): theia.Diagnostic[] | undefined {\n        this.ensureNotDisposed();\n        return this.getDiagnosticsByUri(uri);\n    }\n\n    has(uri: URI): boolean {\n        this.ensureNotDisposed();\n        return (this.diagnostics.get(uri.toString()) instanceof Array);\n    }\n\n    dispose(): void {\n        if (!this.isDisposed) {\n            if (this.onDisposeCallback) {\n                this.onDisposeCallback();\n            }\n            this.clear();\n            this.isDisposed = true;\n        }\n    }\n\n    setOnDisposeCallback(onDisposeCallback: (() => void) | undefined): void {\n        this.onDisposeCallback = onDisposeCallback;\n    }\n\n    private ensureNotDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('Diagnostic collection with name \"' + this.name + '\" is already disposed.');\n        }\n    }\n\n    private getAllResourcesUris(): string[] {\n        const resourcesUris: string[] = [];\n        this.diagnostics.forEach((diagnostics, uri) => resourcesUris.push(uri));\n        return resourcesUris;\n    }\n\n    private getDiagnosticsByUri(uri: URI): theia.Diagnostic[] | undefined {\n        const diagnostics = this.diagnostics.get(uri.toString());\n        return (diagnostics instanceof Array) ? <theia.Diagnostic[]>Object.freeze(diagnostics) : undefined;\n    }\n\n    private fireDiagnosticChangeEvent(arg: string | string[] | URI | URI[]): void {\n        this.onDidChangeDiagnosticsEmitter.fire({ uris: this.toUrisArray(arg) });\n    }\n\n    private toUrisArray(arg: string | string[] | URI | URI[]): URI[] {\n        if (arg instanceof Array) {\n            if (arg.length === 0) {\n                return [];\n            }\n\n            if (arg[0] instanceof URI) {\n                return arg as URI[];\n            } else {\n                const result: URI[] = [];\n                for (const uriString of arg as string[]) {\n                    result.push(URI.parse(uriString));\n                }\n                return result;\n            }\n        } else {\n            if (arg instanceof URI) {\n                return [arg];\n            } else {\n                return [URI.parse(arg)];\n            }\n        }\n    }\n\n    private sendChangesToEditor(uris: URI[]): void {\n        const markers: [string, MarkerData[]][] = [];\n        nextUri:\n        for (const uri of uris) {\n            const uriMarkers: MarkerData[] = [];\n            const uriDiagnostics = this.diagnostics.get(uri.toString());\n            if (uriDiagnostics) {\n                if (uriDiagnostics.length > this.diagnosticsLimitPerResource) {\n                    for (const severity of DiagnosticCollection.DIAGNOSTICS_PRIORITY) {\n                        for (const diagnostic of uriDiagnostics) {\n                            if (severity === diagnostic.severity) {\n                                if (uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)) + 1 === this.diagnosticsLimitPerResource) {\n                                    const lastMarker = uriMarkers[uriMarkers.length - 1];\n                                    uriMarkers.push({\n                                        severity: MarkerSeverity.Info,\n                                        message: 'Limit of diagnostics is reached. ' + (uriDiagnostics.length - this.diagnosticsLimitPerResource) + ' items are hidden',\n                                        startLineNumber: lastMarker.startLineNumber,\n                                        startColumn: lastMarker.startColumn,\n                                        endLineNumber: lastMarker.endLineNumber,\n                                        endColumn: lastMarker.endColumn\n                                    });\n                                    markers.push([uri.toString(), uriMarkers]);\n                                    continue nextUri;\n                                }\n                            }\n                        }\n                    }\n                } else {\n                    uriDiagnostics.forEach(diagnostic => uriMarkers.push(convertDiagnosticToMarkerData(diagnostic)));\n                    markers.push([uri.toString(), uriMarkers]);\n                }\n            } else {\n                markers.push([uri.toString(), []]);\n            }\n        }\n\n        this.proxy.$changeDiagnostics(this.name, markers);\n    }\n}\n\nexport class Diagnostics {\n    public static MAX_DIAGNOSTICS_PER_FILE = 1000;\n    private static GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX = '_generated_diagnostic_collection_name_#';\n\n    private proxy: LanguagesMain;\n    private diagnosticCollections: Map<string, DiagnosticCollection>; // id -> diagnostic collection\n\n    private diagnosticsChangedEmitter = new Emitter<theia.DiagnosticChangeEvent>();\n    public readonly onDidChangeDiagnostics: Event<theia.DiagnosticChangeEvent> = this.diagnosticsChangedEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.LANGUAGES_MAIN);\n\n        this.diagnosticCollections = new Map<string, DiagnosticCollection>();\n    }\n\n    getDiagnostics(resource: theia.Uri): theia.Diagnostic[];\n    getDiagnostics(): [theia.Uri, theia.Diagnostic[]][];\n    getDiagnostics(resource?: URI): theia.Diagnostic[] | [URI, theia.Diagnostic[]][] {\n        if (resource) {\n            return this.getAllDiagnosticsForResource(resource);\n        } else {\n            return this.getAllDiagnostics();\n        }\n    }\n\n    createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n        if (!name) {\n            do {\n                name = Diagnostics.GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX + this.getNextId();\n            } while (this.diagnosticCollections.has(name));\n        } else if (this.diagnosticCollections.has(name)) {\n            console.warn(`Diagnostic collection with name '${name}' already exist.`);\n        }\n\n        const diagnosticCollection = new DiagnosticCollection(name, Diagnostics.MAX_DIAGNOSTICS_PER_FILE, this.proxy, this.diagnosticsChangedEmitter);\n        diagnosticCollection.setOnDisposeCallback(() => {\n            this.diagnosticCollections.delete(name!);\n        });\n        this.diagnosticCollections.set(name, diagnosticCollection);\n        return diagnosticCollection;\n    }\n\n    private getNextId(): string {\n        return v4();\n    }\n\n    private getAllDiagnosticsForResource(uri: URI): theia.Diagnostic[] {\n        let result: theia.Diagnostic[] = [];\n        this.diagnosticCollections.forEach(diagnosticCollection => {\n            const diagnostics = diagnosticCollection.get(uri);\n            if (diagnostics) {\n                result = result.concat(...diagnostics);\n            }\n        });\n        return result;\n    }\n\n    private getAllDiagnostics(): [URI, theia.Diagnostic[]][] {\n        const result: [URI, theia.Diagnostic[]][] = [];\n        // Holds uri index in result array of tuples.\n        const urisIndexes = new Map<string, number>();\n        let nextIndex = 0;\n        this.diagnosticCollections.forEach(diagnosticsCollection =>\n            diagnosticsCollection.forEach((uri, diagnostics) => {\n                let uriIndex = urisIndexes.get(uri.toString());\n                if (uriIndex === undefined) {\n                    uriIndex = nextIndex++;\n                    urisIndexes.set(uri.toString(), uriIndex);\n                    result.push([uri, [...diagnostics]]);\n                } else {\n                    result[uriIndex][1] = result[uriIndex][1].concat(...diagnostics);\n                }\n            })\n        );\n        return result;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentFormattingEdits(resource: URI, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentFormattingEdits(doc, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { DocumentHighlight } from '../../common/plugin-api-rpc-model';\n\nexport class DocumentHighlightAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentHighlightProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideDocumentHighlights(resource: URI, position: Position, token: theia.CancellationToken): Promise<DocumentHighlight[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideDocumentHighlights(document, zeroBasedPosition, token)).then(documentHighlights => {\n            if (!documentHighlights) {\n                return undefined;\n            }\n\n            if (this.isDocumentHighlightArray(documentHighlights)) {\n                const highlights: DocumentHighlight[] = [];\n\n                for (const highlight of documentHighlights) {\n                    highlights.push(Converter.fromDocumentHighlight(highlight));\n                }\n\n                return highlights;\n            }\n        });\n    }\n\n    private isDocumentHighlightArray(array: unknown): array is types.DocumentHighlight[] {\n        return Array.isArray(array) && array.length > 0 && array[0] instanceof types.DocumentHighlight;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 STMicroelectronics and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { EvaluatableExpression } from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\n\nexport class EvaluatableExpressionAdapter {\n\n    constructor(\n        private readonly provider: theia.EvaluatableExpressionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    async provideEvaluatableExpression(resource: URI, position: Position, token: theia.CancellationToken): Promise<EvaluatableExpression | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document data for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideEvaluatableExpression(document, pos, token)).then(expression => {\n            if (!expression) {\n                return undefined;\n            }\n            return Converter.fromEvaluatableExpression(expression);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\n\nexport class FoldingProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.FoldingRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideFoldingRanges(resource: URI, context: model.FoldingContext, token: theia.CancellationToken): Promise<model.FoldingRange[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideFoldingRanges(doc, context, token)).then(ranges => {\n            if (!Array.isArray(ranges)) {\n                return undefined;\n            }\n\n            return ranges.map(Converter.fromFoldingRange);\n        });\n    }\n}\n","\n// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { Hover } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Range } from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class HoverAdapter {\n\n    constructor(\n        private readonly provider: theia.HoverProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    public provideHover(resource: URI, position: Position, token: theia.CancellationToken): Promise<Hover | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideHover(doc, pos, token)).then(value => {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            if (!value || !Array.isArray(value.contents) || (value.contents as Array<any>).length === 0) {\n                return undefined;\n            }\n            if (!value.range) {\n                value.range = doc.getWordRangeAtPosition(pos);\n            }\n            if (!value.range) {\n                value.range = new Range(pos, pos);\n            }\n\n            return Converter.fromHover(value);\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class ImplementationAdapter {\n\n    constructor(\n        private readonly provider: theia.ImplementationProvider,\n        private readonly documents: DocumentsExtImpl) {\n    }\n\n    provideImplementation(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideImplementation(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { CodeLensSymbol } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\nimport { CommandRegistryImpl } from '../command-registry';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\n\n/** Adapts the calls from main to extension thread for providing/resolving the code lenses. */\nexport class CodeLensAdapter {\n\n    private static readonly BAD_CMD: theia.Command = { command: 'missing', title: '<<MISSING COMMAND>>' };\n\n    private cacheId = 0;\n    private readonly cache = new Map<number, theia.CodeLens>();\n    private readonly disposables = new Map<number, DisposableCollection>();\n\n    constructor(\n        private readonly provider: theia.CodeLensProvider,\n        private readonly documents: DocumentsExtImpl,\n        private readonly commands: CommandRegistryImpl\n    ) { }\n\n    provideCodeLenses(resource: URI, token: theia.CancellationToken): Promise<CodeLensSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideCodeLenses(doc, token)).then(lenses => {\n            if (Array.isArray(lenses)) {\n                return lenses.map(lens => {\n                    const cacheId = this.cacheId++;\n                    const toDispose = new DisposableCollection();\n                    const lensSymbol = ObjectIdentifier.mixin({\n                        range: Converter.fromRange(lens.range)!,\n                        command: this.commands.converter.toSafeCommand(lens.command, toDispose)\n                    }, cacheId);\n                    this.cache.set(cacheId, lens);\n                    this.disposables.set(cacheId, toDispose);\n                    return lensSymbol;\n                });\n            }\n            return undefined;\n        });\n    }\n\n    async resolveCodeLens(resource: URI, symbol: CodeLensSymbol, token: theia.CancellationToken): Promise<CodeLensSymbol | undefined> {\n        const cacheId = ObjectIdentifier.of(symbol);\n        const lens = this.cache.get(cacheId);\n        if (!lens) {\n            return undefined;\n        }\n\n        let newLens: theia.CodeLens | undefined | null;\n        if (typeof this.provider.resolveCodeLens === 'function' && !lens.isResolved) {\n            newLens = await this.provider.resolveCodeLens(lens, token);\n            if (token.isCancellationRequested) {\n                return undefined;\n            }\n        }\n        newLens = newLens || lens;\n\n        const disposables = this.disposables.get(cacheId);\n        if (!disposables) {\n            // already been disposed of\n            return undefined;\n        }\n        symbol.command = this.commands.converter.toSafeCommand(newLens.command ? newLens.command : CodeLensAdapter.BAD_CMD, disposables);\n        return symbol;\n    }\n\n    releaseCodeLenses(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n            const toDispose = this.disposables.get(id);\n            if (toDispose) {\n                toDispose.dispose();\n                this.disposables.delete(id);\n            }\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { DocumentLink } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { ObjectIdentifier } from '../../common/object-identifier';\n\nexport class LinkProviderAdapter {\n    private cacheId = 0;\n    private cache = new Map<number, theia.DocumentLink>();\n\n    constructor(\n        private readonly provider: theia.DocumentLinkProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideLinks(resource: URI, token: theia.CancellationToken): Promise<DocumentLink[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentLinks(doc, token)).then(links => {\n            if (!Array.isArray(links)) {\n                return undefined;\n            }\n            const result: DocumentLink[] = [];\n            for (const link of links) {\n                const data = Converter.DocumentLink.from(link);\n                const id = this.cacheId++;\n                ObjectIdentifier.mixin(data, id);\n                this.cache.set(id, link);\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveLink(link: DocumentLink, token: theia.CancellationToken): Promise<DocumentLink | undefined> {\n        if (typeof this.provider.resolveDocumentLink !== 'function') {\n            return Promise.resolve(undefined);\n        }\n        const id = ObjectIdentifier.of(link);\n        const item = this.cache.get(id);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n        return Promise.resolve(this.provider.resolveDocumentLink(item, token)).then(value => {\n            if (value) {\n                return Converter.DocumentLink.from(value);\n            }\n            return undefined;\n        });\n    }\n\n    releaseDocumentLinks(ids: number[]): void {\n        ids.forEach(id => {\n            this.cache.delete(id);\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as rpc from '../../common/plugin-api-rpc';\nimport { DocumentsExtImpl } from '../documents';\nimport { LinkedEditingRanges } from '../../common/plugin-api-rpc-model';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { coalesce } from '../../common/arrays';\nimport { fromRange, toPosition } from '../type-converters';\nimport { serializeRegExp } from '../languages-utils';\n\nexport class LinkedEditingRangeAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.LinkedEditingRangeProvider\n    ) { }\n\n    async provideRanges(resource: URI, position: rpc.Position, token: theia.CancellationToken): Promise<LinkedEditingRanges | undefined> {\n\n        const doc = this.documents.getDocument(resource);\n        const pos = toPosition(position);\n\n        const value = await this.provider.provideLinkedEditingRanges(doc, pos, token);\n        if (value && Array.isArray(value.ranges)) {\n            return {\n                ranges: coalesce(value.ranges.map(r => fromRange(r))),\n                wordPattern: serializeRegExp(value.wordPattern)\n            };\n        }\n        return undefined;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit } from '../../common/plugin-api-rpc-model';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class OnTypeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.OnTypeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideOnTypeFormattingEdits(resource: URI, position: Position, ch: string,\n        options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideOnTypeFormattingEdits(doc, pos, ch, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { DocumentSymbol, Range } from '../../common/plugin-api-rpc-model';\nimport * as types from '../types-impl';\n\n/** Adapts the calls from main to extension thread for providing the document symbols. */\nexport class OutlineAdapter {\n\n    constructor(\n        private readonly documents: DocumentsExtImpl,\n        private readonly provider: theia.DocumentSymbolProvider\n    ) { }\n\n    provideDocumentSymbols(resource: URI, token: theia.CancellationToken): Promise<DocumentSymbol[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n\n        return Promise.resolve(this.provider.provideDocumentSymbols(doc, token)).then(value => {\n            if (!value || value.length === 0) {\n                return undefined;\n            }\n            if (value[0] instanceof types.DocumentSymbol) {\n                return (<types.DocumentSymbol[]>value).map(Converter.fromDocumentSymbol);\n            } else {\n                return OutlineAdapter.asDocumentSymbolTree(resource, <types.SymbolInformation[]>value);\n            }\n        });\n    }\n\n    private static asDocumentSymbolTree(resource: URI, infos: types.SymbolInformation[]): DocumentSymbol[] {\n        // first sort by start (and end) and then loop over all elements\n        // and build a tree based on containment.\n        infos = infos.slice(0).sort((a, b) => {\n            let r = a.location.range.start.compareTo(b.location.range.start);\n            if (r === 0) {\n                r = b.location.range.end.compareTo(a.location.range.end);\n            }\n            return r;\n        });\n        const res: DocumentSymbol[] = [];\n        const parentStack: DocumentSymbol[] = [];\n        for (const info of infos) {\n            const element = <DocumentSymbol>{\n                name: info.name,\n                detail: '',\n                kind: Converter.SymbolKind.fromSymbolKind(info.kind),\n                containerName: info.containerName,\n                range: Converter.fromRange(info.location.range),\n                selectionRange: Converter.fromRange(info.location.range),\n                children: [],\n                tags: info.tags && info.tags.length > 0 ? info.tags.map(Converter.fromSymbolTag) : [],\n            };\n\n            while (true) {\n                if (parentStack.length === 0) {\n                    parentStack.push(element);\n                    res.push(element);\n                    break;\n                }\n                const parent = parentStack[parentStack.length - 1];\n                if (OutlineAdapter.containsRange(parent.range, element.range) && !OutlineAdapter.equalsRange(parent.range, element.range)) {\n                    parent.children!.push(element);\n                    parentStack.push(element);\n                    break;\n                }\n                parentStack.pop();\n            }\n        }\n        return res;\n    }\n\n    /**\n     * Test if `otherRange` is in `range`. If the ranges are equal, will return true.\n     */\n    private static containsRange(range: Range, otherRange: Range): boolean {\n        if (otherRange.startLineNumber < range.startLineNumber || otherRange.endLineNumber < range.startLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber > range.endLineNumber || otherRange.endLineNumber > range.endLineNumber) {\n            return false;\n        }\n        if (otherRange.startLineNumber === range.startLineNumber && otherRange.startColumn < range.startColumn) {\n            return false;\n        }\n        if (otherRange.endLineNumber === range.endLineNumber && otherRange.endColumn > range.endColumn) {\n            return false;\n        }\n        return true;\n    }\n\n    /**\n     * Test if range `a` equals `b`.\n     */\n    private static equalsRange(a: Range, b: Range): boolean {\n        return (\n            !!a &&\n            !!b &&\n            a.startLineNumber === b.startLineNumber &&\n            a.startColumn === b.startColumn &&\n            a.endLineNumber === b.endLineNumber &&\n            a.endColumn === b.endColumn\n        );\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { FormattingOptions, TextEdit, Range } from '../../common/plugin-api-rpc-model';\n\nexport class RangeFormattingAdapter {\n\n    constructor(\n        private readonly provider: theia.DocumentRangeFormattingEditProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideDocumentRangeFormattingEdits(resource: URI, range: Range, options: FormattingOptions, token: theia.CancellationToken): Promise<TextEdit[] | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There are no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const ran = Converter.toRange(range);\n\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        return Promise.resolve(this.provider.provideDocumentRangeFormattingEdits(doc, ran, <any>options, token)).then(value => {\n            if (Array.isArray(value)) {\n                return value.map(Converter.fromTextEdit);\n            }\n            return undefined;\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { ReferenceContext, Location } from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { isLocationArray } from './util';\n\nexport class ReferenceAdapter {\n\n    constructor(\n        private readonly provider: theia.ReferenceProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideReferences(resource: URI, position: Position, context: ReferenceContext, token: theia.CancellationToken): Promise<Location[] | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideReferences(document, zeroBasedPosition, context, token)).then(reference => {\n            if (!reference) {\n                return undefined;\n            }\n\n            if (isLocationArray(reference)) {\n                const locations: Location[] = [];\n\n                for (const location of reference) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport { DocumentsExtImpl } from '../documents';\nimport { Position, WorkspaceEditDto } from '../../common/plugin-api-rpc';\nimport { Range } from '../types-impl';\nimport { isObject } from '../../common/types';\n\nexport class RenameAdapter {\n\n    static supportsResolving(provider: theia.RenameProvider): boolean {\n        return typeof provider.prepareRename === 'function';\n    }\n\n    constructor(\n        private readonly provider: theia.RenameProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideRenameEdits(resource: URI, position: Position, newName: string, token: theia.CancellationToken): Promise<WorkspaceEditDto | undefined> {\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.provideRenameEdits(doc, pos, newName, token)\n        ).then(value => {\n            if (!value) {\n                return undefined;\n            }\n\n            return Converter.fromWorkspaceEdit(value);\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return <WorkspaceEditDto>{\n                    rejectReason,\n                    edits: []\n                };\n            } else {\n                return Promise.reject<WorkspaceEditDto>(error);\n            }\n        });\n    }\n\n    resolveRenameLocation(resource: URI, position: Position, token: theia.CancellationToken): Promise<model.RenameLocation & model.Rejection | undefined> {\n        if (typeof this.provider.prepareRename !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const document = this.documents.getDocumentData(resource);\n        if (!document) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const doc = document.document;\n        const pos = Converter.toPosition(position);\n\n        return Promise.resolve(\n            this.provider.prepareRename(doc, pos, token)\n        ).then(rangeOrLocation => {\n\n            let range: theia.Range | undefined;\n            let text: string;\n            if (rangeOrLocation && Range.isRange(rangeOrLocation)) {\n                range = rangeOrLocation;\n                text = doc.getText(rangeOrLocation);\n            } else if (rangeOrLocation && isObject(rangeOrLocation)) {\n                range = rangeOrLocation.range;\n                text = rangeOrLocation.placeholder;\n            }\n\n            if (!range) {\n                return undefined;\n            }\n            if (range.start.line > pos.line || range.end.line < pos.line) {\n                console.warn('INVALID rename location: position line must be within range start/end lines');\n                return undefined;\n            }\n            return {\n                range: Converter.fromRange(range)!,\n                text: text!\n            };\n        }, error => {\n            const rejectReason = RenameAdapter.asMessage(error);\n            if (rejectReason) {\n                return Promise.resolve(<model.RenameLocation & model.Rejection>{\n                    rejectReason,\n                    range: undefined!,\n                    text: undefined!\n                });\n            } else {\n                return Promise.reject(error);\n            }\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private static asMessage(err: any): string | undefined {\n        if (typeof err === 'string') {\n            return err;\n        } else if (err instanceof Error && typeof err.message === 'string') {\n            return err.message;\n        } else {\n            return undefined;\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/standalone/0.19.x/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L1107-L1151\n\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as model from '../../common/plugin-api-rpc-model';\nimport * as Converter from '../type-converters';\nimport * as types from '../types-impl';\nimport { Position } from '../../common/plugin-api-rpc';\n\nexport class SelectionRangeProviderAdapter {\n\n    constructor(\n        private readonly provider: theia.SelectionRangeProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideSelectionRanges(resource: URI, position: Position[], token: theia.CancellationToken): Promise<model.SelectionRange[][]> {\n        const documentData = this.documents.getDocumentData(resource);\n\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const positions = position.map(pos => Converter.toPosition(pos));\n\n        return Promise.resolve(this.provider.provideSelectionRanges(document, positions, token)).then(allProviderRanges => {\n            if (!Array.isArray(allProviderRanges) || allProviderRanges.length === 0) {\n                return [];\n            }\n\n            if (allProviderRanges.length !== positions.length) {\n                return [];\n            }\n\n            const allResults: model.SelectionRange[][] = [];\n            for (let i = 0; i < positions.length; i++) {\n                const oneResult: model.SelectionRange[] = [];\n                allResults.push(oneResult);\n\n                let last: types.Position | theia.Range = positions[i];\n                let selectionRange = allProviderRanges[i];\n\n                while (true) {\n                    if (!selectionRange.range.contains(last)) {\n                        return Promise.reject(new Error('INVALID selection range, must contain the previous range'));\n                    }\n                    oneResult.push(Converter.fromSelectionRange(selectionRange));\n                    if (!selectionRange.parent) {\n                        break;\n                    }\n                    last = selectionRange.range;\n                    selectionRange = selectionRange.parent;\n                }\n            }\n            return allResults;\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 TypeFox and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/microsoft/vscode/blob/0eb3a02ca2bcfab5faa3dc6e52d7c079efafcab0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L692-L869\n\n/* eslint-disable @typescript-eslint/consistent-type-definitions */\n\nimport { BinaryBuffer } from '@theia/core/lib/common/buffer';\nimport * as theia from '@theia/plugin';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { SemanticTokens, SemanticTokensEdit, SemanticTokensEdits } from '../types-impl';\nimport { DocumentsExtImpl } from '../documents';\nimport { toRange } from '../type-converters';\nimport { encodeSemanticTokensDto } from '../../common/semantic-tokens-dto';\nimport { Range } from '../../common/plugin-api-rpc-model';\n\nclass SemanticTokensPreviousResult {\n    constructor(\n        public readonly resultId: string | undefined,\n        public readonly tokens?: Uint32Array,\n    ) { }\n}\n\ntype RelaxedSemanticTokens = { readonly resultId?: string; readonly data: number[]; };\ntype RelaxedSemanticTokensEdit = { readonly start: number; readonly deleteCount: number; readonly data?: number[]; };\ntype RelaxedSemanticTokensEdits = { readonly resultId?: string; readonly edits: RelaxedSemanticTokensEdit[]; };\n\ntype ProvidedSemanticTokens = theia.SemanticTokens | RelaxedSemanticTokens;\ntype ProvidedSemanticTokensEdits = theia.SemanticTokensEdits | RelaxedSemanticTokensEdits;\n\nexport class DocumentSemanticTokensAdapter {\n\n    private readonly _previousResults: Map<number, SemanticTokensPreviousResult>;\n    private _nextResultId = 1;\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentSemanticTokensProvider,\n    ) {\n        this._previousResults = new Map<number, SemanticTokensPreviousResult>();\n    }\n\n    async provideDocumentSemanticTokens(resource: URI, previousResultId: number, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const previousResult = (previousResultId !== 0 ? this._previousResults.get(previousResultId) : null);\n        let value: ProvidedSemanticTokens | ProvidedSemanticTokensEdits | null | undefined;\n        if (previousResult && typeof previousResult.resultId === 'string' && typeof this._provider.provideDocumentSemanticTokensEdits === 'function') {\n            value = await this._provider.provideDocumentSemanticTokensEdits(doc, previousResult.resultId, token);\n        } else {\n            value = await this._provider.provideDocumentSemanticTokens(doc, token);\n        }\n        if (previousResult) {\n            this._previousResults.delete(previousResultId);\n        }\n        if (!value) {\n            return null;\n        }\n        value = DocumentSemanticTokensAdapter._fixProvidedSemanticTokens(value);\n        return this._send(DocumentSemanticTokensAdapter._convertToEdits(previousResult, value), value);\n    }\n\n    async releaseDocumentSemanticColoring(semanticColoringResultId: number): Promise<void> {\n        this._previousResults.delete(semanticColoringResultId);\n    }\n\n    private static _fixProvidedSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokens(v)) {\n                return v;\n            }\n            return new SemanticTokens(new Uint32Array(v.data), v.resultId);\n        } else if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(v)) {\n            if (DocumentSemanticTokensAdapter._isCorrectSemanticTokensEdits(v)) {\n                return v;\n            }\n            return new SemanticTokensEdits(v.edits.map(edit => new SemanticTokensEdit(edit.start, edit.deleteCount, edit.data ?\n                new Uint32Array(edit.data) : edit.data)), v.resultId);\n        }\n        return v;\n    }\n\n    private static _isSemanticTokens(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokens {\n        return v && !!((v as ProvidedSemanticTokens).data);\n    }\n\n    private static _isCorrectSemanticTokens(v: ProvidedSemanticTokens): v is theia.SemanticTokens {\n        return (v.data instanceof Uint32Array);\n    }\n\n    private static _isSemanticTokensEdits(v: ProvidedSemanticTokens | ProvidedSemanticTokensEdits): v is ProvidedSemanticTokensEdits {\n        return v && Array.isArray((v as ProvidedSemanticTokensEdits).edits);\n    }\n\n    private static _isCorrectSemanticTokensEdits(v: ProvidedSemanticTokensEdits): v is theia.SemanticTokensEdits {\n        for (const edit of v.edits) {\n            if (!(edit.data instanceof Uint32Array)) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    private static _convertToEdits(previousResult: SemanticTokensPreviousResult | null | undefined, newResult: theia.SemanticTokens | theia.SemanticTokensEdits):\n        theia.SemanticTokens | theia.SemanticTokensEdits {\n        if (!DocumentSemanticTokensAdapter._isSemanticTokens(newResult)) {\n            return newResult;\n        }\n        if (!previousResult || !previousResult.tokens) {\n            return newResult;\n        }\n        const oldData = previousResult.tokens;\n        const oldLength = oldData.length;\n        const newData = newResult.data;\n        const newLength = newData.length;\n\n        let commonPrefixLength = 0;\n        const maxCommonPrefixLength = Math.min(oldLength, newLength);\n        while (commonPrefixLength < maxCommonPrefixLength && oldData[commonPrefixLength] === newData[commonPrefixLength]) {\n            commonPrefixLength++;\n        }\n\n        if (commonPrefixLength === oldLength && commonPrefixLength === newLength) {\n            // complete overlap!\n            return new SemanticTokensEdits([], newResult.resultId);\n        }\n\n        let commonSuffixLength = 0;\n        const maxCommonSuffixLength = maxCommonPrefixLength - commonPrefixLength;\n        while (commonSuffixLength < maxCommonSuffixLength && oldData[oldLength - commonSuffixLength - 1] === newData[newLength - commonSuffixLength - 1]) {\n            commonSuffixLength++;\n        }\n\n        return new SemanticTokensEdits([{\n            start: commonPrefixLength,\n            deleteCount: (oldLength - commonPrefixLength - commonSuffixLength),\n            data: newData.subarray(commonPrefixLength, newLength - commonSuffixLength)\n        }], newResult.resultId);\n    }\n\n    private _send(value: theia.SemanticTokens | theia.SemanticTokensEdits, original: theia.SemanticTokens | theia.SemanticTokensEdits): BinaryBuffer | null {\n        if (DocumentSemanticTokensAdapter._isSemanticTokens(value)) {\n            const myId = this._nextResultId++;\n            this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId, value.data));\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'full',\n                data: value.data\n            });\n        }\n\n        if (DocumentSemanticTokensAdapter._isSemanticTokensEdits(value)) {\n            const myId = this._nextResultId++;\n            if (DocumentSemanticTokensAdapter._isSemanticTokens(original)) {\n                // store the original\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(original.resultId, original.data));\n            } else {\n                this._previousResults.set(myId, new SemanticTokensPreviousResult(value.resultId));\n            }\n            return encodeSemanticTokensDto({\n                id: myId,\n                type: 'delta',\n                deltas: (value.edits || []).map(edit => ({ start: edit.start, deleteCount: edit.deleteCount, data: edit.data }))\n            });\n        }\n\n        return null;\n    }\n}\n\nexport class DocumentRangeSemanticTokensAdapter {\n\n    constructor(\n        private readonly _documents: DocumentsExtImpl,\n        private readonly _provider: theia.DocumentRangeSemanticTokensProvider,\n    ) {\n    }\n\n    async provideDocumentRangeSemanticTokens(resource: URI, range: Range, token: theia.CancellationToken): Promise<BinaryBuffer | null> {\n        const doc = this._documents.getDocument(resource);\n        const value = await this._provider.provideDocumentRangeSemanticTokens(doc, toRange(range), token);\n        if (!value) {\n            return null;\n        }\n        return this._send(value);\n    }\n\n    private _send(value: theia.SemanticTokens): BinaryBuffer | null {\n        return encodeSemanticTokensDto({\n            id: 0,\n            type: 'full',\n            data: value.data\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n// copied and modified from https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostLanguageFeatures.ts#L771\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { SignatureHelp, SignatureHelpContext } from '../../common/plugin-api-rpc-model';\n\nexport class SignatureHelpAdapter {\n\n    private idSequence = 1;\n    private readonly cache = new Map<number, theia.SignatureHelp>();\n\n    constructor(\n        private readonly delegate: theia.SignatureHelpProvider,\n        private readonly documents: DocumentsExtImpl) {\n\n    }\n\n    async provideSignatureHelp(resource: URI, position: Position, token: theia.CancellationToken, context: SignatureHelpContext): Promise<SignatureHelp | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There are no document for  ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n        const pluginHelpContext = this.reviveContext(context);\n\n        const value = await this.delegate.provideSignatureHelp(document, zeroBasedPosition, token, pluginHelpContext);\n        if (!value) {\n            return undefined;\n        }\n        value.activeParameter = value.signatures[value.activeSignature].activeParameter ?? value.activeParameter;\n        const id = this.idSequence++;\n        this.cache.set(id, value);\n        return Converter.SignatureHelp.from(id, value);\n    }\n\n    private reviveContext(context: SignatureHelpContext): theia.SignatureHelpContext {\n        let activeSignatureHelp: theia.SignatureHelp | undefined = undefined;\n        if (context.activeSignatureHelp) {\n            const revivedSignatureHelp = Converter.SignatureHelp.to(context.activeSignatureHelp);\n            const saved = typeof context.activeSignatureHelp.id === 'number' && this.cache.get(context.activeSignatureHelp.id);\n            if (saved) {\n                activeSignatureHelp = saved;\n                activeSignatureHelp.activeSignature = revivedSignatureHelp.activeSignature;\n                const { activeSignature } = revivedSignatureHelp;\n                activeSignatureHelp.activeParameter = revivedSignatureHelp.signatures[activeSignature].activeParameter ?? revivedSignatureHelp.activeParameter;\n            } else {\n                activeSignatureHelp = revivedSignatureHelp;\n            }\n        }\n        return { ...context, activeSignatureHelp };\n    }\n\n    releaseSignatureHelp(id: number): void {\n        this.cache.delete(id);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as theia from '@theia/plugin';\nimport { DocumentsExtImpl } from '../documents';\nimport * as types from '../types-impl';\nimport * as Converter from '../type-converters';\nimport { Position } from '../../common/plugin-api-rpc';\nimport { Definition, LocationLink, Location } from '../../common/plugin-api-rpc-model';\nimport { isDefinitionLinkArray, isLocationArray } from './util';\n\nexport class TypeDefinitionAdapter {\n\n    constructor(\n        private readonly provider: theia.TypeDefinitionProvider,\n        private readonly documents: DocumentsExtImpl\n    ) { }\n\n    provideTypeDefinition(resource: URI, position: Position, token: theia.CancellationToken): Promise<Definition | undefined> {\n        const documentData = this.documents.getDocumentData(resource);\n        if (!documentData) {\n            return Promise.reject(new Error(`There is no document for ${resource}`));\n        }\n\n        const document = documentData.document;\n        const zeroBasedPosition = Converter.toPosition(position);\n\n        return Promise.resolve(this.provider.provideTypeDefinition(document, zeroBasedPosition, token)).then(definition => {\n            if (!definition) {\n                return undefined;\n            }\n\n            if (definition instanceof types.Location) {\n                return Converter.fromLocation(definition);\n            }\n\n            if (isLocationArray(definition)) {\n                const locations: Location[] = [];\n\n                for (const location of definition) {\n                    locations.push(Converter.fromLocation(location));\n                }\n\n                return locations;\n            }\n\n            if (isDefinitionLinkArray(definition)) {\n                const definitionLinks: LocationLink[] = [];\n\n                for (const definitionLink of definition) {\n                    definitionLinks.push(Converter.fromDefinitionLink(definitionLink));\n                }\n\n                return definitionLinks;\n            }\n        });\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as types from '../types-impl';\n\nexport function isLocationArray(array: unknown): array is types.Location[] {\n    return Array.isArray(array) && array.length > 0 && array[0] instanceof types.Location;\n}\n\nexport function isDefinitionLinkArray(array: unknown): array is theia.DefinitionLink[] {\n    return Array.isArray(array) && array.length > 0 && array[0].hasOwnProperty('targetUri') && array[0].hasOwnProperty('targetRange');\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { SymbolInformation } from '@theia/core/shared/vscode-languageserver-protocol';\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\n\nexport class WorkspaceSymbolAdapter {\n\n    constructor(\n        private readonly provider: theia.WorkspaceSymbolProvider\n    ) { }\n\n    provideWorkspaceSymbols(query: string, token: theia.CancellationToken): Promise<SymbolInformation[]> {\n        return Promise.resolve(this.provider.provideWorkspaceSymbols(query, token)).then(workspaceSymbols => {\n            if (!workspaceSymbols) {\n                return [];\n            }\n\n            const newSymbols: SymbolInformation[] = [];\n            for (const sym of workspaceSymbols) {\n                const convertedSymbol = Converter.fromSymbolInformation(sym);\n                if (convertedSymbol) {\n                    newSymbols.push(convertedSymbol);\n                }\n            }\n            return newSymbols;\n        });\n    }\n\n    resolveWorkspaceSymbol(symbol: SymbolInformation, token: theia.CancellationToken): Promise<SymbolInformation> {\n        if (this.provider.resolveWorkspaceSymbol && typeof this.provider.resolveWorkspaceSymbol === 'function') {\n            const theiaSymbol = Converter.toSymbolInformation(symbol);\n            if (!theiaSymbol) {\n                return Promise.resolve(symbol);\n            } else {\n                return Promise.resolve(this.provider.resolveWorkspaceSymbol(theiaSymbol, token)).then(workspaceSymbol => {\n                    if (!workspaceSymbol) {\n                        return symbol;\n                    }\n\n                    const converted = Converter.fromSymbolInformation(workspaceSymbol);\n                    if (converted) {\n                        return converted;\n                    }\n                    return symbol;\n                });\n            }\n        }\n        return Promise.resolve(symbol);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { Mutable } from '@theia/core';\nimport { MarkdownStringImpl as BaseMarkdownString, MarkdownString as MarkdownStringInterface } from '@theia/core/lib/common/markdown-rendering';\nimport * as pluginAPI from '@theia/plugin';\nimport { es5ClassCompat } from '../common/types';\nimport { URI } from './types-impl';\n\n// Copied from https://github.com/microsoft/vscode/blob/7d9b1c37f8e5ae3772782ba3b09d827eb3fdd833/src/vs/workbench/api/common/extHostTypes.ts\n\n@es5ClassCompat\nexport class MarkdownString implements pluginAPI.MarkdownString {\n\n    readonly #delegate: BaseMarkdownString;\n\n    /**\n     * @returns whether the thing is a markdown string implementation with helper methods.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static isMarkdownString(thing: any): thing is pluginAPI.MarkdownString {\n        if (thing instanceof MarkdownString) {\n            return true;\n        }\n        return thing && thing.appendCodeblock && thing.appendMarkdown && thing.appendText && (thing.value !== undefined);\n    }\n\n    constructor(value?: string, supportThemeIcons: boolean = false) {\n        this.#delegate = new BaseMarkdownString(value, { supportThemeIcons });\n    }\n\n    get value(): string {\n        return this.#delegate.value;\n    }\n    set value(value: string) {\n        this.#delegate.value = value;\n    }\n\n    get isTrusted(): boolean | undefined {\n        return this.#delegate.isTrusted;\n    }\n\n    set isTrusted(value: boolean | undefined) {\n        this.#delegate.isTrusted = value;\n    }\n\n    get supportThemeIcons(): boolean | undefined {\n        return this.#delegate.supportThemeIcons;\n    }\n\n    set supportThemeIcons(value: boolean | undefined) {\n        this.#delegate.supportThemeIcons = value;\n    }\n\n    get supportHtml(): boolean | undefined {\n        return this.#delegate.supportHtml;\n    }\n\n    set supportHtml(value: boolean | undefined) {\n        this.#delegate.supportHtml = value;\n    }\n\n    get baseUri(): pluginAPI.Uri | undefined {\n        return URI.revive(this.#delegate.baseUri);\n    }\n\n    set baseUri(value: pluginAPI.Uri | undefined) {\n        this.#delegate.baseUri = value;\n    }\n\n    appendText(value: string): pluginAPI.MarkdownString {\n        this.#delegate.appendText(value);\n        return this;\n    }\n\n    appendMarkdown(value: string): pluginAPI.MarkdownString {\n        this.#delegate.appendMarkdown(value);\n        return this;\n    }\n\n    appendCodeblock(value: string, language?: string): pluginAPI.MarkdownString {\n        this.#delegate.appendCodeblock(language ?? '', value);\n        return this;\n    }\n\n    toJSON(): MarkdownStringInterface {\n        const plainObject: Mutable<MarkdownStringInterface> = { value: this.value };\n        if (this.isTrusted !== undefined) {\n            plainObject.isTrusted = this.isTrusted;\n        }\n        if (this.supportThemeIcons !== undefined) {\n            plainObject.supportThemeIcons = this.supportThemeIcons;\n        }\n        if (this.supportHtml !== undefined) {\n            plainObject.supportHtml = this.supportHtml;\n        }\n        if (this.baseUri !== undefined) {\n            plainObject.baseUri = this.baseUri.toJSON();\n        }\n        return plainObject;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, MessageRegistryMain, MainMessageOptions, MainMessageType\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageItem, MessageOptions } from '@theia/plugin';\n\nexport class MessageRegistryExt {\n\n    private proxy: MessageRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.MESSAGE_REGISTRY_MAIN);\n    }\n\n    async showMessage(type: MainMessageType, message: string,\n        optionsOrFirstItem?: MessageOptions | string | MessageItem,\n        ...rest: (string | MessageItem)[]): Promise<string | MessageItem | undefined> {\n        const options: MainMessageOptions = {};\n        const actions: MessageItem[] = [];\n        const items: (string | MessageItem)[] = [];\n        const pushItem = (item: string | MessageItem) => {\n            items.push(item);\n            if (typeof item === 'string') {\n                actions.push({ title: item });\n            } else {\n                actions.push({ title: item.title, isCloseAffordance: item.isCloseAffordance });\n                if (item.isCloseAffordance) {\n                    options.onCloseActionHandle = actions.length - 1;\n                }\n            }\n        };\n        if (optionsOrFirstItem) {\n            if (typeof optionsOrFirstItem === 'string' || 'title' in optionsOrFirstItem) {\n                pushItem(optionsOrFirstItem);\n            } else {\n                if ('modal' in optionsOrFirstItem) {\n                    options.modal = optionsOrFirstItem.modal;\n                    if ('detail' in optionsOrFirstItem) {\n                        options.detail = optionsOrFirstItem.detail;\n                    }\n                }\n            }\n        }\n        for (const item of rest) {\n            pushItem(item);\n        }\n        const actionHandle = await this.proxy.$showMessage(type, message, options, actions);\n        return actionHandle !== undefined ? items[actionHandle] : undefined;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2022 Arm and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { PluginDebugAdapterCreator } from '../../debug/plugin-debug-adapter-creator';\nimport * as path from 'path';\nimport * as theia from '@theia/plugin';\nimport { PlatformSpecificAdapterContribution, PluginPackageDebuggersContribution } from '../../../common';\nimport { isWindows, isOSX } from '@theia/core/lib/common/os';\nimport * as net from 'net';\nimport { ChildProcess, spawn, fork, ForkOptions } from 'child_process';\nimport { DebugAdapter } from '@theia/debug/lib/common/debug-model';\nimport { DebugAdapterExecutable, DebugAdapterInlineImplementation, DebugAdapterNamedPipeServer, DebugAdapterServer } from '../../types-impl';\nimport { ProcessDebugAdapter, SocketDebugAdapter } from '@theia/debug/lib/node/stream-debug-adapter';\nconst isElectron = require('is-electron');\n\nexport class NodeDebugAdapterCreator extends PluginDebugAdapterCreator {\n    public override async resolveDebugAdapterExecutable(\n        pluginPath: string,\n        debuggerContribution: PluginPackageDebuggersContribution\n    ): Promise<theia.DebugAdapterExecutable | undefined> {\n        const info = this.toPlatformInfo(debuggerContribution);\n        let program = (info && info.program || debuggerContribution.program);\n        if (!program) {\n            return undefined;\n        }\n        program = path.join(pluginPath, program);\n        const programArgs = info && info.args || debuggerContribution.args || [];\n        let runtime = info && info.runtime || debuggerContribution.runtime;\n        if (runtime && runtime.indexOf('./') === 0) {\n            runtime = path.join(pluginPath, runtime);\n        }\n        const runtimeArgs = info && info.runtimeArgs || debuggerContribution.runtimeArgs || [];\n        const command = runtime ? runtime : program;\n        const args = runtime ? [...runtimeArgs, program, ...programArgs] : programArgs;\n        return {\n            command,\n            args\n        };\n    }\n\n    public override async createDebugAdapter(\n        session: theia.DebugSession,\n        debugConfiguration: theia.DebugConfiguration,\n        executable: theia.DebugAdapterExecutable | undefined,\n        descriptorFactory: theia.DebugAdapterDescriptorFactory | undefined\n    ): Promise<DebugAdapter> {\n        if (descriptorFactory) {\n            // 'createDebugAdapterDescriptor' is called at the start of a debug session to provide details about the debug adapter to use.\n            // These details must be returned as objects of type [DebugAdapterDescriptor](#DebugAdapterDescriptor).\n            // Currently two types of debug adapters are supported:\n            // - a debug adapter executable is specified as a command path and arguments (see [DebugAdapterExecutable](#DebugAdapterExecutable)),\n            // - a debug adapter server reachable via a communication port (see [DebugAdapterServer](#DebugAdapterServer)).\n            // If the method is not implemented the default behavior is this:\n            //   createDebugAdapter(session: DebugSession, executable: DebugAdapterExecutable) {\n            //      if (typeof session.configuration.debugServer === 'number') {\n            //         return new DebugAdapterServer(session.configuration.debugServer);\n            //      }\n            //      return executable;\n            //   }\n            //  @param session The [debug session](#DebugSession) for which the debug adapter will be used.\n            //  @param executable The debug adapter's executable information as specified in the package.json (or undefined if no such information exists).\n            const descriptor = await descriptorFactory.createDebugAdapterDescriptor(session, executable);\n            if (descriptor) {\n                if (DebugAdapterServer.is(descriptor)) {\n                    return this.connectSocketDebugAdapter(descriptor);\n                } else if (DebugAdapterExecutable.is(descriptor)) {\n                    return this.startDebugAdapter(descriptor);\n                } else if (DebugAdapterNamedPipeServer.is(descriptor)) {\n                    return this.connectPipeDebugAdapter(descriptor);\n                } else if (DebugAdapterInlineImplementation.is(descriptor)) {\n                    return this.connectInlineDebugAdapter(descriptor);\n                }\n            }\n        }\n\n        if ('debugServer' in debugConfiguration) {\n            return this.connectSocketDebugAdapter({ port: debugConfiguration.debugServer });\n        } else {\n            if (!executable) {\n                throw new Error('It is not possible to provide debug adapter executable.');\n            }\n            return this.startDebugAdapter(executable);\n        }\n    }\n\n    protected toPlatformInfo(executable: PluginPackageDebuggersContribution): PlatformSpecificAdapterContribution | undefined {\n        if (isWindows && !process.env.hasOwnProperty('PROCESSOR_ARCHITEW6432')) {\n            return executable.winx86 || executable.win || executable.windows;\n        }\n        if (isWindows) {\n            return executable.win || executable.windows;\n        }\n        if (isOSX) {\n            return executable.osx;\n        }\n        return executable.linux;\n    }\n\n    public startDebugAdapter(executable: DebugAdapterExecutable): DebugAdapter {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const options: any = { stdio: ['pipe', 'pipe', 2] };\n\n        if (executable.options) {\n            options.cwd = executable.options.cwd;\n\n            // The additional environment of the executed program or shell. If omitted\n            // the parent process' environment is used. If provided it is merged with\n            // the parent process' environment.\n            options.env = Object.assign({}, process.env);\n            Object.assign(options.env, executable.options.env);\n        }\n\n        let childProcess: ChildProcess;\n        const { command, args } = executable;\n        if (command === 'node') {\n            if (Array.isArray(args) && args.length > 0) {\n                const forkOptions: ForkOptions = {\n                    env: options.env,\n                    // When running in Electron, fork will automatically add ELECTRON_RUN_AS_NODE=1 to the env,\n                    // but this will cause issues when debugging Electron apps, so we'll remove it.\n                    execArgv: isElectron()\n                        ? ['-e', 'delete process.env.ELECTRON_RUN_AS_NODE;require(process.argv[1])']\n                        : [],\n                    silent: true\n                };\n                if (options.cwd) {\n                    forkOptions.cwd = options.cwd;\n                }\n                options.stdio.push('ipc');\n                forkOptions.stdio = options.stdio;\n                childProcess = fork(args[0], args.slice(1), forkOptions);\n            } else {\n                throw new Error(`It is not possible to launch debug adapter with the command: ${JSON.stringify(executable)}`);\n            }\n        } else {\n            childProcess = spawn(command, args, options);\n        }\n\n        return new ProcessDebugAdapter(childProcess);\n    }\n\n    /**\n     * Connects to a remote debug server.\n     */\n    public connectSocketDebugAdapter(server: DebugAdapterServer): SocketDebugAdapter {\n        const socket = net.createConnection(server.port, server.host);\n        return new SocketDebugAdapter(socket);\n    }\n\n    public connectPipeDebugAdapter(adapter: DebugAdapterNamedPipeServer): SocketDebugAdapter {\n        const socket = net.createConnection(adapter.path);\n        return new SocketDebugAdapter(socket);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { PLUGIN_RPC_CONTEXT, NotificationExt, NotificationMain } from '../common/plugin-api-rpc';\nimport { CancellationToken, Progress, ProgressOptions } from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { ProgressLocation } from './types-impl';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\n\nexport class NotificationExtImpl implements NotificationExt {\n    private readonly proxy: NotificationMain;\n    private mapProgressIdToCancellationSource: Map<string, CancellationTokenSource> = new Map();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async withProgress<R>(\n        options: ProgressOptions,\n        task: (progress: Progress<{ message?: string; increment?: number }>, token: CancellationToken) => PromiseLike<R>\n    ): Promise<R> {\n        const source = new CancellationTokenSource();\n        const id = new Deferred<string>();\n        const progress = task({ report: async item => this.proxy.$updateProgress(await id.promise, item)}, source.token);\n        const title = options.title ? options.title : '';\n        const location = this.mapLocation(options.location);\n        const cancellable = options.cancellable;\n\n        id.resolve(await this.proxy.$startProgress({ title, location, cancellable }));\n\n        if (cancellable) {\n            const progressId = await id.promise;\n            this.mapProgressIdToCancellationSource.set(progressId, source);\n        }\n\n        const stop = async () => this.proxy.$stopProgress(await id.promise);\n        const promise = Promise.all([\n            progress,\n            new Promise(resolve => setTimeout(resolve, 250)) // try to show even if it's done immediately\n        ]);\n        promise.then(stop, stop);\n        return progress;\n    }\n\n    public $acceptProgressCanceled(id: string): void {\n        const source = this.mapProgressIdToCancellationSource.get(id);\n        if (source) {\n            source.cancel();\n            this.mapProgressIdToCancellationSource.delete(id);\n        }\n    }\n\n    protected mapLocation(location: ProgressLocation | { viewId: string }): string | undefined {\n        if (typeof location === 'object') {\n            return location.viewId;\n        }\n\n        switch (location) {\n            case ProgressLocation.Notification: return 'notification';\n            case ProgressLocation.SourceControl: return 'scm';\n            case ProgressLocation.Window: return 'window';\n            default: return undefined;\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, OutputChannelRegistryMain, PluginInfo, OutputChannelRegistryExt\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { OutputChannelImpl } from './output-channel/output-channel-item';\n\nexport class OutputChannelRegistryExtImpl implements OutputChannelRegistryExt {\n\n    proxy: OutputChannelRegistryMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.OUTPUT_CHANNEL_REGISTRY_MAIN);\n    }\n\n    createOutputChannel(name: string, pluginInfo: PluginInfo): theia.OutputChannel {\n        name = name.trim();\n        if (!name) {\n            throw new Error('illegal argument \\'name\\'. must not be falsy');\n        } else {\n            return new OutputChannelImpl(name, this.proxy, pluginInfo);\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { OutputChannelRegistryMain, PluginInfo } from '../../common/plugin-api-rpc';\n\nexport class OutputChannelImpl implements theia.OutputChannel {\n\n    private disposed: boolean;\n\n    constructor(readonly name: string, private proxy: OutputChannelRegistryMain, private readonly pluginInfo: PluginInfo) {\n    }\n\n    dispose(): void {\n        if (!this.disposed) {\n            this.proxy.$dispose(this.name).then(() => {\n                this.disposed = true;\n            });\n        }\n    }\n\n    append(value: string): void {\n        this.validate();\n        this.proxy.$append(this.name, value, this.pluginInfo);\n    }\n\n    appendLine(value: string): void {\n        this.validate();\n        this.append(value + '\\n');\n    }\n\n    replace(value: string): void {\n        this.validate();\n        this.clear();\n        this.append(value);\n    }\n\n    clear(): void {\n        this.validate();\n        this.proxy.$clear(this.name);\n    }\n\n    show(preserveFocus: boolean | undefined): void {\n        this.validate();\n        this.proxy.$reveal(this.name, !!preserveFocus);\n    }\n\n    hide(): void {\n        this.validate();\n        this.proxy.$close(this.name);\n    }\n\n    private validate(): void {\n        if (this.disposed) {\n            throw new Error('Channel has been closed');\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nconst separator = '/';\n\nexport function normalize(path: string): string {\n    if (!path || path.length === 0) {\n        return '.';\n    }\n\n    const isAbsolute = path.charCodeAt(0) === 47;\n    const trailingSlash = path.charCodeAt(path.length - 1) === 47;\n\n    const parts = path.split(separator);\n\n    const result: string[] = [];\n\n    for (let i = 0; i < parts.length; i++) {\n        const p = parts[i];\n        if (p === '') {\n            continue;\n        }\n\n        if (p === '..') {\n            result.pop();\n            continue;\n        }\n\n        result.push(p);\n    }\n\n    if (result.length === 0) {\n        return '.';\n    }\n\n    path = result.join(separator);\n    if (isAbsolute) {\n        path = '/' + path;\n    }\n\n    if (trailingSlash) {\n        path += '/';\n    }\n\n    return path;\n}\n\nexport function join(...paths: string[]): string {\n    if (paths.length === 0) {\n        return '.';\n    }\n\n    const path = paths.join(separator);\n    return normalize(path);\n}\n","// *****************************************************************************\n// Copyright (C) 2018-2022 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/* tslint:disable:typedef */\n\nimport type * as theia from '@theia/plugin';\nimport { CommandRegistryImpl } from './command-registry';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { CancellationError, CancellationToken, CancellationTokenSource } from '@theia/core/lib/common/cancellation';\nimport { QuickOpenExtImpl } from './quick-open';\nimport {\n    MAIN_RPC_CONTEXT,\n    Plugin as InternalPlugin,\n    PluginManager,\n    PluginAPIFactory,\n    MainMessageType,\n    DebugConfigurationProviderTriggerKind,\n    PLUGIN_RPC_CONTEXT\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { MessageRegistryExt } from './message-registry';\nimport { StatusBarMessageRegistryExt } from './status-bar-message-registry';\nimport { WindowStateExtImpl } from './window-state';\nimport { WorkspaceExtImpl } from './workspace';\nimport { EnvExtImpl } from './env';\nimport { QueryParameters } from '../common/env';\nimport {\n    ConfigurationTarget,\n    Disposable,\n    Position,\n    Range,\n    Selection,\n    ViewColumn,\n    TextEditorSelectionChangeKind,\n    EndOfLine,\n    SnippetString,\n    ThemeColor,\n    ThemeIcon,\n    TextEditorRevealType,\n    TextEditorLineNumbersStyle,\n    DecorationRangeBehavior,\n    OverviewRulerLane,\n    StatusBarAlignment,\n    RelativePattern,\n    IndentAction,\n    CompletionItem,\n    CompletionItemKind,\n    CompletionList,\n    TextEdit,\n    CompletionTriggerKind,\n    Diagnostic,\n    DiagnosticRelatedInformation,\n    DebugConsoleMode,\n    DiagnosticSeverity,\n    DiagnosticTag,\n    CompletionItemTag,\n    Location,\n    LogLevel,\n    Progress,\n    ProgressOptions,\n    ProgressLocation,\n    ParameterInformation,\n    SignatureInformation,\n    SignatureHelp,\n    SignatureHelpTriggerKind,\n    Hover,\n    EvaluatableExpression,\n    DocumentHighlightKind,\n    DocumentHighlight,\n    DocumentLink,\n    CodeLens,\n    CodeActionKind,\n    CodeActionTrigger,\n    CodeActionTriggerKind,\n    TextDocumentSaveReason,\n    CodeAction,\n    TreeItem,\n    TreeItemCollapsibleState,\n    DocumentSymbol,\n    SymbolTag,\n    WorkspaceEdit,\n    SymbolInformation,\n    FileType,\n    FileChangeType,\n    ShellQuoting,\n    ShellExecution,\n    ProcessExecution,\n    CustomExecution,\n    TaskScope,\n    TaskPanelKind,\n    TaskRevealKind,\n    TaskGroup,\n    Task,\n    Task2,\n    DebugAdapterExecutable,\n    DebugAdapterServer,\n    DebugAdapterNamedPipeServer,\n    DebugAdapterInlineImplementation,\n    Breakpoint,\n    SourceBreakpoint,\n    FunctionBreakpoint,\n    FoldingRange,\n    FoldingRangeKind,\n    SelectionRange,\n    Color,\n    ColorInformation,\n    ColorPresentation,\n    OperatingSystem,\n    WebviewPanelTargetArea,\n    UIKind,\n    FileSystemError,\n    CommentThreadCollapsibleState,\n    QuickInputButtons,\n    QuickPickItemKind,\n    CommentMode,\n    CallHierarchyItem,\n    CallHierarchyIncomingCall,\n    CallHierarchyOutgoingCall,\n    TimelineItem,\n    EnvironmentVariableMutatorType,\n    SemanticTokensLegend,\n    SemanticTokensBuilder,\n    SemanticTokens,\n    SemanticTokensEdits,\n    SemanticTokensEdit,\n    ColorThemeKind,\n    SourceControlInputBoxValidationType,\n    URI,\n    FileDecoration,\n    ExtensionMode,\n    LinkedEditingRanges,\n    LanguageStatusSeverity,\n    TextDocumentChangeReason,\n    InputBoxValidationSeverity\n} from './types-impl';\nimport { AuthenticationExtImpl } from './authentication-ext';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorsExtImpl } from './text-editors';\nimport { DocumentsExtImpl } from './documents';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { OutputChannelRegistryExtImpl } from './output-channel-registry';\nimport { TerminalServiceExtImpl, TerminalExtImpl } from './terminal-ext';\nimport { LanguagesExtImpl } from './languages';\nimport { fromDocumentSelector, pluginToPluginInfo, fromGlobPattern } from './type-converters';\nimport { DialogsExtImpl } from './dialogs';\nimport { NotificationExtImpl } from './notification';\nimport { score } from '@theia/editor/lib/common/language-selector';\nimport { MarkdownString } from './markdown-string';\nimport { TreeViewsExtImpl } from './tree/tree-views';\nimport { ConnectionImpl } from '../common/connection';\nimport { TasksExtImpl } from './tasks/tasks';\nimport { DebugExtImpl } from './debug/debug-ext';\nimport { FileSystemExtImpl } from './file-system-ext-impl';\nimport { QuickPick, QuickPickItem, ResourceLabelFormatter, LineChange } from '@theia/plugin';\nimport { ScmExtImpl } from './scm';\nimport { DecorationsExtImpl } from './decorations';\nimport { TextEditorExt } from './text-editor';\nimport { ClipboardExt } from './clipboard-ext';\nimport { WebviewsExtImpl } from './webviews';\nimport { ExtHostFileSystemEventService } from './file-system-event-service-ext-impl';\nimport { LabelServiceExtImpl } from '../plugin/label-service';\nimport { TimelineExtImpl } from './timeline';\nimport { ThemingExtImpl } from './theming';\nimport { CommentsExtImpl } from './comments';\nimport { CustomEditorsExtImpl } from './custom-editors';\nimport { WebviewViewsExtImpl } from './webview-views';\nimport { PluginPackage } from '../common';\nimport { Endpoint } from '@theia/core/lib/browser/endpoint';\n\nexport function createAPIFactory(\n    rpc: RPCProtocol,\n    pluginManager: PluginManager,\n    envExt: EnvExtImpl,\n    debugExt: DebugExtImpl,\n    preferenceRegistryExt: PreferenceRegistryExtImpl,\n    editorsAndDocumentsExt: EditorsAndDocumentsExtImpl,\n    workspaceExt: WorkspaceExtImpl,\n    messageRegistryExt: MessageRegistryExt,\n    clipboard: ClipboardExt,\n    webviewExt: WebviewsExtImpl\n): PluginAPIFactory {\n\n    const authenticationExt = rpc.set(MAIN_RPC_CONTEXT.AUTHENTICATION_EXT, new AuthenticationExtImpl(rpc));\n    const commandRegistry = rpc.set(MAIN_RPC_CONTEXT.COMMAND_REGISTRY_EXT, new CommandRegistryImpl(rpc));\n    const quickOpenExt = rpc.set(MAIN_RPC_CONTEXT.QUICK_OPEN_EXT, new QuickOpenExtImpl(rpc));\n    const dialogsExt = new DialogsExtImpl(rpc);\n    const windowStateExt = rpc.set(MAIN_RPC_CONTEXT.WINDOW_STATE_EXT, new WindowStateExtImpl(rpc));\n    const notificationExt = rpc.set(MAIN_RPC_CONTEXT.NOTIFICATION_EXT, new NotificationExtImpl(rpc));\n    const editors = rpc.set(MAIN_RPC_CONTEXT.TEXT_EDITORS_EXT, new TextEditorsExtImpl(rpc, editorsAndDocumentsExt));\n    const documents = rpc.set(MAIN_RPC_CONTEXT.DOCUMENTS_EXT, new DocumentsExtImpl(rpc, editorsAndDocumentsExt));\n    const statusBarMessageRegistryExt = new StatusBarMessageRegistryExt(rpc);\n    const terminalExt = rpc.set(MAIN_RPC_CONTEXT.TERMINAL_EXT, new TerminalServiceExtImpl(rpc));\n    const outputChannelRegistryExt = rpc.set(MAIN_RPC_CONTEXT.OUTPUT_CHANNEL_REGISTRY_EXT, new OutputChannelRegistryExtImpl(rpc));\n    const languagesExt = rpc.set(MAIN_RPC_CONTEXT.LANGUAGES_EXT, new LanguagesExtImpl(rpc, documents, commandRegistry));\n    const treeViewsExt = rpc.set(MAIN_RPC_CONTEXT.TREE_VIEWS_EXT, new TreeViewsExtImpl(rpc, commandRegistry));\n    const tasksExt = rpc.set(MAIN_RPC_CONTEXT.TASKS_EXT, new TasksExtImpl(rpc, terminalExt));\n    const connectionExt = rpc.set(MAIN_RPC_CONTEXT.CONNECTION_EXT, new ConnectionImpl(rpc.getProxy(PLUGIN_RPC_CONTEXT.CONNECTION_MAIN)));\n    const fileSystemExt = rpc.set(MAIN_RPC_CONTEXT.FILE_SYSTEM_EXT, new FileSystemExtImpl(rpc, languagesExt));\n    const extHostFileSystemEvent = rpc.set(MAIN_RPC_CONTEXT.ExtHostFileSystemEventService, new ExtHostFileSystemEventService(rpc, editorsAndDocumentsExt));\n    const scmExt = rpc.set(MAIN_RPC_CONTEXT.SCM_EXT, new ScmExtImpl(rpc, commandRegistry));\n    const decorationsExt = rpc.set(MAIN_RPC_CONTEXT.DECORATIONS_EXT, new DecorationsExtImpl(rpc));\n    const labelServiceExt = rpc.set(MAIN_RPC_CONTEXT.LABEL_SERVICE_EXT, new LabelServiceExtImpl(rpc));\n    const timelineExt = rpc.set(MAIN_RPC_CONTEXT.TIMELINE_EXT, new TimelineExtImpl(rpc, commandRegistry));\n    const themingExt = rpc.set(MAIN_RPC_CONTEXT.THEMING_EXT, new ThemingExtImpl(rpc));\n    const commentsExt = rpc.set(MAIN_RPC_CONTEXT.COMMENTS_EXT, new CommentsExtImpl(rpc, commandRegistry, documents));\n    const customEditorExt = rpc.set(MAIN_RPC_CONTEXT.CUSTOM_EDITORS_EXT, new CustomEditorsExtImpl(rpc, documents, webviewExt, workspaceExt));\n    const webviewViewsExt = rpc.set(MAIN_RPC_CONTEXT.WEBVIEW_VIEWS_EXT, new WebviewViewsExtImpl(rpc, webviewExt));\n    rpc.set(MAIN_RPC_CONTEXT.DEBUG_EXT, debugExt);\n\n    return function (plugin: InternalPlugin): typeof theia {\n        const authentication: typeof theia.authentication = {\n            registerAuthenticationProvider(id: string, label: string, provider: theia.AuthenticationProvider, options?: theia.AuthenticationProviderOptions): theia.Disposable {\n                return authenticationExt.registerAuthenticationProvider(id, label, provider, options);\n            },\n            getSession(providerId: string, scopes: string[], options: theia.AuthenticationGetSessionOptions) {\n                return authenticationExt.getSession(plugin, providerId, scopes, options as any);\n            },\n            get onDidChangeSessions(): theia.Event<theia.AuthenticationSessionsChangeEvent> {\n                return authenticationExt.onDidChangeSessions;\n            }\n        };\n        const commands: typeof theia.commands = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerCommand(command: theia.CommandDescription | string, handler?: <T>(...args: any[]) => T | Thenable<T | undefined>, thisArg?: any): Disposable {\n                // use of the ID when registering commands\n                if (typeof command === 'string') {\n                    const rawCommands = plugin.rawModel.contributes && plugin.rawModel.contributes.commands;\n                    const contributedCommands = rawCommands ? Array.isArray(rawCommands) ? rawCommands : [rawCommands] : undefined;\n                    if (handler && contributedCommands && contributedCommands.some(item => item.command === command)) {\n                        return commandRegistry.registerHandler(command, handler, thisArg);\n                    }\n                    return commandRegistry.registerCommand({ id: command }, handler, thisArg);\n                }\n                return commandRegistry.registerCommand(command, handler, thisArg);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            executeCommand<T>(commandId: string, ...args: any[]): PromiseLike<T | undefined> {\n                return commandRegistry.executeCommand<T>(commandId, ...args);\n            },\n            registerTextEditorCommand(command: string, handler: (textEditor: theia.TextEditor, edit: theia.TextEditorEdit, ...arg: any[]) => void, thisArg?: any): Disposable {\n                return commandRegistry.registerCommand({ id: command }, (...args: any[]): any => {\n                    const activeTextEditor = editors.getActiveEditor();\n                    if (!activeTextEditor) {\n                        console.warn('Cannot execute ' + command + ' because there is no active text editor.');\n                        return undefined;\n                    }\n\n                    return activeTextEditor.edit((edit: theia.TextEditorEdit) => {\n                        args.unshift(activeTextEditor, edit);\n                        handler.apply(thisArg, args);\n                    }).then(result => {\n                        if (!result) {\n                            console.warn('Edits from command ' + command + ' were not applied.');\n                        }\n                    }, err => {\n                        console.warn('An error occurred while running command ' + command, err);\n                    });\n                });\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            registerHandler(commandId: string, handler: (...args: any[]) => any, thisArg?: any): Disposable {\n                return commandRegistry.registerHandler(commandId, handler, thisArg);\n            },\n            getKeyBinding(commandId: string): PromiseLike<theia.CommandKeyBinding[] | undefined> {\n                return commandRegistry.getKeyBinding(commandId);\n            },\n            getCommands(filterInternal: boolean = false): PromiseLike<string[]> {\n                return commandRegistry.getCommands(filterInternal);\n            },\n            registerDiffInformationCommand(command: string, callback: (diff: LineChange[], ...args: any[]) => any, thisArg?: any): Disposable {\n                // Dummy implementation.\n                return new Disposable(() => { });\n            }\n        };\n\n        const { onDidChangeActiveTerminal, onDidCloseTerminal, onDidOpenTerminal } = terminalExt;\n        const showInformationMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Info);\n        const showWarningMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Warning);\n        const showErrorMessage = messageRegistryExt.showMessage.bind(messageRegistryExt, MainMessageType.Error);\n        const window: typeof theia.window = {\n\n            get activeTerminal(): TerminalExtImpl | undefined {\n                return terminalExt.activeTerminal;\n            },\n            get activeTextEditor(): TextEditorExt | undefined {\n                return editors.getActiveEditor();\n            },\n            get visibleTextEditors(): theia.TextEditor[] {\n                return editors.getVisibleTextEditors();\n            },\n            get terminals(): TerminalExtImpl[] {\n                return terminalExt.terminals;\n            },\n            onDidChangeActiveTerminal,\n            onDidChangeActiveTextEditor(listener, thisArg?, disposables?) {\n                return editors.onDidChangeActiveTextEditor(listener, thisArg, disposables);\n            },\n            onDidChangeVisibleTextEditors(listener, thisArg?, disposables?) {\n                return editors.onDidChangeVisibleTextEditors(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorSelection(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorSelection(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorOptions(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorOptions(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorViewColumn(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorViewColumn(listener, thisArg, disposables);\n            },\n            onDidChangeTextEditorVisibleRanges(listener, thisArg?, disposables?) {\n                return editors.onDidChangeTextEditorVisibleRanges(listener, thisArg, disposables);\n            },\n            async showTextDocument(documentArg: theia.TextDocument | URI,\n                columnOrOptions?: theia.TextDocumentShowOptions | theia.ViewColumn,\n                preserveFocus?: boolean\n            ): Promise<theia.TextEditor> {\n                let documentOptions: theia.TextDocumentShowOptions | undefined;\n                const uri: URI = documentArg instanceof URI ? documentArg : documentArg.uri;\n                if (typeof columnOrOptions === 'number') {\n                    documentOptions = {\n                        viewColumn: columnOrOptions\n                    };\n                } else if (columnOrOptions && (columnOrOptions.preserveFocus || columnOrOptions.preview || columnOrOptions.selection || columnOrOptions.viewColumn)) {\n                    documentOptions = {\n                        ...columnOrOptions\n                    };\n                }\n                if (preserveFocus) {\n                    if (documentOptions) {\n                        documentOptions.preserveFocus = preserveFocus;\n                    } else {\n                        documentOptions = { preserveFocus };\n                    }\n                }\n                await documents.showDocument(uri, documentOptions);\n                const textEditor = editors.getVisibleTextEditors().find(editor => editor.document.uri.toString() === uri.toString());\n                if (textEditor) {\n                    return Promise.resolve(textEditor);\n                } else {\n                    throw new Error(`Failed to show text document ${documentArg.toString()}`);\n                }\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            showQuickPick(items: any, options?: theia.QuickPickOptions, token?: theia.CancellationToken): any {\n                return quickOpenExt.showQuickPick(items, options, token);\n            },\n            createQuickPick<T extends QuickPickItem>(): QuickPick<T> {\n                return quickOpenExt.createQuickPick(plugin);\n            },\n            showWorkspaceFolderPick(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n                return workspaceExt.pickWorkspaceFolder(options);\n            },\n            showInformationMessage,\n            showWarningMessage,\n            showErrorMessage,\n            showOpenDialog(options: theia.OpenDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showOpenDialog(options);\n            },\n            showSaveDialog(options: theia.SaveDialogOptions): PromiseLike<URI | undefined> {\n                return dialogsExt.showSaveDialog(options);\n            },\n            showUploadDialog(options: theia.UploadDialogOptions): PromiseLike<URI[] | undefined> {\n                return dialogsExt.showUploadDialog(options);\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            setStatusBarMessage(text: string, arg?: number | PromiseLike<any>): Disposable {\n                return statusBarMessageRegistryExt.setStatusBarMessage(text, arg);\n            },\n            showInputBox(options?: theia.InputBoxOptions, token?: theia.CancellationToken): PromiseLike<string | undefined> {\n                return quickOpenExt.showInput(options, token);\n            },\n            createStatusBarItem(alignmentOrId?: theia.StatusBarAlignment | string, priorityOrAlignment?: number | theia.StatusBarAlignment,\n                priorityArg?: number): theia.StatusBarItem {\n                let id: string | undefined;\n                let alignment: number | undefined;\n                let priority: number | undefined;\n\n                if (typeof alignmentOrId === 'string') {\n                    id = alignmentOrId;\n                    alignment = priorityOrAlignment;\n                    priority = priorityArg;\n                } else {\n                    alignment = alignmentOrId;\n                    priority = priorityOrAlignment;\n                }\n\n                return statusBarMessageRegistryExt.createStatusBarItem(alignment, priority, id);\n            },\n            createOutputChannel(name: string): theia.OutputChannel {\n                return outputChannelRegistryExt.createOutputChannel(name, pluginToPluginInfo(plugin));\n            },\n            createWebviewPanel(viewType: string,\n                title: string,\n                showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n                options: theia.WebviewPanelOptions & theia.WebviewOptions = {}): theia.WebviewPanel {\n                return webviewExt.createWebview(viewType, title, showOptions, options, plugin);\n            },\n            registerWebviewPanelSerializer(viewType: string, serializer: theia.WebviewPanelSerializer): theia.Disposable {\n                return webviewExt.registerWebviewPanelSerializer(viewType, serializer, plugin);\n            },\n            registerCustomEditorProvider(viewType: string,\n                provider: theia.CustomTextEditorProvider | theia.CustomReadonlyEditorProvider,\n                options: { webviewOptions?: theia.WebviewPanelOptions, supportsMultipleEditorsPerDocument?: boolean } = {}): theia.Disposable {\n                return customEditorExt.registerCustomEditorProvider(viewType, provider, options, plugin);\n            },\n            registerWebviewViewProvider(viewType: string,\n                provider: theia.WebviewViewProvider,\n                options?: {\n                    webviewOptions?: {\n                        retainContextWhenHidden?: boolean\n                    }\n                }): theia.Disposable {\n                return webviewViewsExt.registerWebviewViewProvider(viewType, provider, plugin, options?.webviewOptions);\n            },\n            get state(): theia.WindowState {\n                return windowStateExt.getWindowState();\n            },\n            onDidChangeWindowState(listener, thisArg?, disposables?): theia.Disposable {\n                return windowStateExt.onDidChangeWindowState(listener, thisArg, disposables);\n            },\n            createTerminal(nameOrOptions: theia.TerminalOptions | theia.PseudoTerminalOptions | theia.ExtensionTerminalOptions | (string | undefined),\n                shellPath?: string,\n                shellArgs?: string[]): theia.Terminal {\n                return terminalExt.createTerminal(nameOrOptions, shellPath, shellArgs);\n            },\n            onDidCloseTerminal,\n            onDidOpenTerminal,\n            createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n                return editors.createTextEditorDecorationType(options);\n            },\n            registerTreeDataProvider<T>(viewId: string, treeDataProvider: theia.TreeDataProvider<T>): Disposable {\n                return treeViewsExt.registerTreeDataProvider(plugin, viewId, treeDataProvider);\n            },\n            createTreeView<T>(viewId: string, options: { treeDataProvider: theia.TreeDataProvider<T> }): theia.TreeView<T> {\n                return treeViewsExt.createTreeView(plugin, viewId, options);\n            },\n            withProgress<R>(\n                options: ProgressOptions,\n                task: (progress: Progress<{ message?: string; increment?: number }>, token: theia.CancellationToken) => PromiseLike<R>\n            ): PromiseLike<R> {\n                return notificationExt.withProgress(options, task);\n            },\n            registerFileDecorationProvider(provider: theia.FileDecorationProvider): theia.Disposable {\n                return decorationsExt.registerFileDecorationProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerUriHandler(handler: theia.UriHandler): theia.Disposable {\n                // TODO ?\n                return new Disposable(() => { });\n            },\n            createInputBox(): theia.InputBox {\n                return quickOpenExt.createInputBox(plugin);\n            },\n            registerTerminalLinkProvider(provider: theia.TerminalLinkProvider): void {\n                /* NOOP. To be implemented at later stage */\n            },\n            get activeColorTheme(): theia.ColorTheme {\n                return themingExt.activeColorTheme;\n            },\n            onDidChangeActiveColorTheme(listener, thisArg?, disposables?) {\n                return themingExt.onDidChangeActiveColorTheme(listener, thisArg, disposables);\n            }\n        };\n\n        const workspace: typeof theia.workspace = {\n\n            get fs(): theia.FileSystem {\n                return fileSystemExt.fileSystem;\n            },\n\n            get rootPath(): string | undefined {\n                return workspaceExt.rootPath;\n            },\n            get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n                return workspaceExt.workspaceFolders;\n            },\n            get workspaceFile(): URI | undefined {\n                return workspaceExt.workspaceFile;\n            },\n            get name(): string | undefined {\n                return workspaceExt.name;\n            },\n            onDidChangeWorkspaceFolders(listener, thisArg?, disposables?): theia.Disposable {\n                return workspaceExt.onDidChangeWorkspaceFolders(listener, thisArg, disposables);\n            },\n            get textDocuments(): theia.TextDocument[] {\n                return documents.getAllDocumentData().map(data => data.document);\n            },\n            onDidChangeTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidChangeDocument(listener, thisArg, disposables);\n            },\n            onDidCloseTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidRemoveDocument(listener, thisArg, disposables);\n            },\n            onDidOpenTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidAddDocument(listener, thisArg, disposables);\n            },\n            onWillSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onWillSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidSaveTextDocument(listener, thisArg?, disposables?) {\n                return documents.onDidSaveTextDocument(listener, thisArg, disposables);\n            },\n            onDidCreateFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidCreateFile(listener, thisArg, disposables),\n            onDidDeleteFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidDeleteFile(listener, thisArg, disposables),\n            onDidRenameFiles: (listener, thisArg, disposables) => extHostFileSystemEvent.onDidRenameFile(listener, thisArg, disposables),\n            onWillCreateFiles: (listener: (e: theia.FileWillCreateEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillCreateFileEvent(plugin)(listener, thisArg, disposables),\n            onWillDeleteFiles: (listener: (e: theia.FileWillDeleteEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillDeleteFileEvent(plugin)(listener, thisArg, disposables),\n            onWillRenameFiles: (listener: (e: theia.FileWillRenameEvent) => any, thisArg?: any, disposables?: theia.Disposable[]) =>\n                extHostFileSystemEvent.getOnWillRenameFileEvent(plugin)(listener, thisArg, disposables),\n            getConfiguration(section, resource): theia.WorkspaceConfiguration {\n                return preferenceRegistryExt.getConfiguration(section, resource);\n            },\n            onDidChangeConfiguration(listener, thisArgs?, disposables?): theia.Disposable {\n                return preferenceRegistryExt.onDidChangeConfiguration(listener, thisArgs, disposables);\n            },\n            async openTextDocument(uriOrFileNameOrOptions?: theia.Uri | string | { language?: string; content?: string; }): Promise<theia.TextDocument | undefined> {\n                const options = uriOrFileNameOrOptions as { language?: string; content?: string; };\n\n                let uri: URI;\n                if (typeof uriOrFileNameOrOptions === 'string') {\n                    uri = URI.file(uriOrFileNameOrOptions);\n\n                } else if (uriOrFileNameOrOptions instanceof URI) {\n                    uri = uriOrFileNameOrOptions;\n\n                } else if (!options || typeof options === 'object') {\n                    uri = await documents.createDocumentData(options);\n\n                } else {\n                    return Promise.reject(new Error('illegal argument - uriOrFileNameOrOptions'));\n                }\n\n                const data = await documents.openDocument(uri);\n                return data && data.document;\n            },\n            createFileSystemWatcher: (pattern, ignoreCreate, ignoreChange, ignoreDelete): theia.FileSystemWatcher =>\n                extHostFileSystemEvent.createFileSystemWatcher(fromGlobPattern(pattern), ignoreCreate, ignoreChange, ignoreDelete),\n            findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number, token?: CancellationToken): PromiseLike<URI[]> {\n                return workspaceExt.findFiles(include, exclude, maxResults, token);\n            },\n            findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n                callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n                return workspaceExt.findTextInFiles(query, optionsOrCallback, callbackOrToken, token);\n            },\n            saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n                return editors.saveAll(includeUntitled);\n            },\n            applyEdit(edit: theia.WorkspaceEdit): PromiseLike<boolean> {\n                return editors.applyWorkspaceEdit(edit);\n            },\n            registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n                return workspaceExt.registerTextDocumentContentProvider(scheme, provider);\n            },\n            registerFileSystemProvider(scheme: string, provider: theia.FileSystemProvider): theia.Disposable {\n                return fileSystemExt.registerFileSystemProvider(scheme, provider);\n            },\n            getWorkspaceFolder(uri: theia.Uri): theia.WorkspaceFolder | undefined {\n                return workspaceExt.getWorkspaceFolder(uri);\n            },\n            asRelativePath(pathOrUri: theia.Uri | string, includeWorkspace?: boolean): string | undefined {\n                return workspaceExt.getRelativePath(pathOrUri, includeWorkspace);\n            },\n            updateWorkspaceFolders: (index, deleteCount, ...workspaceFoldersToAdd) =>\n                workspaceExt.updateWorkspaceFolders(index, deleteCount || 0, ...workspaceFoldersToAdd)\n            ,\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasks.registerTaskProvider(type, provider);\n            },\n            registerResourceLabelFormatter(formatter: ResourceLabelFormatter): theia.Disposable {\n                return labelServiceExt.$registerResourceLabelFormatter(formatter);\n            },\n            registerTimelineProvider(scheme: string | string[], provider: theia.TimelineProvider): theia.Disposable {\n                return timelineExt.registerTimelineProvider(plugin, scheme, provider);\n            },\n            get isTrusted(): boolean {\n                return workspaceExt.trusted;\n            },\n            async requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n                return workspaceExt.requestWorkspaceTrust(options);\n            },\n            get onDidGrantWorkspaceTrust(): theia.Event<void> {\n                return workspaceExt.onDidGrantWorkspaceTrust;\n            }\n        };\n\n        const onDidChangeLogLevel = new Emitter<theia.LogLevel>();\n        const env: typeof theia.env = Object.freeze({\n            get appName(): string { return envExt.appName; },\n            get appRoot(): string { return envExt.appRoot; },\n            get appHost(): string { return envExt.appHost; },\n            get language(): string { return envExt.language; },\n            get isNewAppInstall(): boolean { return envExt.isNewAppInstall; },\n            get isTelemetryEnabled(): boolean { return envExt.isTelemetryEnabled; },\n            get onDidChangeTelemetryEnabled(): theia.Event<boolean> {\n                return envExt.onDidChangeTelemetryEnabled;\n            },\n            get remoteName(): string | undefined { return envExt.remoteName; },\n            get machineId(): string { return envExt.machineId; },\n            get sessionId(): string { return envExt.sessionId; },\n            get uriScheme(): string { return envExt.uriScheme; },\n            get shell(): string { return envExt.shell; },\n            get uiKind(): theia.UIKind { return envExt.uiKind; },\n            clipboard,\n            getEnvVariable(envVarName: string): PromiseLike<string | undefined> {\n                return envExt.getEnvVariable(envVarName);\n            },\n            getQueryParameter(queryParamName: string): string | string[] | undefined {\n                return envExt.getQueryParameter(queryParamName);\n            },\n            getQueryParameters(): QueryParameters {\n                return envExt.getQueryParameters();\n            },\n            getClientOperatingSystem(): PromiseLike<theia.OperatingSystem> {\n                return envExt.getClientOperatingSystem();\n            },\n            openExternal(uri: theia.Uri): PromiseLike<boolean> {\n                return windowStateExt.openUri(uri);\n            },\n            asExternalUri(target: theia.Uri): PromiseLike<theia.Uri> {\n                return windowStateExt.asExternalUri(target);\n            },\n            get logLevel(): theia.LogLevel { return LogLevel.Info; },\n            get onDidChangeLogLevel(): theia.Event<theia.LogLevel> { return onDidChangeLogLevel.event; }\n        });\n\n        const languages: typeof theia.languages = {\n            getLanguages(): PromiseLike<string[]> {\n                return languagesExt.getLanguages();\n            },\n            setTextDocumentLanguage(document: theia.TextDocument, languageId: string): PromiseLike<theia.TextDocument> {\n                return languagesExt.changeLanguage(document.uri, languageId);\n            },\n            match(selector: theia.DocumentSelector, document: theia.TextDocument): number {\n                return score(fromDocumentSelector(selector), document.uri.scheme, document.uri.path, document.languageId, true);\n            },\n            get onDidChangeDiagnostics(): theia.Event<theia.DiagnosticChangeEvent> {\n                return languagesExt.onDidChangeDiagnostics;\n            },\n            getDiagnostics(resource?: URI) {\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                return <any>languagesExt.getDiagnostics(resource);\n            },\n            createDiagnosticCollection(name?: string): theia.DiagnosticCollection {\n                return languagesExt.createDiagnosticCollection(name);\n            },\n            setLanguageConfiguration(language: string, configuration: theia.LanguageConfiguration): theia.Disposable {\n                return languagesExt.setLanguageConfiguration(language, configuration);\n            },\n            registerCompletionItemProvider(selector: theia.DocumentSelector, provider: theia.CompletionItemProvider, ...triggerCharacters: string[]): theia.Disposable {\n                return languagesExt.registerCompletionItemProvider(selector, provider, triggerCharacters, pluginToPluginInfo(plugin));\n            },\n            registerDefinitionProvider(selector: theia.DocumentSelector, provider: theia.DefinitionProvider): theia.Disposable {\n                return languagesExt.registerDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDeclarationProvider(selector: theia.DocumentSelector, provider: theia.DeclarationProvider): theia.Disposable {\n                return languagesExt.registerDeclarationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSignatureHelpProvider(\n                selector: theia.DocumentSelector, provider: theia.SignatureHelpProvider, first?: string | theia.SignatureHelpProviderMetadata, ...remaining: string[]\n            ): theia.Disposable {\n                let metadata: theia.SignatureHelpProviderMetadata;\n                if (typeof first === 'object') {\n                    metadata = first;\n                } else {\n                    const triggerCharacters: string[] = [];\n                    metadata = { triggerCharacters, retriggerCharacters: [] };\n                    if (first) {\n                        triggerCharacters.push(first, ...remaining);\n                    }\n                }\n                return languagesExt.registerSignatureHelpProvider(selector, provider, metadata, pluginToPluginInfo(plugin));\n            },\n            registerTypeDefinitionProvider(selector: theia.DocumentSelector, provider: theia.TypeDefinitionProvider): theia.Disposable {\n                return languagesExt.registerTypeDefinitionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerImplementationProvider(selector: theia.DocumentSelector, provider: theia.ImplementationProvider): theia.Disposable {\n                return languagesExt.registerImplementationProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerHoverProvider(selector: theia.DocumentSelector, provider: theia.HoverProvider): theia.Disposable {\n                return languagesExt.registerHoverProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerEvaluatableExpressionProvider(selector: theia.DocumentSelector, provider: theia.EvaluatableExpressionProvider): theia.Disposable {\n                return languagesExt.registerEvaluatableExpressionProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentHighlightProvider(selector: theia.DocumentSelector, provider: theia.DocumentHighlightProvider): theia.Disposable {\n                return languagesExt.registerDocumentHighlightProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerWorkspaceSymbolProvider(provider: theia.WorkspaceSymbolProvider): theia.Disposable {\n                return languagesExt.registerWorkspaceSymbolProvider(provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeFormattingEditProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeFormattingEditProvider): theia.Disposable {\n                return languagesExt.registerDocumentRangeFormattingEditProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerOnTypeFormattingEditProvider(\n                selector: theia.DocumentSelector,\n                provider: theia.OnTypeFormattingEditProvider,\n                firstTriggerCharacter: string,\n                ...moreTriggerCharacters: string[]\n            ): theia.Disposable {\n                return languagesExt.registerOnTypeFormattingEditProvider(selector, provider, [firstTriggerCharacter].concat(moreTriggerCharacters), pluginToPluginInfo(plugin));\n            },\n            registerDocumentLinkProvider(selector: theia.DocumentSelector, provider: theia.DocumentLinkProvider): theia.Disposable {\n                return languagesExt.registerDocumentLinkProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerCodeActionsProvider(selector: theia.DocumentSelector, provider: theia.CodeActionProvider, metadata?: theia.CodeActionProviderMetadata): theia.Disposable {\n                return languagesExt.registerCodeActionsProvider(selector, provider, plugin.model, pluginToPluginInfo(plugin), metadata);\n            },\n            registerCodeLensProvider(selector: theia.DocumentSelector, provider: theia.CodeLensProvider): theia.Disposable {\n                return languagesExt.registerCodeLensProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerReferenceProvider(selector: theia.DocumentSelector, provider: theia.ReferenceProvider): theia.Disposable {\n                return languagesExt.registerReferenceProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSymbolProvider(selector: theia.DocumentSelector, provider: theia.DocumentSymbolProvider,\n                metadata?: theia.DocumentSymbolProviderMetadata): theia.Disposable {\n                return languagesExt.registerDocumentSymbolProvider(selector, provider, pluginToPluginInfo(plugin), metadata);\n            },\n            registerColorProvider(selector: theia.DocumentSelector, provider: theia.DocumentColorProvider): theia.Disposable {\n                return languagesExt.registerColorProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerFoldingRangeProvider(selector: theia.DocumentSelector, provider: theia.FoldingRangeProvider): theia.Disposable {\n                return languagesExt.registerFoldingRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerSelectionRangeProvider(selector: theia.DocumentSelector, provider: theia.SelectionRangeProvider): theia.Disposable {\n                return languagesExt.registerSelectionRangeProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerRenameProvider(selector: theia.DocumentSelector, provider: theia.RenameProvider): theia.Disposable {\n                return languagesExt.registerRenameProvider(selector, provider, pluginToPluginInfo(plugin));\n            },\n            registerDocumentSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerDocumentRangeSemanticTokensProvider(selector: theia.DocumentSelector, provider: theia.DocumentRangeSemanticTokensProvider, legend: theia.SemanticTokensLegend):\n                theia.Disposable {\n                return languagesExt.registerDocumentRangeSemanticTokensProvider(selector, provider, legend, pluginToPluginInfo(plugin));\n            },\n            registerCallHierarchyProvider(selector: theia.DocumentSelector, provider: theia.CallHierarchyProvider): theia.Disposable {\n                return languagesExt.registerCallHierarchyProvider(selector, provider);\n            },\n            registerLinkedEditingRangeProvider(selector: theia.DocumentSelector, provider: theia.LinkedEditingRangeProvider): theia.Disposable {\n                return languagesExt.registerLinkedEditingRangeProvider(selector, provider);\n            },\n            createLanguageStatusItem(id: string, selector: theia.DocumentSelector): theia.LanguageStatusItem {\n                return languagesExt.createLanguageStatusItem(plugin, id, selector);\n            }\n        };\n\n        const plugins: typeof theia.plugins = {\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            get all(): theia.Plugin<any>[] {\n                return pluginManager.getAllPlugins().map(plg => new PluginExt(pluginManager, plg));\n            },\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            getPlugin(pluginId: string): theia.Plugin<any> | undefined {\n                const plg = pluginManager.getPluginById(pluginId.toLowerCase());\n                if (plg) {\n                    return new PluginExt(pluginManager, plg);\n                }\n                return undefined;\n            },\n            get onDidChange(): theia.Event<void> {\n                return pluginManager.onDidChange;\n            }\n        };\n\n        const debuggersContributions = plugin.rawModel.contributes && plugin.rawModel.contributes.debuggers || [];\n        debugExt.assistedInject(connectionExt, commandRegistry);\n        debugExt.registerDebuggersContributions(plugin.pluginFolder, plugin.model.entryPoint.frontend ? 'frontend' : 'backend', debuggersContributions);\n        const debug: typeof theia.debug = {\n            get activeDebugSession(): theia.DebugSession | undefined {\n                return debugExt.activeDebugSession;\n            },\n            get activeDebugConsole(): theia.DebugConsole {\n                return debugExt.activeDebugConsole;\n            },\n            get breakpoints(): theia.Breakpoint[] {\n                return debugExt.breakpoints;\n            },\n            get onDidChangeActiveDebugSession(): theia.Event<theia.DebugSession | undefined> {\n                return debugExt.onDidChangeActiveDebugSession;\n            },\n            get onDidStartDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidStartDebugSession;\n            },\n            get onDidReceiveDebugSessionCustomEvent(): theia.Event<theia.DebugSessionCustomEvent> {\n                return debugExt.onDidReceiveDebugSessionCustomEvent;\n            },\n            get onDidTerminateDebugSession(): theia.Event<theia.DebugSession> {\n                return debugExt.onDidTerminateDebugSession;\n            },\n            get onDidChangeBreakpoints(): theia.Event<theia.BreakpointsChangeEvent> {\n                return debugExt.onDidChangeBreakpoints;\n            },\n            registerDebugAdapterDescriptorFactory(debugType: string, factory: theia.DebugAdapterDescriptorFactory): Disposable {\n                return debugExt.registerDebugAdapterDescriptorFactory(debugType, factory);\n            },\n            registerDebugConfigurationProvider(\n                debugType: string,\n                provider: theia.DebugConfigurationProvider,\n                triggerKind?: theia.DebugConfigurationProviderTriggerKind\n            ): Disposable {\n                return debugExt.registerDebugConfigurationProvider(debugType, provider, triggerKind || DebugConfigurationProviderTriggerKind.Initial);\n            },\n            registerDebugAdapterTrackerFactory(debugType: string, factory: theia.DebugAdapterTrackerFactory): Disposable {\n                return debugExt.registerDebugAdapterTrackerFactory(debugType, factory);\n            },\n            startDebugging(\n                folder: theia.WorkspaceFolder | undefined,\n                nameOrConfiguration: string | theia.DebugConfiguration,\n                parentSessionOrOptions?: theia.DebugSession | theia.DebugSessionOptions\n            ): Thenable<boolean> {\n                if (!parentSessionOrOptions || (typeof parentSessionOrOptions === 'object' && 'configuration' in parentSessionOrOptions)) {\n                    return debugExt.startDebugging(folder, nameOrConfiguration, { parentSession: parentSessionOrOptions });\n                }\n                return debugExt.startDebugging(folder, nameOrConfiguration, parentSessionOrOptions || {});\n            },\n            stopDebugging(session?: theia.DebugSession): Thenable<void> {\n                return debugExt.stopDebugging(session);\n            },\n            addBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n                debugExt.addBreakpoints(breakpoints);\n            },\n            removeBreakpoints(breakpoints: readonly theia.Breakpoint[]): void {\n                debugExt.removeBreakpoints(breakpoints);\n            },\n            asDebugSourceUri(source: theia.DebugProtocolSource, session?: theia.DebugSession): theia.Uri {\n                return debugExt.asDebugSourceUri(source, session);\n            }\n        };\n\n        const tasks: typeof theia.tasks = {\n            registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n                return tasksExt.registerTaskProvider(type, provider);\n            },\n\n            fetchTasks(filter?: theia.TaskFilter): Thenable<theia.Task[]> {\n                return tasksExt.fetchTasks(filter);\n            },\n\n            executeTask(task: theia.Task): Thenable<theia.TaskExecution> {\n                return tasksExt.executeTask(task);\n            },\n\n            get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n                return tasksExt.taskExecutions;\n            },\n            onDidStartTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTask(listener, thisArg, disposables);\n            },\n            onDidEndTask(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTask(listener, thisArg, disposables);\n            },\n            onDidStartTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidStartTaskProcess(listener, thisArg, disposables);\n            },\n            onDidEndTaskProcess(listener, thisArg?, disposables?) {\n                return tasksExt.onDidEndTaskProcess(listener, thisArg, disposables);\n            }\n        };\n\n        const scm: typeof theia.scm = {\n            get inputBox(): theia.SourceControlInputBox {\n                const inputBox = scmExt.getLastInputBox(plugin);\n                if (inputBox) {\n                    return inputBox;\n                } else {\n                    throw new Error('Input box not found!');\n                }\n            },\n            createSourceControl(id: string, label: string, rootUri?: URI): theia.SourceControl {\n                return scmExt.createSourceControl(plugin, id, label, rootUri);\n            }\n        };\n\n        const comments: typeof theia.comments = {\n            createCommentController(id: string, label: string): theia.CommentController {\n                return commentsExt.createCommentController(plugin, id, label);\n            }\n        };\n\n        return <typeof theia>{\n            version: require('../../package.json').version,\n            authentication,\n            commands,\n            comments,\n            window,\n            workspace,\n            env,\n            languages,\n            plugins,\n            debug,\n            tasks,\n            scm,\n            // Types\n            StatusBarAlignment: StatusBarAlignment,\n            Disposable: Disposable,\n            EventEmitter: Emitter,\n            CancellationTokenSource: CancellationTokenSource,\n            MarkdownString,\n            Position: Position,\n            Range: Range,\n            Selection: Selection,\n            ViewColumn: ViewColumn,\n            TextEditorSelectionChangeKind: TextEditorSelectionChangeKind,\n            Uri: URI,\n            EndOfLine,\n            TextEditorRevealType,\n            TextEditorCursorStyle,\n            TextEditorLineNumbersStyle,\n            ThemeColor,\n            ThemeIcon,\n            SnippetString,\n            DecorationRangeBehavior,\n            OverviewRulerLane,\n            ConfigurationTarget,\n            RelativePattern,\n            IndentAction,\n            CompletionItem,\n            CompletionItemKind,\n            CompletionList,\n            DebugConsoleMode,\n            DiagnosticSeverity,\n            DiagnosticRelatedInformation,\n            LanguageStatusSeverity,\n            Location,\n            LogLevel,\n            DiagnosticTag,\n            CompletionItemTag,\n            Diagnostic,\n            CompletionTriggerKind,\n            TextEdit,\n            ProgressLocation,\n            ProgressOptions,\n            Progress,\n            ParameterInformation,\n            QuickPickItemKind,\n            SignatureInformation,\n            SignatureHelp,\n            SignatureHelpTriggerKind,\n            Hover,\n            EvaluatableExpression,\n            DocumentHighlightKind,\n            DocumentHighlight,\n            DocumentLink,\n            CodeLens,\n            CodeActionKind,\n            CodeActionTrigger,\n            CodeActionTriggerKind,\n            TextDocumentSaveReason,\n            CodeAction,\n            TreeItem,\n            TreeItemCollapsibleState,\n            SymbolKind,\n            SymbolTag,\n            DocumentSymbol,\n            WorkspaceEdit,\n            SymbolInformation,\n            FileType,\n            FileChangeType,\n            ShellQuoting,\n            ShellExecution,\n            ProcessExecution,\n            CustomExecution,\n            TaskScope,\n            TaskRevealKind,\n            TaskPanelKind,\n            TaskGroup,\n            Task,\n            Task2,\n            DebugAdapterExecutable,\n            DebugAdapterServer,\n            DebugAdapterNamedPipeServer,\n            DebugAdapterInlineImplementation,\n            DebugConfigurationProviderTriggerKind,\n            Breakpoint,\n            SourceBreakpoint,\n            FunctionBreakpoint,\n            Color,\n            ColorInformation,\n            ColorPresentation,\n            FoldingRange,\n            SelectionRange,\n            FoldingRangeKind,\n            OperatingSystem,\n            WebviewPanelTargetArea,\n            UIKind,\n            FileSystemError,\n            CommentThreadCollapsibleState,\n            QuickInputButtons,\n            CommentMode,\n            CallHierarchyItem,\n            CallHierarchyIncomingCall,\n            CallHierarchyOutgoingCall,\n            TimelineItem,\n            EnvironmentVariableMutatorType,\n            SemanticTokensLegend,\n            SemanticTokensBuilder,\n            SemanticTokens,\n            SemanticTokensEdits,\n            SemanticTokensEdit,\n            TextDocumentChangeReason,\n            ColorThemeKind,\n            SourceControlInputBoxValidationType,\n            FileDecoration,\n            CancellationError,\n            ExtensionMode,\n            LinkedEditingRanges,\n            InputBoxValidationSeverity\n        };\n    };\n}\n\nexport enum ExtensionKind {\n    UI = 1,\n    Workspace = 2\n}\n\n/**\n * Represents a Theia plugin as well as a VSCode extension.\n */\nexport interface ExtensionPlugin<T> extends theia.Plugin<T> {\n    /**\n     * The uri of the directory containing the extension. Same as {@linkcode theia.Plugin.pluginUri}.\n     */\n    readonly extensionUri: theia.Uri;\n\n    /**\n     * The absolute file path of the directory containing this extension.\n     * Same as {@linkcode theia.Plugin.pluginPath}.\n     */\n    readonly extensionPath: string;\n\n    /**\n     * The extension kind describes if an extension runs where the UI runs\n     * or if an extension runs where the remote extension host runs. The extension kind\n     * is defined in the `package.json`-file of extensions. When no remote extension host exists,\n     * the value is {@linkcode ExtensionKind.UI}.\n     */\n    extensionKind: ExtensionKind;\n}\n\nexport class Plugin<T> implements theia.Plugin<T> {\n    id: string;\n    pluginPath: string;\n    pluginUri: theia.Uri;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    packageJSON: any;\n    pluginType: theia.PluginType;\n\n    constructor(protected readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        this.id = plugin.model.id;\n        this.pluginPath = plugin.pluginFolder;\n        this.packageJSON = plugin.rawModel;\n        this.pluginType = plugin.model.entryPoint.frontend ? 'frontend' : 'backend';\n\n        if (this.pluginType === 'frontend') {\n            const { origin } = new Endpoint();\n            this.pluginUri = URI.parse(origin + '/' + PluginPackage.toPluginUrl(plugin.model, ''));\n        } else {\n            this.pluginUri = URI.parse(plugin.pluginUri);\n        }\n    }\n\n    get isActive(): boolean {\n        return this.pluginManager.isActive(this.id);\n    }\n\n    get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n\nexport class PluginExt<T> extends Plugin<T> implements ExtensionPlugin<T> {\n    extensionPath: string;\n    extensionUri: theia.Uri;\n    extensionKind: ExtensionKind;\n\n    constructor(protected override readonly pluginManager: PluginManager, plugin: InternalPlugin) {\n        super(pluginManager, plugin);\n\n        this.extensionPath = this.pluginPath;\n        this.extensionUri = this.pluginUri;\n        this.extensionKind = ExtensionKind.UI; // stub as a local extension (not running on a remote workspace)\n    }\n\n    override get isActive(): boolean {\n        return this.pluginManager.isActive(this.id);\n    }\n\n    override get exports(): T {\n        return <T>this.pluginManager.getPluginExport(this.id);\n    }\n\n    override activate(): PromiseLike<T> {\n        return this.pluginManager.activatePlugin(this.id).then(() => this.exports);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as path from 'path';\nimport { URI } from './types-impl';\nimport { IconUrl, PluginPackage } from '../common/plugin-protocol';\nimport { Plugin } from '../common/plugin-api-rpc';\n\nexport type PluginIconPath = string | URI | {\n    light: string | URI,\n    dark: string | URI\n};\nexport namespace PluginIconPath {\n    export function toUrl(iconPath: PluginIconPath | undefined, plugin: Plugin): IconUrl | undefined {\n        if (!iconPath) {\n            return undefined;\n        }\n        if (typeof iconPath === 'object' && 'light' in iconPath) {\n            return {\n                light: asString(iconPath.light, plugin),\n                dark: asString(iconPath.dark, plugin)\n            };\n        }\n        return asString(iconPath, plugin);\n    }\n    export function asString(arg: string | URI, plugin: Plugin): string {\n        arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n        if (typeof arg !== 'string') {\n            return arg.toString(true);\n        }\n        const { packagePath } = plugin.rawModel;\n        const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n        const normalizedPath = path.normalize(absolutePath);\n        const relativePath = path.relative(packagePath, normalizedPath);\n        return PluginPackage.toPluginUrl(plugin.rawModel, relativePath);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    NotificationMain,\n    MainMessageType,\n    MessageRegistryMain,\n    PluginManagerExt,\n    PluginManager,\n    Plugin,\n    PluginAPI,\n    ConfigStorage,\n    PluginManagerInitializeParams,\n    PluginManagerStartParams,\n    TerminalServiceExt\n} from '../common/plugin-api-rpc';\nimport { PluginMetadata, PluginJsonValidationContribution } from '../common/plugin-protocol';\nimport * as theia from '@theia/plugin';\nimport * as types from './types-impl';\nimport { join } from './path';\nimport { EnvExtImpl } from './env';\nimport { PreferenceRegistryExtImpl } from './preference-registry';\nimport { Memento, KeyValueStorageProxy, GlobalState } from './plugin-storage';\nimport { ExtPluginApi } from '../common/plugin-ext-api-contribution';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { WebviewsExtImpl } from './webviews';\nimport { URI as Uri } from './types-impl';\nimport { SecretsExtImpl, SecretStorageExt } from '../plugin/secrets-ext';\nimport { PluginExt } from './plugin-context';\n\nexport interface PluginHost {\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    loadPlugin(plugin: Plugin): any;\n\n    init(data: PluginMetadata[]): Promise<[Plugin[], Plugin[]]> | [Plugin[], Plugin[]];\n\n    initExtApi(extApi: ExtPluginApi[]): void;\n\n    loadTests?(): Promise<void>;\n}\n\ninterface StopFn {\n    (): void | Promise<void>;\n}\n\ninterface StopOptions {\n    /**\n     * if terminating then stopping will ignore all errors,\n     * since the main side is already gone and any requests are likely to fail\n     * or hang\n     */\n    terminating: boolean\n}\n\nclass ActivatedPlugin {\n    constructor(public readonly pluginContext: theia.PluginContext,\n        public readonly exports?: PluginAPI,\n        public readonly stopFn?: StopFn) {\n    }\n}\n\nexport class PluginManagerExtImpl implements PluginManagerExt, PluginManager {\n\n    static SUPPORTED_ACTIVATION_EVENTS = new Set([\n        '*',\n        'onLanguage',\n        'onCommand',\n        'onDebug',\n        'onDebugInitialConfigurations',\n        'onDebugResolve',\n        'onDebugAdapterProtocolTracker',\n        'onDebugDynamicConfigurations',\n        'workspaceContains',\n        'onView',\n        'onUri',\n        'onWebviewPanel',\n        'onFileSystem',\n        'onCustomEditor',\n        'onStartupFinished',\n        'onAuthenticationRequest'\n    ]);\n\n    private configStorage: ConfigStorage | undefined;\n    private readonly registry = new Map<string, Plugin>();\n    private readonly activations = new Map<string, (() => Promise<void>)[] | undefined>();\n    /** promises to whether loading each plugin has been successful */\n    private readonly loadedPlugins = new Map<string, Promise<boolean>>();\n    private readonly activatedPlugins = new Map<string, ActivatedPlugin>();\n    private readonly pluginContextsMap = new Map<string, theia.PluginContext>();\n\n    private onDidChangeEmitter = new Emitter<void>();\n    private messageRegistryProxy: MessageRegistryMain;\n    private notificationMain: NotificationMain;\n    protected fireOnDidChange(): void {\n        this.onDidChangeEmitter.fire(undefined);\n    }\n\n    protected jsonValidation: PluginJsonValidationContribution[] = [];\n\n    constructor(\n        private readonly host: PluginHost,\n        private readonly envExt: EnvExtImpl,\n        private readonly terminalService: TerminalServiceExt,\n        private readonly storageProxy: KeyValueStorageProxy,\n        private readonly secrets: SecretsExtImpl,\n        private readonly preferencesManager: PreferenceRegistryExtImpl,\n        private readonly webview: WebviewsExtImpl,\n        private readonly rpc: RPCProtocol\n    ) {\n        this.messageRegistryProxy = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.MESSAGE_REGISTRY_MAIN);\n        this.notificationMain = this.rpc.getProxy(PLUGIN_RPC_CONTEXT.NOTIFICATION_MAIN);\n    }\n\n    async $stop(pluginId?: string): Promise<void> {\n        if (!pluginId) {\n            return this.stopAll();\n        }\n        this.registry.delete(pluginId);\n        this.pluginContextsMap.delete(pluginId);\n        this.loadedPlugins.delete(pluginId);\n        const plugin = this.activatedPlugins.get(pluginId);\n        if (!plugin) {\n            return;\n        }\n        this.activatedPlugins.delete(pluginId);\n        return this.stopPlugin(pluginId, plugin);\n    }\n\n    async terminate(): Promise<void> {\n        return this.stopAll({ terminating: true });\n    }\n\n    protected async stopAll(options: StopOptions = { terminating: false }): Promise<void> {\n        const promises = [];\n        for (const [id, plugin] of this.activatedPlugins) {\n            promises.push(this.stopPlugin(id, plugin, options));\n        }\n\n        this.registry.clear();\n        this.loadedPlugins.clear();\n        this.activatedPlugins.clear();\n        this.pluginContextsMap.clear();\n        await Promise.all(promises);\n    }\n\n    protected async stopPlugin(id: string, plugin: ActivatedPlugin, options: StopOptions = { terminating: false }): Promise<void> {\n        let result;\n        if (plugin.stopFn) {\n            try {\n                result = plugin.stopFn();\n            } catch (e) {\n                if (!options.terminating) {\n                    console.error(`[${id}]: failed to stop:`, e);\n                }\n            }\n        }\n\n        const pluginContext = plugin.pluginContext;\n        if (pluginContext) {\n            for (const subscription of pluginContext.subscriptions) {\n                try {\n                    subscription.dispose();\n                } catch (e) {\n                    if (!options.terminating) {\n                        console.error(`[${id}]: failed to dispose subscription:`, e);\n                    }\n                }\n            }\n        }\n\n        try {\n            await result;\n        } catch (e) {\n            if (!options.terminating) {\n                console.error(`[${id}]: failed to stop:`, e);\n            }\n        }\n    }\n\n    async $init(params: PluginManagerInitializeParams): Promise<void> {\n        this.storageProxy.init(params.globalState, params.workspaceState);\n\n        this.envExt.setQueryParameters(params.env.queryParams);\n        this.envExt.setLanguage(params.env.language);\n        this.envExt.setShell(params.env.shell);\n        this.envExt.setUIKind(params.env.uiKind);\n        this.envExt.setApplicationName(params.env.appName);\n        this.envExt.setAppHost(params.env.appHost);\n\n        this.preferencesManager.init(params.preferences);\n\n        if (params.extApi) {\n            this.host.initExtApi(params.extApi);\n        }\n\n        this.webview.init(params.webview);\n        this.jsonValidation = params.jsonValidation;\n    }\n\n    async $start(params: PluginManagerStartParams): Promise<void> {\n        this.configStorage = params.configStorage;\n\n        const [plugins, foreignPlugins] = await this.host.init(params.plugins);\n        // add foreign plugins\n        for (const plugin of foreignPlugins) {\n            this.registerPlugin(plugin);\n        }\n        // add own plugins, before initialization\n        for (const plugin of plugins) {\n            this.registerPlugin(plugin);\n        }\n\n        // run eager plugins\n        await this.$activateByEvent('*');\n        for (const activationEvent of params.activationEvents) {\n            await this.$activateByEvent(activationEvent);\n        }\n\n        if (this.host.loadTests) {\n            return this.host.loadTests();\n        }\n\n        this.fireOnDidChange();\n    }\n\n    protected registerPlugin(plugin: Plugin): void {\n        if (plugin.model.id === 'vscode.json-language-features' && this.jsonValidation.length) {\n            // VS Code contributes all built-in validations via vscode.json-language-features;\n            // we enrich them with Theia validations registered on startup.\n            // Dynamic validations can be provided only via VS Code extensions.\n            // Content is fetched by the extension later via vscode.workspace.openTextDocument.\n            const contributes = plugin.rawModel.contributes = (plugin.rawModel.contributes || {});\n            contributes.jsonValidation = (contributes.jsonValidation || []).concat(this.jsonValidation);\n        }\n        this.registry.set(plugin.model.id, plugin);\n        if (plugin.pluginPath && Array.isArray(plugin.rawModel.activationEvents)) {\n            const activation = () => this.$activatePlugin(plugin.model.id);\n            // an internal activation event is a subject to change\n            this.setActivation(`onPlugin:${plugin.model.id}`, activation);\n            const unsupportedActivationEvents = plugin.rawModel.activationEvents.filter(e => !PluginManagerExtImpl.SUPPORTED_ACTIVATION_EVENTS.has(e.split(':')[0]));\n            if (unsupportedActivationEvents.length) {\n                console.warn(`Unsupported activation events: ${unsupportedActivationEvents.join(', ')}, please open an issue: https://github.com/eclipse-theia/theia/issues/new`);\n            }\n            for (let activationEvent of plugin.rawModel.activationEvents) {\n                if (activationEvent === 'onUri') {\n                    activationEvent = `onUri:theia://${plugin.model.id}`;\n                }\n                this.setActivation(activationEvent, activation);\n            }\n        }\n    }\n    protected setActivation(activationEvent: string, activation: () => Promise<void>): void {\n        const activations = this.activations.get(activationEvent) || [];\n        activations.push(activation);\n        this.activations.set(activationEvent, activations);\n    }\n\n    protected async loadPlugin(plugin: Plugin, configStorage: ConfigStorage, visited = new Set<string>()): Promise<boolean> {\n        // in order to break cycles\n        if (visited.has(plugin.model.id)) {\n            return true;\n        }\n        visited.add(plugin.model.id);\n\n        let loading = this.loadedPlugins.get(plugin.model.id);\n        if (!loading) {\n            loading = (async () => {\n                const progressId = await this.notificationMain.$startProgress({\n                    title: `Activating ${plugin.model.displayName || plugin.model.name}`,\n                    location: 'window'\n                });\n                try {\n                    if (plugin.rawModel.extensionDependencies) {\n                        for (const dependencyId of plugin.rawModel.extensionDependencies) {\n                            const dependency = this.registry.get(dependencyId.toLowerCase());\n                            if (dependency) {\n                                const loadedSuccessfully = await this.loadPlugin(dependency, configStorage, visited);\n                                if (!loadedSuccessfully) {\n                                    throw new Error(`Dependent extension '${dependency.model.displayName || dependency.model.id}' failed to activate.`);\n                                }\n                            } else {\n                                throw new Error(`Dependent extension '${dependencyId}' is not installed.`);\n                            }\n                        }\n                    }\n\n                    let pluginMain = this.host.loadPlugin(plugin);\n                    // see https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L372-L376\n                    pluginMain = pluginMain || {};\n                    await this.startPlugin(plugin, configStorage, pluginMain);\n                    return true;\n                } catch (err) {\n                    const message = `Activating extension '${plugin.model.displayName || plugin.model.name}' failed:`;\n                    this.messageRegistryProxy.$showMessage(MainMessageType.Error, message + ' ' + err.message, {}, []);\n                    console.error(message, err);\n                    return false;\n                } finally {\n                    this.notificationMain.$stopProgress(progressId);\n                }\n            })();\n        }\n        this.loadedPlugins.set(plugin.model.id, loading);\n        return loading;\n    }\n\n    async $updateStoragePath(path: string | undefined): Promise<void> {\n        if (this.configStorage) {\n            this.configStorage.hostStoragePath = path;\n        }\n        this.pluginContextsMap.forEach((pluginContext: theia.PluginContext, pluginId: string) => {\n            pluginContext.storagePath = path ? join(path, pluginId) : undefined;\n        });\n    }\n\n    async $activateByEvent(activationEvent: string): Promise<void> {\n        if (activationEvent.endsWith(':*')) {\n            const baseEvent = activationEvent.substring(0, activationEvent.length - 2);\n            await this.activateByBaseEvent(baseEvent);\n        } else {\n            await this.activateBySingleEvent(activationEvent);\n        }\n    }\n\n    protected async activateByBaseEvent(baseEvent: string): Promise<void> {\n        await Promise.all(Array.from(this.activations.keys(), activation => activation.startsWith(baseEvent) && this.activateBySingleEvent(activation)));\n    }\n\n    protected async activateBySingleEvent(activationEvent: string): Promise<void> {\n        const activations = this.activations.get(activationEvent);\n        if (!activations) {\n            return;\n        }\n        this.activations.set(activationEvent, undefined);\n        const pendingActivations = [];\n        while (activations.length) {\n            pendingActivations.push(activations.pop()!());\n        }\n        await Promise.all(pendingActivations);\n    }\n\n    async $activatePlugin(id: string): Promise<void> {\n        const plugin = this.registry.get(id);\n        if (plugin && this.configStorage) {\n            await this.loadPlugin(plugin, this.configStorage);\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private async startPlugin(plugin: Plugin, configStorage: ConfigStorage, pluginMain: any): Promise<void> {\n        const subscriptions: theia.Disposable[] = [];\n        const asAbsolutePath = (relativePath: string): string => join(plugin.pluginFolder, relativePath);\n        const logPath = join(configStorage.hostLogPath, plugin.model.id); // todo check format\n        const storagePath = configStorage.hostStoragePath ? join(configStorage.hostStoragePath, plugin.model.id) : undefined;\n        const secrets = new SecretStorageExt(plugin, this.secrets);\n        const globalStoragePath = join(configStorage.hostGlobalStoragePath, plugin.model.id);\n        const extension = new PluginExt(this, plugin);\n        const extensionModeValue = plugin.isUnderDevelopment ? types.ExtensionMode.Development : types.ExtensionMode.Production;\n        const pluginContext: theia.PluginContext = {\n            extensionPath: extension.extensionPath,\n            extensionUri: extension.extensionUri,\n            globalState: new GlobalState(plugin.model.id, true, this.storageProxy),\n            workspaceState: new Memento(plugin.model.id, false, this.storageProxy),\n            subscriptions: subscriptions,\n            asAbsolutePath: asAbsolutePath,\n            logPath: logPath,\n            storagePath: storagePath,\n            storageUri: storagePath ? Uri.file(storagePath) : undefined,\n            secrets,\n            globalStoragePath: globalStoragePath,\n            globalStorageUri: Uri.file(globalStoragePath),\n            environmentVariableCollection: this.terminalService.getEnvironmentVariableCollection(plugin.model.id),\n            extensionMode: extensionModeValue,\n            extension,\n            logUri: Uri.file(logPath)\n        };\n        this.pluginContextsMap.set(plugin.model.id, pluginContext);\n\n        let stopFn = undefined;\n        if (typeof pluginMain[plugin.lifecycle.stopMethod] === 'function') {\n            stopFn = pluginMain[plugin.lifecycle.stopMethod];\n        }\n        const id = plugin.model.displayName || plugin.model.id;\n        if (typeof pluginMain[plugin.lifecycle.startMethod] === 'function') {\n            const pluginExport = await pluginMain[plugin.lifecycle.startMethod].apply(getGlobal(), [pluginContext]);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginExport, stopFn));\n        } else {\n            // https://github.com/TypeFox/vscode/blob/70b8db24a37fafc77247de7f7cb5bb0195120ed0/src/vs/workbench/api/common/extHostExtensionService.ts#L400-L401\n            console.log(`plugin ${id}, ${plugin.lifecycle.startMethod} method is undefined so the module is the extension's exports`);\n            this.activatedPlugins.set(plugin.model.id, new ActivatedPlugin(pluginContext, pluginMain));\n        }\n    }\n\n    getAllPlugins(): Plugin[] {\n        return Array.from(this.registry.values());\n    }\n    getPluginExport(pluginId: string): PluginAPI | undefined {\n        const activePlugin = this.activatedPlugins.get(pluginId);\n        if (activePlugin) {\n            return activePlugin.exports;\n        }\n        return undefined;\n    }\n\n    getPluginById(pluginId: string): Plugin | undefined {\n        return this.registry.get(pluginId);\n    }\n\n    isRunning(pluginId: string): boolean {\n        return this.registry.has(pluginId);\n    }\n\n    isActive(pluginId: string): boolean {\n        return this.activatedPlugins.has(pluginId);\n    }\n\n    activatePlugin(pluginId: string): PromiseLike<void> {\n        return this.$activatePlugin(pluginId);\n    }\n\n    get onDidChange(): theia.Event<void> {\n        return this.onDidChangeEmitter.event;\n    }\n\n}\n\n// for electron\nfunction getGlobal(): Window | NodeJS.Global | null {\n    return typeof self === 'undefined' ? typeof global === 'undefined' ? null : global : self;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { PLUGIN_RPC_CONTEXT, StorageMain, StorageExt } from '../common/plugin-api-rpc';\nimport { KeysToAnyValues, KeysToKeysToAnyValue } from '../common/types';\nimport { RPCProtocol } from '../common/rpc-protocol';\n\nexport class Memento implements theia.Memento {\n\n    private cache: KeysToAnyValues;\n\n    constructor(\n        private readonly pluginId: string,\n        private readonly isPluginGlobalData: boolean,\n        private readonly storage: KeyValueStorageProxy\n    ) {\n        this.cache = storage.getPerPluginData(pluginId, isPluginGlobalData);\n\n        if (!this.isPluginGlobalData) {\n            this.storage.storageDataChangedEvent((data: KeysToKeysToAnyValue) => {\n                this.cache = data[this.pluginId] ? data[this.pluginId] : {};\n            });\n        }\n    }\n\n    keys(): string[] {\n        return Object.entries(this.cache).filter(([, value]) => value !== undefined).map(([key]) => key);\n    }\n\n    get<T>(key: string): T | undefined;\n    get<T>(key: string, defaultValue: T): T;\n    get<T>(key: string, defaultValue?: T): T | undefined {\n        if (key && this.cache.hasOwnProperty(key)) {\n            return this.cache[key];\n        } else {\n            return defaultValue;\n        }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    update(key: string, value: any): Promise<void> {\n        if (value === undefined) {\n            delete this.cache[key];\n        } else {\n            this.cache[key] = value;\n        }\n        return this.storage.setPerPluginData(this.pluginId, this.cache, this.isPluginGlobalData).then(_ => undefined);\n    }\n}\n\nexport class GlobalState extends Memento {\n\n    /** @todo: API is not yet implemented. */\n    setKeysForSync(keys: readonly string[]): void { }\n}\n\n/**\n * Singleton.\n * Is used to proxy storage requests to main side.\n */\nexport class KeyValueStorageProxy implements StorageExt {\n\n    private storageDataChangedEmitter = new Emitter<KeysToKeysToAnyValue>();\n    public readonly storageDataChangedEvent: Event<KeysToKeysToAnyValue> = this.storageDataChangedEmitter.event;\n\n    private readonly proxy: StorageMain;\n\n    private globalDataCache: KeysToKeysToAnyValue;\n    private workspaceDataCache: KeysToKeysToAnyValue;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy<StorageMain>(PLUGIN_RPC_CONTEXT.STORAGE_MAIN);\n    }\n\n    init(initGlobalData: KeysToKeysToAnyValue, initWorkspaceData: KeysToKeysToAnyValue): void {\n        this.globalDataCache = initGlobalData;\n        this.workspaceDataCache = initWorkspaceData;\n    }\n\n    getPerPluginData(key: string, isGlobal: boolean): KeysToAnyValues {\n        if (isGlobal) {\n            const existed = this.globalDataCache[key];\n            return existed ? existed : {};\n        } else {\n            const existed = this.workspaceDataCache[key];\n            return existed ? existed : {};\n        }\n    }\n\n    setPerPluginData(key: string, value: KeysToAnyValues, isGlobal: boolean): Promise<boolean> {\n        if (isGlobal) {\n            this.globalDataCache[key] = value;\n        } else {\n            this.workspaceDataCache[key] = value;\n        }\n\n        return this.proxy.$set(key, value, isGlobal);\n    }\n\n    $updatePluginsWorkspaceData(workspaceData: KeysToKeysToAnyValue): void {\n        this.workspaceDataCache = workspaceData;\n        this.storageDataChangedEmitter.fire(workspaceData);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport { ResourceMap } from '@theia/monaco-editor-core/esm/vs/base/common/map';\nimport { IConfigurationOverrides, IOverrides } from '@theia/monaco-editor-core/esm/vs/platform/configuration/common/configuration';\nimport { Configuration, ConfigurationModel } from '@theia/monaco-editor-core/esm/vs/platform/configuration/common/configurationModels';\nimport { Workspace, WorkspaceFolder } from '@theia/monaco-editor-core/esm/vs/platform/workspace/common/workspace';\nimport * as theia from '@theia/plugin';\nimport { platform } from 'os';\nimport { v4 } from 'uuid';\nimport {\n    PLUGIN_RPC_CONTEXT, PreferenceChangeExt, PreferenceData, PreferenceRegistryExt,\n    PreferenceRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { isObject, mixin } from '../common/types';\nimport { WorkspaceExtImpl } from './workspace';\nimport cloneDeep = require('lodash.clonedeep');\n\nconst injectionRe = /\\b__proto__\\b|\\bconstructor\\.prototype\\b/;\n\nenum ConfigurationTarget {\n    Global = 1,\n    Workspace = 2, // eslint-disable-line @typescript-eslint/no-shadow\n    WorkspaceFolder = 3 // eslint-disable-line @typescript-eslint/no-shadow\n}\n\nexport enum PreferenceScope {\n    Default,\n    User,\n    Workspace, // eslint-disable-line @typescript-eslint/no-shadow\n    Folder,\n}\n\ninterface ConfigurationInspect<T> {\n    key: string;\n    defaultValue?: T;\n    globalValue?: T;\n    workspaceValue?: T;\n    workspaceFolderValue?: T;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction lookUp(tree: any, key: string): any {\n    if (!key) {\n        return;\n    }\n\n    const parts = key.split('.');\n    let node = tree;\n    for (let i = 0; node && i < parts.length; i++) {\n        node = node[parts[i]];\n    }\n    return node;\n}\n\nexport class TheiaWorkspace extends Workspace {\n    constructor(ext: WorkspaceExtImpl) {\n        const folders = (ext.workspaceFolders ?? []).map(folder => new WorkspaceFolder(folder));\n        super(v4(), folders, false, ext.workspaceFile ?? null, () => ['win32', 'darwin'].includes(platform()));\n    }\n}\n\nexport class PreferenceRegistryExtImpl implements PreferenceRegistryExt {\n    private proxy: PreferenceRegistryMain;\n    private _preferences: Configuration;\n    private readonly _onDidChangeConfiguration = new Emitter<theia.ConfigurationChangeEvent>();\n\n    readonly onDidChangeConfiguration: Event<theia.ConfigurationChangeEvent> = this._onDidChangeConfiguration.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.PREFERENCE_REGISTRY_MAIN);\n    }\n\n    init(data: PreferenceData): void {\n        this._preferences = this.parse(data);\n    }\n\n    $acceptConfigurationChanged(data: PreferenceData, eventData: PreferenceChangeExt[]): void {\n        this.init(data);\n        this._onDidChangeConfiguration.fire(this.toConfigurationChangeEvent(eventData));\n    }\n\n    getConfiguration(rawSection?: string, rawScope?: theia.ConfigurationScope | null, extensionId?: string): theia.WorkspaceConfiguration {\n        const overrides = this.parseConfigurationAccessOptions(rawScope);\n\n        const preferences = this.toReadonlyValue(\n            this._preferences.getValue(rawSection, overrides, new TheiaWorkspace(this.workspace)));\n\n        const configuration: theia.WorkspaceConfiguration = {\n            has(key: string): boolean {\n                return typeof lookUp(preferences, key) !== 'undefined';\n            },\n            get: <T>(key: string, defaultValue?: T) => {\n                const result = lookUp(preferences, key);\n                if (typeof result === 'undefined') {\n                    return defaultValue;\n                } else {\n                    let clonedConfig: any = undefined;\n                    const cloneOnWriteProxy = (target: any, accessor: string): any => {\n                        let clonedTarget: any = undefined;\n                        const cloneTarget = () => {\n                            clonedConfig = clonedConfig ? clonedConfig : cloneDeep(preferences);\n                            clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                        };\n\n                        if (!isObject(target)) {\n                            return target;\n                        }\n                        return new Proxy(target, {\n                            get: (targ: any, prop: string) => {\n                                const config = Object.getOwnPropertyDescriptor(targ, prop);\n                                // This check ensures that https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#invariants are satisfied\n                                if (config?.configurable === false && config?.writable === false) {\n                                    return targ[prop];\n                                }\n                                if (typeof prop === 'string' && prop.toLowerCase() === 'tojson') {\n                                    cloneTarget();\n                                    return () => clonedTarget;\n                                }\n                                if (clonedConfig) {\n                                    clonedTarget = clonedTarget ? clonedTarget : lookUp(clonedConfig, accessor);\n                                    return clonedTarget[prop];\n                                }\n                                const res = targ[prop];\n                                if (typeof prop === 'string') {\n                                    return cloneOnWriteProxy(res, `${accessor}.${prop}`);\n                                }\n                                return res;\n                            },\n                            set: (targ: any, prop: string, val: any) => {\n                                cloneTarget();\n                                clonedTarget[prop] = val;\n                                return true;\n                            },\n                            deleteProperty: (targ: any, prop: string) => {\n                                cloneTarget();\n                                delete clonedTarget[prop];\n                                return true;\n                            },\n                            defineProperty: (targ: any, prop: string, descr: any) => {\n                                cloneTarget();\n                                Object.defineProperty(clonedTarget, prop, descr);\n                                return true;\n                            }\n                        });\n                    };\n                    return cloneOnWriteProxy(result, key);\n                }\n            },\n            update: (key: string, value: any, targetScope?: ConfigurationTarget | boolean, withLanguageOverride?: boolean): PromiseLike<void> => {\n                const resourceStr = overrides.resource?.toString();\n                const fullPath = `${overrides.overrideIdentifier ? `[${overrides.overrideIdentifier}].` : ''}${rawSection}.${key}`;\n                if (typeof value !== 'undefined') {\n                    return this.proxy.$updateConfigurationOption(targetScope, fullPath, value, resourceStr, withLanguageOverride);\n                } else {\n                    return this.proxy.$removeConfigurationOption(targetScope, fullPath, resourceStr, withLanguageOverride);\n                }\n            },\n            inspect: <T>(key: string): ConfigurationInspect<T> | undefined => {\n                const path = `${rawSection}.${key}`;\n                const result = this._preferences.inspect<T>(path, overrides, new TheiaWorkspace(this.workspace));\n\n                if (!result) {\n                    return undefined;\n                }\n\n                const configInspect: ConfigurationInspect<T> = { key };\n                configInspect.defaultValue = result.default?.value;\n                configInspect.globalValue = result.user?.value;\n                configInspect.workspaceValue = result.workspace?.value;\n                configInspect.workspaceFolderValue = result.workspaceFolder?.value;\n                return configInspect;\n            }\n        };\n\n        if (typeof preferences === 'object') {\n            mixin(configuration, preferences, false);\n        }\n\n        return Object.freeze(configuration);\n    }\n\n    private toReadonlyValue(data: any): any {\n        const readonlyProxy = (target: any): any => isObject(target)\n            ? new Proxy(target, {\n                get: (targ: any, prop: string) => {\n                    const config = Object.getOwnPropertyDescriptor(targ, prop);\n                    // This check ensures that https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Proxy/Proxy/get#invariants are satisfied\n                    if (config?.configurable === false && config?.writable === false) {\n                        return targ[prop];\n                    }\n                    return readonlyProxy(targ[prop]);\n                },\n                set: (targ: any, prop: string, val: any) => {\n                    throw new Error(`TypeError: Cannot assign to read only property '${prop}' of object`);\n                },\n                deleteProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot delete read only property '${prop}' of object`);\n                },\n                defineProperty: (targ: any, prop: string) => {\n                    throw new Error(`TypeError: Cannot define property '${prop}' of a readonly object`);\n                },\n                setPrototypeOf: (targ: any) => {\n                    throw new Error('TypeError: Cannot set prototype for a readonly object');\n                },\n                isExtensible: () => false,\n                preventExtensions: () => true\n            })\n            : target;\n        return readonlyProxy(data);\n    }\n\n    private parse(data: PreferenceData): Configuration {\n        const defaultConfiguration = this.getConfigurationModel(data[PreferenceScope.Default]);\n        const userConfiguration = this.getConfigurationModel(data[PreferenceScope.User]);\n        const workspaceConfiguration = this.getConfigurationModel(data[PreferenceScope.Workspace]);\n        const folderConfigurations = new ResourceMap<ConfigurationModel>();\n        Object.keys(data[PreferenceScope.Folder]).forEach(resource => {\n            folderConfigurations.set(URI.parse(resource), this.getConfigurationModel(data[PreferenceScope.Folder][resource]));\n        });\n        return new Configuration(defaultConfiguration, userConfiguration, undefined, workspaceConfiguration, folderConfigurations);\n    }\n\n    private getConfigurationModel(data: { [key: string]: any }): ConfigurationModel {\n        if (!data) {\n            return new ConfigurationModel();\n        }\n        const configData = this.parseConfigurationData(data);\n        return new ConfigurationModel(configData.contents, configData.keys, configData.overrides);\n    }\n\n    private readonly OVERRIDE_PROPERTY = '^\\\\[(.*)\\\\]$';\n    private readonly OVERRIDE_PROPERTY_PATTERN = new RegExp(this.OVERRIDE_PROPERTY);\n    private readonly OVERRIDE_KEY_TEST = /^\\[([^\\]]+)\\]\\./;\n\n    private parseConfigurationData(data: { [key: string]: any }): Omit<IOverrides, 'identifiers'> & { overrides: IOverrides[] } {\n        const keys = new Array<string>();\n        const overrides: Record<string, IOverrides> = Object.create(null);\n        const contents = Object.keys(data).reduce((result: any, key: string) => {\n            if (injectionRe.test(key)) {\n                return result;\n            }\n            const parts = key.split('.');\n            let branch = result;\n            const isOverride = this.OVERRIDE_KEY_TEST.test(key);\n            if (!isOverride) {\n                keys.push(key);\n            }\n            for (let i = 0; i < parts.length; i++) {\n                if (i === 0 && isOverride) {\n                    const identifier = this.OVERRIDE_PROPERTY_PATTERN.exec(parts[i])![1];\n                    if (!overrides[identifier]) {\n                        overrides[identifier] = { keys: [], identifiers: [identifier], contents: Object.create(null) };\n                    }\n                    branch = overrides[identifier].contents;\n                    overrides[identifier].keys.push(key.slice(parts[i].length + 1));\n                } else if (i === parts.length - 1) {\n                    branch[parts[i]] = data[key];\n                } else {\n                    if (!branch[parts[i]]) {\n                        branch[parts[i]] = Object.create(null);\n                    }\n                    branch = branch[parts[i]];\n                }\n            }\n            return result;\n        }, Object.create(null));\n        return { contents, keys, overrides: Object.values(overrides) };\n    }\n\n    private toConfigurationChangeEvent(eventData: PreferenceChangeExt[]): theia.ConfigurationChangeEvent {\n        return Object.freeze({\n            affectsConfiguration: (section: string, scope?: theia.ConfigurationScope): boolean => {\n                const { resource, overrideIdentifier } = this.parseConfigurationAccessOptions(scope);\n                const sectionWithLanguage = overrideIdentifier ? `[${overrideIdentifier}].${section}` : section;\n                return eventData.some(change => {\n                    const matchesUri = !resource || !change.scope || (resource.toString() + '/').startsWith(change.scope.endsWith('/') ? change.scope : change.scope + '/');\n                    const sliceIndex = overrideIdentifier ? 0 : (this.OVERRIDE_KEY_TEST.exec(change.preferenceName)?.[0].length ?? 0);\n                    const changedPreferenceName = sliceIndex ? change.preferenceName.slice(sliceIndex) : change.preferenceName;\n                    return matchesUri && (\n                        sectionWithLanguage === changedPreferenceName\n                        || sectionWithLanguage.startsWith(`${changedPreferenceName}.`)\n                        || changedPreferenceName.startsWith(`${sectionWithLanguage}.`));\n                });\n            }\n        });\n    }\n\n    protected parseConfigurationAccessOptions(scope?: theia.ConfigurationScope | null): IConfigurationOverrides {\n        if (!scope) {\n            return {};\n        }\n        let overrideIdentifier: string | undefined = undefined;\n        let resource: theia.Uri | undefined;\n        if ('uri' in scope || 'languageId' in scope) {\n            resource = scope.uri;\n        } else {\n            resource = scope;\n        }\n        if ('languageId' in scope) {\n            overrideIdentifier = scope.languageId;\n        }\n        return { resource, overrideIdentifier };\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n// Copied from https://github.com/Microsoft/vscode/blob/master/src/vs/editor/common/viewModel/prefixSumComputer.ts\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * Max unsigned integer that fits on 32 bits.\n */\nconst MAX_UINT_32 = 4294967295; // 2^32 - 1\n\nexport function toUint32(v: number): number {\n    if (v < 0) {\n        return 0;\n    }\n    if (v > MAX_UINT_32) {\n        return MAX_UINT_32;\n    }\n    return v | 0;\n}\n\nexport class PrefixSumIndexOfResult {\n    _prefixSumIndexOfResultBrand: void;\n\n    index: number;\n    remainder: number;\n\n    constructor(index: number, remainder: number) {\n        this.index = index;\n        this.remainder = remainder;\n    }\n}\n\nexport class PrefixSumComputer {\n\n    /**\n     * values[i] is the value at index i\n     */\n    private values: Uint32Array;\n\n    /**\n     * prefixSum[i] = SUM(heights[j]), 0 <= j <= i\n     */\n    private prefixSum: Uint32Array;\n\n    /**\n     * prefixSum[i], 0 <= i <= prefixSumValidIndex can be trusted\n     */\n    private prefixSumValidIndex: Int32Array;\n\n    constructor(values: Uint32Array) {\n        this.values = values;\n        this.prefixSum = new Uint32Array(values.length);\n        this.prefixSumValidIndex = new Int32Array(1);\n        this.prefixSumValidIndex[0] = -1;\n    }\n\n    public getCount(): number {\n        return this.values.length;\n    }\n\n    public insertValues(insertIndex: number, insertValues: Uint32Array): boolean {\n        insertIndex = toUint32(insertIndex);\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n        const insertValuesLen = insertValues.length;\n\n        if (insertValuesLen === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length + insertValuesLen);\n        this.values.set(oldValues.subarray(0, insertIndex), 0);\n        this.values.set(oldValues.subarray(insertIndex), insertIndex + insertValuesLen);\n        this.values.set(insertValues, insertIndex);\n\n        if (insertIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = insertIndex - 1;\n        }\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public changeValue(index: number, value: number): boolean {\n        index = toUint32(index);\n        value = toUint32(value);\n\n        if (this.values[index] === value) {\n            return false;\n        }\n        this.values[index] = value;\n        if (index - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = index - 1;\n        }\n        return true;\n    }\n\n    public removeValues(startIndex: number, count: number): boolean {\n        startIndex = toUint32(startIndex);\n        count = toUint32(count);\n\n        const oldValues = this.values;\n        const oldPrefixSum = this.prefixSum;\n\n        if (startIndex >= oldValues.length) {\n            return false;\n        }\n\n        const maxCount = oldValues.length - startIndex;\n        if (count >= maxCount) {\n            count = maxCount;\n        }\n\n        if (count === 0) {\n            return false;\n        }\n\n        this.values = new Uint32Array(oldValues.length - count);\n        this.values.set(oldValues.subarray(0, startIndex), 0);\n        this.values.set(oldValues.subarray(startIndex + count), startIndex);\n\n        this.prefixSum = new Uint32Array(this.values.length);\n        if (startIndex - 1 < this.prefixSumValidIndex[0]) {\n            this.prefixSumValidIndex[0] = startIndex - 1;\n        }\n        if (this.prefixSumValidIndex[0] >= 0) {\n            this.prefixSum.set(oldPrefixSum.subarray(0, this.prefixSumValidIndex[0] + 1));\n        }\n        return true;\n    }\n\n    public getTotalValue(): number {\n        if (this.values.length === 0) {\n            return 0;\n        }\n        return this._getAccumulatedValue(this.values.length - 1);\n    }\n\n    public getAccumulatedValue(index: number): number {\n        if (index < 0) {\n            return 0;\n        }\n\n        index = toUint32(index);\n        return this._getAccumulatedValue(index);\n    }\n\n    private _getAccumulatedValue(index: number): number {\n        if (index <= this.prefixSumValidIndex[0]) {\n            return this.prefixSum[index];\n        }\n\n        let startIndex = this.prefixSumValidIndex[0] + 1;\n        if (startIndex === 0) {\n            this.prefixSum[0] = this.values[0];\n            startIndex++;\n        }\n\n        if (index >= this.values.length) {\n            index = this.values.length - 1;\n        }\n\n        for (let i = startIndex; i <= index; i++) {\n            this.prefixSum[i] = this.prefixSum[i - 1] + this.values[i];\n        }\n        this.prefixSumValidIndex[0] = Math.max(this.prefixSumValidIndex[0], index);\n        return this.prefixSum[index];\n    }\n\n    public getIndexOf(accumulatedValue: number): PrefixSumIndexOfResult {\n        accumulatedValue = Math.floor(accumulatedValue);\n\n        // Compute all sums (to get a fully valid prefixSum)\n        this.getTotalValue();\n\n        let low = 0;\n        let high = this.values.length - 1;\n        let mid: number;\n        let midStop: number;\n        let midStart: number;\n\n        while (low <= high) {\n            mid = low + ((high - low) / 2) | 0;\n\n            midStop = this.prefixSum[mid];\n            midStart = midStop - this.values[mid];\n\n            if (accumulatedValue < midStart) {\n                high = mid - 1;\n            } else if (accumulatedValue >= midStop) {\n                low = mid + 1;\n            } else {\n                break;\n            }\n        }\n\n        return new PrefixSumIndexOfResult(mid!, accumulatedValue - midStart!);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport {\n    QuickOpenExt, PLUGIN_RPC_CONTEXT as Ext, QuickOpenMain, TransferInputBox, Plugin,\n    Item, TransferQuickInputButton, TransferQuickPickItems, TransferQuickInput\n} from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { QuickPickItem, InputBoxOptions, InputBox, QuickPick, QuickInput } from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { InputBoxValidationSeverity, QuickInputButtons, QuickPickItemKind, ThemeIcon } from './types-impl';\nimport { URI } from '@theia/core/shared/vscode-uri';\nimport * as path from 'path';\nimport { convertToTransferQuickPickItems } from './type-converters';\nimport { PluginPackage } from '../common/plugin-protocol';\nimport { QuickInputButtonHandle } from '@theia/core/lib/browser';\nimport { MaybePromise } from '@theia/core/lib/common/types';\nimport Severity from '@theia/monaco-editor-core/esm/vs/base/common/severity';\n\nconst canceledName = 'Canceled';\n/**\n * Checks if the given error is a promise in canceled state\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isPromiseCanceledError(error: any): boolean {\n    return error instanceof Error && error.name === canceledName && error.message === canceledName;\n}\n\nexport function getIconUris(iconPath: theia.QuickInputButton['iconPath']): { dark: URI, light: URI } | { id: string } {\n    if (ThemeIcon.is(iconPath)) {\n        return { id: iconPath.id };\n    }\n    const dark = getDarkIconUri(iconPath as URI | { light: URI; dark: URI; });\n    const light = getLightIconUri(iconPath as URI | { light: URI; dark: URI; });\n    // Tolerate strings: https://github.com/microsoft/vscode/issues/110432#issuecomment-726144556\n    return {\n        dark: typeof dark === 'string' ? URI.file(dark) : dark,\n        light: typeof light === 'string' ? URI.file(light) : light\n    };\n}\n\nexport function getLightIconUri(iconPath: URI | { light: URI; dark: URI; }): URI {\n    return typeof iconPath === 'object' && 'light' in iconPath ? iconPath.light : iconPath;\n}\n\nexport function getDarkIconUri(iconPath: URI | { light: URI; dark: URI; }): URI {\n    return typeof iconPath === 'object' && 'dark' in iconPath ? iconPath.dark : iconPath;\n}\n\nexport class QuickOpenExtImpl implements QuickOpenExt {\n    private proxy: QuickOpenMain;\n    private onDidSelectItem: undefined | ((handle: number) => void);\n    private validateInputHandler?: (input: string) => MaybePromise<string | theia.InputBoxValidationMessage | null | undefined>;\n    private _sessions = new Map<number, QuickInputExt>(); // Each quickinput will have a number so that we know where to fire events\n    private _instances = 0;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.QUICK_OPEN_MAIN);\n    }\n\n    /* eslint-disable max-len */\n    showQuickPick(itemsOrItemsPromise: Array<QuickPickItem> | Promise<Array<QuickPickItem>>, options: theia.QuickPickOptions & { canPickMany: true; }, token?: theia.CancellationToken): Promise<Array<QuickPickItem> | undefined>;\n    showQuickPick(itemsOrItemsPromise: string[] | Promise<string[]>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<string | undefined>;\n    showQuickPick(itemsOrItemsPromise: Array<QuickPickItem> | Promise<Array<QuickPickItem>>, options?: theia.QuickPickOptions, token?: theia.CancellationToken): Promise<QuickPickItem | undefined>;\n    showQuickPick(itemsOrItemsPromise: Item[] | Promise<Item[]>, options?: theia.QuickPickOptions, token: theia.CancellationToken = CancellationToken.None): Promise<Item | Item[] | undefined> {\n        this.onDidSelectItem = undefined;\n\n        const itemsPromise = <Promise<Item[]>>Promise.resolve(itemsOrItemsPromise);\n\n        const instance = ++this._instances;\n\n        const widgetPromise = this.proxy.$show(instance, {\n            title: options && options.title,\n            canPickMany: options && options.canPickMany,\n            placeHolder: options && options.placeHolder,\n            matchOnDescription: options && options.matchOnDescription,\n            matchOnDetail: options && options.matchOnDetail,\n            ignoreFocusLost: options && options.ignoreFocusOut\n        }, token);\n\n        const widgetClosedMarker = {};\n        const widgetClosedPromise = widgetPromise.then(() => widgetClosedMarker);\n\n        return Promise.race([widgetClosedPromise, itemsPromise]).then(result => {\n            if (result === widgetClosedMarker) {\n                return undefined;\n            }\n            return itemsPromise.then(async items => {\n                const pickItems: Array<TransferQuickPickItems> = convertToTransferQuickPickItems(items);\n\n                if (options && typeof options.onDidSelectItem === 'function') {\n                    this.onDidSelectItem = handle => {\n                        options.onDidSelectItem!(items[handle]);\n                    };\n                }\n\n                this.proxy.$setItems(instance, pickItems);\n\n                return widgetPromise.then(handle => {\n                    if (typeof handle === 'number') {\n                        if (options && options.canPickMany) {\n                            return Array.of(items[handle]);\n                        } else {\n                            return items[handle];\n                        }\n\n                    } else if (Array.isArray(handle)) {\n                        return handle.map(h => items[h]);\n                    }\n                    return undefined;\n                });\n            });\n        }).then(undefined, err => {\n            if (isPromiseCanceledError(err)) {\n                return undefined;\n            }\n\n            this.proxy.$setError(instance, err);\n\n            return Promise.reject(err);\n        });\n    }\n\n    $onItemSelected(handle: number): void {\n        if (this.onDidSelectItem) {\n            this.onDidSelectItem(handle);\n        }\n    }\n\n    // ---- input\n\n    showInput(options?: InputBoxOptions, token: theia.CancellationToken = CancellationToken.None): PromiseLike<string | undefined> {\n        this.validateInputHandler = options?.validateInput;\n        if (!options) { options = { placeHolder: '' }; }\n        return this.proxy.$input(options, typeof this.validateInputHandler === 'function', token);\n    }\n\n    async showInputBox(options: TransferInputBox): Promise<string | undefined> {\n        this.validateInputHandler = typeof options.validateInput === 'function' ? options.validateInput : undefined;\n        return this.proxy.$showInputBox(options, typeof this.validateInputHandler === 'function');\n    }\n\n    async $validateInput(input: string): Promise<string | { content: string; severity: Severity; } | null | undefined> {\n        if (!this.validateInputHandler) {\n            return;\n        }\n\n        const result = await this.validateInputHandler(input);\n        if (!result || typeof result === 'string') {\n            return result;\n        }\n\n        let severity: Severity;\n        switch (result.severity) {\n            case InputBoxValidationSeverity.Info:\n                severity = Severity.Info;\n                break;\n            case InputBoxValidationSeverity.Warning:\n                severity = Severity.Warning;\n                break;\n            case InputBoxValidationSeverity.Error:\n                severity = Severity.Error;\n                break;\n            default:\n                severity = result.message ? Severity.Error : Severity.Ignore;\n                break;\n        }\n\n        return {\n            content: result.message,\n            severity\n        };\n    }\n\n    // ---- QuickInput\n\n    createQuickPick<T extends QuickPickItem>(plugin: Plugin): QuickPick<T> {\n        const session: any = new QuickPickExt<T>(this, this.proxy, plugin, () => this._sessions.delete(session._id));\n        this._sessions.set(session._id, session);\n        return session;\n    }\n\n    createInputBox(plugin: Plugin): InputBox {\n        const session: any = new InputBoxExt(this, this.proxy, plugin, () => this._sessions.delete(session._id));\n        this._sessions.set(session._id, session);\n        return session;\n    }\n\n    hide(): void {\n        this.proxy.$hide();\n    }\n\n    async $acceptOnDidAccept(sessionId: number): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireAccept();\n        }\n    }\n\n    async $acceptDidChangeValue(sessionId: number, changedValue: string): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireChangedValue(changedValue);\n        }\n    }\n\n    async $acceptOnDidHide(sessionId: number): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            session._fireHide();\n        }\n    }\n\n    async $acceptOnDidTriggerButton(sessionId: number, btn: QuickInputButtonHandle): Promise<void> {\n        const session = this._sessions.get(sessionId);\n        if (session) {\n            if (btn.index === -1) {\n                session._fireButtonTrigger(QuickInputButtons.Back);\n            } else if (session && (session instanceof InputBoxExt || session instanceof QuickPickExt)) {\n                const btnFromIndex = session.buttons[btn.index];\n                session._fireButtonTrigger(btnFromIndex as theia.QuickInputButton);\n            }\n        }\n    }\n\n    $onDidChangeActive(sessionId: number, handles: number[]): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidChangeActive(handles);\n        }\n    }\n\n    $onDidChangeSelection(sessionId: number, handles: number[]): void {\n        const session = this._sessions.get(sessionId);\n        if (session instanceof QuickPickExt) {\n            session._fireDidChangeSelection(handles);\n        }\n    }\n}\n\nexport class QuickInputExt implements QuickInput {\n\n    private static _nextId = 1;\n    _id = QuickInputExt._nextId++;\n\n    private _busy: boolean;\n    private _enabled: boolean;\n    private _ignoreFocusOut: boolean;\n    private _step: number | undefined;\n    private _title: string | undefined;\n    private _totalSteps: number | undefined;\n    private _value: string;\n    private _placeholder: string | undefined;\n    private _buttons: theia.QuickInputButton[] = [];\n    private _handlesToButtons = new Map<number, theia.QuickInputButton>();\n    protected expectingHide = false;\n    protected visible: boolean;\n    private _disposed = false;\n    protected disposableCollection: DisposableCollection;\n\n    private onDidAcceptEmitter: Emitter<void>;\n    /**\n     * it has to be named `_onDidChangeValueEmitter`, since Gitlens extension relies on it\n     * https://github.com/eamodio/vscode-gitlens/blob/f22a9cd4199ac498c217643282a6a412e1fc01ae/src/commands/gitCommands.ts#L242-L243\n     */\n    private _onDidChangeValueEmitter: Emitter<string>;\n    private onDidHideEmitter: Emitter<void>;\n    private onDidTriggerButtonEmitter: Emitter<theia.QuickInputButton>;\n    private _updateTimeout: any;\n    private _pendingUpdate: TransferQuickInput = { id: this._id };\n\n    constructor(readonly quickOpen: QuickOpenExtImpl, readonly quickOpenMain: QuickOpenMain, readonly plugin: Plugin, private _onDidDispose: () => void) {\n        this.title = undefined;\n        this.step = undefined;\n        this.totalSteps = undefined;\n        this.enabled = true;\n        this.busy = false;\n        this.ignoreFocusOut = false;\n        this.value = '';\n\n        this.visible = false;\n\n        this.disposableCollection = new DisposableCollection();\n        this.disposableCollection.push(this.onDidAcceptEmitter = new Emitter());\n        this.disposableCollection.push(this._onDidChangeValueEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidHideEmitter = new Emitter());\n        this.disposableCollection.push(this.onDidTriggerButtonEmitter = new Emitter());\n    }\n\n    get title(): string | undefined {\n        return this._title;\n    }\n\n    set title(title: string | undefined) {\n        this._title = title;\n        this.update({ title });\n    }\n\n    get step(): number | undefined {\n        return this._step;\n    }\n\n    set step(step: number | undefined) {\n        this._step = step;\n        this.update({ step });\n    }\n\n    get totalSteps(): number | undefined {\n        return this._totalSteps;\n    }\n\n    set totalSteps(totalSteps: number | undefined) {\n        this._totalSteps = totalSteps;\n        this.update({ totalSteps });\n    }\n\n    get enabled(): boolean {\n        return this._enabled;\n    }\n\n    set enabled(enabled: boolean) {\n        this._enabled = enabled;\n        this.update({ enabled });\n    }\n\n    get busy(): boolean {\n        return this._busy;\n    }\n\n    set busy(busy: boolean) {\n        this._busy = busy;\n        this.update({ busy });\n    }\n\n    get ignoreFocusOut(): boolean {\n        return this._ignoreFocusOut;\n    }\n\n    set ignoreFocusOut(ignoreFocusOut: boolean) {\n        this._ignoreFocusOut = ignoreFocusOut;\n        this.update({ ignoreFocusOut });\n    }\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this._value = value;\n        this.update({ value });\n    }\n\n    get placeholder(): string | undefined {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string | undefined) {\n        this._placeholder = placeholder;\n        this.update({ placeholder });\n    }\n\n    get buttons(): theia.QuickInputButton[] {\n        return this._buttons;\n    }\n\n    set buttons(buttons: theia.QuickInputButton[]) {\n        this._buttons = buttons.slice();\n        this._handlesToButtons.clear();\n        buttons.forEach((button, i) => {\n            const handle = button === QuickInputButtons.Back ? -1 : i;\n            this._handlesToButtons.set(handle, button);\n        });\n        this.update({\n            buttons: buttons.map<TransferQuickInputButton>((button, i) => ({\n                iconPath: getIconUris(button.iconPath),\n                tooltip: button.tooltip,\n                handle: button === QuickInputButtons.Back ? -1 : i,\n            }))\n        });\n    }\n\n    show(): void {\n        this.visible = true;\n        this.expectingHide = true;\n        this.update({ visible: true });\n    }\n\n    dispose(): void {\n        if (this._disposed) {\n            return;\n        }\n        this._disposed = true;\n        this._fireHide();\n        this.disposableCollection.dispose();\n        this._onDidDispose();\n        this.quickOpenMain.$dispose(this._id);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    protected update(properties: Record<string, any>): void {\n        if (this._disposed) {\n            return;\n        }\n        for (const key of Object.keys(properties)) {\n            const value = properties[key];\n            this._pendingUpdate[key] = value === undefined ? null : value;\n        }\n\n        if ('visible' in this._pendingUpdate) {\n            if (this._updateTimeout) {\n                clearTimeout(this._updateTimeout);\n                this._updateTimeout = undefined;\n            }\n            this.dispatchUpdate();\n        } else if (this.visible && !this._updateTimeout) {\n            // Defer the update so that multiple changes to setters dont cause a redraw each\n            this._updateTimeout = setTimeout(() => {\n                this._updateTimeout = undefined;\n                this.dispatchUpdate();\n            }, 0);\n        }\n    }\n\n    private dispatchUpdate(): void {\n        this.quickOpenMain.$createOrUpdate(this._pendingUpdate);\n        this._pendingUpdate = { id: this._id };\n    }\n\n    hide(): void {\n        this.quickOpenMain.$hide();\n        this.dispose();\n    }\n\n    protected convertURL(iconPath: URI | { light: string | URI; dark: string | URI } | ThemeIcon):\n        URI | { light: string | URI; dark: string | URI } | ThemeIcon {\n        const toUrl = (arg: string | URI) => {\n            arg = arg instanceof URI && arg.scheme === 'file' ? arg.fsPath : arg;\n            if (typeof arg !== 'string') {\n                return arg.toString(true);\n            }\n            const { packagePath } = this.plugin.rawModel;\n            const absolutePath = path.isAbsolute(arg) ? arg : path.join(packagePath, arg);\n            const normalizedPath = path.normalize(absolutePath);\n            const relativePath = path.relative(packagePath, normalizedPath);\n            return PluginPackage.toPluginUrl(this.plugin.rawModel, relativePath);\n        };\n        if (ThemeIcon.is(iconPath)) {\n            return iconPath;\n        } else if (typeof iconPath === 'string' || iconPath instanceof URI) {\n            return URI.parse(toUrl(iconPath));\n        } else {\n            const { light, dark } = iconPath as { light: string | URI, dark: string | URI };\n            return {\n                light: toUrl(light),\n                dark: toUrl(dark)\n            };\n        }\n    }\n\n    _fireAccept(): void {\n        this.onDidAcceptEmitter.fire(undefined);\n    }\n\n    _fireChangedValue(changedValue: string): void {\n        this._value = changedValue;\n        this._onDidChangeValueEmitter.fire(changedValue);\n    }\n\n    _fireHide(): void {\n        if (this.expectingHide) {\n            this.expectingHide = false;\n            this.onDidHideEmitter.fire(undefined);\n        }\n    }\n\n    _fireButtonTrigger(btn: theia.QuickInputButton): void {\n        this.onDidTriggerButtonEmitter.fire(btn);\n    }\n\n    get onDidHide(): Event<void> {\n        return this.onDidHideEmitter.event;\n    }\n\n    get onDidAccept(): Event<void> {\n        return this.onDidAcceptEmitter.event;\n    }\n\n    get onDidChangeValue(): Event<string> {\n        return this._onDidChangeValueEmitter.event;\n    }\n\n    get onDidTriggerButton(): Event<theia.QuickInputButton> {\n        return this.onDidTriggerButtonEmitter.event;\n    }\n}\n\n/**\n * Base implementation of {@link InputBox} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5109\n */\nexport class InputBoxExt extends QuickInputExt implements InputBox {\n\n    private _password: boolean;\n    private _prompt: string | undefined;\n    private _validationMessage: string | undefined;\n\n    constructor(\n        override readonly quickOpen: QuickOpenExtImpl,\n        override readonly quickOpenMain: QuickOpenMain,\n        override readonly plugin: Plugin,\n        onDispose: () => void\n    ) {\n        super(quickOpen, quickOpenMain, plugin, onDispose);\n\n        this.buttons = [];\n        this.password = false;\n        this.value = '';\n    }\n\n    get password(): boolean {\n        return this._password;\n    }\n\n    set password(password: boolean) {\n        this._password = password;\n        this.update({ password });\n    }\n\n    get prompt(): string | undefined {\n        return this._prompt;\n    }\n\n    set prompt(prompt: string | undefined) {\n        this._prompt = prompt;\n        this.update({ prompt });\n    }\n\n    get validationMessage(): string | undefined {\n        return this._validationMessage;\n    }\n\n    set validationMessage(validationMessage: string | undefined) {\n        if (this._validationMessage !== validationMessage) {\n            this._validationMessage = validationMessage;\n            this.update({ validationMessage });\n        }\n    }\n}\n\n/**\n * Base implementation of {@link QuickPick} that uses {@link QuickOpenExt}.\n * Missing functionality is going to be implemented in the scope of https://github.com/eclipse-theia/theia/issues/5059\n */\nexport class QuickPickExt<T extends theia.QuickPickItem> extends QuickInputExt implements QuickPick<T> {\n    private _items: T[] = [];\n    private _handlesToItems = new Map<number, T>();\n    private _itemsToHandles = new Map<T, number>();\n    private _canSelectMany = false;\n    private _matchOnDescription = true;\n    private _matchOnDetail = true;\n    private _sortByLabel = true;\n    private _keepScrollPosition = false;\n    private _activeItems: T[] = [];\n    private _selectedItems: T[] = [];\n    private readonly _onDidChangeActiveEmitter = new Emitter<T[]>();\n    private readonly _onDidChangeSelectionEmitter = new Emitter<T[]>();\n\n    constructor(\n        override readonly quickOpen: QuickOpenExtImpl,\n        override readonly quickOpenMain: QuickOpenMain,\n        override readonly plugin: Plugin,\n        onDispose: () => void\n    ) {\n        super(quickOpen, quickOpenMain, plugin, onDispose);\n        this.buttons = [];\n\n        this.disposableCollection.push(this._onDidChangeActiveEmitter);\n        this.disposableCollection.push(this._onDidChangeSelectionEmitter);\n\n        this.update({ type: 'quickPick' });\n    }\n\n    get items(): T[] {\n        return this._items;\n    }\n\n    set items(items: T[]) {\n        this._items = items.slice();\n        this._handlesToItems.clear();\n        this._itemsToHandles.clear();\n        items.forEach((item, i) => {\n            this._handlesToItems.set(i, item);\n            this._itemsToHandles.set(item, i);\n        });\n        this.update({\n            items: items.map((item, i) => {\n                if (item.kind === QuickPickItemKind.Separator) {\n                    return { kind: item.kind, label: item.label };\n                }\n                return {\n                    kind: item.kind,\n                    label: item.label,\n                    description: item.description,\n                    handle: i,\n                    detail: item.detail,\n                    picked: item.picked,\n                    alwaysShow: item.alwaysShow\n                };\n            })\n        });\n    }\n\n    get canSelectMany(): boolean {\n        return this._canSelectMany;\n    }\n\n    set canSelectMany(canSelectMany: boolean) {\n        this._canSelectMany = canSelectMany;\n        this.update({ canSelectMany });\n    }\n\n    get matchOnDescription(): boolean {\n        return this._matchOnDescription;\n    }\n\n    set matchOnDescription(matchOnDescription: boolean) {\n        this._matchOnDescription = matchOnDescription;\n        this.update({ matchOnDescription });\n    }\n\n    get matchOnDetail(): boolean {\n        return this._matchOnDetail;\n    }\n\n    set matchOnDetail(matchOnDetail: boolean) {\n        this._matchOnDetail = matchOnDetail;\n        this.update({ matchOnDetail });\n    }\n\n    get sortByLabel(): boolean {\n        return this._sortByLabel;\n    }\n\n    set sortByLabel(sortByLabel: boolean) {\n        this._sortByLabel = sortByLabel;\n        this.update({ sortByLabel });\n    }\n\n    get keepScrollPosition(): boolean {\n        return this._keepScrollPosition;\n    }\n\n    set keepScrollPosition(keepScrollPosition: boolean) {\n        this._keepScrollPosition = keepScrollPosition;\n        this.update({ keepScrollPosition });\n    }\n\n    get activeItems(): T[] {\n        return this._activeItems;\n    }\n\n    set activeItems(activeItems: T[]) {\n        this._activeItems = activeItems.filter(item => this._itemsToHandles.has(item));\n        this.update({ activeItems: this._activeItems.map(item => this._itemsToHandles.get(item)) });\n    }\n\n    onDidChangeActive = this._onDidChangeActiveEmitter.event;\n\n    get selectedItems(): T[] {\n        return this._selectedItems;\n    }\n\n    set selectedItems(selectedItems: T[]) {\n        this._selectedItems = selectedItems.filter(item => this._itemsToHandles.has(item));\n        this.update({ selectedItems: this._selectedItems.map(item => this._itemsToHandles.get(item)) });\n    }\n\n    onDidChangeSelection = this._onDidChangeSelectionEmitter.event;\n\n    _fireDidChangeActive(handles: number[]): void {\n        const items = handles.map(handle => this._handlesToItems.get(handle)).filter(e => !!e) as T[];\n        this._activeItems = items;\n        this._onDidChangeActiveEmitter.fire(items);\n    }\n\n    _fireDidChangeSelection(handles: number[]): void {\n        const items = handles.map(handle => this._handlesToItems.get(handle)).filter(e => !!e) as T[];\n        this._selectedItems = items;\n        this._onDidChangeSelectionEmitter.fire(items);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2019-2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.52.1/src/vs/workbench/api/common/extHostSCM.ts\n\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport {\n    Plugin, PLUGIN_RPC_CONTEXT,\n    ScmExt,\n    ScmMain, ScmRawResource, ScmRawResourceGroup,\n    ScmRawResourceSplice, ScmRawResourceSplices,\n    SourceControlGroupFeatures\n} from '../common';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from '../plugin/command-registry';\nimport { Splice } from '../common/arrays';\nimport { UriComponents } from '../common/uri-components';\nimport { Command } from '../common/plugin-api-rpc-model';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { URI } from './types-impl';\nimport { ScmCommandArg } from '../common/plugin-api-rpc';\nimport { sep } from '@theia/core/lib/common/paths';\ntype ProviderHandle = number;\ntype GroupHandle = number;\ntype ResourceStateHandle = number;\n\nfunction getIconResource(decorations?: theia.SourceControlResourceThemableDecorations): theia.Uri | undefined {\n    if (!decorations) {\n        return undefined;\n    } else if (typeof decorations.iconPath === 'string') {\n        return URI.file(decorations.iconPath);\n    } else {\n        return decorations.iconPath;\n    }\n}\n\nfunction comparePaths(one: string, other: string, caseSensitive = false): number {\n    const oneParts = one.split(sep);\n    const otherParts = other.split(sep);\n\n    const lastOne = oneParts.length - 1;\n    const lastOther = otherParts.length - 1;\n    let endOne: boolean;\n    let endOther: boolean;\n\n    for (let i = 0; ; i++) {\n        endOne = lastOne === i;\n        endOther = lastOther === i;\n\n        if (endOne && endOther) {\n            const onePart = caseSensitive ? oneParts[i].toLocaleLowerCase() : oneParts[i];\n            const otherPart = caseSensitive ? otherParts[i].toLocaleLowerCase() : otherParts[i];\n            return onePart > otherPart ? -1 : 1;\n        } else if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        if (endOne) {\n            return -1;\n        } else if (endOther) {\n            return 1;\n        }\n\n        const result = comparePathComponents(oneParts[i], otherParts[i], caseSensitive);\n\n        if (result !== 0) {\n            return result;\n        }\n    }\n}\n\nfunction comparePathComponents(one: string, other: string, caseSensitive = false): number {\n    if (!caseSensitive) {\n        one = one && one.toLowerCase();\n        other = other && other.toLowerCase();\n    }\n\n    if (one === other) {\n        return 0;\n    }\n\n    return one < other ? -1 : 1;\n}\n\nfunction compareResourceThemableDecorations(a: theia.SourceControlResourceThemableDecorations, b: theia.SourceControlResourceThemableDecorations): number {\n    if (!a.iconPath && !b.iconPath) {\n        return 0;\n    } else if (!a.iconPath) {\n        return -1;\n    } else if (!b.iconPath) {\n        return 1;\n    }\n\n    const aPath = typeof a.iconPath === 'string' ? a.iconPath : a.iconPath.fsPath;\n    const bPath = typeof b.iconPath === 'string' ? b.iconPath : b.iconPath.fsPath;\n    return comparePaths(aPath, bPath);\n}\n\nfunction compareResourceStatesDecorations(a: theia.SourceControlResourceDecorations, b: theia.SourceControlResourceDecorations): number {\n    let result = 0;\n\n    if (a.strikeThrough !== b.strikeThrough) {\n        return a.strikeThrough ? 1 : -1;\n    }\n\n    if (a.faded !== b.faded) {\n        return a.faded ? 1 : -1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        return (a.tooltip || '').localeCompare(b.tooltip || '');\n    }\n\n    result = compareResourceThemableDecorations(a, b);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.light && b.light) {\n        result = compareResourceThemableDecorations(a.light, b.light);\n    } else if (a.light) {\n        return 1;\n    } else if (b.light) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.dark && b.dark) {\n        result = compareResourceThemableDecorations(a.dark, b.dark);\n    } else if (a.dark) {\n        return 1;\n    } else if (b.dark) {\n        return -1;\n    }\n\n    return result;\n}\n\nfunction compareCommands(a: theia.Command, b: theia.Command): number {\n    if (a.command !== b.command) {\n        return a.command! < b.command! ? -1 : 1;\n    }\n\n    if (a.title !== b.title) {\n        return a.title! < b.title! ? -1 : 1;\n    }\n\n    if (a.tooltip !== b.tooltip) {\n        if (a.tooltip !== undefined && b.tooltip !== undefined) {\n            return a.tooltip < b.tooltip ? -1 : 1;\n        } else if (a.tooltip !== undefined) {\n            return 1;\n        } else if (b.tooltip !== undefined) {\n            return -1;\n        }\n    }\n\n    if (a.arguments === b.arguments) {\n        return 0;\n    } else if (!a.arguments) {\n        return -1;\n    } else if (!b.arguments) {\n        return 1;\n    } else if (a.arguments.length !== b.arguments.length) {\n        return a.arguments.length - b.arguments.length;\n    }\n\n    for (let i = 0; i < a.arguments.length; i++) {\n        const aArg = a.arguments[i];\n        const bArg = b.arguments[i];\n\n        if (aArg === bArg) {\n            continue;\n        }\n\n        return aArg < bArg ? -1 : 1;\n    }\n\n    return 0;\n}\n\nfunction compareResourceStates(a: theia.SourceControlResourceState, b: theia.SourceControlResourceState): number {\n    let result = comparePaths(a.resourceUri.fsPath, b.resourceUri.fsPath, true);\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.command && b.command) {\n        result = compareCommands(a.command, b.command);\n    } else if (a.command) {\n        return 1;\n    } else if (b.command) {\n        return -1;\n    }\n\n    if (result !== 0) {\n        return result;\n    }\n\n    if (a.decorations && b.decorations) {\n        result = compareResourceStatesDecorations(a.decorations, b.decorations);\n    } else if (a.decorations) {\n        return 1;\n    } else if (b.decorations) {\n        return -1;\n    }\n\n    return result;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction compareArgs(a: any[], b: any[]): boolean {\n    for (let i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\nfunction commandEquals(a: theia.Command, b: theia.Command): boolean {\n    return a.command === b.command\n        && a.title === b.title\n        && a.tooltip === b.tooltip\n        && (a.arguments && b.arguments ? compareArgs(a.arguments, b.arguments) : a.arguments === b.arguments);\n}\n\nfunction commandListEquals(a: readonly theia.Command[], b: readonly theia.Command[]): boolean {\n    return equals(a, b, commandEquals);\n}\n\nfunction equals<T>(one: ReadonlyArray<T> | undefined, other: ReadonlyArray<T> | undefined, itemEquals: (a: T, b: T) => boolean = (a, b) => a === b): boolean {\n    if (one === other) {\n        return true;\n    }\n\n    if (!one || !other) {\n        return false;\n    }\n\n    if (one.length !== other.length) {\n        return false;\n    }\n\n    for (let i = 0, len = one.length; i < len; i++) {\n        if (!itemEquals(one[i], other[i])) {\n            return false;\n        }\n    }\n\n    return true;\n}\n\ninterface ValidateInput {\n    (value: string, cursorPosition: number): theia.ProviderResult<theia.SourceControlInputBoxValidation | undefined | null>;\n}\n\nexport class ScmInputBoxImpl implements theia.SourceControlInputBox {\n\n    private _value: string = '';\n\n    get value(): string {\n        return this._value;\n    }\n\n    set value(value: string) {\n        this.proxy.$setInputBoxValue(this.sourceControlHandle, value);\n        this.updateValue(value);\n    }\n\n    private readonly onDidChangeEmitter = new Emitter<string>();\n\n    get onDidChange(): Event<string> {\n        return this.onDidChangeEmitter.event;\n    }\n\n    private _placeholder: string = '';\n\n    get placeholder(): string {\n        return this._placeholder;\n    }\n\n    set placeholder(placeholder: string) {\n        this.proxy.$setInputBoxPlaceholder(this.sourceControlHandle, placeholder);\n        this._placeholder = placeholder;\n    }\n\n    private _visible: boolean = true;\n\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    set visible(visible: boolean) {\n        this.proxy.$setInputBoxVisible(this.sourceControlHandle, visible);\n        this._visible = visible;\n    }\n\n    private _validateInput: ValidateInput | undefined;\n\n    get validateInput(): ValidateInput | undefined {\n        return this._validateInput;\n    }\n\n    set validateInput(fn: ValidateInput | undefined) {\n        if (fn && typeof fn !== 'function') {\n            throw new Error(`[${this.plugin.model.id}]: Invalid SCM input box validation function`);\n        }\n\n        this._validateInput = fn;\n    }\n\n    constructor(private plugin: Plugin, private proxy: ScmMain, private sourceControlHandle: number) {\n        // noop\n    }\n\n    onInputBoxValueChange(value: string): void {\n        this.updateValue(value);\n    }\n\n    private updateValue(value: string): void {\n        this._value = value;\n        this.onDidChangeEmitter.fire(value);\n    }\n}\n\nclass SsmResourceGroupImpl implements theia.SourceControlResourceGroup {\n\n    private static handlePool: number = 0;\n    private resourceHandlePool: number = 0;\n    private _resourceStates: theia.SourceControlResourceState[] = [];\n\n    private resourceStatesMap = new Map<ResourceStateHandle, theia.SourceControlResourceState>();\n    private resourceStatesCommandsMap = new Map<ResourceStateHandle, theia.Command>();\n    private resourceStatesDisposablesMap = new Map<ResourceStateHandle, Disposable>();\n\n    private readonly onDidUpdateResourceStatesEmitter = new Emitter<void>();\n    readonly onDidUpdateResourceStates = this.onDidUpdateResourceStatesEmitter.event;\n\n    private _disposed = false;\n    get disposed(): boolean { return this._disposed; }\n    private readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    private handlesSnapshot: number[] = [];\n    private resourceSnapshot: theia.SourceControlResourceState[] = [];\n\n    get id(): string { return this._id; }\n\n    get label(): string { return this._label; }\n    set label(label: string) {\n        this._label = label;\n        this.proxy.$updateGroupLabel(this.sourceControlHandle, this.handle, label);\n    }\n\n    private _hideWhenEmpty: boolean | undefined = undefined;\n    get hideWhenEmpty(): boolean | undefined { return this._hideWhenEmpty; }\n    set hideWhenEmpty(hideWhenEmpty: boolean | undefined) {\n        this._hideWhenEmpty = hideWhenEmpty;\n        this.proxy.$updateGroup(this.sourceControlHandle, this.handle, this.features);\n    }\n\n    get features(): SourceControlGroupFeatures {\n        return {\n            hideWhenEmpty: this.hideWhenEmpty\n        };\n    }\n\n    get resourceStates(): theia.SourceControlResourceState[] { return [...this._resourceStates]; }\n    set resourceStates(resources: theia.SourceControlResourceState[]) {\n        this._resourceStates = [...resources];\n        this.onDidUpdateResourceStatesEmitter.fire();\n    }\n\n    readonly handle = SsmResourceGroupImpl.handlePool++;\n\n    constructor(\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private sourceControlHandle: number,\n        private _id: string,\n        private _label: string,\n    ) { }\n\n    getResourceState(handle: number): theia.SourceControlResourceState | undefined {\n        return this.resourceStatesMap.get(handle);\n    }\n\n    executeResourceCommand(handle: number): Promise<void> {\n        const command = this.resourceStatesCommandsMap.get(handle);\n\n        if (!command) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise(() => this.commands.executeCommand(command.command!, ...(command.arguments || [])));\n    }\n\n    takeResourceStateSnapshot(): ScmRawResourceSplice[] {\n        const snapshot = [...this._resourceStates];\n        const diffs = sortedDiff(this.resourceSnapshot, snapshot, compareResourceStates);\n\n        const splices = diffs.map<Splice<{ rawResource: ScmRawResource, handle: number }>>(diff => {\n            const toInsert = diff.toInsert.map(r => {\n                const handle = this.resourceHandlePool++;\n                this.resourceStatesMap.set(handle, r);\n\n                const sourceUri = r.resourceUri;\n                const iconUri = getIconResource(r.decorations);\n                const lightIconUri = r.decorations && getIconResource(r.decorations.light) || iconUri;\n                const darkIconUri = r.decorations && getIconResource(r.decorations.dark) || iconUri;\n                const icons: UriComponents[] = [];\n                let command: Command | undefined;\n\n                if (r.command) {\n                    if (r.command.command === 'theia.open' || r.command.command === 'theia.diff') {\n                        const disposables = new DisposableCollection();\n                        command = this.commands.converter.toSafeCommand(r.command, disposables);\n                        this.resourceStatesDisposablesMap.set(handle, disposables);\n                    } else {\n                        this.resourceStatesCommandsMap.set(handle, r.command);\n                    }\n                }\n\n                if (lightIconUri) {\n                    icons.push(lightIconUri);\n                }\n\n                if (darkIconUri && (darkIconUri.toString() !== lightIconUri?.toString())) {\n                    icons.push(darkIconUri);\n                }\n\n                const tooltip = (r.decorations && r.decorations.tooltip) || '';\n                const strikeThrough = r.decorations && !!r.decorations.strikeThrough;\n                const faded = r.decorations && !!r.decorations.faded;\n                const contextValue = r.contextValue || '';\n\n                // TODO remove the letter and colorId fields when the FileDecorationProvider is applied, see https://github.com/eclipse-theia/theia/pull/8911\n                const rawResource = {\n                    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                    handle, sourceUri, letter: (r as any).letter, colorId: (r as any).color.id, icons,\n                    tooltip, strikeThrough, faded, contextValue, command\n                } as ScmRawResource;\n\n                return { rawResource, handle };\n            });\n\n            const { start, deleteCount } = diff;\n            return { start, deleteCount, toInsert };\n        });\n\n        const rawResourceSplices = splices\n            .map(({ start, deleteCount, toInsert }) => ({\n                start: start,\n                deleteCount: deleteCount,\n                rawResources: toInsert.map(i => i.rawResource)\n            } as ScmRawResourceSplice));\n\n        const reverseSplices = splices.reverse();\n\n        for (const { start, deleteCount, toInsert } of reverseSplices) {\n            const handles = toInsert.map(i => i.handle);\n            const handlesToDelete = this.handlesSnapshot.splice(start, deleteCount, ...handles);\n\n            for (const handle of handlesToDelete) {\n                this.resourceStatesMap.delete(handle);\n                this.resourceStatesCommandsMap.delete(handle);\n                this.resourceStatesDisposablesMap.get(handle)?.dispose();\n                this.resourceStatesDisposablesMap.delete(handle);\n            }\n        }\n\n        this.resourceSnapshot = snapshot;\n        return rawResourceSplices;\n    }\n\n    dispose(): void {\n        this._disposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n}\n\nclass SourceControlImpl implements theia.SourceControl {\n\n    private static handlePool: number = 0;\n    private groups: Map<GroupHandle, SsmResourceGroupImpl> = new Map<GroupHandle, SsmResourceGroupImpl>();\n\n    get id(): string {\n        return this._id;\n    }\n\n    get label(): string {\n        return this._label;\n    }\n\n    get rootUri(): theia.Uri | undefined {\n        return this._rootUri;\n    }\n\n    private _inputBox: ScmInputBoxImpl;\n    get inputBox(): ScmInputBoxImpl { return this._inputBox; }\n\n    private _count: number | undefined = undefined;\n\n    get count(): number | undefined {\n        return this._count;\n    }\n\n    set count(count: number | undefined) {\n        if (this._count === count) {\n            return;\n        }\n\n        this._count = count;\n        this.proxy.$updateSourceControl(this.handle, { count });\n    }\n\n    private _quickDiffProvider: theia.QuickDiffProvider | undefined = undefined;\n\n    get quickDiffProvider(): theia.QuickDiffProvider | undefined {\n        return this._quickDiffProvider;\n    }\n\n    set quickDiffProvider(quickDiffProvider: theia.QuickDiffProvider | undefined) {\n        this._quickDiffProvider = quickDiffProvider;\n        this.proxy.$updateSourceControl(this.handle, { hasQuickDiffProvider: !!quickDiffProvider });\n    }\n\n    private _commitTemplate: string | undefined = undefined;\n\n    get commitTemplate(): string | undefined {\n        return this._commitTemplate;\n    }\n\n    set commitTemplate(commitTemplate: string | undefined) {\n        if (commitTemplate === this._commitTemplate) {\n            return;\n        }\n\n        this._commitTemplate = commitTemplate;\n        this.proxy.$updateSourceControl(this.handle, { commitTemplate });\n    }\n\n    private acceptInputDisposables = new DisposableCollection();\n    private _acceptInputCommand: theia.Command | undefined = undefined;\n\n    get acceptInputCommand(): theia.Command | undefined {\n        return this._acceptInputCommand;\n    }\n\n    set acceptInputCommand(acceptInputCommand: theia.Command | undefined) {\n        this.acceptInputDisposables = new DisposableCollection();\n\n        this._acceptInputCommand = acceptInputCommand;\n\n        const internal = this.commands.converter.toSafeCommand(acceptInputCommand, this.acceptInputDisposables);\n        this.proxy.$updateSourceControl(this.handle, { acceptInputCommand: internal });\n    }\n\n    private _statusBarDisposables = new DisposableCollection();\n    private _statusBarCommands: theia.Command[] | undefined = undefined;\n\n    get statusBarCommands(): theia.Command[] | undefined {\n        return this._statusBarCommands;\n    }\n\n    set statusBarCommands(statusBarCommands: theia.Command[] | undefined) {\n        if (this._statusBarCommands && statusBarCommands && commandListEquals(this._statusBarCommands, statusBarCommands)) {\n            return;\n        }\n\n        this._statusBarDisposables = new DisposableCollection();\n\n        this._statusBarCommands = statusBarCommands;\n\n        const internal = (statusBarCommands || []).map(c => this.commands.converter.toSafeCommand(c, this._statusBarDisposables)) as Command[];\n        this.proxy.$updateSourceControl(this.handle, { statusBarCommands: internal });\n    }\n\n    private _selected: boolean = false;\n\n    get selected(): boolean {\n        return this._selected;\n    }\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<boolean>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private handle: number = SourceControlImpl.handlePool++;\n\n    constructor(\n        plugin: Plugin,\n        private proxy: ScmMain,\n        private commands: CommandRegistryImpl,\n        private _id: string,\n        private _label: string,\n        private _rootUri?: theia.Uri\n    ) {\n        this._inputBox = new ScmInputBoxImpl(plugin, this.proxy, this.handle);\n        this.proxy.$registerSourceControl(this.handle, _id, _label, _rootUri);\n    }\n\n    private createdResourceGroups = new Map<SsmResourceGroupImpl, Disposable>();\n    private updatedResourceGroups = new Set<SsmResourceGroupImpl>();\n\n    createResourceGroup(id: string, label: string): SsmResourceGroupImpl {\n        const group = new SsmResourceGroupImpl(this.proxy, this.commands, this.handle, id, label);\n        const disposable = group.onDidDispose(() => this.createdResourceGroups.delete(group));\n        this.createdResourceGroups.set(group, disposable);\n        this.eventuallyAddResourceGroups();\n        return group;\n    }\n\n    eventuallyAddResourceGroups(): void {\n        const groups: ScmRawResourceGroup[] = [];\n        const splices: ScmRawResourceSplices[] = [];\n\n        for (const [group, disposable] of this.createdResourceGroups) {\n            disposable.dispose();\n\n            const updateListener = group.onDidUpdateResourceStates(() => {\n                this.updatedResourceGroups.add(group);\n                this.eventuallyUpdateResourceStates();\n            });\n\n            group.onDidDispose(() => {\n                this.updatedResourceGroups.delete(group);\n                updateListener.dispose();\n                this.groups.delete(group.handle);\n                this.proxy.$unregisterGroup(this.handle, group.handle);\n            });\n\n            const { handle, id, label, features } = group;\n            groups.push({ handle, id, label, features });\n\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length > 0) {\n                splices.push({ handle: group.handle, splices: snapshot });\n            }\n\n            this.groups.set(group.handle, group);\n        }\n\n        this.proxy.$registerGroups(this.handle, groups, splices);\n        this.createdResourceGroups.clear();\n    }\n\n    eventuallyUpdateResourceStates(): void {\n        const splices: ScmRawResourceSplices[] = [];\n\n        this.updatedResourceGroups.forEach(group => {\n            const snapshot = group.takeResourceStateSnapshot();\n\n            if (snapshot.length === 0) {\n                return;\n            }\n\n            splices.push({ handle: group.handle, splices: snapshot });\n        });\n\n        if (splices.length > 0) {\n            this.proxy.$spliceResourceStates(this.handle, splices);\n        }\n\n        this.updatedResourceGroups.clear();\n    }\n\n    getResourceGroup(handle: GroupHandle): SsmResourceGroupImpl | undefined {\n        return this.groups.get(handle);\n    }\n\n    setSelectionState(selected: boolean): void {\n        this._selected = selected;\n        this.onDidChangeSelectionEmitter.fire(selected);\n    }\n\n    dispose(): void {\n        this.acceptInputDisposables.dispose();\n        this._statusBarDisposables.dispose();\n\n        this.groups.forEach(group => group.dispose());\n        this.proxy.$unregisterSourceControl(this.handle);\n    }\n}\n\nexport class ScmExtImpl implements ScmExt {\n\n    private static handlePool: number = 0;\n\n    private proxy: ScmMain;\n    private sourceControls: Map<ProviderHandle, SourceControlImpl> = new Map<ProviderHandle, SourceControlImpl>();\n    private sourceControlsByExtension: Map<string, SourceControlImpl[]> = new Map<string, SourceControlImpl[]>();\n\n    private readonly onDidChangeActiveProviderEmitter = new Emitter<theia.SourceControl>();\n    get onDidChangeActiveProvider(): Event<theia.SourceControl> { return this.onDidChangeActiveProviderEmitter.event; }\n\n    private selectedSourceControlHandle: number | undefined;\n\n    constructor(rpc: RPCProtocol, private commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SCM_MAIN);\n\n        commands.registerArgumentProcessor({\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            processArgument: (arg: any) => {\n                if (!ScmCommandArg.is(arg)) {\n                    return arg;\n                }\n                const sourceControl = this.sourceControls.get(arg.sourceControlHandle);\n                if (!sourceControl) {\n                    return undefined;\n                }\n                if (typeof arg.resourceGroupHandle !== 'number') {\n                    return sourceControl;\n                }\n                const resourceGroup = sourceControl.getResourceGroup(arg.resourceGroupHandle);\n                if (typeof arg.resourceStateHandle !== 'number') {\n                    return resourceGroup;\n                }\n                return resourceGroup && resourceGroup.getResourceState(arg.resourceStateHandle);\n            }\n        });\n    }\n\n    createSourceControl(extension: Plugin, id: string, label: string, rootUri: theia.Uri | undefined): theia.SourceControl {\n        const handle = ScmExtImpl.handlePool++;\n        const sourceControl = new SourceControlImpl(extension, this.proxy, this.commands, id, label, rootUri);\n        this.sourceControls.set(handle, sourceControl);\n\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id) || [];\n        sourceControls.push(sourceControl);\n        this.sourceControlsByExtension.set(extension.model.id, sourceControls);\n\n        return sourceControl;\n    }\n\n    getLastInputBox(extension: Plugin): ScmInputBoxImpl | undefined {\n        const sourceControls = this.sourceControlsByExtension.get(extension.model.id);\n        const sourceControl = sourceControls && sourceControls[sourceControls.length - 1];\n        return sourceControl && sourceControl.inputBox;\n    }\n\n    $provideOriginalResource(sourceControlHandle: number, uriComponents: string, token: theia.CancellationToken): Promise<UriComponents | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl || !sourceControl.quickDiffProvider || !sourceControl.quickDiffProvider.provideOriginalResource) {\n            return Promise.resolve(undefined);\n        }\n\n        return new Promise<UriComponents | undefined>(() => sourceControl.quickDiffProvider!.provideOriginalResource!(URI.file(uriComponents), token))\n            .then<UriComponents | undefined>(r => r || undefined);\n    }\n\n    $onInputBoxValueChange(sourceControlHandle: number, value: string): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        sourceControl.inputBox.onInputBoxValueChange(value);\n        return Promise.resolve(undefined);\n    }\n\n    $executeResourceCommand(sourceControlHandle: number, groupHandle: number, handle: number): Promise<void> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        const group = sourceControl.getResourceGroup(groupHandle);\n\n        if (!group) {\n            return Promise.resolve(undefined);\n        }\n\n        return group.executeResourceCommand(handle);\n    }\n\n    async $validateInput(sourceControlHandle: number, value: string, cursorPosition: number): Promise<[string, number] | undefined> {\n        const sourceControl = this.sourceControls.get(sourceControlHandle);\n\n        if (!sourceControl) {\n            return Promise.resolve(undefined);\n        }\n\n        if (!sourceControl.inputBox.validateInput) {\n            return Promise.resolve(undefined);\n        }\n\n        const result = await sourceControl.inputBox.validateInput!(value, cursorPosition);\n        if (!result) {\n            return Promise.resolve(undefined);\n        }\n        return [result.message, result.type];\n    }\n\n    $setSelectedSourceControl(selectedSourceControlHandle: number | undefined): Promise<void> {\n        if (selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(selectedSourceControlHandle)?.setSelectionState(true);\n        }\n\n        if (this.selectedSourceControlHandle !== undefined) {\n            this.sourceControls.get(this.selectedSourceControlHandle)?.setSelectionState(false);\n        }\n\n        this.selectedSourceControlHandle = selectedSourceControlHandle;\n        return Promise.resolve(undefined);\n    }\n}\n\n/**\n * Diffs two *sorted* arrays and computes the splices which apply the diff.\n */\nfunction sortedDiff(before: ReadonlyArray<theia.SourceControlResourceState>,\n    after: ReadonlyArray<theia.SourceControlResourceState>,\n    compare: (a: theia.SourceControlResourceState,\n        b: theia.SourceControlResourceState) => number): Splice<theia.SourceControlResourceState>[] {\n    const result: MutableSplice<theia.SourceControlResourceState>[] = [];\n\n    function pushSplice(start: number, deleteCount: number, toInsert: theia.SourceControlResourceState[]): void {\n        if (deleteCount === 0 && toInsert.length === 0) {\n            return;\n        }\n\n        const latest = result[result.length - 1];\n\n        if (latest && latest.start + latest.deleteCount === start) {\n            latest.deleteCount += deleteCount;\n            latest.toInsert.push(...toInsert);\n        } else {\n            result.push({ start, deleteCount, toInsert });\n        }\n    }\n\n    let beforeIdx = 0;\n    let afterIdx = 0;\n\n    while (true) {\n        if (beforeIdx === before.length) {\n            pushSplice(beforeIdx, 0, after.slice(afterIdx));\n            break;\n        }\n        if (afterIdx === after.length) {\n            pushSplice(beforeIdx, before.length - beforeIdx, []);\n            break;\n        }\n\n        const beforeElement = before[beforeIdx];\n        const afterElement = after[afterIdx];\n        const n = compare(beforeElement, afterElement);\n        if (n === 0) {\n            // equal\n            beforeIdx += 1;\n            afterIdx += 1;\n        } else if (n < 0) {\n            // beforeElement is smaller -> before element removed\n            pushSplice(beforeIdx, 1, []);\n            beforeIdx += 1;\n        } else if (n > 0) {\n            // beforeElement is greater -> after element added\n            pushSplice(beforeIdx, 0, [afterElement]);\n            afterIdx += 1;\n        }\n    }\n\n    return result;\n}\n\ninterface MutableSplice<T> extends Splice<T> {\n    deleteCount: number;\n}\n","// *****************************************************************************\n// Copyright (C) 2021 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// code copied and modified from https://github.com/microsoft/vscode/blob/1.55.2/src/vs/workbench/api/common/extHostSecrets.ts\n\nimport { Plugin, PLUGIN_RPC_CONTEXT, SecretsExt, SecretsMain } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class SecretsExtImpl implements SecretsExt {\n    private proxy: SecretsMain;\n    private onDidChangePasswordEmitter = new Emitter<{ extensionId: string, key: string }>();\n    readonly onDidChangePassword = this.onDidChangePasswordEmitter.event;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.SECRETS_MAIN);\n    }\n\n    async $onDidChangePassword(e: { extensionId: string, key: string }): Promise<void> {\n        this.onDidChangePasswordEmitter.fire(e);\n    }\n\n    get(extensionId: string, key: string): Promise<string | undefined> {\n        return this.proxy.$getPassword(extensionId, key);\n    }\n\n    store(extensionId: string, key: string, value: string): Promise<void> {\n        return this.proxy.$setPassword(extensionId, key, value);\n    }\n\n    delete(extensionId: string, key: string): Promise<void> {\n        return this.proxy.$deletePassword(extensionId, key);\n    }\n}\n\nexport class SecretStorageExt implements theia.SecretStorage {\n\n    protected readonly id: string;\n    readonly secretState: SecretsExtImpl;\n\n    private onDidChangeEmitter = new Emitter<theia.SecretStorageChangeEvent>();\n    readonly onDidChange: Event<theia.SecretStorageChangeEvent> = this.onDidChangeEmitter.event;\n\n    constructor(pluginDescription: Plugin, secretState: SecretsExtImpl) {\n        this.id = pluginDescription.model.id.toLowerCase();\n        this.secretState = secretState;\n\n        this.secretState.onDidChangePassword(e => {\n            if (e.extensionId === this.id) {\n                this.onDidChangeEmitter.fire({ key: e.key });\n            }\n        });\n    }\n\n    get(key: string): Promise<string | undefined> {\n        return this.secretState.get(this.id, key);\n    }\n\n    store(key: string, value: string): Promise<void> {\n        return this.secretState.store(this.id, key, value);\n    }\n\n    delete(key: string): Promise<void> {\n        return this.secretState.delete(this.id, key);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Disposable, StatusBarAlignment } from './types-impl';\nimport { StatusBarItem } from '@theia/plugin';\nimport {\n    PLUGIN_RPC_CONTEXT as Ext, StatusBarMessageRegistryMain\n} from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { StatusBarItemImpl } from './status-bar/status-bar-item';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\nexport class StatusBarMessageRegistryExt {\n\n    proxy: StatusBarMessageRegistryMain;\n\n    protected readonly statusMessage: StatusBarMessage;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(Ext.STATUS_BAR_MESSAGE_REGISTRY_MAIN);\n        this.statusMessage = new StatusBarMessage(this);\n    }\n\n    // copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L174\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    setStatusBarMessage(text: string, timeoutOrThenable?: number | PromiseLike<any>): Disposable {\n        const d = this.statusMessage.setMessage(text);\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        let handle: any;\n\n        if (typeof timeoutOrThenable === 'number') {\n            handle = setTimeout(() => d.dispose(), timeoutOrThenable);\n        } else if (typeof timeoutOrThenable !== 'undefined') {\n            timeoutOrThenable.then(() => d.dispose(), () => d.dispose());\n        }\n\n        return new Disposable(() => {\n            d.dispose();\n            clearTimeout(handle);\n        });\n\n    }\n\n    createStatusBarItem(alignment?: StatusBarAlignment, priority?: number, id?: string): StatusBarItem {\n        return new StatusBarItemImpl(this.proxy, alignment, priority, id);\n    }\n\n}\n\n// copied from https://github.com/Microsoft/vscode/blob/6c8f02b41db9ae5c4d15df767d47755e5c73b9d5/src/vs/workbench/api/node/extHostStatusBar.ts#L122\nclass StatusBarMessage {\n\n    private _item: StatusBarItem;\n    private _messages: { message: string }[] = [];\n\n    constructor(statusBar: StatusBarMessageRegistryExt) {\n        this._item = statusBar.createStatusBarItem(StatusBarAlignment.Left, Number.MIN_VALUE);\n    }\n\n    dispose(): void {\n        this._messages.length = 0;\n        this._item.dispose();\n    }\n\n    setMessage(message: string): Disposable {\n        const data: { message: string } = { message }; // use object to not confuse equal strings\n        this._messages.unshift(data);\n        this._update();\n\n        return new Disposable(() => {\n            const idx = this._messages.indexOf(data);\n            if (idx >= 0) {\n                this._messages.splice(idx, 1);\n                this._update();\n            }\n        });\n    }\n\n    private _update(): void {\n        if (this._messages.length > 0) {\n            this._item.text = this._messages[0].message;\n            this._item.show();\n        } else {\n            this._item.hide();\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport * as theia from '@theia/plugin';\nimport { ThemeColor, StatusBarAlignment } from '../types-impl';\nimport { StatusBarMessageRegistryMain } from '../../common/plugin-api-rpc';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\n\nexport class StatusBarItemImpl implements theia.StatusBarItem {\n\n    /** Map from allowed background colors to corresponding foreground colors. */\n    private static BACKGROUND_COLORS = new Map<string, string>([\n        ['statusBarItem.errorBackground', 'statusBarItem.errorForeground'],\n        ['statusBarItem.warningBackground', 'statusBarItem.warningForeground']\n    ]);\n\n    private _id: string;\n\n    private _alignment: StatusBarAlignment;\n    private _priority: number;\n\n    private _name: string | undefined;\n    private _text: string;\n    private _tooltip: string | theia.MarkdownString | undefined;\n    private _color: string | ThemeColor | undefined;\n    private _backgroundColor: ThemeColor | undefined;\n    private _command: string | theia.Command;\n    private _accessibilityInformation: theia.AccessibilityInformation;\n\n    private _isVisible: boolean;\n    private _timeoutHandle: NodeJS.Timer | undefined;\n\n    _proxy: StatusBarMessageRegistryMain;\n\n    constructor(_proxy: StatusBarMessageRegistryMain,\n        alignment: StatusBarAlignment = StatusBarAlignment.Left,\n        priority: number = 0,\n        id = StatusBarItemImpl.nextId()) {\n        this._proxy = _proxy;\n        this._alignment = alignment;\n        this._priority = priority;\n        this._id = id;\n    }\n\n    public get id(): string {\n        return this._id;\n    }\n\n    public get alignment(): theia.StatusBarAlignment {\n        return <theia.StatusBarAlignment>this._alignment;\n    }\n\n    public get priority(): number {\n        return this._priority;\n    }\n\n    public get name(): string | undefined {\n        return this._name;\n    }\n\n    public get text(): string {\n        return this._text;\n    }\n\n    public get tooltip(): string | theia.MarkdownString | undefined {\n        return this._tooltip;\n    }\n\n    public get color(): string | ThemeColor | undefined {\n        return this._color;\n    }\n\n    public get backgroundColor(): ThemeColor | undefined {\n        return this._backgroundColor;\n    }\n\n    public get command(): string | theia.Command {\n        return this._command;\n    }\n\n    public get accessibilityInformation(): theia.AccessibilityInformation {\n        return this._accessibilityInformation;\n    }\n\n    public set name(name: string | undefined) {\n        this._name = name;\n        this.update();\n    }\n\n    public set text(text: string) {\n        this._text = text;\n        this.update();\n    }\n\n    public set tooltip(tooltip: string | theia.MarkdownString | undefined) {\n        this._tooltip = tooltip;\n        this.update();\n    }\n\n    public set color(color: string | ThemeColor | undefined) {\n        this._color = color;\n        this.update();\n    }\n\n    public set backgroundColor(backgroundColor: ThemeColor | undefined) {\n        if (backgroundColor && StatusBarItemImpl.BACKGROUND_COLORS.has(backgroundColor.id)) {\n            this._backgroundColor = backgroundColor;\n        } else {\n            this._backgroundColor = undefined;\n        }\n        this.update();\n    }\n\n    public set command(command: string | theia.Command) {\n        this._command = command;\n        this.update();\n    }\n\n    public set accessibilityInformation(information: theia.AccessibilityInformation) {\n        this._accessibilityInformation = information;\n        this.update();\n    }\n\n    public show(): void {\n        this._isVisible = true;\n        this.update();\n    }\n\n    public hide(): void {\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        this._proxy.$dispose(this.id);\n        this._isVisible = false;\n    }\n\n    private update(): void {\n        if (!this._isVisible) {\n            return;\n        }\n        if (this._timeoutHandle) {\n            clearTimeout(this._timeoutHandle);\n        }\n        // Defer the update so that multiple changes to setters don't cause a redraw each\n        this._timeoutHandle = setTimeout(() => {\n            this._timeoutHandle = undefined;\n\n            const commandId = typeof this.command === 'object' ? this.command.command : this.command;\n            const args = typeof this.command === 'object' ? this.command.arguments : undefined;\n\n            let color = this.color;\n            if (this.backgroundColor) {\n                // If an error or warning background color is set, set the corresponding foreground color\n                color = StatusBarItemImpl.BACKGROUND_COLORS.get(this.backgroundColor.id);\n            }\n\n            // Set to status bar\n            this._proxy.$setMessage(\n                this.id,\n                this.name,\n                this.text,\n                this.priority,\n                this.alignment,\n                typeof color === 'string' ? color : color?.id,\n                this.backgroundColor?.id,\n                this.tooltip,\n                commandId,\n                this.accessibilityInformation,\n                args);\n        }, 0);\n    }\n\n    public dispose(): void {\n        this.hide();\n    }\n\n    static nextId(): string {\n        return StatusBarItemImpl.ID_PREFIX + ':' + UUID.uuid4();\n    }\n    static ID_PREFIX = 'plugin-status-bar-item';\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as Converter from '../type-converters';\nimport { TaskDto } from '../../common';\n\nexport class TaskProviderAdapter {\n\n    constructor(private readonly provider: theia.TaskProvider) { }\n\n    provideTasks(token: theia.CancellationToken): Promise<TaskDto[] | undefined> {\n        return Promise.resolve(this.provider.provideTasks(token)).then(tasks => {\n            if (!Array.isArray(tasks)) {\n                return undefined;\n            }\n            const result: TaskDto[] = [];\n            for (const task of tasks) {\n                const data = Converter.fromTask(task);\n                if (!data) {\n                    continue;\n                }\n\n                result.push(data);\n            }\n            return result;\n        });\n    }\n\n    resolveTask(task: TaskDto, token: theia.CancellationToken): Promise<TaskDto | undefined> {\n        if (typeof this.provider.resolveTask !== 'function') {\n            return Promise.resolve(undefined);\n        }\n\n        const item = Converter.toTask(task);\n        if (!item) {\n            return Promise.resolve(undefined);\n        }\n\n        return Promise.resolve(this.provider.resolveTask(item, token)).then(value => {\n            if (value) {\n                return Converter.fromTask(value);\n            }\n            return undefined;\n        });\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport {\n    PLUGIN_RPC_CONTEXT,\n    TasksExt,\n    TasksMain,\n    TaskDto,\n    TaskExecutionDto\n} from '../../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport * as converter from '../type-converters';\nimport { CustomExecution, Disposable } from '../types-impl';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { TaskProviderAdapter } from './task-provider';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { TerminalServiceExtImpl } from '../terminal-ext';\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\n\ntype ExecutionCallback = (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\nexport class TasksExtImpl implements TasksExt {\n    private proxy: TasksMain;\n\n    private callId = 0;\n    private adaptersMap = new Map<number, TaskProviderAdapter>();\n    private executions = new Map<number, theia.TaskExecution>();\n    protected callbackIdBase: string = UUID.uuid4();\n    protected callbackId: number;\n    protected customExecutionIds: Map<ExecutionCallback, string> = new Map();\n    protected customExecutionFunctions: Map<string, ExecutionCallback> = new Map();\n    protected lastStartedTask: number | undefined;\n\n    private readonly onDidExecuteTask: Emitter<theia.TaskStartEvent> = new Emitter<theia.TaskStartEvent>();\n    private readonly onDidTerminateTask: Emitter<theia.TaskEndEvent> = new Emitter<theia.TaskEndEvent>();\n    private readonly onDidExecuteTaskProcess: Emitter<theia.TaskProcessStartEvent> = new Emitter<theia.TaskProcessStartEvent>();\n    private readonly onDidTerminateTaskProcess: Emitter<theia.TaskProcessEndEvent> = new Emitter<theia.TaskProcessEndEvent>();\n\n    constructor(rpc: RPCProtocol, readonly terminalExt: TerminalServiceExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TASKS_MAIN);\n    }\n\n    get taskExecutions(): ReadonlyArray<theia.TaskExecution> {\n        return [...this.executions.values()];\n    }\n\n    get onDidStartTask(): Event<theia.TaskStartEvent> {\n        return this.onDidExecuteTask.event;\n    }\n\n    async $onDidStartTask(execution: TaskExecutionDto, terminalId: number): Promise<void> {\n        const customExecution = this.customExecutionFunctions.get(execution.task.executionId || '');\n        if (customExecution) {\n            const taskDefinition = converter.toTask(execution.task).definition;\n            const pty = await customExecution(taskDefinition);\n            this.terminalExt.attachPtyToTerminal(terminalId, pty);\n            if (pty.onDidClose) {\n                const disposable = pty.onDidClose((e: number | void = undefined) => {\n                    disposable.dispose();\n                    // eslint-disable-next-line no-void\n                    this.proxy.$customExecutionComplete(execution.id, e === void 0 ? undefined : e);\n                });\n            }\n        }\n        this.lastStartedTask = execution.id;\n\n        this.onDidExecuteTask.fire({\n            execution: this.getTaskExecution(execution)\n        });\n    }\n\n    get onDidEndTask(): Event<theia.TaskEndEvent> {\n        return this.onDidTerminateTask.event;\n    }\n\n    $onDidEndTask(id: number): void {\n        const taskExecution = this.executions.get(id);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${id} is not found`);\n        }\n\n        this.executions.delete(id);\n\n        this.onDidTerminateTask.fire({\n            execution: taskExecution\n        });\n    }\n\n    get onDidStartTaskProcess(): Event<theia.TaskProcessStartEvent> {\n        return this.onDidExecuteTaskProcess.event;\n    }\n\n    $onDidStartTaskProcess(processId: number, executionDto: TaskExecutionDto): void {\n        this.onDidExecuteTaskProcess.fire({\n            processId,\n            execution: this.getTaskExecution(executionDto)\n        });\n    }\n\n    get onDidEndTaskProcess(): Event<theia.TaskProcessEndEvent> {\n        return this.onDidTerminateTaskProcess.event;\n    }\n\n    $onDidEndTaskProcess(exitCode: number, taskId: number): void {\n        const taskExecution = this.executions.get(taskId);\n        if (!taskExecution) {\n            throw new Error(`Task execution with id ${taskId} is not found`);\n        }\n\n        this.onDidTerminateTaskProcess.fire({\n            execution: taskExecution,\n            exitCode\n        });\n    }\n\n    registerTaskProvider(type: string, provider: theia.TaskProvider): theia.Disposable {\n        const callId = this.addNewAdapter(new TaskProviderAdapter(provider));\n        this.proxy.$registerTaskProvider(callId, type);\n        return this.createDisposable(callId);\n    }\n\n    async fetchTasks(filter?: theia.TaskFilter): Promise<theia.Task[]> {\n        const taskVersion = filter ? filter.version : undefined;\n        const taskType = filter ? filter.type : undefined;\n        const taskDtos = await this.proxy.$fetchTasks(taskVersion, taskType);\n        return taskDtos.map(dto => converter.toTask(dto));\n    }\n\n    async executeTask(task: theia.Task): Promise<theia.TaskExecution> {\n        const taskDto = converter.fromTask(task);\n        if (taskDto) {\n            // If this task is a custom execution, then we need to save it away\n            // in the provided custom execution map that is cleaned up after the\n            // task is executed.\n            if (CustomExecution.is(task.execution!)) {\n                taskDto.executionId = this.addCustomExecution(task.execution!.callback);\n            }\n            const executionDto = await this.proxy.$executeTask(taskDto);\n            if (executionDto) {\n                const taskExecution = this.getTaskExecution(executionDto);\n                return taskExecution;\n            }\n            throw new Error('Run task config does not return after being started');\n        }\n        throw new Error('Task was not successfully transformed into a task config');\n    }\n\n    $provideTasks(handle: number): Promise<TaskDto[] | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.provideTasks(CancellationToken.None).then(tasks => {\n                if (tasks) {\n                    for (const task of tasks) {\n                        if (task.taskType === 'customExecution') {\n                            task.executionId = this.addCustomExecution(task.callback);\n                            task.callback = undefined;\n                        }\n                    }\n                }\n                return tasks;\n            });\n        } else {\n            return Promise.reject(new Error('No adapter found to provide tasks'));\n        }\n    }\n\n    $resolveTask(handle: number, task: TaskDto, token: theia.CancellationToken): Promise<TaskDto | undefined> {\n        const adapter = this.adaptersMap.get(handle);\n        if (adapter) {\n            return adapter.resolveTask(task, token).then(resolvedTask => {\n                if (resolvedTask && resolvedTask.taskType === 'customExecution') {\n                    resolvedTask.executionId = this.addCustomExecution(resolvedTask.callback);\n                    resolvedTask.callback = undefined;\n                }\n                return resolvedTask;\n            });\n        } else {\n            return Promise.reject(new Error('No adapter found to resolve task'));\n        }\n    }\n\n    private addNewAdapter(adapter: TaskProviderAdapter): number {\n        const callId = this.nextCallId();\n        this.adaptersMap.set(callId, adapter);\n        return callId;\n    }\n\n    private nextCallId(): number {\n        return this.callId++;\n    }\n\n    private createDisposable(callId: number): theia.Disposable {\n        return new Disposable(() => {\n            this.adaptersMap.delete(callId);\n            this.proxy.$unregister(callId);\n        });\n    }\n\n    // Initial `this.executions` map with the running tasks from the previous session\n    async $initLoadedTasks(taskExecutions: TaskExecutionDto[]): Promise<void> {\n        taskExecutions.forEach(execution => this.getTaskExecution(execution));\n    }\n\n    private getTaskExecution(execution: TaskExecutionDto): theia.TaskExecution {\n        const executionId = execution.id;\n        let result: theia.TaskExecution | undefined = this.executions.get(executionId);\n        if (result) {\n            return result;\n        }\n\n        result = {\n            task: converter.toTask(execution.task),\n            terminate: () => {\n                this.proxy.$terminateTask(executionId);\n            }\n        };\n        this.executions.set(executionId, result);\n        return result;\n    }\n\n    private addCustomExecution(callback: ExecutionCallback): string {\n        let id = this.customExecutionIds.get(callback);\n        if (!id) {\n            id = this.nextCallbackId();\n            this.customExecutionIds.set(callback, id);\n            this.customExecutionFunctions.set(id, callback);\n        }\n        return id;\n    }\n\n    private nextCallbackId(): string {\n        return this.callbackIdBase + this.callbackId++;\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { Terminal, TerminalOptions, PseudoTerminalOptions, ExtensionTerminalOptions } from '@theia/plugin';\nimport { TerminalServiceExt, TerminalServiceMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { Deferred } from '@theia/core/lib/common/promise-util';\nimport * as theia from '@theia/plugin';\nimport { EnvironmentVariableMutatorType } from './types-impl';\nimport { SerializableEnvironmentVariableCollection } from '@theia/terminal/lib/common/base-terminal-protocol';\n\n/**\n * Provides high level terminal plugin api to use in the Theia plugins.\n * This service allow(with help proxy) create and use terminal emulator.\n */\nexport class TerminalServiceExtImpl implements TerminalServiceExt {\n\n    private readonly proxy: TerminalServiceMain;\n\n    private readonly _terminals = new Map<string, TerminalExtImpl>();\n\n    private readonly _pseudoTerminals = new Map<string, PseudoTerminal>();\n\n    private readonly onDidCloseTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidCloseTerminal: theia.Event<Terminal> = this.onDidCloseTerminalEmitter.event;\n\n    private readonly onDidOpenTerminalEmitter = new Emitter<Terminal>();\n    readonly onDidOpenTerminal: theia.Event<Terminal> = this.onDidOpenTerminalEmitter.event;\n\n    private readonly onDidChangeActiveTerminalEmitter = new Emitter<Terminal | undefined>();\n    readonly onDidChangeActiveTerminal: theia.Event<Terminal | undefined> = this.onDidChangeActiveTerminalEmitter.event;\n\n    protected environmentVariableCollections: Map<string, EnvironmentVariableCollection> = new Map();\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TERMINAL_MAIN);\n    }\n\n    get terminals(): TerminalExtImpl[] {\n        return [...this._terminals.values()];\n    }\n\n    createTerminal(nameOrOptions: TerminalOptions | PseudoTerminalOptions | ExtensionTerminalOptions | (string | undefined), shellPath?: string, shellArgs?: string[]): Terminal {\n        let options: TerminalOptions;\n        let pseudoTerminal: theia.Pseudoterminal | undefined = undefined;\n        const id = `plugin-terminal-${UUID.uuid4()}`;\n        if (typeof nameOrOptions === 'object') {\n            if ('pty' in nameOrOptions) {\n                pseudoTerminal = nameOrOptions.pty;\n                options = {\n                    name: nameOrOptions.name,\n                };\n                this._pseudoTerminals.set(id, new PseudoTerminal(id, this.proxy, pseudoTerminal));\n            } else {\n                options = nameOrOptions;\n            }\n        } else {\n            options = {\n                name: nameOrOptions,\n                shellPath: shellPath,\n                shellArgs: shellArgs\n            };\n        }\n        this.proxy.$createTerminal(id, options, !!pseudoTerminal);\n        return this.obtainTerminal(id, options.name || 'Terminal');\n    }\n\n    attachPtyToTerminal(terminalId: number, pty: theia.Pseudoterminal): void {\n        this._pseudoTerminals.set(terminalId.toString(), new PseudoTerminal(terminalId, this.proxy, pty, true));\n    }\n\n    protected obtainTerminal(id: string, name: string): TerminalExtImpl {\n        let terminal = this._terminals.get(id);\n        if (!terminal) {\n            terminal = new TerminalExtImpl(this.proxy);\n            this._terminals.set(id, terminal);\n        }\n        terminal.name = name;\n        return terminal;\n    }\n\n    $terminalOnInput(id: string, data: string): void {\n        const terminal = this._pseudoTerminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.emitOnInput(data);\n    }\n\n    $terminalSizeChanged(id: string, clos: number, rows: number): void {\n        const terminal = this._pseudoTerminals.get(id);\n        if (!terminal) {\n            return;\n        }\n        terminal.emitOnResize(clos, rows);\n    }\n\n    $terminalCreated(id: string, name: string): void {\n        const terminal = this.obtainTerminal(id, name);\n        terminal.id.resolve(id);\n        this.onDidOpenTerminalEmitter.fire(terminal);\n    }\n\n    $terminalNameChanged(id: string, name: string): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.name = name;\n        }\n    }\n\n    $terminalOpened(id: string, processId: number, terminalId: number, cols: number, rows: number): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            // resolve for existing clients\n            terminal.deferredProcessId.resolve(processId);\n            // install new if terminal is reconnected\n            terminal.deferredProcessId = new Deferred<number>();\n            terminal.deferredProcessId.resolve(processId);\n        }\n        // Pseudoterminal is keyed on ID\n        const pseudoTerminal = this._pseudoTerminals.get(id);\n        if (pseudoTerminal) {\n            pseudoTerminal.emitOnOpen(cols, rows);\n        }\n    }\n\n    $terminalClosed(id: string, exitStatus: theia.TerminalExitStatus | undefined): void {\n        const terminal = this._terminals.get(id);\n        if (terminal) {\n            terminal.exitStatus = exitStatus ?? { code: undefined };\n            this.onDidCloseTerminalEmitter.fire(terminal);\n            this._terminals.delete(id);\n        }\n        const pseudoTerminal = this._pseudoTerminals.get(id);\n        if (pseudoTerminal) {\n            pseudoTerminal.emitOnClose();\n            this._pseudoTerminals.delete(id);\n        }\n    }\n\n    private activeTerminalId: string | undefined;\n    get activeTerminal(): TerminalExtImpl | undefined {\n        return this.activeTerminalId && this._terminals.get(this.activeTerminalId) || undefined;\n    }\n    $currentTerminalChanged(id: string | undefined): void {\n        this.activeTerminalId = id;\n        this.onDidChangeActiveTerminalEmitter.fire(this.activeTerminal);\n    }\n\n    /*---------------------------------------------------------------------------------------------\n     *  Copyright (c) Microsoft Corporation. All rights reserved.\n     *  Licensed under the MIT License. See License.txt in the project root for license information.\n     *--------------------------------------------------------------------------------------------*/\n    // some code copied and modified from https://github.com/microsoft/vscode/blob/1.49.0/src/vs/workbench/api/common/extHostTerminalService.ts\n\n    getEnvironmentVariableCollection(extensionIdentifier: string): theia.EnvironmentVariableCollection {\n        let collection = this.environmentVariableCollections.get(extensionIdentifier);\n        if (!collection) {\n            collection = new EnvironmentVariableCollection();\n            this.setEnvironmentVariableCollection(extensionIdentifier, collection);\n        }\n        return collection;\n    }\n\n    private syncEnvironmentVariableCollection(extensionIdentifier: string, collection: EnvironmentVariableCollection): void {\n        const serialized = [...collection.map.entries()];\n        this.proxy.$setEnvironmentVariableCollection(extensionIdentifier, collection.persistent, serialized.length === 0 ? undefined : serialized);\n    }\n\n    private setEnvironmentVariableCollection(extensionIdentifier: string, collection: EnvironmentVariableCollection): void {\n        this.environmentVariableCollections.set(extensionIdentifier, collection);\n        collection.onDidChangeCollection(() => {\n            // When any collection value changes send this immediately, this is done to ensure\n            // following calls to createTerminal will be created with the new environment. It will\n            // result in more noise by sending multiple updates when called but collections are\n            // expected to be small.\n            this.syncEnvironmentVariableCollection(extensionIdentifier, collection);\n        });\n    }\n\n    $initEnvironmentVariableCollections(collections: [string, SerializableEnvironmentVariableCollection][]): void {\n        collections.forEach(entry => {\n            const extensionIdentifier = entry[0];\n            const collection = new EnvironmentVariableCollection(entry[1]);\n            this.setEnvironmentVariableCollection(extensionIdentifier, collection);\n        });\n    }\n\n}\n\nexport class EnvironmentVariableCollection implements theia.EnvironmentVariableCollection {\n    readonly map: Map<string, theia.EnvironmentVariableMutator> = new Map();\n    private _persistent: boolean = true;\n\n    public get persistent(): boolean { return this._persistent; }\n    public set persistent(value: boolean) {\n        this._persistent = value;\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    protected readonly onDidChangeCollectionEmitter: Emitter<void> = new Emitter<void>();\n    onDidChangeCollection: Event<void> = this.onDidChangeCollectionEmitter.event;\n\n    constructor(\n        serialized?: SerializableEnvironmentVariableCollection\n    ) {\n        this.map = new Map(serialized);\n    }\n\n    get size(): number {\n        return this.map.size;\n    }\n\n    replace(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Replace });\n    }\n\n    append(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Append });\n    }\n\n    prepend(variable: string, value: string): void {\n        this._setIfDiffers(variable, { value, type: EnvironmentVariableMutatorType.Prepend });\n    }\n\n    private _setIfDiffers(variable: string, mutator: theia.EnvironmentVariableMutator): void {\n        const current = this.map.get(variable);\n        if (!current || current.value !== mutator.value || current.type !== mutator.type) {\n            this.map.set(variable, mutator);\n            this.onDidChangeCollectionEmitter.fire();\n        }\n    }\n\n    get(variable: string): theia.EnvironmentVariableMutator | undefined {\n        return this.map.get(variable);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    forEach(callback: (variable: string, mutator: theia.EnvironmentVariableMutator, collection: theia.EnvironmentVariableCollection) => any, thisArg?: any): void {\n        this.map.forEach((value, key) => callback.call(thisArg, key, value, this));\n    }\n\n    delete(variable: string): void {\n        this.map.delete(variable);\n        this.onDidChangeCollectionEmitter.fire();\n    }\n\n    clear(): void {\n        this.map.clear();\n        this.onDidChangeCollectionEmitter.fire();\n    }\n}\n\nexport class TerminalExtImpl implements Terminal {\n\n    name: string;\n\n    readonly id = new Deferred<string>();\n\n    exitStatus: theia.TerminalExitStatus | undefined;\n\n    deferredProcessId = new Deferred<number>();\n\n    get processId(): Thenable<number> {\n        return this.deferredProcessId.promise;\n    }\n\n    constructor(private readonly proxy: TerminalServiceMain) { }\n\n    sendText(text: string, addNewLine: boolean = true): void {\n        this.id.promise.then(id => this.proxy.$sendText(id, text, addNewLine));\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.id.promise.then(id => this.proxy.$show(id, preserveFocus));\n    }\n\n    hide(): void {\n        this.id.promise.then(id => this.proxy.$hide(id));\n    }\n\n    dispose(): void {\n        this.id.promise.then(id => this.proxy.$dispose(id));\n    }\n}\n\nexport class PseudoTerminal {\n    constructor(\n        id: string | number,\n        private readonly proxy: TerminalServiceMain,\n        private readonly pseudoTerminal: theia.Pseudoterminal,\n        waitOnExit?: boolean | string\n    ) {\n\n        pseudoTerminal.onDidWrite(data => {\n            if (typeof id === 'string') {\n                this.proxy.$write(id, data);\n            } else {\n                this.proxy.$writeByTerminalId(id, data);\n            }\n        });\n        if (pseudoTerminal.onDidClose) {\n            pseudoTerminal.onDidClose((e: number | void = undefined) => {\n                if (typeof id === 'string') {\n                    this.proxy.$dispose(id);\n                } else {\n                    this.proxy.$disposeByTerminalId(id, waitOnExit);\n                }\n            });\n        }\n        if (pseudoTerminal.onDidOverrideDimensions) {\n            pseudoTerminal.onDidOverrideDimensions(e => {\n                if (e) {\n                    if (typeof id === 'string') {\n                        this.proxy.$resize(id, e.columns, e.rows);\n                    } else {\n                        this.proxy.$resizeByTerminalId(id, e.columns, e.rows);\n                    }\n                }\n            });\n        }\n    }\n\n    emitOnClose(): void {\n        this.pseudoTerminal.close();\n    }\n\n    emitOnInput(data: string): void {\n        if (this.pseudoTerminal.handleInput) {\n            this.pseudoTerminal.handleInput(data);\n        }\n    }\n\n    emitOnOpen(cols: number, rows: number): void {\n        this.pseudoTerminal.open({\n            rows,\n            columns: cols,\n        });\n    }\n\n    emitOnResize(cols: number, rows: number): void {\n        if (this.pseudoTerminal.setDimensions) {\n            this.pseudoTerminal.setDimensions({ columns: cols, rows });\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { TextEditorConfiguration, TextEditorsMain, TextEditorConfigurationUpdate, SingleEditOperation } from '../common/plugin-api-rpc';\nimport { Range as ApiRange } from '../common/plugin-api-rpc-model';\nimport { Selection, Range, TextEditorLineNumbersStyle, SnippetString, Position, TextEditorRevealType, EndOfLine } from './types-impl';\nimport * as theia from '@theia/plugin';\nimport { DocumentDataExt } from './document-data';\nimport { readonly, illegalArgument } from '../common/errors';\nimport { TextEditorCursorStyle } from '../common/editor-options';\nimport { ok } from '../common/assert';\nimport * as Converter from './type-converters';\n\nexport class TextEditorExt implements theia.TextEditor {\n    private _viewColumn: theia.ViewColumn | undefined;\n    private _document: DocumentDataExt;\n    private _options: TextEditorOptionsExt;\n    private disposed = false;\n    constructor(\n        private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        document: DocumentDataExt,\n        private _selections: Selection[],\n        options: TextEditorConfiguration,\n        private _visibleRanges: Range[],\n        viewColumn: theia.ViewColumn | undefined) {\n        this._options = new TextEditorOptionsExt(proxy, id, options);\n        this._viewColumn = viewColumn;\n        this._document = document;\n    }\n\n    get document(): theia.TextDocument {\n        return this._document.document;\n    }\n\n    set document(doc) {\n        throw readonly('Document');\n    }\n\n    acceptViewColumn(val: theia.ViewColumn): void {\n        this._viewColumn = val;\n    }\n\n    dispose(): void {\n        this.disposed = true;\n    }\n\n    get options(): theia.TextEditorOptions {\n        return this._options;\n    }\n\n    set options(val: theia.TextEditorOptions) {\n        if (!this.disposed) {\n            this._options.assign(val);\n        }\n    }\n\n    acceptOptions(options: TextEditorConfiguration): void {\n        ok(!this.disposed);\n        this._options.accept(options);\n    }\n\n    get selection(): Selection {\n        return this._selections && this._selections[0];\n    }\n\n    set selection(val: Selection) {\n        if (!(val instanceof Selection)) {\n            throw illegalArgument('selection');\n        }\n        this._selections = [val];\n        this.trySetSelection();\n    }\n\n    private trySetSelection(): Promise<theia.TextEditor | undefined> {\n        const selection = this._selections.map(Converter.fromSelection);\n        return this.runOnProxy(() => this.proxy.$trySetSelections(this.id, selection));\n    }\n\n    get selections(): Selection[] {\n        return this._selections;\n    }\n\n    set selections(val: Selection[]) {\n        if (!Array.isArray(val) || val.some(s => !(s instanceof Selection))) {\n            throw illegalArgument('selections');\n        }\n\n        this._selections = val;\n        this.trySetSelection();\n    }\n\n    acceptSelections(selections: Selection[]): void {\n        ok(!this.disposed);\n        this._selections = selections;\n    }\n\n    get visibleRanges(): Range[] {\n        return this._visibleRanges;\n    }\n\n    set visibleRanges(val: Range[]) {\n        throw readonly('visibleRanges');\n    }\n\n    acceptVisibleRanges(range: Range[]): void {\n        ok(!this.disposed);\n        this._visibleRanges = range;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        return this._viewColumn;\n    }\n\n    set viewColumn(value) {\n        throw readonly('viewColumn');\n    }\n\n    _acceptViewColumn(value: theia.ViewColumn): void {\n        ok(!this.disposed);\n        this._viewColumn = value;\n    }\n\n    // eslint-disable-next-line max-len\n    edit(callback: (editBuilder: theia.TextEditorEdit) => void, options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#edit not possible on closed editor'));\n        }\n\n        const edit = new TextEditorEdit(this._document.document, options);\n        callback(edit);\n        return this.applyEdit(edit);\n    }\n    // eslint-disable-next-line max-len\n    insertSnippet(snippet: SnippetString, location?: Position | Range | Position[] | Range[], options: { undoStopBefore: boolean; undoStopAfter: boolean; } = { undoStopBefore: true, undoStopAfter: true }): Promise<boolean> {\n        if (this.disposed) {\n            return Promise.reject(new Error('TextEditor#insertSnippet not possible on closed editors'));\n        }\n        let ranges: ApiRange[];\n\n        if (!location || (Array.isArray(location) && location.length === 0)) {\n            ranges = this._selections.map(s => Converter.fromRange(s)!);\n\n        } else if (location instanceof Position) {\n            const { lineNumber, column } = Converter.fromPosition(location);\n            ranges = [{ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column }];\n\n        } else if (location instanceof Range) {\n            ranges = [Converter.fromRange(location)!];\n        } else {\n            ranges = [];\n            for (const posOrRange of location) {\n                if (posOrRange instanceof Range) {\n                    ranges.push(Converter.fromRange(posOrRange)!);\n                } else {\n                    const { lineNumber, column } = Converter.fromPosition(posOrRange);\n                    ranges.push({ startLineNumber: lineNumber, startColumn: column, endLineNumber: lineNumber, endColumn: column });\n                }\n            }\n        }\n\n        return this.proxy.$tryInsertSnippet(this.id, snippet.value, ranges, options);\n    }\n    setDecorations(decorationType: theia.TextEditorDecorationType, rangesOrOptions: Range[] | theia.DecorationOptions[]): void {\n        this.runOnProxy(() => {\n            if (Converter.isDecorationOptionsArr(rangesOrOptions)) {\n                return this.proxy.$trySetDecorations(\n                    this.id,\n                    decorationType.key,\n                    Converter.fromRangeOrRangeWithMessage(rangesOrOptions)\n                );\n            } else {\n                const ranges: number[] = new Array<number>(4 * rangesOrOptions.length);\n                const len = rangesOrOptions.length;\n                for (let i = 0; i < len; i++) {\n                    const range = rangesOrOptions[i];\n                    ranges[4 * i] = range.start.line + 1;\n                    ranges[4 * i + 1] = range.start.character + 1;\n                    ranges[4 * i + 2] = range.end.line + 1;\n                    ranges[4 * i + 3] = range.end.character + 1;\n                }\n                return this.proxy.$trySetDecorationsFast(\n                    this.id,\n                    decorationType.key,\n                    ranges\n                );\n            }\n        });\n    }\n\n    revealRange(range: Range, revealType?: theia.TextEditorRevealType): void {\n        this.runOnProxy(() => this.proxy.$tryRevealRange(this.id, Converter.fromRange(range)!, (revealType || TextEditorRevealType.Default)));\n    }\n\n    private applyEdit(edit: TextEditorEdit): Promise<boolean> {\n        const editData = edit.finalize();\n\n        const editRanges = editData.edits.map(e => e.range);\n\n        editRanges.sort((a, b) => {\n            if (a.end.line === b.end.line) {\n                if (a.end.character === b.end.character) {\n                    if (a.start.line === b.start.line) {\n                        return a.start.character - b.start.character;\n                    }\n                    return a.start.line - b.start.line;\n                }\n                return a.end.character - b.end.character;\n            }\n            return a.end.line - b.end.line;\n        });\n\n        const count = editRanges.length - 1;\n        for (let i = 0; i < count; i++) {\n            const rangeEnd = editRanges[i].end;\n            const nextRangeStart = editRanges[i + 1].start;\n\n            if (nextRangeStart.isBefore(rangeEnd)) {\n                return Promise.reject(\n                    new Error('Overlapping ranges are not allowed!')\n                );\n            }\n        }\n\n        // prepare data for serialization\n        const edits: SingleEditOperation[] = editData.edits.map(e =>\n        ({\n            range: Converter.fromRange(e.range)!,\n            text: e.text,\n            forceMoveMarkers: e.forceMoveMarkers\n        }));\n\n        return this.proxy.$tryApplyEdits(this.id, editData.documentVersionId, edits, {\n            setEndOfLine: editData.setEndOfLine,\n            undoStopBefore: editData.undoStopBefore,\n            undoStopAfter: editData.undoStopAfter\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    private runOnProxy(callback: () => Promise<any>): Promise<TextEditorExt | undefined> {\n        if (this.disposed) {\n            console.warn('TextEditor is disposed!');\n            return Promise.resolve(undefined);\n        }\n\n        return callback().then(() => this, err => {\n            if (!(err instanceof Error && err.name === 'DISPOSED')) {\n                console.warn(err);\n            }\n            return undefined;\n        });\n    }\n\n    show(column?: theia.ViewColumn): void {\n        this.proxy.$tryShowTextDocument(this.document.uri, {\n            viewColumn: column,\n            preview: true,\n        });\n    }\n\n    hide(): void {\n        this.proxy.$tryHideEditor(this.id);\n    }\n}\n\nexport class TextEditorOptionsExt implements theia.TextEditorOptions {\n    private _tabSize?: number;\n    private _insertSpace: boolean;\n    private _cursorStyle: TextEditorCursorStyle;\n    private _lineNumbers: TextEditorLineNumbersStyle;\n    constructor(private readonly proxy: TextEditorsMain,\n        private readonly id: string,\n        source: TextEditorConfiguration) {\n        this.accept(source);\n    }\n\n    accept(source: TextEditorConfiguration): void {\n        this._tabSize = source.tabSize;\n        this._insertSpace = source.insertSpaces;\n        this._cursorStyle = source.cursorStyle;\n        this._lineNumbers = source.lineNumbers;\n    }\n\n    get tabSize(): number | string | undefined {\n        return this._tabSize;\n    }\n\n    set tabSize(val: number | string | undefined) {\n        const tabSize = this.validateTabSize(val);\n        if (!tabSize) {\n            return; // ignore invalid values\n        }\n\n        if (typeof tabSize === 'number') {\n            if (this.tabSize === tabSize) {\n                return;\n            }\n            this.tabSize = tabSize;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, {\n            tabSize\n        }));\n    }\n\n    private validateTabSize(val: number | string | undefined): number | 'auto' | undefined {\n        if (val === 'auto') {\n            return 'auto';\n        }\n\n        if (typeof val === 'number') {\n            const r = Math.floor(val);\n            return r > 0 ? r : undefined;\n        }\n        if (typeof val === 'string') {\n            const r = parseInt(val, undefined);\n            if (isNaN(r)) {\n                return undefined;\n            }\n            return r > 0 ? r : undefined;\n        }\n        return undefined;\n    }\n\n    get insertSpaces(): boolean | string {\n        return this._insertSpace;\n    }\n\n    set insertSpaces(val: boolean | string) {\n        const insertSpaces = this.validateInsertSpaces(val);\n        if (typeof insertSpaces === 'boolean') {\n            if (this._insertSpace === insertSpaces) {\n                return;\n            }\n            this._insertSpace = insertSpaces;\n        }\n        warnOnError(this.proxy.$trySetOptions(this.id, { insertSpaces }));\n    }\n\n    private validateInsertSpaces(val: boolean | string): boolean | 'auto' {\n        if (val === 'auto') {\n            return 'auto';\n        }\n        return val === 'false' ? false : Boolean(val);\n    }\n\n    get cursorStyle(): TextEditorCursorStyle {\n        return this._cursorStyle;\n    }\n\n    set cursorStyle(val: TextEditorCursorStyle) {\n        if (this._cursorStyle === val) {\n            return;\n        }\n        this._cursorStyle = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { cursorStyle: val }));\n    }\n\n    get lineNumbers(): TextEditorLineNumbersStyle {\n        return this._lineNumbers;\n    }\n    set lineNumbers(val: TextEditorLineNumbersStyle) {\n        if (this._lineNumbers === val) {\n            return;\n        }\n        this._lineNumbers = val;\n        warnOnError(this.proxy.$trySetOptions(this.id, { lineNumbers: val }));\n    }\n\n    public assign(newOptions: theia.TextEditorOptions): void {\n        const configurationUpdate: TextEditorConfigurationUpdate = {};\n        let hasUpdate = false;\n\n        if (typeof newOptions.tabSize !== 'undefined') {\n            const tabSize = this.validateTabSize(newOptions.tabSize);\n            if (tabSize === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            } else if (typeof tabSize === 'number' && this._tabSize !== tabSize) {\n                this._tabSize = tabSize;\n                hasUpdate = true;\n                configurationUpdate.tabSize = tabSize;\n            }\n        }\n\n        if (typeof newOptions.insertSpaces !== 'undefined') {\n            const insertSpaces = this.validateInsertSpaces(newOptions.insertSpaces);\n            if (insertSpaces === 'auto') {\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            } else if (this.insertSpaces !== insertSpaces) {\n                this.insertSpaces = insertSpaces;\n                hasUpdate = true;\n                configurationUpdate.insertSpaces = insertSpaces;\n            }\n        }\n\n        if (typeof newOptions.cursorStyle !== 'undefined') {\n            if (this._cursorStyle !== newOptions.cursorStyle) {\n                this._cursorStyle = newOptions.cursorStyle;\n                hasUpdate = true;\n                configurationUpdate.cursorStyle = newOptions.cursorStyle;\n            }\n        }\n\n        if (typeof newOptions.lineNumbers !== 'undefined') {\n            if (this._lineNumbers !== newOptions.lineNumbers) {\n                this._lineNumbers = newOptions.lineNumbers;\n                hasUpdate = true;\n                configurationUpdate.lineNumbers = newOptions.lineNumbers;\n            }\n        }\n\n        if (hasUpdate) {\n            warnOnError(this.proxy.$trySetOptions(this.id, configurationUpdate));\n        }\n    }\n\n}\n\nexport interface TextEditOperation {\n    range: theia.Range;\n    text?: string;\n    forceMoveMarkers: boolean;\n}\n\nexport interface EditData {\n    documentVersionId: number;\n    edits: TextEditOperation[];\n    setEndOfLine: EndOfLine;\n    undoStopBefore: boolean;\n    undoStopAfter: boolean;\n}\n\nexport class TextEditorEdit {\n    private readonly documentVersionId: number;\n    private collectedEdits: TextEditOperation[];\n    private eol: EndOfLine;\n    private readonly undoStopBefore: boolean;\n    private readonly undoStopAfter: boolean;\n    constructor(private document: theia.TextDocument, options: { undoStopBefore: boolean; undoStopAfter: boolean }) {\n        this.documentVersionId = document.version;\n        this.collectedEdits = [];\n        this.eol = 0;\n        this.undoStopBefore = options.undoStopBefore;\n        this.undoStopAfter = options.undoStopAfter;\n    }\n\n    finalize(): EditData {\n        return {\n            documentVersionId: this.documentVersionId,\n            edits: this.collectedEdits,\n            setEndOfLine: this.eol,\n            undoStopAfter: this.undoStopAfter,\n            undoStopBefore: this.undoStopBefore\n        };\n    }\n\n    replace(location: Position | Range | Selection, val: string): void {\n        let range: Range;\n        if (location instanceof Position) {\n            range = new Range(location, location);\n        } else if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, val, false);\n    }\n\n    insert(location: Position, val: string): void {\n        this.addEdit(new Range(location, location), val, true);\n    }\n\n    delete(location: Range | Selection): void {\n        let range: Range;\n        if (location instanceof Range) {\n            range = location;\n        } else {\n            throw new Error('Unknown location');\n        }\n\n        this.addEdit(range, undefined, true);\n    }\n\n    setEndOfLine(endOfLine: EndOfLine): void {\n        if (endOfLine !== EndOfLine.CRLF && endOfLine !== EndOfLine.LF) {\n            throw illegalArgument('endOfLine');\n        }\n\n        this.eol = endOfLine;\n    }\n\n    private addEdit(range: Range, text: string | undefined, moveMarkers: boolean): void {\n        const validatedRange = this.document.validateRange(range);\n        this.collectedEdits.push({\n            range: validatedRange,\n            forceMoveMarkers: moveMarkers,\n            text: text\n        });\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction warnOnError(promise: Promise<any>): void {\n    promise.then(undefined, err => {\n        console.warn(err);\n    });\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { TextEditorsExt, EditorChangedPropertiesData, TextEditorPositionData, TextEditorsMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport * as theia from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { TextEditorExt } from './text-editor';\nimport * as Converters from './type-converters';\nimport { TextEditorSelectionChangeKind } from './types-impl';\nimport { IdGenerator } from '../common/id-generator';\n\nexport class TextEditorsExtImpl implements TextEditorsExt {\n\n    private readonly _onDidChangeTextEditorSelection = new Emitter<theia.TextEditorSelectionChangeEvent>();\n    private readonly _onDidChangeTextEditorOptions = new Emitter<theia.TextEditorOptionsChangeEvent>();\n    private readonly _onDidChangeTextEditorVisibleRanges = new Emitter<theia.TextEditorVisibleRangesChangeEvent>();\n    private readonly _onDidChangeTextEditorViewColumn = new Emitter<theia.TextEditorViewColumnChangeEvent>();\n    private readonly _onDidChangeActiveTextEditor = new Emitter<theia.TextEditor | undefined>();\n    private readonly _onDidChangeVisibleTextEditors = new Emitter<theia.TextEditor[]>();\n\n    readonly onDidChangeTextEditorSelection: Event<theia.TextEditorSelectionChangeEvent> = this._onDidChangeTextEditorSelection.event;\n    readonly onDidChangeTextEditorOptions = this._onDidChangeTextEditorOptions.event;\n    readonly onDidChangeTextEditorVisibleRanges = this._onDidChangeTextEditorVisibleRanges.event;\n    readonly onDidChangeTextEditorViewColumn = this._onDidChangeTextEditorViewColumn.event;\n    readonly onDidChangeActiveTextEditor = this._onDidChangeActiveTextEditor.event;\n    readonly onDidChangeVisibleTextEditors = this._onDidChangeVisibleTextEditors.event;\n\n    private proxy: TextEditorsMain;\n\n    constructor(rpc: RPCProtocol, private editorsAndDocuments: EditorsAndDocumentsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TEXT_EDITORS_MAIN);\n\n        this.editorsAndDocuments.onDidChangeActiveTextEditor(e => this._onDidChangeActiveTextEditor.fire(e));\n        this.editorsAndDocuments.onDidChangeVisibleTextEditors(e => this._onDidChangeVisibleTextEditors.fire(e));\n    }\n    $acceptEditorPropertiesChanged(id: string, props: EditorChangedPropertiesData): void {\n        const textEditor = this.editorsAndDocuments.getEditor(id);\n        if (!textEditor) {\n            return;\n        }\n\n        if (props.options) {\n            textEditor.acceptOptions(props.options);\n        }\n        if (props.selections) {\n            const selections = props.selections.selections.map(Converters.toSelection);\n            textEditor.acceptSelections(selections);\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            textEditor.acceptVisibleRanges(visibleRanges);\n        }\n\n        if (props.options) {\n            this._onDidChangeTextEditorOptions.fire({\n                textEditor,\n                options: props.options\n            });\n        }\n\n        if (props.selections) {\n            const kind = TextEditorSelectionChangeKind.fromValue(props.selections.source);\n            const selections = props.selections.selections.map(Converters.toSelection);\n            this._onDidChangeTextEditorSelection.fire({\n                textEditor,\n                selections,\n                kind\n            });\n        }\n\n        if (props.visibleRanges) {\n            const visibleRanges = props.visibleRanges.map(Converters.toRange);\n            this._onDidChangeTextEditorVisibleRanges.fire({\n                textEditor,\n                visibleRanges\n            });\n        }\n    }\n    $acceptEditorPositionData(data: TextEditorPositionData): void {\n        for (const id in data) {\n            if (data.hasOwnProperty(id)) {\n                const textEditor = this.editorsAndDocuments.getEditor(id);\n                const viewColumn = Converters.toViewColumn(data[id]);\n                if (textEditor && viewColumn) {\n                    if (textEditor.viewColumn !== viewColumn) {\n                        textEditor.acceptViewColumn(viewColumn);\n                        this._onDidChangeTextEditorViewColumn.fire({ textEditor, viewColumn });\n                    }\n                }\n            }\n        }\n    }\n\n    getActiveEditor(): TextEditorExt | undefined {\n        return this.editorsAndDocuments.activeEditor();\n    }\n\n    getVisibleTextEditors(): theia.TextEditor[] {\n        return this.editorsAndDocuments.allEditors();\n    }\n\n    createTextEditorDecorationType(options: theia.DecorationRenderOptions): theia.TextEditorDecorationType {\n        return new TextEditorDecorationType(this.proxy, options);\n    }\n\n    applyWorkspaceEdit(edit: theia.WorkspaceEdit): Promise<boolean> {\n        const dto = Converters.fromWorkspaceEdit(edit, this.editorsAndDocuments);\n        return this.proxy.$tryApplyWorkspaceEdit(dto);\n    }\n\n    saveAll(includeUntitled?: boolean): PromiseLike<boolean> {\n        return this.proxy.$saveAll(includeUntitled);\n    }\n\n}\n\nexport class TextEditorDecorationType implements theia.TextEditorDecorationType {\n\n    private static readonly Keys = new IdGenerator('TextEditorDecorationType');\n\n    private proxy: TextEditorsMain;\n    public key: string;\n\n    constructor(proxy: TextEditorsMain, options: theia.DecorationRenderOptions) {\n        this.key = TextEditorDecorationType.Keys.nextId();\n        this.proxy = proxy;\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        this.proxy.$registerTextEditorDecorationType(this.key, Converters.DecorationRenderOptions.from(options));\n    }\n\n    dispose(): void {\n        this.proxy.$removeTextEditorDecorationType(this.key);\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2020 Ericsson and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { ColorTheme, ColorThemeKind } from './types-impl';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { ThemingExt } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { ThemeType } from '@theia/core/lib/common/theme';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// some code copied and modified from https://github.com/microsoft/vscode/blob/5ddbda0172d80bfbb2529987ba9020848e8771f7/src/vs/workbench/api/common/extHostTheming.ts\n\nexport class ThemingExtImpl implements ThemingExt {\n\n    private actual: ColorTheme;\n    private _onDidChangeActiveColorTheme: Emitter<ColorTheme>;\n\n    constructor(\n        readonly rpc: RPCProtocol\n    ) {\n        this.actual = new ColorTheme(ColorThemeKind.Dark);\n        this._onDidChangeActiveColorTheme = new Emitter<ColorTheme>();\n    }\n\n    get activeColorTheme(): ColorTheme {\n        return this.actual;\n    }\n\n    $onColorThemeChange(type: ThemeType): void {\n        this.actual = new ColorTheme(this.convertKind(type));\n        this._onDidChangeActiveColorTheme.fire(this.actual);\n    }\n\n    protected convertKind(type: ThemeType): ColorThemeKind {\n        let kind: ColorThemeKind;\n        switch (type) {\n            case 'light':\n                kind = ColorThemeKind.Light;\n                break;\n            case 'dark':\n                kind = ColorThemeKind.Dark;\n                break;\n            case 'hc':\n                kind = ColorThemeKind.HighContrast;\n                break;\n        }\n        return kind;\n    }\n\n    get onDidChangeActiveColorTheme(): Event<ColorTheme> {\n        return this._onDidChangeActiveColorTheme.event;\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2019 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\nimport { Plugin, PLUGIN_RPC_CONTEXT, TimelineCommandArg, TimelineExt, TimelineMain } from '../common';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Disposable, URI } from './types-impl';\nimport { DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { CommandRegistryImpl } from './command-registry';\nimport type {\n    InternalTimelineOptions,\n    Timeline,\n    TimelineItem,\n    TimelineOptions,\n    TimelineProvider\n} from '@theia/timeline/lib/common/timeline-model';\nimport * as theia from '@theia/plugin';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { UriComponents } from '../common/uri-components';\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/microsoft/theia/blob/afacd2bdfe7060f09df9b9139521718915949757/src/vs/workbench/api/common/extHostTimeline.ts\n\nexport class TimelineExtImpl implements TimelineExt {\n    declare readonly _serviceBrand: undefined;\n\n    private readonly proxy: TimelineMain;\n    private providers = new Map<string, TimelineProvider>();\n\n    private itemsBySourceAndUriMap = new Map<string, Map<string | undefined, Map<string, theia.TimelineItem>>>();\n\n    constructor(readonly rpc: RPCProtocol, private readonly commands: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TIMELINE_MAIN);\n\n        commands.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TimelineCommandArg.is(arg)) {\n                    return arg;\n                } else {\n                    return this.itemsBySourceAndUriMap.get(arg.source)?.get(arg.uri?.toString())?.get(arg.timelineHandle);\n                }\n            }\n        });\n    }\n\n    async $getTimeline(id: string, uri: UriComponents, options: theia.TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n        const provider = this.providers.get(id);\n        return provider?.provideTimeline(URI.revive(uri), options, internalOptions);\n    }\n\n    registerTimelineProvider(plugin: Plugin, scheme: string | string[], provider: theia.TimelineProvider): Disposable {\n        const timelineDisposables = new DisposableCollection();\n\n        const convertTimelineItem = this.convertTimelineItem(provider.id, timelineDisposables).bind(this);\n\n        let disposable: Disposable | undefined;\n        if (provider.onDidChange) {\n            disposable = Disposable.from(provider.onDidChange(e => this.proxy.$fireTimelineChanged({ uri: undefined, reset: true, ...e, id: provider.id }), this));\n        }\n\n        const itemsBySourceAndUriMap = this.itemsBySourceAndUriMap;\n        return this.registerTimelineProviderCore({\n            ...provider,\n            scheme: scheme,\n            onDidChange: undefined,\n            async provideTimeline(uri: URI, options: TimelineOptions, internalOptions?: InternalTimelineOptions): Promise<Timeline | undefined> {\n                if (internalOptions?.resetCache) {\n                    timelineDisposables.dispose();\n\n                    const items = itemsBySourceAndUriMap.get(provider.id);\n                    if (items) {\n                        items.clear();\n                    }\n                }\n\n                const result = await provider.provideTimeline(uri, options, CancellationToken.None);\n                if (!result) {\n                    return undefined;\n                }\n\n                const convertItem = convertTimelineItem(uri, internalOptions);\n                return {\n                    ...result,\n                    source: provider.id,\n                    items: result.items.map(convertItem)\n                };\n            },\n            dispose(): void {\n                for (const sourceMap of itemsBySourceAndUriMap.values()) {\n                    const source = sourceMap.get(provider.id);\n                    if (source) {\n                        source.clear();\n                    }\n                }\n\n                if (disposable) {\n                    disposable.dispose();\n                }\n                timelineDisposables.dispose();\n            }\n        });\n    }\n\n    private convertTimelineItem(source: string, disposables: DisposableCollection): (uri: URI, options?: InternalTimelineOptions) => (item: theia.TimelineItem) => TimelineItem {\n        return (uri: URI, options?: InternalTimelineOptions) => {\n            let items: Map<string, theia.TimelineItem> | undefined;\n            if (options?.cacheResults) {\n                let itemsByUri = this.itemsBySourceAndUriMap.get(source);\n                if (itemsByUri === undefined) {\n                    itemsByUri = new Map();\n                    this.itemsBySourceAndUriMap.set(source, itemsByUri);\n                }\n\n                const uriKey = getUriKey(uri);\n                items = itemsByUri.get(uriKey);\n                if (items === undefined) {\n                    items = new Map();\n                    itemsByUri.set(uriKey, items);\n                }\n            }\n\n            return (item: theia.TimelineItem): TimelineItem => {\n                const { iconPath, ...props } = item;\n\n                const handle = `${source}|${item.id ?? item.timestamp}`;\n                if (items) {\n                    items.set(handle, item);\n                }\n\n                return {\n                    ...props,\n                    uri: uri.toString(),\n                    id: props.id ?? undefined,\n                    handle: handle,\n                    source: source,\n                    command: item.command ? this.commands.converter.toSafeCommand(item.command, disposables) : undefined,\n                };\n            };\n        };\n    }\n\n    private registerTimelineProviderCore(provider: TimelineProvider): Disposable {\n        const existing = this.providers.get(provider.id);\n        if (existing) {\n            throw new Error(`Timeline Provider ${provider.id} already exists.`);\n        }\n\n        this.proxy.$registerTimelineProvider({\n            id: provider.id,\n            label: provider.label,\n            scheme: provider.scheme\n        });\n        this.providers.set(provider.id, provider);\n\n        return Disposable.create(() => {\n            for (const sourceMap of this.itemsBySourceAndUriMap.values()) {\n                const items = sourceMap.get(provider.id);\n                if (items) {\n                    items.clear();\n                }\n            }\n\n            this.providers.delete(provider.id);\n            this.proxy.$unregisterTimelineProvider(provider.id);\n            provider.dispose();\n        });\n    }\n}\n\nfunction getUriKey(uri: URI | undefined): string | undefined {\n    return uri?.toString();\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n\nimport {\n    TreeDataProvider, TreeView, TreeViewExpansionEvent, TreeItem, TreeItemLabel,\n    TreeViewSelectionChangeEvent, TreeViewVisibilityChangeEvent\n} from '@theia/plugin';\n// TODO: extract `@theia/util` for event, disposable, cancellation and common types\n// don't use @theia/core directly from plugin host\nimport { Emitter } from '@theia/core/lib/common/event';\nimport { Disposable, DisposableCollection } from '@theia/core/lib/common/disposable';\nimport { Disposable as PluginDisposable, ThemeIcon } from '../types-impl';\nimport { Plugin, PLUGIN_RPC_CONTEXT, TreeViewsExt, TreeViewsMain, TreeViewItem, TreeViewRevealOptions } from '../../common/plugin-api-rpc';\nimport { RPCProtocol } from '../../common/rpc-protocol';\nimport { CommandRegistryImpl, CommandsConverter } from '../command-registry';\nimport { TreeViewSelection } from '../../common';\nimport { PluginIconPath } from '../plugin-icon-path';\n\nexport class TreeViewsExtImpl implements TreeViewsExt {\n\n    private proxy: TreeViewsMain;\n\n    private readonly treeViews = new Map<string, TreeViewExtImpl<any>>();\n\n    constructor(rpc: RPCProtocol, readonly commandRegistry: CommandRegistryImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.TREE_VIEWS_MAIN);\n        commandRegistry.registerArgumentProcessor({\n            processArgument: arg => {\n                if (!TreeViewSelection.is(arg)) {\n                    return arg;\n                }\n                const { treeViewId, treeItemId } = arg;\n                const treeView = this.treeViews.get(treeViewId);\n                return treeView && treeView.getTreeItem(treeItemId);\n            }\n        });\n    }\n\n    registerTreeDataProvider<T>(plugin: Plugin, treeViewId: string, treeDataProvider: TreeDataProvider<T>): PluginDisposable {\n        const treeView = this.createTreeView(plugin, treeViewId, { treeDataProvider });\n\n        return PluginDisposable.create(() => {\n            this.treeViews.delete(treeViewId);\n            treeView.dispose();\n        });\n    }\n\n    createTreeView<T>(plugin: Plugin, treeViewId: string, options: { treeDataProvider: TreeDataProvider<T> }): TreeView<T> {\n        if (!options || !options.treeDataProvider) {\n            throw new Error('Options with treeDataProvider is mandatory');\n        }\n\n        const treeView = new TreeViewExtImpl(plugin, treeViewId, options.treeDataProvider, this.proxy, this.commandRegistry.converter);\n        this.treeViews.set(treeViewId, treeView);\n\n        return {\n            // tslint:disable:typedef\n            get onDidExpandElement() {\n                return treeView.onDidExpandElement;\n            },\n            get onDidCollapseElement() {\n                return treeView.onDidCollapseElement;\n            },\n            get selection() {\n                return treeView.selectedElements;\n            },\n            get onDidChangeSelection() {\n                return treeView.onDidChangeSelection;\n            },\n            get visible() {\n                return treeView.visible;\n            },\n            get onDidChangeVisibility() {\n                return treeView.onDidChangeVisibility;\n            },\n            get message(): string {\n                return treeView.message;\n            },\n            set message(message: string) {\n                treeView.message = message;\n            },\n            get title(): string {\n                return treeView.title;\n            },\n            set title(title: string) {\n                treeView.title = title;\n            },\n            get description(): string {\n                return treeView.description;\n            },\n            set description(description: string) {\n                treeView.description = description;\n            },\n            reveal: (element: T, revealOptions?: Partial<TreeViewRevealOptions>): Thenable<void> =>\n                treeView.reveal(element, revealOptions),\n\n            dispose: () => {\n                this.treeViews.delete(treeViewId);\n                treeView.dispose();\n            }\n        };\n    }\n\n    async $getChildren(treeViewId: string, treeItemId: string): Promise<TreeViewItem[] | undefined> {\n        const treeView = this.getTreeView(treeViewId);\n\n        return treeView.getChildren(treeItemId);\n    }\n\n    async $setExpanded(treeViewId: string, treeItemId: string, expanded: boolean): Promise<any> {\n        const treeView = this.getTreeView(treeViewId);\n\n        if (expanded) {\n            return treeView.onExpanded(treeItemId);\n        } else {\n            return treeView.onCollapsed(treeItemId);\n        }\n    }\n\n    async $setSelection(treeViewId: string, treeItemIds: string[]): Promise<void> {\n        this.getTreeView(treeViewId).setSelection(treeItemIds);\n    }\n\n    async $setVisible(treeViewId: string, isVisible: boolean): Promise<void> {\n        this.getTreeView(treeViewId).setVisible(isVisible);\n    }\n\n    protected getTreeView(treeViewId: string): TreeViewExtImpl<any> {\n        const treeView = this.treeViews.get(treeViewId);\n        if (!treeView) {\n            throw new Error(`No tree view with id '${treeViewId}' registered.`);\n        }\n        return treeView;\n    }\n\n}\n\ninterface TreeExtNode<T> extends Disposable {\n    id: string\n    value?: T\n    children?: TreeExtNode<T>[]\n}\n\nclass TreeViewExtImpl<T> implements Disposable {\n\n    private readonly onDidExpandElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidExpandElement = this.onDidExpandElementEmitter.event;\n\n    private readonly onDidCollapseElementEmitter = new Emitter<TreeViewExpansionEvent<T>>();\n    readonly onDidCollapseElement = this.onDidCollapseElementEmitter.event;\n\n    private readonly onDidChangeSelectionEmitter = new Emitter<TreeViewSelectionChangeEvent<T>>();\n    readonly onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n\n    private readonly onDidChangeVisibilityEmitter = new Emitter<TreeViewVisibilityChangeEvent>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    private readonly nodes = new Map<string, TreeExtNode<T>>();\n    private pendingRefresh = Promise.resolve();\n\n    private readonly toDispose = new DisposableCollection(\n        Disposable.create(() => this.clearAll()),\n        this.onDidExpandElementEmitter,\n        this.onDidCollapseElementEmitter,\n        this.onDidChangeSelectionEmitter,\n        this.onDidChangeVisibilityEmitter\n    );\n\n    constructor(\n        private plugin: Plugin,\n        private treeViewId: string,\n        private treeDataProvider: TreeDataProvider<T>,\n        private proxy: TreeViewsMain,\n        readonly commandsConverter: CommandsConverter) {\n\n        proxy.$registerTreeDataProvider(treeViewId);\n        this.toDispose.push(Disposable.create(() => this.proxy.$unregisterTreeDataProvider(treeViewId)));\n\n        if (treeDataProvider.onDidChangeTreeData) {\n            treeDataProvider.onDidChangeTreeData((e: T) => {\n                this.pendingRefresh = proxy.$refresh(treeViewId);\n            });\n        }\n    }\n\n    dispose(): void {\n        this.toDispose.dispose();\n    }\n\n    async reveal(element: T, options?: Partial<TreeViewRevealOptions>): Promise<void> {\n        await this.pendingRefresh;\n\n        const elementParentChain = await this.calculateRevealParentChain(element);\n        if (elementParentChain) {\n            return this.proxy.$reveal(this.treeViewId, elementParentChain, {\n                select: true, focus: false, expand: false, ...options\n            });\n        }\n    }\n\n    private _message: string = '';\n    get message(): string {\n        return this._message;\n    }\n\n    set message(message: string) {\n        this._message = message;\n        this.proxy.$setMessage(this.treeViewId, this._message);\n    }\n\n    private _title: string = '';\n    get title(): string {\n        return this._title;\n    }\n\n    set title(title: string) {\n        this._title = title;\n        this.proxy.$setTitle(this.treeViewId, title);\n    }\n\n    private _description: string = '';\n    get description(): string {\n        return this._description;\n    }\n\n    set description(description: string) {\n        this._description = description;\n        this.proxy.$setDescription(this.treeViewId, this._description);\n    }\n\n    getTreeItem(treeItemId: string): T | undefined {\n        const element = this.nodes.get(treeItemId);\n        return element && element.value;\n    }\n\n    /**\n     * calculate the chain of node ids from root to element so that the frontend can expand all of them and reveal element.\n     * this is needed as the frontend may not have the full tree nodes.\n     * throughout the parent chain this.getChildren is called in order to fill this.nodes cache.\n     *\n     * returns undefined if wasn't able to calculate the path due to inconsistencies.\n     *\n     * @param element element to reveal\n     */\n    private async calculateRevealParentChain(element: T | undefined): Promise<string[] | undefined> {\n        if (!element) {\n            // root\n            return [];\n        }\n        const result = this.treeDataProvider.getParent && await this.treeDataProvider.getParent(element);\n        const parent = result ? result : undefined;\n        const chain = await this.calculateRevealParentChain(parent);\n        if (!chain) {\n            // parents are inconsistent\n            return undefined;\n        }\n        const parentId = chain.length ? chain[chain.length - 1] : '';\n        const treeItem = await this.treeDataProvider.getTreeItem(element);\n        if (treeItem.id) {\n            return chain.concat(treeItem.id);\n        }\n        const cachedParentNode = this.nodes.get(parentId);\n        // first try to get children length from cache since getChildren disposes old nodes, which can cause a race\n        // condition if command is executed together with reveal.\n        // If not in cache, getChildren fills this.nodes and generate ids for them which are needed later\n        const children = cachedParentNode?.children || await this.getChildren(parentId);\n        if (!children) {\n            return undefined; // parent is inconsistent\n        }\n        const idLabel = this.getTreeItemIdLabel(treeItem);\n        let possibleIndex = children.length;\n        // find the right element id by searching all possible id names in the cache\n        while (possibleIndex-- > 0) {\n            const candidateId = this.buildTreeItemId(parentId, possibleIndex, idLabel);\n            if (this.nodes.has(candidateId)) {\n                return chain.concat(candidateId);\n            }\n        }\n        // couldn't calculate consistent parent chain and id\n        return undefined;\n    }\n\n    private getTreeItemLabel(treeItem: TreeItem): string | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        return typeof treeItemLabel === 'object' ? treeItemLabel.label : treeItemLabel;\n    }\n\n    private getTreeItemLabelHighlights(treeItem: TreeItem): [number, number][] | undefined {\n        const treeItemLabel: string | TreeItemLabel | undefined = treeItem.label;\n        return typeof treeItemLabel === 'object' ? treeItemLabel.highlights : undefined;\n    }\n\n    private getTreeItemIdLabel(treeItem: TreeItem): string | undefined {\n        let idLabel = this.getTreeItemLabel(treeItem);\n        // Use resource URI if label is not set\n        if (idLabel === undefined && treeItem.resourceUri) {\n            idLabel = treeItem.resourceUri.path.toString();\n            idLabel = decodeURIComponent(idLabel);\n            if (idLabel.indexOf('/') >= 0) {\n                idLabel = idLabel.substring(idLabel.lastIndexOf('/') + 1);\n            }\n        }\n        return idLabel;\n    }\n\n    private buildTreeItemId(parentId: string, index: number, idLabel: string | undefined): string {\n        return `${parentId}/${index}:${idLabel}`;\n    }\n\n    async getChildren(parentId: string): Promise<TreeViewItem[] | undefined> {\n        const parentNode = this.nodes.get(parentId);\n        const parent = parentNode?.value;\n        if (parentId && !parent) {\n            console.error(`No tree item with id '${parentId}' found.`);\n            return [];\n        }\n        this.clearChildren(parentNode);\n\n        // place root in the cache\n        if (parentId === '') {\n            this.nodes.set(parentId, { id: '', dispose: () => { } });\n        }\n        // ask data provider for children for cached element\n        const result = await this.treeDataProvider.getChildren(parent);\n        if (result) {\n            const treeItemPromises = result.map(async (value, index) => {\n\n                // Ask data provider for a tree item for the value\n                // Data provider must return theia.TreeItem\n                const treeItem = await this.treeDataProvider.getTreeItem(value);\n                // Convert theia.TreeItem to the TreeViewItem\n\n                const label = this.getTreeItemLabel(treeItem);\n                const highlights = this.getTreeItemLabelHighlights(treeItem);\n                const idLabel = this.getTreeItemIdLabel(treeItem);\n\n                // Generate the ID\n                // ID is used for caching the element\n                const id = treeItem.id || this.buildTreeItemId(parentId, index, idLabel);\n\n                const toDisposeElement = new DisposableCollection();\n                const node: TreeExtNode<T> = {\n                    id,\n                    value,\n                    dispose: () => toDisposeElement.dispose()\n                };\n                if (parentNode) {\n                    const children = parentNode.children || [];\n                    children.push(node);\n                    parentNode.children = children;\n                }\n                this.nodes.set(id, node);\n\n                let icon;\n                let iconUrl;\n                let themeIcon;\n                const { iconPath } = treeItem;\n                if (typeof iconPath === 'string' && iconPath.indexOf('fa-') !== -1) {\n                    icon = iconPath;\n                } else if (ThemeIcon.is(iconPath)) {\n                    themeIcon = iconPath;\n                } else {\n                    iconUrl = PluginIconPath.toUrl(<PluginIconPath | undefined>iconPath, this.plugin);\n                }\n\n                const treeViewItem = {\n                    id,\n                    label,\n                    highlights,\n                    icon,\n                    iconUrl,\n                    themeIcon,\n                    description: treeItem.description,\n                    resourceUri: treeItem.resourceUri,\n                    tooltip: treeItem.tooltip,\n                    collapsibleState: treeItem.collapsibleState,\n                    contextValue: treeItem.contextValue,\n                    command: this.commandsConverter.toSafeCommand(treeItem.command, toDisposeElement),\n                    accessibilityInformation: treeItem.accessibilityInformation\n                } as TreeViewItem;\n\n                return treeViewItem;\n            });\n\n            return Promise.all(treeItemPromises);\n        } else {\n            return undefined;\n        }\n    }\n\n    private clearChildren(parentNode?: TreeExtNode<T>): void {\n        if (parentNode) {\n            if (parentNode.children) {\n                for (const child of parentNode.children) {\n                    this.clear(child);\n                }\n            }\n            delete parentNode['children'];\n        } else {\n            this.clearAll();\n        }\n    }\n\n    private clear(node: TreeExtNode<T>): void {\n        if (node.children) {\n            for (const child of node.children) {\n                this.clear(child);\n            }\n        }\n        this.nodes.delete(node.id);\n        node.dispose();\n    }\n\n    private clearAll(): void {\n        this.nodes.forEach(node => node.dispose());\n        this.nodes.clear();\n    }\n\n    async onExpanded(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidExpandElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    async onCollapsed(treeItemId: string): Promise<any> {\n        // get element from a cache\n        const cachedElement = this.getTreeItem(treeItemId);\n\n        // fire an event\n        if (cachedElement) {\n            this.onDidCollapseElementEmitter.fire({\n                element: cachedElement\n            });\n        }\n    }\n\n    private selectedItemIds = new Set<string>();\n    get selectedElements(): T[] {\n        const items: T[] = [];\n        for (const id of this.selectedItemIds) {\n            const item = this.getTreeItem(id);\n            if (item) {\n                items.push(item);\n            }\n        }\n        return items;\n    }\n\n    setSelection(selectedItemIds: string[]): void {\n        const toDelete = new Set<string>(this.selectedItemIds);\n        for (const id of selectedItemIds) {\n            toDelete.delete(id);\n            if (!this.selectedItemIds.has(id)) {\n                this.doSetSelection(selectedItemIds);\n                return;\n            }\n        }\n        if (toDelete.size) {\n            this.doSetSelection(selectedItemIds);\n        }\n    }\n    protected doSetSelection(selectedItemIts: string[]): void {\n        this.selectedItemIds = new Set(selectedItemIts);\n        this.onDidChangeSelectionEmitter.fire(Object.freeze({ selection: this.selectedElements }));\n    }\n\n    private _visible = false;\n    get visible(): boolean {\n        return this._visible;\n    }\n\n    setVisible(visible: boolean): void {\n        if (visible !== this._visible) {\n            this._visible = visible;\n            this.onDidChangeVisibilityEmitter.fire(Object.freeze({ visible: this._visible }));\n        }\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport * as theia from '@theia/plugin';\nimport * as lstypes from '@theia/core/shared/vscode-languageserver-protocol';\nimport { QuickPickItemKind, URI } from './types-impl';\nimport * as rpc from '../common/plugin-api-rpc';\nimport {\n    DecorationOptions, EditorPosition, Plugin, Position, WorkspaceTextEditDto, WorkspaceFileEditDto, Selection, TaskDto, WorkspaceEditDto\n} from '../common/plugin-api-rpc';\nimport * as model from '../common/plugin-api-rpc-model';\nimport { LanguageFilter, LanguageSelector, RelativePattern } from '@theia/editor/lib/common/language-selector';\nimport { MarkdownString as PluginMarkdownStringImpl } from './markdown-string';\nimport * as types from './types-impl';\nimport { UriComponents } from '../common/uri-components';\nimport { isReadonlyArray } from '../common/arrays';\nimport { MarkdownString as MarkdownStringDTO } from '@theia/core/lib/common/markdown-rendering';\n\nconst SIDE_GROUP = -2;\nconst ACTIVE_GROUP = -1;\nconst BUILD_GROUP = 'build';\nconst TEST_GROUP = 'test';\n\nexport function toViewColumn(ep?: EditorPosition): theia.ViewColumn | undefined {\n    if (typeof ep !== 'number') {\n        return undefined;\n    }\n\n    if (ep === EditorPosition.ONE) {\n        return <number>types.ViewColumn.One;\n    } else if (ep === EditorPosition.TWO) {\n        return <number>types.ViewColumn.Two;\n    } else if (ep === EditorPosition.THREE) {\n        return <number>types.ViewColumn.Three;\n    } else if (ep === EditorPosition.FOUR) {\n        return <number>types.ViewColumn.Four;\n    } else if (ep === EditorPosition.FIVE) {\n        return <number>types.ViewColumn.Five;\n    } else if (ep === EditorPosition.SIX) {\n        return <number>types.ViewColumn.Six;\n    } else if (ep === EditorPosition.SEVEN) {\n        return <number>types.ViewColumn.Seven;\n    } else if (ep === EditorPosition.EIGHT) {\n        return <number>types.ViewColumn.Eight;\n    } else if (ep === EditorPosition.NINE) {\n        return <number>types.ViewColumn.Nine;\n    }\n\n    return undefined;\n}\n\nexport function fromViewColumn(column?: theia.ViewColumn): number {\n    if (typeof column === 'number' && column >= types.ViewColumn.One) {\n        return column - 1;\n    }\n\n    if (column! === <number>types.ViewColumn.Beside) {\n        return SIDE_GROUP;\n    }\n\n    return ACTIVE_GROUP;\n}\n\nexport function toWebviewPanelShowOptions(options: theia.ViewColumn | theia.WebviewPanelShowOptions): theia.WebviewPanelShowOptions {\n    if (typeof options === 'object') {\n        const showOptions = options as theia.WebviewPanelShowOptions;\n        return {\n            area: showOptions.area ? showOptions.area : types.WebviewPanelTargetArea.Main,\n            viewColumn: showOptions.viewColumn ? fromViewColumn(showOptions.viewColumn) : undefined,\n            preserveFocus: showOptions.preserveFocus ? showOptions.preserveFocus : false\n        };\n    }\n\n    return {\n        area: types.WebviewPanelTargetArea.Main,\n        viewColumn: fromViewColumn(options as theia.ViewColumn),\n        preserveFocus: false\n    };\n}\n\nexport function toSelection(selection: Selection): types.Selection {\n    const { selectionStartLineNumber, selectionStartColumn, positionLineNumber, positionColumn } = selection;\n    const start = new types.Position(selectionStartLineNumber - 1, selectionStartColumn - 1);\n    const end = new types.Position(positionLineNumber - 1, positionColumn - 1);\n    return new types.Selection(start, end);\n}\n\nexport function fromSelection(selection: types.Selection): Selection {\n    const { active, anchor } = selection;\n    return {\n        selectionStartLineNumber: anchor.line + 1,\n        selectionStartColumn: anchor.character + 1,\n        positionLineNumber: active.line + 1,\n        positionColumn: active.character + 1\n    };\n}\n\nexport function toRange(range: model.Range): types.Range {\n    const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n    return new types.Range(startLineNumber - 1, startColumn - 1, endLineNumber - 1, endColumn - 1);\n}\n\nexport function fromRange(range: undefined): undefined;\nexport function fromRange(range: theia.Range): model.Range;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined;\nexport function fromRange(range: theia.Range | undefined): model.Range | undefined {\n    if (!range) {\n        return undefined;\n    }\n    const { start, end } = range;\n    return {\n        startLineNumber: start.line + 1,\n        startColumn: start.character + 1,\n        endLineNumber: end.line + 1,\n        endColumn: end.character + 1\n    };\n}\n\nexport function fromPosition(position: types.Position): Position {\n    return { lineNumber: position.line + 1, column: position.character + 1 };\n}\n\nexport function toPosition(position: Position): types.Position {\n    return new types.Position(position.lineNumber - 1, position.column - 1);\n}\n\nfunction isDecorationOptions(arg: unknown): arg is theia.DecorationOptions {\n    return !!arg && typeof arg === 'object' && typeof (arg as theia.DecorationOptions).range !== 'undefined';\n}\n\nexport function isDecorationOptionsArr(something: theia.Range[] | theia.DecorationOptions[]): something is theia.DecorationOptions[] {\n    if (something.length === 0) {\n        return true;\n    }\n    return isDecorationOptions(something[0]) ? true : false;\n}\n\nexport function fromRangeOrRangeWithMessage(ranges: theia.Range[] | theia.DecorationOptions[]): DecorationOptions[] {\n\n    if (isDecorationOptionsArr(ranges)) {\n        return ranges.map(r => {\n            let hoverMessage;\n            if (Array.isArray(r.hoverMessage)) {\n                hoverMessage = fromManyMarkdown(r.hoverMessage);\n            } else if (r.hoverMessage) {\n                hoverMessage = fromMarkdown(r.hoverMessage);\n            } else {\n                hoverMessage = undefined;\n            }\n            return {\n                range: fromRange(r.range)!,\n                hoverMessage: hoverMessage,\n                // eslint-disable-next-line @typescript-eslint/no-explicit-any\n                renderOptions: <any> /* URI vs Uri */r.renderOptions\n            };\n        });\n    } else {\n        return ranges.map(r => ({ range: fromRange(r) }));\n    }\n}\n\nexport function fromManyMarkdown(markup: (theia.MarkdownString | theia.MarkedString)[]): MarkdownStringDTO[] {\n    return markup.map(fromMarkdown);\n}\n\ninterface Codeblock {\n    language: string;\n    value: string;\n}\n\nfunction isCodeblock(arg: unknown): arg is Codeblock {\n    return !!arg && typeof arg === 'object'\n        && typeof (arg as Codeblock).language === 'string'\n        && typeof (arg as Codeblock).value === 'string';\n}\n\nexport function fromMarkdown(markup: theia.MarkdownString | theia.MarkedString): MarkdownStringDTO {\n    if (isCodeblock(markup)) {\n        const { language, value } = markup;\n        return { value: '```' + language + '\\n' + value + '\\n```\\n' };\n    } else if (markup instanceof PluginMarkdownStringImpl) {\n        return markup.toJSON();\n    } else if (MarkdownStringDTO.is(markup)) {\n        return markup;\n    } else if (typeof markup === 'string') {\n        return { value: markup };\n    } else {\n        return { value: '' };\n    }\n}\n\nexport function toMarkdown(value: MarkdownStringDTO): PluginMarkdownStringImpl {\n    const implemented = new PluginMarkdownStringImpl(value.value, value.supportThemeIcons);\n    implemented.isTrusted = value.isTrusted;\n    implemented.supportHtml = value.supportHtml;\n    implemented.baseUri = value.baseUri && URI.revive(implemented.baseUri);\n    return implemented;\n}\n\nexport function fromDocumentSelector(selector: theia.DocumentSelector | undefined): LanguageSelector | undefined {\n    if (!selector) {\n        return undefined;\n    } else if (isReadonlyArray(selector)) {\n        return <LanguageSelector>selector.map(fromDocumentSelector);\n    } else if (typeof selector === 'string') {\n        return selector;\n    } else {\n        return {\n            language: selector.language,\n            scheme: selector.scheme,\n            pattern: fromGlobPattern(selector.pattern!)\n        } as LanguageFilter;\n    }\n\n}\n\nexport function fromGlobPattern(pattern: theia.GlobPattern): string | RelativePattern {\n    if (typeof pattern === 'string') {\n        return pattern;\n    }\n\n    if (isRelativePattern(pattern)) {\n        return new types.RelativePattern(pattern.base, pattern.pattern);\n    }\n\n    return pattern;\n}\n\nfunction isRelativePattern(obj: {}): obj is theia.RelativePattern {\n    const rp = obj as theia.RelativePattern;\n    return rp && typeof rp.base === 'string' && typeof rp.pattern === 'string';\n}\n\nexport function fromCompletionItemKind(kind?: types.CompletionItemKind): model.CompletionItemKind {\n    switch (kind) {\n        case types.CompletionItemKind.Method: return model.CompletionItemKind.Method;\n        case types.CompletionItemKind.Function: return model.CompletionItemKind.Function;\n        case types.CompletionItemKind.Constructor: return model.CompletionItemKind.Constructor;\n        case types.CompletionItemKind.Field: return model.CompletionItemKind.Field;\n        case types.CompletionItemKind.Variable: return model.CompletionItemKind.Variable;\n        case types.CompletionItemKind.Class: return model.CompletionItemKind.Class;\n        case types.CompletionItemKind.Interface: return model.CompletionItemKind.Interface;\n        case types.CompletionItemKind.Struct: return model.CompletionItemKind.Struct;\n        case types.CompletionItemKind.Module: return model.CompletionItemKind.Module;\n        case types.CompletionItemKind.Property: return model.CompletionItemKind.Property;\n        case types.CompletionItemKind.Unit: return model.CompletionItemKind.Unit;\n        case types.CompletionItemKind.Value: return model.CompletionItemKind.Value;\n        case types.CompletionItemKind.Constant: return model.CompletionItemKind.Constant;\n        case types.CompletionItemKind.Enum: return model.CompletionItemKind.Enum;\n        case types.CompletionItemKind.EnumMember: return model.CompletionItemKind.EnumMember;\n        case types.CompletionItemKind.Keyword: return model.CompletionItemKind.Keyword;\n        case types.CompletionItemKind.Snippet: return model.CompletionItemKind.Snippet;\n        case types.CompletionItemKind.Text: return model.CompletionItemKind.Text;\n        case types.CompletionItemKind.Color: return model.CompletionItemKind.Color;\n        case types.CompletionItemKind.File: return model.CompletionItemKind.File;\n        case types.CompletionItemKind.Reference: return model.CompletionItemKind.Reference;\n        case types.CompletionItemKind.Folder: return model.CompletionItemKind.Folder;\n        case types.CompletionItemKind.Event: return model.CompletionItemKind.Event;\n        case types.CompletionItemKind.Operator: return model.CompletionItemKind.Operator;\n        case types.CompletionItemKind.TypeParameter: return model.CompletionItemKind.TypeParameter;\n        case types.CompletionItemKind.User: return model.CompletionItemKind.User;\n        case types.CompletionItemKind.Issue: return model.CompletionItemKind.Issue;\n    }\n    return model.CompletionItemKind.Property;\n}\n\nexport function toCompletionItemKind(kind?: model.CompletionItemKind): types.CompletionItemKind {\n    switch (kind) {\n        case model.CompletionItemKind.Method: return types.CompletionItemKind.Method;\n        case model.CompletionItemKind.Function: return types.CompletionItemKind.Function;\n        case model.CompletionItemKind.Constructor: return types.CompletionItemKind.Constructor;\n        case model.CompletionItemKind.Field: return types.CompletionItemKind.Field;\n        case model.CompletionItemKind.Variable: return types.CompletionItemKind.Variable;\n        case model.CompletionItemKind.Class: return types.CompletionItemKind.Class;\n        case model.CompletionItemKind.Interface: return types.CompletionItemKind.Interface;\n        case model.CompletionItemKind.Struct: return types.CompletionItemKind.Struct;\n        case model.CompletionItemKind.Module: return types.CompletionItemKind.Module;\n        case model.CompletionItemKind.Property: return types.CompletionItemKind.Property;\n        case model.CompletionItemKind.Unit: return types.CompletionItemKind.Unit;\n        case model.CompletionItemKind.Value: return types.CompletionItemKind.Value;\n        case model.CompletionItemKind.Constant: return types.CompletionItemKind.Constant;\n        case model.CompletionItemKind.Enum: return types.CompletionItemKind.Enum;\n        case model.CompletionItemKind.EnumMember: return types.CompletionItemKind.EnumMember;\n        case model.CompletionItemKind.Keyword: return types.CompletionItemKind.Keyword;\n        case model.CompletionItemKind.Snippet: return types.CompletionItemKind.Snippet;\n        case model.CompletionItemKind.Text: return types.CompletionItemKind.Text;\n        case model.CompletionItemKind.Color: return types.CompletionItemKind.Color;\n        case model.CompletionItemKind.File: return types.CompletionItemKind.File;\n        case model.CompletionItemKind.Reference: return types.CompletionItemKind.Reference;\n        case model.CompletionItemKind.Folder: return types.CompletionItemKind.Folder;\n        case model.CompletionItemKind.Event: return types.CompletionItemKind.Event;\n        case model.CompletionItemKind.Operator: return types.CompletionItemKind.Operator;\n        case model.CompletionItemKind.TypeParameter: return types.CompletionItemKind.TypeParameter;\n        case model.CompletionItemKind.User: return types.CompletionItemKind.User;\n        case model.CompletionItemKind.Issue: return types.CompletionItemKind.Issue;\n    }\n    return types.CompletionItemKind.Property;\n}\n\nexport function fromTextEdit(edit: theia.TextEdit): model.TextEdit {\n    return {\n        text: edit.newText,\n        range: fromRange(edit.range)\n    };\n}\n\nexport function convertDiagnosticToMarkerData(diagnostic: theia.Diagnostic): model.MarkerData {\n    return {\n        code: convertCode(diagnostic.code),\n        severity: convertSeverity(diagnostic.severity),\n        message: diagnostic.message,\n        source: diagnostic.source,\n        startLineNumber: diagnostic.range.start.line + 1,\n        startColumn: diagnostic.range.start.character + 1,\n        endLineNumber: diagnostic.range.end.line + 1,\n        endColumn: diagnostic.range.end.character + 1,\n        relatedInformation: convertRelatedInformation(diagnostic.relatedInformation),\n        tags: convertTags(diagnostic.tags)\n    };\n}\n\nfunction convertCode(code: string | number | undefined): string | undefined {\n    if (typeof code === 'number') {\n        return String(code);\n    } else {\n        return code;\n    }\n}\n\nfunction convertSeverity(severity: types.DiagnosticSeverity): types.MarkerSeverity {\n    switch (severity) {\n        case types.DiagnosticSeverity.Error: return types.MarkerSeverity.Error;\n        case types.DiagnosticSeverity.Warning: return types.MarkerSeverity.Warning;\n        case types.DiagnosticSeverity.Information: return types.MarkerSeverity.Info;\n        case types.DiagnosticSeverity.Hint: return types.MarkerSeverity.Hint;\n    }\n}\n\nfunction convertRelatedInformation(diagnosticsRelatedInformation: theia.DiagnosticRelatedInformation[] | undefined): model.RelatedInformation[] | undefined {\n    if (!diagnosticsRelatedInformation) {\n        return undefined;\n    }\n\n    const relatedInformation: model.RelatedInformation[] = [];\n    for (const item of diagnosticsRelatedInformation) {\n        relatedInformation.push({\n            resource: item.location.uri.toString(),\n            message: item.message,\n            startLineNumber: item.location.range.start.line + 1,\n            startColumn: item.location.range.start.character + 1,\n            endLineNumber: item.location.range.end.line + 1,\n            endColumn: item.location.range.end.character + 1\n        });\n    }\n    return relatedInformation;\n}\n\nfunction convertTags(tags: types.DiagnosticTag[] | undefined): types.MarkerTag[] | undefined {\n    if (!tags) {\n        return undefined;\n    }\n\n    const markerTags: types.MarkerTag[] = [];\n    for (const tag of tags) {\n        switch (tag) {\n            case types.DiagnosticTag.Unnecessary:\n                markerTags.push(types.MarkerTag.Unnecessary);\n                break;\n            case types.DiagnosticTag.Deprecated:\n                markerTags.push(types.MarkerTag.Deprecated);\n                break;\n        }\n    }\n    return markerTags;\n}\n\nexport function fromHover(hover: theia.Hover): model.Hover {\n    return <model.Hover>{\n        range: fromRange(hover.range),\n        contents: fromManyMarkdown(hover.contents)\n    };\n}\n\nexport function fromEvaluatableExpression(evaluatableExpression: theia.EvaluatableExpression): model.EvaluatableExpression {\n    return <model.EvaluatableExpression>{\n        range: fromRange(evaluatableExpression.range),\n        expression: evaluatableExpression.expression\n    };\n}\n\nexport function fromLocation(location: theia.Location): model.Location {\n    return <model.Location>{\n        uri: location.uri,\n        range: fromRange(location.range)\n    };\n}\n\nexport function fromTextDocumentShowOptions(options: theia.TextDocumentShowOptions): model.TextDocumentShowOptions {\n    if (options.selection) {\n        return {\n            ...options,\n            selection: fromRange(options.selection),\n        };\n    }\n    return options as model.TextDocumentShowOptions;\n}\n\nexport function fromDefinitionLink(definitionLink: theia.DefinitionLink): model.LocationLink {\n    return <model.LocationLink>{\n        uri: definitionLink.targetUri,\n        range: fromRange(definitionLink.targetRange),\n        originSelectionRange: definitionLink.originSelectionRange ? fromRange(definitionLink.originSelectionRange) : undefined,\n        targetSelectionRange: definitionLink.targetSelectionRange ? fromRange(definitionLink.targetSelectionRange) : undefined\n    };\n}\n\nexport namespace DocumentLink {\n\n    export function from(link: theia.DocumentLink): model.DocumentLink {\n        return {\n            range: fromRange(link.range),\n            url: link.target,\n            tooltip: link.tooltip\n        };\n    }\n\n    export function to(link: model.DocumentLink): theia.DocumentLink {\n        let target: URI | undefined = undefined;\n        if (link.url) {\n            try {\n                target = typeof link.url === 'string' ? URI.parse(link.url, true) : URI.revive(link.url);\n            } catch (err) {\n                // ignore\n            }\n        }\n        return new types.DocumentLink(toRange(link.range), target);\n    }\n}\n\nexport function fromDocumentHighlightKind(kind?: theia.DocumentHighlightKind): model.DocumentHighlightKind | undefined {\n    switch (kind) {\n        case types.DocumentHighlightKind.Text: return model.DocumentHighlightKind.Text;\n        case types.DocumentHighlightKind.Read: return model.DocumentHighlightKind.Read;\n        case types.DocumentHighlightKind.Write: return model.DocumentHighlightKind.Write;\n    }\n    return model.DocumentHighlightKind.Text;\n}\n\nexport function fromDocumentHighlight(documentHighlight: theia.DocumentHighlight): model.DocumentHighlight {\n    return <model.DocumentHighlight>{\n        range: fromRange(documentHighlight.range),\n        kind: fromDocumentHighlightKind(documentHighlight.kind)\n    };\n}\n\nexport namespace ParameterInformation {\n    export function from(info: types.ParameterInformation): model.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined\n        };\n    }\n    export function to(info: model.ParameterInformation): types.ParameterInformation {\n        return {\n            label: info.label,\n            documentation: MarkdownStringDTO.is(info.documentation) ? toMarkdown(info.documentation) : info.documentation\n        };\n    }\n}\n\nexport namespace SignatureInformation {\n\n    export function from(info: types.SignatureInformation): model.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: info.documentation ? fromMarkdown(info.documentation) : undefined,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.from),\n            activeParameter: info.activeParameter\n        };\n    }\n\n    export function to(info: model.SignatureInformation): types.SignatureInformation {\n        return {\n            label: info.label,\n            documentation: MarkdownStringDTO.is(info.documentation) ? toMarkdown(info.documentation) : info.documentation,\n            parameters: info.parameters && info.parameters.map(ParameterInformation.to),\n            activeParameter: info.activeParameter\n        };\n    }\n}\n\nexport namespace SignatureHelp {\n\n    export function from(id: number, help: types.SignatureHelp): model.SignatureHelp {\n        return {\n            id,\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.from)\n        };\n    }\n\n    export function to(help: model.SignatureHelp): types.SignatureHelp {\n        return {\n            activeSignature: help.activeSignature,\n            activeParameter: help.activeParameter,\n            signatures: help.signatures && help.signatures.map(SignatureInformation.to)\n        };\n    }\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function fromWorkspaceEdit(value: theia.WorkspaceEdit, documents?: any): WorkspaceEditDto {\n    const result: WorkspaceEditDto = {\n        edits: []\n    };\n    for (const entry of (value as types.WorkspaceEdit)._allEntries()) {\n        const [uri, uriOrEdits] = entry;\n        if (Array.isArray(uriOrEdits)) {\n            // text edits\n            const doc = documents ? documents.getDocument(uri.toString()) : undefined;\n            result.edits.push(<WorkspaceTextEditDto>{ resource: uri, modelVersionId: doc && doc.version, edit: uriOrEdits.map(fromTextEdit)[0], metadata: entry[2] });\n        } else {\n            // resource edits\n            result.edits.push(<WorkspaceFileEditDto>{ oldUri: uri, newUri: uriOrEdits, options: entry[2], metadata: entry[3] });\n        }\n    }\n    return result;\n}\n\nexport namespace SymbolKind {\n    const fromMapping: { [kind: number]: model.SymbolKind } = Object.create(null);\n    fromMapping[model.SymbolKind.File] = model.SymbolKind.File;\n    fromMapping[model.SymbolKind.Module] = model.SymbolKind.Module;\n    fromMapping[model.SymbolKind.Namespace] = model.SymbolKind.Namespace;\n    fromMapping[model.SymbolKind.Package] = model.SymbolKind.Package;\n    fromMapping[model.SymbolKind.Class] = model.SymbolKind.Class;\n    fromMapping[model.SymbolKind.Method] = model.SymbolKind.Method;\n    fromMapping[model.SymbolKind.Property] = model.SymbolKind.Property;\n    fromMapping[model.SymbolKind.Field] = model.SymbolKind.Field;\n    fromMapping[model.SymbolKind.Constructor] = model.SymbolKind.Constructor;\n    fromMapping[model.SymbolKind.Enum] = model.SymbolKind.Enum;\n    fromMapping[model.SymbolKind.Interface] = model.SymbolKind.Interface;\n    fromMapping[model.SymbolKind.Function] = model.SymbolKind.Function;\n    fromMapping[model.SymbolKind.Variable] = model.SymbolKind.Variable;\n    fromMapping[model.SymbolKind.Constant] = model.SymbolKind.Constant;\n    fromMapping[model.SymbolKind.String] = model.SymbolKind.String;\n    fromMapping[model.SymbolKind.Number] = model.SymbolKind.Number;\n    fromMapping[model.SymbolKind.Boolean] = model.SymbolKind.Boolean;\n    fromMapping[model.SymbolKind.Array] = model.SymbolKind.Array;\n    fromMapping[model.SymbolKind.Object] = model.SymbolKind.Object;\n    fromMapping[model.SymbolKind.Key] = model.SymbolKind.Key;\n    fromMapping[model.SymbolKind.Null] = model.SymbolKind.Null;\n    fromMapping[model.SymbolKind.EnumMember] = model.SymbolKind.EnumMember;\n    fromMapping[model.SymbolKind.Struct] = model.SymbolKind.Struct;\n    fromMapping[model.SymbolKind.Event] = model.SymbolKind.Event;\n    fromMapping[model.SymbolKind.Operator] = model.SymbolKind.Operator;\n    fromMapping[model.SymbolKind.TypeParameter] = model.SymbolKind.TypeParameter;\n\n    export function fromSymbolKind(kind: theia.SymbolKind): model.SymbolKind {\n        return fromMapping[kind] || model.SymbolKind.Property;\n    }\n\n    export function toSymbolKind(kind: model.SymbolKind): theia.SymbolKind {\n        for (const k in fromMapping) {\n            if (fromMapping[k] === kind) {\n                return Number(k);\n            }\n        }\n        return model.SymbolKind.Property;\n    }\n}\n\nexport function fromDocumentSymbol(info: theia.DocumentSymbol): model.DocumentSymbol {\n    const result: model.DocumentSymbol = {\n        name: info.name,\n        detail: info.detail,\n        range: fromRange(info.range)!,\n        tags: info.tags ? info.tags.map(fromSymbolTag) : [],\n        selectionRange: fromRange(info.selectionRange)!,\n        kind: SymbolKind.fromSymbolKind(info.kind)\n    };\n    if (info.children) {\n        result.children = info.children.map(fromDocumentSymbol);\n    }\n    return result;\n}\n\nexport function toDocumentSymbol(symbol: model.DocumentSymbol): theia.DocumentSymbol {\n    return {\n        name: symbol.name,\n        detail: symbol.detail,\n        range: toRange(symbol.range)!,\n        tags: symbol.tags && symbol.tags.length > 0 ? symbol.tags.map(toSymbolTag) : [],\n        selectionRange: toRange(symbol.selectionRange)!,\n        children: symbol.children ? symbol.children.map(toDocumentSymbol) : [],\n        kind: SymbolKind.toSymbolKind(symbol.kind)\n    };\n}\n\nexport function fromSymbolTag(kind: types.SymbolTag): model.SymbolTag {\n    switch (kind) {\n        case types.SymbolTag.Deprecated: return model.SymbolTag.Deprecated;\n    }\n}\n\nexport function toSymbolTag(kind: model.SymbolTag): types.SymbolTag {\n    switch (kind) {\n        case model.SymbolTag.Deprecated: return types.SymbolTag.Deprecated;\n    }\n}\n\nexport function isModelLocation(arg: unknown): arg is model.Location {\n    if (!arg) {\n        return false;\n    }\n    return !!arg &&\n        typeof arg === 'object' &&\n        isModelRange((arg as model.Location).range) &&\n        isUriComponents((arg as model.Location).uri);\n}\n\nexport function isModelRange(arg: unknown): arg is model.Range {\n    const range = arg as model.Range;\n    return !!arg && typeof arg === 'object' &&\n        typeof range.startLineNumber === 'number' &&\n        typeof range.startColumn === 'number' &&\n        typeof range.endLineNumber === 'number' &&\n        typeof range.endColumn === 'number';\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function isUriComponents(arg: unknown): arg is UriComponents {\n    const uriComponents = arg as UriComponents;\n    return !!arg && typeof arg === 'object' &&\n        typeof uriComponents.scheme === 'string' &&\n        typeof uriComponents.path === 'string' &&\n        typeof uriComponents.query === 'string' &&\n        typeof uriComponents.fragment === 'string';\n}\n\nexport function isModelCallHierarchyItem(arg: unknown): arg is model.CallHierarchyItem {\n    const item = arg as model.CallHierarchyItem;\n    return !!item && typeof item === 'object'\n        && isModelRange(item.range)\n        && isModelRange(item.selectionRange)\n        && isUriComponents(item.uri)\n        && !!item.name;\n}\n\nexport function isModelCallHierarchyIncomingCall(arg: unknown): arg is model.CallHierarchyIncomingCall {\n    const maybeIncomingCall = arg as model.CallHierarchyIncomingCall;\n    return !!arg && typeof arg === 'object' &&\n        'from' in maybeIncomingCall &&\n        'fromRanges' in maybeIncomingCall &&\n        isModelCallHierarchyItem(maybeIncomingCall.from);\n}\n\nexport function isModelCallHierarchyOutgoingCall(arg: unknown): arg is model.CallHierarchyOutgoingCall {\n    const maybeOutgoingCall = arg as model.CallHierarchyOutgoingCall;\n    return !!arg && typeof arg === 'object' &&\n        'to' in maybeOutgoingCall &&\n        'fromRanges' in maybeOutgoingCall &&\n        isModelCallHierarchyItem(maybeOutgoingCall.to);\n}\n\nexport function toLocation(value: model.Location): types.Location {\n    return new types.Location(URI.revive(value.uri), toRange(value.range));\n}\n\nexport function fromCallHierarchyItem(item: types.CallHierarchyItem): model.CallHierarchyItem {\n    return <model.CallHierarchyItem>{\n        kind: SymbolKind.fromSymbolKind(item.kind),\n        name: item.name,\n        detail: item.detail,\n        uri: item.uri,\n        range: fromRange(item.range),\n        selectionRange: fromRange(item.selectionRange),\n        tags: item.tags,\n        _itemId: item._itemId,\n        _sessionId: item._sessionId,\n    };\n}\n\nexport function toCallHierarchyItem(value: model.CallHierarchyItem): types.CallHierarchyItem {\n    const item = new types.CallHierarchyItem(\n        SymbolKind.toSymbolKind(value.kind),\n        value.name,\n        value.detail ? value.detail : '',\n        URI.revive(value.uri),\n        toRange(value.range),\n        toRange(value.selectionRange),\n    );\n    item.tags = value.tags;\n    item._itemId = value._itemId;\n    item._sessionId = value._sessionId;\n\n    return item;\n}\n\nexport function toCallHierarchyIncomingCall(value: model.CallHierarchyIncomingCall): types.CallHierarchyIncomingCall {\n    return new types.CallHierarchyIncomingCall(\n        toCallHierarchyItem(value.from),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toCallHierarchyOutgoingCall(value: model.CallHierarchyOutgoingCall): types.CallHierarchyOutgoingCall {\n    return new types.CallHierarchyOutgoingCall(\n        toCallHierarchyItem(value.to),\n        value.fromRanges && value.fromRanges.map(toRange));\n}\n\nexport function toWorkspaceFolder(folder: model.WorkspaceFolder): theia.WorkspaceFolder {\n    return {\n        uri: URI.revive(folder.uri),\n        name: folder.name,\n        index: folder.index\n    };\n}\n\nexport function fromTask(task: theia.Task): TaskDto | undefined {\n    if (!task) {\n        return undefined;\n    }\n\n    const taskDto = {} as TaskDto;\n    taskDto.label = task.name;\n    taskDto.source = task.source;\n\n    if ((task as types.Task).hasProblemMatchers) {\n        taskDto.problemMatcher = task.problemMatchers;\n    }\n    if ('detail' in task) {\n        taskDto.detail = task.detail;\n    }\n    if (typeof task.scope === 'object') {\n        taskDto.scope = task.scope.uri.toString();\n    } else if (typeof task.scope === 'number') {\n        taskDto.scope = task.scope;\n    }\n\n    if (task.presentationOptions) {\n        taskDto.presentation = task.presentationOptions;\n    }\n\n    const group = task.group;\n    if (group === types.TaskGroup.Build) {\n        taskDto.group = BUILD_GROUP;\n    } else if (group === types.TaskGroup.Test) {\n        taskDto.group = TEST_GROUP;\n    }\n\n    const taskDefinition = task.definition;\n    if (!taskDefinition) {\n        return taskDto;\n    }\n\n    taskDto.type = taskDefinition.type;\n    const { type, ...properties } = taskDefinition;\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDto[key] = properties[key];\n        }\n    }\n\n    const execution = task.execution;\n    if (!execution) {\n        return taskDto;\n    }\n\n    if (types.ShellExecution.is(execution)) {\n        return fromShellExecution(execution, taskDto);\n    }\n\n    if (types.ProcessExecution.is(execution)) {\n        return fromProcessExecution(execution, taskDto);\n    }\n\n    if (types.CustomExecution.is(execution)) {\n        return fromCustomExecution(execution, taskDto);\n    }\n\n    return taskDto;\n}\n\nexport function toTask(taskDto: TaskDto): theia.Task {\n    if (!taskDto) {\n        throw new Error('Task should be provided for converting');\n    }\n\n    const { type, taskType, label, source, scope, problemMatcher, detail, command, args, options, group, presentation, ...properties } = taskDto;\n    const result = {} as theia.Task;\n    result.name = label;\n    result.source = source;\n    if (detail) {\n        result.detail = detail;\n    }\n    if (typeof scope === 'string') {\n        const uri = URI.parse(scope);\n        result.scope = {\n            uri,\n            name: uri.toString(),\n            index: 0\n        };\n    } else {\n        result.scope = scope;\n    }\n\n    const taskDefinition: theia.TaskDefinition = {\n        type: type\n    };\n\n    result.definition = taskDefinition;\n\n    if (taskType === 'process') {\n        result.execution = getProcessExecution(taskDto);\n    }\n\n    const execution = { command, args, options };\n    if (taskType === 'shell' || types.ShellExecution.is(execution)) {\n        result.execution = getShellExecution(taskDto);\n    }\n\n    if (taskType === 'customExecution' || types.CustomExecution.is(execution)) {\n        result.execution = getCustomExecution(taskDto);\n        // if taskType is customExecution, we need to put all the information into taskDefinition,\n        // because some parameters may be in taskDefinition.\n        taskDefinition.label = label;\n        taskDefinition.command = command;\n        taskDefinition.args = args;\n        taskDefinition.options = options;\n    }\n\n    if (group) {\n        if (group === BUILD_GROUP) {\n            result.group = types.TaskGroup.Build;\n        } else if (group === TEST_GROUP) {\n            result.group = types.TaskGroup.Test;\n        }\n    }\n\n    if (presentation) {\n        result.presentationOptions = presentation;\n    }\n\n    if (!properties) {\n        return result;\n    }\n\n    for (const key in properties) {\n        if (properties.hasOwnProperty(key)) {\n            taskDefinition[key] = properties[key];\n        }\n    }\n\n    return result;\n}\n\nexport function fromProcessExecution(execution: theia.ProcessExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'process';\n    taskDto.command = execution.process;\n    taskDto.args = execution.args;\n\n    const options = execution.options;\n    if (options) {\n        taskDto.options = options;\n    }\n    return taskDto;\n}\n\nexport function fromShellExecution(execution: theia.ShellExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'shell';\n    const options = execution.options;\n    if (options) {\n        taskDto.options = getShellExecutionOptions(options);\n    }\n\n    const commandLine = execution.commandLine;\n    if (commandLine) {\n        taskDto.command = commandLine;\n        return taskDto;\n    }\n\n    if (execution.command) {\n        taskDto.command = getCommand(execution.command);\n        taskDto.args = getShellArgs(execution.args);\n        return taskDto;\n    } else {\n        throw new Error('Command is undefined');\n    }\n}\n\nexport function fromCustomExecution(execution: theia.CustomExecution, taskDto: TaskDto): TaskDto {\n    taskDto.taskType = 'customExecution';\n    const callback = execution.callback;\n    if (callback) {\n        taskDto.callback = callback;\n        return taskDto;\n    } else {\n        throw new Error('Converting CustomExecution callback is not implemented');\n    }\n}\n\nexport function getProcessExecution(taskDto: TaskDto): theia.ProcessExecution {\n    return new types.ProcessExecution(\n        taskDto.command,\n        taskDto.args || [],\n        taskDto.options || {});\n}\n\nexport function getShellExecution(taskDto: TaskDto): theia.ShellExecution {\n    if (taskDto.command && Array.isArray(taskDto.args) && taskDto.args.length !== 0) {\n        return new types.ShellExecution(\n            taskDto.command,\n            taskDto.args,\n            taskDto.options || {});\n    }\n    return new types.ShellExecution(\n        taskDto.command || taskDto.commandLine,\n        taskDto.options || {});\n}\n\nexport function getCustomExecution(taskDto: TaskDto): theia.CustomExecution {\n    return new types.CustomExecution(taskDto.callback);\n}\n\nexport function getShellArgs(args: undefined | (string | theia.ShellQuotedString)[]): string[] {\n    if (!args || args.length === 0) {\n        return [];\n    }\n\n    const element = args[0];\n    if (typeof element === 'string') {\n        return args as string[];\n    }\n\n    const result: string[] = [];\n    const shellQuotedArgs = args as theia.ShellQuotedString[];\n\n    shellQuotedArgs.forEach(arg => {\n        result.push(arg.value);\n    });\n\n    return result;\n}\n\nfunction getCommand(command: string | theia.ShellQuotedString): string {\n    return typeof command === 'string' ? command : command.value;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function getShellExecutionOptions(options: theia.ShellExecutionOptions): { [key: string]: any } {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const result = {} as { [key: string]: any };\n\n    const env = options.env;\n    if (env) {\n        result['env'] = env;\n    }\n\n    const executable = options.executable;\n    if (executable) {\n        result['executable'] = executable;\n    }\n\n    const shellQuoting = options.shellQuoting;\n    if (shellQuoting) {\n        result['shellQuoting'] = shellQuoting;\n    }\n\n    const shellArgs = options.shellArgs;\n    if (shellArgs) {\n        result['shellArgs'] = shellArgs;\n    }\n\n    const cwd = options.cwd;\n    if (cwd) {\n        Object.assign(result, { cwd });\n    }\n\n    return result;\n}\n\nexport function fromSymbolInformation(symbolInformation: theia.SymbolInformation): lstypes.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    if (symbolInformation.location && symbolInformation.location.range) {\n        const p1 = lstypes.Position.create(symbolInformation.location.range.start.line, symbolInformation.location.range.start.character);\n        const p2 = lstypes.Position.create(symbolInformation.location.range.end.line, symbolInformation.location.range.end.character);\n        return lstypes.SymbolInformation.create(symbolInformation.name, symbolInformation.kind++ as lstypes.SymbolKind, lstypes.Range.create(p1, p2),\n            symbolInformation.location.uri.toString(), symbolInformation.containerName);\n    }\n\n    return {\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind++ as lstypes.SymbolKind,\n        location: {\n            uri: symbolInformation.location.uri.toString(),\n            range: symbolInformation.location.range,\n        }\n    };\n}\n\nexport function toSymbolInformation(symbolInformation: lstypes.SymbolInformation): theia.SymbolInformation | undefined {\n    if (!symbolInformation) {\n        return undefined;\n    }\n\n    return <theia.SymbolInformation>{\n        name: symbolInformation.name,\n        containerName: symbolInformation.containerName,\n        kind: symbolInformation.kind,\n        location: {\n            uri: URI.parse(symbolInformation.location.uri),\n            range: symbolInformation.location.range\n        }\n    };\n}\n\nexport function fromSelectionRange(selectionRange: theia.SelectionRange): model.SelectionRange {\n    return { range: fromRange(selectionRange.range) };\n}\n\nexport function fromFoldingRange(foldingRange: theia.FoldingRange): model.FoldingRange {\n    const range: model.FoldingRange = {\n        start: foldingRange.start + 1,\n        end: foldingRange.end + 1\n    };\n    if (foldingRange.kind) {\n        range.kind = fromFoldingRangeKind(foldingRange.kind);\n    }\n    return range;\n}\n\nexport function fromFoldingRangeKind(kind: theia.FoldingRangeKind | undefined): model.FoldingRangeKind | undefined {\n    if (kind) {\n        switch (kind) {\n            case types.FoldingRangeKind.Comment:\n                return model.FoldingRangeKind.Comment;\n            case types.FoldingRangeKind.Imports:\n                return model.FoldingRangeKind.Imports;\n            case types.FoldingRangeKind.Region:\n                return model.FoldingRangeKind.Region;\n        }\n    }\n    return undefined;\n}\n\nexport function fromColor(color: types.Color): [number, number, number, number] {\n    return [color.red, color.green, color.blue, color.alpha];\n}\n\nexport function toColor(color: [number, number, number, number]): types.Color {\n    return new types.Color(color[0], color[1], color[2], color[3]);\n}\n\nexport function fromColorPresentation(colorPresentation: theia.ColorPresentation): model.ColorPresentation {\n    return {\n        label: colorPresentation.label,\n        textEdit: colorPresentation.textEdit ? fromTextEdit(colorPresentation.textEdit) : undefined,\n        additionalTextEdits: colorPresentation.additionalTextEdits ? colorPresentation.additionalTextEdits.map(value => fromTextEdit(value)) : undefined\n    };\n}\n\nexport function convertToTransferQuickPickItems(items: rpc.Item[]): rpc.TransferQuickPickItems[] {\n    return items.map<rpc.TransferQuickPickItems>((item, index) => {\n        if (typeof item === 'string') {\n            return { type: 'item', label: item, handle: index };\n        } else if (item.kind === QuickPickItemKind.Separator) {\n            return { type: 'separator', label: item.label, handle: index };\n        } else {\n            const { label, description, detail, picked, alwaysShow } = item;\n            return {\n                type: 'item',\n                label,\n                description,\n                detail,\n                picked,\n                alwaysShow,\n                handle: index,\n            };\n        }\n    });\n}\n\nexport namespace DecorationRenderOptions {\n    export function from(options: theia.DecorationRenderOptions): rpc.DecorationRenderOptions {\n        return {\n            isWholeLine: options.isWholeLine,\n            rangeBehavior: options.rangeBehavior ? DecorationRangeBehavior.from(options.rangeBehavior) : undefined,\n            overviewRulerLane: options.overviewRulerLane,\n            light: options.light ? ThemableDecorationRenderOptions.from(options.light) : undefined,\n            dark: options.dark ? ThemableDecorationRenderOptions.from(options.dark) : undefined,\n\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace DecorationRangeBehavior {\n    export function from(value: types.DecorationRangeBehavior): rpc.TrackedRangeStickiness {\n        if (typeof value === 'undefined') {\n            return value;\n        }\n        switch (value) {\n            case types.DecorationRangeBehavior.OpenOpen:\n                return rpc.TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.ClosedClosed:\n                return rpc.TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges;\n            case types.DecorationRangeBehavior.OpenClosed:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingBefore;\n            case types.DecorationRangeBehavior.ClosedOpen:\n                return rpc.TrackedRangeStickiness.GrowsOnlyWhenTypingAfter;\n        }\n    }\n}\n\nexport namespace ThemableDecorationRenderOptions {\n    export function from(options: theia.ThemableDecorationRenderOptions): rpc.ThemeDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            outline: options.outline,\n            outlineColor: <string | types.ThemeColor>options.outlineColor,\n            outlineStyle: options.outlineStyle,\n            outlineWidth: options.outlineWidth,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            borderRadius: options.borderRadius,\n            borderSpacing: options.borderSpacing,\n            borderStyle: options.borderStyle,\n            borderWidth: options.borderWidth,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            cursor: options.cursor,\n            color: <string | types.ThemeColor>options.color,\n            opacity: options.opacity,\n            letterSpacing: options.letterSpacing,\n            gutterIconPath: options.gutterIconPath ? pathOrURIToURI(options.gutterIconPath) : undefined,\n            gutterIconSize: options.gutterIconSize,\n            overviewRulerColor: <string | types.ThemeColor>options.overviewRulerColor,\n            before: options.before ? ThemableDecorationAttachmentRenderOptions.from(options.before) : undefined,\n            after: options.after ? ThemableDecorationAttachmentRenderOptions.from(options.after) : undefined,\n        };\n    }\n}\n\nexport namespace ThemableDecorationAttachmentRenderOptions {\n    export function from(options: theia.ThemableDecorationAttachmentRenderOptions): rpc.ContentDecorationRenderOptions {\n        if (typeof options === 'undefined') {\n            return options;\n        }\n        return {\n            contentText: options.contentText,\n            contentIconPath: options.contentIconPath ? pathOrURIToURI(options.contentIconPath) : undefined,\n            border: options.border,\n            borderColor: <string | types.ThemeColor>options.borderColor,\n            fontStyle: options.fontStyle,\n            fontWeight: options.fontWeight,\n            textDecoration: options.textDecoration,\n            color: <string | types.ThemeColor>options.color,\n            backgroundColor: <string | types.ThemeColor>options.backgroundColor,\n            margin: options.margin,\n            width: options.width,\n            height: options.height,\n        };\n    }\n}\n\nexport function pathOrURIToURI(value: string | URI): URI {\n    if (typeof value === 'undefined') {\n        return value;\n    }\n    if (typeof value === 'string') {\n        return URI.file(value);\n    } else {\n        return value;\n    }\n}\n\nexport function pluginToPluginInfo(plugin: Plugin): rpc.PluginInfo {\n    return {\n        id: plugin.model.id,\n        name: plugin.model.name,\n        displayName: plugin.model.displayName\n    };\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n// copied from https://github.com/microsoft/vscode/blob/1.37.0/src/vs/workbench/api/common/extHostTypes.ts\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n\n/* eslint-disable no-null/no-null */\n\nimport { UUID } from '@theia/core/shared/@phosphor/coreutils';\nimport { illegalArgument } from '../common/errors';\nimport type * as theia from '@theia/plugin';\nimport { URI as CodeURI, UriComponents } from '@theia/core/shared/vscode-uri';\nimport { relative } from '../common/paths-util';\nimport { startsWithIgnoreCase } from '@theia/core/lib/common/strings';\nimport { SymbolKind } from '../common/plugin-api-rpc-model';\nimport { FileSystemProviderErrorCode, markAsFileSystemProviderError } from '@theia/filesystem/lib/common/files';\nimport * as paths from 'path';\nimport { ObjectsTransferrer } from '../common/rpc-protocol';\nimport { es5ClassCompat } from '../common/types';\n\n/**\n * A reviver that takes URI's transferred via JSON.stringify() and makes\n * instances of our local plugin API URI class (below)\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport function reviver(key: string | undefined, value: any): any {\n    const revived = ObjectsTransferrer.reviver(key, value);\n    if (CodeURI.isUri(revived)) {\n        return URI.revive(revived);\n    }\n    return revived;\n}\n\n/**\n * This is an implementation of #theia.Uri based on vscode-uri.\n * This is supposed to fix https://github.com/eclipse-theia/theia/issues/8752\n * We cannot simply upgrade the dependency, because the current version 3.x\n * is not compatible with our current codebase\n */\n@es5ClassCompat\nexport class URI extends CodeURI implements theia.Uri {\n    protected constructor(scheme: string, authority?: string, path?: string, query?: string, fragment?: string, _strict?: boolean);\n    protected constructor(components: UriComponents);\n    protected constructor(schemeOrData: string | UriComponents, authority?: string, path?: string, query?: string, fragment?: string, _strict: boolean = false) {\n        if (typeof schemeOrData === 'string') {\n            super(schemeOrData, authority, path, query, fragment, _strict);\n        } else {\n            super(schemeOrData);\n        }\n    }\n\n    /**\n     * Override to create the correct class.\n     */\n    override with(change: {\n        scheme?: string;\n        authority?: string | null;\n        path?: string | null;\n        query?: string | null;\n        fragment?: string | null;\n    }): URI {\n        return new URI(super.with(change));\n    }\n\n    static joinPath(uri: URI, ...pathSegments: string[]): URI {\n        if (!uri.path) {\n            throw new Error('\\'joinPath\\' called on URI without path');\n        }\n        const newPath = paths.posix.join(uri.path, ...pathSegments);\n        return new URI(uri.scheme, uri.authority, newPath, uri.query, uri.fragment);\n    }\n\n    /**\n     * Override to create the correct class.\n     * @param data\n     */\n    static override revive(data: UriComponents | CodeURI): URI;\n    static override revive(data: UriComponents | CodeURI | null): URI | null;\n    static override revive(data: UriComponents | CodeURI | undefined): URI | undefined\n    static override revive(data: UriComponents | CodeURI | undefined | null): URI | undefined | null {\n        const uri = CodeURI.revive(data);\n        return uri ? new URI(uri) : undefined;\n    }\n\n    static override parse(value: string, _strict?: boolean): URI {\n        return new URI(CodeURI.parse(value, _strict));\n    }\n\n    static override file(path: string): URI {\n        return new URI(CodeURI.file(path));\n    }\n\n    /**\n     * There is quite some magic in to vscode URI class related to\n     * transferring via JSON.stringify(). Making the CodeURI instance\n     * makes sure we transfer this object as a vscode-uri URI.\n     */\n    override toJSON(): UriComponents {\n        return CodeURI.from(this).toJSON();\n    }\n}\n\n@es5ClassCompat\nexport class Disposable {\n    private disposable: undefined | (() => void);\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    static from(...disposables: { dispose(): any }[]): Disposable {\n        return new Disposable(() => {\n            if (disposables) {\n                for (const disposable of disposables) {\n                    if (disposable && typeof disposable.dispose === 'function') {\n                        disposable.dispose();\n                    }\n                }\n            }\n        });\n    }\n\n    constructor(func: () => void) {\n        this.disposable = func;\n    }\n    /**\n     * Dispose this object.\n     */\n    dispose(): void {\n        if (this.disposable) {\n            this.disposable();\n            this.disposable = undefined;\n        }\n    }\n\n    static create(func: () => void): Disposable {\n        return new Disposable(func);\n    }\n}\n\nexport interface AccessibilityInformation {\n    label: string;\n    role?: string;\n}\n\nexport enum StatusBarAlignment {\n    Left = 1,\n    Right = 2\n}\n\nexport enum TextEditorLineNumbersStyle {\n    Off = 0,\n    On = 1,\n    Relative = 2\n}\n\n/**\n * Denotes a column in the editor window.\n * Columns are used to show editors side by side.\n */\nexport enum ViewColumn {\n    Active = -1,\n    Beside = -2,\n    One = 1,\n    Two = 2,\n    Three = 3,\n    Four = 4,\n    Five = 5,\n    Six = 6,\n    Seven = 7,\n    Eight = 8,\n    Nine = 9\n}\n\n/**\n * Represents a color theme kind.\n */\nexport enum ColorThemeKind {\n    Light = 1,\n    Dark = 2,\n    HighContrast = 3\n}\n\nexport enum ExtensionMode {\n    /**\n     * The extension is installed normally (for example, from the marketplace\n     * or VSIX) in the editor.\n     */\n    Production = 1,\n\n    /**\n     * The extension is running from an `--extensionDevelopmentPath` provided\n     * when launching the editor.\n     */\n    Development = 2,\n\n    /**\n     * The extension is running from an `--extensionTestsPath` and\n     * the extension host is running unit tests.\n     */\n    Test = 3,\n}\n\n/**\n * Represents the validation type of the Source Control input.\n */\nexport enum SourceControlInputBoxValidationType {\n\n    /**\n     * Something not allowed by the rules of a language or other means.\n     */\n    Error = 0,\n\n    /**\n     * Something suspicious but allowed.\n     */\n    Warning = 1,\n\n    /**\n     * Something to inform about but not a problem.\n     */\n    Information = 2\n}\n\n@es5ClassCompat\nexport class ColorTheme implements theia.ColorTheme {\n    constructor(public readonly kind: ColorThemeKind) { }\n}\n\n/**\n * Represents sources that can cause `window.onDidChangeEditorSelection`\n */\nexport enum TextEditorSelectionChangeKind {\n    Keyboard = 1,\n\n    Mouse = 2,\n\n    Command = 3\n}\n\nexport namespace TextEditorSelectionChangeKind {\n    export function fromValue(s: string | undefined): TextEditorSelectionChangeKind | undefined {\n        switch (s) {\n            case 'keyboard': return TextEditorSelectionChangeKind.Keyboard;\n            case 'mouse': return TextEditorSelectionChangeKind.Mouse;\n            case 'api': return TextEditorSelectionChangeKind.Command;\n        }\n        return undefined;\n    }\n}\n\nexport enum TextDocumentChangeReason {\n    Undo = 1,\n    Redo = 2,\n}\n\n@es5ClassCompat\nexport class Position {\n    private _line: number;\n    private _character: number;\n    constructor(line: number, char: number) {\n        if (line < 0) {\n            throw new Error('line number cannot be negative');\n        }\n        if (char < 0) {\n            throw new Error('char number cannot be negative');\n        }\n        this._line = line;\n        this._character = char;\n    }\n\n    get line(): number {\n        return this._line;\n    }\n\n    get character(): number {\n        return this._character;\n    }\n\n    isBefore(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character < other._character;\n    }\n\n    isBeforeOrEqual(other: Position): boolean {\n        if (this._line < other._line) {\n            return true;\n        }\n        if (other._line < this._line) {\n            return false;\n        }\n        return this._character <= other._character;\n    }\n\n    isAfter(other: Position): boolean {\n        return !this.isBeforeOrEqual(other);\n    }\n\n    isAfterOrEqual(other: Position): boolean {\n        return !this.isBefore(other);\n    }\n\n    isEqual(other: Position): boolean {\n        return this._line === other._line && this._character === other._character;\n    }\n\n    compareTo(other: Position): number {\n        if (this._line < other._line) {\n            return -1;\n        } else if (this._line > other.line) {\n            return 1;\n        } else {\n            // equal line\n            if (this._character < other._character) {\n                return -1;\n            } else if (this._character > other._character) {\n                return 1;\n            } else {\n                // equal line and character\n                return 0;\n            }\n        }\n    }\n\n    translate(change: { lineDelta?: number; characterDelta?: number; }): Position;\n    translate(lineDelta?: number, characterDelta?: number): Position;\n    translate(lineDeltaOrChange: number | { lineDelta?: number; characterDelta?: number; } | undefined, characterDelta: number = 0): Position {\n\n        if (lineDeltaOrChange === null || characterDelta === null) {\n            throw illegalArgument();\n        }\n\n        let lineDelta: number;\n        if (typeof lineDeltaOrChange === 'undefined') {\n            lineDelta = 0;\n        } else if (typeof lineDeltaOrChange === 'number') {\n            lineDelta = lineDeltaOrChange;\n        } else {\n            lineDelta = typeof lineDeltaOrChange.lineDelta === 'number' ? lineDeltaOrChange.lineDelta : 0;\n            characterDelta = typeof lineDeltaOrChange.characterDelta === 'number' ? lineDeltaOrChange.characterDelta : 0;\n        }\n\n        if (lineDelta === 0 && characterDelta === 0) {\n            return this;\n        }\n        return new Position(this.line + lineDelta, this.character + characterDelta);\n    }\n\n    with(change: { line?: number; character?: number; }): Position;\n    with(line?: number, character?: number): Position;\n    with(lineOrChange: number | { line?: number; character?: number; } | undefined, character: number = this.character): Position {\n\n        if (lineOrChange === null || character === null) {\n            throw illegalArgument();\n        }\n\n        let line: number;\n        if (typeof lineOrChange === 'undefined') {\n            line = this.line;\n\n        } else if (typeof lineOrChange === 'number') {\n            line = lineOrChange;\n\n        } else {\n            line = typeof lineOrChange.line === 'number' ? lineOrChange.line : this.line;\n            character = typeof lineOrChange.character === 'number' ? lineOrChange.character : this.character;\n        }\n\n        if (line === this.line && character === this.character) {\n            return this;\n        }\n        return new Position(line, character);\n    }\n\n    static Min(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isBefore(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static Max(...positions: Position[]): Position {\n        let result = positions.pop();\n        for (const p of positions) {\n            if (p.isAfter(result!)) {\n                result = p;\n            }\n        }\n        return result!;\n    }\n\n    static isPosition(other: {}): other is Position {\n        if (!other) {\n            return false;\n        }\n        if (other instanceof Position) {\n            return true;\n        }\n        const { line, character } = <Position>other;\n        if (typeof line === 'number' && typeof character === 'number') {\n            return true;\n        }\n        return false;\n    }\n\n    toJSON(): unknown {\n        return { line: this.line, character: this.character };\n    }\n}\n\n@es5ClassCompat\nexport class Range {\n    protected _start: Position;\n    protected _end: Position;\n\n    constructor(start: Position, end: Position);\n    constructor(startLine: number, startColumn: number, endLine: number, endColumn: number);\n    constructor(startLineOrStart: number | Position, startColumnOrEnd: number | Position, endLine?: number, endColumn?: number) {\n        let start: Position | undefined = undefined;\n        let end: Position | undefined = undefined;\n\n        if (typeof startLineOrStart === 'number' && typeof startColumnOrEnd === 'number' && typeof endLine === 'number' && typeof endColumn === 'number') {\n            start = new Position(startLineOrStart, startColumnOrEnd);\n            end = new Position(endLine, endColumn);\n        } else if (startLineOrStart instanceof Position && startColumnOrEnd instanceof Position) {\n            start = startLineOrStart;\n            end = startColumnOrEnd;\n        }\n\n        if (!start || !end) {\n            throw new Error('Invalid arguments');\n        }\n\n        if (start.isBefore(end)) {\n            this._start = start;\n            this._end = end;\n        } else {\n            this._start = end;\n            this._end = start;\n        }\n    }\n\n    get start(): Position {\n        return this._start;\n    }\n\n    get end(): Position {\n        return this._end;\n    }\n\n    contains(positionOrRange: Position | Range): boolean {\n        if (positionOrRange instanceof Range) {\n            return this.contains(positionOrRange._start)\n                && this.contains(positionOrRange._end);\n\n        } else if (positionOrRange instanceof Position) {\n            if (positionOrRange.isBefore(this._start)) {\n                return false;\n            }\n            if (this._end.isBefore(positionOrRange)) {\n                return false;\n            }\n            return true;\n        }\n        return false;\n    }\n\n    isEqual(other: Range): boolean {\n        return this._start.isEqual(other._start) && this._end.isEqual(other._end);\n    }\n\n    intersection(other: Range): Range | undefined {\n        const start = Position.Max(other.start, this._start);\n        const end = Position.Min(other.end, this._end);\n        if (start.isAfter(end)) {\n            // this happens when there is no overlap:\n            // |-----|\n            //          |----|\n            return undefined;\n        }\n        return new Range(start, end);\n    }\n\n    union(other: Range): Range {\n        if (this.contains(other)) {\n            return this;\n        } else if (other.contains(this)) {\n            return other;\n        }\n        const start = Position.Min(other.start, this._start);\n        const end = Position.Max(other.end, this.end);\n        return new Range(start, end);\n    }\n\n    get isEmpty(): boolean {\n        return this._start.isEqual(this._end);\n    }\n\n    get isSingleLine(): boolean {\n        return this._start.line === this._end.line;\n    }\n\n    with(change: { start?: Position, end?: Position }): Range;\n    with(start?: Position, end?: Position): Range;\n    with(startOrChange: Position | { start?: Position, end?: Position } | undefined, end: Position = this.end): Range {\n\n        if (startOrChange === null || end === null) {\n            throw illegalArgument();\n        }\n\n        let start: Position;\n        if (!startOrChange) {\n            start = this.start;\n\n        } else if (Position.isPosition(startOrChange)) {\n            start = startOrChange;\n\n        } else {\n            start = startOrChange.start || this.start;\n            end = startOrChange.end || this.end;\n        }\n\n        if (start.isEqual(this._start) && end.isEqual(this.end)) {\n            return this;\n        }\n        return new Range(start, end);\n    }\n\n    static isRange(thing: unknown): thing is theia.Range {\n        if (thing instanceof Range) {\n            return true;\n        }\n        const range = thing as theia.Range;\n        return !!thing && typeof thing === 'object'\n            && Position.isPosition(range.start)\n            && Position.isPosition(range.end);\n    }\n\n    toJSON(): unknown {\n        return [this.start, this.end];\n    }\n}\n\n@es5ClassCompat\nexport class Selection extends Range {\n    private _anchor: Position;\n    private _active: Position;\n    constructor(anchor: Position, active: Position);\n    constructor(anchorLine: number, anchorColumn: number, activeLine: number, activeColumn: number);\n    constructor(anchorLineOrAnchor: number | Position, anchorColumnOrActive: number | Position, activeLine?: number, activeColumn?: number) {\n        let anchor: Position | undefined = undefined;\n        let active: Position | undefined = undefined;\n\n        if (typeof anchorLineOrAnchor === 'number' && typeof anchorColumnOrActive === 'number' && typeof activeLine === 'number' && typeof activeColumn === 'number') {\n            anchor = new Position(anchorLineOrAnchor, anchorColumnOrActive);\n            active = new Position(activeLine, activeColumn);\n        } else if (anchorLineOrAnchor instanceof Position && anchorColumnOrActive instanceof Position) {\n            anchor = anchorLineOrAnchor;\n            active = anchorColumnOrActive;\n        }\n\n        if (!anchor || !active) {\n            throw new Error('Invalid arguments');\n        }\n\n        super(anchor, active);\n\n        this._anchor = anchor;\n        this._active = active;\n    }\n\n    get active(): Position {\n        return this._active;\n    }\n\n    get anchor(): Position {\n        return this._anchor;\n    }\n\n    get isReversed(): boolean {\n        return this._anchor === this._end;\n    }\n}\n\nexport namespace TextDocumentShowOptions {\n    /**\n     * @param candidate\n     * @returns `true` if `candidate` is an instance of options that includes a selection.\n     * This function should be used to determine whether TextDocumentOptions passed into commands by plugins\n     * need to be translated to TextDocumentShowOptions in the style of the RPC model. Selection is the only field that requires translation.\n     */\n    export function isTextDocumentShowOptions(candidate: unknown): candidate is theia.TextDocumentShowOptions {\n        if (!candidate) {\n            return false;\n        }\n        const options = candidate as theia.TextDocumentShowOptions;\n        return Range.isRange(options.selection);\n    }\n}\n\nexport enum EndOfLine {\n    LF = 1,\n    CRLF = 2\n}\n\nexport enum EnvironmentVariableMutatorType {\n    Replace = 1,\n    Append = 2,\n    Prepend = 3\n}\n\n@es5ClassCompat\nexport class SnippetString {\n\n    static isSnippetString(thing: {}): thing is SnippetString {\n        if (thing instanceof SnippetString) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<SnippetString>thing).value === 'string';\n    }\n\n    private static _escape(value: string): string {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n\n    private _tabstop: number = 1;\n\n    value: string;\n\n    constructor(value?: string) {\n        this.value = value || '';\n    }\n\n    appendText(string: string): SnippetString {\n        this.value += SnippetString._escape(string);\n        return this;\n    }\n\n    appendTabstop(number: number = this._tabstop++): SnippetString {\n        this.value += '$';\n        this.value += number;\n        return this;\n    }\n\n    appendPlaceholder(value: string | ((snippet: SnippetString) => void), number: number = this._tabstop++): SnippetString {\n\n        if (typeof value === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            value(nested);\n            this._tabstop = nested._tabstop;\n            value = nested.value;\n        } else {\n            value = SnippetString._escape(value);\n        }\n\n        this.value += '${';\n        this.value += number;\n        this.value += ':';\n        this.value += value;\n        this.value += '}';\n\n        return this;\n    }\n\n    appendChoice(values: string[], number: number = this._tabstop++): SnippetString {\n        const value = values.map(s => s.replace(/\\$|}|\\\\|,/g, '\\\\$&')).join(',');\n        this.value += `\\$\\{${number}|${value}|\\}`;\n        return this;\n    }\n\n    appendVariable(name: string, defaultValue?: string | ((snippet: SnippetString) => void)): SnippetString {\n\n        if (typeof defaultValue === 'function') {\n            const nested = new SnippetString();\n            nested._tabstop = this._tabstop;\n            defaultValue(nested);\n            this._tabstop = nested._tabstop;\n            defaultValue = nested.value;\n\n        } else if (typeof defaultValue === 'string') {\n            defaultValue = defaultValue.replace(/\\$|}/g, '\\\\$&');\n        }\n\n        this.value += '${';\n        this.value += name;\n        if (defaultValue) {\n            this.value += ':';\n            this.value += defaultValue;\n        }\n        this.value += '}';\n\n        return this;\n    }\n}\n\n@es5ClassCompat\nexport class ThemeColor {\n    constructor(public id: string) {\n    }\n}\n\n@es5ClassCompat\nexport class ThemeIcon {\n\n    static readonly File: ThemeIcon = new ThemeIcon('file');\n\n    static readonly Folder: ThemeIcon = new ThemeIcon('folder');\n\n    private constructor(public id: string, public color?: ThemeColor) {\n    }\n\n}\n\nexport namespace ThemeIcon {\n    export function is(item: unknown): item is ThemeIcon {\n        return typeof item === 'object' && !!item && 'id' in item;\n    }\n}\n\nexport enum TextEditorRevealType {\n    Default = 0,\n    InCenter = 1,\n    InCenterIfOutsideViewport = 2,\n    AtTop = 3\n}\n\n/**\n * These values match very carefully the values of `TrackedRangeStickiness`\n */\nexport enum DecorationRangeBehavior {\n    /**\n     * TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges\n     */\n    OpenOpen = 0,\n    /**\n     * TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges\n     */\n    ClosedClosed = 1,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingBefore\n     */\n    OpenClosed = 2,\n    /**\n     * TrackedRangeStickiness.GrowsOnlyWhenTypingAfter\n     */\n    ClosedOpen = 3\n}\n\n/**\n * Vertical Lane in the overview ruler of the editor.\n */\nexport enum OverviewRulerLane {\n    Left = 1,\n    Center = 2,\n    Right = 4,\n    Full = 7\n}\n\nexport enum ConfigurationTarget {\n    Global = 1,\n    Workspace,\n    WorkspaceFolder,\n    Default,\n    Memory\n}\n\n@es5ClassCompat\nexport class RelativePattern {\n\n    base: string;\n\n    constructor(base: theia.WorkspaceFolder | string, public pattern: string) {\n        if (typeof base !== 'string') {\n            if (!base || !URI.isUri(base.uri)) {\n                throw illegalArgument('base');\n            }\n        }\n\n        if (typeof pattern !== 'string') {\n            throw illegalArgument('pattern');\n        }\n\n        this.base = typeof base === 'string' ? base : base.uri.fsPath;\n    }\n\n    pathToRelative(from: string, to: string): string {\n        return relative(from, to);\n    }\n}\n\nexport enum IndentAction {\n    None = 0,\n    Indent = 1,\n    IndentOutdent = 2,\n    Outdent = 3\n}\n\n@es5ClassCompat\nexport class TextEdit {\n\n    protected _range: Range;\n    protected _newText: string;\n    protected _newEol: EndOfLine;\n\n    get range(): Range {\n        return this._range;\n    }\n\n    set range(value: Range) {\n        if (value && !Range.isRange(value)) {\n            throw illegalArgument('range');\n        }\n        this._range = value;\n    }\n\n    get newText(): string {\n        return this._newText || '';\n    }\n\n    set newText(value: string) {\n        if (value && typeof value !== 'string') {\n            throw illegalArgument('newText');\n        }\n        this._newText = value;\n    }\n\n    get newEol(): EndOfLine {\n        return this._newEol;\n    }\n\n    set newEol(value: EndOfLine) {\n        if (value && typeof value !== 'number') {\n            throw illegalArgument('newEol');\n        }\n        this._newEol = value;\n    }\n\n    constructor(range: Range | undefined, newText: string | undefined) {\n        this.range = range!;\n        this.newText = newText!;\n    }\n\n    static isTextEdit(thing: {}): thing is TextEdit {\n        if (thing instanceof TextEdit) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<TextEdit>thing).range)\n            && typeof (<TextEdit>thing).newText === 'string';\n    }\n\n    static replace(range: Range, newText: string): TextEdit {\n        return new TextEdit(range, newText);\n    }\n\n    static insert(position: Position, newText: string): TextEdit {\n        return TextEdit.replace(new Range(position, position), newText);\n    }\n\n    static delete(range: Range): TextEdit {\n        return TextEdit.replace(range, '');\n    }\n\n    static setEndOfLine(eol: EndOfLine): TextEdit {\n        const ret = new TextEdit(undefined, undefined);\n        ret.newEol = eol;\n        return ret;\n    }\n}\n\nexport enum CompletionTriggerKind {\n    Invoke = 0,\n    TriggerCharacter = 1,\n    TriggerForIncompleteCompletions = 2\n}\n\nexport enum CompletionItemKind {\n    Text = 0,\n    Method = 1,\n    Function = 2,\n    Constructor = 3,\n    Field = 4,\n    Variable = 5,\n    Class = 6,\n    Interface = 7,\n    Module = 8,\n    Property = 9,\n    Unit = 10,\n    Value = 11,\n    Enum = 12,\n    Keyword = 13,\n    Snippet = 14,\n    Color = 15, // eslint-disable-line @typescript-eslint/no-shadow\n    File = 16,\n    Reference = 17,\n    Folder = 18,\n    EnumMember = 19,\n    Constant = 20,\n    Struct = 21,\n    Event = 22,\n    Operator = 23,\n    TypeParameter = 24,\n    User = 25,\n    Issue = 26\n}\n\n@es5ClassCompat\nexport class CompletionItem implements theia.CompletionItem {\n\n    label: string;\n    kind?: CompletionItemKind;\n    tags?: CompletionItemTag[];\n    detail: string;\n    documentation: string | theia.MarkdownString;\n    sortText: string;\n    filterText: string;\n    preselect: boolean;\n    insertText: string | SnippetString;\n    range: Range;\n    textEdit: TextEdit;\n    additionalTextEdits: TextEdit[];\n    command: theia.Command;\n\n    constructor(label: string, kind?: CompletionItemKind) {\n        this.label = label;\n        this.kind = kind;\n    }\n}\n\n@es5ClassCompat\nexport class CompletionList {\n\n    isIncomplete?: boolean;\n\n    items: theia.CompletionItem[];\n\n    constructor(items: theia.CompletionItem[] = [], isIncomplete: boolean = false) {\n        this.items = items;\n        this.isIncomplete = isIncomplete;\n    }\n}\n\nexport enum DiagnosticSeverity {\n    Error = 0,\n    Warning = 1,\n    Information = 2,\n    Hint = 3\n}\n\nexport enum DebugConsoleMode {\n    Separate = 0,\n    MergeWithParent = 1\n}\n\n@es5ClassCompat\nexport class Location {\n    uri: URI;\n    range: Range;\n\n    constructor(uri: URI, rangeOrPosition: Range | Position | undefined) {\n        this.uri = uri;\n        if (rangeOrPosition instanceof Range) {\n            this.range = rangeOrPosition;\n        } else if (rangeOrPosition instanceof Position) {\n            this.range = new Range(rangeOrPosition, rangeOrPosition);\n        }\n    }\n\n    static isLocation(thing: {}): thing is theia.Location {\n        if (thing instanceof Location) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return Range.isRange((<Location>thing).range)\n            && URI.isUri((<Location>thing).uri);\n    }\n}\n\n@es5ClassCompat\nexport class DiagnosticRelatedInformation {\n    location: Location;\n    message: string;\n\n    constructor(location: Location, message: string) {\n        this.location = location;\n        this.message = message;\n    }\n}\n\nexport enum DiagnosticTag {\n    Unnecessary = 1,\n    Deprecated = 2,\n}\n\nexport enum CompletionItemTag {\n    Deprecated = 1,\n}\n\n@es5ClassCompat\nexport class Diagnostic {\n    range: Range;\n    message: string;\n    severity: DiagnosticSeverity;\n    source?: string;\n    code?: string | number;\n    relatedInformation?: DiagnosticRelatedInformation[];\n    tags?: DiagnosticTag[];\n\n    constructor(range: Range, message: string, severity: DiagnosticSeverity = DiagnosticSeverity.Error) {\n        this.range = range;\n        this.message = message;\n        this.severity = severity;\n    }\n}\n\nexport enum MarkerSeverity {\n    Hint = 1,\n    Info = 2,\n    Warning = 4,\n    Error = 8,\n}\n\nexport enum MarkerTag {\n    Unnecessary = 1,\n    Deprecated = 2,\n}\n\n@es5ClassCompat\nexport class ParameterInformation {\n    label: string | [number, number];\n    documentation?: string | theia.MarkdownString;\n\n    constructor(label: string | [number, number], documentation?: string | theia.MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n    }\n}\n\n@es5ClassCompat\nexport class SignatureInformation {\n    label: string;\n    documentation?: string | theia.MarkdownString;\n    parameters: ParameterInformation[];\n    activeParameter?: number;\n\n    constructor(label: string, documentation?: string | theia.MarkdownString) {\n        this.label = label;\n        this.documentation = documentation;\n        this.parameters = [];\n    }\n}\n\nexport enum SignatureHelpTriggerKind {\n    Invoke = 1,\n    TriggerCharacter = 2,\n    ContentChange = 3,\n}\n\n@es5ClassCompat\nexport class SignatureHelp {\n    signatures: SignatureInformation[];\n    activeSignature: number;\n    activeParameter: number;\n\n    constructor() {\n        this.signatures = [];\n    }\n}\n\n@es5ClassCompat\nexport class Hover {\n\n    public contents: theia.MarkdownString[] | theia.MarkedString[];\n    public range?: Range;\n\n    constructor(\n        contents: theia.MarkdownString | theia.MarkedString | theia.MarkdownString[] | theia.MarkedString[],\n        range?: Range\n    ) {\n        if (!contents) {\n            illegalArgument('contents must be defined');\n        }\n        if (Array.isArray(contents)) {\n            this.contents = <theia.MarkdownString[] | theia.MarkedString[]>contents;\n        } else {\n            this.contents = [contents];\n        }\n        this.range = range;\n    }\n}\n\n@es5ClassCompat\nexport class EvaluatableExpression {\n\n    public range: Range;\n    public expression?: string;\n\n    constructor(\n        range: Range,\n        expression?: string\n    ) {\n        if (!range) {\n            illegalArgument('range must be defined');\n        }\n        this.range = range;\n        this.expression = expression;\n    }\n}\n\nexport enum DocumentHighlightKind {\n    Text = 0,\n    Read = 1,\n    Write = 2\n}\n\n@es5ClassCompat\nexport class DocumentHighlight {\n\n    public range: Range;\n    public kind?: DocumentHighlightKind;\n\n    constructor(\n        range: Range,\n        kind?: DocumentHighlightKind\n    ) {\n        this.range = range;\n        this.kind = kind;\n    }\n}\n\nexport type Definition = Location | Location[];\n\n@es5ClassCompat\nexport class DocumentLink {\n\n    range: Range;\n\n    target?: URI;\n\n    tooltip?: string;\n\n    constructor(range: Range, target: URI | undefined) {\n        if (target && !(URI.isUri(target))) {\n            throw illegalArgument('target');\n        }\n        if (!Range.isRange(range) || range.isEmpty) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.target = target;\n    }\n}\n\n@es5ClassCompat\nexport class CodeLens {\n\n    range: Range;\n\n    command?: theia.Command;\n\n    get isResolved(): boolean {\n        return !!this.command;\n    }\n\n    constructor(range: Range, command?: theia.Command) {\n        this.range = range;\n        this.command = command;\n    }\n}\n\nexport enum CodeActionTrigger {\n    Automatic = 1,\n    Manual = 2,\n}\n\n/**\n * The reason why code actions were requested.\n */\nexport enum CodeActionTriggerKind {\n    /**\n     * Code actions were explicitly requested by the user or by an extension.\n     */\n    Invoke = 1,\n\n    /**\n     * Code actions were requested automatically.\n     *\n     * This typically happens when current selection in a file changes, but can\n     * also be triggered when file content changes.\n     */\n    Automatic = 2,\n}\n\n@es5ClassCompat\nexport class CodeActionKind {\n    private static readonly sep = '.';\n\n    public static readonly Empty = new CodeActionKind('');\n    public static readonly QuickFix = CodeActionKind.Empty.append('quickfix');\n    public static readonly Refactor = CodeActionKind.Empty.append('refactor');\n    public static readonly RefactorExtract = CodeActionKind.Refactor.append('extract');\n    public static readonly RefactorInline = CodeActionKind.Refactor.append('inline');\n    public static readonly RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\n    public static readonly Source = CodeActionKind.Empty.append('source');\n    public static readonly SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\n    public static readonly SourceFixAll = CodeActionKind.Source.append('fixAll');\n\n    constructor(\n        public readonly value: string\n    ) { }\n\n    public append(parts: string): CodeActionKind {\n        return new CodeActionKind(this.value ? this.value + CodeActionKind.sep + parts : parts);\n    }\n\n    public contains(other: CodeActionKind): boolean {\n        return this.value === other.value || startsWithIgnoreCase(other.value, this.value + CodeActionKind.sep);\n    }\n\n    public intersects(other: CodeActionKind): boolean {\n        return this.contains(other) || other.contains(this);\n    }\n}\n\nexport enum TextDocumentSaveReason {\n    Manual = 1,\n    AfterDelay = 2,\n    FocusOut = 3\n}\n\n@es5ClassCompat\nexport class CodeAction {\n    title: string;\n\n    command?: theia.Command;\n\n    edit?: WorkspaceEdit;\n\n    diagnostics?: Diagnostic[];\n\n    kind?: CodeActionKind;\n\n    disabled?: { reason: string };\n\n    isPreferred?: boolean;\n\n    constructor(title: string, kind?: CodeActionKind) {\n        this.title = title;\n        this.kind = kind;\n    }\n}\n\nexport interface FileOperationOptions {\n    overwrite?: boolean;\n    ignoreIfExists?: boolean;\n    ignoreIfNotExists?: boolean;\n    recursive?: boolean;\n}\n\n// copied from https://github.com/microsoft/vscode/blob/b165e20587dd0797f37251515bc9e4dbe513ede8/src/vs/editor/common/modes.ts\nexport interface WorkspaceEditMetadata {\n    needsConfirmation: boolean;\n    label: string;\n    description?: string;\n    iconPath?: {\n        id: string;\n    } | {\n        light: URI;\n        dark: URI;\n    };\n}\n\nexport interface FileOperation {\n    _type: 1;\n    from: URI | undefined;\n    to: URI | undefined;\n    options?: FileOperationOptions;\n    metadata?: WorkspaceEditMetadata;\n}\n\nexport interface FileTextEdit {\n    _type: 2;\n    uri: URI;\n    edit: TextEdit;\n    metadata?: WorkspaceEditMetadata;\n}\n\n@es5ClassCompat\nexport class WorkspaceEdit implements theia.WorkspaceEdit {\n\n    private _edits = new Array<FileOperation | FileTextEdit | undefined>();\n\n    renameFile(from: theia.Uri, to: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from, to, options, metadata });\n    }\n\n    createFile(uri: theia.Uri, options?: { overwrite?: boolean, ignoreIfExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from: undefined, to: uri, options, metadata });\n    }\n\n    deleteFile(uri: theia.Uri, options?: { recursive?: boolean, ignoreIfNotExists?: boolean }, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 1, from: uri, to: undefined, options, metadata });\n    }\n\n    replace(uri: URI, range: Range, newText: string, metadata?: WorkspaceEditMetadata): void {\n        this._edits.push({ _type: 2, uri, edit: new TextEdit(range, newText), metadata });\n    }\n\n    insert(resource: URI, position: Position, newText: string, metadata?: WorkspaceEditMetadata): void {\n        this.replace(resource, new Range(position, position), newText, metadata);\n    }\n\n    delete(resource: URI, range: Range, metadata?: WorkspaceEditMetadata): void {\n        this.replace(resource, range, '', metadata);\n    }\n\n    has(uri: URI): boolean {\n        for (const edit of this._edits) {\n            if (edit && edit._type === 2 && edit.uri.toString() === uri.toString()) {\n                return true;\n            }\n        }\n        return false;\n    }\n\n    set(uri: URI, edits: TextEdit[]): void {\n        if (!edits) {\n            // remove all text edits for `uri`\n            for (let i = 0; i < this._edits.length; i++) {\n                const element = this._edits[i];\n                if (element && element._type === 2 && element.uri.toString() === uri.toString()) {\n                    this._edits[i] = undefined;\n                }\n            }\n            this._edits = this._edits.filter(e => !!e);\n        } else {\n            // append edit to the end\n            for (const edit of edits) {\n                if (edit) {\n                    this._edits.push({ _type: 2, uri, edit });\n                }\n            }\n        }\n    }\n\n    get(uri: URI): TextEdit[] {\n        const res: TextEdit[] = [];\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2 && candidate.uri.toString() === uri.toString()) {\n                res.push(candidate.edit);\n            }\n        }\n        if (res.length === 0) {\n            return undefined!;\n        }\n        return res;\n    }\n\n    entries(): [URI, TextEdit[]][] {\n        const textEdits = new Map<string, [URI, TextEdit[]]>();\n        for (const candidate of this._edits) {\n            if (candidate && candidate._type === 2) {\n                let textEdit = textEdits.get(candidate.uri.toString());\n                if (!textEdit) {\n                    textEdit = [candidate.uri, []];\n                    textEdits.set(candidate.uri.toString(), textEdit);\n                }\n                textEdit[1].push(candidate.edit);\n            }\n        }\n        const result: [URI, TextEdit[]][] = [];\n        textEdits.forEach(v => result.push(v));\n        return result;\n    }\n\n    _allEntries(): ([URI, TextEdit[], WorkspaceEditMetadata] | [URI, URI, FileOperationOptions, WorkspaceEditMetadata])[] {\n        const res: ([URI, TextEdit[], WorkspaceEditMetadata] | [URI, URI, FileOperationOptions, WorkspaceEditMetadata])[] = [];\n        for (const edit of this._edits) {\n            if (!edit) {\n                continue;\n            }\n            if (edit._type === 1) {\n                res.push([edit.from!, edit.to!, edit.options!, edit.metadata!]);\n            } else {\n                res.push([edit.uri, [edit.edit], edit.metadata!]);\n            }\n        }\n        return res;\n    }\n\n    get size(): number {\n        return this.entries().length;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return this.entries();\n    }\n}\n\n@es5ClassCompat\nexport class TreeItem {\n\n    label?: string | theia.TreeItemLabel;\n\n    id?: string;\n\n    iconPath?: string | URI | { light: string | URI; dark: string | URI } | ThemeIcon;\n\n    resourceUri?: URI;\n\n    tooltip?: string | undefined;\n\n    command?: theia.Command;\n\n    contextValue?: string;\n\n    constructor(label: string | theia.TreeItemLabel, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(resourceUri: URI, collapsibleState?: theia.TreeItemCollapsibleState)\n    constructor(arg1: string | theia.TreeItemLabel | URI, public collapsibleState: theia.TreeItemCollapsibleState = TreeItemCollapsibleState.None) {\n        if (arg1 instanceof URI) {\n            this.resourceUri = arg1;\n        } else {\n            this.label = arg1;\n        }\n    }\n}\n\nexport enum TreeItemCollapsibleState {\n    None = 0,\n    Collapsed = 1,\n    Expanded = 2\n}\n\nexport enum SymbolTag {\n    Deprecated = 1\n}\n\n@es5ClassCompat\nexport class SymbolInformation {\n\n    static validate(candidate: SymbolInformation): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n    }\n\n    name: string;\n    location: Location;\n    kind: SymbolKind;\n    tags?: SymbolTag[];\n    containerName: undefined | string;\n    constructor(name: string, kind: SymbolKind, containerName: string, location: Location);\n    constructor(name: string, kind: SymbolKind, range: Range, uri?: URI, containerName?: string);\n    constructor(name: string, kind: SymbolKind, rangeOrContainer: string | Range, locationOrUri?: Location | URI, containerName?: string) {\n        this.name = name;\n        this.kind = kind;\n        this.containerName = containerName;\n\n        if (typeof rangeOrContainer === 'string') {\n            this.containerName = rangeOrContainer;\n        }\n\n        if (locationOrUri instanceof Location) {\n            this.location = locationOrUri;\n        } else if (rangeOrContainer instanceof Range) {\n            this.location = new Location(locationOrUri!, rangeOrContainer);\n        }\n\n        SymbolInformation.validate(this);\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    toJSON(): any {\n        return {\n            name: this.name,\n            kind: SymbolKind[this.kind],\n            location: this.location,\n            containerName: this.containerName\n        };\n    }\n}\n\n@es5ClassCompat\nexport class DocumentSymbol {\n\n    static validate(candidate: DocumentSymbol): void {\n        if (!candidate.name) {\n            throw new Error('Should provide a name inside candidate field');\n        }\n        if (!candidate.range.contains(candidate.selectionRange)) {\n            throw new Error('selectionRange must be contained in fullRange');\n        }\n        if (candidate.children) {\n            candidate.children.forEach(DocumentSymbol.validate);\n        }\n    }\n\n    name: string;\n    detail: string;\n    kind: SymbolKind;\n    tags?: SymbolTag[];\n    range: Range;\n    selectionRange: Range;\n    children: DocumentSymbol[];\n\n    constructor(name: string, detail: string, kind: SymbolKind, range: Range, selectionRange: Range) {\n        this.name = name;\n        this.detail = detail;\n        this.kind = kind;\n        this.range = range;\n        this.selectionRange = selectionRange;\n        this.children = [];\n\n        DocumentSymbol.validate(this);\n    }\n}\n\nexport enum CommentThreadCollapsibleState {\n    Collapsed = 0,\n    Expanded = 1\n}\n\n@es5ClassCompat\nexport class QuickInputButtons {\n    static readonly Back: theia.QuickInputButton = {\n        iconPath: {\n            id: 'Back',\n            dark: '',\n            light: ''\n        },\n        tooltip: 'Back'\n    };\n}\n\n@es5ClassCompat\nexport class FileDecoration {\n\n    static validate(d: FileDecoration): void {\n        if (d.badge && d.badge.length !== 1 && d.badge.length !== 2) {\n            throw new Error('The \\'badge\\'-property must be undefined or a short character');\n        }\n        if (!d.color && !d.badge && !d.tooltip) {\n            throw new Error('The decoration is empty');\n        }\n    }\n\n    badge?: string;\n    tooltip?: string;\n    color?: theia.ThemeColor;\n    priority?: number;\n    propagate?: boolean;\n\n    constructor(badge?: string, tooltip?: string, color?: ThemeColor) {\n        this.badge = badge;\n        this.tooltip = tooltip;\n        this.color = color;\n    }\n}\n\nexport enum CommentMode {\n    Editing = 0,\n    Preview = 1\n}\n\n// #region file api\n\nexport enum FileChangeType {\n    Changed = 1,\n    Created = 2,\n    Deleted = 3,\n}\n\n@es5ClassCompat\nexport class FileSystemError extends Error {\n\n    static FileExists(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileExists, FileSystemError.FileExists);\n    }\n    static FileNotFound(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileNotFound, FileSystemError.FileNotFound);\n    }\n    static FileNotADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileNotADirectory, FileSystemError.FileNotADirectory);\n    }\n    static FileIsADirectory(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.FileIsADirectory, FileSystemError.FileIsADirectory);\n    }\n    static NoPermissions(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.NoPermissions, FileSystemError.NoPermissions);\n    }\n    static Unavailable(messageOrUri?: string | URI): FileSystemError {\n        return new FileSystemError(messageOrUri, FileSystemProviderErrorCode.Unavailable, FileSystemError.Unavailable);\n    }\n\n    readonly code: string;\n\n    constructor(uriOrMessage?: string | URI, code: FileSystemProviderErrorCode = FileSystemProviderErrorCode.Unknown, terminator?: Function) {\n        super(URI.isUri(uriOrMessage) ? uriOrMessage.toString(true) : uriOrMessage);\n\n        this.code = terminator?.name ?? 'Unknown';\n\n        // mark the error as file system provider error so that\n        // we can extract the error code on the receiving side\n        markAsFileSystemProviderError(this, code);\n\n        // workaround when extending builtin objects and when compiling to ES5, see:\n        // https://github.com/Microsoft/TypeScript-wiki/blob/master/Breaking-Changes.md#extending-built-ins-like-error-array-and-map-may-no-longer-work\n        if (typeof Object.setPrototypeOf === 'function') {\n            Object.setPrototypeOf(this, FileSystemError.prototype);\n        }\n\n        if (typeof Error.captureStackTrace === 'function' && typeof terminator === 'function') {\n            // nice stack traces\n            Error.captureStackTrace(this, terminator);\n        }\n    }\n}\n\n// #endregion\n\nexport enum FileType {\n    Unknown = 0,\n    File = 1,\n    Directory = 2,\n    SymbolicLink = 64\n}\n\nexport interface FileStat {\n    readonly type: FileType;\n    readonly ctime: number;\n    readonly mtime: number;\n    readonly size: number;\n}\n\n@es5ClassCompat\nexport class ProgressOptions {\n    /**\n     * The location at which progress should show.\n     */\n    location: ProgressLocation;\n    /**\n     * A human-readable string which will be used to describe the\n     * operation.\n     */\n    title?: string;\n    /**\n     * Controls if a cancel button should show to allow the user to\n     * cancel the long running operation.  Note that currently only\n     * `ProgressLocation.Notification` is supporting to show a cancel\n     * button.\n     */\n    cancellable?: boolean;\n    constructor(location: ProgressLocation, title?: string, cancellable?: boolean) {\n        this.location = location;\n    }\n}\n\n@es5ClassCompat\nexport class Progress<T> {\n    /**\n     * Report a progress update.\n     * @param value A progress item, like a message and/or an\n     * report on how much work finished\n     */\n    report(value: T): void {\n    }\n}\nexport enum ProgressLocation {\n    /**\n     * Show progress for the source control viewlet, as overlay for the icon and as progress bar\n     * inside the viewlet (when visible). Neither supports cancellation nor discrete progress.\n     */\n    SourceControl = 1,\n    /**\n     * Show progress in the status bar of the editor. Neither supports cancellation nor discrete progress.\n     */\n    Window = 10,\n    /**\n     * Show progress as notification with an optional cancel button. Supports to show infinite and discrete progress.\n     */\n    Notification = 15\n}\n\n@es5ClassCompat\nexport class ProcessExecution {\n    private executionProcess: string;\n    private arguments: string[];\n    private executionOptions: theia.ProcessExecutionOptions | undefined;\n\n    constructor(process: string, options?: theia.ProcessExecutionOptions);\n    constructor(process: string, args: string[], options?: theia.ProcessExecutionOptions);\n    constructor(process: string, varg1?: string[] | theia.ProcessExecutionOptions, varg2?: theia.ProcessExecutionOptions) {\n        if (typeof process !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = process;\n        if (varg1 !== undefined) {\n            if (Array.isArray(varg1)) {\n                this.arguments = varg1;\n                this.executionOptions = varg2;\n            } else {\n                this.executionOptions = varg1;\n            }\n        }\n        if (this.arguments === undefined) {\n            this.arguments = [];\n        }\n    }\n\n    get process(): string {\n        return this.executionProcess;\n    }\n\n    set process(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('process');\n        }\n        this.executionProcess = value;\n    }\n\n    get args(): string[] {\n        return this.arguments;\n    }\n\n    set args(value: string[]) {\n        if (!Array.isArray(value)) {\n            value = [];\n        }\n        this.arguments = value;\n    }\n\n    get options(): theia.ProcessExecutionOptions | undefined {\n        return this.executionOptions;\n    }\n\n    set options(value: theia.ProcessExecutionOptions | undefined) {\n        this.executionOptions = value;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is ProcessExecution {\n        const candidate = value as ProcessExecution;\n        return candidate && !!candidate.process;\n    }\n}\n\nexport enum QuickPickItemKind {\n    Separator = -1,\n    Default = 0,\n}\n\nexport enum ShellQuoting {\n    Escape = 1,\n    Strong = 2,\n    Weak = 3\n}\n\nexport enum TaskPanelKind {\n    Shared = 1,\n    Dedicated = 2,\n    New = 3\n}\n\nexport enum TaskRevealKind {\n    Always = 1,\n    Silent = 2,\n    Never = 3\n}\n\n@es5ClassCompat\nexport class ShellExecution {\n    private shellCommandLine: string;\n    private shellCommand: string | theia.ShellQuotedString;\n    private arguments: (string | theia.ShellQuotedString)[];\n    private shellOptions: theia.ShellExecutionOptions | undefined;\n\n    constructor(commandLine: string, options?: theia.ShellExecutionOptions);\n    constructor(command: string | theia.ShellQuotedString, args: (string | theia.ShellQuotedString)[], options?: theia.ShellExecutionOptions);\n\n    constructor(arg0: string | theia.ShellQuotedString, arg1?: theia.ShellExecutionOptions | (string | theia.ShellQuotedString)[], arg2?: theia.ShellExecutionOptions) {\n        if (Array.isArray(arg1) || typeof arg1 === 'string') {\n            if (!arg0) {\n                throw illegalArgument('command can\\'t be undefined or null');\n            }\n            if (typeof arg0 !== 'string' && typeof arg0.value !== 'string') {\n                throw illegalArgument('command');\n            }\n            this.shellCommand = arg0;\n            this.arguments = arg1 as (string | theia.ShellQuotedString)[];\n            this.shellOptions = arg2;\n        } else {\n            if (typeof arg0 !== 'string') {\n                throw illegalArgument('commandLine');\n            }\n            this.shellCommandLine = arg0;\n            this.shellOptions = arg1;\n        }\n    }\n\n    get commandLine(): string {\n        return this.shellCommandLine;\n    }\n\n    set commandLine(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('commandLine');\n        }\n        this.shellCommandLine = value;\n    }\n\n    get command(): string | theia.ShellQuotedString {\n        return this.shellCommand;\n    }\n\n    set command(value: string | theia.ShellQuotedString) {\n        if (typeof value !== 'string' && typeof value.value !== 'string') {\n            throw illegalArgument('command');\n        }\n        this.shellCommand = value;\n    }\n\n    get args(): (string | theia.ShellQuotedString)[] {\n        return this.arguments;\n    }\n\n    set args(value: (string | theia.ShellQuotedString)[]) {\n        this.arguments = value || [];\n    }\n\n    get options(): theia.ShellExecutionOptions | undefined {\n        return this.shellOptions;\n    }\n\n    set options(value: theia.ShellExecutionOptions | undefined) {\n        this.shellOptions = value;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is ShellExecution {\n        const candidate = value as ShellExecution;\n        return candidate && (!!candidate.commandLine || !!candidate.command);\n    }\n}\n\n@es5ClassCompat\nexport class CustomExecution {\n    private _callback: (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>;\n    constructor(callback: (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        this._callback = callback;\n    }\n\n    public set callback(value: (resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        this._callback = value;\n    }\n\n    public get callback(): ((resolvedDefinition: theia.TaskDefinition) => Thenable<theia.Pseudoterminal>) {\n        return this._callback;\n    }\n\n    public static is(value: theia.ShellExecution | theia.ProcessExecution | theia.CustomExecution): value is CustomExecution {\n        const candidate = value as CustomExecution;\n        return candidate && (!!candidate._callback);\n    }\n}\n\n@es5ClassCompat\nexport class TaskGroup {\n    private groupId: string;\n\n    public static Clean: TaskGroup = new TaskGroup('clean', 'Clean');\n    public static Build: TaskGroup = new TaskGroup('build', 'Build');\n    public static Rebuild: TaskGroup = new TaskGroup('rebuild', 'Rebuild');\n    public static Test: TaskGroup = new TaskGroup('test', 'Test');\n\n    public static from(value: string): TaskGroup | undefined {\n        switch (value) {\n            case 'clean':\n                return TaskGroup.Clean;\n            case 'build':\n                return TaskGroup.Build;\n            case 'rebuild':\n                return TaskGroup.Rebuild;\n            case 'test':\n                return TaskGroup.Test;\n            default:\n                return undefined;\n        }\n    }\n\n    constructor(id: string, label: string) {\n        if (typeof id !== 'string') {\n            throw illegalArgument('id');\n        }\n        if (typeof label !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.groupId = id;\n    }\n\n    get id(): string {\n        return this.groupId;\n    }\n}\n\nexport enum TaskScope {\n    Global = 1,\n    Workspace = 2\n}\n\n@es5ClassCompat\nexport class Task {\n    private taskDefinition: theia.TaskDefinition;\n    private taskScope: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined;\n    private taskName: string;\n    private taskExecution: ProcessExecution | ShellExecution | CustomExecution | undefined;\n    private taskProblemMatchers: string[];\n    private hasTaskProblemMatchers: boolean;\n    private isTaskBackground: boolean;\n    private taskSource: string;\n    private taskGroup: TaskGroup | undefined;\n    private taskPresentationOptions: theia.TaskPresentationOptions;\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution | CustomExecution,\n        problemMatchers?: string | string[]\n    );\n\n    // Deprecated constructor used by Jake vscode built-in\n    constructor(\n        taskDefinition: theia.TaskDefinition,\n        name: string,\n        source: string,\n        execution?: ProcessExecution | ShellExecution | CustomExecution,\n        problemMatchers?: string | string[],\n    );\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(...args: any[]) {\n        let taskDefinition: theia.TaskDefinition;\n        let scope: theia.WorkspaceFolder | theia.TaskScope.Global | theia.TaskScope.Workspace | undefined;\n        let name: string;\n        let source: string;\n        let execution: ProcessExecution | ShellExecution | CustomExecution | undefined;\n        let problemMatchers: string | string[] | undefined;\n\n        if (typeof args[1] === 'string') {\n            [\n                taskDefinition,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        } else {\n            [\n                taskDefinition,\n                scope,\n                name,\n                source,\n                execution,\n                problemMatchers,\n            ] = args;\n        }\n\n        this.definition = taskDefinition;\n        this.scope = scope;\n        this.name = name;\n        this.source = source;\n        this.execution = execution;\n\n        if (typeof problemMatchers === 'string') {\n            this.taskProblemMatchers = [problemMatchers];\n            this.hasTaskProblemMatchers = true;\n        } else if (Array.isArray(problemMatchers)) {\n            this.taskProblemMatchers = problemMatchers;\n            this.hasTaskProblemMatchers = true;\n        } else {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n        }\n        this.isTaskBackground = false;\n        this.presentationOptions = Object.create(null);\n    }\n\n    get definition(): theia.TaskDefinition {\n        return this.taskDefinition;\n    }\n\n    set definition(value: theia.TaskDefinition) {\n        if (value === undefined || value === null) {\n            throw illegalArgument('Kind can\\'t be undefined or null');\n        }\n        this.taskDefinition = value;\n    }\n\n    get scope(): theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined {\n        return this.taskScope;\n    }\n\n    set scope(value: theia.TaskScope.Global | theia.TaskScope.Workspace | theia.WorkspaceFolder | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskScope = value;\n    }\n\n    get name(): string {\n        return this.taskName;\n    }\n\n    set name(value: string) {\n        if (typeof value !== 'string') {\n            throw illegalArgument('name');\n        }\n        this.taskName = value;\n    }\n\n    get execution(): ProcessExecution | ShellExecution | CustomExecution | undefined {\n        return this.taskExecution;\n    }\n\n    set execution(value: ProcessExecution | ShellExecution | CustomExecution | undefined) {\n        if (value === null) {\n            value = undefined;\n        }\n        this.taskExecution = value;\n    }\n\n    get problemMatchers(): string[] {\n        return this.taskProblemMatchers;\n    }\n\n    set problemMatchers(value: string[]) {\n        if (!Array.isArray(value)) {\n            this.taskProblemMatchers = [];\n            this.hasTaskProblemMatchers = false;\n            return;\n        }\n        this.taskProblemMatchers = value;\n        this.hasTaskProblemMatchers = true;\n    }\n\n    get hasProblemMatchers(): boolean {\n        return this.hasTaskProblemMatchers;\n    }\n\n    get isBackground(): boolean {\n        return this.isTaskBackground;\n    }\n\n    set isBackground(value: boolean) {\n        if (value !== true && value !== false) {\n            value = false;\n        }\n        this.isTaskBackground = value;\n    }\n\n    get source(): string {\n        return this.taskSource;\n    }\n\n    set source(value: string) {\n        if (typeof value !== 'string' || value.length === 0) {\n            throw illegalArgument('source must be a string of length > 0');\n        }\n        this.taskSource = value;\n    }\n\n    get group(): TaskGroup | undefined {\n        return this.taskGroup;\n    }\n\n    set group(value: TaskGroup | undefined) {\n        if (value === undefined || value === null) {\n            this.taskGroup = undefined;\n            return;\n        }\n        this.taskGroup = value;\n    }\n\n    get presentationOptions(): theia.TaskPresentationOptions {\n        return this.taskPresentationOptions;\n    }\n\n    set presentationOptions(value: theia.TaskPresentationOptions) {\n        if (value === null || value === undefined) {\n            value = Object.create(null);\n        }\n        this.taskPresentationOptions = value;\n    }\n}\n\n@es5ClassCompat\nexport class Task2 extends Task { }\n\n@es5ClassCompat\nexport class DebugAdapterExecutable {\n    /**\n     * The command or path of the debug adapter executable.\n     * A command must be either an absolute path of an executable or the name of an command to be looked up via the PATH environment variable.\n     * The special value 'node' will be mapped to VS Code's built-in Node.js runtime.\n     */\n    readonly command: string;\n\n    /**\n     * The arguments passed to the debug adapter executable. Defaults to an empty array.\n     */\n    readonly args?: string[];\n\n    /**\n     * Optional options to be used when the debug adapter is started.\n     * Defaults to undefined.\n     */\n    readonly options?: theia.DebugAdapterExecutableOptions;\n\n    /**\n     * Creates a description for a debug adapter based on an executable program.\n     *\n     * @param command The command or executable path that implements the debug adapter.\n     * @param args Optional arguments to be passed to the command or executable.\n     * @param options Optional options to be used when starting the command or executable.\n     */\n    constructor(command: string, args?: string[], options?: theia.DebugAdapterExecutableOptions) {\n        this.command = command;\n        this.args = args;\n        this.options = options;\n    }\n}\n\nexport namespace DebugAdapterExecutable {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is theia.DebugAdapterExecutable {\n        return !!adapter && 'command' in adapter;\n    }\n}\n\n/**\n * Represents a debug adapter running as a socket based server.\n */\n@es5ClassCompat\nexport class DebugAdapterServer {\n\n    /**\n     * The port.\n     */\n    readonly port: number;\n\n    /**\n     * The host.\n     */\n    readonly host?: string;\n\n    /**\n     * Create a description for a debug adapter running as a socket based server.\n     */\n    constructor(port: number, host?: string) {\n        this.port = port;\n        this.host = host;\n    }\n}\n\nexport namespace DebugAdapterServer {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is DebugAdapterServer {\n        return !!adapter && 'port' in adapter;\n    }\n}\n\n/**\n * Represents a debug adapter running as a Named Pipe (on Windows)/UNIX Domain Socket (on non-Windows) based server.\n */\n@es5ClassCompat\nexport class DebugAdapterNamedPipeServer {\n    /**\n     * Create a description for a debug adapter running as a Named Pipe (on Windows)/UNIX Domain Socket (on non-Windows) based server.\n     */\n    constructor(readonly path: string) { }\n}\n\nexport namespace DebugAdapterNamedPipeServer {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is DebugAdapterNamedPipeServer {\n        return !!adapter && 'path' in adapter;\n    }\n}\n\n/**\n * A debug adapter descriptor for an inline implementation.\n */\n@es5ClassCompat\nexport class DebugAdapterInlineImplementation {\n    implementation: theia.DebugAdapter;\n\n    /**\n     * Create a descriptor for an inline implementation of a debug adapter.\n     */\n    constructor(impl: theia.DebugAdapter) {\n        this.implementation = impl;\n    }\n}\n\nexport namespace DebugAdapterInlineImplementation {\n    export function is(adapter: theia.DebugAdapterDescriptor | undefined): adapter is DebugAdapterInlineImplementation {\n        return !!adapter && 'implementation' in adapter;\n    }\n}\n\nexport type DebugAdapterDescriptor = DebugAdapterExecutable | DebugAdapterServer | DebugAdapterNamedPipeServer | DebugAdapterInlineImplementation;\n\nexport enum LogLevel {\n    Trace = 1,\n    Debug = 2,\n    Info = 3,\n    Warning = 4,\n    Error = 5,\n    Critical = 6,\n    Off = 7\n}\n\n/**\n * The base class of all breakpoint types.\n */\n@es5ClassCompat\nexport class Breakpoint {\n    /**\n     * Is breakpoint enabled.\n     */\n    enabled: boolean;\n    /**\n     * An optional expression for conditional breakpoints.\n     */\n    condition?: string;\n    /**\n     * An optional expression that controls how many hits of the breakpoint are ignored.\n     */\n    hitCondition?: string;\n    /**\n     * An optional message that gets logged when this breakpoint is hit. Embedded expressions within {} are interpolated by the debug adapter.\n     */\n    logMessage?: string;\n\n    protected constructor(enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string, id?: string) {\n        this.enabled = enabled || false;\n        this.condition = condition;\n        this.hitCondition = hitCondition;\n        this.logMessage = logMessage;\n        this._id = id;\n    }\n\n    private _id: string | undefined;\n    /**\n     * The unique ID of the breakpoint.\n     */\n    get id(): string {\n        if (!this._id) {\n            this._id = UUID.uuid4();\n        }\n        return this._id;\n    }\n\n}\n\n/**\n * A breakpoint specified by a source location.\n */\n@es5ClassCompat\nexport class SourceBreakpoint extends Breakpoint {\n    /**\n     * The source and line position of this breakpoint.\n     */\n    location: Location;\n\n    /**\n     * Create a new breakpoint for a source location.\n     */\n    constructor(location: Location, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string, id?: string) {\n        super(enabled, condition, hitCondition, logMessage, id);\n        this.location = location;\n    }\n}\n\n/**\n * A breakpoint specified by a function name.\n */\n@es5ClassCompat\nexport class FunctionBreakpoint extends Breakpoint {\n    /**\n     * The name of the function to which this breakpoint is attached.\n     */\n    functionName: string;\n\n    /**\n     * Create a new function breakpoint.\n     */\n    constructor(functionName: string, enabled?: boolean, condition?: string, hitCondition?: string, logMessage?: string, id?: string) {\n        super(enabled, condition, hitCondition, logMessage, id);\n        this.functionName = functionName;\n    }\n}\n\n@es5ClassCompat\nexport class Color {\n    readonly red: number;\n    readonly green: number;\n    readonly blue: number;\n    readonly alpha: number;\n\n    constructor(red: number, green: number, blue: number, alpha: number) {\n        this.red = red;\n        this.green = green;\n        this.blue = blue;\n        this.alpha = alpha;\n    }\n}\n\n@es5ClassCompat\nexport class ColorInformation {\n    range: Range;\n    color: Color;\n\n    constructor(range: Range, color: Color) {\n        if (color && !(color instanceof Color)) {\n            throw illegalArgument('color');\n        }\n        if (!Range.isRange(range)) {\n            throw illegalArgument('range');\n        }\n        this.range = range;\n        this.color = color;\n    }\n}\n\n@es5ClassCompat\nexport class ColorPresentation {\n    label: string;\n    textEdit?: TextEdit;\n    additionalTextEdits?: TextEdit[];\n\n    constructor(label: string) {\n        if (!label || typeof label !== 'string') {\n            throw illegalArgument('label');\n        }\n        this.label = label;\n    }\n}\n\nexport enum ColorFormat {\n    RGB = 0,\n    HEX = 1,\n    HSL = 2\n}\n\n@es5ClassCompat\nexport class FoldingRange {\n    start: number;\n    end: number;\n    kind?: FoldingRangeKind;\n\n    constructor(start: number, end: number, kind?: FoldingRangeKind) {\n        this.start = start;\n        this.end = end;\n        this.kind = kind;\n    }\n}\n\nexport enum FoldingRangeKind {\n    Comment = 1,\n    Imports = 2,\n    Region = 3\n}\n\n@es5ClassCompat\nexport class SelectionRange {\n\n    range: Range;\n    parent?: SelectionRange;\n\n    constructor(range: Range, parent?: SelectionRange) {\n        this.range = range;\n        this.parent = parent;\n\n        if (parent && !parent.range.contains(this.range)) {\n            throw new Error('Invalid argument: parent must contain this range');\n        }\n    }\n}\n\n/**\n * Enumeration of the supported operating systems.\n */\nexport enum OperatingSystem {\n    Windows = 'Windows',\n    Linux = 'Linux',\n    OSX = 'OSX'\n}\n\n/** The areas of the application shell where webview panel can reside. */\nexport enum WebviewPanelTargetArea {\n    Main = 'main',\n    Left = 'left',\n    Right = 'right',\n    Bottom = 'bottom'\n}\n\n/**\n * Possible kinds of UI that can use extensions.\n */\nexport enum UIKind {\n\n    /**\n     * Extensions are accessed from a desktop application.\n     */\n    Desktop = 1,\n\n    /**\n     * Extensions are accessed from a web browser.\n     */\n    Web = 2\n}\n\n@es5ClassCompat\nexport class CallHierarchyItem {\n    _sessionId?: string;\n    _itemId?: string;\n\n    kind: SymbolKind;\n    name: string;\n    detail?: string;\n    uri: URI;\n    range: Range;\n    selectionRange: Range;\n    tags?: readonly SymbolTag[];\n\n    constructor(kind: SymbolKind, name: string, detail: string, uri: URI, range: Range, selectionRange: Range) {\n        this.kind = kind;\n        this.name = name;\n        this.detail = detail;\n        this.uri = uri;\n        this.range = range;\n        this.selectionRange = selectionRange;\n    }\n\n    static isCallHierarchyItem(thing: {}): thing is CallHierarchyItem {\n        if (thing instanceof CallHierarchyItem) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof (<CallHierarchyItem>thing).kind === 'number' &&\n            typeof (<CallHierarchyItem>thing).name === 'string' &&\n            URI.isUri((<CallHierarchyItem>thing).uri) &&\n            Range.isRange((<CallHierarchyItem>thing).range) &&\n            Range.isRange((<CallHierarchyItem>thing).selectionRange);\n    }\n}\n\n@es5ClassCompat\nexport class CallHierarchyIncomingCall {\n\n    from: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: CallHierarchyItem, fromRanges: Range[]) {\n        this.fromRanges = fromRanges;\n        this.from = item;\n    }\n}\n\n@es5ClassCompat\nexport class CallHierarchyOutgoingCall {\n\n    to: theia.CallHierarchyItem;\n    fromRanges: theia.Range[];\n\n    constructor(item: CallHierarchyItem, fromRanges: Range[]) {\n        this.fromRanges = fromRanges;\n        this.to = item;\n    }\n}\n\nexport enum LanguageStatusSeverity {\n    Information = 0,\n    Warning = 1,\n    Error = 2\n}\n\n@es5ClassCompat\nexport class LinkedEditingRanges {\n\n    ranges: theia.Range[];\n    wordPattern?: RegExp;\n\n    constructor(ranges: Range[], wordPattern?: RegExp) {\n        this.ranges = ranges;\n        this.wordPattern = wordPattern;\n    }\n}\n\n@es5ClassCompat\nexport class TimelineItem {\n    timestamp: number;\n    label: string;\n    id?: string;\n    iconPath?: theia.Uri | { light: theia.Uri; dark: theia.Uri } | ThemeIcon;\n    description?: string;\n    detail?: string;\n    command?: theia.Command;\n    contextValue?: string;\n    constructor(label: string, timestamp: number) {\n        this.label = label;\n        this.timestamp = timestamp;\n    }\n}\n\n// #region Semantic Coloring\n\n@es5ClassCompat\nexport class SemanticTokensLegend {\n    public readonly tokenTypes: string[];\n    public readonly tokenModifiers: string[];\n\n    constructor(tokenTypes: string[], tokenModifiers: string[] = []) {\n        this.tokenTypes = tokenTypes;\n        this.tokenModifiers = tokenModifiers;\n    }\n}\n\nfunction isStrArrayOrUndefined(arg: unknown): arg is string[] | undefined {\n    return ((typeof arg === 'undefined') || (Array.isArray(arg) && arg.every(e => typeof e === 'string')));\n}\n\n@es5ClassCompat\nexport class SemanticTokensBuilder {\n\n    private _prevLine: number;\n    private _prevChar: number;\n    private _dataIsSortedAndDeltaEncoded: boolean;\n    private _data: number[];\n    private _dataLen: number;\n    private _tokenTypeStrToInt: Map<string, number>;\n    private _tokenModifierStrToInt: Map<string, number>;\n    private _hasLegend: boolean;\n\n    constructor(legend?: SemanticTokensLegend) {\n        this._prevLine = 0;\n        this._prevChar = 0;\n        this._dataIsSortedAndDeltaEncoded = true;\n        this._data = [];\n        this._dataLen = 0;\n        this._tokenTypeStrToInt = new Map<string, number>();\n        this._tokenModifierStrToInt = new Map<string, number>();\n        this._hasLegend = false;\n        if (legend) {\n            this._hasLegend = true;\n            for (let i = 0, len = legend.tokenTypes.length; i < len; i++) {\n                this._tokenTypeStrToInt.set(legend.tokenTypes[i], i);\n            }\n            for (let i = 0, len = legend.tokenModifiers.length; i < len; i++) {\n                this._tokenModifierStrToInt.set(legend.tokenModifiers[i], i);\n            }\n        }\n    }\n\n    public push(line: number, char: number, length: number, tokenType: number, tokenModifiers?: number): void;\n    public push(range: Range, tokenType: string, tokenModifiers?: string[]): void;\n    public push(arg0: number | Range, arg1: number | string, arg2?: number | string[], arg3?: number, arg4?: number): void {\n        if (typeof arg0 === 'number' && typeof arg1 === 'number' && typeof arg2 === 'number' && typeof arg3 === 'number' &&\n            (typeof arg4 === 'number' || typeof arg4 === 'undefined')) {\n            if (typeof arg4 === 'undefined') {\n                arg4 = 0;\n            }\n            // 1st overload\n            return this._pushEncoded(arg0, arg1, arg2, arg3, arg4);\n        }\n        if (Range.isRange(arg0) && typeof arg1 === 'string' && isStrArrayOrUndefined(arg2)) {\n            // 2nd overload\n            return this._push(arg0, arg1, arg2);\n        }\n        throw illegalArgument();\n    }\n\n    private _push(range: theia.Range, tokenType: string, tokenModifiers?: string[]): void {\n        if (!this._hasLegend) {\n            throw new Error('Legend must be provided in constructor');\n        }\n        if (range.start.line !== range.end.line) {\n            throw new Error('`range` cannot span multiple lines');\n        }\n        if (!this._tokenTypeStrToInt.has(tokenType)) {\n            throw new Error('`tokenType` is not in the provided legend');\n        }\n        const line = range.start.line;\n        const char = range.start.character;\n        const length = range.end.character - range.start.character;\n        const nTokenType = this._tokenTypeStrToInt.get(tokenType)!;\n        let nTokenModifiers = 0;\n        if (tokenModifiers) {\n            for (const tokenModifier of tokenModifiers) {\n                if (!this._tokenModifierStrToInt.has(tokenModifier)) {\n                    throw new Error('`tokenModifier` is not in the provided legend');\n                }\n                const nTokenModifier = this._tokenModifierStrToInt.get(tokenModifier)!;\n                nTokenModifiers |= (1 << nTokenModifier) >>> 0;\n            }\n        }\n        this._pushEncoded(line, char, length, nTokenType, nTokenModifiers);\n    }\n\n    private _pushEncoded(line: number, char: number, length: number, tokenType: number, tokenModifiers: number): void {\n        if (this._dataIsSortedAndDeltaEncoded && (line < this._prevLine || (line === this._prevLine && char < this._prevChar))) {\n            // push calls were ordered and are no longer ordered\n            this._dataIsSortedAndDeltaEncoded = false;\n\n            // Remove delta encoding from data\n            const tokenCount = (this._data.length / 5) | 0;\n            let prevLine = 0;\n            let prevChar = 0;\n            for (let i = 0; i < tokenCount; i++) {\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let line = this._data[5 * i];\n                // eslint-disable-next-line @typescript-eslint/no-shadow\n                let char = this._data[5 * i + 1];\n\n                if (line === 0) {\n                    // on the same line as previous token\n                    line = prevLine;\n                    char += prevChar;\n                } else {\n                    // on a different line than previous token\n                    line += prevLine;\n                }\n\n                this._data[5 * i] = line;\n                this._data[5 * i + 1] = char;\n\n                prevLine = line;\n                prevChar = char;\n            }\n        }\n\n        let pushLine = line;\n        let pushChar = char;\n        if (this._dataIsSortedAndDeltaEncoded && this._dataLen > 0) {\n            pushLine -= this._prevLine;\n            if (pushLine === 0) {\n                pushChar -= this._prevChar;\n            }\n        }\n\n        this._data[this._dataLen++] = pushLine;\n        this._data[this._dataLen++] = pushChar;\n        this._data[this._dataLen++] = length;\n        this._data[this._dataLen++] = tokenType;\n        this._data[this._dataLen++] = tokenModifiers;\n\n        this._prevLine = line;\n        this._prevChar = char;\n    }\n\n    private static _sortAndDeltaEncode(data: number[]): Uint32Array {\n        const pos: number[] = [];\n        const tokenCount = (data.length / 5) | 0;\n        for (let i = 0; i < tokenCount; i++) {\n            pos[i] = i;\n        }\n        pos.sort((a, b) => {\n            const aLine = data[5 * a];\n            const bLine = data[5 * b];\n            if (aLine === bLine) {\n                const aChar = data[5 * a + 1];\n                const bChar = data[5 * b + 1];\n                return aChar - bChar;\n            }\n            return aLine - bLine;\n        });\n        const result = new Uint32Array(data.length);\n        let prevLine = 0;\n        let prevChar = 0;\n        for (let i = 0; i < tokenCount; i++) {\n            const srcOffset = 5 * pos[i];\n            const line = data[srcOffset + 0];\n            const char = data[srcOffset + 1];\n            const length = data[srcOffset + 2];\n            const tokenType = data[srcOffset + 3];\n            const tokenModifiers = data[srcOffset + 4];\n\n            const pushLine = line - prevLine;\n            const pushChar = (pushLine === 0 ? char - prevChar : char);\n\n            const dstOffset = 5 * i;\n            result[dstOffset + 0] = pushLine;\n            result[dstOffset + 1] = pushChar;\n            result[dstOffset + 2] = length;\n            result[dstOffset + 3] = tokenType;\n            result[dstOffset + 4] = tokenModifiers;\n\n            prevLine = line;\n            prevChar = char;\n        }\n\n        return result;\n    }\n\n    public build(resultId?: string): SemanticTokens {\n        if (!this._dataIsSortedAndDeltaEncoded) {\n            return new SemanticTokens(SemanticTokensBuilder._sortAndDeltaEncode(this._data), resultId);\n        }\n        return new SemanticTokens(new Uint32Array(this._data), resultId);\n    }\n}\n\n@es5ClassCompat\nexport class SemanticTokens {\n    readonly resultId?: string;\n    readonly data: Uint32Array;\n\n    constructor(data: Uint32Array, resultId?: string) {\n        this.resultId = resultId;\n        this.data = data;\n    }\n}\n\n@es5ClassCompat\nexport class SemanticTokensEdit {\n    readonly start: number;\n    readonly deleteCount: number;\n    readonly data?: Uint32Array;\n\n    constructor(start: number, deleteCount: number, data?: Uint32Array) {\n        this.start = start;\n        this.deleteCount = deleteCount;\n        this.data = data;\n    }\n}\n\n@es5ClassCompat\nexport class SemanticTokensEdits {\n    readonly resultId?: string;\n    readonly edits: SemanticTokensEdit[];\n\n    constructor(edits: SemanticTokensEdit[], resultId?: string) {\n        this.resultId = resultId;\n        this.edits = edits;\n    }\n}\n\nexport enum InputBoxValidationSeverity {\n    Info = 1,\n    Warning = 2,\n    Error = 3\n}\n\n// #endregion\n","// *****************************************************************************\n// Copyright (C) 2021 SAP SE or an SAP affiliate company and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n*  Copyright (c) Microsoft Corporation. All rights reserved.\n*  Licensed under the MIT License. See License.txt in the project root for license information.\n*--------------------------------------------------------------------------------------------*/\n// some of the code is copied and modified from https://github.com/microsoft/vscode/blob/e1f0f8f51390dea5df9096718fb6b647ed5a9534/src/vs/workbench/api/common/extHostWebviewView.ts\n\nimport { Disposable } from './types-impl';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { PLUGIN_RPC_CONTEXT, WebviewViewsMain, WebviewViewsExt, Plugin } from '../common/plugin-api-rpc';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport { WebviewImpl, WebviewsExtImpl } from './webviews';\nimport { WebviewViewProvider } from '@theia/plugin';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport * as theia from '@theia/plugin';\n\nexport class WebviewViewsExtImpl implements WebviewViewsExt {\n\n    private readonly proxy: WebviewViewsMain;\n\n    protected readonly viewProviders = new Map<string, {\n        readonly provider: WebviewViewProvider;\n        readonly plugin: Plugin;\n    }>();\n    protected readonly webviewViews = new Map<string, WebviewViewExtImpl>();\n\n    constructor(rpc: RPCProtocol,\n        private readonly webviewsExt: WebviewsExtImpl) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEW_VIEWS_MAIN);\n    }\n\n    registerWebviewViewProvider(\n        viewType: string,\n        provider: WebviewViewProvider,\n        plugin: Plugin,\n        webviewOptions?: {\n            retainContextWhenHidden?: boolean\n        }\n    ): Disposable {\n        if (this.viewProviders.has(viewType)) {\n            throw new Error(`View provider for '${viewType}' already registered`);\n        }\n\n        this.viewProviders.set(viewType, { provider: provider, plugin: plugin });\n\n        this.proxy.$registerWebviewViewProvider(viewType, {\n            retainContextWhenHidden: webviewOptions?.retainContextWhenHidden,\n            serializeBuffersForPostMessage: false,\n        });\n\n        return new Disposable(() => {\n            this.viewProviders.delete(viewType);\n            this.proxy.$unregisterWebviewViewProvider(viewType);\n        });\n    }\n\n    async $resolveWebviewView(handle: string,\n        viewType: string,\n        title: string | undefined,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        cancellation: CancellationToken\n    ): Promise<void> {\n        const entry = this.viewProviders.get(viewType);\n        if (!entry) {\n            throw new Error(`No view provider found for '${viewType}'`);\n        }\n\n        const { provider, plugin } = entry;\n\n        const webviewNoPanel = this.webviewsExt.createNewWebview({}, plugin, handle);\n        const revivedView = new WebviewViewExtImpl(handle, this.proxy, viewType, title, webviewNoPanel, true);\n        this.webviewViews.set(handle, revivedView);\n        await provider.resolveWebviewView(revivedView, { state }, cancellation);\n    }\n\n    async $onDidChangeWebviewViewVisibility(\n        handle: string,\n        visible: boolean\n    ): Promise<void> {\n        const webviewView = this.getWebviewView(handle);\n        webviewView.setVisible(visible);\n        webviewView.onDidChangeVisibilityEmitter.fire(visible);\n    }\n\n    async $disposeWebviewView(handle: string): Promise<void> {\n        const webviewView = this.getWebviewView(handle);\n        this.webviewViews.delete(handle);\n        webviewView.dispose();\n\n        this.webviewsExt.deleteWebview(handle);\n    }\n\n    protected getWebviewView(handle: string): WebviewViewExtImpl {\n        const entry = this.webviewViews.get(handle);\n        if (!entry) {\n            throw new Error('No webview found');\n        }\n\n        return entry;\n    }\n}\n\nexport class WebviewViewExtImpl implements theia.WebviewView {\n\n    readonly onDidChangeVisibilityEmitter = new Emitter<boolean>();\n    readonly onDidChangeVisibility = this.onDidChangeVisibilityEmitter.event;\n\n    readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose = this.onDidDisposeEmitter.event;\n\n    readonly handle: string;\n    readonly proxy: WebviewViewsMain;\n\n    readonly _viewType: string;\n    readonly _webview: WebviewImpl;\n\n    _isDisposed = false;\n    _isVisible: boolean;\n    _title: string | undefined;\n    _description: string | undefined;\n\n    constructor(\n        handle: string,\n        proxy: WebviewViewsMain,\n        viewType: string,\n        title: string | undefined,\n        webview: WebviewImpl,\n        isVisible: boolean,\n    ) {\n        this._viewType = viewType;\n        this._title = title;\n        this.handle = handle;\n        this.proxy = proxy;\n        this._webview = webview;\n        this._isVisible = isVisible;\n    }\n    onDispose: Event<void>;\n\n    dispose(): void {\n        if (this._isDisposed) {\n            return;\n        }\n\n        this._isDisposed = true;\n        this.onDidDisposeEmitter.fire();\n    }\n\n    get title(): string | undefined {\n        this.assertNotDisposed();\n        return this._title;\n    }\n\n    set title(value: string | undefined) {\n        this.assertNotDisposed();\n        if (this.title !== value) {\n            this.title = value;\n            this.proxy.$setWebviewViewTitle(this.handle, value);\n        }\n    }\n\n    get description(): string | undefined {\n        this.assertNotDisposed();\n        return this._description;\n    }\n\n    set description(value: string | undefined) {\n        this.assertNotDisposed();\n        if (this._description !== value) {\n            this._description = value;\n            this.proxy.$setWebviewViewDescription(this.handle, value);\n        }\n    }\n\n    get visible(): boolean { return this._isVisible; }\n    get webview(): WebviewImpl { return this._webview; }\n    get viewType(): string { return this._viewType; }\n\n    setVisible(visible: boolean): void {\n        if (visible === this._isVisible || this._isDisposed) {\n            return;\n        }\n\n        this._isVisible = visible;\n        this.onDidChangeVisibilityEmitter.fire(this._isVisible);\n    }\n\n    show(preserveFocus?: boolean): void {\n        this.assertNotDisposed();\n        this.proxy.$show(this.handle, !!preserveFocus);\n    }\n\n    protected assertNotDisposed(): void {\n        if (this._isDisposed) {\n            throw new Error('Webview is disposed');\n        }\n    }\n}\n\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { v4 } from 'uuid';\nimport { Plugin, WebviewsExt, WebviewPanelViewState, WebviewsMain, PLUGIN_RPC_CONTEXT, WebviewInitData, /* WebviewsMain, PLUGIN_RPC_CONTEXT  */ } from '../common/plugin-api-rpc';\nimport * as theia from '@theia/plugin';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Emitter, Event } from '@theia/core/lib/common/event';\nimport { fromViewColumn, toViewColumn, toWebviewPanelShowOptions } from './type-converters';\nimport { Disposable, WebviewPanelTargetArea, URI } from './types-impl';\nimport { WorkspaceExtImpl } from './workspace';\nimport { PluginIconPath } from './plugin-icon-path';\n\nexport class WebviewsExtImpl implements WebviewsExt {\n    private readonly proxy: WebviewsMain;\n    private readonly webviewPanels = new Map<string, WebviewPanelImpl>();\n    private readonly webviews = new Map<string, WebviewImpl>();\n    private readonly serializers = new Map<string, {\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    }>();\n    private initData: WebviewInitData | undefined;\n\n    readonly onDidDisposeEmitter = new Emitter<void>();\n    readonly onDidDispose: Event<void> = this.onDidDisposeEmitter.event;\n\n    constructor(\n        rpc: RPCProtocol,\n        private readonly workspace: WorkspaceExtImpl,\n    ) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WEBVIEWS_MAIN);\n    }\n\n    init(initData: WebviewInitData): void {\n        this.initData = initData;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    $onMessage(handle: string, message: any): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.webview.onMessageEmitter.fire(message);\n        } else {\n            const webview = this.getWebview(handle);\n            if (webview) {\n                webview.onMessageEmitter.fire(message);\n            }\n        }\n    }\n    $onDidChangeWebviewPanelViewState(handle: string, newState: WebviewPanelViewState): void {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            const viewColumn = toViewColumn(newState.position);\n            if (panel.active !== newState.active || panel.visible !== newState.visible || panel.viewColumn !== viewColumn) {\n                panel.setActive(newState.active);\n                panel.setVisible(newState.visible);\n                panel.setViewColumn(viewColumn!);\n                panel.onDidChangeViewStateEmitter.fire({ webviewPanel: panel });\n            }\n        }\n    }\n    $onDidDisposeWebviewPanel(handle: string): PromiseLike<void> {\n        const panel = this.getWebviewPanel(handle);\n        if (panel) {\n            panel.dispose();\n            this.webviewPanels.delete(handle);\n        }\n        return Promise.resolve();\n    }\n    $deserializeWebviewPanel(viewId: string,\n        viewType: string,\n        title: string,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        state: any,\n        viewState: WebviewPanelViewState,\n        options: theia.WebviewOptions & theia.WebviewPanelOptions): PromiseLike<void> {\n        if (!this.initData) {\n            return Promise.reject(new Error('Webviews are not initialized'));\n        }\n        const entry = this.serializers.get(viewType);\n        if (!entry) {\n            return Promise.reject(new Error(`No serializer found for '${viewType}'`));\n        }\n        const { serializer, plugin } = entry;\n\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const revivedPanel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, toViewColumn(viewState.position)!, options, webview);\n        revivedPanel.setActive(viewState.active);\n        revivedPanel.setVisible(viewState.visible);\n        this.webviewPanels.set(viewId, revivedPanel);\n        return serializer.deserializeWebviewPanel(revivedPanel, state);\n    }\n\n    createWebview(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin\n    ): theia.WebviewPanel {\n        const viewId = v4();\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webviewOptions = WebviewImpl.toWebviewOptions(options, this.workspace, plugin);\n        this.proxy.$createWebviewPanel(viewId, viewType, title, webviewShowOptions, webviewOptions);\n        const panel = this.createWebviewPanel(viewType, title, showOptions, options, plugin, viewId);\n        return panel;\n    }\n\n    createWebviewPanel(\n        viewType: string,\n        title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewPanelImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webviewShowOptions = toWebviewPanelShowOptions(showOptions);\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        const panel = new WebviewPanelImpl(viewId, this.proxy, viewType, title, webviewShowOptions, options, webview);\n        this.webviewPanels.set(viewId, panel);\n        return panel;\n    }\n\n    createNewWebview(\n        options: theia.WebviewPanelOptions & theia.WebviewOptions,\n        plugin: Plugin,\n        viewId: string\n    ): WebviewImpl {\n        if (!this.initData) {\n            throw new Error('Webviews are not initialized');\n        }\n        const webview = new WebviewImpl(viewId, this.proxy, options, this.initData, this.workspace, plugin);\n        this.webviews.set(viewId, webview);\n        return webview;\n    }\n\n    registerWebviewPanelSerializer(\n        viewType: string,\n        serializer: theia.WebviewPanelSerializer,\n        plugin: Plugin\n    ): theia.Disposable {\n        if (this.serializers.has(viewType)) {\n            throw new Error(`Serializer for '${viewType}' already registered`);\n        }\n\n        this.serializers.set(viewType, { serializer, plugin });\n        this.proxy.$registerSerializer(viewType);\n\n        return new Disposable(() => {\n            this.serializers.delete(viewType);\n            this.proxy.$unregisterSerializer(viewType);\n        });\n    }\n\n    getWebviewPanel(viewId: string): WebviewPanelImpl | undefined {\n        if (this.webviewPanels.has(viewId)) {\n            return this.webviewPanels.get(viewId);\n        }\n        return undefined;\n    }\n\n    public deleteWebview(handle: string): void {\n        this.webviews.delete(handle);\n    }\n\n    public getWebview(handle: string): WebviewImpl | undefined {\n        return this.webviews.get(handle);\n    }\n}\n\nexport class WebviewImpl implements theia.Webview {\n    private isDisposed = false;\n    private _html: string;\n    private _options: theia.WebviewOptions;\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onMessageEmitter = new Emitter<any>();\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    public readonly onDidReceiveMessage: Event<any> = this.onMessageEmitter.event;\n\n    constructor(\n        private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        options: theia.WebviewOptions,\n        private readonly initData: WebviewInitData,\n        private readonly workspace: WorkspaceExtImpl,\n        readonly plugin: Plugin\n    ) {\n        this._options = options;\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n        this.isDisposed = true;\n        this.onMessageEmitter.dispose();\n    }\n\n    asWebviewUri(resource: theia.Uri): theia.Uri {\n        const uri = this.initData.webviewResourceRoot\n            .replace('{{scheme}}', resource.scheme)\n            .replace('{{authority}}', resource.authority)\n            .replace('{{path}}', resource.path.replace(/^\\//, ''))\n            .replace('{{uuid}}', this.viewId);\n        return URI.parse(uri);\n    }\n\n    get cspSource(): string {\n        return this.initData.webviewCspSource.replace('{{uuid}}', this.viewId);\n    }\n\n    get html(): string {\n        this.checkIsDisposed();\n        return this._html;\n    }\n\n    set html(value: string) {\n        this.checkIsDisposed();\n        if (this._html !== value) {\n            this._html = value;\n            this.proxy.$setHtml(this.viewId, this._html);\n        }\n    }\n\n    get options(): theia.WebviewOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    set options(newOptions: theia.WebviewOptions) {\n        this.checkIsDisposed();\n        this.proxy.$setOptions(this.viewId, WebviewImpl.toWebviewOptions(newOptions, this.workspace, this.plugin));\n        this._options = newOptions;\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This Webview is disposed!');\n        }\n    }\n\n    static toWebviewOptions(options: theia.WebviewOptions, workspace: WorkspaceExtImpl, plugin: Plugin): theia.WebviewOptions {\n        return {\n            ...options,\n            localResourceRoots: options.localResourceRoots || [\n                ...(workspace.workspaceFolders || []).map(x => x.uri),\n                URI.file(plugin.pluginFolder)\n            ]\n        };\n    }\n}\n\nexport class WebviewPanelImpl implements theia.WebviewPanel {\n\n    private isDisposed = false;\n    private _active = true;\n    private _visible = true;\n    private _showOptions: theia.WebviewPanelShowOptions;\n    private _iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined;\n\n    readonly onDisposeEmitter = new Emitter<void>();\n    public readonly onDidDispose: Event<void> = this.onDisposeEmitter.event;\n\n    readonly onDidChangeViewStateEmitter = new Emitter<theia.WebviewPanelOnDidChangeViewStateEvent>();\n    public readonly onDidChangeViewState: Event<theia.WebviewPanelOnDidChangeViewStateEvent> = this.onDidChangeViewStateEmitter.event;\n\n    constructor(private readonly viewId: string,\n        private readonly proxy: WebviewsMain,\n        private readonly _viewType: string,\n        private _title: string,\n        showOptions: theia.ViewColumn | theia.WebviewPanelShowOptions,\n        private readonly _options: theia.WebviewPanelOptions,\n        private readonly _webview: WebviewImpl\n    ) {\n        this._showOptions = typeof showOptions === 'object' ? showOptions : { viewColumn: showOptions as theia.ViewColumn };\n    }\n\n    dispose(): void {\n        if (this.isDisposed) {\n            return;\n        }\n\n        this.isDisposed = true;\n        this.onDisposeEmitter.fire(undefined);\n\n        this.proxy.$disposeWebview(this.viewId);\n        this._webview.dispose();\n\n        this.onDisposeEmitter.dispose();\n        this.onDidChangeViewStateEmitter.dispose();\n    }\n\n    get viewType(): string {\n        this.checkIsDisposed();\n        return this._viewType;\n    }\n\n    get title(): string {\n        this.checkIsDisposed();\n        return this._title;\n    }\n\n    set title(newTitle: string) {\n        this.checkIsDisposed();\n        if (this._title !== newTitle) {\n            this._title = newTitle;\n            this.proxy.$setTitle(this.viewId, newTitle);\n        }\n    }\n\n    get iconPath(): theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined {\n        return this._iconPath;\n    }\n\n    set iconPath(iconPath: theia.Uri | { light: theia.Uri; dark: theia.Uri } | undefined) {\n        this.checkIsDisposed();\n        if (this._iconPath !== iconPath) {\n            this._iconPath = iconPath;\n            this.proxy.$setIconPath(this.viewId, PluginIconPath.toUrl(iconPath, this._webview.plugin));\n        }\n    }\n\n    get webview(): WebviewImpl {\n        this.checkIsDisposed();\n        return this._webview;\n    }\n\n    get options(): theia.WebviewPanelOptions {\n        this.checkIsDisposed();\n        return this._options;\n    }\n\n    get viewColumn(): theia.ViewColumn | undefined {\n        this.checkIsDisposed();\n        return this._showOptions.viewColumn;\n    }\n\n    setViewColumn(value: theia.ViewColumn | undefined): void {\n        this.checkIsDisposed();\n        this._showOptions.viewColumn = value;\n    }\n\n    get showOptions(): theia.WebviewPanelShowOptions {\n        this.checkIsDisposed();\n        return this._showOptions;\n    }\n\n    setShowOptions(value: theia.WebviewPanelShowOptions): void {\n        this.checkIsDisposed();\n        this._showOptions = value;\n    }\n\n    get active(): boolean {\n        this.checkIsDisposed();\n        return this._active;\n    }\n\n    setActive(value: boolean): void {\n        this.checkIsDisposed();\n        this._active = value;\n    }\n\n    get visible(): boolean {\n        this.checkIsDisposed();\n        return this._visible;\n    }\n\n    setVisible(value: boolean): void {\n        this.checkIsDisposed();\n        this._visible = value;\n    }\n\n    reveal(arg0?: theia.ViewColumn | WebviewPanelTargetArea, arg1?: theia.ViewColumn | boolean, arg2?: boolean): void {\n        let area: WebviewPanelTargetArea | undefined = undefined;\n        let viewColumn: theia.ViewColumn | undefined = undefined;\n        let preserveFocus: boolean | undefined = undefined;\n        if (typeof arg0 === 'number') {\n            viewColumn = arg0;\n        } else {\n            area = arg0;\n        }\n        if (typeof arg1 === 'number') {\n            viewColumn = arg1;\n        } else {\n            preserveFocus = arg1;\n        }\n        if (typeof arg2 === 'boolean') {\n            preserveFocus = arg2;\n        }\n        this.checkIsDisposed();\n        this.proxy.$reveal(this.viewId, {\n            area,\n            viewColumn: viewColumn ? fromViewColumn(viewColumn) : undefined,\n            preserveFocus\n        });\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    postMessage(message: any): PromiseLike<boolean> {\n        this.checkIsDisposed();\n        return this.proxy.$postMessage(this.viewId, message);\n    }\n\n    private checkIsDisposed(): void {\n        if (this.isDisposed) {\n            throw new Error('This WebviewPanel is disposed!');\n        }\n    }\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\nimport { URI } from './types-impl';\nimport { WindowState } from '@theia/plugin';\nimport { WindowStateExt, WindowMain, PLUGIN_RPC_CONTEXT } from '../common/plugin-api-rpc';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { Schemes } from '../common/uri-components';\n\nexport class WindowStateExtImpl implements WindowStateExt {\n\n    private windowStateCached: WindowState;\n\n    private windowStateChangedEmitter = new Emitter<WindowState>();\n    public readonly onDidChangeWindowState: Event<WindowState> = this.windowStateChangedEmitter.event;\n\n    private readonly proxy: WindowMain;\n\n    constructor(rpc: RPCProtocol) {\n        this.proxy = rpc.getProxy(PLUGIN_RPC_CONTEXT.WINDOW_MAIN);\n        this.windowStateCached = { focused: true }; // supposed tab is active on start\n    }\n\n    getWindowState(): WindowState {\n        return this.windowStateCached;\n    }\n\n    $onWindowStateChanged(focused: boolean): void {\n        const state = { focused: focused };\n        if (state === this.windowStateCached) {\n            return;\n        }\n\n        this.windowStateCached = state;\n        this.windowStateChangedEmitter.fire(state);\n    }\n\n    openUri(uri: URI): Promise<boolean> {\n        return this.proxy.$openUri(uri);\n    }\n\n    async asExternalUri(target: URI): Promise<URI> {\n        if (!target.scheme.trim().length) {\n            throw new Error('Invalid scheme - cannot be empty');\n        }\n        if (Schemes.http !== target.scheme && Schemes.https !== target.scheme) {\n            throw new Error(`Invalid scheme '${target.scheme}'`);\n        }\n\n        const uri = await this.proxy.$asExternalUri(target);\n        return URI.revive(uri);\n    }\n\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n\n/**\n * Word inside a model.\n */\nexport interface WordAtPosition {\n    /**\n     * The word.\n     */\n    readonly word: string;\n    /**\n     * The column where the word starts.\n     */\n    readonly startColumn: number;\n    /**\n     * The column where the word ends.\n     */\n    readonly endColumn: number;\n}\n\nexport const USUAL_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\\'\",.<>/?';\n\n/**\n * Create a word definition regular expression based on default word separators.\n * Optionally provide allowed separators that should be included in words.\n *\n * The default would look like this:\n * /(-?\\d*\\.\\d\\w*)|([^\\`\\~\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\-\\=\\+\\[\\{\\]\\}\\\\\\|\\;\\:\\'\\\"\\,\\.\\<\\>\\/\\?\\s]+)/g\n */\nfunction createWordRegExp(allowInWords: string = ''): RegExp {\n    let source = '(-?\\\\d*\\\\.\\\\d\\\\w*)|([^';\n    for (let i = 0; i < USUAL_WORD_SEPARATORS.length; i++) {\n        if (allowInWords.indexOf(USUAL_WORD_SEPARATORS[i]) >= 0) {\n            continue;\n        }\n        source += '\\\\' + USUAL_WORD_SEPARATORS[i];\n    }\n    source += '\\\\s]+)';\n    return new RegExp(source, 'g');\n}\n\n// catches numbers (including floating numbers) in the first group, and alphanum in the second\nexport const DEFAULT_WORD_REGEXP = createWordRegExp();\n\nexport function ensureValidWordDefinition(wordDefinition?: RegExp): RegExp {\n    let result: RegExp = DEFAULT_WORD_REGEXP;\n\n    if (wordDefinition && (wordDefinition instanceof RegExp)) {\n        if (!wordDefinition.global) {\n            let flags = 'g';\n            if (wordDefinition.ignoreCase) {\n                flags += 'i';\n            }\n            if (wordDefinition.multiline) {\n                flags += 'm';\n            }\n            result = new RegExp(wordDefinition.source, flags);\n        } else {\n            result = wordDefinition;\n        }\n    }\n\n    result.lastIndex = 0;\n\n    return result;\n}\n\nfunction getWordAtPosFast(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // find whitespace enclosed text around column and match from there\n\n    const pos = column - 1 - textOffset;\n    const start = text.lastIndexOf(' ', pos - 1) + 1;\n    let end = text.indexOf(' ', pos);\n    if (end === -1) {\n        end = text.length;\n    }\n\n    wordDefinition.lastIndex = start;\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n        if (match.index! <= pos && wordDefinition.lastIndex >= pos) {\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nfunction getWordAtPosSlow(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n    // matches all words starting at the beginning\n    // of the input until it finds a match that encloses\n    // the desired column. slow but correct\n\n    const pos = column - 1 - textOffset;\n    wordDefinition.lastIndex = 0;\n\n    let match: RegExpMatchArray | null;\n    while (match = wordDefinition.exec(text)) {\n\n        if (match.index! > pos) {\n            // |nW -> matched only after the pos\n            return undefined;\n\n        } else if (wordDefinition.lastIndex >= pos) {\n            // W|W -> match encloses pos\n            return {\n                word: match[0],\n                startColumn: textOffset + 1 + match.index!,\n                endColumn: textOffset + 1 + wordDefinition.lastIndex\n            };\n        }\n    }\n\n    return undefined;\n}\n\nexport function getWordAtText(column: number, wordDefinition: RegExp, text: string, textOffset: number): WordAtPosition | undefined {\n\n    // if `words` can contain whitespace character we have to use the slow variant\n    // otherwise we use the fast variant of finding a word\n    wordDefinition.lastIndex = 0;\n    const match = wordDefinition.exec(text);\n    if (!match) {\n        return undefined;\n    }\n    // todo@joh the `match` could already be the (first) word\n    const ret = match[0].indexOf(' ') >= 0\n        // did match a word which contains a space character -> use slow word find\n        ? getWordAtPosSlow(column, wordDefinition, text, textOffset)\n        // sane word definition -> use fast word find\n        : getWordAtPosFast(column, wordDefinition, text, textOffset);\n\n    // both (getWordAtPosFast and getWordAtPosSlow) leave the wordDefinition-RegExp\n    // in an undefined state and to not confuse other users of the wordDefinition\n    // we reset the lastIndex\n    wordDefinition.lastIndex = 0;\n\n    return ret;\n}\n","// *****************************************************************************\n// Copyright (C) 2018 Red Hat, Inc. and others.\n//\n// This program and the accompanying materials are made available under the\n// terms of the Eclipse Public License v. 2.0 which is available at\n// http://www.eclipse.org/legal/epl-2.0.\n//\n// This Source Code may also be made available under the following Secondary\n// Licenses when the conditions for such availability set forth in the Eclipse\n// Public License v. 2.0 are satisfied: GNU General Public License, version 2\n// with the GNU Classpath Exception which is available at\n// https://www.gnu.org/software/classpath/license.html.\n//\n// SPDX-License-Identifier: EPL-2.0 OR GPL-2.0 WITH Classpath-exception-2.0\n// *****************************************************************************\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n// copied and modified from https://github.com/Microsoft/vscode/blob/master/src/vs/workbench/services/workspace/node/workspaceEditingService.ts\n\nimport * as paths from 'path';\nimport * as theia from '@theia/plugin';\nimport { Event, Emitter } from '@theia/core/lib/common/event';\nimport { CancellationToken } from '@theia/core/lib/common/cancellation';\nimport {\n    WorkspaceExt,\n    WorkspaceFolderPickOptionsMain,\n    WorkspaceMain,\n    PLUGIN_RPC_CONTEXT as Ext,\n    MainMessageType,\n} from '../common/plugin-api-rpc';\nimport { Path } from '@theia/core/lib/common/path';\nimport { RPCProtocol } from '../common/rpc-protocol';\nimport { WorkspaceRootsChangeEvent, SearchInWorkspaceResult, Range } from '../common/plugin-api-rpc-model';\nimport { EditorsAndDocumentsExtImpl } from './editors-and-documents';\nimport { URI } from './types-impl';\nimport { normalize } from '@theia/core/lib/common/paths';\nimport { relative } from '../common/paths-util';\nimport { Schemes } from '../common/uri-components';\nimport { toWorkspaceFolder } from './type-converters';\nimport { MessageRegistryExt } from './message-registry';\nimport * as Converter from './type-converters';\nimport { FileStat } from '@theia/filesystem/lib/common/files';\n\nexport class WorkspaceExtImpl implements WorkspaceExt {\n\n    private proxy: WorkspaceMain;\n\n    private workspaceFoldersChangedEmitter = new Emitter<theia.WorkspaceFoldersChangeEvent>();\n    public readonly onDidChangeWorkspaceFolders: Event<theia.WorkspaceFoldersChangeEvent> = this.workspaceFoldersChangedEmitter.event;\n\n    private folders: theia.WorkspaceFolder[] | undefined;\n    private workspaceFileUri: theia.Uri | undefined;\n    private documentContentProviders = new Map<string, theia.TextDocumentContentProvider>();\n    private searchInWorkspaceEmitter: Emitter<{ result?: theia.TextSearchResult, searchId: number }> = new Emitter<{ result?: theia.TextSearchResult, searchId: number }>();\n    protected workspaceSearchSequence: number = 0;\n\n    private _trusted?: boolean = undefined;\n    private didGrantWorkspaceTrustEmitter = new Emitter<void>();\n    public readonly onDidGrantWorkspaceTrust: Event<void> = this.didGrantWorkspaceTrustEmitter.event;\n\n    constructor(rpc: RPCProtocol,\n        private editorsAndDocuments: EditorsAndDocumentsExtImpl,\n        private messageService: MessageRegistryExt) {\n        this.proxy = rpc.getProxy(Ext.WORKSPACE_MAIN);\n    }\n\n    get rootPath(): string | undefined {\n        const folder = this.folders && this.folders[0];\n        return folder && folder.uri.fsPath;\n    }\n\n    get workspaceFolders(): theia.WorkspaceFolder[] | undefined {\n        if (this.folders && this.folders.length === 0) {\n            return undefined;\n        }\n        return this.folders;\n    }\n\n    get workspaceFile(): theia.Uri | undefined {\n        return this.workspaceFileUri;\n    }\n\n    get name(): string | undefined {\n        if (this.workspaceFolders && this.workspaceFolders.length > 0) {\n            return new Path(this.workspaceFolders[0].uri.path).base;\n        }\n\n        return undefined;\n    }\n\n    $onWorkspaceFoldersChanged(event: WorkspaceRootsChangeEvent): void {\n        const newRoots = event.roots || [];\n        const newFolders = newRoots.map((root, index) => this.toWorkspaceFolder(root, index));\n        const delta = this.deltaFolders(this.folders, newFolders);\n\n        this.folders = newFolders;\n\n        this.refreshWorkspaceFile();\n\n        this.workspaceFoldersChangedEmitter.fire(delta);\n    }\n\n    $onWorkspaceLocationChanged(stat: FileStat | undefined): void {\n        this.updateWorkSpace(stat);\n    }\n\n    $onTextSearchResult(searchRequestId: number, done: boolean, result?: SearchInWorkspaceResult): void {\n        if (result) {\n            result.matches.map(next => {\n                const range: Range = {\n                    endColumn: next.character + next.length,\n                    endLineNumber: next.line + 1,\n                    startColumn: next.character,\n                    startLineNumber: next.line + 1\n                };\n                const tRange = <theia.Range>Converter.toRange(range);\n                const searchResult: theia.TextSearchMatch = {\n                    uri: URI.parse(result.fileUri),\n                    preview: {\n                        text: typeof next.lineText === 'string' ? next.lineText : next.lineText.text,\n                        matches: tRange\n                    },\n                    ranges: tRange\n                };\n                return searchResult;\n            }).forEach(next => this.searchInWorkspaceEmitter.fire({ result: next, searchId: searchRequestId }));\n        } else if (done) {\n            this.searchInWorkspaceEmitter.fire({ searchId: searchRequestId });\n        }\n    }\n\n    private deltaFolders(currentFolders: theia.WorkspaceFolder[] = [], newFolders: theia.WorkspaceFolder[] = []): {\n        added: theia.WorkspaceFolder[]\n        removed: theia.WorkspaceFolder[]\n    } {\n        const added = this.foldersDiff(newFolders, currentFolders);\n        const removed = this.foldersDiff(currentFolders, newFolders);\n        return { added, removed };\n    }\n\n    private foldersDiff(folder1: theia.WorkspaceFolder[] = [], folder2: theia.WorkspaceFolder[] = []): theia.WorkspaceFolder[] {\n        const map = new Map();\n        folder1.forEach(folder => map.set(folder.uri.toString(), folder));\n        folder2.forEach(folder => map.delete(folder.uri.toString()));\n\n        return folder1.filter(folder => map.has(folder.uri.toString()));\n    }\n\n    private toWorkspaceFolder(root: string, index: number): theia.WorkspaceFolder {\n        const uri = URI.parse(root);\n        const path = new Path(uri.path);\n        return {\n            uri: uri,\n            name: path.base,\n            index: index\n        };\n    }\n\n    pickWorkspaceFolder(options?: theia.WorkspaceFolderPickOptions): PromiseLike<theia.WorkspaceFolder | undefined> {\n        return new Promise((resolve, reject) => {\n            const optionsMain: WorkspaceFolderPickOptionsMain = {\n                placeHolder: options && options.placeHolder ? options.placeHolder : undefined,\n                ignoreFocusOut: options && options.ignoreFocusOut\n            };\n\n            this.proxy.$pickWorkspaceFolder(optionsMain).then(value => {\n                resolve(value);\n            });\n        });\n    }\n\n    findFiles(include: theia.GlobPattern, exclude?: theia.GlobPattern | null, maxResults?: number,\n        token: CancellationToken = CancellationToken.None): PromiseLike<URI[]> {\n        let includePattern: string;\n        let includeFolderUri: string | undefined;\n        if (include) {\n            if (typeof include === 'string') {\n                includePattern = include;\n            } else {\n                includePattern = include.pattern;\n                includeFolderUri = URI.file(include.base).toString();\n            }\n        } else {\n            includePattern = '';\n        }\n\n        let excludePatternOrDisregardExcludes: string | false;\n        if (exclude === undefined) {\n            excludePatternOrDisregardExcludes = ''; // default excludes\n        } else if (exclude) {\n            if (typeof exclude === 'string') {\n                excludePatternOrDisregardExcludes = exclude;\n            } else {\n                excludePatternOrDisregardExcludes = exclude.pattern;\n            }\n        } else {\n            excludePatternOrDisregardExcludes = false; // no excludes\n        }\n\n        if (token && token.isCancellationRequested) {\n            return Promise.resolve([]);\n        }\n\n        return this.proxy.$startFileSearch(includePattern, includeFolderUri, excludePatternOrDisregardExcludes, maxResults, token)\n            .then(data => Array.isArray(data) ? data.map(uri => URI.revive(uri)) : []);\n    }\n\n    findTextInFiles(query: theia.TextSearchQuery, optionsOrCallback: theia.FindTextInFilesOptions | ((result: theia.TextSearchResult) => void),\n        callbackOrToken?: CancellationToken | ((result: theia.TextSearchResult) => void), token?: CancellationToken): Promise<theia.TextSearchComplete> {\n        let options: theia.FindTextInFilesOptions;\n        let callback: (result: theia.TextSearchResult) => void;\n\n        if (typeof optionsOrCallback === 'object') {\n            options = optionsOrCallback;\n            callback = callbackOrToken as (result: theia.TextSearchResult) => void;\n        } else {\n            options = {};\n            callback = optionsOrCallback;\n            token = callbackOrToken as CancellationToken;\n        }\n        const nextSearchID = this.workspaceSearchSequence + 1;\n        this.workspaceSearchSequence = nextSearchID;\n        const disposable = this.searchInWorkspaceEmitter.event(searchResult => {\n            if (searchResult.searchId === nextSearchID) {\n                if (searchResult.result) {\n                    callback(searchResult.result);\n                } else {\n                    disposable.dispose();\n                }\n            }\n        });\n        if (token) {\n            token.onCancellationRequested(() => {\n                disposable.dispose();\n            });\n        }\n        return this.proxy.$findTextInFiles(query, options || {}, nextSearchID, token);\n    }\n\n    registerTextDocumentContentProvider(scheme: string, provider: theia.TextDocumentContentProvider): theia.Disposable {\n        // `file` and `untitled` schemas are reserved by `workspace.openTextDocument` API:\n        // `file`-scheme for opening a file\n        // `untitled`-scheme for opening a new file that should be saved\n        if (scheme === Schemes.file || scheme === Schemes.untitled) {\n            throw new Error(`Text Content Document Provider for scheme '${scheme}' is already registered`);\n        } else if (this.documentContentProviders.has(scheme)) {\n            // TODO: we should be able to handle multiple registrations, but for now we should ensure that it doesn't crash plugin activation.\n            console.warn(`Repeat registration of TextContentDocumentProvider for scheme '${scheme}'. This registration will be ignored.`);\n            return { dispose: () => { } };\n        }\n\n        this.documentContentProviders.set(scheme, provider);\n        this.proxy.$registerTextDocumentContentProvider(scheme);\n\n        let onDidChangeSubscription: theia.Disposable;\n        if (typeof provider.onDidChange === 'function') {\n            onDidChangeSubscription = provider.onDidChange(async uri => {\n                if (uri.scheme === scheme && this.editorsAndDocuments.getDocument(uri.toString())) {\n                    const content = await this.$provideTextDocumentContent(uri.toString());\n                    if (content) {\n                        this.proxy.$onTextDocumentContentChange(uri.toString(), content);\n                    }\n                }\n            });\n        }\n\n        const instance = this;\n        return {\n            dispose(): void {\n                if (instance.documentContentProviders.delete(scheme)) {\n                    instance.proxy.$unregisterTextDocumentContentProvider(scheme);\n                }\n\n                if (onDidChangeSubscription) {\n                    onDidChangeSubscription.dispose();\n                }\n            }\n        };\n    }\n\n    async $provideTextDocumentContent(documentURI: string): Promise<string | undefined | null> {\n        const uri = URI.parse(documentURI);\n        const provider = this.documentContentProviders.get(uri.scheme);\n        if (provider) {\n            return provider.provideTextDocumentContent(uri, CancellationToken.None);\n        }\n\n        return undefined;\n    }\n\n    getWorkspaceFolder(uri: theia.Uri, resolveParent?: boolean): theia.WorkspaceFolder | undefined {\n        if (!this.folders || !this.folders.length) {\n            return undefined;\n        }\n\n        function dirname(resource: URI): URI {\n            if (resource.scheme === 'file') {\n                return URI.file(paths.dirname(resource.fsPath));\n            }\n            return resource.with({\n                path: paths.dirname(resource.path)\n            });\n        }\n\n        if (resolveParent && this.hasFolder(uri)) {\n            uri = dirname(uri);\n        }\n\n        const resourcePath = uri.toString();\n\n        let workspaceFolder: theia.WorkspaceFolder | undefined;\n        for (let i = 0; i < this.folders.length; i++) {\n            const folder = this.folders[i];\n            const folderPath = folder.uri.toString();\n\n            if (resourcePath === folderPath) {\n                return toWorkspaceFolder(folder);\n            }\n\n            if (resourcePath.startsWith(folderPath)\n                && resourcePath[folderPath.length] === '/'\n                && (!workspaceFolder || folderPath.length > workspaceFolder.uri.toString().length)) {\n                workspaceFolder = folder;\n            }\n        }\n        return workspaceFolder;\n    }\n\n    private hasFolder(uri: URI): boolean {\n        if (!this.folders) {\n            return false;\n        }\n        return this.folders.some(folder => folder.uri.toString() === uri.toString());\n    }\n\n    getRelativePath(pathOrUri: string | theia.Uri, includeWorkspace?: boolean): string | undefined {\n        let path: string | undefined;\n        if (typeof pathOrUri === 'string') {\n            path = pathOrUri;\n        } else if (typeof pathOrUri !== 'undefined') {\n            path = pathOrUri.fsPath;\n        }\n\n        if (!path) {\n            return path;\n        }\n\n        const folder = this.getWorkspaceFolder(\n            typeof pathOrUri === 'string' ? URI.file(pathOrUri) : pathOrUri,\n            true\n        ) as theia.WorkspaceFolder;\n\n        if (!folder) {\n            return path;\n        }\n\n        if (typeof includeWorkspace === 'undefined') {\n            includeWorkspace = this.folders!.length > 1;\n        }\n\n        let result = relative(folder.uri.fsPath, path);\n        if (includeWorkspace) {\n            result = `${folder.name}/${result}`;\n        }\n        return normalize(result, true);\n    }\n\n    updateWorkspaceFolders(start: number, deleteCount: number, ...workspaceFoldersToAdd: { uri: theia.Uri, name?: string }[]): boolean {\n        const rootsToAdd = new Set<string>();\n        if (Array.isArray(workspaceFoldersToAdd)) {\n            workspaceFoldersToAdd.forEach(folderToAdd => {\n                const uri = URI.isUri(folderToAdd.uri) && folderToAdd.uri.toString();\n                if (uri && !rootsToAdd.has(uri)) {\n                    rootsToAdd.add(uri);\n                }\n            });\n        }\n\n        if ([start, deleteCount].some(i => typeof i !== 'number' || i < 0)) {\n            return false; // validate numbers\n        }\n\n        if (deleteCount === 0 && rootsToAdd.size === 0) {\n            return false; // nothing to delete or add\n        }\n\n        const currentWorkspaceFolders = this.workspaceFolders || [];\n        if (start + deleteCount > currentWorkspaceFolders.length) {\n            return false; // cannot delete more than we have\n        }\n\n        // Simulate the updateWorkspaceFolders method on our data to do more validation\n        const newWorkspaceFolders = currentWorkspaceFolders.slice(0);\n        newWorkspaceFolders.splice(start, deleteCount, ...[...rootsToAdd].map(uri => ({ uri: URI.parse(uri), name: undefined!, index: undefined! })));\n\n        for (let i = 0; i < newWorkspaceFolders.length; i++) {\n            const folder = newWorkspaceFolders[i];\n            if (newWorkspaceFolders.some((otherFolder, index) => index !== i && folder.uri.toString() === otherFolder.uri.toString())) {\n                return false; // cannot add the same folder multiple times\n            }\n        }\n\n        const { added, removed } = this.deltaFolders(currentWorkspaceFolders, newWorkspaceFolders);\n        if (added.length === 0 && removed.length === 0) {\n            return false; // nothing actually changed\n        }\n\n        // Trigger on main side\n        this.proxy.$updateWorkspaceFolders(start, deleteCount, ...rootsToAdd).then(undefined, error =>\n            this.messageService.showMessage(MainMessageType.Error, `Failed to update workspace folders: ${error}`)\n        );\n\n        return true;\n    }\n\n    private async refreshWorkspaceFile(): Promise<void> {\n        const workspace = await this.proxy.$getWorkspace();\n        this.updateWorkSpace(workspace);\n    }\n\n    private updateWorkSpace(workspace: FileStat | undefined): void {\n        // A workspace directory implies an undefined workspace file\n        if (workspace && !workspace.isDirectory) {\n            this.workspaceFileUri = URI.parse(workspace.resource.toString());\n        }\n    }\n\n    get trusted(): boolean {\n        if (this._trusted === undefined) {\n            this.requestWorkspaceTrust();\n        }\n        return !!this._trusted;\n    }\n\n    requestWorkspaceTrust(options?: theia.WorkspaceTrustRequestOptions): Promise<boolean | undefined> {\n        return this.proxy.$requestWorkspaceTrust(options);\n    }\n\n    $onWorkspaceTrustChanged(trust: boolean | undefined): void {\n        if (!this._trusted && trust) {\n            this._trusted = trust;\n            this.didGrantWorkspaceTrustEmitter.fire();\n        }\n    }\n\n}\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar customInspectSymbol =\n  (typeof Symbol === 'function' && typeof Symbol['for'] === 'function') // eslint-disable-line dot-notation\n    ? Symbol['for']('nodejs.util.inspect.custom') // eslint-disable-line dot-notation\n    : null\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\nvar K_MAX_LENGTH = 0x7fffffff\nexports.kMaxLength = K_MAX_LENGTH\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Print warning and recommend using `buffer` v4.x which has an Object\n *               implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * We report that the browser does not support typed arrays if the are not subclassable\n * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`\n * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support\n * for __proto__ and has a buggy typed array implementation.\n */\nBuffer.TYPED_ARRAY_SUPPORT = typedArraySupport()\n\nif (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&\n    typeof console.error === 'function') {\n  console.error(\n    'This browser lacks typed array (Uint8Array) support which is required by ' +\n    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'\n  )\n}\n\nfunction typedArraySupport () {\n  // Can typed array instances can be augmented?\n  try {\n    var arr = new Uint8Array(1)\n    var proto = { foo: function () { return 42 } }\n    Object.setPrototypeOf(proto, Uint8Array.prototype)\n    Object.setPrototypeOf(arr, proto)\n    return arr.foo() === 42\n  } catch (e) {\n    return false\n  }\n}\n\nObject.defineProperty(Buffer.prototype, 'parent', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.buffer\n  }\n})\n\nObject.defineProperty(Buffer.prototype, 'offset', {\n  enumerable: true,\n  get: function () {\n    if (!Buffer.isBuffer(this)) return undefined\n    return this.byteOffset\n  }\n})\n\nfunction createBuffer (length) {\n  if (length > K_MAX_LENGTH) {\n    throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"')\n  }\n  // Return an augmented `Uint8Array` instance\n  var buf = new Uint8Array(length)\n  Object.setPrototypeOf(buf, Buffer.prototype)\n  return buf\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new TypeError(\n        'The \"string\" argument must be of type string. Received type number'\n      )\n    }\n    return allocUnsafe(arg)\n  }\n  return from(arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\nfunction from (value, encodingOrOffset, length) {\n  if (typeof value === 'string') {\n    return fromString(value, encodingOrOffset)\n  }\n\n  if (ArrayBuffer.isView(value)) {\n    return fromArrayView(value)\n  }\n\n  if (value == null) {\n    throw new TypeError(\n      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n      'or Array-like Object. Received type ' + (typeof value)\n    )\n  }\n\n  if (isInstance(value, ArrayBuffer) ||\n      (value && isInstance(value.buffer, ArrayBuffer))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof SharedArrayBuffer !== 'undefined' &&\n      (isInstance(value, SharedArrayBuffer) ||\n      (value && isInstance(value.buffer, SharedArrayBuffer)))) {\n    return fromArrayBuffer(value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'number') {\n    throw new TypeError(\n      'The \"value\" argument must not be of type number. Received type number'\n    )\n  }\n\n  var valueOf = value.valueOf && value.valueOf()\n  if (valueOf != null && valueOf !== value) {\n    return Buffer.from(valueOf, encodingOrOffset, length)\n  }\n\n  var b = fromObject(value)\n  if (b) return b\n\n  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&\n      typeof value[Symbol.toPrimitive] === 'function') {\n    return Buffer.from(\n      value[Symbol.toPrimitive]('string'), encodingOrOffset, length\n    )\n  }\n\n  throw new TypeError(\n    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +\n    'or Array-like Object. Received type ' + (typeof value)\n  )\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(value, encodingOrOffset, length)\n}\n\n// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:\n// https://github.com/feross/buffer/pull/148\nObject.setPrototypeOf(Buffer.prototype, Uint8Array.prototype)\nObject.setPrototypeOf(Buffer, Uint8Array)\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be of type number')\n  } else if (size < 0) {\n    throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n  }\n}\n\nfunction alloc (size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpreted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(size).fill(fill, encoding)\n      : createBuffer(size).fill(fill)\n  }\n  return createBuffer(size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(size, fill, encoding)\n}\n\nfunction allocUnsafe (size) {\n  assertSize(size)\n  return createBuffer(size < 0 ? 0 : checked(size) | 0)\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(size)\n}\n\nfunction fromString (string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('Unknown encoding: ' + encoding)\n  }\n\n  var length = byteLength(string, encoding) | 0\n  var buf = createBuffer(length)\n\n  var actual = buf.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    buf = buf.slice(0, actual)\n  }\n\n  return buf\n}\n\nfunction fromArrayLike (array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  var buf = createBuffer(length)\n  for (var i = 0; i < length; i += 1) {\n    buf[i] = array[i] & 255\n  }\n  return buf\n}\n\nfunction fromArrayView (arrayView) {\n  if (isInstance(arrayView, Uint8Array)) {\n    var copy = new Uint8Array(arrayView)\n    return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength)\n  }\n  return fromArrayLike(arrayView)\n}\n\nfunction fromArrayBuffer (array, byteOffset, length) {\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\"offset\" is outside of buffer bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\"length\" is outside of buffer bounds')\n  }\n\n  var buf\n  if (byteOffset === undefined && length === undefined) {\n    buf = new Uint8Array(array)\n  } else if (length === undefined) {\n    buf = new Uint8Array(array, byteOffset)\n  } else {\n    buf = new Uint8Array(array, byteOffset, length)\n  }\n\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(buf, Buffer.prototype)\n\n  return buf\n}\n\nfunction fromObject (obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    var buf = createBuffer(len)\n\n    if (buf.length === 0) {\n      return buf\n    }\n\n    obj.copy(buf, 0, 0, len)\n    return buf\n  }\n\n  if (obj.length !== undefined) {\n    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {\n      return createBuffer(0)\n    }\n    return fromArrayLike(obj)\n  }\n\n  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {\n    return fromArrayLike(obj.data)\n  }\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= K_MAX_LENGTH) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return b != null && b._isBuffer === true &&\n    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false\n}\n\nBuffer.compare = function compare (a, b) {\n  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)\n  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError(\n      'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n    )\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!Array.isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (isInstance(buf, Uint8Array)) {\n      if (pos + buf.length > buffer.length) {\n        Buffer.from(buf).copy(buffer, pos)\n      } else {\n        Uint8Array.prototype.set.call(\n          buffer,\n          buf,\n          pos\n        )\n      }\n    } else if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    } else {\n      buf.copy(buffer, pos)\n    }\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    throw new TypeError(\n      'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. ' +\n      'Received type ' + typeof string\n    )\n  }\n\n  var len = string.length\n  var mustMatch = (arguments.length > 2 && arguments[2] === true)\n  if (!mustMatch && len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) {\n          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8\n        }\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coercion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)\n// to detect a Buffer instance. It's not possible to use `instanceof Buffer`\n// reliably in a browserify context because there could be multiple different\n// copies of the 'buffer' package in use. This method works even for Buffer\n// instances that were created from another copy of the `buffer` package.\n// See: https://github.com/feross/buffer/issues/154\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.toLocaleString = Buffer.prototype.toString\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()\n  if (this.length > max) str += ' ... '\n  return '<Buffer ' + str + '>'\n}\nif (customInspectSymbol) {\n  Buffer.prototype[customInspectSymbol] = Buffer.prototype.inspect\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (isInstance(target, Uint8Array)) {\n    target = Buffer.from(target, target.offset, target.byteLength)\n  }\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError(\n      'The \"target\" argument must be one of type Buffer or Uint8Array. ' +\n      'Received type ' + (typeof target)\n    )\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset // Coerce to Number.\n  if (numberIsNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [val], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  var strLen = string.length\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (numberIsNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset >>> 0\n    if (isFinite(length)) {\n      length = length >>> 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return asciiWrite(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF)\n      ? 4\n      : (firstByte > 0xDF)\n          ? 3\n          : (firstByte > 0xBF)\n              ? 2\n              : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += hexSliceLookupTable[buf[i]]\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  // If bytes.length is odd, the last 8 bits must be ignored (same as node.js)\n  for (var i = 0; i < bytes.length - 1; i += 2) {\n    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf = this.subarray(start, end)\n  // Return an augmented `Uint8Array` instance\n  Object.setPrototypeOf(newBuf, Buffer.prototype)\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUintLE =\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUintBE =\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUint8 =\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUint16LE =\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUint16BE =\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUint32LE =\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUint32BE =\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  offset = offset >>> 0\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUintLE =\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUintBE =\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  byteLength = byteLength >>> 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUint8 =\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeUint16LE =\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint16BE =\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeUint32LE =\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset + 3] = (value >>> 24)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 1] = (value >>> 8)\n  this[offset] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeUint32BE =\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    var limit = Math.pow(2, (8 * byteLength) - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  this[offset] = (value >>> 8)\n  this[offset + 1] = (value & 0xff)\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  this[offset] = (value & 0xff)\n  this[offset + 1] = (value >>> 8)\n  this[offset + 2] = (value >>> 16)\n  this[offset + 3] = (value >>> 24)\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  this[offset] = (value >>> 24)\n  this[offset + 1] = (value >>> 16)\n  this[offset + 2] = (value >>> 8)\n  this[offset + 3] = (value & 0xff)\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  value = +value\n  offset = offset >>> 0\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n\n  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {\n    // Use built-in when available, missing from IE11\n    this.copyWithin(targetStart, start, end)\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, end),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if ((encoding === 'utf8' && code < 128) ||\n          encoding === 'latin1') {\n        // Fast path: If `val` fits into a single byte, use that numeric value.\n        val = code\n      }\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  } else if (typeof val === 'boolean') {\n    val = Number(val)\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : Buffer.from(val, encoding)\n    var len = bytes.length\n    if (len === 0) {\n      throw new TypeError('The value \"' + val +\n        '\" is invalid for argument \"value\"')\n    }\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node takes equal signs as end of the Base64 encoding\n  str = str.split('=')[0]\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = str.trim().replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\n// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass\n// the `instanceof` check but they should be treated as of that type.\n// See: https://github.com/feross/buffer/issues/166\nfunction isInstance (obj, type) {\n  return obj instanceof type ||\n    (obj != null && obj.constructor != null && obj.constructor.name != null &&\n      obj.constructor.name === type.name)\n}\nfunction numberIsNaN (obj) {\n  // For IE11 support\n  return obj !== obj // eslint-disable-line no-self-compare\n}\n\n// Create lookup table for `toString('hex')`\n// See: https://github.com/feross/buffer/issues/219\nvar hexSliceLookupTable = (function () {\n  var alphabet = '0123456789abcdef'\n  var table = new Array(256)\n  for (var i = 0; i < 16; ++i) {\n    var i16 = i * 16\n    for (var j = 0; j < 16; ++j) {\n      table[i16 + j] = alphabet[i] + alphabet[j]\n    }\n  }\n  return table\n})()\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Multibyte codec. In this scheme, a character is represented by 1 or more bytes.\n// Our codec supports UTF-16 surrogates, extensions for GB18030 and unicode sequences.\n// To save memory and loading time, we read table files only when requested.\n\nexports._dbcs = DBCSCodec;\n\nvar UNASSIGNED = -1,\n    GB18030_CODE = -2,\n    SEQ_START  = -10,\n    NODE_START = -1000,\n    UNASSIGNED_NODE = new Array(0x100),\n    DEF_CHAR = -1;\n\nfor (var i = 0; i < 0x100; i++)\n    UNASSIGNED_NODE[i] = UNASSIGNED;\n\n\n// Class DBCSCodec reads and initializes mapping tables.\nfunction DBCSCodec(codecOptions, iconv) {\n    this.encodingName = codecOptions.encodingName;\n    if (!codecOptions)\n        throw new Error(\"DBCS codec is called without the data.\")\n    if (!codecOptions.table)\n        throw new Error(\"Encoding '\" + this.encodingName + \"' has no data.\");\n\n    // Load tables.\n    var mappingTable = codecOptions.table();\n\n\n    // Decode tables: MBCS -> Unicode.\n\n    // decodeTables is a trie, encoded as an array of arrays of integers. Internal arrays are trie nodes and all have len = 256.\n    // Trie root is decodeTables[0].\n    // Values: >=  0 -> unicode character code. can be > 0xFFFF\n    //         == UNASSIGNED -> unknown/unassigned sequence.\n    //         == GB18030_CODE -> this is the end of a GB18030 4-byte sequence.\n    //         <= NODE_START -> index of the next node in our trie to process next byte.\n    //         <= SEQ_START  -> index of the start of a character code sequence, in decodeTableSeq.\n    this.decodeTables = [];\n    this.decodeTables[0] = UNASSIGNED_NODE.slice(0); // Create root node.\n\n    // Sometimes a MBCS char corresponds to a sequence of unicode chars. We store them as arrays of integers here. \n    this.decodeTableSeq = [];\n\n    // Actual mapping tables consist of chunks. Use them to fill up decode tables.\n    for (var i = 0; i < mappingTable.length; i++)\n        this._addDecodeChunk(mappingTable[i]);\n\n    // Load & create GB18030 tables when needed.\n    if (typeof codecOptions.gb18030 === 'function') {\n        this.gb18030 = codecOptions.gb18030(); // Load GB18030 ranges.\n\n        // Add GB18030 common decode nodes.\n        var commonThirdByteNodeIdx = this.decodeTables.length;\n        this.decodeTables.push(UNASSIGNED_NODE.slice(0));\n\n        var commonFourthByteNodeIdx = this.decodeTables.length;\n        this.decodeTables.push(UNASSIGNED_NODE.slice(0));\n\n        // Fill out the tree\n        var firstByteNode = this.decodeTables[0];\n        for (var i = 0x81; i <= 0xFE; i++) {\n            var secondByteNode = this.decodeTables[NODE_START - firstByteNode[i]];\n            for (var j = 0x30; j <= 0x39; j++) {\n                if (secondByteNode[j] === UNASSIGNED) {\n                    secondByteNode[j] = NODE_START - commonThirdByteNodeIdx;\n                } else if (secondByteNode[j] > NODE_START) {\n                    throw new Error(\"gb18030 decode tables conflict at byte 2\");\n                }\n\n                var thirdByteNode = this.decodeTables[NODE_START - secondByteNode[j]];\n                for (var k = 0x81; k <= 0xFE; k++) {\n                    if (thirdByteNode[k] === UNASSIGNED) {\n                        thirdByteNode[k] = NODE_START - commonFourthByteNodeIdx;\n                    } else if (thirdByteNode[k] === NODE_START - commonFourthByteNodeIdx) {\n                        continue;\n                    } else if (thirdByteNode[k] > NODE_START) {\n                        throw new Error(\"gb18030 decode tables conflict at byte 3\");\n                    }\n\n                    var fourthByteNode = this.decodeTables[NODE_START - thirdByteNode[k]];\n                    for (var l = 0x30; l <= 0x39; l++) {\n                        if (fourthByteNode[l] === UNASSIGNED)\n                            fourthByteNode[l] = GB18030_CODE;\n                    }\n                }\n            }\n        }\n    }\n\n    this.defaultCharUnicode = iconv.defaultCharUnicode;\n\n    \n    // Encode tables: Unicode -> DBCS.\n\n    // `encodeTable` is array mapping from unicode char to encoded char. All its values are integers for performance.\n    // Because it can be sparse, it is represented as array of buckets by 256 chars each. Bucket can be null.\n    // Values: >=  0 -> it is a normal char. Write the value (if <=256 then 1 byte, if <=65536 then 2 bytes, etc.).\n    //         == UNASSIGNED -> no conversion found. Output a default char.\n    //         <= SEQ_START  -> it's an index in encodeTableSeq, see below. The character starts a sequence.\n    this.encodeTable = [];\n    \n    // `encodeTableSeq` is used when a sequence of unicode characters is encoded as a single code. We use a tree of\n    // objects where keys correspond to characters in sequence and leafs are the encoded dbcs values. A special DEF_CHAR key\n    // means end of sequence (needed when one sequence is a strict subsequence of another).\n    // Objects are kept separately from encodeTable to increase performance.\n    this.encodeTableSeq = [];\n\n    // Some chars can be decoded, but need not be encoded.\n    var skipEncodeChars = {};\n    if (codecOptions.encodeSkipVals)\n        for (var i = 0; i < codecOptions.encodeSkipVals.length; i++) {\n            var val = codecOptions.encodeSkipVals[i];\n            if (typeof val === 'number')\n                skipEncodeChars[val] = true;\n            else\n                for (var j = val.from; j <= val.to; j++)\n                    skipEncodeChars[j] = true;\n        }\n        \n    // Use decode trie to recursively fill out encode tables.\n    this._fillEncodeTable(0, 0, skipEncodeChars);\n\n    // Add more encoding pairs when needed.\n    if (codecOptions.encodeAdd) {\n        for (var uChar in codecOptions.encodeAdd)\n            if (Object.prototype.hasOwnProperty.call(codecOptions.encodeAdd, uChar))\n                this._setEncodeChar(uChar.charCodeAt(0), codecOptions.encodeAdd[uChar]);\n    }\n\n    this.defCharSB  = this.encodeTable[0][iconv.defaultCharSingleByte.charCodeAt(0)];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = this.encodeTable[0]['?'];\n    if (this.defCharSB === UNASSIGNED) this.defCharSB = \"?\".charCodeAt(0);\n}\n\nDBCSCodec.prototype.encoder = DBCSEncoder;\nDBCSCodec.prototype.decoder = DBCSDecoder;\n\n// Decoder helpers\nDBCSCodec.prototype._getDecodeTrieNode = function(addr) {\n    var bytes = [];\n    for (; addr > 0; addr >>>= 8)\n        bytes.push(addr & 0xFF);\n    if (bytes.length == 0)\n        bytes.push(0);\n\n    var node = this.decodeTables[0];\n    for (var i = bytes.length-1; i > 0; i--) { // Traverse nodes deeper into the trie.\n        var val = node[bytes[i]];\n\n        if (val == UNASSIGNED) { // Create new node.\n            node[bytes[i]] = NODE_START - this.decodeTables.length;\n            this.decodeTables.push(node = UNASSIGNED_NODE.slice(0));\n        }\n        else if (val <= NODE_START) { // Existing node.\n            node = this.decodeTables[NODE_START - val];\n        }\n        else\n            throw new Error(\"Overwrite byte in \" + this.encodingName + \", addr: \" + addr.toString(16));\n    }\n    return node;\n}\n\n\nDBCSCodec.prototype._addDecodeChunk = function(chunk) {\n    // First element of chunk is the hex mbcs code where we start.\n    var curAddr = parseInt(chunk[0], 16);\n\n    // Choose the decoding node where we'll write our chars.\n    var writeTable = this._getDecodeTrieNode(curAddr);\n    curAddr = curAddr & 0xFF;\n\n    // Write all other elements of the chunk to the table.\n    for (var k = 1; k < chunk.length; k++) {\n        var part = chunk[k];\n        if (typeof part === \"string\") { // String, write as-is.\n            for (var l = 0; l < part.length;) {\n                var code = part.charCodeAt(l++);\n                if (0xD800 <= code && code < 0xDC00) { // Decode surrogate\n                    var codeTrail = part.charCodeAt(l++);\n                    if (0xDC00 <= codeTrail && codeTrail < 0xE000)\n                        writeTable[curAddr++] = 0x10000 + (code - 0xD800) * 0x400 + (codeTrail - 0xDC00);\n                    else\n                        throw new Error(\"Incorrect surrogate pair in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n                }\n                else if (0x0FF0 < code && code <= 0x0FFF) { // Character sequence (our own encoding used)\n                    var len = 0xFFF - code + 2;\n                    var seq = [];\n                    for (var m = 0; m < len; m++)\n                        seq.push(part.charCodeAt(l++)); // Simple variation: don't support surrogates or subsequences in seq.\n\n                    writeTable[curAddr++] = SEQ_START - this.decodeTableSeq.length;\n                    this.decodeTableSeq.push(seq);\n                }\n                else\n                    writeTable[curAddr++] = code; // Basic char\n            }\n        } \n        else if (typeof part === \"number\") { // Integer, meaning increasing sequence starting with prev character.\n            var charCode = writeTable[curAddr - 1] + 1;\n            for (var l = 0; l < part; l++)\n                writeTable[curAddr++] = charCode++;\n        }\n        else\n            throw new Error(\"Incorrect type '\" + typeof part + \"' given in \"  + this.encodingName + \" at chunk \" + chunk[0]);\n    }\n    if (curAddr > 0xFF)\n        throw new Error(\"Incorrect chunk in \"  + this.encodingName + \" at addr \" + chunk[0] + \": too long\" + curAddr);\n}\n\n// Encoder helpers\nDBCSCodec.prototype._getEncodeBucket = function(uCode) {\n    var high = uCode >> 8; // This could be > 0xFF because of astral characters.\n    if (this.encodeTable[high] === undefined)\n        this.encodeTable[high] = UNASSIGNED_NODE.slice(0); // Create bucket on demand.\n    return this.encodeTable[high];\n}\n\nDBCSCodec.prototype._setEncodeChar = function(uCode, dbcsCode) {\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n    if (bucket[low] <= SEQ_START)\n        this.encodeTableSeq[SEQ_START-bucket[low]][DEF_CHAR] = dbcsCode; // There's already a sequence, set a single-char subsequence of it.\n    else if (bucket[low] == UNASSIGNED)\n        bucket[low] = dbcsCode;\n}\n\nDBCSCodec.prototype._setEncodeSequence = function(seq, dbcsCode) {\n    \n    // Get the root of character tree according to first character of the sequence.\n    var uCode = seq[0];\n    var bucket = this._getEncodeBucket(uCode);\n    var low = uCode & 0xFF;\n\n    var node;\n    if (bucket[low] <= SEQ_START) {\n        // There's already a sequence with  - use it.\n        node = this.encodeTableSeq[SEQ_START-bucket[low]];\n    }\n    else {\n        // There was no sequence object - allocate a new one.\n        node = {};\n        if (bucket[low] !== UNASSIGNED) node[DEF_CHAR] = bucket[low]; // If a char was set before - make it a single-char subsequence.\n        bucket[low] = SEQ_START - this.encodeTableSeq.length;\n        this.encodeTableSeq.push(node);\n    }\n\n    // Traverse the character tree, allocating new nodes as needed.\n    for (var j = 1; j < seq.length-1; j++) {\n        var oldVal = node[uCode];\n        if (typeof oldVal === 'object')\n            node = oldVal;\n        else {\n            node = node[uCode] = {}\n            if (oldVal !== undefined)\n                node[DEF_CHAR] = oldVal\n        }\n    }\n\n    // Set the leaf to given dbcsCode.\n    uCode = seq[seq.length-1];\n    node[uCode] = dbcsCode;\n}\n\nDBCSCodec.prototype._fillEncodeTable = function(nodeIdx, prefix, skipEncodeChars) {\n    var node = this.decodeTables[nodeIdx];\n    var hasValues = false;\n    var subNodeEmpty = {};\n    for (var i = 0; i < 0x100; i++) {\n        var uCode = node[i];\n        var mbCode = prefix + i;\n        if (skipEncodeChars[mbCode])\n            continue;\n\n        if (uCode >= 0) {\n            this._setEncodeChar(uCode, mbCode);\n            hasValues = true;\n        } else if (uCode <= NODE_START) {\n            var subNodeIdx = NODE_START - uCode;\n            if (!subNodeEmpty[subNodeIdx]) {  // Skip empty subtrees (they are too large in gb18030).\n                var newPrefix = (mbCode << 8) >>> 0;  // NOTE: '>>> 0' keeps 32-bit num positive.\n                if (this._fillEncodeTable(subNodeIdx, newPrefix, skipEncodeChars))\n                    hasValues = true;\n                else\n                    subNodeEmpty[subNodeIdx] = true;\n            }\n        } else if (uCode <= SEQ_START) {\n            this._setEncodeSequence(this.decodeTableSeq[SEQ_START - uCode], mbCode);\n            hasValues = true;\n        }\n    }\n    return hasValues;\n}\n\n\n\n// == Encoder ==================================================================\n\nfunction DBCSEncoder(options, codec) {\n    // Encoder state\n    this.leadSurrogate = -1;\n    this.seqObj = undefined;\n    \n    // Static data\n    this.encodeTable = codec.encodeTable;\n    this.encodeTableSeq = codec.encodeTableSeq;\n    this.defaultCharSingleByte = codec.defCharSB;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSEncoder.prototype.write = function(str) {\n    var newBuf = Buffer.alloc(str.length * (this.gb18030 ? 4 : 3)),\n        leadSurrogate = this.leadSurrogate,\n        seqObj = this.seqObj, nextChar = -1,\n        i = 0, j = 0;\n\n    while (true) {\n        // 0. Get next character.\n        if (nextChar === -1) {\n            if (i == str.length) break;\n            var uCode = str.charCodeAt(i++);\n        }\n        else {\n            var uCode = nextChar;\n            nextChar = -1;    \n        }\n\n        // 1. Handle surrogates.\n        if (0xD800 <= uCode && uCode < 0xE000) { // Char is one of surrogates.\n            if (uCode < 0xDC00) { // We've got lead surrogate.\n                if (leadSurrogate === -1) {\n                    leadSurrogate = uCode;\n                    continue;\n                } else {\n                    leadSurrogate = uCode;\n                    // Double lead surrogate found.\n                    uCode = UNASSIGNED;\n                }\n            } else { // We've got trail surrogate.\n                if (leadSurrogate !== -1) {\n                    uCode = 0x10000 + (leadSurrogate - 0xD800) * 0x400 + (uCode - 0xDC00);\n                    leadSurrogate = -1;\n                } else {\n                    // Incomplete surrogate pair - only trail surrogate found.\n                    uCode = UNASSIGNED;\n                }\n                \n            }\n        }\n        else if (leadSurrogate !== -1) {\n            // Incomplete surrogate pair - only lead surrogate found.\n            nextChar = uCode; uCode = UNASSIGNED; // Write an error, then current char.\n            leadSurrogate = -1;\n        }\n\n        // 2. Convert uCode character.\n        var dbcsCode = UNASSIGNED;\n        if (seqObj !== undefined && uCode != UNASSIGNED) { // We are in the middle of the sequence\n            var resCode = seqObj[uCode];\n            if (typeof resCode === 'object') { // Sequence continues.\n                seqObj = resCode;\n                continue;\n\n            } else if (typeof resCode == 'number') { // Sequence finished. Write it.\n                dbcsCode = resCode;\n\n            } else if (resCode == undefined) { // Current character is not part of the sequence.\n\n                // Try default character for this sequence\n                resCode = seqObj[DEF_CHAR];\n                if (resCode !== undefined) {\n                    dbcsCode = resCode; // Found. Write it.\n                    nextChar = uCode; // Current character will be written too in the next iteration.\n\n                } else {\n                    // TODO: What if we have no default? (resCode == undefined)\n                    // Then, we should write first char of the sequence as-is and try the rest recursively.\n                    // Didn't do it for now because no encoding has this situation yet.\n                    // Currently, just skip the sequence and write current char.\n                }\n            }\n            seqObj = undefined;\n        }\n        else if (uCode >= 0) {  // Regular character\n            var subtable = this.encodeTable[uCode >> 8];\n            if (subtable !== undefined)\n                dbcsCode = subtable[uCode & 0xFF];\n            \n            if (dbcsCode <= SEQ_START) { // Sequence start\n                seqObj = this.encodeTableSeq[SEQ_START-dbcsCode];\n                continue;\n            }\n\n            if (dbcsCode == UNASSIGNED && this.gb18030) {\n                // Use GB18030 algorithm to find character(s) to write.\n                var idx = findIdx(this.gb18030.uChars, uCode);\n                if (idx != -1) {\n                    var dbcsCode = this.gb18030.gbChars[idx] + (uCode - this.gb18030.uChars[idx]);\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 12600); dbcsCode = dbcsCode % 12600;\n                    newBuf[j++] = 0x30 + Math.floor(dbcsCode / 1260); dbcsCode = dbcsCode % 1260;\n                    newBuf[j++] = 0x81 + Math.floor(dbcsCode / 10); dbcsCode = dbcsCode % 10;\n                    newBuf[j++] = 0x30 + dbcsCode;\n                    continue;\n                }\n            }\n        }\n\n        // 3. Write dbcsCode character.\n        if (dbcsCode === UNASSIGNED)\n            dbcsCode = this.defaultCharSingleByte;\n        \n        if (dbcsCode < 0x100) {\n            newBuf[j++] = dbcsCode;\n        }\n        else if (dbcsCode < 0x10000) {\n            newBuf[j++] = dbcsCode >> 8;   // high byte\n            newBuf[j++] = dbcsCode & 0xFF; // low byte\n        }\n        else if (dbcsCode < 0x1000000) {\n            newBuf[j++] = dbcsCode >> 16;\n            newBuf[j++] = (dbcsCode >> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        } else {\n            newBuf[j++] = dbcsCode >>> 24;\n            newBuf[j++] = (dbcsCode >>> 16) & 0xFF;\n            newBuf[j++] = (dbcsCode >>> 8) & 0xFF;\n            newBuf[j++] = dbcsCode & 0xFF;\n        }\n    }\n\n    this.seqObj = seqObj;\n    this.leadSurrogate = leadSurrogate;\n    return newBuf.slice(0, j);\n}\n\nDBCSEncoder.prototype.end = function() {\n    if (this.leadSurrogate === -1 && this.seqObj === undefined)\n        return; // All clean. Most often case.\n\n    var newBuf = Buffer.alloc(10), j = 0;\n\n    if (this.seqObj) { // We're in the sequence.\n        var dbcsCode = this.seqObj[DEF_CHAR];\n        if (dbcsCode !== undefined) { // Write beginning of the sequence.\n            if (dbcsCode < 0x100) {\n                newBuf[j++] = dbcsCode;\n            }\n            else {\n                newBuf[j++] = dbcsCode >> 8;   // high byte\n                newBuf[j++] = dbcsCode & 0xFF; // low byte\n            }\n        } else {\n            // See todo above.\n        }\n        this.seqObj = undefined;\n    }\n\n    if (this.leadSurrogate !== -1) {\n        // Incomplete surrogate pair - only lead surrogate found.\n        newBuf[j++] = this.defaultCharSingleByte;\n        this.leadSurrogate = -1;\n    }\n    \n    return newBuf.slice(0, j);\n}\n\n// Export for testing\nDBCSEncoder.prototype.findIdx = findIdx;\n\n\n// == Decoder ==================================================================\n\nfunction DBCSDecoder(options, codec) {\n    // Decoder state\n    this.nodeIdx = 0;\n    this.prevBytes = [];\n\n    // Static data\n    this.decodeTables = codec.decodeTables;\n    this.decodeTableSeq = codec.decodeTableSeq;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n    this.gb18030 = codec.gb18030;\n}\n\nDBCSDecoder.prototype.write = function(buf) {\n    var newBuf = Buffer.alloc(buf.length*2),\n        nodeIdx = this.nodeIdx, \n        prevBytes = this.prevBytes, prevOffset = this.prevBytes.length,\n        seqStart = -this.prevBytes.length, // idx of the start of current parsed sequence.\n        uCode;\n\n    for (var i = 0, j = 0; i < buf.length; i++) {\n        var curByte = (i >= 0) ? buf[i] : prevBytes[i + prevOffset];\n\n        // Lookup in current trie node.\n        var uCode = this.decodeTables[nodeIdx][curByte];\n\n        if (uCode >= 0) { \n            // Normal character, just use it.\n        }\n        else if (uCode === UNASSIGNED) { // Unknown char.\n            // TODO: Callback with seq.\n            uCode = this.defaultCharUnicode.charCodeAt(0);\n            i = seqStart; // Skip one byte ('i' will be incremented by the for loop) and try to parse again.\n        }\n        else if (uCode === GB18030_CODE) {\n            if (i >= 3) {\n                var ptr = (buf[i-3]-0x81)*12600 + (buf[i-2]-0x30)*1260 + (buf[i-1]-0x81)*10 + (curByte-0x30);\n            } else {\n                var ptr = (prevBytes[i-3+prevOffset]-0x81)*12600 + \n                          (((i-2 >= 0) ? buf[i-2] : prevBytes[i-2+prevOffset])-0x30)*1260 + \n                          (((i-1 >= 0) ? buf[i-1] : prevBytes[i-1+prevOffset])-0x81)*10 + \n                          (curByte-0x30);\n            }\n            var idx = findIdx(this.gb18030.gbChars, ptr);\n            uCode = this.gb18030.uChars[idx] + ptr - this.gb18030.gbChars[idx];\n        }\n        else if (uCode <= NODE_START) { // Go to next trie node.\n            nodeIdx = NODE_START - uCode;\n            continue;\n        }\n        else if (uCode <= SEQ_START) { // Output a sequence of chars.\n            var seq = this.decodeTableSeq[SEQ_START - uCode];\n            for (var k = 0; k < seq.length - 1; k++) {\n                uCode = seq[k];\n                newBuf[j++] = uCode & 0xFF;\n                newBuf[j++] = uCode >> 8;\n            }\n            uCode = seq[seq.length-1];\n        }\n        else\n            throw new Error(\"iconv-lite internal error: invalid decoding table value \" + uCode + \" at \" + nodeIdx + \"/\" + curByte);\n\n        // Write the character to buffer, handling higher planes using surrogate pair.\n        if (uCode >= 0x10000) { \n            uCode -= 0x10000;\n            var uCodeLead = 0xD800 | (uCode >> 10);\n            newBuf[j++] = uCodeLead & 0xFF;\n            newBuf[j++] = uCodeLead >> 8;\n\n            uCode = 0xDC00 | (uCode & 0x3FF);\n        }\n        newBuf[j++] = uCode & 0xFF;\n        newBuf[j++] = uCode >> 8;\n\n        // Reset trie node.\n        nodeIdx = 0; seqStart = i+1;\n    }\n\n    this.nodeIdx = nodeIdx;\n    this.prevBytes = (seqStart >= 0)\n        ? Array.prototype.slice.call(buf, seqStart)\n        : prevBytes.slice(seqStart + prevOffset).concat(Array.prototype.slice.call(buf));\n\n    return newBuf.slice(0, j).toString('ucs2');\n}\n\nDBCSDecoder.prototype.end = function() {\n    var ret = '';\n\n    // Try to parse all remaining chars.\n    while (this.prevBytes.length > 0) {\n        // Skip 1 character in the buffer.\n        ret += this.defaultCharUnicode;\n        var bytesArr = this.prevBytes.slice(1);\n\n        // Parse remaining as usual.\n        this.prevBytes = [];\n        this.nodeIdx = 0;\n        if (bytesArr.length > 0)\n            ret += this.write(bytesArr);\n    }\n\n    this.prevBytes = [];\n    this.nodeIdx = 0;\n    return ret;\n}\n\n// Binary search for GB18030. Returns largest i such that table[i] <= val.\nfunction findIdx(table, val) {\n    if (table[0] > val)\n        return -1;\n\n    var l = 0, r = table.length;\n    while (l < r-1) { // always table[l] <= val < table[r]\n        var mid = l + ((r-l+1) >> 1);\n        if (table[mid] <= val)\n            l = mid;\n        else\n            r = mid;\n    }\n    return l;\n}\n\n","\"use strict\";\n\n// Description of supported double byte encodings and aliases.\n// Tables are not require()-d until they are needed to speed up library load.\n// require()-s are direct to support Browserify.\n\nmodule.exports = {\n    \n    // == Japanese/ShiftJIS ====================================================\n    // All japanese encodings are based on JIS X set of standards:\n    // JIS X 0201 - Single-byte encoding of ASCII +  + Kana chars at 0xA1-0xDF.\n    // JIS X 0208 - Main set of 6879 characters, placed in 94x94 plane, to be encoded by 2 bytes. \n    //              Has several variations in 1978, 1983, 1990 and 1997.\n    // JIS X 0212 - Supplementary plane of 6067 chars in 94x94 plane. 1990. Effectively dead.\n    // JIS X 0213 - Extension and modern replacement of 0208 and 0212. Total chars: 11233.\n    //              2 planes, first is superset of 0208, second - revised 0212.\n    //              Introduced in 2000, revised 2004. Some characters are in Unicode Plane 2 (0x2xxxx)\n\n    // Byte encodings are:\n    //  * Shift_JIS: Compatible with 0201, uses not defined chars in top half as lead bytes for double-byte\n    //               encoding of 0208. Lead byte ranges: 0x81-0x9F, 0xE0-0xEF; Trail byte ranges: 0x40-0x7E, 0x80-0x9E, 0x9F-0xFC.\n    //               Windows CP932 is a superset of Shift_JIS. Some companies added more chars, notably KDDI.\n    //  * EUC-JP:    Up to 3 bytes per character. Used mostly on *nixes.\n    //               0x00-0x7F       - lower part of 0201\n    //               0x8E, 0xA1-0xDF - upper part of 0201\n    //               (0xA1-0xFE)x2   - 0208 plane (94x94).\n    //               0x8F, (0xA1-0xFE)x2 - 0212 plane (94x94).\n    //  * JIS X 208: 7-bit, direct encoding of 0208. Byte ranges: 0x21-0x7E (94 values). Uncommon.\n    //               Used as-is in ISO2022 family.\n    //  * ISO2022-JP: Stateful encoding, with escape sequences to switch between ASCII, \n    //                0201-1976 Roman, 0208-1978, 0208-1983.\n    //  * ISO2022-JP-1: Adds esc seq for 0212-1990.\n    //  * ISO2022-JP-2: Adds esc seq for GB2313-1980, KSX1001-1992, ISO8859-1, ISO8859-7.\n    //  * ISO2022-JP-3: Adds esc seq for 0201-1976 Kana set, 0213-2000 Planes 1, 2.\n    //  * ISO2022-JP-2004: Adds 0213-2004 Plane 1.\n    //\n    // After JIS X 0213 appeared, Shift_JIS-2004, EUC-JISX0213 and ISO2022-JP-2004 followed, with just changing the planes.\n    //\n    // Overall, it seems that it's a mess :( http://www8.plala.or.jp/tkubota1/unicode-symbols-map2.html\n\n    'shiftjis': {\n        type: '_dbcs',\n        table: function() { return require('./tables/shiftjis.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n        encodeSkipVals: [{from: 0xED40, to: 0xF940}],\n    },\n    'csshiftjis': 'shiftjis',\n    'mskanji': 'shiftjis',\n    'sjis': 'shiftjis',\n    'windows31j': 'shiftjis',\n    'ms31j': 'shiftjis',\n    'xsjis': 'shiftjis',\n    'windows932': 'shiftjis',\n    'ms932': 'shiftjis',\n    '932': 'shiftjis',\n    'cp932': 'shiftjis',\n\n    'eucjp': {\n        type: '_dbcs',\n        table: function() { return require('./tables/eucjp.json') },\n        encodeAdd: {'\\u00a5': 0x5C, '\\u203E': 0x7E},\n    },\n\n    // TODO: KDDI extension to Shift_JIS\n    // TODO: IBM CCSID 942 = CP932, but F0-F9 custom chars and other char changes.\n    // TODO: IBM CCSID 943 = Shift_JIS = CP932 with original Shift_JIS lower 128 chars.\n\n\n    // == Chinese/GBK ==========================================================\n    // http://en.wikipedia.org/wiki/GBK\n    // We mostly implement W3C recommendation: https://www.w3.org/TR/encoding/#gbk-encoder\n\n    // Oldest GB2312 (1981, ~7600 chars) is a subset of CP936\n    'gb2312': 'cp936',\n    'gb231280': 'cp936',\n    'gb23121980': 'cp936',\n    'csgb2312': 'cp936',\n    'csiso58gb231280': 'cp936',\n    'euccn': 'cp936',\n\n    // Microsoft's CP936 is a subset and approximation of GBK.\n    'windows936': 'cp936',\n    'ms936': 'cp936',\n    '936': 'cp936',\n    'cp936': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json') },\n    },\n\n    // GBK (~22000 chars) is an extension of CP936 that added user-mapped chars and some other.\n    'gbk': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n    },\n    'xgbk': 'gbk',\n    'isoir58': 'gbk',\n\n    // GB18030 is an algorithmic extension of GBK.\n    // Main source: https://www.w3.org/TR/encoding/#gbk-encoder\n    // http://icu-project.org/docs/papers/gb18030.html\n    // http://source.icu-project.org/repos/icu/data/trunk/charset/data/xml/gb-18030-2000.xml\n    // http://www.khngai.com/chinese/charmap/tblgbk.php?page=0\n    'gb18030': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp936.json').concat(require('./tables/gbk-added.json')) },\n        gb18030: function() { return require('./tables/gb18030-ranges.json') },\n        encodeSkipVals: [0x80],\n        encodeAdd: {'': 0xA2E3},\n    },\n\n    'chinese': 'gb18030',\n\n\n    // == Korean ===============================================================\n    // EUC-KR, KS_C_5601 and KS X 1001 are exactly the same.\n    'windows949': 'cp949',\n    'ms949': 'cp949',\n    '949': 'cp949',\n    'cp949': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp949.json') },\n    },\n\n    'cseuckr': 'cp949',\n    'csksc56011987': 'cp949',\n    'euckr': 'cp949',\n    'isoir149': 'cp949',\n    'korean': 'cp949',\n    'ksc56011987': 'cp949',\n    'ksc56011989': 'cp949',\n    'ksc5601': 'cp949',\n\n\n    // == Big5/Taiwan/Hong Kong ================================================\n    // There are lots of tables for Big5 and cp950. Please see the following links for history:\n    // http://moztw.org/docs/big5/  http://www.haible.de/bruno/charsets/conversion-tables/Big5.html\n    // Variations, in roughly number of defined chars:\n    //  * Windows CP 950: Microsoft variant of Big5. Canonical: http://www.unicode.org/Public/MAPPINGS/VENDORS/MICSFT/WINDOWS/CP950.TXT\n    //  * Windows CP 951: Microsoft variant of Big5-HKSCS-2001. Seems to be never public. http://me.abelcheung.org/articles/research/what-is-cp951/\n    //  * Big5-2003 (Taiwan standard) almost superset of cp950.\n    //  * Unicode-at-on (UAO) / Mozilla 1.8. Falling out of use on the Web. Not supported by other browsers.\n    //  * Big5-HKSCS (-2001, -2004, -2008). Hong Kong standard. \n    //    many unicode code points moved from PUA to Supplementary plane (U+2XXXX) over the years.\n    //    Plus, it has 4 combining sequences.\n    //    Seems that Mozilla refused to support it for 10 yrs. https://bugzilla.mozilla.org/show_bug.cgi?id=162431 https://bugzilla.mozilla.org/show_bug.cgi?id=310299\n    //    because big5-hkscs is the only encoding to include astral characters in non-algorithmic way.\n    //    Implementations are not consistent within browsers; sometimes labeled as just big5.\n    //    MS Internet Explorer switches from big5 to big5-hkscs when a patch applied.\n    //    Great discussion & recap of what's going on https://bugzilla.mozilla.org/show_bug.cgi?id=912470#c31\n    //    In the encoder, it might make sense to support encoding old PUA mappings to Big5 bytes seq-s.\n    //    Official spec: http://www.ogcio.gov.hk/en/business/tech_promotion/ccli/terms/doc/2003cmp_2008.txt\n    //                   http://www.ogcio.gov.hk/tc/business/tech_promotion/ccli/terms/doc/hkscs-2008-big5-iso.txt\n    // \n    // Current understanding of how to deal with Big5(-HKSCS) is in the Encoding Standard, http://encoding.spec.whatwg.org/#big5-encoder\n    // Unicode mapping (http://www.unicode.org/Public/MAPPINGS/OBSOLETE/EASTASIA/OTHER/BIG5.TXT) is said to be wrong.\n\n    'windows950': 'cp950',\n    'ms950': 'cp950',\n    '950': 'cp950',\n    'cp950': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json') },\n    },\n\n    // Big5 has many variations and is an extension of cp950. We use Encoding Standard's as a consensus.\n    'big5': 'big5hkscs',\n    'big5hkscs': {\n        type: '_dbcs',\n        table: function() { return require('./tables/cp950.json').concat(require('./tables/big5-added.json')) },\n        encodeSkipVals: [\n            // Although Encoding Standard says we should avoid encoding to HKSCS area (See Step 1 of\n            // https://encoding.spec.whatwg.org/#index-big5-pointer), we still do it to increase compatibility with ICU.\n            // But if a single unicode point can be encoded both as HKSCS and regular Big5, we prefer the latter.\n            0x8e69, 0x8e6f, 0x8e7e, 0x8eab, 0x8eb4, 0x8ecd, 0x8ed0, 0x8f57, 0x8f69, 0x8f6e, 0x8fcb, 0x8ffe,\n            0x906d, 0x907a, 0x90c4, 0x90dc, 0x90f1, 0x91bf, 0x92af, 0x92b0, 0x92b1, 0x92b2, 0x92d1, 0x9447, 0x94ca,\n            0x95d9, 0x96fc, 0x9975, 0x9b76, 0x9b78, 0x9b7b, 0x9bc6, 0x9bde, 0x9bec, 0x9bf6, 0x9c42, 0x9c53, 0x9c62,\n            0x9c68, 0x9c6b, 0x9c77, 0x9cbc, 0x9cbd, 0x9cd0, 0x9d57, 0x9d5a, 0x9dc4, 0x9def, 0x9dfb, 0x9ea9, 0x9eef,\n            0x9efd, 0x9f60, 0x9fcb, 0xa077, 0xa0dc, 0xa0df, 0x8fcc, 0x92c8, 0x9644, 0x96ed,\n\n            // Step 2 of https://encoding.spec.whatwg.org/#index-big5-pointer: Use last pointer for U+2550, U+255E, U+2561, U+256A, U+5341, or U+5345\n            0xa2a4, 0xa2a5, 0xa2a7, 0xa2a6, 0xa2cc, 0xa2ce,\n        ],\n    },\n\n    'cnbig5': 'big5hkscs',\n    'csbig5': 'big5hkscs',\n    'xxbig5': 'big5hkscs',\n};\n","\"use strict\";\n\n// Update this array if you add/rename/remove files in this directory.\n// We support Browserify by skipping automatic module discovery and requiring modules directly.\nvar modules = [\n    require(\"./internal\"),\n    require(\"./utf32\"),\n    require(\"./utf16\"),\n    require(\"./utf7\"),\n    require(\"./sbcs-codec\"),\n    require(\"./sbcs-data\"),\n    require(\"./sbcs-data-generated\"),\n    require(\"./dbcs-codec\"),\n    require(\"./dbcs-data\"),\n];\n\n// Put all encoding/alias/codec definitions to single object and export it.\nfor (var i = 0; i < modules.length; i++) {\n    var module = modules[i];\n    for (var enc in module)\n        if (Object.prototype.hasOwnProperty.call(module, enc))\n            exports[enc] = module[enc];\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Export Node.js internal encodings.\n\nmodule.exports = {\n    // Encodings\n    utf8:   { type: \"_internal\", bomAware: true},\n    cesu8:  { type: \"_internal\", bomAware: true},\n    unicode11utf8: \"utf8\",\n\n    ucs2:   { type: \"_internal\", bomAware: true},\n    utf16le: \"ucs2\",\n\n    binary: { type: \"_internal\" },\n    base64: { type: \"_internal\" },\n    hex:    { type: \"_internal\" },\n\n    // Codec.\n    _internal: InternalCodec,\n};\n\n//------------------------------------------------------------------------------\n\nfunction InternalCodec(codecOptions, iconv) {\n    this.enc = codecOptions.encodingName;\n    this.bomAware = codecOptions.bomAware;\n\n    if (this.enc === \"base64\")\n        this.encoder = InternalEncoderBase64;\n    else if (this.enc === \"cesu8\") {\n        this.enc = \"utf8\"; // Use utf8 for decoding.\n        this.encoder = InternalEncoderCesu8;\n\n        // Add decoder for versions of Node not supporting CESU-8\n        if (Buffer.from('eda0bdedb2a9', 'hex').toString() !== '') {\n            this.decoder = InternalDecoderCesu8;\n            this.defaultCharUnicode = iconv.defaultCharUnicode;\n        }\n    }\n}\n\nInternalCodec.prototype.encoder = InternalEncoder;\nInternalCodec.prototype.decoder = InternalDecoder;\n\n//------------------------------------------------------------------------------\n\n// We use node.js internal decoder. Its signature is the same as ours.\nvar StringDecoder = require('string_decoder').StringDecoder;\n\nif (!StringDecoder.prototype.end) // Node v0.8 doesn't have this method.\n    StringDecoder.prototype.end = function() {};\n\n\nfunction InternalDecoder(options, codec) {\n    this.decoder = new StringDecoder(codec.enc);\n}\n\nInternalDecoder.prototype.write = function(buf) {\n    if (!Buffer.isBuffer(buf)) {\n        buf = Buffer.from(buf);\n    }\n\n    return this.decoder.write(buf);\n}\n\nInternalDecoder.prototype.end = function() {\n    return this.decoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n// Encoder is mostly trivial\n\nfunction InternalEncoder(options, codec) {\n    this.enc = codec.enc;\n}\n\nInternalEncoder.prototype.write = function(str) {\n    return Buffer.from(str, this.enc);\n}\n\nInternalEncoder.prototype.end = function() {\n}\n\n\n//------------------------------------------------------------------------------\n// Except base64 encoder, which must keep its state.\n\nfunction InternalEncoderBase64(options, codec) {\n    this.prevStr = '';\n}\n\nInternalEncoderBase64.prototype.write = function(str) {\n    str = this.prevStr + str;\n    var completeQuads = str.length - (str.length % 4);\n    this.prevStr = str.slice(completeQuads);\n    str = str.slice(0, completeQuads);\n\n    return Buffer.from(str, \"base64\");\n}\n\nInternalEncoderBase64.prototype.end = function() {\n    return Buffer.from(this.prevStr, \"base64\");\n}\n\n\n//------------------------------------------------------------------------------\n// CESU-8 encoder is also special.\n\nfunction InternalEncoderCesu8(options, codec) {\n}\n\nInternalEncoderCesu8.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length * 3), bufIdx = 0;\n    for (var i = 0; i < str.length; i++) {\n        var charCode = str.charCodeAt(i);\n        // Naive implementation, but it works because CESU-8 is especially easy\n        // to convert from UTF-16 (which all JS strings are encoded in).\n        if (charCode < 0x80)\n            buf[bufIdx++] = charCode;\n        else if (charCode < 0x800) {\n            buf[bufIdx++] = 0xC0 + (charCode >>> 6);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n        else { // charCode will always be < 0x10000 in javascript.\n            buf[bufIdx++] = 0xE0 + (charCode >>> 12);\n            buf[bufIdx++] = 0x80 + ((charCode >>> 6) & 0x3f);\n            buf[bufIdx++] = 0x80 + (charCode & 0x3f);\n        }\n    }\n    return buf.slice(0, bufIdx);\n}\n\nInternalEncoderCesu8.prototype.end = function() {\n}\n\n//------------------------------------------------------------------------------\n// CESU-8 decoder is not implemented in Node v4.0+\n\nfunction InternalDecoderCesu8(options, codec) {\n    this.acc = 0;\n    this.contBytes = 0;\n    this.accBytes = 0;\n    this.defaultCharUnicode = codec.defaultCharUnicode;\n}\n\nInternalDecoderCesu8.prototype.write = function(buf) {\n    var acc = this.acc, contBytes = this.contBytes, accBytes = this.accBytes, \n        res = '';\n    for (var i = 0; i < buf.length; i++) {\n        var curByte = buf[i];\n        if ((curByte & 0xC0) !== 0x80) { // Leading byte\n            if (contBytes > 0) { // Previous code is invalid\n                res += this.defaultCharUnicode;\n                contBytes = 0;\n            }\n\n            if (curByte < 0x80) { // Single-byte code\n                res += String.fromCharCode(curByte);\n            } else if (curByte < 0xE0) { // Two-byte code\n                acc = curByte & 0x1F;\n                contBytes = 1; accBytes = 1;\n            } else if (curByte < 0xF0) { // Three-byte code\n                acc = curByte & 0x0F;\n                contBytes = 2; accBytes = 1;\n            } else { // Four or more are not supported for CESU-8.\n                res += this.defaultCharUnicode;\n            }\n        } else { // Continuation byte\n            if (contBytes > 0) { // We're waiting for it.\n                acc = (acc << 6) | (curByte & 0x3f);\n                contBytes--; accBytes++;\n                if (contBytes === 0) {\n                    // Check for overlong encoding, but support Modified UTF-8 (encoding NULL as C0 80)\n                    if (accBytes === 2 && acc < 0x80 && acc > 0)\n                        res += this.defaultCharUnicode;\n                    else if (accBytes === 3 && acc < 0x800)\n                        res += this.defaultCharUnicode;\n                    else\n                        // Actually add character.\n                        res += String.fromCharCode(acc);\n                }\n            } else { // Unexpected continuation byte\n                res += this.defaultCharUnicode;\n            }\n        }\n    }\n    this.acc = acc; this.contBytes = contBytes; this.accBytes = accBytes;\n    return res;\n}\n\nInternalDecoderCesu8.prototype.end = function() {\n    var res = 0;\n    if (this.contBytes > 0)\n        res += this.defaultCharUnicode;\n    return res;\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Single-byte codec. Needs a 'chars' string parameter that contains 256 or 128 chars that\n// correspond to encoded bytes (if 128 - then lower half is ASCII). \n\nexports._sbcs = SBCSCodec;\nfunction SBCSCodec(codecOptions, iconv) {\n    if (!codecOptions)\n        throw new Error(\"SBCS codec is called without the data.\")\n    \n    // Prepare char buffer for decoding.\n    if (!codecOptions.chars || (codecOptions.chars.length !== 128 && codecOptions.chars.length !== 256))\n        throw new Error(\"Encoding '\"+codecOptions.type+\"' has incorrect 'chars' (must be of len 128 or 256)\");\n    \n    if (codecOptions.chars.length === 128) {\n        var asciiString = \"\";\n        for (var i = 0; i < 128; i++)\n            asciiString += String.fromCharCode(i);\n        codecOptions.chars = asciiString + codecOptions.chars;\n    }\n\n    this.decodeBuf = Buffer.from(codecOptions.chars, 'ucs2');\n    \n    // Encoding buffer.\n    var encodeBuf = Buffer.alloc(65536, iconv.defaultCharSingleByte.charCodeAt(0));\n\n    for (var i = 0; i < codecOptions.chars.length; i++)\n        encodeBuf[codecOptions.chars.charCodeAt(i)] = i;\n\n    this.encodeBuf = encodeBuf;\n}\n\nSBCSCodec.prototype.encoder = SBCSEncoder;\nSBCSCodec.prototype.decoder = SBCSDecoder;\n\n\nfunction SBCSEncoder(options, codec) {\n    this.encodeBuf = codec.encodeBuf;\n}\n\nSBCSEncoder.prototype.write = function(str) {\n    var buf = Buffer.alloc(str.length);\n    for (var i = 0; i < str.length; i++)\n        buf[i] = this.encodeBuf[str.charCodeAt(i)];\n    \n    return buf;\n}\n\nSBCSEncoder.prototype.end = function() {\n}\n\n\nfunction SBCSDecoder(options, codec) {\n    this.decodeBuf = codec.decodeBuf;\n}\n\nSBCSDecoder.prototype.write = function(buf) {\n    // Strings are immutable in JS -> we use ucs2 buffer to speed up computations.\n    var decodeBuf = this.decodeBuf;\n    var newBuf = Buffer.alloc(buf.length*2);\n    var idx1 = 0, idx2 = 0;\n    for (var i = 0; i < buf.length; i++) {\n        idx1 = buf[i]*2; idx2 = i*2;\n        newBuf[idx2] = decodeBuf[idx1];\n        newBuf[idx2+1] = decodeBuf[idx1+1];\n    }\n    return newBuf.toString('ucs2');\n}\n\nSBCSDecoder.prototype.end = function() {\n}\n","\"use strict\";\n\n// Generated data for sbcs codec. Don't edit manually. Regenerate using generation/gen-sbcs.js script.\nmodule.exports = {\n  \"437\": \"cp437\",\n  \"737\": \"cp737\",\n  \"775\": \"cp775\",\n  \"850\": \"cp850\",\n  \"852\": \"cp852\",\n  \"855\": \"cp855\",\n  \"856\": \"cp856\",\n  \"857\": \"cp857\",\n  \"858\": \"cp858\",\n  \"860\": \"cp860\",\n  \"861\": \"cp861\",\n  \"862\": \"cp862\",\n  \"863\": \"cp863\",\n  \"864\": \"cp864\",\n  \"865\": \"cp865\",\n  \"866\": \"cp866\",\n  \"869\": \"cp869\",\n  \"874\": \"windows874\",\n  \"922\": \"cp922\",\n  \"1046\": \"cp1046\",\n  \"1124\": \"cp1124\",\n  \"1125\": \"cp1125\",\n  \"1129\": \"cp1129\",\n  \"1133\": \"cp1133\",\n  \"1161\": \"cp1161\",\n  \"1162\": \"cp1162\",\n  \"1163\": \"cp1163\",\n  \"1250\": \"windows1250\",\n  \"1251\": \"windows1251\",\n  \"1252\": \"windows1252\",\n  \"1253\": \"windows1253\",\n  \"1254\": \"windows1254\",\n  \"1255\": \"windows1255\",\n  \"1256\": \"windows1256\",\n  \"1257\": \"windows1257\",\n  \"1258\": \"windows1258\",\n  \"28591\": \"iso88591\",\n  \"28592\": \"iso88592\",\n  \"28593\": \"iso88593\",\n  \"28594\": \"iso88594\",\n  \"28595\": \"iso88595\",\n  \"28596\": \"iso88596\",\n  \"28597\": \"iso88597\",\n  \"28598\": \"iso88598\",\n  \"28599\": \"iso88599\",\n  \"28600\": \"iso885910\",\n  \"28601\": \"iso885911\",\n  \"28603\": \"iso885913\",\n  \"28604\": \"iso885914\",\n  \"28605\": \"iso885915\",\n  \"28606\": \"iso885916\",\n  \"windows874\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win874\": \"windows874\",\n  \"cp874\": \"windows874\",\n  \"windows1250\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1250\": \"windows1250\",\n  \"cp1250\": \"windows1250\",\n  \"windows1251\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1251\": \"windows1251\",\n  \"cp1251\": \"windows1251\",\n  \"windows1252\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1252\": \"windows1252\",\n  \"cp1252\": \"windows1252\",\n  \"windows1253\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1253\": \"windows1253\",\n  \"cp1253\": \"windows1253\",\n  \"windows1254\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1254\": \"windows1254\",\n  \"cp1254\": \"windows1254\",\n  \"windows1255\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1255\": \"windows1255\",\n  \"cp1255\": \"windows1255\",\n  \"windows1256\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1256\": \"windows1256\",\n  \"cp1256\": \"windows1256\",\n  \"windows1257\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1257\": \"windows1257\",\n  \"cp1257\": \"windows1257\",\n  \"windows1258\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"win1258\": \"windows1258\",\n  \"cp1258\": \"windows1258\",\n  \"iso88591\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28591\": \"iso88591\",\n  \"iso88592\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28592\": \"iso88592\",\n  \"iso88593\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28593\": \"iso88593\",\n  \"iso88594\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28594\": \"iso88594\",\n  \"iso88595\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28595\": \"iso88595\",\n  \"iso88596\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28596\": \"iso88596\",\n  \"iso88597\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28597\": \"iso88597\",\n  \"iso88598\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28598\": \"iso88598\",\n  \"iso88599\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28599\": \"iso88599\",\n  \"iso885910\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28600\": \"iso885910\",\n  \"iso885911\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28601\": \"iso885911\",\n  \"iso885913\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28603\": \"iso885913\",\n  \"iso885914\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28604\": \"iso885914\",\n  \"iso885915\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28605\": \"iso885915\",\n  \"iso885916\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"cp28606\": \"iso885916\",\n  \"cp437\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm437\": \"cp437\",\n  \"csibm437\": \"cp437\",\n  \"cp737\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm737\": \"cp737\",\n  \"csibm737\": \"cp737\",\n  \"cp775\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm775\": \"cp775\",\n  \"csibm775\": \"cp775\",\n  \"cp850\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm850\": \"cp850\",\n  \"csibm850\": \"cp850\",\n  \"cp852\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm852\": \"cp852\",\n  \"csibm852\": \"cp852\",\n  \"cp855\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm855\": \"cp855\",\n  \"csibm855\": \"cp855\",\n  \"cp856\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm856\": \"cp856\",\n  \"csibm856\": \"cp856\",\n  \"cp857\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm857\": \"cp857\",\n  \"csibm857\": \"cp857\",\n  \"cp858\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm858\": \"cp858\",\n  \"csibm858\": \"cp858\",\n  \"cp860\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm860\": \"cp860\",\n  \"csibm860\": \"cp860\",\n  \"cp861\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm861\": \"cp861\",\n  \"csibm861\": \"cp861\",\n  \"cp862\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm862\": \"cp862\",\n  \"csibm862\": \"cp862\",\n  \"cp863\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm863\": \"cp863\",\n  \"csibm863\": \"cp863\",\n  \"cp864\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"ibm864\": \"cp864\",\n  \"csibm864\": \"cp864\",\n  \"cp865\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm865\": \"cp865\",\n  \"csibm865\": \"cp865\",\n  \"cp866\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm866\": \"cp866\",\n  \"csibm866\": \"cp866\",\n  \"cp869\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm869\": \"cp869\",\n  \"csibm869\": \"cp869\",\n  \"cp922\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm922\": \"cp922\",\n  \"csibm922\": \"cp922\",\n  \"cp1046\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1046\": \"cp1046\",\n  \"csibm1046\": \"cp1046\",\n  \"cp1124\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1124\": \"cp1124\",\n  \"csibm1124\": \"cp1124\",\n  \"cp1125\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1125\": \"cp1125\",\n  \"csibm1125\": \"cp1125\",\n  \"cp1129\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1129\": \"cp1129\",\n  \"csibm1129\": \"cp1129\",\n  \"cp1133\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1133\": \"cp1133\",\n  \"csibm1133\": \"cp1133\",\n  \"cp1161\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1161\": \"cp1161\",\n  \"csibm1161\": \"cp1161\",\n  \"cp1162\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1162\": \"cp1162\",\n  \"csibm1162\": \"cp1162\",\n  \"cp1163\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ibm1163\": \"cp1163\",\n  \"csibm1163\": \"cp1163\",\n  \"maccroatian\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maccyrillic\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macgreek\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"maciceland\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macroman\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macromania\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macthai\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macturkish\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macukraine\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8r\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8u\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8ru\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"koi8t\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"armscii8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \")(.,-\"\n  },\n  \"rk1048\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tcvn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0003\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"georgianacademy\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"georgianps\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"pt154\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"viscii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0003\\u0004\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0015\\u0016\\u0017\\u0018\\u001a\\u001b\\u001c\\u001d\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}~\"\n  },\n  \"iso646cn\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\\\]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"iso646jp\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\\u0000\\u0001\\u0002\\u0003\\u0004\\u0005\\u0006\\u0007\\b\\t\\n\\u000b\\f\\r\\u000e\\u000f\\u0010\\u0011\\u0012\\u0013\\u0014\\u0015\\u0016\\u0017\\u0018\\u0019\\u001a\\u001b\\u001c\\u001d\\u001e\\u001f !\\\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}\"\n  },\n  \"hproman8\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"macintosh\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"ascii\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  },\n  \"tis620\": {\n    \"type\": \"_sbcs\",\n    \"chars\": \"\"\n  }\n}","\"use strict\";\n\n// Manually added data to be used by sbcs codec in addition to generated one.\n\nmodule.exports = {\n    // Not supported by iconv, not sure why.\n    \"10029\": \"maccenteuro\",\n    \"maccenteuro\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"808\": \"cp808\",\n    \"ibm808\": \"cp808\",\n    \"cp808\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"mik\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\"\n    },\n\n    \"cp720\": {\n        \"type\": \"_sbcs\",\n        \"chars\": \"\\x80\\x81\\x84\\x86\\x8d\\x8e\\x8f\\x90\\u0651\\u0652\\u064b\\u064c\\u064d\\u064e\\u064f\\u0650\\u00a0\"\n    },\n\n    // Aliases of generated encodings.\n    \"ascii8bit\": \"ascii\",\n    \"usascii\": \"ascii\",\n    \"ansix34\": \"ascii\",\n    \"ansix341968\": \"ascii\",\n    \"ansix341986\": \"ascii\",\n    \"csascii\": \"ascii\",\n    \"cp367\": \"ascii\",\n    \"ibm367\": \"ascii\",\n    \"isoir6\": \"ascii\",\n    \"iso646us\": \"ascii\",\n    \"iso646irv\": \"ascii\",\n    \"us\": \"ascii\",\n\n    \"latin1\": \"iso88591\",\n    \"latin2\": \"iso88592\",\n    \"latin3\": \"iso88593\",\n    \"latin4\": \"iso88594\",\n    \"latin5\": \"iso88599\",\n    \"latin6\": \"iso885910\",\n    \"latin7\": \"iso885913\",\n    \"latin8\": \"iso885914\",\n    \"latin9\": \"iso885915\",\n    \"latin10\": \"iso885916\",\n\n    \"csisolatin1\": \"iso88591\",\n    \"csisolatin2\": \"iso88592\",\n    \"csisolatin3\": \"iso88593\",\n    \"csisolatin4\": \"iso88594\",\n    \"csisolatincyrillic\": \"iso88595\",\n    \"csisolatinarabic\": \"iso88596\",\n    \"csisolatingreek\" : \"iso88597\",\n    \"csisolatinhebrew\": \"iso88598\",\n    \"csisolatin5\": \"iso88599\",\n    \"csisolatin6\": \"iso885910\",\n\n    \"l1\": \"iso88591\",\n    \"l2\": \"iso88592\",\n    \"l3\": \"iso88593\",\n    \"l4\": \"iso88594\",\n    \"l5\": \"iso88599\",\n    \"l6\": \"iso885910\",\n    \"l7\": \"iso885913\",\n    \"l8\": \"iso885914\",\n    \"l9\": \"iso885915\",\n    \"l10\": \"iso885916\",\n\n    \"isoir14\": \"iso646jp\",\n    \"isoir57\": \"iso646cn\",\n    \"isoir100\": \"iso88591\",\n    \"isoir101\": \"iso88592\",\n    \"isoir109\": \"iso88593\",\n    \"isoir110\": \"iso88594\",\n    \"isoir144\": \"iso88595\",\n    \"isoir127\": \"iso88596\",\n    \"isoir126\": \"iso88597\",\n    \"isoir138\": \"iso88598\",\n    \"isoir148\": \"iso88599\",\n    \"isoir157\": \"iso885910\",\n    \"isoir166\": \"tis620\",\n    \"isoir179\": \"iso885913\",\n    \"isoir199\": \"iso885914\",\n    \"isoir203\": \"iso885915\",\n    \"isoir226\": \"iso885916\",\n\n    \"cp819\": \"iso88591\",\n    \"ibm819\": \"iso88591\",\n\n    \"cyrillic\": \"iso88595\",\n\n    \"arabic\": \"iso88596\",\n    \"arabic8\": \"iso88596\",\n    \"ecma114\": \"iso88596\",\n    \"asmo708\": \"iso88596\",\n\n    \"greek\" : \"iso88597\",\n    \"greek8\" : \"iso88597\",\n    \"ecma118\" : \"iso88597\",\n    \"elot928\" : \"iso88597\",\n\n    \"hebrew\": \"iso88598\",\n    \"hebrew8\": \"iso88598\",\n\n    \"turkish\": \"iso88599\",\n    \"turkish8\": \"iso88599\",\n\n    \"thai\": \"iso885911\",\n    \"thai8\": \"iso885911\",\n\n    \"celtic\": \"iso885914\",\n    \"celtic8\": \"iso885914\",\n    \"isoceltic\": \"iso885914\",\n\n    \"tis6200\": \"tis620\",\n    \"tis62025291\": \"tis620\",\n    \"tis62025330\": \"tis620\",\n\n    \"10000\": \"macroman\",\n    \"10006\": \"macgreek\",\n    \"10007\": \"maccyrillic\",\n    \"10079\": \"maciceland\",\n    \"10081\": \"macturkish\",\n\n    \"cspc8codepage437\": \"cp437\",\n    \"cspc775baltic\": \"cp775\",\n    \"cspc850multilingual\": \"cp850\",\n    \"cspcp852\": \"cp852\",\n    \"cspc862latinhebrew\": \"cp862\",\n    \"cpgr\": \"cp869\",\n\n    \"msee\": \"cp1250\",\n    \"mscyrl\": \"cp1251\",\n    \"msansi\": \"cp1252\",\n    \"msgreek\": \"cp1253\",\n    \"msturk\": \"cp1254\",\n    \"mshebr\": \"cp1255\",\n    \"msarab\": \"cp1256\",\n    \"winbaltrim\": \"cp1257\",\n\n    \"cp20866\": \"koi8r\",\n    \"20866\": \"koi8r\",\n    \"ibm878\": \"koi8r\",\n    \"cskoi8r\": \"koi8r\",\n\n    \"cp21866\": \"koi8u\",\n    \"21866\": \"koi8u\",\n    \"ibm1168\": \"koi8u\",\n\n    \"strk10482002\": \"rk1048\",\n\n    \"tcvn5712\": \"tcvn\",\n    \"tcvn57121\": \"tcvn\",\n\n    \"gb198880\": \"iso646cn\",\n    \"cn\": \"iso646cn\",\n\n    \"csiso14jisc6220ro\": \"iso646jp\",\n    \"jisc62201969ro\": \"iso646jp\",\n    \"jp\": \"iso646jp\",\n\n    \"cshproman8\": \"hproman8\",\n    \"r8\": \"hproman8\",\n    \"roman8\": \"hproman8\",\n    \"xroman8\": \"hproman8\",\n    \"ibm1051\": \"hproman8\",\n\n    \"mac\": \"macintosh\",\n    \"csmacintosh\": \"macintosh\",\n};\n\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// Note: UTF16-LE (or UCS2) codec is Node.js native. See encodings/internal.js\n\n// == UTF16-BE codec. ==========================================================\n\nexports.utf16be = Utf16BECodec;\nfunction Utf16BECodec() {\n}\n\nUtf16BECodec.prototype.encoder = Utf16BEEncoder;\nUtf16BECodec.prototype.decoder = Utf16BEDecoder;\nUtf16BECodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf16BEEncoder() {\n}\n\nUtf16BEEncoder.prototype.write = function(str) {\n    var buf = Buffer.from(str, 'ucs2');\n    for (var i = 0; i < buf.length; i += 2) {\n        var tmp = buf[i]; buf[i] = buf[i+1]; buf[i+1] = tmp;\n    }\n    return buf;\n}\n\nUtf16BEEncoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf16BEDecoder() {\n    this.overflowByte = -1;\n}\n\nUtf16BEDecoder.prototype.write = function(buf) {\n    if (buf.length == 0)\n        return '';\n\n    var buf2 = Buffer.alloc(buf.length + 1),\n        i = 0, j = 0;\n\n    if (this.overflowByte !== -1) {\n        buf2[0] = buf[0];\n        buf2[1] = this.overflowByte;\n        i = 1; j = 2;\n    }\n\n    for (; i < buf.length-1; i += 2, j+= 2) {\n        buf2[j] = buf[i+1];\n        buf2[j+1] = buf[i];\n    }\n\n    this.overflowByte = (i == buf.length-1) ? buf[buf.length-1] : -1;\n\n    return buf2.slice(0, j).toString('ucs2');\n}\n\nUtf16BEDecoder.prototype.end = function() {\n    this.overflowByte = -1;\n}\n\n\n// == UTF-16 codec =============================================================\n// Decoder chooses automatically from UTF-16LE and UTF-16BE using BOM and space-based heuristic.\n// Defaults to UTF-16LE, as it's prevalent and default in Node.\n// http://en.wikipedia.org/wiki/UTF-16 and http://encoding.spec.whatwg.org/#utf-16le\n// Decoder default can be changed: iconv.decode(buf, 'utf16', {defaultEncoding: 'utf-16be'});\n\n// Encoder uses UTF-16LE and prepends BOM (which can be overridden with addBOM: false).\n\nexports.utf16 = Utf16Codec;\nfunction Utf16Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n}\n\nUtf16Codec.prototype.encoder = Utf16Encoder;\nUtf16Codec.prototype.decoder = Utf16Decoder;\n\n\n// -- Encoding (pass-through)\n\nfunction Utf16Encoder(options, codec) {\n    options = options || {};\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n    this.encoder = codec.iconv.getEncoder('utf-16le', options);\n}\n\nUtf16Encoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n}\n\nUtf16Encoder.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n// -- Decoding\n\nfunction Utf16Decoder(options, codec) {\n    this.decoder = null;\n    this.initialBufs = [];\n    this.initialBufsLen = 0;\n\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf16Decoder.prototype.write = function(buf) {\n    if (!this.decoder) {\n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBufs.push(buf);\n        this.initialBufsLen += buf.length;\n        \n        if (this.initialBufsLen < 16) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n\n    return this.decoder.write(buf);\n}\n\nUtf16Decoder.prototype.end = function() {\n    if (!this.decoder) {\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        var trail = this.decoder.end();\n        if (trail)\n            resStr += trail;\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n    return this.decoder.end();\n}\n\nfunction detectEncoding(bufs, defaultEncoding) {\n    var b = [];\n    var charsProcessed = 0;\n    var asciiCharsLE = 0, asciiCharsBE = 0; // Number of ASCII chars when decoded as LE or BE.\n\n    outer_loop:\n    for (var i = 0; i < bufs.length; i++) {\n        var buf = bufs[i];\n        for (var j = 0; j < buf.length; j++) {\n            b.push(buf[j]);\n            if (b.length === 2) {\n                if (charsProcessed === 0) {\n                    // Check BOM first.\n                    if (b[0] === 0xFF && b[1] === 0xFE) return 'utf-16le';\n                    if (b[0] === 0xFE && b[1] === 0xFF) return 'utf-16be';\n                }\n\n                if (b[0] === 0 && b[1] !== 0) asciiCharsBE++;\n                if (b[0] !== 0 && b[1] === 0) asciiCharsLE++;\n\n                b.length = 0;\n                charsProcessed++;\n\n                if (charsProcessed >= 100) {\n                    break outer_loop;\n                }\n            }\n        }\n    }\n\n    // Make decisions.\n    // Most of the time, the content has ASCII chars (U+00**), but the opposite (U+**00) is uncommon.\n    // So, we count ASCII as if it was LE or BE, and decide from that.\n    if (asciiCharsBE > asciiCharsLE) return 'utf-16be';\n    if (asciiCharsBE < asciiCharsLE) return 'utf-16le';\n\n    // Couldn't decide (likely all zeros or not enough data).\n    return defaultEncoding || 'utf-16le';\n}\n\n\n","'use strict';\n\nvar Buffer = require('safer-buffer').Buffer;\n\n// == UTF32-LE/BE codec. ==========================================================\n\nexports._utf32 = Utf32Codec;\n\nfunction Utf32Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n    this.bomAware = true;\n    this.isLE = codecOptions.isLE;\n}\n\nexports.utf32le = { type: '_utf32', isLE: true };\nexports.utf32be = { type: '_utf32', isLE: false };\n\n// Aliases\nexports.ucs4le = 'utf32le';\nexports.ucs4be = 'utf32be';\n\nUtf32Codec.prototype.encoder = Utf32Encoder;\nUtf32Codec.prototype.decoder = Utf32Decoder;\n\n// -- Encoding\n\nfunction Utf32Encoder(options, codec) {\n    this.isLE = codec.isLE;\n    this.highSurrogate = 0;\n}\n\nUtf32Encoder.prototype.write = function(str) {\n    var src = Buffer.from(str, 'ucs2');\n    var dst = Buffer.alloc(src.length * 2);\n    var write32 = this.isLE ? dst.writeUInt32LE : dst.writeUInt32BE;\n    var offset = 0;\n\n    for (var i = 0; i < src.length; i += 2) {\n        var code = src.readUInt16LE(i);\n        var isHighSurrogate = (0xD800 <= code && code < 0xDC00);\n        var isLowSurrogate = (0xDC00 <= code && code < 0xE000);\n\n        if (this.highSurrogate) {\n            if (isHighSurrogate || !isLowSurrogate) {\n                // There shouldn't be two high surrogates in a row, nor a high surrogate which isn't followed by a low\n                // surrogate. If this happens, keep the pending high surrogate as a stand-alone semi-invalid character\n                // (technically wrong, but expected by some applications, like Windows file names).\n                write32.call(dst, this.highSurrogate, offset);\n                offset += 4;\n            }\n            else {\n                // Create 32-bit value from high and low surrogates;\n                var codepoint = (((this.highSurrogate - 0xD800) << 10) | (code - 0xDC00)) + 0x10000;\n\n                write32.call(dst, codepoint, offset);\n                offset += 4;\n                this.highSurrogate = 0;\n\n                continue;\n            }\n        }\n\n        if (isHighSurrogate)\n            this.highSurrogate = code;\n        else {\n            // Even if the current character is a low surrogate, with no previous high surrogate, we'll\n            // encode it as a semi-invalid stand-alone character for the same reasons expressed above for\n            // unpaired high surrogates.\n            write32.call(dst, code, offset);\n            offset += 4;\n            this.highSurrogate = 0;\n        }\n    }\n\n    if (offset < dst.length)\n        dst = dst.slice(0, offset);\n\n    return dst;\n};\n\nUtf32Encoder.prototype.end = function() {\n    // Treat any leftover high surrogate as a semi-valid independent character.\n    if (!this.highSurrogate)\n        return;\n\n    var buf = Buffer.alloc(4);\n\n    if (this.isLE)\n        buf.writeUInt32LE(this.highSurrogate, 0);\n    else\n        buf.writeUInt32BE(this.highSurrogate, 0);\n\n    this.highSurrogate = 0;\n\n    return buf;\n};\n\n// -- Decoding\n\nfunction Utf32Decoder(options, codec) {\n    this.isLE = codec.isLE;\n    this.badChar = codec.iconv.defaultCharUnicode.charCodeAt(0);\n    this.overflow = [];\n}\n\nUtf32Decoder.prototype.write = function(src) {\n    if (src.length === 0)\n        return '';\n\n    var i = 0;\n    var codepoint = 0;\n    var dst = Buffer.alloc(src.length + 4);\n    var offset = 0;\n    var isLE = this.isLE;\n    var overflow = this.overflow;\n    var badChar = this.badChar;\n\n    if (overflow.length > 0) {\n        for (; i < src.length && overflow.length < 4; i++)\n            overflow.push(src[i]);\n        \n        if (overflow.length === 4) {\n            // NOTE: codepoint is a signed int32 and can be negative.\n            // NOTE: We copied this block from below to help V8 optimize it (it works with array, not buffer).\n            if (isLE) {\n                codepoint = overflow[i] | (overflow[i+1] << 8) | (overflow[i+2] << 16) | (overflow[i+3] << 24);\n            } else {\n                codepoint = overflow[i+3] | (overflow[i+2] << 8) | (overflow[i+1] << 16) | (overflow[i] << 24);\n            }\n            overflow.length = 0;\n\n            offset = _writeCodepoint(dst, offset, codepoint, badChar);\n        }\n    }\n\n    // Main loop. Should be as optimized as possible.\n    for (; i < src.length - 3; i += 4) {\n        // NOTE: codepoint is a signed int32 and can be negative.\n        if (isLE) {\n            codepoint = src[i] | (src[i+1] << 8) | (src[i+2] << 16) | (src[i+3] << 24);\n        } else {\n            codepoint = src[i+3] | (src[i+2] << 8) | (src[i+1] << 16) | (src[i] << 24);\n        }\n        offset = _writeCodepoint(dst, offset, codepoint, badChar);\n    }\n\n    // Keep overflowing bytes.\n    for (; i < src.length; i++) {\n        overflow.push(src[i]);\n    }\n\n    return dst.slice(0, offset).toString('ucs2');\n};\n\nfunction _writeCodepoint(dst, offset, codepoint, badChar) {\n    // NOTE: codepoint is signed int32 and can be negative. We keep it that way to help V8 with optimizations.\n    if (codepoint < 0 || codepoint > 0x10FFFF) {\n        // Not a valid Unicode codepoint\n        codepoint = badChar;\n    } \n\n    // Ephemeral Planes: Write high surrogate.\n    if (codepoint >= 0x10000) {\n        codepoint -= 0x10000;\n\n        var high = 0xD800 | (codepoint >> 10);\n        dst[offset++] = high & 0xff;\n        dst[offset++] = high >> 8;\n\n        // Low surrogate is written below.\n        var codepoint = 0xDC00 | (codepoint & 0x3FF);\n    }\n\n    // Write BMP char or low surrogate.\n    dst[offset++] = codepoint & 0xff;\n    dst[offset++] = codepoint >> 8;\n\n    return offset;\n};\n\nUtf32Decoder.prototype.end = function() {\n    this.overflow.length = 0;\n};\n\n// == UTF-32 Auto codec =============================================================\n// Decoder chooses automatically from UTF-32LE and UTF-32BE using BOM and space-based heuristic.\n// Defaults to UTF-32LE. http://en.wikipedia.org/wiki/UTF-32\n// Encoder/decoder default can be changed: iconv.decode(buf, 'utf32', {defaultEncoding: 'utf-32be'});\n\n// Encoder prepends BOM (which can be overridden with (addBOM: false}).\n\nexports.utf32 = Utf32AutoCodec;\nexports.ucs4 = 'utf32';\n\nfunction Utf32AutoCodec(options, iconv) {\n    this.iconv = iconv;\n}\n\nUtf32AutoCodec.prototype.encoder = Utf32AutoEncoder;\nUtf32AutoCodec.prototype.decoder = Utf32AutoDecoder;\n\n// -- Encoding\n\nfunction Utf32AutoEncoder(options, codec) {\n    options = options || {};\n\n    if (options.addBOM === undefined)\n        options.addBOM = true;\n\n    this.encoder = codec.iconv.getEncoder(options.defaultEncoding || 'utf-32le', options);\n}\n\nUtf32AutoEncoder.prototype.write = function(str) {\n    return this.encoder.write(str);\n};\n\nUtf32AutoEncoder.prototype.end = function() {\n    return this.encoder.end();\n};\n\n// -- Decoding\n\nfunction Utf32AutoDecoder(options, codec) {\n    this.decoder = null;\n    this.initialBufs = [];\n    this.initialBufsLen = 0;\n    this.options = options || {};\n    this.iconv = codec.iconv;\n}\n\nUtf32AutoDecoder.prototype.write = function(buf) {\n    if (!this.decoder) { \n        // Codec is not chosen yet. Accumulate initial bytes.\n        this.initialBufs.push(buf);\n        this.initialBufsLen += buf.length;\n\n        if (this.initialBufsLen < 32) // We need more bytes to use space heuristic (see below)\n            return '';\n\n        // We have enough bytes -> detect endianness.\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n\n    return this.decoder.write(buf);\n};\n\nUtf32AutoDecoder.prototype.end = function() {\n    if (!this.decoder) {\n        var encoding = detectEncoding(this.initialBufs, this.options.defaultEncoding);\n        this.decoder = this.iconv.getDecoder(encoding, this.options);\n\n        var resStr = '';\n        for (var i = 0; i < this.initialBufs.length; i++)\n            resStr += this.decoder.write(this.initialBufs[i]);\n\n        var trail = this.decoder.end();\n        if (trail)\n            resStr += trail;\n\n        this.initialBufs.length = this.initialBufsLen = 0;\n        return resStr;\n    }\n\n    return this.decoder.end();\n};\n\nfunction detectEncoding(bufs, defaultEncoding) {\n    var b = [];\n    var charsProcessed = 0;\n    var invalidLE = 0, invalidBE = 0;   // Number of invalid chars when decoded as LE or BE.\n    var bmpCharsLE = 0, bmpCharsBE = 0; // Number of BMP chars when decoded as LE or BE.\n\n    outer_loop:\n    for (var i = 0; i < bufs.length; i++) {\n        var buf = bufs[i];\n        for (var j = 0; j < buf.length; j++) {\n            b.push(buf[j]);\n            if (b.length === 4) {\n                if (charsProcessed === 0) {\n                    // Check BOM first.\n                    if (b[0] === 0xFF && b[1] === 0xFE && b[2] === 0 && b[3] === 0) {\n                        return 'utf-32le';\n                    }\n                    if (b[0] === 0 && b[1] === 0 && b[2] === 0xFE && b[3] === 0xFF) {\n                        return 'utf-32be';\n                    }\n                }\n\n                if (b[0] !== 0 || b[1] > 0x10) invalidBE++;\n                if (b[3] !== 0 || b[2] > 0x10) invalidLE++;\n\n                if (b[0] === 0 && b[1] === 0 && (b[2] !== 0 || b[3] !== 0)) bmpCharsBE++;\n                if ((b[0] !== 0 || b[1] !== 0) && b[2] === 0 && b[3] === 0) bmpCharsLE++;\n\n                b.length = 0;\n                charsProcessed++;\n\n                if (charsProcessed >= 100) {\n                    break outer_loop;\n                }\n            }\n        }\n    }\n\n    // Make decisions.\n    if (bmpCharsBE - invalidBE > bmpCharsLE - invalidLE)  return 'utf-32be';\n    if (bmpCharsBE - invalidBE < bmpCharsLE - invalidLE)  return 'utf-32le';\n\n    // Couldn't decide (likely all zeros or not enough data).\n    return defaultEncoding || 'utf-32le';\n}\n","\"use strict\";\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// UTF-7 codec, according to https://tools.ietf.org/html/rfc2152\n// See also below a UTF-7-IMAP codec, according to http://tools.ietf.org/html/rfc3501#section-5.1.3\n\nexports.utf7 = Utf7Codec;\nexports.unicode11utf7 = 'utf7'; // Alias UNICODE-1-1-UTF-7\nfunction Utf7Codec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7Codec.prototype.encoder = Utf7Encoder;\nUtf7Codec.prototype.decoder = Utf7Decoder;\nUtf7Codec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nvar nonDirectChars = /[^A-Za-z0-9'\\(\\),-\\.\\/:\\? \\n\\r\\t]+/g;\n\nfunction Utf7Encoder(options, codec) {\n    this.iconv = codec.iconv;\n}\n\nUtf7Encoder.prototype.write = function(str) {\n    // Naive implementation.\n    // Non-direct chars are encoded as \"+<base64>-\"; single \"+\" char is encoded as \"+-\".\n    return Buffer.from(str.replace(nonDirectChars, function(chunk) {\n        return \"+\" + (chunk === '+' ? '' : \n            this.iconv.encode(chunk, 'utf16-be').toString('base64').replace(/=+$/, '')) \n            + \"-\";\n    }.bind(this)));\n}\n\nUtf7Encoder.prototype.end = function() {\n}\n\n\n// -- Decoding\n\nfunction Utf7Decoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64Regex = /[A-Za-z0-9\\/+]/;\nvar base64Chars = [];\nfor (var i = 0; i < 256; i++)\n    base64Chars[i] = base64Regex.test(String.fromCharCode(i));\n\nvar plusChar = '+'.charCodeAt(0), \n    minusChar = '-'.charCodeAt(0),\n    andChar = '&'.charCodeAt(0);\n\nUtf7Decoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '+'\n            if (buf[i] == plusChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64Chars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) {// \"+-\" -> \"+\"\n                    res += \"+\";\n                } else {\n                    var b64str = base64Accum + this.iconv.decode(buf.slice(lastI, i), \"ascii\");\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus is absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + this.iconv.decode(buf.slice(lastI), \"ascii\");\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7Decoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n// UTF-7-IMAP codec.\n// RFC3501 Sec. 5.1.3 Modified UTF-7 (http://tools.ietf.org/html/rfc3501#section-5.1.3)\n// Differences:\n//  * Base64 part is started by \"&\" instead of \"+\"\n//  * Direct characters are 0x20-0x7E, except \"&\" (0x26)\n//  * In Base64, \",\" is used instead of \"/\"\n//  * Base64 must not be used to represent direct characters.\n//  * No implicit shift back from Base64 (should always end with '-')\n//  * String must end in non-shifted position.\n//  * \"-&\" while in base64 is not allowed.\n\n\nexports.utf7imap = Utf7IMAPCodec;\nfunction Utf7IMAPCodec(codecOptions, iconv) {\n    this.iconv = iconv;\n};\n\nUtf7IMAPCodec.prototype.encoder = Utf7IMAPEncoder;\nUtf7IMAPCodec.prototype.decoder = Utf7IMAPDecoder;\nUtf7IMAPCodec.prototype.bomAware = true;\n\n\n// -- Encoding\n\nfunction Utf7IMAPEncoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = Buffer.alloc(6);\n    this.base64AccumIdx = 0;\n}\n\nUtf7IMAPEncoder.prototype.write = function(str) {\n    var inBase64 = this.inBase64,\n        base64Accum = this.base64Accum,\n        base64AccumIdx = this.base64AccumIdx,\n        buf = Buffer.alloc(str.length*5 + 10), bufIdx = 0;\n\n    for (var i = 0; i < str.length; i++) {\n        var uChar = str.charCodeAt(i);\n        if (0x20 <= uChar && uChar <= 0x7E) { // Direct character or '&'.\n            if (inBase64) {\n                if (base64AccumIdx > 0) {\n                    bufIdx += buf.write(base64Accum.slice(0, base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n                    base64AccumIdx = 0;\n                }\n\n                buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n                inBase64 = false;\n            }\n\n            if (!inBase64) {\n                buf[bufIdx++] = uChar; // Write direct character\n\n                if (uChar === andChar)  // Ampersand -> '&-'\n                    buf[bufIdx++] = minusChar;\n            }\n\n        } else { // Non-direct character\n            if (!inBase64) {\n                buf[bufIdx++] = andChar; // Write '&', then go to base64 mode.\n                inBase64 = true;\n            }\n            if (inBase64) {\n                base64Accum[base64AccumIdx++] = uChar >> 8;\n                base64Accum[base64AccumIdx++] = uChar & 0xFF;\n\n                if (base64AccumIdx == base64Accum.length) {\n                    bufIdx += buf.write(base64Accum.toString('base64').replace(/\\//g, ','), bufIdx);\n                    base64AccumIdx = 0;\n                }\n            }\n        }\n    }\n\n    this.inBase64 = inBase64;\n    this.base64AccumIdx = base64AccumIdx;\n\n    return buf.slice(0, bufIdx);\n}\n\nUtf7IMAPEncoder.prototype.end = function() {\n    var buf = Buffer.alloc(10), bufIdx = 0;\n    if (this.inBase64) {\n        if (this.base64AccumIdx > 0) {\n            bufIdx += buf.write(this.base64Accum.slice(0, this.base64AccumIdx).toString('base64').replace(/\\//g, ',').replace(/=+$/, ''), bufIdx);\n            this.base64AccumIdx = 0;\n        }\n\n        buf[bufIdx++] = minusChar; // Write '-', then go to direct mode.\n        this.inBase64 = false;\n    }\n\n    return buf.slice(0, bufIdx);\n}\n\n\n// -- Decoding\n\nfunction Utf7IMAPDecoder(options, codec) {\n    this.iconv = codec.iconv;\n    this.inBase64 = false;\n    this.base64Accum = '';\n}\n\nvar base64IMAPChars = base64Chars.slice();\nbase64IMAPChars[','.charCodeAt(0)] = true;\n\nUtf7IMAPDecoder.prototype.write = function(buf) {\n    var res = \"\", lastI = 0,\n        inBase64 = this.inBase64,\n        base64Accum = this.base64Accum;\n\n    // The decoder is more involved as we must handle chunks in stream.\n    // It is forgiving, closer to standard UTF-7 (for example, '-' is optional at the end).\n\n    for (var i = 0; i < buf.length; i++) {\n        if (!inBase64) { // We're in direct mode.\n            // Write direct chars until '&'\n            if (buf[i] == andChar) {\n                res += this.iconv.decode(buf.slice(lastI, i), \"ascii\"); // Write direct chars.\n                lastI = i+1;\n                inBase64 = true;\n            }\n        } else { // We decode base64.\n            if (!base64IMAPChars[buf[i]]) { // Base64 ended.\n                if (i == lastI && buf[i] == minusChar) { // \"&-\" -> \"&\"\n                    res += \"&\";\n                } else {\n                    var b64str = base64Accum + this.iconv.decode(buf.slice(lastI, i), \"ascii\").replace(/,/g, '/');\n                    res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n                }\n\n                if (buf[i] != minusChar) // Minus may be absorbed after base64.\n                    i--;\n\n                lastI = i+1;\n                inBase64 = false;\n                base64Accum = '';\n            }\n        }\n    }\n\n    if (!inBase64) {\n        res += this.iconv.decode(buf.slice(lastI), \"ascii\"); // Write direct chars.\n    } else {\n        var b64str = base64Accum + this.iconv.decode(buf.slice(lastI), \"ascii\").replace(/,/g, '/');\n\n        var canBeDecoded = b64str.length - (b64str.length % 8); // Minimal chunk: 2 quads -> 2x3 bytes -> 3 chars.\n        base64Accum = b64str.slice(canBeDecoded); // The rest will be decoded in future.\n        b64str = b64str.slice(0, canBeDecoded);\n\n        res += this.iconv.decode(Buffer.from(b64str, 'base64'), \"utf16-be\");\n    }\n\n    this.inBase64 = inBase64;\n    this.base64Accum = base64Accum;\n\n    return res;\n}\n\nUtf7IMAPDecoder.prototype.end = function() {\n    var res = \"\";\n    if (this.inBase64 && this.base64Accum.length > 0)\n        res = this.iconv.decode(Buffer.from(this.base64Accum, 'base64'), \"utf16-be\");\n\n    this.inBase64 = false;\n    this.base64Accum = '';\n    return res;\n}\n\n\n","\"use strict\";\n\nvar BOMChar = '\\uFEFF';\n\nexports.PrependBOM = PrependBOMWrapper\nfunction PrependBOMWrapper(encoder, options) {\n    this.encoder = encoder;\n    this.addBOM = true;\n}\n\nPrependBOMWrapper.prototype.write = function(str) {\n    if (this.addBOM) {\n        str = BOMChar + str;\n        this.addBOM = false;\n    }\n\n    return this.encoder.write(str);\n}\n\nPrependBOMWrapper.prototype.end = function() {\n    return this.encoder.end();\n}\n\n\n//------------------------------------------------------------------------------\n\nexports.StripBOM = StripBOMWrapper;\nfunction StripBOMWrapper(decoder, options) {\n    this.decoder = decoder;\n    this.pass = false;\n    this.options = options || {};\n}\n\nStripBOMWrapper.prototype.write = function(buf) {\n    var res = this.decoder.write(buf);\n    if (this.pass || !res)\n        return res;\n\n    if (res[0] === BOMChar) {\n        res = res.slice(1);\n        if (typeof this.options.stripBOM === 'function')\n            this.options.stripBOM();\n    }\n\n    this.pass = true;\n    return res;\n}\n\nStripBOMWrapper.prototype.end = function() {\n    return this.decoder.end();\n}\n\n","\"use strict\";\n\nvar Buffer = require(\"safer-buffer\").Buffer;\n\nvar bomHandling = require(\"./bom-handling\"),\n    iconv = module.exports;\n\n// All codecs and aliases are kept here, keyed by encoding name/alias.\n// They are lazy loaded in `iconv.getCodec` from `encodings/index.js`.\niconv.encodings = null;\n\n// Characters emitted in case of error.\niconv.defaultCharUnicode = '';\niconv.defaultCharSingleByte = '?';\n\n// Public API.\niconv.encode = function encode(str, encoding, options) {\n    str = \"\" + (str || \"\"); // Ensure string.\n\n    var encoder = iconv.getEncoder(encoding, options);\n\n    var res = encoder.write(str);\n    var trail = encoder.end();\n    \n    return (trail && trail.length > 0) ? Buffer.concat([res, trail]) : res;\n}\n\niconv.decode = function decode(buf, encoding, options) {\n    if (typeof buf === 'string') {\n        if (!iconv.skipDecodeWarning) {\n            console.error('Iconv-lite warning: decode()-ing strings is deprecated. Refer to https://github.com/ashtuchkin/iconv-lite/wiki/Use-Buffers-when-decoding');\n            iconv.skipDecodeWarning = true;\n        }\n\n        buf = Buffer.from(\"\" + (buf || \"\"), \"binary\"); // Ensure buffer.\n    }\n\n    var decoder = iconv.getDecoder(encoding, options);\n\n    var res = decoder.write(buf);\n    var trail = decoder.end();\n\n    return trail ? (res + trail) : res;\n}\n\niconv.encodingExists = function encodingExists(enc) {\n    try {\n        iconv.getCodec(enc);\n        return true;\n    } catch (e) {\n        return false;\n    }\n}\n\n// Legacy aliases to convert functions\niconv.toEncoding = iconv.encode;\niconv.fromEncoding = iconv.decode;\n\n// Search for a codec in iconv.encodings. Cache codec data in iconv._codecDataCache.\niconv._codecDataCache = {};\niconv.getCodec = function getCodec(encoding) {\n    if (!iconv.encodings)\n        iconv.encodings = require(\"../encodings\"); // Lazy load all encoding definitions.\n    \n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    var enc = iconv._canonicalizeEncoding(encoding);\n\n    // Traverse iconv.encodings to find actual codec.\n    var codecOptions = {};\n    while (true) {\n        var codec = iconv._codecDataCache[enc];\n        if (codec)\n            return codec;\n\n        var codecDef = iconv.encodings[enc];\n\n        switch (typeof codecDef) {\n            case \"string\": // Direct alias to other encoding.\n                enc = codecDef;\n                break;\n\n            case \"object\": // Alias with options. Can be layered.\n                for (var key in codecDef)\n                    codecOptions[key] = codecDef[key];\n\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n                \n                enc = codecDef.type;\n                break;\n\n            case \"function\": // Codec itself.\n                if (!codecOptions.encodingName)\n                    codecOptions.encodingName = enc;\n\n                // The codec function must load all tables and return object with .encoder and .decoder methods.\n                // It'll be called only once (for each different options object).\n                codec = new codecDef(codecOptions, iconv);\n\n                iconv._codecDataCache[codecOptions.encodingName] = codec; // Save it to be reused later.\n                return codec;\n\n            default:\n                throw new Error(\"Encoding not recognized: '\" + encoding + \"' (searched as: '\"+enc+\"')\");\n        }\n    }\n}\n\niconv._canonicalizeEncoding = function(encoding) {\n    // Canonicalize encoding name: strip all non-alphanumeric chars and appended year.\n    return (''+encoding).toLowerCase().replace(/:\\d{4}$|[^0-9a-z]/g, \"\");\n}\n\niconv.getEncoder = function getEncoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        encoder = new codec.encoder(options, codec);\n\n    if (codec.bomAware && options && options.addBOM)\n        encoder = new bomHandling.PrependBOM(encoder, options);\n\n    return encoder;\n}\n\niconv.getDecoder = function getDecoder(encoding, options) {\n    var codec = iconv.getCodec(encoding),\n        decoder = new codec.decoder(options, codec);\n\n    if (codec.bomAware && !(options && options.stripBOM === false))\n        decoder = new bomHandling.StripBOM(decoder, options);\n\n    return decoder;\n}\n\n// Streaming API\n// NOTE: Streaming API naturally depends on 'stream' module from Node.js. Unfortunately in browser environments this module can add\n// up to 100Kb to the output bundle. To avoid unnecessary code bloat, we don't enable Streaming API in browser by default.\n// If you would like to enable it explicitly, please add the following code to your app:\n// > iconv.enableStreamingAPI(require('stream'));\niconv.enableStreamingAPI = function enableStreamingAPI(stream_module) {\n    if (iconv.supportsStreams)\n        return;\n\n    // Dependency-inject stream module to create IconvLite stream classes.\n    var streams = require(\"./streams\")(stream_module);\n\n    // Not public API yet, but expose the stream classes.\n    iconv.IconvLiteEncoderStream = streams.IconvLiteEncoderStream;\n    iconv.IconvLiteDecoderStream = streams.IconvLiteDecoderStream;\n\n    // Streaming API.\n    iconv.encodeStream = function encodeStream(encoding, options) {\n        return new iconv.IconvLiteEncoderStream(iconv.getEncoder(encoding, options), options);\n    }\n\n    iconv.decodeStream = function decodeStream(encoding, options) {\n        return new iconv.IconvLiteDecoderStream(iconv.getDecoder(encoding, options), options);\n    }\n\n    iconv.supportsStreams = true;\n}\n\n// Enable Streaming API automatically if 'stream' module is available and non-empty (the majority of environments).\nvar stream_module;\ntry {\n    stream_module = require(\"stream\");\n} catch (e) {}\n\nif (stream_module && stream_module.Transform) {\n    iconv.enableStreamingAPI(stream_module);\n\n} else {\n    // In rare cases where 'stream' module is not available by default, throw a helpful exception.\n    iconv.encodeStream = iconv.decodeStream = function() {\n        throw new Error(\"iconv-lite Streaming API is not enabled. Use iconv.enableStreamingAPI(require('stream')); to enable it.\");\n    };\n}\n\nif (\"\" != \"\\u0100\") {\n    console.error(\"iconv-lite warning: js files use non-utf8 encoding. See https://github.com/ashtuchkin/iconv-lite/wiki/Javascript-source-file-encodings for more info.\");\n}\n","\"use strict\";\n\nvar Buffer = require(\"safer-buffer\").Buffer;\n\n// NOTE: Due to 'stream' module being pretty large (~100Kb, significant in browser environments), \n// we opt to dependency-inject it instead of creating a hard dependency.\nmodule.exports = function(stream_module) {\n    var Transform = stream_module.Transform;\n\n    // == Encoder stream =======================================================\n\n    function IconvLiteEncoderStream(conv, options) {\n        this.conv = conv;\n        options = options || {};\n        options.decodeStrings = false; // We accept only strings, so we don't need to decode them.\n        Transform.call(this, options);\n    }\n\n    IconvLiteEncoderStream.prototype = Object.create(Transform.prototype, {\n        constructor: { value: IconvLiteEncoderStream }\n    });\n\n    IconvLiteEncoderStream.prototype._transform = function(chunk, encoding, done) {\n        if (typeof chunk != 'string')\n            return done(new Error(\"Iconv encoding stream needs strings as its input.\"));\n        try {\n            var res = this.conv.write(chunk);\n            if (res && res.length) this.push(res);\n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteEncoderStream.prototype._flush = function(done) {\n        try {\n            var res = this.conv.end();\n            if (res && res.length) this.push(res);\n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteEncoderStream.prototype.collect = function(cb) {\n        var chunks = [];\n        this.on('error', cb);\n        this.on('data', function(chunk) { chunks.push(chunk); });\n        this.on('end', function() {\n            cb(null, Buffer.concat(chunks));\n        });\n        return this;\n    }\n\n\n    // == Decoder stream =======================================================\n\n    function IconvLiteDecoderStream(conv, options) {\n        this.conv = conv;\n        options = options || {};\n        options.encoding = this.encoding = 'utf8'; // We output strings.\n        Transform.call(this, options);\n    }\n\n    IconvLiteDecoderStream.prototype = Object.create(Transform.prototype, {\n        constructor: { value: IconvLiteDecoderStream }\n    });\n\n    IconvLiteDecoderStream.prototype._transform = function(chunk, encoding, done) {\n        if (!Buffer.isBuffer(chunk) && !(chunk instanceof Uint8Array))\n            return done(new Error(\"Iconv decoding stream needs buffers as its input.\"));\n        try {\n            var res = this.conv.write(chunk);\n            if (res && res.length) this.push(res, this.encoding);\n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteDecoderStream.prototype._flush = function(done) {\n        try {\n            var res = this.conv.end();\n            if (res && res.length) this.push(res, this.encoding);                \n            done();\n        }\n        catch (e) {\n            done(e);\n        }\n    }\n\n    IconvLiteDecoderStream.prototype.collect = function(cb) {\n        var res = '';\n        this.on('error', cb);\n        this.on('data', function(chunk) { res += chunk; });\n        this.on('end', function() {\n            cb(null, res);\n        });\n        return this;\n    }\n\n    return {\n        IconvLiteEncoderStream: IconvLiteEncoderStream,\n        IconvLiteDecoderStream: IconvLiteDecoderStream,\n    };\n};\n","/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nexports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","// https://github.com/electron/electron/issues/2288\nfunction isElectron() {\n    // Renderer process\n    if (typeof window !== 'undefined' && typeof window.process === 'object' && window.process.type === 'renderer') {\n        return true;\n    }\n\n    // Main process\n    if (typeof process !== 'undefined' && typeof process.versions === 'object' && !!process.versions.electron) {\n        return true;\n    }\n\n    // Detect the user agent when the `nodeIntegration` option is set to false\n    if (typeof navigator === 'object' && typeof navigator.userAgent === 'string' && navigator.userAgent.indexOf('Electron') >= 0) {\n        return true;\n    }\n\n    return false;\n}\n\nmodule.exports = isElectron;\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","// 'path' module extracted from Node.js v8.11.1 (only the posix part)\n// transplited with Babel\n\n// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nfunction assertPath(path) {\n  if (typeof path !== 'string') {\n    throw new TypeError('Path must be a string. Received ' + JSON.stringify(path));\n  }\n}\n\n// Resolves . and .. elements in a path with directory names\nfunction normalizeStringPosix(path, allowAboveRoot) {\n  var res = '';\n  var lastSegmentLength = 0;\n  var lastSlash = -1;\n  var dots = 0;\n  var code;\n  for (var i = 0; i <= path.length; ++i) {\n    if (i < path.length)\n      code = path.charCodeAt(i);\n    else if (code === 47 /*/*/)\n      break;\n    else\n      code = 47 /*/*/;\n    if (code === 47 /*/*/) {\n      if (lastSlash === i - 1 || dots === 1) {\n        // NOOP\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 /*.*/ || res.charCodeAt(res.length - 2) !== 46 /*.*/) {\n          if (res.length > 2) {\n            var lastSlashIndex = res.lastIndexOf('/');\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = '';\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf('/');\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = '';\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0)\n            res += '/..';\n          else\n            res = '..';\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0)\n          res += '/' + path.slice(lastSlash + 1, i);\n        else\n          res = path.slice(lastSlash + 1, i);\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 /*.*/ && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\n\nfunction _format(sep, pathObject) {\n  var dir = pathObject.dir || pathObject.root;\n  var base = pathObject.base || (pathObject.name || '') + (pathObject.ext || '');\n  if (!dir) {\n    return base;\n  }\n  if (dir === pathObject.root) {\n    return dir + base;\n  }\n  return dir + sep + base;\n}\n\nvar posix = {\n  // path.resolve([from ...], to)\n  resolve: function resolve() {\n    var resolvedPath = '';\n    var resolvedAbsolute = false;\n    var cwd;\n\n    for (var i = arguments.length - 1; i >= -1 && !resolvedAbsolute; i--) {\n      var path;\n      if (i >= 0)\n        path = arguments[i];\n      else {\n        if (cwd === undefined)\n          cwd = process.cwd();\n        path = cwd;\n      }\n\n      assertPath(path);\n\n      // Skip empty entries\n      if (path.length === 0) {\n        continue;\n      }\n\n      resolvedPath = path + '/' + resolvedPath;\n      resolvedAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    }\n\n    // At this point the path should be resolved to a full absolute path, but\n    // handle relative paths to be safe (might happen when process.cwd() fails)\n\n    // Normalize the path\n    resolvedPath = normalizeStringPosix(resolvedPath, !resolvedAbsolute);\n\n    if (resolvedAbsolute) {\n      if (resolvedPath.length > 0)\n        return '/' + resolvedPath;\n      else\n        return '/';\n    } else if (resolvedPath.length > 0) {\n      return resolvedPath;\n    } else {\n      return '.';\n    }\n  },\n\n  normalize: function normalize(path) {\n    assertPath(path);\n\n    if (path.length === 0) return '.';\n\n    var isAbsolute = path.charCodeAt(0) === 47 /*/*/;\n    var trailingSeparator = path.charCodeAt(path.length - 1) === 47 /*/*/;\n\n    // Normalize the path\n    path = normalizeStringPosix(path, !isAbsolute);\n\n    if (path.length === 0 && !isAbsolute) path = '.';\n    if (path.length > 0 && trailingSeparator) path += '/';\n\n    if (isAbsolute) return '/' + path;\n    return path;\n  },\n\n  isAbsolute: function isAbsolute(path) {\n    assertPath(path);\n    return path.length > 0 && path.charCodeAt(0) === 47 /*/*/;\n  },\n\n  join: function join() {\n    if (arguments.length === 0)\n      return '.';\n    var joined;\n    for (var i = 0; i < arguments.length; ++i) {\n      var arg = arguments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === undefined)\n          joined = arg;\n        else\n          joined += '/' + arg;\n      }\n    }\n    if (joined === undefined)\n      return '.';\n    return posix.normalize(joined);\n  },\n\n  relative: function relative(from, to) {\n    assertPath(from);\n    assertPath(to);\n\n    if (from === to) return '';\n\n    from = posix.resolve(from);\n    to = posix.resolve(to);\n\n    if (from === to) return '';\n\n    // Trim any leading backslashes\n    var fromStart = 1;\n    for (; fromStart < from.length; ++fromStart) {\n      if (from.charCodeAt(fromStart) !== 47 /*/*/)\n        break;\n    }\n    var fromEnd = from.length;\n    var fromLen = fromEnd - fromStart;\n\n    // Trim any leading backslashes\n    var toStart = 1;\n    for (; toStart < to.length; ++toStart) {\n      if (to.charCodeAt(toStart) !== 47 /*/*/)\n        break;\n    }\n    var toEnd = to.length;\n    var toLen = toEnd - toStart;\n\n    // Compare paths to find the longest common path from root\n    var length = fromLen < toLen ? fromLen : toLen;\n    var lastCommonSep = -1;\n    var i = 0;\n    for (; i <= length; ++i) {\n      if (i === length) {\n        if (toLen > length) {\n          if (to.charCodeAt(toStart + i) === 47 /*/*/) {\n            // We get here if `from` is the exact base path for `to`.\n            // For example: from='/foo/bar'; to='/foo/bar/baz'\n            return to.slice(toStart + i + 1);\n          } else if (i === 0) {\n            // We get here if `from` is the root\n            // For example: from='/'; to='/foo'\n            return to.slice(toStart + i);\n          }\n        } else if (fromLen > length) {\n          if (from.charCodeAt(fromStart + i) === 47 /*/*/) {\n            // We get here if `to` is the exact base path for `from`.\n            // For example: from='/foo/bar/baz'; to='/foo/bar'\n            lastCommonSep = i;\n          } else if (i === 0) {\n            // We get here if `to` is the root.\n            // For example: from='/foo'; to='/'\n            lastCommonSep = 0;\n          }\n        }\n        break;\n      }\n      var fromCode = from.charCodeAt(fromStart + i);\n      var toCode = to.charCodeAt(toStart + i);\n      if (fromCode !== toCode)\n        break;\n      else if (fromCode === 47 /*/*/)\n        lastCommonSep = i;\n    }\n\n    var out = '';\n    // Generate the relative path based on the path difference between `to`\n    // and `from`\n    for (i = fromStart + lastCommonSep + 1; i <= fromEnd; ++i) {\n      if (i === fromEnd || from.charCodeAt(i) === 47 /*/*/) {\n        if (out.length === 0)\n          out += '..';\n        else\n          out += '/..';\n      }\n    }\n\n    // Lastly, append the rest of the destination (`to`) path that comes after\n    // the common path parts\n    if (out.length > 0)\n      return out + to.slice(toStart + lastCommonSep);\n    else {\n      toStart += lastCommonSep;\n      if (to.charCodeAt(toStart) === 47 /*/*/)\n        ++toStart;\n      return to.slice(toStart);\n    }\n  },\n\n  _makeLong: function _makeLong(path) {\n    return path;\n  },\n\n  dirname: function dirname(path) {\n    assertPath(path);\n    if (path.length === 0) return '.';\n    var code = path.charCodeAt(0);\n    var hasRoot = code === 47 /*/*/;\n    var end = -1;\n    var matchedSlash = true;\n    for (var i = path.length - 1; i >= 1; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          if (!matchedSlash) {\n            end = i;\n            break;\n          }\n        } else {\n        // We saw the first non-path separator\n        matchedSlash = false;\n      }\n    }\n\n    if (end === -1) return hasRoot ? '/' : '.';\n    if (hasRoot && end === 1) return '//';\n    return path.slice(0, end);\n  },\n\n  basename: function basename(path, ext) {\n    if (ext !== undefined && typeof ext !== 'string') throw new TypeError('\"ext\" argument must be a string');\n    assertPath(path);\n\n    var start = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i;\n\n    if (ext !== undefined && ext.length > 0 && ext.length <= path.length) {\n      if (ext.length === path.length && ext === path) return '';\n      var extIdx = ext.length - 1;\n      var firstNonSlashEnd = -1;\n      for (i = path.length - 1; i >= 0; --i) {\n        var code = path.charCodeAt(i);\n        if (code === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else {\n          if (firstNonSlashEnd === -1) {\n            // We saw the first non-path separator, remember this index in case\n            // we need it if the extension ends up not matching\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            // Try to match the explicit extension\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                // We matched the extension, so mark this as the end of our path\n                // component\n                end = i;\n              }\n            } else {\n              // Extension does not match, so our result is the entire path\n              // component\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n\n      if (start === end) end = firstNonSlashEnd;else if (end === -1) end = path.length;\n      return path.slice(start, end);\n    } else {\n      for (i = path.length - 1; i >= 0; --i) {\n        if (path.charCodeAt(i) === 47 /*/*/) {\n            // If we reached a path separator that was not part of a set of path\n            // separators at the end of the string, stop now\n            if (!matchedSlash) {\n              start = i + 1;\n              break;\n            }\n          } else if (end === -1) {\n          // We saw the first non-path separator, mark this as the end of our\n          // path component\n          matchedSlash = false;\n          end = i + 1;\n        }\n      }\n\n      if (end === -1) return '';\n      return path.slice(start, end);\n    }\n  },\n\n  extname: function extname(path) {\n    assertPath(path);\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n    for (var i = path.length - 1; i >= 0; --i) {\n      var code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1)\n            startDot = i;\n          else if (preDotState !== 1)\n            preDotState = 1;\n      } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n        // We saw a non-dot character immediately before the dot\n        preDotState === 0 ||\n        // The (right-most) trimmed path component is exactly '..'\n        preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return '';\n    }\n    return path.slice(startDot, end);\n  },\n\n  format: function format(pathObject) {\n    if (pathObject === null || typeof pathObject !== 'object') {\n      throw new TypeError('The \"pathObject\" argument must be of type Object. Received type ' + typeof pathObject);\n    }\n    return _format('/', pathObject);\n  },\n\n  parse: function parse(path) {\n    assertPath(path);\n\n    var ret = { root: '', dir: '', base: '', ext: '', name: '' };\n    if (path.length === 0) return ret;\n    var code = path.charCodeAt(0);\n    var isAbsolute = code === 47 /*/*/;\n    var start;\n    if (isAbsolute) {\n      ret.root = '/';\n      start = 1;\n    } else {\n      start = 0;\n    }\n    var startDot = -1;\n    var startPart = 0;\n    var end = -1;\n    var matchedSlash = true;\n    var i = path.length - 1;\n\n    // Track the state of characters (if any) we see before our first dot and\n    // after any path separator we find\n    var preDotState = 0;\n\n    // Get non-dir info\n    for (; i >= start; --i) {\n      code = path.charCodeAt(i);\n      if (code === 47 /*/*/) {\n          // If we reached a path separator that was not part of a set of path\n          // separators at the end of the string, stop now\n          if (!matchedSlash) {\n            startPart = i + 1;\n            break;\n          }\n          continue;\n        }\n      if (end === -1) {\n        // We saw the first non-path separator, mark this as the end of our\n        // extension\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46 /*.*/) {\n          // If this is our first dot, mark it as the start of our extension\n          if (startDot === -1) startDot = i;else if (preDotState !== 1) preDotState = 1;\n        } else if (startDot !== -1) {\n        // We saw a non-dot and non-path separator before our dot, so we should\n        // have a good chance at having a non-empty extension\n        preDotState = -1;\n      }\n    }\n\n    if (startDot === -1 || end === -1 ||\n    // We saw a non-dot character immediately before the dot\n    preDotState === 0 ||\n    // The (right-most) trimmed path component is exactly '..'\n    preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute) ret.base = ret.name = path.slice(1, end);else ret.base = ret.name = path.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path.slice(1, startDot);\n        ret.base = path.slice(1, end);\n      } else {\n        ret.name = path.slice(startPart, startDot);\n        ret.base = path.slice(startPart, end);\n      }\n      ret.ext = path.slice(startDot, end);\n    }\n\n    if (startPart > 0) ret.dir = path.slice(0, startPart - 1);else if (isAbsolute) ret.dir = '/';\n\n    return ret;\n  },\n\n  sep: '/',\n  delimiter: ':',\n  win32: null,\n  posix: null\n};\n\nposix.posix = posix;\n\nmodule.exports = posix;\n","/* eslint-disable node/no-deprecated-api */\n\n'use strict'\n\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\nvar safer = {}\n\nvar key\n\nfor (key in buffer) {\n  if (!buffer.hasOwnProperty(key)) continue\n  if (key === 'SlowBuffer' || key === 'Buffer') continue\n  safer[key] = buffer[key]\n}\n\nvar Safer = safer.Buffer = {}\nfor (key in Buffer) {\n  if (!Buffer.hasOwnProperty(key)) continue\n  if (key === 'allocUnsafe' || key === 'allocUnsafeSlow') continue\n  Safer[key] = Buffer[key]\n}\n\nsafer.Buffer.prototype = Buffer.prototype\n\nif (!Safer.from || Safer.from === Uint8Array.from) {\n  Safer.from = function (value, encodingOrOffset, length) {\n    if (typeof value === 'number') {\n      throw new TypeError('The \"value\" argument must not be of type number. Received type ' + typeof value)\n    }\n    if (value && typeof value.length === 'undefined') {\n      throw new TypeError('The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type ' + typeof value)\n    }\n    return Buffer(value, encodingOrOffset, length)\n  }\n}\n\nif (!Safer.alloc) {\n  Safer.alloc = function (size, fill, encoding) {\n    if (typeof size !== 'number') {\n      throw new TypeError('The \"size\" argument must be of type number. Received type ' + typeof size)\n    }\n    if (size < 0 || size >= 2 * (1 << 30)) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"')\n    }\n    var buf = Buffer(size)\n    if (!fill || fill.length === 0) {\n      buf.fill(0)\n    } else if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n    return buf\n  }\n}\n\nif (!safer.kStringMaxLength) {\n  try {\n    safer.kStringMaxLength = process.binding('buffer').kStringMaxLength\n  } catch (e) {\n    // we can't determine kStringMaxLength in environments where process.binding\n    // is unsupported, so let's not set it\n  }\n}\n\nif (!safer.constants) {\n  safer.constants = {\n    MAX_LENGTH: safer.kMaxLength\n  }\n  if (safer.kStringMaxLength) {\n    safer.constants.MAX_STRING_LENGTH = safer.kStringMaxLength\n  }\n}\n\nmodule.exports = safer\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Unique ID creation requires a high quality random # generator. In the browser we therefore\n// require the crypto API and do not support built-in fallback to lower quality random number\n// generators (like Math.random()).\nvar getRandomValues;\nvar rnds8 = new Uint8Array(16);\nexport default function rng() {\n  // lazy load so that environments that need to polyfill have a chance to do so\n  if (!getRandomValues) {\n    // getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation. Also,\n    // find the complete implementation of crypto (msCrypto) on IE11.\n    getRandomValues = typeof crypto !== 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto) || typeof msCrypto !== 'undefined' && typeof msCrypto.getRandomValues === 'function' && msCrypto.getRandomValues.bind(msCrypto);\n\n    if (!getRandomValues) {\n      throw new Error('crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported');\n    }\n  }\n\n  return getRandomValues(rnds8);\n}","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;","import REGEX from './regex.js';\n\nfunction validate(uuid) {\n  return typeof uuid === 'string' && REGEX.test(uuid);\n}\n\nexport default validate;","import validate from './validate.js';\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex.push((i + 0x100).toString(16).substr(1));\n}\n\nfunction stringify(arr) {\n  var offset = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n  // Note: Be careful editing this code!  It's been tuned for performance\n  // and works in ways you may not expect. See https://github.com/uuidjs/uuid/pull/434\n  var uuid = (byteToHex[arr[offset + 0]] + byteToHex[arr[offset + 1]] + byteToHex[arr[offset + 2]] + byteToHex[arr[offset + 3]] + '-' + byteToHex[arr[offset + 4]] + byteToHex[arr[offset + 5]] + '-' + byteToHex[arr[offset + 6]] + byteToHex[arr[offset + 7]] + '-' + byteToHex[arr[offset + 8]] + byteToHex[arr[offset + 9]] + '-' + byteToHex[arr[offset + 10]] + byteToHex[arr[offset + 11]] + byteToHex[arr[offset + 12]] + byteToHex[arr[offset + 13]] + byteToHex[arr[offset + 14]] + byteToHex[arr[offset + 15]]).toLowerCase(); // Consistency check for valid UUID.  If this throws, it's likely due to one\n  // of the following:\n  // - One or more input array values don't map to a hex octet (leading to\n  // \"undefined\" in the uuid)\n  // - Invalid input values for the RFC `version` or `variant` fields\n\n  if (!validate(uuid)) {\n    throw TypeError('Stringified UUID is invalid');\n  }\n\n  return uuid;\n}\n\nexport default stringify;","import rng from './rng.js';\nimport stringify from './stringify.js'; // **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\n\nvar _clockseq; // Previous uuid creation time\n\n\nvar _lastMSecs = 0;\nvar _lastNSecs = 0; // See https://github.com/uuidjs/uuid for API details\n\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || new Array(16);\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq; // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n\n  if (node == null || clockseq == null) {\n    var seedBytes = options.random || (options.rng || rng)();\n\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [seedBytes[0] | 0x01, seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]];\n    }\n\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  } // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n\n\n  var msecs = options.msecs !== undefined ? options.msecs : Date.now(); // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1; // Time since last uuid creation (in msecs)\n\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000; // Per 4.2.1.2, Bump clockseq on clock regression\n\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  } // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n\n\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  } // Per 4.2.1.2 Throw error if too many uuids are requested\n\n\n  if (nsecs >= 10000) {\n    throw new Error(\"uuid.v1(): Can't create more than 10M uuids/sec\");\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq; // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n\n  msecs += 12219292800000; // `time_low`\n\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff; // `time_mid`\n\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff; // `time_high_and_version`\n\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n\n  b[i++] = tmh >>> 16 & 0xff; // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n\n  b[i++] = clockseq >>> 8 | 0x80; // `clock_seq_low`\n\n  b[i++] = clockseq & 0xff; // `node`\n\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf || stringify(b);\n}\n\nexport default v1;","import validate from './validate.js';\n\nfunction parse(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  var v;\n  var arr = new Uint8Array(16); // Parse ########-....-....-....-............\n\n  arr[0] = (v = parseInt(uuid.slice(0, 8), 16)) >>> 24;\n  arr[1] = v >>> 16 & 0xff;\n  arr[2] = v >>> 8 & 0xff;\n  arr[3] = v & 0xff; // Parse ........-####-....-....-............\n\n  arr[4] = (v = parseInt(uuid.slice(9, 13), 16)) >>> 8;\n  arr[5] = v & 0xff; // Parse ........-....-####-....-............\n\n  arr[6] = (v = parseInt(uuid.slice(14, 18), 16)) >>> 8;\n  arr[7] = v & 0xff; // Parse ........-....-....-####-............\n\n  arr[8] = (v = parseInt(uuid.slice(19, 23), 16)) >>> 8;\n  arr[9] = v & 0xff; // Parse ........-....-....-....-############\n  // (Use \"/\" to avoid 32-bit truncation when bit-shifting high-order bytes)\n\n  arr[10] = (v = parseInt(uuid.slice(24, 36), 16)) / 0x10000000000 & 0xff;\n  arr[11] = v / 0x100000000 & 0xff;\n  arr[12] = v >>> 24 & 0xff;\n  arr[13] = v >>> 16 & 0xff;\n  arr[14] = v >>> 8 & 0xff;\n  arr[15] = v & 0xff;\n  return arr;\n}\n\nexport default parse;","import stringify from './stringify.js';\nimport parse from './parse.js';\n\nfunction stringToBytes(str) {\n  str = unescape(encodeURIComponent(str)); // UTF8 escape\n\n  var bytes = [];\n\n  for (var i = 0; i < str.length; ++i) {\n    bytes.push(str.charCodeAt(i));\n  }\n\n  return bytes;\n}\n\nexport var DNS = '6ba7b810-9dad-11d1-80b4-00c04fd430c8';\nexport var URL = '6ba7b811-9dad-11d1-80b4-00c04fd430c8';\nexport default function (name, version, hashfunc) {\n  function generateUUID(value, namespace, buf, offset) {\n    if (typeof value === 'string') {\n      value = stringToBytes(value);\n    }\n\n    if (typeof namespace === 'string') {\n      namespace = parse(namespace);\n    }\n\n    if (namespace.length !== 16) {\n      throw TypeError('Namespace must be array-like (16 iterable integer values, 0-255)');\n    } // Compute hash of namespace and value, Per 4.3\n    // Future: Use spread syntax when supported on all platforms, e.g. `bytes =\n    // hashfunc([...namespace, ... value])`\n\n\n    var bytes = new Uint8Array(16 + value.length);\n    bytes.set(namespace);\n    bytes.set(value, namespace.length);\n    bytes = hashfunc(bytes);\n    bytes[6] = bytes[6] & 0x0f | version;\n    bytes[8] = bytes[8] & 0x3f | 0x80;\n\n    if (buf) {\n      offset = offset || 0;\n\n      for (var i = 0; i < 16; ++i) {\n        buf[offset + i] = bytes[i];\n      }\n\n      return buf;\n    }\n\n    return stringify(bytes);\n  } // Function#name is not settable on some platforms (#270)\n\n\n  try {\n    generateUUID.name = name; // eslint-disable-next-line no-empty\n  } catch (err) {} // For CommonJS default export support\n\n\n  generateUUID.DNS = DNS;\n  generateUUID.URL = URL;\n  return generateUUID;\n}","/*\n * Browser-compatible JavaScript MD5\n *\n * Modification of JavaScript MD5\n * https://github.com/blueimp/JavaScript-MD5\n *\n * Copyright 2011, Sebastian Tschan\n * https://blueimp.net\n *\n * Licensed under the MIT license:\n * https://opensource.org/licenses/MIT\n *\n * Based on\n * A JavaScript implementation of the RSA Data Security, Inc. MD5 Message\n * Digest Algorithm, as defined in RFC 1321.\n * Version 2.2 Copyright (C) Paul Johnston 1999 - 2009\n * Other contributors: Greg Holt, Andrew Kepert, Ydnar, Lostinet\n * Distributed under the BSD License\n * See http://pajhome.org.uk/crypt/md5 for more info.\n */\nfunction md5(bytes) {\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = new Uint8Array(msg.length);\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes[i] = msg.charCodeAt(i);\n    }\n  }\n\n  return md5ToHexEncodedArray(wordsToMd5(bytesToWords(bytes), bytes.length * 8));\n}\n/*\n * Convert an array of little-endian words to an array of bytes\n */\n\n\nfunction md5ToHexEncodedArray(input) {\n  var output = [];\n  var length32 = input.length * 32;\n  var hexTab = '0123456789abcdef';\n\n  for (var i = 0; i < length32; i += 8) {\n    var x = input[i >> 5] >>> i % 32 & 0xff;\n    var hex = parseInt(hexTab.charAt(x >>> 4 & 0x0f) + hexTab.charAt(x & 0x0f), 16);\n    output.push(hex);\n  }\n\n  return output;\n}\n/**\n * Calculate output length with padding and bit length\n */\n\n\nfunction getOutputLength(inputLength8) {\n  return (inputLength8 + 64 >>> 9 << 4) + 14 + 1;\n}\n/*\n * Calculate the MD5 of an array of little-endian words, and a bit length.\n */\n\n\nfunction wordsToMd5(x, len) {\n  /* append padding */\n  x[len >> 5] |= 0x80 << len % 32;\n  x[getOutputLength(len) - 1] = len;\n  var a = 1732584193;\n  var b = -271733879;\n  var c = -1732584194;\n  var d = 271733878;\n\n  for (var i = 0; i < x.length; i += 16) {\n    var olda = a;\n    var oldb = b;\n    var oldc = c;\n    var oldd = d;\n    a = md5ff(a, b, c, d, x[i], 7, -680876936);\n    d = md5ff(d, a, b, c, x[i + 1], 12, -389564586);\n    c = md5ff(c, d, a, b, x[i + 2], 17, 606105819);\n    b = md5ff(b, c, d, a, x[i + 3], 22, -1044525330);\n    a = md5ff(a, b, c, d, x[i + 4], 7, -176418897);\n    d = md5ff(d, a, b, c, x[i + 5], 12, 1200080426);\n    c = md5ff(c, d, a, b, x[i + 6], 17, -1473231341);\n    b = md5ff(b, c, d, a, x[i + 7], 22, -45705983);\n    a = md5ff(a, b, c, d, x[i + 8], 7, 1770035416);\n    d = md5ff(d, a, b, c, x[i + 9], 12, -1958414417);\n    c = md5ff(c, d, a, b, x[i + 10], 17, -42063);\n    b = md5ff(b, c, d, a, x[i + 11], 22, -1990404162);\n    a = md5ff(a, b, c, d, x[i + 12], 7, 1804603682);\n    d = md5ff(d, a, b, c, x[i + 13], 12, -40341101);\n    c = md5ff(c, d, a, b, x[i + 14], 17, -1502002290);\n    b = md5ff(b, c, d, a, x[i + 15], 22, 1236535329);\n    a = md5gg(a, b, c, d, x[i + 1], 5, -165796510);\n    d = md5gg(d, a, b, c, x[i + 6], 9, -1069501632);\n    c = md5gg(c, d, a, b, x[i + 11], 14, 643717713);\n    b = md5gg(b, c, d, a, x[i], 20, -373897302);\n    a = md5gg(a, b, c, d, x[i + 5], 5, -701558691);\n    d = md5gg(d, a, b, c, x[i + 10], 9, 38016083);\n    c = md5gg(c, d, a, b, x[i + 15], 14, -660478335);\n    b = md5gg(b, c, d, a, x[i + 4], 20, -405537848);\n    a = md5gg(a, b, c, d, x[i + 9], 5, 568446438);\n    d = md5gg(d, a, b, c, x[i + 14], 9, -1019803690);\n    c = md5gg(c, d, a, b, x[i + 3], 14, -187363961);\n    b = md5gg(b, c, d, a, x[i + 8], 20, 1163531501);\n    a = md5gg(a, b, c, d, x[i + 13], 5, -1444681467);\n    d = md5gg(d, a, b, c, x[i + 2], 9, -51403784);\n    c = md5gg(c, d, a, b, x[i + 7], 14, 1735328473);\n    b = md5gg(b, c, d, a, x[i + 12], 20, -1926607734);\n    a = md5hh(a, b, c, d, x[i + 5], 4, -378558);\n    d = md5hh(d, a, b, c, x[i + 8], 11, -2022574463);\n    c = md5hh(c, d, a, b, x[i + 11], 16, 1839030562);\n    b = md5hh(b, c, d, a, x[i + 14], 23, -35309556);\n    a = md5hh(a, b, c, d, x[i + 1], 4, -1530992060);\n    d = md5hh(d, a, b, c, x[i + 4], 11, 1272893353);\n    c = md5hh(c, d, a, b, x[i + 7], 16, -155497632);\n    b = md5hh(b, c, d, a, x[i + 10], 23, -1094730640);\n    a = md5hh(a, b, c, d, x[i + 13], 4, 681279174);\n    d = md5hh(d, a, b, c, x[i], 11, -358537222);\n    c = md5hh(c, d, a, b, x[i + 3], 16, -722521979);\n    b = md5hh(b, c, d, a, x[i + 6], 23, 76029189);\n    a = md5hh(a, b, c, d, x[i + 9], 4, -640364487);\n    d = md5hh(d, a, b, c, x[i + 12], 11, -421815835);\n    c = md5hh(c, d, a, b, x[i + 15], 16, 530742520);\n    b = md5hh(b, c, d, a, x[i + 2], 23, -995338651);\n    a = md5ii(a, b, c, d, x[i], 6, -198630844);\n    d = md5ii(d, a, b, c, x[i + 7], 10, 1126891415);\n    c = md5ii(c, d, a, b, x[i + 14], 15, -1416354905);\n    b = md5ii(b, c, d, a, x[i + 5], 21, -57434055);\n    a = md5ii(a, b, c, d, x[i + 12], 6, 1700485571);\n    d = md5ii(d, a, b, c, x[i + 3], 10, -1894986606);\n    c = md5ii(c, d, a, b, x[i + 10], 15, -1051523);\n    b = md5ii(b, c, d, a, x[i + 1], 21, -2054922799);\n    a = md5ii(a, b, c, d, x[i + 8], 6, 1873313359);\n    d = md5ii(d, a, b, c, x[i + 15], 10, -30611744);\n    c = md5ii(c, d, a, b, x[i + 6], 15, -1560198380);\n    b = md5ii(b, c, d, a, x[i + 13], 21, 1309151649);\n    a = md5ii(a, b, c, d, x[i + 4], 6, -145523070);\n    d = md5ii(d, a, b, c, x[i + 11], 10, -1120210379);\n    c = md5ii(c, d, a, b, x[i + 2], 15, 718787259);\n    b = md5ii(b, c, d, a, x[i + 9], 21, -343485551);\n    a = safeAdd(a, olda);\n    b = safeAdd(b, oldb);\n    c = safeAdd(c, oldc);\n    d = safeAdd(d, oldd);\n  }\n\n  return [a, b, c, d];\n}\n/*\n * Convert an array bytes to an array of little-endian words\n * Characters >255 have their high-byte silently ignored.\n */\n\n\nfunction bytesToWords(input) {\n  if (input.length === 0) {\n    return [];\n  }\n\n  var length8 = input.length * 8;\n  var output = new Uint32Array(getOutputLength(length8));\n\n  for (var i = 0; i < length8; i += 8) {\n    output[i >> 5] |= (input[i / 8] & 0xff) << i % 32;\n  }\n\n  return output;\n}\n/*\n * Add integers, wrapping at 2^32. This uses 16-bit operations internally\n * to work around bugs in some JS interpreters.\n */\n\n\nfunction safeAdd(x, y) {\n  var lsw = (x & 0xffff) + (y & 0xffff);\n  var msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n  return msw << 16 | lsw & 0xffff;\n}\n/*\n * Bitwise rotate a 32-bit number to the left.\n */\n\n\nfunction bitRotateLeft(num, cnt) {\n  return num << cnt | num >>> 32 - cnt;\n}\n/*\n * These functions implement the four basic operations the algorithm uses.\n */\n\n\nfunction md5cmn(q, a, b, x, s, t) {\n  return safeAdd(bitRotateLeft(safeAdd(safeAdd(a, q), safeAdd(x, t)), s), b);\n}\n\nfunction md5ff(a, b, c, d, x, s, t) {\n  return md5cmn(b & c | ~b & d, a, b, x, s, t);\n}\n\nfunction md5gg(a, b, c, d, x, s, t) {\n  return md5cmn(b & d | c & ~d, a, b, x, s, t);\n}\n\nfunction md5hh(a, b, c, d, x, s, t) {\n  return md5cmn(b ^ c ^ d, a, b, x, s, t);\n}\n\nfunction md5ii(a, b, c, d, x, s, t) {\n  return md5cmn(c ^ (b | ~d), a, b, x, s, t);\n}\n\nexport default md5;","import v35 from './v35.js';\nimport md5 from './md5.js';\nvar v3 = v35('v3', 0x30, md5);\nexport default v3;","import rng from './rng.js';\nimport stringify from './stringify.js';\n\nfunction v4(options, buf, offset) {\n  options = options || {};\n  var rnds = options.random || (options.rng || rng)(); // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80; // Copy bytes to buffer, if provided\n\n  if (buf) {\n    offset = offset || 0;\n\n    for (var i = 0; i < 16; ++i) {\n      buf[offset + i] = rnds[i];\n    }\n\n    return buf;\n  }\n\n  return stringify(rnds);\n}\n\nexport default v4;","// Adapted from Chris Veness' SHA1 code at\n// http://www.movable-type.co.uk/scripts/sha1.html\nfunction f(s, x, y, z) {\n  switch (s) {\n    case 0:\n      return x & y ^ ~x & z;\n\n    case 1:\n      return x ^ y ^ z;\n\n    case 2:\n      return x & y ^ x & z ^ y & z;\n\n    case 3:\n      return x ^ y ^ z;\n  }\n}\n\nfunction ROTL(x, n) {\n  return x << n | x >>> 32 - n;\n}\n\nfunction sha1(bytes) {\n  var K = [0x5a827999, 0x6ed9eba1, 0x8f1bbcdc, 0xca62c1d6];\n  var H = [0x67452301, 0xefcdab89, 0x98badcfe, 0x10325476, 0xc3d2e1f0];\n\n  if (typeof bytes === 'string') {\n    var msg = unescape(encodeURIComponent(bytes)); // UTF8 escape\n\n    bytes = [];\n\n    for (var i = 0; i < msg.length; ++i) {\n      bytes.push(msg.charCodeAt(i));\n    }\n  } else if (!Array.isArray(bytes)) {\n    // Convert Array-like to Array\n    bytes = Array.prototype.slice.call(bytes);\n  }\n\n  bytes.push(0x80);\n  var l = bytes.length / 4 + 2;\n  var N = Math.ceil(l / 16);\n  var M = new Array(N);\n\n  for (var _i = 0; _i < N; ++_i) {\n    var arr = new Uint32Array(16);\n\n    for (var j = 0; j < 16; ++j) {\n      arr[j] = bytes[_i * 64 + j * 4] << 24 | bytes[_i * 64 + j * 4 + 1] << 16 | bytes[_i * 64 + j * 4 + 2] << 8 | bytes[_i * 64 + j * 4 + 3];\n    }\n\n    M[_i] = arr;\n  }\n\n  M[N - 1][14] = (bytes.length - 1) * 8 / Math.pow(2, 32);\n  M[N - 1][14] = Math.floor(M[N - 1][14]);\n  M[N - 1][15] = (bytes.length - 1) * 8 & 0xffffffff;\n\n  for (var _i2 = 0; _i2 < N; ++_i2) {\n    var W = new Uint32Array(80);\n\n    for (var t = 0; t < 16; ++t) {\n      W[t] = M[_i2][t];\n    }\n\n    for (var _t = 16; _t < 80; ++_t) {\n      W[_t] = ROTL(W[_t - 3] ^ W[_t - 8] ^ W[_t - 14] ^ W[_t - 16], 1);\n    }\n\n    var a = H[0];\n    var b = H[1];\n    var c = H[2];\n    var d = H[3];\n    var e = H[4];\n\n    for (var _t2 = 0; _t2 < 80; ++_t2) {\n      var s = Math.floor(_t2 / 20);\n      var T = ROTL(a, 5) + f(s, b, c, d) + e + K[s] + W[_t2] >>> 0;\n      e = d;\n      d = c;\n      c = ROTL(b, 30) >>> 0;\n      b = a;\n      a = T;\n    }\n\n    H[0] = H[0] + a >>> 0;\n    H[1] = H[1] + b >>> 0;\n    H[2] = H[2] + c >>> 0;\n    H[3] = H[3] + d >>> 0;\n    H[4] = H[4] + e >>> 0;\n  }\n\n  return [H[0] >> 24 & 0xff, H[0] >> 16 & 0xff, H[0] >> 8 & 0xff, H[0] & 0xff, H[1] >> 24 & 0xff, H[1] >> 16 & 0xff, H[1] >> 8 & 0xff, H[1] & 0xff, H[2] >> 24 & 0xff, H[2] >> 16 & 0xff, H[2] >> 8 & 0xff, H[2] & 0xff, H[3] >> 24 & 0xff, H[3] >> 16 & 0xff, H[3] >> 8 & 0xff, H[3] & 0xff, H[4] >> 24 & 0xff, H[4] >> 16 & 0xff, H[4] >> 8 & 0xff, H[4] & 0xff];\n}\n\nexport default sha1;","import v35 from './v35.js';\nimport sha1 from './sha1.js';\nvar v5 = v35('v5', 0x50, sha1);\nexport default v5;","export default '00000000-0000-0000-0000-000000000000';","import validate from './validate.js';\n\nfunction version(uuid) {\n  if (!validate(uuid)) {\n    throw TypeError('Invalid UUID');\n  }\n\n  return parseInt(uuid.substr(14, 1), 16);\n}\n\nexport default version;","/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nvar CancellationToken;\r\n(function (CancellationToken) {\r\n    CancellationToken.None = Object.freeze({\r\n        isCancellationRequested: false,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    CancellationToken.Cancelled = Object.freeze({\r\n        isCancellationRequested: true,\r\n        onCancellationRequested: events_1.Event.None\r\n    });\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && (candidate === CancellationToken.None\r\n            || candidate === CancellationToken.Cancelled\r\n            || (Is.boolean(candidate.isCancellationRequested) && !!candidate.onCancellationRequested));\r\n    }\r\n    CancellationToken.is = is;\r\n})(CancellationToken = exports.CancellationToken || (exports.CancellationToken = {}));\r\nconst shortcutEvent = Object.freeze(function (callback, context) {\r\n    let handle = setTimeout(callback.bind(context), 0);\r\n    return { dispose() { clearTimeout(handle); } };\r\n});\r\nclass MutableToken {\r\n    constructor() {\r\n        this._isCancelled = false;\r\n    }\r\n    cancel() {\r\n        if (!this._isCancelled) {\r\n            this._isCancelled = true;\r\n            if (this._emitter) {\r\n                this._emitter.fire(undefined);\r\n                this.dispose();\r\n            }\r\n        }\r\n    }\r\n    get isCancellationRequested() {\r\n        return this._isCancelled;\r\n    }\r\n    get onCancellationRequested() {\r\n        if (this._isCancelled) {\r\n            return shortcutEvent;\r\n        }\r\n        if (!this._emitter) {\r\n            this._emitter = new events_1.Emitter();\r\n        }\r\n        return this._emitter.event;\r\n    }\r\n    dispose() {\r\n        if (this._emitter) {\r\n            this._emitter.dispose();\r\n            this._emitter = undefined;\r\n        }\r\n    }\r\n}\r\nclass CancellationTokenSource {\r\n    get token() {\r\n        if (!this._token) {\r\n            // be lazy and create the token only when\r\n            // actually needed\r\n            this._token = new MutableToken();\r\n        }\r\n        return this._token;\r\n    }\r\n    cancel() {\r\n        if (!this._token) {\r\n            // save an object by returning the default\r\n            // cancelled token when cancellation happens\r\n            // before someone asks for the token\r\n            this._token = CancellationToken.Cancelled;\r\n        }\r\n        else {\r\n            this._token.cancel();\r\n        }\r\n    }\r\n    dispose() {\r\n        if (!this._token) {\r\n            // ensure to initialize with an empty token if we had none\r\n            this._token = CancellationToken.None;\r\n        }\r\n        else if (this._token instanceof MutableToken) {\r\n            // actually dispose\r\n            this._token.dispose();\r\n        }\r\n    }\r\n}\r\nexports.CancellationTokenSource = CancellationTokenSource;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Disposable;\r\n(function (Disposable) {\r\n    function create(func) {\r\n        return {\r\n            dispose: func\r\n        };\r\n    }\r\n    Disposable.create = create;\r\n})(Disposable = exports.Disposable || (exports.Disposable = {}));\r\nvar Event;\r\n(function (Event) {\r\n    const _disposable = { dispose() { } };\r\n    Event.None = function () { return _disposable; };\r\n})(Event = exports.Event || (exports.Event = {}));\r\nclass CallbackList {\r\n    add(callback, context = null, bucket) {\r\n        if (!this._callbacks) {\r\n            this._callbacks = [];\r\n            this._contexts = [];\r\n        }\r\n        this._callbacks.push(callback);\r\n        this._contexts.push(context);\r\n        if (Array.isArray(bucket)) {\r\n            bucket.push({ dispose: () => this.remove(callback, context) });\r\n        }\r\n    }\r\n    remove(callback, context = null) {\r\n        if (!this._callbacks) {\r\n            return;\r\n        }\r\n        var foundCallbackWithDifferentContext = false;\r\n        for (var i = 0, len = this._callbacks.length; i < len; i++) {\r\n            if (this._callbacks[i] === callback) {\r\n                if (this._contexts[i] === context) {\r\n                    // callback & context match => remove it\r\n                    this._callbacks.splice(i, 1);\r\n                    this._contexts.splice(i, 1);\r\n                    return;\r\n                }\r\n                else {\r\n                    foundCallbackWithDifferentContext = true;\r\n                }\r\n            }\r\n        }\r\n        if (foundCallbackWithDifferentContext) {\r\n            throw new Error('When adding a listener with a context, you should remove it with the same context');\r\n        }\r\n    }\r\n    invoke(...args) {\r\n        if (!this._callbacks) {\r\n            return [];\r\n        }\r\n        var ret = [], callbacks = this._callbacks.slice(0), contexts = this._contexts.slice(0);\r\n        for (var i = 0, len = callbacks.length; i < len; i++) {\r\n            try {\r\n                ret.push(callbacks[i].apply(contexts[i], args));\r\n            }\r\n            catch (e) {\r\n                // eslint-disable-next-line no-console\r\n                console.error(e);\r\n            }\r\n        }\r\n        return ret;\r\n    }\r\n    isEmpty() {\r\n        return !this._callbacks || this._callbacks.length === 0;\r\n    }\r\n    dispose() {\r\n        this._callbacks = undefined;\r\n        this._contexts = undefined;\r\n    }\r\n}\r\nclass Emitter {\r\n    constructor(_options) {\r\n        this._options = _options;\r\n    }\r\n    /**\r\n     * For the public to allow to subscribe\r\n     * to events from this Emitter\r\n     */\r\n    get event() {\r\n        if (!this._event) {\r\n            this._event = (listener, thisArgs, disposables) => {\r\n                if (!this._callbacks) {\r\n                    this._callbacks = new CallbackList();\r\n                }\r\n                if (this._options && this._options.onFirstListenerAdd && this._callbacks.isEmpty()) {\r\n                    this._options.onFirstListenerAdd(this);\r\n                }\r\n                this._callbacks.add(listener, thisArgs);\r\n                let result;\r\n                result = {\r\n                    dispose: () => {\r\n                        this._callbacks.remove(listener, thisArgs);\r\n                        result.dispose = Emitter._noop;\r\n                        if (this._options && this._options.onLastListenerRemove && this._callbacks.isEmpty()) {\r\n                            this._options.onLastListenerRemove(this);\r\n                        }\r\n                    }\r\n                };\r\n                if (Array.isArray(disposables)) {\r\n                    disposables.push(result);\r\n                }\r\n                return result;\r\n            };\r\n        }\r\n        return this._event;\r\n    }\r\n    /**\r\n     * To be kept private to fire an event to\r\n     * subscribers\r\n     */\r\n    fire(event) {\r\n        if (this._callbacks) {\r\n            this._callbacks.invoke.call(this._callbacks, event);\r\n        }\r\n    }\r\n    dispose() {\r\n        if (this._callbacks) {\r\n            this._callbacks.dispose();\r\n            this._callbacks = undefined;\r\n        }\r\n    }\r\n}\r\nexports.Emitter = Emitter;\r\nEmitter._noop = function () { };\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nvar Touch;\r\n(function (Touch) {\r\n    Touch.None = 0;\r\n    Touch.First = 1;\r\n    Touch.Last = 2;\r\n})(Touch = exports.Touch || (exports.Touch = {}));\r\nclass LinkedMap {\r\n    constructor() {\r\n        this._map = new Map();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    clear() {\r\n        this._map.clear();\r\n        this._head = undefined;\r\n        this._tail = undefined;\r\n        this._size = 0;\r\n    }\r\n    isEmpty() {\r\n        return !this._head && !this._tail;\r\n    }\r\n    get size() {\r\n        return this._size;\r\n    }\r\n    has(key) {\r\n        return this._map.has(key);\r\n    }\r\n    get(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return undefined;\r\n        }\r\n        return item.value;\r\n    }\r\n    set(key, value, touch = Touch.None) {\r\n        let item = this._map.get(key);\r\n        if (item) {\r\n            item.value = value;\r\n            if (touch !== Touch.None) {\r\n                this.touch(item, touch);\r\n            }\r\n        }\r\n        else {\r\n            item = { key, value, next: undefined, previous: undefined };\r\n            switch (touch) {\r\n                case Touch.None:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                case Touch.First:\r\n                    this.addItemFirst(item);\r\n                    break;\r\n                case Touch.Last:\r\n                    this.addItemLast(item);\r\n                    break;\r\n                default:\r\n                    this.addItemLast(item);\r\n                    break;\r\n            }\r\n            this._map.set(key, item);\r\n            this._size++;\r\n        }\r\n    }\r\n    delete(key) {\r\n        const item = this._map.get(key);\r\n        if (!item) {\r\n            return false;\r\n        }\r\n        this._map.delete(key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return true;\r\n    }\r\n    shift() {\r\n        if (!this._head && !this._tail) {\r\n            return undefined;\r\n        }\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        const item = this._head;\r\n        this._map.delete(item.key);\r\n        this.removeItem(item);\r\n        this._size--;\r\n        return item.value;\r\n    }\r\n    forEach(callbackfn, thisArg) {\r\n        let current = this._head;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.next;\r\n        }\r\n    }\r\n    forEachReverse(callbackfn, thisArg) {\r\n        let current = this._tail;\r\n        while (current) {\r\n            if (thisArg) {\r\n                callbackfn.bind(thisArg)(current.value, current.key, this);\r\n            }\r\n            else {\r\n                callbackfn(current.value, current.key, this);\r\n            }\r\n            current = current.previous;\r\n        }\r\n    }\r\n    values() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.value);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    keys() {\r\n        let result = [];\r\n        let current = this._head;\r\n        while (current) {\r\n            result.push(current.key);\r\n            current = current.next;\r\n        }\r\n        return result;\r\n    }\r\n    /* JSON RPC run on es5 which has no Symbol.iterator\r\n    public keys(): IterableIterator<K> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<K> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<K> {\r\n                if (current) {\r\n                    let result = { value: current.key, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n\r\n    public values(): IterableIterator<V> {\r\n        let current = this._head;\r\n        let iterator: IterableIterator<V> = {\r\n            [Symbol.iterator]() {\r\n                return iterator;\r\n            },\r\n            next():IteratorResult<V> {\r\n                if (current) {\r\n                    let result = { value: current.value, done: false };\r\n                    current = current.next;\r\n                    return result;\r\n                } else {\r\n                    return { value: undefined, done: true };\r\n                }\r\n            }\r\n        };\r\n        return iterator;\r\n    }\r\n    */\r\n    addItemFirst(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._tail = item;\r\n        }\r\n        else if (!this._head) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n        }\r\n        this._head = item;\r\n    }\r\n    addItemLast(item) {\r\n        // First time Insert\r\n        if (!this._head && !this._tail) {\r\n            this._head = item;\r\n        }\r\n        else if (!this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        else {\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n        }\r\n        this._tail = item;\r\n    }\r\n    removeItem(item) {\r\n        if (item === this._head && item === this._tail) {\r\n            this._head = undefined;\r\n            this._tail = undefined;\r\n        }\r\n        else if (item === this._head) {\r\n            this._head = item.next;\r\n        }\r\n        else if (item === this._tail) {\r\n            this._tail = item.previous;\r\n        }\r\n        else {\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            if (!next || !previous) {\r\n                throw new Error('Invalid list');\r\n            }\r\n            next.previous = previous;\r\n            previous.next = next;\r\n        }\r\n    }\r\n    touch(item, touch) {\r\n        if (!this._head || !this._tail) {\r\n            throw new Error('Invalid list');\r\n        }\r\n        if ((touch !== Touch.First && touch !== Touch.Last)) {\r\n            return;\r\n        }\r\n        if (touch === Touch.First) {\r\n            if (item === this._head) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item\r\n            if (item === this._tail) {\r\n                // previous must be defined since item was not head but is tail\r\n                // So there are more than on item in the map\r\n                previous.next = undefined;\r\n                this._tail = previous;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            // Insert the node at head\r\n            item.previous = undefined;\r\n            item.next = this._head;\r\n            this._head.previous = item;\r\n            this._head = item;\r\n        }\r\n        else if (touch === Touch.Last) {\r\n            if (item === this._tail) {\r\n                return;\r\n            }\r\n            const next = item.next;\r\n            const previous = item.previous;\r\n            // Unlink the item.\r\n            if (item === this._head) {\r\n                // next must be defined since item was not tail but is head\r\n                // So there are more than on item in the map\r\n                next.previous = undefined;\r\n                this._head = next;\r\n            }\r\n            else {\r\n                // Both next and previous are not undefined since item was neither head nor tail.\r\n                next.previous = previous;\r\n                previous.next = next;\r\n            }\r\n            item.next = undefined;\r\n            item.previous = this._tail;\r\n            this._tail.next = item;\r\n            this._tail = item;\r\n        }\r\n    }\r\n}\r\nexports.LinkedMap = LinkedMap;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n/// <reference path=\"../typings/thenable.d.ts\" />\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./is\");\r\nconst messages_1 = require(\"./messages\");\r\nexports.RequestType = messages_1.RequestType;\r\nexports.RequestType0 = messages_1.RequestType0;\r\nexports.RequestType1 = messages_1.RequestType1;\r\nexports.RequestType2 = messages_1.RequestType2;\r\nexports.RequestType3 = messages_1.RequestType3;\r\nexports.RequestType4 = messages_1.RequestType4;\r\nexports.RequestType5 = messages_1.RequestType5;\r\nexports.RequestType6 = messages_1.RequestType6;\r\nexports.RequestType7 = messages_1.RequestType7;\r\nexports.RequestType8 = messages_1.RequestType8;\r\nexports.RequestType9 = messages_1.RequestType9;\r\nexports.ResponseError = messages_1.ResponseError;\r\nexports.ErrorCodes = messages_1.ErrorCodes;\r\nexports.NotificationType = messages_1.NotificationType;\r\nexports.NotificationType0 = messages_1.NotificationType0;\r\nexports.NotificationType1 = messages_1.NotificationType1;\r\nexports.NotificationType2 = messages_1.NotificationType2;\r\nexports.NotificationType3 = messages_1.NotificationType3;\r\nexports.NotificationType4 = messages_1.NotificationType4;\r\nexports.NotificationType5 = messages_1.NotificationType5;\r\nexports.NotificationType6 = messages_1.NotificationType6;\r\nexports.NotificationType7 = messages_1.NotificationType7;\r\nexports.NotificationType8 = messages_1.NotificationType8;\r\nexports.NotificationType9 = messages_1.NotificationType9;\r\nconst messageReader_1 = require(\"./messageReader\");\r\nexports.MessageReader = messageReader_1.MessageReader;\r\nexports.StreamMessageReader = messageReader_1.StreamMessageReader;\r\nexports.IPCMessageReader = messageReader_1.IPCMessageReader;\r\nexports.SocketMessageReader = messageReader_1.SocketMessageReader;\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nexports.MessageWriter = messageWriter_1.MessageWriter;\r\nexports.StreamMessageWriter = messageWriter_1.StreamMessageWriter;\r\nexports.IPCMessageWriter = messageWriter_1.IPCMessageWriter;\r\nexports.SocketMessageWriter = messageWriter_1.SocketMessageWriter;\r\nconst events_1 = require(\"./events\");\r\nexports.Disposable = events_1.Disposable;\r\nexports.Event = events_1.Event;\r\nexports.Emitter = events_1.Emitter;\r\nconst cancellation_1 = require(\"./cancellation\");\r\nexports.CancellationTokenSource = cancellation_1.CancellationTokenSource;\r\nexports.CancellationToken = cancellation_1.CancellationToken;\r\nconst linkedMap_1 = require(\"./linkedMap\");\r\n__export(require(\"./pipeSupport\"));\r\n__export(require(\"./socketSupport\"));\r\nvar CancelNotification;\r\n(function (CancelNotification) {\r\n    CancelNotification.type = new messages_1.NotificationType('$/cancelRequest');\r\n})(CancelNotification || (CancelNotification = {}));\r\nvar ProgressNotification;\r\n(function (ProgressNotification) {\r\n    ProgressNotification.type = new messages_1.NotificationType('$/progress');\r\n})(ProgressNotification || (ProgressNotification = {}));\r\nclass ProgressType {\r\n    constructor() {\r\n    }\r\n}\r\nexports.ProgressType = ProgressType;\r\nexports.NullLogger = Object.freeze({\r\n    error: () => { },\r\n    warn: () => { },\r\n    info: () => { },\r\n    log: () => { }\r\n});\r\nvar Trace;\r\n(function (Trace) {\r\n    Trace[Trace[\"Off\"] = 0] = \"Off\";\r\n    Trace[Trace[\"Messages\"] = 1] = \"Messages\";\r\n    Trace[Trace[\"Verbose\"] = 2] = \"Verbose\";\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\n(function (Trace) {\r\n    function fromString(value) {\r\n        if (!Is.string(value)) {\r\n            return Trace.Off;\r\n        }\r\n        value = value.toLowerCase();\r\n        switch (value) {\r\n            case 'off':\r\n                return Trace.Off;\r\n            case 'messages':\r\n                return Trace.Messages;\r\n            case 'verbose':\r\n                return Trace.Verbose;\r\n            default:\r\n                return Trace.Off;\r\n        }\r\n    }\r\n    Trace.fromString = fromString;\r\n    function toString(value) {\r\n        switch (value) {\r\n            case Trace.Off:\r\n                return 'off';\r\n            case Trace.Messages:\r\n                return 'messages';\r\n            case Trace.Verbose:\r\n                return 'verbose';\r\n            default:\r\n                return 'off';\r\n        }\r\n    }\r\n    Trace.toString = toString;\r\n})(Trace = exports.Trace || (exports.Trace = {}));\r\nvar TraceFormat;\r\n(function (TraceFormat) {\r\n    TraceFormat[\"Text\"] = \"text\";\r\n    TraceFormat[\"JSON\"] = \"json\";\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\n(function (TraceFormat) {\r\n    function fromString(value) {\r\n        value = value.toLowerCase();\r\n        if (value === 'json') {\r\n            return TraceFormat.JSON;\r\n        }\r\n        else {\r\n            return TraceFormat.Text;\r\n        }\r\n    }\r\n    TraceFormat.fromString = fromString;\r\n})(TraceFormat = exports.TraceFormat || (exports.TraceFormat = {}));\r\nvar SetTraceNotification;\r\n(function (SetTraceNotification) {\r\n    SetTraceNotification.type = new messages_1.NotificationType('$/setTraceNotification');\r\n})(SetTraceNotification = exports.SetTraceNotification || (exports.SetTraceNotification = {}));\r\nvar LogTraceNotification;\r\n(function (LogTraceNotification) {\r\n    LogTraceNotification.type = new messages_1.NotificationType('$/logTraceNotification');\r\n})(LogTraceNotification = exports.LogTraceNotification || (exports.LogTraceNotification = {}));\r\nvar ConnectionErrors;\r\n(function (ConnectionErrors) {\r\n    /**\r\n     * The connection is closed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Closed\"] = 1] = \"Closed\";\r\n    /**\r\n     * The connection got disposed.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"Disposed\"] = 2] = \"Disposed\";\r\n    /**\r\n     * The connection is already in listening mode.\r\n     */\r\n    ConnectionErrors[ConnectionErrors[\"AlreadyListening\"] = 3] = \"AlreadyListening\";\r\n})(ConnectionErrors = exports.ConnectionErrors || (exports.ConnectionErrors = {}));\r\nclass ConnectionError extends Error {\r\n    constructor(code, message) {\r\n        super(message);\r\n        this.code = code;\r\n        Object.setPrototypeOf(this, ConnectionError.prototype);\r\n    }\r\n}\r\nexports.ConnectionError = ConnectionError;\r\nvar ConnectionStrategy;\r\n(function (ConnectionStrategy) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.cancelUndispatched);\r\n    }\r\n    ConnectionStrategy.is = is;\r\n})(ConnectionStrategy = exports.ConnectionStrategy || (exports.ConnectionStrategy = {}));\r\nvar ConnectionState;\r\n(function (ConnectionState) {\r\n    ConnectionState[ConnectionState[\"New\"] = 1] = \"New\";\r\n    ConnectionState[ConnectionState[\"Listening\"] = 2] = \"Listening\";\r\n    ConnectionState[ConnectionState[\"Closed\"] = 3] = \"Closed\";\r\n    ConnectionState[ConnectionState[\"Disposed\"] = 4] = \"Disposed\";\r\n})(ConnectionState || (ConnectionState = {}));\r\nfunction _createMessageConnection(messageReader, messageWriter, logger, strategy) {\r\n    let sequenceNumber = 0;\r\n    let notificationSquenceNumber = 0;\r\n    let unknownResponseSquenceNumber = 0;\r\n    const version = '2.0';\r\n    let starRequestHandler = undefined;\r\n    let requestHandlers = Object.create(null);\r\n    let starNotificationHandler = undefined;\r\n    let notificationHandlers = Object.create(null);\r\n    let progressHandlers = new Map();\r\n    let timer;\r\n    let messageQueue = new linkedMap_1.LinkedMap();\r\n    let responsePromises = Object.create(null);\r\n    let requestTokens = Object.create(null);\r\n    let trace = Trace.Off;\r\n    let traceFormat = TraceFormat.Text;\r\n    let tracer;\r\n    let state = ConnectionState.New;\r\n    let errorEmitter = new events_1.Emitter();\r\n    let closeEmitter = new events_1.Emitter();\r\n    let unhandledNotificationEmitter = new events_1.Emitter();\r\n    let unhandledProgressEmitter = new events_1.Emitter();\r\n    let disposeEmitter = new events_1.Emitter();\r\n    function createRequestQueueKey(id) {\r\n        return 'req-' + id.toString();\r\n    }\r\n    function createResponseQueueKey(id) {\r\n        if (id === null) {\r\n            return 'res-unknown-' + (++unknownResponseSquenceNumber).toString();\r\n        }\r\n        else {\r\n            return 'res-' + id.toString();\r\n        }\r\n    }\r\n    function createNotificationQueueKey() {\r\n        return 'not-' + (++notificationSquenceNumber).toString();\r\n    }\r\n    function addMessageToQueue(queue, message) {\r\n        if (messages_1.isRequestMessage(message)) {\r\n            queue.set(createRequestQueueKey(message.id), message);\r\n        }\r\n        else if (messages_1.isResponseMessage(message)) {\r\n            queue.set(createResponseQueueKey(message.id), message);\r\n        }\r\n        else {\r\n            queue.set(createNotificationQueueKey(), message);\r\n        }\r\n    }\r\n    function cancelUndispatched(_message) {\r\n        return undefined;\r\n    }\r\n    function isListening() {\r\n        return state === ConnectionState.Listening;\r\n    }\r\n    function isClosed() {\r\n        return state === ConnectionState.Closed;\r\n    }\r\n    function isDisposed() {\r\n        return state === ConnectionState.Disposed;\r\n    }\r\n    function closeHandler() {\r\n        if (state === ConnectionState.New || state === ConnectionState.Listening) {\r\n            state = ConnectionState.Closed;\r\n            closeEmitter.fire(undefined);\r\n        }\r\n        // If the connection is disposed don't sent close events.\r\n    }\r\n    function readErrorHandler(error) {\r\n        errorEmitter.fire([error, undefined, undefined]);\r\n    }\r\n    function writeErrorHandler(data) {\r\n        errorEmitter.fire(data);\r\n    }\r\n    messageReader.onClose(closeHandler);\r\n    messageReader.onError(readErrorHandler);\r\n    messageWriter.onClose(closeHandler);\r\n    messageWriter.onError(writeErrorHandler);\r\n    function triggerMessageQueue() {\r\n        if (timer || messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        timer = setImmediate(() => {\r\n            timer = undefined;\r\n            processMessageQueue();\r\n        });\r\n    }\r\n    function processMessageQueue() {\r\n        if (messageQueue.size === 0) {\r\n            return;\r\n        }\r\n        let message = messageQueue.shift();\r\n        try {\r\n            if (messages_1.isRequestMessage(message)) {\r\n                handleRequest(message);\r\n            }\r\n            else if (messages_1.isNotificationMessage(message)) {\r\n                handleNotification(message);\r\n            }\r\n            else if (messages_1.isResponseMessage(message)) {\r\n                handleResponse(message);\r\n            }\r\n            else {\r\n                handleInvalidMessage(message);\r\n            }\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    }\r\n    let callback = (message) => {\r\n        try {\r\n            // We have received a cancellation message. Check if the message is still in the queue\r\n            // and cancel it if allowed to do so.\r\n            if (messages_1.isNotificationMessage(message) && message.method === CancelNotification.type.method) {\r\n                let key = createRequestQueueKey(message.params.id);\r\n                let toCancel = messageQueue.get(key);\r\n                if (messages_1.isRequestMessage(toCancel)) {\r\n                    let response = strategy && strategy.cancelUndispatched ? strategy.cancelUndispatched(toCancel, cancelUndispatched) : cancelUndispatched(toCancel);\r\n                    if (response && (response.error !== void 0 || response.result !== void 0)) {\r\n                        messageQueue.delete(key);\r\n                        response.id = toCancel.id;\r\n                        traceSendingResponse(response, message.method, Date.now());\r\n                        messageWriter.write(response);\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n            addMessageToQueue(messageQueue, message);\r\n        }\r\n        finally {\r\n            triggerMessageQueue();\r\n        }\r\n    };\r\n    function handleRequest(requestMessage) {\r\n        if (isDisposed()) {\r\n            // we return here silently since we fired an event when the\r\n            // connection got disposed.\r\n            return;\r\n        }\r\n        function reply(resultOrError, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id\r\n            };\r\n            if (resultOrError instanceof messages_1.ResponseError) {\r\n                message.error = resultOrError.toJson();\r\n            }\r\n            else {\r\n                message.result = resultOrError === void 0 ? null : resultOrError;\r\n            }\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replyError(error, method, startTime) {\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                error: error.toJson()\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        function replySuccess(result, method, startTime) {\r\n            // The JSON RPC defines that a response must either have a result or an error\r\n            // So we can't treat undefined as a valid response result.\r\n            if (result === void 0) {\r\n                result = null;\r\n            }\r\n            let message = {\r\n                jsonrpc: version,\r\n                id: requestMessage.id,\r\n                result: result\r\n            };\r\n            traceSendingResponse(message, method, startTime);\r\n            messageWriter.write(message);\r\n        }\r\n        traceReceivedRequest(requestMessage);\r\n        let element = requestHandlers[requestMessage.method];\r\n        let type;\r\n        let requestHandler;\r\n        if (element) {\r\n            type = element.type;\r\n            requestHandler = element.handler;\r\n        }\r\n        let startTime = Date.now();\r\n        if (requestHandler || starRequestHandler) {\r\n            let cancellationSource = new cancellation_1.CancellationTokenSource();\r\n            let tokenKey = String(requestMessage.id);\r\n            requestTokens[tokenKey] = cancellationSource;\r\n            try {\r\n                let handlerResult;\r\n                if (requestMessage.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, cancellationSource.token);\r\n                }\r\n                else if (Is.array(requestMessage.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(...requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, ...requestMessage.params, cancellationSource.token);\r\n                }\r\n                else {\r\n                    handlerResult = requestHandler\r\n                        ? requestHandler(requestMessage.params, cancellationSource.token)\r\n                        : starRequestHandler(requestMessage.method, requestMessage.params, cancellationSource.token);\r\n                }\r\n                let promise = handlerResult;\r\n                if (!handlerResult) {\r\n                    delete requestTokens[tokenKey];\r\n                    replySuccess(handlerResult, requestMessage.method, startTime);\r\n                }\r\n                else if (promise.then) {\r\n                    promise.then((resultOrError) => {\r\n                        delete requestTokens[tokenKey];\r\n                        reply(resultOrError, requestMessage.method, startTime);\r\n                    }, error => {\r\n                        delete requestTokens[tokenKey];\r\n                        if (error instanceof messages_1.ResponseError) {\r\n                            replyError(error, requestMessage.method, startTime);\r\n                        }\r\n                        else if (error && Is.string(error.message)) {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                        }\r\n                        else {\r\n                            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                        }\r\n                    });\r\n                }\r\n                else {\r\n                    delete requestTokens[tokenKey];\r\n                    reply(handlerResult, requestMessage.method, startTime);\r\n                }\r\n            }\r\n            catch (error) {\r\n                delete requestTokens[tokenKey];\r\n                if (error instanceof messages_1.ResponseError) {\r\n                    reply(error, requestMessage.method, startTime);\r\n                }\r\n                else if (error && Is.string(error.message)) {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed with message: ${error.message}`), requestMessage.method, startTime);\r\n                }\r\n                else {\r\n                    replyError(new messages_1.ResponseError(messages_1.ErrorCodes.InternalError, `Request ${requestMessage.method} failed unexpectedly without providing any details.`), requestMessage.method, startTime);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            replyError(new messages_1.ResponseError(messages_1.ErrorCodes.MethodNotFound, `Unhandled method ${requestMessage.method}`), requestMessage.method, startTime);\r\n        }\r\n    }\r\n    function handleResponse(responseMessage) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        if (responseMessage.id === null) {\r\n            if (responseMessage.error) {\r\n                logger.error(`Received response message without id: Error is: \\n${JSON.stringify(responseMessage.error, undefined, 4)}`);\r\n            }\r\n            else {\r\n                logger.error(`Received response message without id. No further error information provided.`);\r\n            }\r\n        }\r\n        else {\r\n            let key = String(responseMessage.id);\r\n            let responsePromise = responsePromises[key];\r\n            traceReceivedResponse(responseMessage, responsePromise);\r\n            if (responsePromise) {\r\n                delete responsePromises[key];\r\n                try {\r\n                    if (responseMessage.error) {\r\n                        let error = responseMessage.error;\r\n                        responsePromise.reject(new messages_1.ResponseError(error.code, error.message, error.data));\r\n                    }\r\n                    else if (responseMessage.result !== void 0) {\r\n                        responsePromise.resolve(responseMessage.result);\r\n                    }\r\n                    else {\r\n                        throw new Error('Should never happen.');\r\n                    }\r\n                }\r\n                catch (error) {\r\n                    if (error.message) {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed with message: ${error.message}`);\r\n                    }\r\n                    else {\r\n                        logger.error(`Response handler '${responsePromise.method}' failed unexpectedly.`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n    function handleNotification(message) {\r\n        if (isDisposed()) {\r\n            // See handle request.\r\n            return;\r\n        }\r\n        let type = undefined;\r\n        let notificationHandler;\r\n        if (message.method === CancelNotification.type.method) {\r\n            notificationHandler = (params) => {\r\n                let id = params.id;\r\n                let source = requestTokens[String(id)];\r\n                if (source) {\r\n                    source.cancel();\r\n                }\r\n            };\r\n        }\r\n        else {\r\n            let element = notificationHandlers[message.method];\r\n            if (element) {\r\n                notificationHandler = element.handler;\r\n                type = element.type;\r\n            }\r\n        }\r\n        if (notificationHandler || starNotificationHandler) {\r\n            try {\r\n                traceReceivedNotification(message);\r\n                if (message.params === void 0 || (type !== void 0 && type.numberOfParams === 0)) {\r\n                    notificationHandler ? notificationHandler() : starNotificationHandler(message.method);\r\n                }\r\n                else if (Is.array(message.params) && (type === void 0 || type.numberOfParams > 1)) {\r\n                    notificationHandler ? notificationHandler(...message.params) : starNotificationHandler(message.method, ...message.params);\r\n                }\r\n                else {\r\n                    notificationHandler ? notificationHandler(message.params) : starNotificationHandler(message.method, message.params);\r\n                }\r\n            }\r\n            catch (error) {\r\n                if (error.message) {\r\n                    logger.error(`Notification handler '${message.method}' failed with message: ${error.message}`);\r\n                }\r\n                else {\r\n                    logger.error(`Notification handler '${message.method}' failed unexpectedly.`);\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            unhandledNotificationEmitter.fire(message);\r\n        }\r\n    }\r\n    function handleInvalidMessage(message) {\r\n        if (!message) {\r\n            logger.error('Received empty message.');\r\n            return;\r\n        }\r\n        logger.error(`Received message which is neither a response nor a notification message:\\n${JSON.stringify(message, null, 4)}`);\r\n        // Test whether we find an id to reject the promise\r\n        let responseMessage = message;\r\n        if (Is.string(responseMessage.id) || Is.number(responseMessage.id)) {\r\n            let key = String(responseMessage.id);\r\n            let responseHandler = responsePromises[key];\r\n            if (responseHandler) {\r\n                responseHandler.reject(new Error('The received response has neither a result nor an error property.'));\r\n            }\r\n        }\r\n    }\r\n    function traceSendingRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Sending request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-request', message);\r\n        }\r\n    }\r\n    function traceSendingNotification(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Sending notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-notification', message);\r\n        }\r\n    }\r\n    function traceSendingResponse(message, method, startTime) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            tracer.log(`Sending response '${method} - (${message.id})'. Processing request took ${Date.now() - startTime}ms`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('send-response', message);\r\n        }\r\n    }\r\n    function traceReceivedRequest(message) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose && message.params) {\r\n                data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n            }\r\n            tracer.log(`Received request '${message.method} - (${message.id})'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-request', message);\r\n        }\r\n    }\r\n    function traceReceivedNotification(message) {\r\n        if (trace === Trace.Off || !tracer || message.method === LogTraceNotification.type.method) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.params) {\r\n                    data = `Params: ${JSON.stringify(message.params, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    data = 'No parameters provided.\\n\\n';\r\n                }\r\n            }\r\n            tracer.log(`Received notification '${message.method}'.`, data);\r\n        }\r\n        else {\r\n            logLSPMessage('receive-notification', message);\r\n        }\r\n    }\r\n    function traceReceivedResponse(message, responsePromise) {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        if (traceFormat === TraceFormat.Text) {\r\n            let data = undefined;\r\n            if (trace === Trace.Verbose) {\r\n                if (message.error && message.error.data) {\r\n                    data = `Error data: ${JSON.stringify(message.error.data, null, 4)}\\n\\n`;\r\n                }\r\n                else {\r\n                    if (message.result) {\r\n                        data = `Result: ${JSON.stringify(message.result, null, 4)}\\n\\n`;\r\n                    }\r\n                    else if (message.error === void 0) {\r\n                        data = 'No result returned.\\n\\n';\r\n                    }\r\n                }\r\n            }\r\n            if (responsePromise) {\r\n                let error = message.error ? ` Request failed: ${message.error.message} (${message.error.code}).` : '';\r\n                tracer.log(`Received response '${responsePromise.method} - (${message.id})' in ${Date.now() - responsePromise.timerStart}ms.${error}`, data);\r\n            }\r\n            else {\r\n                tracer.log(`Received response ${message.id} without active response promise.`, data);\r\n            }\r\n        }\r\n        else {\r\n            logLSPMessage('receive-response', message);\r\n        }\r\n    }\r\n    function logLSPMessage(type, message) {\r\n        if (!tracer || trace === Trace.Off) {\r\n            return;\r\n        }\r\n        const lspMessage = {\r\n            isLSPMessage: true,\r\n            type,\r\n            message,\r\n            timestamp: Date.now()\r\n        };\r\n        tracer.log(lspMessage);\r\n    }\r\n    function throwIfClosedOrDisposed() {\r\n        if (isClosed()) {\r\n            throw new ConnectionError(ConnectionErrors.Closed, 'Connection is closed.');\r\n        }\r\n        if (isDisposed()) {\r\n            throw new ConnectionError(ConnectionErrors.Disposed, 'Connection is disposed.');\r\n        }\r\n    }\r\n    function throwIfListening() {\r\n        if (isListening()) {\r\n            throw new ConnectionError(ConnectionErrors.AlreadyListening, 'Connection is already listening');\r\n        }\r\n    }\r\n    function throwIfNotListening() {\r\n        if (!isListening()) {\r\n            throw new Error('Call listen() first.');\r\n        }\r\n    }\r\n    function undefinedToNull(param) {\r\n        if (param === void 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            return param;\r\n        }\r\n    }\r\n    function computeMessageParams(type, params) {\r\n        let result;\r\n        let numberOfParams = type.numberOfParams;\r\n        switch (numberOfParams) {\r\n            case 0:\r\n                result = null;\r\n                break;\r\n            case 1:\r\n                result = undefinedToNull(params[0]);\r\n                break;\r\n            default:\r\n                result = [];\r\n                for (let i = 0; i < params.length && i < numberOfParams; i++) {\r\n                    result.push(undefinedToNull(params[i]));\r\n                }\r\n                if (params.length < numberOfParams) {\r\n                    for (let i = params.length; i < numberOfParams; i++) {\r\n                        result.push(null);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n        return result;\r\n    }\r\n    let connection = {\r\n        sendNotification: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            let method;\r\n            let messageParams;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        messageParams = params[0];\r\n                        break;\r\n                    default:\r\n                        messageParams = params;\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n            }\r\n            let notificationMessage = {\r\n                jsonrpc: version,\r\n                method: method,\r\n                params: messageParams\r\n            };\r\n            traceSendingNotification(notificationMessage);\r\n            messageWriter.write(notificationMessage);\r\n        },\r\n        onNotification: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starNotificationHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    notificationHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    notificationHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        onProgress: (_type, token, handler) => {\r\n            if (progressHandlers.has(token)) {\r\n                throw new Error(`Progress handler for token ${token} already registered`);\r\n            }\r\n            progressHandlers.set(token, handler);\r\n            return {\r\n                dispose: () => {\r\n                    progressHandlers.delete(token);\r\n                }\r\n            };\r\n        },\r\n        sendProgress: (_type, token, value) => {\r\n            connection.sendNotification(ProgressNotification.type, { token, value });\r\n        },\r\n        onUnhandledProgress: unhandledProgressEmitter.event,\r\n        sendRequest: (type, ...params) => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfNotListening();\r\n            let method;\r\n            let messageParams;\r\n            let token = undefined;\r\n            if (Is.string(type)) {\r\n                method = type;\r\n                switch (params.length) {\r\n                    case 0:\r\n                        messageParams = null;\r\n                        break;\r\n                    case 1:\r\n                        // The cancellation token is optional so it can also be undefined.\r\n                        if (cancellation_1.CancellationToken.is(params[0])) {\r\n                            messageParams = null;\r\n                            token = params[0];\r\n                        }\r\n                        else {\r\n                            messageParams = undefinedToNull(params[0]);\r\n                        }\r\n                        break;\r\n                    default:\r\n                        const last = params.length - 1;\r\n                        if (cancellation_1.CancellationToken.is(params[last])) {\r\n                            token = params[last];\r\n                            if (params.length === 2) {\r\n                                messageParams = undefinedToNull(params[0]);\r\n                            }\r\n                            else {\r\n                                messageParams = params.slice(0, last).map(value => undefinedToNull(value));\r\n                            }\r\n                        }\r\n                        else {\r\n                            messageParams = params.map(value => undefinedToNull(value));\r\n                        }\r\n                        break;\r\n                }\r\n            }\r\n            else {\r\n                method = type.method;\r\n                messageParams = computeMessageParams(type, params);\r\n                let numberOfParams = type.numberOfParams;\r\n                token = cancellation_1.CancellationToken.is(params[numberOfParams]) ? params[numberOfParams] : undefined;\r\n            }\r\n            let id = sequenceNumber++;\r\n            let result = new Promise((resolve, reject) => {\r\n                let requestMessage = {\r\n                    jsonrpc: version,\r\n                    id: id,\r\n                    method: method,\r\n                    params: messageParams\r\n                };\r\n                let responsePromise = { method: method, timerStart: Date.now(), resolve, reject };\r\n                traceSendingRequest(requestMessage);\r\n                try {\r\n                    messageWriter.write(requestMessage);\r\n                }\r\n                catch (e) {\r\n                    // Writing the message failed. So we need to reject the promise.\r\n                    responsePromise.reject(new messages_1.ResponseError(messages_1.ErrorCodes.MessageWriteError, e.message ? e.message : 'Unknown reason'));\r\n                    responsePromise = null;\r\n                }\r\n                if (responsePromise) {\r\n                    responsePromises[String(id)] = responsePromise;\r\n                }\r\n            });\r\n            if (token) {\r\n                token.onCancellationRequested(() => {\r\n                    connection.sendNotification(CancelNotification.type, { id });\r\n                });\r\n            }\r\n            return result;\r\n        },\r\n        onRequest: (type, handler) => {\r\n            throwIfClosedOrDisposed();\r\n            if (Is.func(type)) {\r\n                starRequestHandler = type;\r\n            }\r\n            else if (handler) {\r\n                if (Is.string(type)) {\r\n                    requestHandlers[type] = { type: undefined, handler };\r\n                }\r\n                else {\r\n                    requestHandlers[type.method] = { type, handler };\r\n                }\r\n            }\r\n        },\r\n        trace: (_value, _tracer, sendNotificationOrTraceOptions) => {\r\n            let _sendNotification = false;\r\n            let _traceFormat = TraceFormat.Text;\r\n            if (sendNotificationOrTraceOptions !== void 0) {\r\n                if (Is.boolean(sendNotificationOrTraceOptions)) {\r\n                    _sendNotification = sendNotificationOrTraceOptions;\r\n                }\r\n                else {\r\n                    _sendNotification = sendNotificationOrTraceOptions.sendNotification || false;\r\n                    _traceFormat = sendNotificationOrTraceOptions.traceFormat || TraceFormat.Text;\r\n                }\r\n            }\r\n            trace = _value;\r\n            traceFormat = _traceFormat;\r\n            if (trace === Trace.Off) {\r\n                tracer = undefined;\r\n            }\r\n            else {\r\n                tracer = _tracer;\r\n            }\r\n            if (_sendNotification && !isClosed() && !isDisposed()) {\r\n                connection.sendNotification(SetTraceNotification.type, { value: Trace.toString(_value) });\r\n            }\r\n        },\r\n        onError: errorEmitter.event,\r\n        onClose: closeEmitter.event,\r\n        onUnhandledNotification: unhandledNotificationEmitter.event,\r\n        onDispose: disposeEmitter.event,\r\n        dispose: () => {\r\n            if (isDisposed()) {\r\n                return;\r\n            }\r\n            state = ConnectionState.Disposed;\r\n            disposeEmitter.fire(undefined);\r\n            let error = new Error('Connection got disposed.');\r\n            Object.keys(responsePromises).forEach((key) => {\r\n                responsePromises[key].reject(error);\r\n            });\r\n            responsePromises = Object.create(null);\r\n            requestTokens = Object.create(null);\r\n            messageQueue = new linkedMap_1.LinkedMap();\r\n            // Test for backwards compatibility\r\n            if (Is.func(messageWriter.dispose)) {\r\n                messageWriter.dispose();\r\n            }\r\n            if (Is.func(messageReader.dispose)) {\r\n                messageReader.dispose();\r\n            }\r\n        },\r\n        listen: () => {\r\n            throwIfClosedOrDisposed();\r\n            throwIfListening();\r\n            state = ConnectionState.Listening;\r\n            messageReader.listen(callback);\r\n        },\r\n        inspect: () => {\r\n            // eslint-disable-next-line no-console\r\n            console.log('inspect');\r\n        }\r\n    };\r\n    connection.onNotification(LogTraceNotification.type, (params) => {\r\n        if (trace === Trace.Off || !tracer) {\r\n            return;\r\n        }\r\n        tracer.log(params.message, trace === Trace.Verbose ? params.verbose : undefined);\r\n    });\r\n    connection.onNotification(ProgressNotification.type, (params) => {\r\n        const handler = progressHandlers.get(params.token);\r\n        if (handler) {\r\n            handler(params.value);\r\n        }\r\n        else {\r\n            unhandledProgressEmitter.fire(params);\r\n        }\r\n    });\r\n    return connection;\r\n}\r\nfunction isMessageReader(value) {\r\n    return value.listen !== void 0 && value.read === void 0;\r\n}\r\nfunction isMessageWriter(value) {\r\n    return value.write !== void 0 && value.end === void 0;\r\n}\r\nfunction createMessageConnection(input, output, logger, strategy) {\r\n    if (!logger) {\r\n        logger = exports.NullLogger;\r\n    }\r\n    let reader = isMessageReader(input) ? input : new messageReader_1.StreamMessageReader(input);\r\n    let writer = isMessageWriter(output) ? output : new messageWriter_1.StreamMessageWriter(output);\r\n    return _createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createMessageConnection = createMessageConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet DefaultSize = 8192;\r\nlet CR = Buffer.from('\\r', 'ascii')[0];\r\nlet LF = Buffer.from('\\n', 'ascii')[0];\r\nlet CRLF = '\\r\\n';\r\nclass MessageBuffer {\r\n    constructor(encoding = 'utf8') {\r\n        this.encoding = encoding;\r\n        this.index = 0;\r\n        this.buffer = Buffer.allocUnsafe(DefaultSize);\r\n    }\r\n    append(chunk) {\r\n        var toAppend = chunk;\r\n        if (typeof (chunk) === 'string') {\r\n            var str = chunk;\r\n            var bufferLen = Buffer.byteLength(str, this.encoding);\r\n            toAppend = Buffer.allocUnsafe(bufferLen);\r\n            toAppend.write(str, 0, bufferLen, this.encoding);\r\n        }\r\n        if (this.buffer.length - this.index >= toAppend.length) {\r\n            toAppend.copy(this.buffer, this.index, 0, toAppend.length);\r\n        }\r\n        else {\r\n            var newSize = (Math.ceil((this.index + toAppend.length) / DefaultSize) + 1) * DefaultSize;\r\n            if (this.index === 0) {\r\n                this.buffer = Buffer.allocUnsafe(newSize);\r\n                toAppend.copy(this.buffer, 0, 0, toAppend.length);\r\n            }\r\n            else {\r\n                this.buffer = Buffer.concat([this.buffer.slice(0, this.index), toAppend], newSize);\r\n            }\r\n        }\r\n        this.index += toAppend.length;\r\n    }\r\n    tryReadHeaders() {\r\n        let result = undefined;\r\n        let current = 0;\r\n        while (current + 3 < this.index && (this.buffer[current] !== CR || this.buffer[current + 1] !== LF || this.buffer[current + 2] !== CR || this.buffer[current + 3] !== LF)) {\r\n            current++;\r\n        }\r\n        // No header / body separator found (e.g CRLFCRLF)\r\n        if (current + 3 >= this.index) {\r\n            return result;\r\n        }\r\n        result = Object.create(null);\r\n        let headers = this.buffer.toString('ascii', 0, current).split(CRLF);\r\n        headers.forEach((header) => {\r\n            let index = header.indexOf(':');\r\n            if (index === -1) {\r\n                throw new Error('Message header must separate key and value using :');\r\n            }\r\n            let key = header.substr(0, index);\r\n            let value = header.substr(index + 1).trim();\r\n            result[key] = value;\r\n        });\r\n        let nextStart = current + 4;\r\n        this.buffer = this.buffer.slice(nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    tryReadContent(length) {\r\n        if (this.index < length) {\r\n            return null;\r\n        }\r\n        let result = this.buffer.toString(this.encoding, 0, length);\r\n        let nextStart = length;\r\n        this.buffer.copy(this.buffer, 0, nextStart);\r\n        this.index = this.index - nextStart;\r\n        return result;\r\n    }\r\n    get numberOfBytes() {\r\n        return this.index;\r\n    }\r\n}\r\nvar MessageReader;\r\n(function (MessageReader) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.listen) && Is.func(candidate.dispose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.onClose) && Is.func(candidate.onPartialMessage);\r\n    }\r\n    MessageReader.is = is;\r\n})(MessageReader = exports.MessageReader || (exports.MessageReader = {}));\r\nclass AbstractMessageReader {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n        this.partialMessageEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error) {\r\n        this.errorEmitter.fire(this.asError(error));\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    get onPartialMessage() {\r\n        return this.partialMessageEmitter.event;\r\n    }\r\n    firePartialMessage(info) {\r\n        this.partialMessageEmitter.fire(info);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Reader received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageReader = AbstractMessageReader;\r\nclass StreamMessageReader extends AbstractMessageReader {\r\n    constructor(readable, encoding = 'utf8') {\r\n        super();\r\n        this.readable = readable;\r\n        this.buffer = new MessageBuffer(encoding);\r\n        this._partialMessageTimeout = 10000;\r\n    }\r\n    set partialMessageTimeout(timeout) {\r\n        this._partialMessageTimeout = timeout;\r\n    }\r\n    get partialMessageTimeout() {\r\n        return this._partialMessageTimeout;\r\n    }\r\n    listen(callback) {\r\n        this.nextMessageLength = -1;\r\n        this.messageToken = 0;\r\n        this.partialMessageTimer = undefined;\r\n        this.callback = callback;\r\n        this.readable.on('data', (data) => {\r\n            this.onData(data);\r\n        });\r\n        this.readable.on('error', (error) => this.fireError(error));\r\n        this.readable.on('close', () => this.fireClose());\r\n    }\r\n    onData(data) {\r\n        this.buffer.append(data);\r\n        while (true) {\r\n            if (this.nextMessageLength === -1) {\r\n                let headers = this.buffer.tryReadHeaders();\r\n                if (!headers) {\r\n                    return;\r\n                }\r\n                let contentLength = headers['Content-Length'];\r\n                if (!contentLength) {\r\n                    throw new Error('Header must provide a Content-Length property.');\r\n                }\r\n                let length = parseInt(contentLength);\r\n                if (isNaN(length)) {\r\n                    throw new Error('Content-Length value must be a number.');\r\n                }\r\n                this.nextMessageLength = length;\r\n                // Take the encoding form the header. For compatibility\r\n                // treat both utf-8 and utf8 as node utf8\r\n            }\r\n            var msg = this.buffer.tryReadContent(this.nextMessageLength);\r\n            if (msg === null) {\r\n                /** We haven't received the full message yet. */\r\n                this.setPartialMessageTimer();\r\n                return;\r\n            }\r\n            this.clearPartialMessageTimer();\r\n            this.nextMessageLength = -1;\r\n            this.messageToken++;\r\n            var json = JSON.parse(msg);\r\n            this.callback(json);\r\n        }\r\n    }\r\n    clearPartialMessageTimer() {\r\n        if (this.partialMessageTimer) {\r\n            clearTimeout(this.partialMessageTimer);\r\n            this.partialMessageTimer = undefined;\r\n        }\r\n    }\r\n    setPartialMessageTimer() {\r\n        this.clearPartialMessageTimer();\r\n        if (this._partialMessageTimeout <= 0) {\r\n            return;\r\n        }\r\n        this.partialMessageTimer = setTimeout((token, timeout) => {\r\n            this.partialMessageTimer = undefined;\r\n            if (token === this.messageToken) {\r\n                this.firePartialMessage({ messageToken: token, waitingTime: timeout });\r\n                this.setPartialMessageTimer();\r\n            }\r\n        }, this._partialMessageTimeout, this.messageToken, this._partialMessageTimeout);\r\n    }\r\n}\r\nexports.StreamMessageReader = StreamMessageReader;\r\nclass IPCMessageReader extends AbstractMessageReader {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose());\r\n    }\r\n    listen(callback) {\r\n        this.process.on('message', callback);\r\n    }\r\n}\r\nexports.IPCMessageReader = IPCMessageReader;\r\nclass SocketMessageReader extends StreamMessageReader {\r\n    constructor(socket, encoding = 'utf-8') {\r\n        super(socket, encoding);\r\n    }\r\n}\r\nexports.SocketMessageReader = SocketMessageReader;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst events_1 = require(\"./events\");\r\nconst Is = require(\"./is\");\r\nlet ContentLength = 'Content-Length: ';\r\nlet CRLF = '\\r\\n';\r\nvar MessageWriter;\r\n(function (MessageWriter) {\r\n    function is(value) {\r\n        let candidate = value;\r\n        return candidate && Is.func(candidate.dispose) && Is.func(candidate.onClose) &&\r\n            Is.func(candidate.onError) && Is.func(candidate.write);\r\n    }\r\n    MessageWriter.is = is;\r\n})(MessageWriter = exports.MessageWriter || (exports.MessageWriter = {}));\r\nclass AbstractMessageWriter {\r\n    constructor() {\r\n        this.errorEmitter = new events_1.Emitter();\r\n        this.closeEmitter = new events_1.Emitter();\r\n    }\r\n    dispose() {\r\n        this.errorEmitter.dispose();\r\n        this.closeEmitter.dispose();\r\n    }\r\n    get onError() {\r\n        return this.errorEmitter.event;\r\n    }\r\n    fireError(error, message, count) {\r\n        this.errorEmitter.fire([this.asError(error), message, count]);\r\n    }\r\n    get onClose() {\r\n        return this.closeEmitter.event;\r\n    }\r\n    fireClose() {\r\n        this.closeEmitter.fire(undefined);\r\n    }\r\n    asError(error) {\r\n        if (error instanceof Error) {\r\n            return error;\r\n        }\r\n        else {\r\n            return new Error(`Writer received error. Reason: ${Is.string(error.message) ? error.message : 'unknown'}`);\r\n        }\r\n    }\r\n}\r\nexports.AbstractMessageWriter = AbstractMessageWriter;\r\nclass StreamMessageWriter extends AbstractMessageWriter {\r\n    constructor(writable, encoding = 'utf8') {\r\n        super();\r\n        this.writable = writable;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.writable.on('error', (error) => this.fireError(error));\r\n        this.writable.on('close', () => this.fireClose());\r\n    }\r\n    write(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.writable.write(headers.join(''), 'ascii');\r\n            // Now write the content. This can be written in any encoding\r\n            this.writable.write(json, this.encoding);\r\n            this.errorCount = 0;\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.StreamMessageWriter = StreamMessageWriter;\r\nclass IPCMessageWriter extends AbstractMessageWriter {\r\n    constructor(process) {\r\n        super();\r\n        this.process = process;\r\n        this.errorCount = 0;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        let eventEmitter = this.process;\r\n        eventEmitter.on('error', (error) => this.fireError(error));\r\n        eventEmitter.on('close', () => this.fireClose);\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        try {\r\n            if (this.process.send) {\r\n                this.sending = true;\r\n                this.process.send(msg, undefined, undefined, (error) => {\r\n                    this.sending = false;\r\n                    if (error) {\r\n                        this.errorCount++;\r\n                        this.fireError(error, msg, this.errorCount);\r\n                    }\r\n                    else {\r\n                        this.errorCount = 0;\r\n                    }\r\n                    if (this.queue.length > 0) {\r\n                        this.doWriteMessage(this.queue.shift());\r\n                    }\r\n                });\r\n            }\r\n        }\r\n        catch (error) {\r\n            this.errorCount++;\r\n            this.fireError(error, msg, this.errorCount);\r\n        }\r\n    }\r\n}\r\nexports.IPCMessageWriter = IPCMessageWriter;\r\nclass SocketMessageWriter extends AbstractMessageWriter {\r\n    constructor(socket, encoding = 'utf8') {\r\n        super();\r\n        this.socket = socket;\r\n        this.queue = [];\r\n        this.sending = false;\r\n        this.encoding = encoding;\r\n        this.errorCount = 0;\r\n        this.socket.on('error', (error) => this.fireError(error));\r\n        this.socket.on('close', () => this.fireClose());\r\n    }\r\n    dispose() {\r\n        super.dispose();\r\n        this.socket.destroy();\r\n    }\r\n    write(msg) {\r\n        if (!this.sending && this.queue.length === 0) {\r\n            // See https://github.com/nodejs/node/issues/7657\r\n            this.doWriteMessage(msg);\r\n        }\r\n        else {\r\n            this.queue.push(msg);\r\n        }\r\n    }\r\n    doWriteMessage(msg) {\r\n        let json = JSON.stringify(msg);\r\n        let contentLength = Buffer.byteLength(json, this.encoding);\r\n        let headers = [\r\n            ContentLength, contentLength.toString(), CRLF,\r\n            CRLF\r\n        ];\r\n        try {\r\n            // Header must be written in ASCII encoding\r\n            this.sending = true;\r\n            this.socket.write(headers.join(''), 'ascii', (error) => {\r\n                if (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n                try {\r\n                    // Now write the content. This can be written in any encoding\r\n                    this.socket.write(json, this.encoding, (error) => {\r\n                        this.sending = false;\r\n                        if (error) {\r\n                            this.handleError(error, msg);\r\n                        }\r\n                        else {\r\n                            this.errorCount = 0;\r\n                        }\r\n                        if (this.queue.length > 0) {\r\n                            this.doWriteMessage(this.queue.shift());\r\n                        }\r\n                    });\r\n                }\r\n                catch (error) {\r\n                    this.handleError(error, msg);\r\n                }\r\n            });\r\n        }\r\n        catch (error) {\r\n            this.handleError(error, msg);\r\n        }\r\n    }\r\n    handleError(error, msg) {\r\n        this.errorCount++;\r\n        this.fireError(error, msg, this.errorCount);\r\n    }\r\n}\r\nexports.SocketMessageWriter = SocketMessageWriter;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst is = require(\"./is\");\r\n/**\r\n * Predefined error codes.\r\n */\r\nvar ErrorCodes;\r\n(function (ErrorCodes) {\r\n    // Defined by JSON RPC\r\n    ErrorCodes.ParseError = -32700;\r\n    ErrorCodes.InvalidRequest = -32600;\r\n    ErrorCodes.MethodNotFound = -32601;\r\n    ErrorCodes.InvalidParams = -32602;\r\n    ErrorCodes.InternalError = -32603;\r\n    ErrorCodes.serverErrorStart = -32099;\r\n    ErrorCodes.serverErrorEnd = -32000;\r\n    ErrorCodes.ServerNotInitialized = -32002;\r\n    ErrorCodes.UnknownErrorCode = -32001;\r\n    // Defined by the protocol.\r\n    ErrorCodes.RequestCancelled = -32800;\r\n    ErrorCodes.ContentModified = -32801;\r\n    // Defined by VSCode library.\r\n    ErrorCodes.MessageWriteError = 1;\r\n    ErrorCodes.MessageReadError = 2;\r\n})(ErrorCodes = exports.ErrorCodes || (exports.ErrorCodes = {}));\r\n/**\r\n * An error object return in a response in case a request\r\n * has failed.\r\n */\r\nclass ResponseError extends Error {\r\n    constructor(code, message, data) {\r\n        super(message);\r\n        this.code = is.number(code) ? code : ErrorCodes.UnknownErrorCode;\r\n        this.data = data;\r\n        Object.setPrototypeOf(this, ResponseError.prototype);\r\n    }\r\n    toJson() {\r\n        return {\r\n            code: this.code,\r\n            message: this.message,\r\n            data: this.data,\r\n        };\r\n    }\r\n}\r\nexports.ResponseError = ResponseError;\r\n/**\r\n * An abstract implementation of a MessageType.\r\n */\r\nclass AbstractMessageType {\r\n    constructor(_method, _numberOfParams) {\r\n        this._method = _method;\r\n        this._numberOfParams = _numberOfParams;\r\n    }\r\n    get method() {\r\n        return this._method;\r\n    }\r\n    get numberOfParams() {\r\n        return this._numberOfParams;\r\n    }\r\n}\r\nexports.AbstractMessageType = AbstractMessageType;\r\n/**\r\n * Classes to type request response pairs\r\n *\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass RequestType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.RequestType0 = RequestType0;\r\nclass RequestType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType = RequestType;\r\nclass RequestType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.RequestType1 = RequestType1;\r\nclass RequestType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.RequestType2 = RequestType2;\r\nclass RequestType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.RequestType3 = RequestType3;\r\nclass RequestType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.RequestType4 = RequestType4;\r\nclass RequestType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.RequestType5 = RequestType5;\r\nclass RequestType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.RequestType6 = RequestType6;\r\nclass RequestType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.RequestType7 = RequestType7;\r\nclass RequestType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.RequestType8 = RequestType8;\r\nclass RequestType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.RequestType9 = RequestType9;\r\n/**\r\n * The type parameter RO will be removed in the next major version\r\n * of the JSON RPC library since it is a LSP concept and doesn't\r\n * belong here. For now it is tagged as default never.\r\n */\r\nclass NotificationType extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n        this._ = undefined;\r\n    }\r\n}\r\nexports.NotificationType = NotificationType;\r\nclass NotificationType0 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 0);\r\n    }\r\n}\r\nexports.NotificationType0 = NotificationType0;\r\nclass NotificationType1 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 1);\r\n    }\r\n}\r\nexports.NotificationType1 = NotificationType1;\r\nclass NotificationType2 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 2);\r\n    }\r\n}\r\nexports.NotificationType2 = NotificationType2;\r\nclass NotificationType3 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 3);\r\n    }\r\n}\r\nexports.NotificationType3 = NotificationType3;\r\nclass NotificationType4 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 4);\r\n    }\r\n}\r\nexports.NotificationType4 = NotificationType4;\r\nclass NotificationType5 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 5);\r\n    }\r\n}\r\nexports.NotificationType5 = NotificationType5;\r\nclass NotificationType6 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 6);\r\n    }\r\n}\r\nexports.NotificationType6 = NotificationType6;\r\nclass NotificationType7 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 7);\r\n    }\r\n}\r\nexports.NotificationType7 = NotificationType7;\r\nclass NotificationType8 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 8);\r\n    }\r\n}\r\nexports.NotificationType8 = NotificationType8;\r\nclass NotificationType9 extends AbstractMessageType {\r\n    constructor(method) {\r\n        super(method, 9);\r\n    }\r\n}\r\nexports.NotificationType9 = NotificationType9;\r\n/**\r\n * Tests if the given message is a request message\r\n */\r\nfunction isRequestMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && (is.string(candidate.id) || is.number(candidate.id));\r\n}\r\nexports.isRequestMessage = isRequestMessage;\r\n/**\r\n * Tests if the given message is a notification message\r\n */\r\nfunction isNotificationMessage(message) {\r\n    let candidate = message;\r\n    return candidate && is.string(candidate.method) && message.id === void 0;\r\n}\r\nexports.isNotificationMessage = isNotificationMessage;\r\n/**\r\n * Tests if the given message is a response message\r\n */\r\nfunction isResponseMessage(message) {\r\n    let candidate = message;\r\n    return candidate && (candidate.result !== void 0 || !!candidate.error) && (is.string(candidate.id) || is.number(candidate.id) || candidate.id === null);\r\n}\r\nexports.isResponseMessage = isResponseMessage;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst path_1 = require(\"path\");\r\nconst os_1 = require(\"os\");\r\nconst crypto_1 = require(\"crypto\");\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction generateRandomPipeName() {\r\n    const randomSuffix = crypto_1.randomBytes(21).toString('hex');\r\n    if (process.platform === 'win32') {\r\n        return `\\\\\\\\.\\\\pipe\\\\vscode-jsonrpc-${randomSuffix}-sock`;\r\n    }\r\n    else {\r\n        // Mac/Unix: use socket file\r\n        return path_1.join(os_1.tmpdir(), `vscode-${randomSuffix}.sock`);\r\n    }\r\n}\r\nexports.generateRandomPipeName = generateRandomPipeName;\r\nfunction createClientPipeTransport(pipeName, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(pipeName, () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientPipeTransport = createClientPipeTransport;\r\nfunction createServerPipeTransport(pipeName, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(pipeName);\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerPipeTransport = createServerPipeTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst net_1 = require(\"net\");\r\nconst messageReader_1 = require(\"./messageReader\");\r\nconst messageWriter_1 = require(\"./messageWriter\");\r\nfunction createClientSocketTransport(port, encoding = 'utf-8') {\r\n    let connectResolve;\r\n    let connected = new Promise((resolve, _reject) => {\r\n        connectResolve = resolve;\r\n    });\r\n    return new Promise((resolve, reject) => {\r\n        let server = net_1.createServer((socket) => {\r\n            server.close();\r\n            connectResolve([\r\n                new messageReader_1.SocketMessageReader(socket, encoding),\r\n                new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n            ]);\r\n        });\r\n        server.on('error', reject);\r\n        server.listen(port, '127.0.0.1', () => {\r\n            server.removeListener('error', reject);\r\n            resolve({\r\n                onConnected: () => { return connected; }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.createClientSocketTransport = createClientSocketTransport;\r\nfunction createServerSocketTransport(port, encoding = 'utf-8') {\r\n    const socket = net_1.createConnection(port, '127.0.0.1');\r\n    return [\r\n        new messageReader_1.SocketMessageReader(socket, encoding),\r\n        new messageWriter_1.SocketMessageWriter(socket, encoding)\r\n    ];\r\n}\r\nexports.createServerSocketTransport = createServerSocketTransport;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nfunction __export(m) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nexports.ErrorCodes = vscode_jsonrpc_1.ErrorCodes;\r\nexports.ResponseError = vscode_jsonrpc_1.ResponseError;\r\nexports.CancellationToken = vscode_jsonrpc_1.CancellationToken;\r\nexports.CancellationTokenSource = vscode_jsonrpc_1.CancellationTokenSource;\r\nexports.Disposable = vscode_jsonrpc_1.Disposable;\r\nexports.Event = vscode_jsonrpc_1.Event;\r\nexports.Emitter = vscode_jsonrpc_1.Emitter;\r\nexports.Trace = vscode_jsonrpc_1.Trace;\r\nexports.TraceFormat = vscode_jsonrpc_1.TraceFormat;\r\nexports.SetTraceNotification = vscode_jsonrpc_1.SetTraceNotification;\r\nexports.LogTraceNotification = vscode_jsonrpc_1.LogTraceNotification;\r\nexports.RequestType = vscode_jsonrpc_1.RequestType;\r\nexports.RequestType0 = vscode_jsonrpc_1.RequestType0;\r\nexports.NotificationType = vscode_jsonrpc_1.NotificationType;\r\nexports.NotificationType0 = vscode_jsonrpc_1.NotificationType0;\r\nexports.MessageReader = vscode_jsonrpc_1.MessageReader;\r\nexports.MessageWriter = vscode_jsonrpc_1.MessageWriter;\r\nexports.ConnectionStrategy = vscode_jsonrpc_1.ConnectionStrategy;\r\nexports.StreamMessageReader = vscode_jsonrpc_1.StreamMessageReader;\r\nexports.StreamMessageWriter = vscode_jsonrpc_1.StreamMessageWriter;\r\nexports.IPCMessageReader = vscode_jsonrpc_1.IPCMessageReader;\r\nexports.IPCMessageWriter = vscode_jsonrpc_1.IPCMessageWriter;\r\nexports.createClientPipeTransport = vscode_jsonrpc_1.createClientPipeTransport;\r\nexports.createServerPipeTransport = vscode_jsonrpc_1.createServerPipeTransport;\r\nexports.generateRandomPipeName = vscode_jsonrpc_1.generateRandomPipeName;\r\nexports.createClientSocketTransport = vscode_jsonrpc_1.createClientSocketTransport;\r\nexports.createServerSocketTransport = vscode_jsonrpc_1.createServerSocketTransport;\r\nexports.ProgressType = vscode_jsonrpc_1.ProgressType;\r\n__export(require(\"vscode-languageserver-types\"));\r\n__export(require(\"./protocol\"));\r\nconst callHierarchy = require(\"./protocol.callHierarchy.proposed\");\r\nconst st = require(\"./protocol.sematicTokens.proposed\");\r\nvar Proposed;\r\n(function (Proposed) {\r\n    let CallHierarchyPrepareRequest;\r\n    (function (CallHierarchyPrepareRequest) {\r\n        CallHierarchyPrepareRequest.method = callHierarchy.CallHierarchyPrepareRequest.method;\r\n        CallHierarchyPrepareRequest.type = callHierarchy.CallHierarchyPrepareRequest.type;\r\n    })(CallHierarchyPrepareRequest = Proposed.CallHierarchyPrepareRequest || (Proposed.CallHierarchyPrepareRequest = {}));\r\n    let CallHierarchyIncomingCallsRequest;\r\n    (function (CallHierarchyIncomingCallsRequest) {\r\n        CallHierarchyIncomingCallsRequest.method = callHierarchy.CallHierarchyIncomingCallsRequest.method;\r\n        CallHierarchyIncomingCallsRequest.type = callHierarchy.CallHierarchyIncomingCallsRequest.type;\r\n    })(CallHierarchyIncomingCallsRequest = Proposed.CallHierarchyIncomingCallsRequest || (Proposed.CallHierarchyIncomingCallsRequest = {}));\r\n    let CallHierarchyOutgoingCallsRequest;\r\n    (function (CallHierarchyOutgoingCallsRequest) {\r\n        CallHierarchyOutgoingCallsRequest.method = callHierarchy.CallHierarchyOutgoingCallsRequest.method;\r\n        CallHierarchyOutgoingCallsRequest.type = callHierarchy.CallHierarchyOutgoingCallsRequest.type;\r\n    })(CallHierarchyOutgoingCallsRequest = Proposed.CallHierarchyOutgoingCallsRequest || (Proposed.CallHierarchyOutgoingCallsRequest = {}));\r\n    Proposed.SemanticTokenTypes = st.SemanticTokenTypes;\r\n    Proposed.SemanticTokenModifiers = st.SemanticTokenModifiers;\r\n    Proposed.SemanticTokens = st.SemanticTokens;\r\n    let SemanticTokensRequest;\r\n    (function (SemanticTokensRequest) {\r\n        SemanticTokensRequest.method = st.SemanticTokensRequest.method;\r\n        SemanticTokensRequest.type = st.SemanticTokensRequest.type;\r\n    })(SemanticTokensRequest = Proposed.SemanticTokensRequest || (Proposed.SemanticTokensRequest = {}));\r\n    let SemanticTokensEditsRequest;\r\n    (function (SemanticTokensEditsRequest) {\r\n        SemanticTokensEditsRequest.method = st.SemanticTokensEditsRequest.method;\r\n        SemanticTokensEditsRequest.type = st.SemanticTokensEditsRequest.type;\r\n    })(SemanticTokensEditsRequest = Proposed.SemanticTokensEditsRequest || (Proposed.SemanticTokensEditsRequest = {}));\r\n    let SemanticTokensRangeRequest;\r\n    (function (SemanticTokensRangeRequest) {\r\n        SemanticTokensRangeRequest.method = st.SemanticTokensRangeRequest.method;\r\n        SemanticTokensRangeRequest.type = st.SemanticTokensRangeRequest.type;\r\n    })(SemanticTokensRangeRequest = Proposed.SemanticTokensRangeRequest || (Proposed.SemanticTokensRangeRequest = {}));\r\n})(Proposed = exports.Proposed || (exports.Proposed = {}));\r\nfunction createProtocolConnection(reader, writer, logger, strategy) {\r\n    return vscode_jsonrpc_1.createMessageConnection(reader, writer, logger, strategy);\r\n}\r\nexports.createProtocolConnection = createProtocolConnection;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nclass ProtocolRequestType0 extends vscode_jsonrpc_1.RequestType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType0 = ProtocolRequestType0;\r\nclass ProtocolRequestType extends vscode_jsonrpc_1.RequestType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolRequestType = ProtocolRequestType;\r\nclass ProtocolNotificationType extends vscode_jsonrpc_1.NotificationType {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType = ProtocolNotificationType;\r\nclass ProtocolNotificationType0 extends vscode_jsonrpc_1.NotificationType0 {\r\n    constructor(method) {\r\n        super(method);\r\n    }\r\n}\r\nexports.ProtocolNotificationType0 = ProtocolNotificationType0;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) TypeFox and others. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to result a `CallHierarchyItem` in a document at a given position.\r\n * Can be used as an input to a incoming or outgoing call hierarchy.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyPrepareRequest;\r\n(function (CallHierarchyPrepareRequest) {\r\n    CallHierarchyPrepareRequest.method = 'textDocument/prepareCallHierarchy';\r\n    CallHierarchyPrepareRequest.type = new messages_1.ProtocolRequestType(CallHierarchyPrepareRequest.method);\r\n})(CallHierarchyPrepareRequest = exports.CallHierarchyPrepareRequest || (exports.CallHierarchyPrepareRequest = {}));\r\n/**\r\n * A request to resolve the incoming calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyIncomingCallsRequest;\r\n(function (CallHierarchyIncomingCallsRequest) {\r\n    CallHierarchyIncomingCallsRequest.method = 'callHierarchy/incomingCalls';\r\n    CallHierarchyIncomingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyIncomingCallsRequest.method);\r\n})(CallHierarchyIncomingCallsRequest = exports.CallHierarchyIncomingCallsRequest || (exports.CallHierarchyIncomingCallsRequest = {}));\r\n/**\r\n * A request to resolve the outgoing calls for a given `CallHierarchyItem`.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar CallHierarchyOutgoingCallsRequest;\r\n(function (CallHierarchyOutgoingCallsRequest) {\r\n    CallHierarchyOutgoingCallsRequest.method = 'callHierarchy/outgoingCalls';\r\n    CallHierarchyOutgoingCallsRequest.type = new messages_1.ProtocolRequestType(CallHierarchyOutgoingCallsRequest.method);\r\n})(CallHierarchyOutgoingCallsRequest = exports.CallHierarchyOutgoingCallsRequest || (exports.CallHierarchyOutgoingCallsRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to list all color symbols found in a given text document. The request's\r\n * parameter is of type [DocumentColorParams](#DocumentColorParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentColorRequest;\r\n(function (DocumentColorRequest) {\r\n    DocumentColorRequest.method = 'textDocument/documentColor';\r\n    DocumentColorRequest.type = new messages_1.ProtocolRequestType(DocumentColorRequest.method);\r\n    /** @deprecated Use DocumentColorRequest.type */\r\n    DocumentColorRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentColorRequest = exports.DocumentColorRequest || (exports.DocumentColorRequest = {}));\r\n/**\r\n * A request to list all presentation for a color. The request's\r\n * parameter is of type [ColorPresentationParams](#ColorPresentationParams) the\r\n * response is of type [ColorInformation[]](#ColorInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar ColorPresentationRequest;\r\n(function (ColorPresentationRequest) {\r\n    ColorPresentationRequest.type = new messages_1.ProtocolRequestType('textDocument/colorPresentation');\r\n})(ColorPresentationRequest = exports.ColorPresentationRequest || (exports.ColorPresentationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The 'workspace/configuration' request is sent from the server to the client to fetch a certain\r\n * configuration setting.\r\n *\r\n * This pull model replaces the old push model were the client signaled configuration change via an\r\n * event. If the server still needs to react to configuration changes (since the server caches the\r\n * result of `workspace/configuration` requests) the server should register for an empty configuration\r\n * change event and empty the cache if such an event is received.\r\n */\r\nvar ConfigurationRequest;\r\n(function (ConfigurationRequest) {\r\n    ConfigurationRequest.type = new messages_1.ProtocolRequestType('workspace/configuration');\r\n})(ConfigurationRequest = exports.ConfigurationRequest || (exports.ConfigurationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Declaration](#Declaration)\r\n * or a typed array of [DeclarationLink](#DeclarationLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DeclarationRequest;\r\n(function (DeclarationRequest) {\r\n    DeclarationRequest.method = 'textDocument/declaration';\r\n    DeclarationRequest.type = new messages_1.ProtocolRequestType(DeclarationRequest.method);\r\n    /** @deprecated Use DeclarationRequest.type */\r\n    DeclarationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DeclarationRequest = exports.DeclarationRequest || (exports.DeclarationRequest = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * Enum of known range kinds\r\n */\r\nvar FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind = exports.FoldingRangeKind || (exports.FoldingRangeKind = {}));\r\n/**\r\n * A request to provide folding ranges in a document. The request's\r\n * parameter is of type [FoldingRangeParams](#FoldingRangeParams), the\r\n * response is of type [FoldingRangeList](#FoldingRangeList) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar FoldingRangeRequest;\r\n(function (FoldingRangeRequest) {\r\n    FoldingRangeRequest.method = 'textDocument/foldingRange';\r\n    FoldingRangeRequest.type = new messages_1.ProtocolRequestType(FoldingRangeRequest.method);\r\n    /** @deprecated Use FoldingRangeRequest.type */\r\n    FoldingRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(FoldingRangeRequest = exports.FoldingRangeRequest || (exports.FoldingRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the implementation locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar ImplementationRequest;\r\n(function (ImplementationRequest) {\r\n    ImplementationRequest.method = 'textDocument/implementation';\r\n    ImplementationRequest.type = new messages_1.ProtocolRequestType(ImplementationRequest.method);\r\n    /** @deprecated Use ImplementationRequest.type */\r\n    ImplementationRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ImplementationRequest = exports.ImplementationRequest || (exports.ImplementationRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst Is = require(\"./utils/is\");\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nconst protocol_implementation_1 = require(\"./protocol.implementation\");\r\nexports.ImplementationRequest = protocol_implementation_1.ImplementationRequest;\r\nconst protocol_typeDefinition_1 = require(\"./protocol.typeDefinition\");\r\nexports.TypeDefinitionRequest = protocol_typeDefinition_1.TypeDefinitionRequest;\r\nconst protocol_workspaceFolders_1 = require(\"./protocol.workspaceFolders\");\r\nexports.WorkspaceFoldersRequest = protocol_workspaceFolders_1.WorkspaceFoldersRequest;\r\nexports.DidChangeWorkspaceFoldersNotification = protocol_workspaceFolders_1.DidChangeWorkspaceFoldersNotification;\r\nconst protocol_configuration_1 = require(\"./protocol.configuration\");\r\nexports.ConfigurationRequest = protocol_configuration_1.ConfigurationRequest;\r\nconst protocol_colorProvider_1 = require(\"./protocol.colorProvider\");\r\nexports.DocumentColorRequest = protocol_colorProvider_1.DocumentColorRequest;\r\nexports.ColorPresentationRequest = protocol_colorProvider_1.ColorPresentationRequest;\r\nconst protocol_foldingRange_1 = require(\"./protocol.foldingRange\");\r\nexports.FoldingRangeRequest = protocol_foldingRange_1.FoldingRangeRequest;\r\nconst protocol_declaration_1 = require(\"./protocol.declaration\");\r\nexports.DeclarationRequest = protocol_declaration_1.DeclarationRequest;\r\nconst protocol_selectionRange_1 = require(\"./protocol.selectionRange\");\r\nexports.SelectionRangeRequest = protocol_selectionRange_1.SelectionRangeRequest;\r\nconst protocol_progress_1 = require(\"./protocol.progress\");\r\nexports.WorkDoneProgress = protocol_progress_1.WorkDoneProgress;\r\nexports.WorkDoneProgressCreateRequest = protocol_progress_1.WorkDoneProgressCreateRequest;\r\nexports.WorkDoneProgressCancelNotification = protocol_progress_1.WorkDoneProgressCancelNotification;\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * The DocumentFilter namespace provides helper functions to work with\r\n * [DocumentFilter](#DocumentFilter) literals.\r\n */\r\nvar DocumentFilter;\r\n(function (DocumentFilter) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.string(candidate.language) || Is.string(candidate.scheme) || Is.string(candidate.pattern);\r\n    }\r\n    DocumentFilter.is = is;\r\n})(DocumentFilter = exports.DocumentFilter || (exports.DocumentFilter = {}));\r\n/**\r\n * The DocumentSelector namespace provides helper functions to work with\r\n * [DocumentSelector](#DocumentSelector)s.\r\n */\r\nvar DocumentSelector;\r\n(function (DocumentSelector) {\r\n    function is(value) {\r\n        if (!Array.isArray(value)) {\r\n            return false;\r\n        }\r\n        for (let elem of value) {\r\n            if (!Is.string(elem) && !DocumentFilter.is(elem)) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n    DocumentSelector.is = is;\r\n})(DocumentSelector = exports.DocumentSelector || (exports.DocumentSelector = {}));\r\n/**\r\n * The `client/registerCapability` request is sent from the server to the client to register a new capability\r\n * handler on the client side.\r\n */\r\nvar RegistrationRequest;\r\n(function (RegistrationRequest) {\r\n    RegistrationRequest.type = new messages_1.ProtocolRequestType('client/registerCapability');\r\n})(RegistrationRequest = exports.RegistrationRequest || (exports.RegistrationRequest = {}));\r\n/**\r\n * The `client/unregisterCapability` request is sent from the server to the client to unregister a previously registered capability\r\n * handler on the client side.\r\n */\r\nvar UnregistrationRequest;\r\n(function (UnregistrationRequest) {\r\n    UnregistrationRequest.type = new messages_1.ProtocolRequestType('client/unregisterCapability');\r\n})(UnregistrationRequest = exports.UnregistrationRequest || (exports.UnregistrationRequest = {}));\r\nvar ResourceOperationKind;\r\n(function (ResourceOperationKind) {\r\n    /**\r\n     * Supports creating new files and folders.\r\n     */\r\n    ResourceOperationKind.Create = 'create';\r\n    /**\r\n     * Supports renaming existing files and folders.\r\n     */\r\n    ResourceOperationKind.Rename = 'rename';\r\n    /**\r\n     * Supports deleting existing files and folders.\r\n     */\r\n    ResourceOperationKind.Delete = 'delete';\r\n})(ResourceOperationKind = exports.ResourceOperationKind || (exports.ResourceOperationKind = {}));\r\nvar FailureHandlingKind;\r\n(function (FailureHandlingKind) {\r\n    /**\r\n     * Applying the workspace change is simply aborted if one of the changes provided\r\n     * fails. All operations executed before the failing operation stay executed.\r\n     */\r\n    FailureHandlingKind.Abort = 'abort';\r\n    /**\r\n     * All operations are executed transactional. That means they either all\r\n     * succeed or no changes at all are applied to the workspace.\r\n     */\r\n    FailureHandlingKind.Transactional = 'transactional';\r\n    /**\r\n     * If the workspace edit contains only textual file changes they are executed transactional.\r\n     * If resource changes (create, rename or delete file) are part of the change the failure\r\n     * handling startegy is abort.\r\n     */\r\n    FailureHandlingKind.TextOnlyTransactional = 'textOnlyTransactional';\r\n    /**\r\n     * The client tries to undo the operations already executed. But there is no\r\n     * guarantee that this is succeeding.\r\n     */\r\n    FailureHandlingKind.Undo = 'undo';\r\n})(FailureHandlingKind = exports.FailureHandlingKind || (exports.FailureHandlingKind = {}));\r\n/**\r\n * The StaticRegistrationOptions namespace provides helper functions to work with\r\n * [StaticRegistrationOptions](#StaticRegistrationOptions) literals.\r\n */\r\nvar StaticRegistrationOptions;\r\n(function (StaticRegistrationOptions) {\r\n    function hasId(value) {\r\n        const candidate = value;\r\n        return candidate && Is.string(candidate.id) && candidate.id.length > 0;\r\n    }\r\n    StaticRegistrationOptions.hasId = hasId;\r\n})(StaticRegistrationOptions = exports.StaticRegistrationOptions || (exports.StaticRegistrationOptions = {}));\r\n/**\r\n * The TextDocumentRegistrationOptions namespace provides helper functions to work with\r\n * [TextDocumentRegistrationOptions](#TextDocumentRegistrationOptions) literals.\r\n */\r\nvar TextDocumentRegistrationOptions;\r\n(function (TextDocumentRegistrationOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate && (candidate.documentSelector === null || DocumentSelector.is(candidate.documentSelector));\r\n    }\r\n    TextDocumentRegistrationOptions.is = is;\r\n})(TextDocumentRegistrationOptions = exports.TextDocumentRegistrationOptions || (exports.TextDocumentRegistrationOptions = {}));\r\n/**\r\n * The WorkDoneProgressOptions namespace provides helper functions to work with\r\n * [WorkDoneProgressOptions](#WorkDoneProgressOptions) literals.\r\n */\r\nvar WorkDoneProgressOptions;\r\n(function (WorkDoneProgressOptions) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return Is.objectLiteral(candidate) && (candidate.workDoneProgress === undefined || Is.boolean(candidate.workDoneProgress));\r\n    }\r\n    WorkDoneProgressOptions.is = is;\r\n    function hasWorkDoneProgress(value) {\r\n        const candidate = value;\r\n        return candidate && Is.boolean(candidate.workDoneProgress);\r\n    }\r\n    WorkDoneProgressOptions.hasWorkDoneProgress = hasWorkDoneProgress;\r\n})(WorkDoneProgressOptions = exports.WorkDoneProgressOptions || (exports.WorkDoneProgressOptions = {}));\r\n/**\r\n * The initialize request is sent from the client to the server.\r\n * It is sent once as the request after starting up the server.\r\n * The requests parameter is of type [InitializeParams](#InitializeParams)\r\n * the response if of type [InitializeResult](#InitializeResult) of a Thenable that\r\n * resolves to such.\r\n */\r\nvar InitializeRequest;\r\n(function (InitializeRequest) {\r\n    InitializeRequest.type = new messages_1.ProtocolRequestType('initialize');\r\n})(InitializeRequest = exports.InitializeRequest || (exports.InitializeRequest = {}));\r\n/**\r\n * Known error codes for an `InitializeError`;\r\n */\r\nvar InitializeError;\r\n(function (InitializeError) {\r\n    /**\r\n     * If the protocol version provided by the client can't be handled by the server.\r\n     * @deprecated This initialize error got replaced by client capabilities. There is\r\n     * no version handshake in version 3.0x\r\n     */\r\n    InitializeError.unknownProtocolVersion = 1;\r\n})(InitializeError = exports.InitializeError || (exports.InitializeError = {}));\r\n/**\r\n * The intialized notification is sent from the client to the\r\n * server after the client is fully initialized and the server\r\n * is allowed to send requests from the server to the client.\r\n */\r\nvar InitializedNotification;\r\n(function (InitializedNotification) {\r\n    InitializedNotification.type = new messages_1.ProtocolNotificationType('initialized');\r\n})(InitializedNotification = exports.InitializedNotification || (exports.InitializedNotification = {}));\r\n//---- Shutdown Method ----\r\n/**\r\n * A shutdown request is sent from the client to the server.\r\n * It is sent once when the client decides to shutdown the\r\n * server. The only notification that is sent after a shutdown request\r\n * is the exit event.\r\n */\r\nvar ShutdownRequest;\r\n(function (ShutdownRequest) {\r\n    ShutdownRequest.type = new messages_1.ProtocolRequestType0('shutdown');\r\n})(ShutdownRequest = exports.ShutdownRequest || (exports.ShutdownRequest = {}));\r\n//---- Exit Notification ----\r\n/**\r\n * The exit event is sent from the client to the server to\r\n * ask the server to exit its process.\r\n */\r\nvar ExitNotification;\r\n(function (ExitNotification) {\r\n    ExitNotification.type = new messages_1.ProtocolNotificationType0('exit');\r\n})(ExitNotification = exports.ExitNotification || (exports.ExitNotification = {}));\r\n/**\r\n * The configuration change notification is sent from the client to the server\r\n * when the client's configuration has changed. The notification contains\r\n * the changed configuration as defined by the language client.\r\n */\r\nvar DidChangeConfigurationNotification;\r\n(function (DidChangeConfigurationNotification) {\r\n    DidChangeConfigurationNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeConfiguration');\r\n})(DidChangeConfigurationNotification = exports.DidChangeConfigurationNotification || (exports.DidChangeConfigurationNotification = {}));\r\n//---- Message show and log notifications ----\r\n/**\r\n * The message type\r\n */\r\nvar MessageType;\r\n(function (MessageType) {\r\n    /**\r\n     * An error message.\r\n     */\r\n    MessageType.Error = 1;\r\n    /**\r\n     * A warning message.\r\n     */\r\n    MessageType.Warning = 2;\r\n    /**\r\n     * An information message.\r\n     */\r\n    MessageType.Info = 3;\r\n    /**\r\n     * A log message.\r\n     */\r\n    MessageType.Log = 4;\r\n})(MessageType = exports.MessageType || (exports.MessageType = {}));\r\n/**\r\n * The show message notification is sent from a server to a client to ask\r\n * the client to display a particular message in the user interface.\r\n */\r\nvar ShowMessageNotification;\r\n(function (ShowMessageNotification) {\r\n    ShowMessageNotification.type = new messages_1.ProtocolNotificationType('window/showMessage');\r\n})(ShowMessageNotification = exports.ShowMessageNotification || (exports.ShowMessageNotification = {}));\r\n/**\r\n * The show message request is sent from the server to the client to show a message\r\n * and a set of options actions to the user.\r\n */\r\nvar ShowMessageRequest;\r\n(function (ShowMessageRequest) {\r\n    ShowMessageRequest.type = new messages_1.ProtocolRequestType('window/showMessageRequest');\r\n})(ShowMessageRequest = exports.ShowMessageRequest || (exports.ShowMessageRequest = {}));\r\n/**\r\n * The log message notification is sent from the server to the client to ask\r\n * the client to log a particular message.\r\n */\r\nvar LogMessageNotification;\r\n(function (LogMessageNotification) {\r\n    LogMessageNotification.type = new messages_1.ProtocolNotificationType('window/logMessage');\r\n})(LogMessageNotification = exports.LogMessageNotification || (exports.LogMessageNotification = {}));\r\n//---- Telemetry notification\r\n/**\r\n * The telemetry event notification is sent from the server to the client to ask\r\n * the client to log telemetry data.\r\n */\r\nvar TelemetryEventNotification;\r\n(function (TelemetryEventNotification) {\r\n    TelemetryEventNotification.type = new messages_1.ProtocolNotificationType('telemetry/event');\r\n})(TelemetryEventNotification = exports.TelemetryEventNotification || (exports.TelemetryEventNotification = {}));\r\n/**\r\n * Defines how the host (editor) should sync\r\n * document changes to the language server.\r\n */\r\nvar TextDocumentSyncKind;\r\n(function (TextDocumentSyncKind) {\r\n    /**\r\n     * Documents should not be synced at all.\r\n     */\r\n    TextDocumentSyncKind.None = 0;\r\n    /**\r\n     * Documents are synced by always sending the full content\r\n     * of the document.\r\n     */\r\n    TextDocumentSyncKind.Full = 1;\r\n    /**\r\n     * Documents are synced by sending the full content on open.\r\n     * After that only incremental updates to the document are\r\n     * send.\r\n     */\r\n    TextDocumentSyncKind.Incremental = 2;\r\n})(TextDocumentSyncKind = exports.TextDocumentSyncKind || (exports.TextDocumentSyncKind = {}));\r\n/**\r\n * The document open notification is sent from the client to the server to signal\r\n * newly opened text documents. The document's truth is now managed by the client\r\n * and the server must not try to read the document's truth using the document's\r\n * uri. Open in this sense means it is managed by the client. It doesn't necessarily\r\n * mean that its content is presented in an editor. An open notification must not\r\n * be sent more than once without a corresponding close notification send before.\r\n * This means open and close notification must be balanced and the max open count\r\n * is one.\r\n */\r\nvar DidOpenTextDocumentNotification;\r\n(function (DidOpenTextDocumentNotification) {\r\n    DidOpenTextDocumentNotification.method = 'textDocument/didOpen';\r\n    DidOpenTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidOpenTextDocumentNotification.method);\r\n})(DidOpenTextDocumentNotification = exports.DidOpenTextDocumentNotification || (exports.DidOpenTextDocumentNotification = {}));\r\n/**\r\n * The document change notification is sent from the client to the server to signal\r\n * changes to a text document.\r\n */\r\nvar DidChangeTextDocumentNotification;\r\n(function (DidChangeTextDocumentNotification) {\r\n    DidChangeTextDocumentNotification.method = 'textDocument/didChange';\r\n    DidChangeTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidChangeTextDocumentNotification.method);\r\n})(DidChangeTextDocumentNotification = exports.DidChangeTextDocumentNotification || (exports.DidChangeTextDocumentNotification = {}));\r\n/**\r\n * The document close notification is sent from the client to the server when\r\n * the document got closed in the client. The document's truth now exists where\r\n * the document's uri points to (e.g. if the document's uri is a file uri the\r\n * truth now exists on disk). As with the open notification the close notification\r\n * is about managing the document's content. Receiving a close notification\r\n * doesn't mean that the document was open in an editor before. A close\r\n * notification requires a previous open notification to be sent.\r\n */\r\nvar DidCloseTextDocumentNotification;\r\n(function (DidCloseTextDocumentNotification) {\r\n    DidCloseTextDocumentNotification.method = 'textDocument/didClose';\r\n    DidCloseTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidCloseTextDocumentNotification.method);\r\n})(DidCloseTextDocumentNotification = exports.DidCloseTextDocumentNotification || (exports.DidCloseTextDocumentNotification = {}));\r\n/**\r\n * The document save notification is sent from the client to the server when\r\n * the document got saved in the client.\r\n */\r\nvar DidSaveTextDocumentNotification;\r\n(function (DidSaveTextDocumentNotification) {\r\n    DidSaveTextDocumentNotification.method = 'textDocument/didSave';\r\n    DidSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(DidSaveTextDocumentNotification.method);\r\n})(DidSaveTextDocumentNotification = exports.DidSaveTextDocumentNotification || (exports.DidSaveTextDocumentNotification = {}));\r\n/**\r\n * Represents reasons why a text document is saved.\r\n */\r\nvar TextDocumentSaveReason;\r\n(function (TextDocumentSaveReason) {\r\n    /**\r\n     * Manually triggered, e.g. by the user pressing save, by starting debugging,\r\n     * or by an API call.\r\n     */\r\n    TextDocumentSaveReason.Manual = 1;\r\n    /**\r\n     * Automatic after a delay.\r\n     */\r\n    TextDocumentSaveReason.AfterDelay = 2;\r\n    /**\r\n     * When the editor lost focus.\r\n     */\r\n    TextDocumentSaveReason.FocusOut = 3;\r\n})(TextDocumentSaveReason = exports.TextDocumentSaveReason || (exports.TextDocumentSaveReason = {}));\r\n/**\r\n * A document will save notification is sent from the client to the server before\r\n * the document is actually saved.\r\n */\r\nvar WillSaveTextDocumentNotification;\r\n(function (WillSaveTextDocumentNotification) {\r\n    WillSaveTextDocumentNotification.method = 'textDocument/willSave';\r\n    WillSaveTextDocumentNotification.type = new messages_1.ProtocolNotificationType(WillSaveTextDocumentNotification.method);\r\n})(WillSaveTextDocumentNotification = exports.WillSaveTextDocumentNotification || (exports.WillSaveTextDocumentNotification = {}));\r\n/**\r\n * A document will save request is sent from the client to the server before\r\n * the document is actually saved. The request can return an array of TextEdits\r\n * which will be applied to the text document before it is saved. Please note that\r\n * clients might drop results if computing the text edits took too long or if a\r\n * server constantly fails on this request. This is done to keep the save fast and\r\n * reliable.\r\n */\r\nvar WillSaveTextDocumentWaitUntilRequest;\r\n(function (WillSaveTextDocumentWaitUntilRequest) {\r\n    WillSaveTextDocumentWaitUntilRequest.method = 'textDocument/willSaveWaitUntil';\r\n    WillSaveTextDocumentWaitUntilRequest.type = new messages_1.ProtocolRequestType(WillSaveTextDocumentWaitUntilRequest.method);\r\n})(WillSaveTextDocumentWaitUntilRequest = exports.WillSaveTextDocumentWaitUntilRequest || (exports.WillSaveTextDocumentWaitUntilRequest = {}));\r\n/**\r\n * The watched files notification is sent from the client to the server when\r\n * the client detects changes to file watched by the language client.\r\n */\r\nvar DidChangeWatchedFilesNotification;\r\n(function (DidChangeWatchedFilesNotification) {\r\n    DidChangeWatchedFilesNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWatchedFiles');\r\n})(DidChangeWatchedFilesNotification = exports.DidChangeWatchedFilesNotification || (exports.DidChangeWatchedFilesNotification = {}));\r\n/**\r\n * The file event type\r\n */\r\nvar FileChangeType;\r\n(function (FileChangeType) {\r\n    /**\r\n     * The file got created.\r\n     */\r\n    FileChangeType.Created = 1;\r\n    /**\r\n     * The file got changed.\r\n     */\r\n    FileChangeType.Changed = 2;\r\n    /**\r\n     * The file got deleted.\r\n     */\r\n    FileChangeType.Deleted = 3;\r\n})(FileChangeType = exports.FileChangeType || (exports.FileChangeType = {}));\r\nvar WatchKind;\r\n(function (WatchKind) {\r\n    /**\r\n     * Interested in create events.\r\n     */\r\n    WatchKind.Create = 1;\r\n    /**\r\n     * Interested in change events\r\n     */\r\n    WatchKind.Change = 2;\r\n    /**\r\n     * Interested in delete events\r\n     */\r\n    WatchKind.Delete = 4;\r\n})(WatchKind = exports.WatchKind || (exports.WatchKind = {}));\r\n/**\r\n * Diagnostics notification are sent from the server to the client to signal\r\n * results of validation runs.\r\n */\r\nvar PublishDiagnosticsNotification;\r\n(function (PublishDiagnosticsNotification) {\r\n    PublishDiagnosticsNotification.type = new messages_1.ProtocolNotificationType('textDocument/publishDiagnostics');\r\n})(PublishDiagnosticsNotification = exports.PublishDiagnosticsNotification || (exports.PublishDiagnosticsNotification = {}));\r\n/**\r\n * How a completion was triggered\r\n */\r\nvar CompletionTriggerKind;\r\n(function (CompletionTriggerKind) {\r\n    /**\r\n     * Completion was triggered by typing an identifier (24x7 code\r\n     * complete), manual invocation (e.g Ctrl+Space) or via API.\r\n     */\r\n    CompletionTriggerKind.Invoked = 1;\r\n    /**\r\n     * Completion was triggered by a trigger character specified by\r\n     * the `triggerCharacters` properties of the `CompletionRegistrationOptions`.\r\n     */\r\n    CompletionTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Completion was re-triggered as current completion list is incomplete\r\n     */\r\n    CompletionTriggerKind.TriggerForIncompleteCompletions = 3;\r\n})(CompletionTriggerKind = exports.CompletionTriggerKind || (exports.CompletionTriggerKind = {}));\r\n/**\r\n * Request to request completion at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response\r\n * is of type [CompletionItem[]](#CompletionItem) or [CompletionList](#CompletionList)\r\n * or a Thenable that resolves to such.\r\n *\r\n * The request can delay the computation of the [`detail`](#CompletionItem.detail)\r\n * and [`documentation`](#CompletionItem.documentation) properties to the `completionItem/resolve`\r\n * request. However, properties that are needed for the initial sorting and filtering, like `sortText`,\r\n * `filterText`, `insertText`, and `textEdit`, must not be changed during resolve.\r\n */\r\nvar CompletionRequest;\r\n(function (CompletionRequest) {\r\n    CompletionRequest.method = 'textDocument/completion';\r\n    CompletionRequest.type = new messages_1.ProtocolRequestType(CompletionRequest.method);\r\n    /** @deprecated Use CompletionRequest.type */\r\n    CompletionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CompletionRequest = exports.CompletionRequest || (exports.CompletionRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given completion item.The request's\r\n * parameter is of type [CompletionItem](#CompletionItem) the response\r\n * is of type [CompletionItem](#CompletionItem) or a Thenable that resolves to such.\r\n */\r\nvar CompletionResolveRequest;\r\n(function (CompletionResolveRequest) {\r\n    CompletionResolveRequest.method = 'completionItem/resolve';\r\n    CompletionResolveRequest.type = new messages_1.ProtocolRequestType(CompletionResolveRequest.method);\r\n})(CompletionResolveRequest = exports.CompletionResolveRequest || (exports.CompletionResolveRequest = {}));\r\n/**\r\n * Request to request hover information at a given text document position. The request's\r\n * parameter is of type [TextDocumentPosition](#TextDocumentPosition) the response is of\r\n * type [Hover](#Hover) or a Thenable that resolves to such.\r\n */\r\nvar HoverRequest;\r\n(function (HoverRequest) {\r\n    HoverRequest.method = 'textDocument/hover';\r\n    HoverRequest.type = new messages_1.ProtocolRequestType(HoverRequest.method);\r\n})(HoverRequest = exports.HoverRequest || (exports.HoverRequest = {}));\r\n/**\r\n * How a signature help was triggered.\r\n *\r\n * @since 3.15.0\r\n */\r\nvar SignatureHelpTriggerKind;\r\n(function (SignatureHelpTriggerKind) {\r\n    /**\r\n     * Signature help was invoked manually by the user or by a command.\r\n     */\r\n    SignatureHelpTriggerKind.Invoked = 1;\r\n    /**\r\n     * Signature help was triggered by a trigger character.\r\n     */\r\n    SignatureHelpTriggerKind.TriggerCharacter = 2;\r\n    /**\r\n     * Signature help was triggered by the cursor moving or by the document content changing.\r\n     */\r\n    SignatureHelpTriggerKind.ContentChange = 3;\r\n})(SignatureHelpTriggerKind = exports.SignatureHelpTriggerKind || (exports.SignatureHelpTriggerKind = {}));\r\nvar SignatureHelpRequest;\r\n(function (SignatureHelpRequest) {\r\n    SignatureHelpRequest.method = 'textDocument/signatureHelp';\r\n    SignatureHelpRequest.type = new messages_1.ProtocolRequestType(SignatureHelpRequest.method);\r\n})(SignatureHelpRequest = exports.SignatureHelpRequest || (exports.SignatureHelpRequest = {}));\r\n/**\r\n * A request to resolve the definition location of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the response is of either type [Definition](#Definition)\r\n * or a typed array of [DefinitionLink](#DefinitionLink) or a Thenable that resolves\r\n * to such.\r\n */\r\nvar DefinitionRequest;\r\n(function (DefinitionRequest) {\r\n    DefinitionRequest.method = 'textDocument/definition';\r\n    DefinitionRequest.type = new messages_1.ProtocolRequestType(DefinitionRequest.method);\r\n    /** @deprecated Use DefinitionRequest.type */\r\n    DefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DefinitionRequest = exports.DefinitionRequest || (exports.DefinitionRequest = {}));\r\n/**\r\n * A request to resolve project-wide references for the symbol denoted\r\n * by the given text document position. The request's parameter is of\r\n * type [ReferenceParams](#ReferenceParams) the response is of type\r\n * [Location[]](#Location) or a Thenable that resolves to such.\r\n */\r\nvar ReferencesRequest;\r\n(function (ReferencesRequest) {\r\n    ReferencesRequest.method = 'textDocument/references';\r\n    ReferencesRequest.type = new messages_1.ProtocolRequestType(ReferencesRequest.method);\r\n    /** @deprecated Use ReferencesRequest.type */\r\n    ReferencesRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(ReferencesRequest = exports.ReferencesRequest || (exports.ReferencesRequest = {}));\r\n/**\r\n * Request to resolve a [DocumentHighlight](#DocumentHighlight) for a given\r\n * text document position. The request's parameter is of type [TextDocumentPosition]\r\n * (#TextDocumentPosition) the request response is of type [DocumentHighlight[]]\r\n * (#DocumentHighlight) or a Thenable that resolves to such.\r\n */\r\nvar DocumentHighlightRequest;\r\n(function (DocumentHighlightRequest) {\r\n    DocumentHighlightRequest.method = 'textDocument/documentHighlight';\r\n    DocumentHighlightRequest.type = new messages_1.ProtocolRequestType(DocumentHighlightRequest.method);\r\n    /** @deprecated Use DocumentHighlightRequest.type */\r\n    DocumentHighlightRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentHighlightRequest = exports.DocumentHighlightRequest || (exports.DocumentHighlightRequest = {}));\r\n/**\r\n * A request to list all symbols found in a given text document. The request's\r\n * parameter is of type [TextDocumentIdentifier](#TextDocumentIdentifier) the\r\n * response is of type [SymbolInformation[]](#SymbolInformation) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar DocumentSymbolRequest;\r\n(function (DocumentSymbolRequest) {\r\n    DocumentSymbolRequest.method = 'textDocument/documentSymbol';\r\n    DocumentSymbolRequest.type = new messages_1.ProtocolRequestType(DocumentSymbolRequest.method);\r\n    /** @deprecated Use DocumentSymbolRequest.type */\r\n    DocumentSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentSymbolRequest = exports.DocumentSymbolRequest || (exports.DocumentSymbolRequest = {}));\r\n/**\r\n * A request to provide commands for the given text document and range.\r\n */\r\nvar CodeActionRequest;\r\n(function (CodeActionRequest) {\r\n    CodeActionRequest.method = 'textDocument/codeAction';\r\n    CodeActionRequest.type = new messages_1.ProtocolRequestType(CodeActionRequest.method);\r\n    /** @deprecated Use CodeActionRequest.type */\r\n    CodeActionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeActionRequest = exports.CodeActionRequest || (exports.CodeActionRequest = {}));\r\n/**\r\n * A request to list project-wide symbols matching the query string given\r\n * by the [WorkspaceSymbolParams](#WorkspaceSymbolParams). The response is\r\n * of type [SymbolInformation[]](#SymbolInformation) or a Thenable that\r\n * resolves to such.\r\n */\r\nvar WorkspaceSymbolRequest;\r\n(function (WorkspaceSymbolRequest) {\r\n    WorkspaceSymbolRequest.method = 'workspace/symbol';\r\n    WorkspaceSymbolRequest.type = new messages_1.ProtocolRequestType(WorkspaceSymbolRequest.method);\r\n    /** @deprecated Use WorkspaceSymbolRequest.type */\r\n    WorkspaceSymbolRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkspaceSymbolRequest = exports.WorkspaceSymbolRequest || (exports.WorkspaceSymbolRequest = {}));\r\n/**\r\n * A request to provide code lens for the given text document.\r\n */\r\nvar CodeLensRequest;\r\n(function (CodeLensRequest) {\r\n    CodeLensRequest.type = new messages_1.ProtocolRequestType('textDocument/codeLens');\r\n    /** @deprecated Use CodeLensRequest.type */\r\n    CodeLensRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(CodeLensRequest = exports.CodeLensRequest || (exports.CodeLensRequest = {}));\r\n/**\r\n * A request to resolve a command for a given code lens.\r\n */\r\nvar CodeLensResolveRequest;\r\n(function (CodeLensResolveRequest) {\r\n    CodeLensResolveRequest.type = new messages_1.ProtocolRequestType('codeLens/resolve');\r\n})(CodeLensResolveRequest = exports.CodeLensResolveRequest || (exports.CodeLensResolveRequest = {}));\r\n/**\r\n * A request to provide document links\r\n */\r\nvar DocumentLinkRequest;\r\n(function (DocumentLinkRequest) {\r\n    DocumentLinkRequest.method = 'textDocument/documentLink';\r\n    DocumentLinkRequest.type = new messages_1.ProtocolRequestType(DocumentLinkRequest.method);\r\n    /** @deprecated Use DocumentLinkRequest.type */\r\n    DocumentLinkRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(DocumentLinkRequest = exports.DocumentLinkRequest || (exports.DocumentLinkRequest = {}));\r\n/**\r\n * Request to resolve additional information for a given document link. The request's\r\n * parameter is of type [DocumentLink](#DocumentLink) the response\r\n * is of type [DocumentLink](#DocumentLink) or a Thenable that resolves to such.\r\n */\r\nvar DocumentLinkResolveRequest;\r\n(function (DocumentLinkResolveRequest) {\r\n    DocumentLinkResolveRequest.type = new messages_1.ProtocolRequestType('documentLink/resolve');\r\n})(DocumentLinkResolveRequest = exports.DocumentLinkResolveRequest || (exports.DocumentLinkResolveRequest = {}));\r\n/**\r\n * A request to to format a whole document.\r\n */\r\nvar DocumentFormattingRequest;\r\n(function (DocumentFormattingRequest) {\r\n    DocumentFormattingRequest.method = 'textDocument/formatting';\r\n    DocumentFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentFormattingRequest.method);\r\n})(DocumentFormattingRequest = exports.DocumentFormattingRequest || (exports.DocumentFormattingRequest = {}));\r\n/**\r\n * A request to to format a range in a document.\r\n */\r\nvar DocumentRangeFormattingRequest;\r\n(function (DocumentRangeFormattingRequest) {\r\n    DocumentRangeFormattingRequest.method = 'textDocument/rangeFormatting';\r\n    DocumentRangeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentRangeFormattingRequest.method);\r\n})(DocumentRangeFormattingRequest = exports.DocumentRangeFormattingRequest || (exports.DocumentRangeFormattingRequest = {}));\r\n/**\r\n * A request to format a document on type.\r\n */\r\nvar DocumentOnTypeFormattingRequest;\r\n(function (DocumentOnTypeFormattingRequest) {\r\n    DocumentOnTypeFormattingRequest.method = 'textDocument/onTypeFormatting';\r\n    DocumentOnTypeFormattingRequest.type = new messages_1.ProtocolRequestType(DocumentOnTypeFormattingRequest.method);\r\n})(DocumentOnTypeFormattingRequest = exports.DocumentOnTypeFormattingRequest || (exports.DocumentOnTypeFormattingRequest = {}));\r\n/**\r\n * A request to rename a symbol.\r\n */\r\nvar RenameRequest;\r\n(function (RenameRequest) {\r\n    RenameRequest.method = 'textDocument/rename';\r\n    RenameRequest.type = new messages_1.ProtocolRequestType(RenameRequest.method);\r\n})(RenameRequest = exports.RenameRequest || (exports.RenameRequest = {}));\r\n/**\r\n * A request to test and perform the setup necessary for a rename.\r\n */\r\nvar PrepareRenameRequest;\r\n(function (PrepareRenameRequest) {\r\n    PrepareRenameRequest.method = 'textDocument/prepareRename';\r\n    PrepareRenameRequest.type = new messages_1.ProtocolRequestType(PrepareRenameRequest.method);\r\n})(PrepareRenameRequest = exports.PrepareRenameRequest || (exports.PrepareRenameRequest = {}));\r\n/**\r\n * A request send from the client to the server to execute a command. The request might return\r\n * a workspace edit which the client will apply to the workspace.\r\n */\r\nvar ExecuteCommandRequest;\r\n(function (ExecuteCommandRequest) {\r\n    ExecuteCommandRequest.type = new messages_1.ProtocolRequestType('workspace/executeCommand');\r\n})(ExecuteCommandRequest = exports.ExecuteCommandRequest || (exports.ExecuteCommandRequest = {}));\r\n/**\r\n * A request sent from the server to the client to modified certain resources.\r\n */\r\nvar ApplyWorkspaceEditRequest;\r\n(function (ApplyWorkspaceEditRequest) {\r\n    ApplyWorkspaceEditRequest.type = new messages_1.ProtocolRequestType('workspace/applyEdit');\r\n})(ApplyWorkspaceEditRequest = exports.ApplyWorkspaceEditRequest || (exports.ApplyWorkspaceEditRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\nvar WorkDoneProgress;\r\n(function (WorkDoneProgress) {\r\n    WorkDoneProgress.type = new vscode_jsonrpc_1.ProgressType();\r\n})(WorkDoneProgress = exports.WorkDoneProgress || (exports.WorkDoneProgress = {}));\r\n/**\r\n * The `window/workDoneProgress/create` request is sent from the server to the client to initiate progress\r\n * reporting from the server.\r\n */\r\nvar WorkDoneProgressCreateRequest;\r\n(function (WorkDoneProgressCreateRequest) {\r\n    WorkDoneProgressCreateRequest.type = new messages_1.ProtocolRequestType('window/workDoneProgress/create');\r\n})(WorkDoneProgressCreateRequest = exports.WorkDoneProgressCreateRequest || (exports.WorkDoneProgressCreateRequest = {}));\r\n/**\r\n * The `window/workDoneProgress/cancel` notification is sent from  the client to the server to cancel a progress\r\n * initiated on the server side.\r\n */\r\nvar WorkDoneProgressCancelNotification;\r\n(function (WorkDoneProgressCancelNotification) {\r\n    WorkDoneProgressCancelNotification.type = new messages_1.ProtocolNotificationType('window/workDoneProgress/cancel');\r\n})(WorkDoneProgressCancelNotification = exports.WorkDoneProgressCancelNotification || (exports.WorkDoneProgressCancelNotification = {}));\r\n","\"use strict\";\r\n/*---------------------------------------------------------------------------------------------\r\n *  Copyright (c) Microsoft Corporation. All rights reserved.\r\n *  Licensed under the MIT License. See License.txt in the project root for license information.\r\n *--------------------------------------------------------------------------------------------*/\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A request to provide selection ranges in a document. The request's\r\n * parameter is of type [SelectionRangeParams](#SelectionRangeParams), the\r\n * response is of type [SelectionRange[]](#SelectionRange[]) or a Thenable\r\n * that resolves to such.\r\n */\r\nvar SelectionRangeRequest;\r\n(function (SelectionRangeRequest) {\r\n    SelectionRangeRequest.method = 'textDocument/selectionRange';\r\n    SelectionRangeRequest.type = new messages_1.ProtocolRequestType(SelectionRangeRequest.method);\r\n    /** @deprecated  Use SelectionRangeRequest.type */\r\n    SelectionRangeRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(SelectionRangeRequest = exports.SelectionRangeRequest || (exports.SelectionRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * A set of predefined token types. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenTypes;\r\n(function (SemanticTokenTypes) {\r\n    SemanticTokenTypes[\"comment\"] = \"comment\";\r\n    SemanticTokenTypes[\"keyword\"] = \"keyword\";\r\n    SemanticTokenTypes[\"string\"] = \"string\";\r\n    SemanticTokenTypes[\"number\"] = \"number\";\r\n    SemanticTokenTypes[\"regexp\"] = \"regexp\";\r\n    SemanticTokenTypes[\"operator\"] = \"operator\";\r\n    SemanticTokenTypes[\"namespace\"] = \"namespace\";\r\n    SemanticTokenTypes[\"type\"] = \"type\";\r\n    SemanticTokenTypes[\"struct\"] = \"struct\";\r\n    SemanticTokenTypes[\"class\"] = \"class\";\r\n    SemanticTokenTypes[\"interface\"] = \"interface\";\r\n    SemanticTokenTypes[\"enum\"] = \"enum\";\r\n    SemanticTokenTypes[\"typeParameter\"] = \"typeParameter\";\r\n    SemanticTokenTypes[\"function\"] = \"function\";\r\n    SemanticTokenTypes[\"member\"] = \"member\";\r\n    SemanticTokenTypes[\"property\"] = \"property\";\r\n    SemanticTokenTypes[\"macro\"] = \"macro\";\r\n    SemanticTokenTypes[\"variable\"] = \"variable\";\r\n    SemanticTokenTypes[\"parameter\"] = \"parameter\";\r\n    SemanticTokenTypes[\"label\"] = \"label\";\r\n})(SemanticTokenTypes = exports.SemanticTokenTypes || (exports.SemanticTokenTypes = {}));\r\n/**\r\n * A set of predefined token modifiers. This set is not fixed\r\n * an clients can specify additional token types via the\r\n * corresponding client capabilities.\r\n *\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokenModifiers;\r\n(function (SemanticTokenModifiers) {\r\n    SemanticTokenModifiers[\"documentation\"] = \"documentation\";\r\n    SemanticTokenModifiers[\"declaration\"] = \"declaration\";\r\n    SemanticTokenModifiers[\"definition\"] = \"definition\";\r\n    SemanticTokenModifiers[\"reference\"] = \"reference\";\r\n    SemanticTokenModifiers[\"static\"] = \"static\";\r\n    SemanticTokenModifiers[\"abstract\"] = \"abstract\";\r\n    SemanticTokenModifiers[\"deprecated\"] = \"deprecated\";\r\n    SemanticTokenModifiers[\"async\"] = \"async\";\r\n    SemanticTokenModifiers[\"volatile\"] = \"volatile\";\r\n    SemanticTokenModifiers[\"readonly\"] = \"readonly\";\r\n})(SemanticTokenModifiers = exports.SemanticTokenModifiers || (exports.SemanticTokenModifiers = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokens;\r\n(function (SemanticTokens) {\r\n    function is(value) {\r\n        const candidate = value;\r\n        return candidate !== undefined && (candidate.resultId === undefined || typeof candidate.resultId === 'string') &&\r\n            Array.isArray(candidate.data) && (candidate.data.length === 0 || typeof candidate.data[0] === 'number');\r\n    }\r\n    SemanticTokens.is = is;\r\n})(SemanticTokens = exports.SemanticTokens || (exports.SemanticTokens = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRequest;\r\n(function (SemanticTokensRequest) {\r\n    SemanticTokensRequest.method = 'textDocument/semanticTokens';\r\n    SemanticTokensRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRequest.method);\r\n})(SemanticTokensRequest = exports.SemanticTokensRequest || (exports.SemanticTokensRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensEditsRequest;\r\n(function (SemanticTokensEditsRequest) {\r\n    SemanticTokensEditsRequest.method = 'textDocument/semanticTokens/edits';\r\n    SemanticTokensEditsRequest.type = new messages_1.ProtocolRequestType(SemanticTokensEditsRequest.method);\r\n})(SemanticTokensEditsRequest = exports.SemanticTokensEditsRequest || (exports.SemanticTokensEditsRequest = {}));\r\n/**\r\n * @since 3.16.0 - Proposed state\r\n */\r\nvar SemanticTokensRangeRequest;\r\n(function (SemanticTokensRangeRequest) {\r\n    SemanticTokensRangeRequest.method = 'textDocument/semanticTokens/range';\r\n    SemanticTokensRangeRequest.type = new messages_1.ProtocolRequestType(SemanticTokensRangeRequest.method);\r\n})(SemanticTokensRangeRequest = exports.SemanticTokensRangeRequest || (exports.SemanticTokensRangeRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst vscode_jsonrpc_1 = require(\"vscode-jsonrpc\");\r\nconst messages_1 = require(\"./messages\");\r\n// @ts-ignore: to avoid inlining LocatioLink as dynamic import\r\nlet __noDynamicImport;\r\n/**\r\n * A request to resolve the type definition locations of a symbol at a given text\r\n * document position. The request's parameter is of type [TextDocumentPositioParams]\r\n * (#TextDocumentPositionParams) the response is of type [Definition](#Definition) or a\r\n * Thenable that resolves to such.\r\n */\r\nvar TypeDefinitionRequest;\r\n(function (TypeDefinitionRequest) {\r\n    TypeDefinitionRequest.method = 'textDocument/typeDefinition';\r\n    TypeDefinitionRequest.type = new messages_1.ProtocolRequestType(TypeDefinitionRequest.method);\r\n    /** @deprecated Use TypeDefinitionRequest.type */\r\n    TypeDefinitionRequest.resultType = new vscode_jsonrpc_1.ProgressType();\r\n})(TypeDefinitionRequest = exports.TypeDefinitionRequest || (exports.TypeDefinitionRequest = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nconst messages_1 = require(\"./messages\");\r\n/**\r\n * The `workspace/workspaceFolders` is sent from the server to the client to fetch the open workspace folders.\r\n */\r\nvar WorkspaceFoldersRequest;\r\n(function (WorkspaceFoldersRequest) {\r\n    WorkspaceFoldersRequest.type = new messages_1.ProtocolRequestType0('workspace/workspaceFolders');\r\n})(WorkspaceFoldersRequest = exports.WorkspaceFoldersRequest || (exports.WorkspaceFoldersRequest = {}));\r\n/**\r\n * The `workspace/didChangeWorkspaceFolders` notification is sent from the client to the server when the workspace\r\n * folder configuration changes.\r\n */\r\nvar DidChangeWorkspaceFoldersNotification;\r\n(function (DidChangeWorkspaceFoldersNotification) {\r\n    DidChangeWorkspaceFoldersNotification.type = new messages_1.ProtocolNotificationType('workspace/didChangeWorkspaceFolders');\r\n})(DidChangeWorkspaceFoldersNotification = exports.DidChangeWorkspaceFoldersNotification || (exports.DidChangeWorkspaceFoldersNotification = {}));\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nfunction boolean(value) {\r\n    return value === true || value === false;\r\n}\r\nexports.boolean = boolean;\r\nfunction string(value) {\r\n    return typeof value === 'string' || value instanceof String;\r\n}\r\nexports.string = string;\r\nfunction number(value) {\r\n    return typeof value === 'number' || value instanceof Number;\r\n}\r\nexports.number = number;\r\nfunction error(value) {\r\n    return value instanceof Error;\r\n}\r\nexports.error = error;\r\nfunction func(value) {\r\n    return typeof value === 'function';\r\n}\r\nexports.func = func;\r\nfunction array(value) {\r\n    return Array.isArray(value);\r\n}\r\nexports.array = array;\r\nfunction stringArray(value) {\r\n    return array(value) && value.every(elem => string(elem));\r\n}\r\nexports.stringArray = stringArray;\r\nfunction typedArray(value, check) {\r\n    return Array.isArray(value) && value.every(check);\r\n}\r\nexports.typedArray = typedArray;\r\nfunction objectLiteral(value) {\r\n    // Strictly speaking class instances pass this check as well. Since the LSP\r\n    // doesn't use classes we ignore this for now. If we do we need to add something\r\n    // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n    return value !== null && typeof value === 'object';\r\n}\r\nexports.objectLiteral = objectLiteral;\r\n","/* --------------------------------------------------------------------------------------------\r\n * Copyright (c) Microsoft Corporation. All rights reserved.\r\n * Licensed under the MIT License. See License.txt in the project root for license information.\r\n * ------------------------------------------------------------------------------------------ */\r\n'use strict';\r\n/**\r\n * The Position namespace provides helper functions to work with\r\n * [Position](#Position) literals.\r\n */\r\nexport var Position;\r\n(function (Position) {\r\n    /**\r\n     * Creates a new Position literal from the given line and character.\r\n     * @param line The position's line.\r\n     * @param character The position's character.\r\n     */\r\n    function create(line, character) {\r\n        return { line: line, character: character };\r\n    }\r\n    Position.create = create;\r\n    /**\r\n     * Checks whether the given liternal conforms to the [Position](#Position) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Is.number(candidate.line) && Is.number(candidate.character);\r\n    }\r\n    Position.is = is;\r\n})(Position || (Position = {}));\r\n/**\r\n * The Range namespace provides helper functions to work with\r\n * [Range](#Range) literals.\r\n */\r\nexport var Range;\r\n(function (Range) {\r\n    function create(one, two, three, four) {\r\n        if (Is.number(one) && Is.number(two) && Is.number(three) && Is.number(four)) {\r\n            return { start: Position.create(one, two), end: Position.create(three, four) };\r\n        }\r\n        else if (Position.is(one) && Position.is(two)) {\r\n            return { start: one, end: two };\r\n        }\r\n        else {\r\n            throw new Error(\"Range#create called with invalid arguments[\" + one + \", \" + two + \", \" + three + \", \" + four + \"]\");\r\n        }\r\n    }\r\n    Range.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Range](#Range) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate) && Position.is(candidate.start) && Position.is(candidate.end);\r\n    }\r\n    Range.is = is;\r\n})(Range || (Range = {}));\r\n/**\r\n * The Location namespace provides helper functions to work with\r\n * [Location](#Location) literals.\r\n */\r\nexport var Location;\r\n(function (Location) {\r\n    /**\r\n     * Creates a Location literal.\r\n     * @param uri The location's uri.\r\n     * @param range The location's range.\r\n     */\r\n    function create(uri, range) {\r\n        return { uri: uri, range: range };\r\n    }\r\n    Location.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Location](#Location) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.string(candidate.uri) || Is.undefined(candidate.uri));\r\n    }\r\n    Location.is = is;\r\n})(Location || (Location = {}));\r\n/**\r\n * The LocationLink namespace provides helper functions to work with\r\n * [LocationLink](#LocationLink) literals.\r\n */\r\nexport var LocationLink;\r\n(function (LocationLink) {\r\n    /**\r\n     * Creates a LocationLink literal.\r\n     * @param targetUri The definition's uri.\r\n     * @param targetRange The full range of the definition.\r\n     * @param targetSelectionRange The span of the symbol definition at the target.\r\n     * @param originSelectionRange The span of the symbol being defined in the originating source file.\r\n     */\r\n    function create(targetUri, targetRange, targetSelectionRange, originSelectionRange) {\r\n        return { targetUri: targetUri, targetRange: targetRange, targetSelectionRange: targetSelectionRange, originSelectionRange: originSelectionRange };\r\n    }\r\n    LocationLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [LocationLink](#LocationLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.targetRange) && Is.string(candidate.targetUri)\r\n            && (Range.is(candidate.targetSelectionRange) || Is.undefined(candidate.targetSelectionRange))\r\n            && (Range.is(candidate.originSelectionRange) || Is.undefined(candidate.originSelectionRange));\r\n    }\r\n    LocationLink.is = is;\r\n})(LocationLink || (LocationLink = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [Color](#Color) literals.\r\n */\r\nexport var Color;\r\n(function (Color) {\r\n    /**\r\n     * Creates a new Color literal.\r\n     */\r\n    function create(red, green, blue, alpha) {\r\n        return {\r\n            red: red,\r\n            green: green,\r\n            blue: blue,\r\n            alpha: alpha,\r\n        };\r\n    }\r\n    Color.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Color](#Color) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.red)\r\n            && Is.number(candidate.green)\r\n            && Is.number(candidate.blue)\r\n            && Is.number(candidate.alpha);\r\n    }\r\n    Color.is = is;\r\n})(Color || (Color = {}));\r\n/**\r\n * The ColorInformation namespace provides helper functions to work with\r\n * [ColorInformation](#ColorInformation) literals.\r\n */\r\nexport var ColorInformation;\r\n(function (ColorInformation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(range, color) {\r\n        return {\r\n            range: range,\r\n            color: color,\r\n        };\r\n    }\r\n    ColorInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Range.is(candidate.range) && Color.is(candidate.color);\r\n    }\r\n    ColorInformation.is = is;\r\n})(ColorInformation || (ColorInformation = {}));\r\n/**\r\n * The Color namespace provides helper functions to work with\r\n * [ColorPresentation](#ColorPresentation) literals.\r\n */\r\nexport var ColorPresentation;\r\n(function (ColorPresentation) {\r\n    /**\r\n     * Creates a new ColorInformation literal.\r\n     */\r\n    function create(label, textEdit, additionalTextEdits) {\r\n        return {\r\n            label: label,\r\n            textEdit: textEdit,\r\n            additionalTextEdits: additionalTextEdits,\r\n        };\r\n    }\r\n    ColorPresentation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ColorInformation](#ColorInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate.label)\r\n            && (Is.undefined(candidate.textEdit) || TextEdit.is(candidate))\r\n            && (Is.undefined(candidate.additionalTextEdits) || Is.typedArray(candidate.additionalTextEdits, TextEdit.is));\r\n    }\r\n    ColorPresentation.is = is;\r\n})(ColorPresentation || (ColorPresentation = {}));\r\n/**\r\n * Enum of known range kinds\r\n */\r\nexport var FoldingRangeKind;\r\n(function (FoldingRangeKind) {\r\n    /**\r\n     * Folding range for a comment\r\n     */\r\n    FoldingRangeKind[\"Comment\"] = \"comment\";\r\n    /**\r\n     * Folding range for a imports or includes\r\n     */\r\n    FoldingRangeKind[\"Imports\"] = \"imports\";\r\n    /**\r\n     * Folding range for a region (e.g. `#region`)\r\n     */\r\n    FoldingRangeKind[\"Region\"] = \"region\";\r\n})(FoldingRangeKind || (FoldingRangeKind = {}));\r\n/**\r\n * The folding range namespace provides helper functions to work with\r\n * [FoldingRange](#FoldingRange) literals.\r\n */\r\nexport var FoldingRange;\r\n(function (FoldingRange) {\r\n    /**\r\n     * Creates a new FoldingRange literal.\r\n     */\r\n    function create(startLine, endLine, startCharacter, endCharacter, kind) {\r\n        var result = {\r\n            startLine: startLine,\r\n            endLine: endLine\r\n        };\r\n        if (Is.defined(startCharacter)) {\r\n            result.startCharacter = startCharacter;\r\n        }\r\n        if (Is.defined(endCharacter)) {\r\n            result.endCharacter = endCharacter;\r\n        }\r\n        if (Is.defined(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    FoldingRange.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FoldingRange](#FoldingRange) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.number(candidate.startLine) && Is.number(candidate.startLine)\r\n            && (Is.undefined(candidate.startCharacter) || Is.number(candidate.startCharacter))\r\n            && (Is.undefined(candidate.endCharacter) || Is.number(candidate.endCharacter))\r\n            && (Is.undefined(candidate.kind) || Is.string(candidate.kind));\r\n    }\r\n    FoldingRange.is = is;\r\n})(FoldingRange || (FoldingRange = {}));\r\n/**\r\n * The DiagnosticRelatedInformation namespace provides helper functions to work with\r\n * [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) literals.\r\n */\r\nexport var DiagnosticRelatedInformation;\r\n(function (DiagnosticRelatedInformation) {\r\n    /**\r\n     * Creates a new DiagnosticRelatedInformation literal.\r\n     */\r\n    function create(location, message) {\r\n        return {\r\n            location: location,\r\n            message: message\r\n        };\r\n    }\r\n    DiagnosticRelatedInformation.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DiagnosticRelatedInformation](#DiagnosticRelatedInformation) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Location.is(candidate.location) && Is.string(candidate.message);\r\n    }\r\n    DiagnosticRelatedInformation.is = is;\r\n})(DiagnosticRelatedInformation || (DiagnosticRelatedInformation = {}));\r\n/**\r\n * The diagnostic's severity.\r\n */\r\nexport var DiagnosticSeverity;\r\n(function (DiagnosticSeverity) {\r\n    /**\r\n     * Reports an error.\r\n     */\r\n    DiagnosticSeverity.Error = 1;\r\n    /**\r\n     * Reports a warning.\r\n     */\r\n    DiagnosticSeverity.Warning = 2;\r\n    /**\r\n     * Reports an information.\r\n     */\r\n    DiagnosticSeverity.Information = 3;\r\n    /**\r\n     * Reports a hint.\r\n     */\r\n    DiagnosticSeverity.Hint = 4;\r\n})(DiagnosticSeverity || (DiagnosticSeverity = {}));\r\n/**\r\n * The diagnostic tags.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var DiagnosticTag;\r\n(function (DiagnosticTag) {\r\n    /**\r\n     * Unused or unnecessary code.\r\n     *\r\n     * Clients are allowed to render diagnostics with this tag faded out instead of having\r\n     * an error squiggle.\r\n     */\r\n    DiagnosticTag.Unnecessary = 1;\r\n    /**\r\n     * Deprecated or obsolete code.\r\n     *\r\n     * Clients are allowed to rendered diagnostics with this tag strike through.\r\n     */\r\n    DiagnosticTag.Deprecated = 2;\r\n})(DiagnosticTag || (DiagnosticTag = {}));\r\n/**\r\n * The Diagnostic namespace provides helper functions to work with\r\n * [Diagnostic](#Diagnostic) literals.\r\n */\r\nexport var Diagnostic;\r\n(function (Diagnostic) {\r\n    /**\r\n     * Creates a new Diagnostic literal.\r\n     */\r\n    function create(range, message, severity, code, source, relatedInformation) {\r\n        var result = { range: range, message: message };\r\n        if (Is.defined(severity)) {\r\n            result.severity = severity;\r\n        }\r\n        if (Is.defined(code)) {\r\n            result.code = code;\r\n        }\r\n        if (Is.defined(source)) {\r\n            result.source = source;\r\n        }\r\n        if (Is.defined(relatedInformation)) {\r\n            result.relatedInformation = relatedInformation;\r\n        }\r\n        return result;\r\n    }\r\n    Diagnostic.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Diagnostic](#Diagnostic) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && Range.is(candidate.range)\r\n            && Is.string(candidate.message)\r\n            && (Is.number(candidate.severity) || Is.undefined(candidate.severity))\r\n            && (Is.number(candidate.code) || Is.string(candidate.code) || Is.undefined(candidate.code))\r\n            && (Is.string(candidate.source) || Is.undefined(candidate.source))\r\n            && (Is.undefined(candidate.relatedInformation) || Is.typedArray(candidate.relatedInformation, DiagnosticRelatedInformation.is));\r\n    }\r\n    Diagnostic.is = is;\r\n})(Diagnostic || (Diagnostic = {}));\r\n/**\r\n * The Command namespace provides helper functions to work with\r\n * [Command](#Command) literals.\r\n */\r\nexport var Command;\r\n(function (Command) {\r\n    /**\r\n     * Creates a new Command literal.\r\n     */\r\n    function create(title, command) {\r\n        var args = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            args[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { title: title, command: command };\r\n        if (Is.defined(args) && args.length > 0) {\r\n            result.arguments = args;\r\n        }\r\n        return result;\r\n    }\r\n    Command.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [Command](#Command) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.title) && Is.string(candidate.command);\r\n    }\r\n    Command.is = is;\r\n})(Command || (Command = {}));\r\n/**\r\n * The TextEdit namespace provides helper function to create replace,\r\n * insert and delete edits more easily.\r\n */\r\nexport var TextEdit;\r\n(function (TextEdit) {\r\n    /**\r\n     * Creates a replace text edit.\r\n     * @param range The range of text to be replaced.\r\n     * @param newText The new text.\r\n     */\r\n    function replace(range, newText) {\r\n        return { range: range, newText: newText };\r\n    }\r\n    TextEdit.replace = replace;\r\n    /**\r\n     * Creates a insert text edit.\r\n     * @param position The position to insert the text at.\r\n     * @param newText The text to be inserted.\r\n     */\r\n    function insert(position, newText) {\r\n        return { range: { start: position, end: position }, newText: newText };\r\n    }\r\n    TextEdit.insert = insert;\r\n    /**\r\n     * Creates a delete text edit.\r\n     * @param range The range of text to be deleted.\r\n     */\r\n    function del(range) {\r\n        return { range: range, newText: '' };\r\n    }\r\n    TextEdit.del = del;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(candidate)\r\n            && Is.string(candidate.newText)\r\n            && Range.is(candidate.range);\r\n    }\r\n    TextEdit.is = is;\r\n})(TextEdit || (TextEdit = {}));\r\n/**\r\n * The TextDocumentEdit namespace provides helper function to create\r\n * an edit that manipulates a text document.\r\n */\r\nexport var TextDocumentEdit;\r\n(function (TextDocumentEdit) {\r\n    /**\r\n     * Creates a new `TextDocumentEdit`\r\n     */\r\n    function create(textDocument, edits) {\r\n        return { textDocument: textDocument, edits: edits };\r\n    }\r\n    TextDocumentEdit.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate)\r\n            && VersionedTextDocumentIdentifier.is(candidate.textDocument)\r\n            && Array.isArray(candidate.edits);\r\n    }\r\n    TextDocumentEdit.is = is;\r\n})(TextDocumentEdit || (TextDocumentEdit = {}));\r\nexport var CreateFile;\r\n(function (CreateFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'create',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    CreateFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'create' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    CreateFile.is = is;\r\n})(CreateFile || (CreateFile = {}));\r\nexport var RenameFile;\r\n(function (RenameFile) {\r\n    function create(oldUri, newUri, options) {\r\n        var result = {\r\n            kind: 'rename',\r\n            oldUri: oldUri,\r\n            newUri: newUri\r\n        };\r\n        if (options !== void 0 && (options.overwrite !== void 0 || options.ignoreIfExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    RenameFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'rename' && Is.string(candidate.oldUri) && Is.string(candidate.newUri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.overwrite === void 0 || Is.boolean(candidate.options.overwrite)) && (candidate.options.ignoreIfExists === void 0 || Is.boolean(candidate.options.ignoreIfExists))));\r\n    }\r\n    RenameFile.is = is;\r\n})(RenameFile || (RenameFile = {}));\r\nexport var DeleteFile;\r\n(function (DeleteFile) {\r\n    function create(uri, options) {\r\n        var result = {\r\n            kind: 'delete',\r\n            uri: uri\r\n        };\r\n        if (options !== void 0 && (options.recursive !== void 0 || options.ignoreIfNotExists !== void 0)) {\r\n            result.options = options;\r\n        }\r\n        return result;\r\n    }\r\n    DeleteFile.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && candidate.kind === 'delete' && Is.string(candidate.uri) &&\r\n            (candidate.options === void 0 ||\r\n                ((candidate.options.recursive === void 0 || Is.boolean(candidate.options.recursive)) && (candidate.options.ignoreIfNotExists === void 0 || Is.boolean(candidate.options.ignoreIfNotExists))));\r\n    }\r\n    DeleteFile.is = is;\r\n})(DeleteFile || (DeleteFile = {}));\r\nexport var WorkspaceEdit;\r\n(function (WorkspaceEdit) {\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            (candidate.changes !== void 0 || candidate.documentChanges !== void 0) &&\r\n            (candidate.documentChanges === void 0 || candidate.documentChanges.every(function (change) {\r\n                if (Is.string(change.kind)) {\r\n                    return CreateFile.is(change) || RenameFile.is(change) || DeleteFile.is(change);\r\n                }\r\n                else {\r\n                    return TextDocumentEdit.is(change);\r\n                }\r\n            }));\r\n    }\r\n    WorkspaceEdit.is = is;\r\n})(WorkspaceEdit || (WorkspaceEdit = {}));\r\nvar TextEditChangeImpl = /** @class */ (function () {\r\n    function TextEditChangeImpl(edits) {\r\n        this.edits = edits;\r\n    }\r\n    TextEditChangeImpl.prototype.insert = function (position, newText) {\r\n        this.edits.push(TextEdit.insert(position, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.replace = function (range, newText) {\r\n        this.edits.push(TextEdit.replace(range, newText));\r\n    };\r\n    TextEditChangeImpl.prototype.delete = function (range) {\r\n        this.edits.push(TextEdit.del(range));\r\n    };\r\n    TextEditChangeImpl.prototype.add = function (edit) {\r\n        this.edits.push(edit);\r\n    };\r\n    TextEditChangeImpl.prototype.all = function () {\r\n        return this.edits;\r\n    };\r\n    TextEditChangeImpl.prototype.clear = function () {\r\n        this.edits.splice(0, this.edits.length);\r\n    };\r\n    return TextEditChangeImpl;\r\n}());\r\n/**\r\n * A workspace change helps constructing changes to a workspace.\r\n */\r\nvar WorkspaceChange = /** @class */ (function () {\r\n    function WorkspaceChange(workspaceEdit) {\r\n        var _this = this;\r\n        this._textEditChanges = Object.create(null);\r\n        if (workspaceEdit) {\r\n            this._workspaceEdit = workspaceEdit;\r\n            if (workspaceEdit.documentChanges) {\r\n                workspaceEdit.documentChanges.forEach(function (change) {\r\n                    if (TextDocumentEdit.is(change)) {\r\n                        var textEditChange = new TextEditChangeImpl(change.edits);\r\n                        _this._textEditChanges[change.textDocument.uri] = textEditChange;\r\n                    }\r\n                });\r\n            }\r\n            else if (workspaceEdit.changes) {\r\n                Object.keys(workspaceEdit.changes).forEach(function (key) {\r\n                    var textEditChange = new TextEditChangeImpl(workspaceEdit.changes[key]);\r\n                    _this._textEditChanges[key] = textEditChange;\r\n                });\r\n            }\r\n        }\r\n    }\r\n    Object.defineProperty(WorkspaceChange.prototype, \"edit\", {\r\n        /**\r\n         * Returns the underlying [WorkspaceEdit](#WorkspaceEdit) literal\r\n         * use to be returned from a workspace edit operation like rename.\r\n         */\r\n        get: function () {\r\n            return this._workspaceEdit;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    WorkspaceChange.prototype.getTextEditChange = function (key) {\r\n        if (VersionedTextDocumentIdentifier.is(key)) {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    documentChanges: []\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.documentChanges) {\r\n                throw new Error('Workspace edit is not configured for document changes.');\r\n            }\r\n            var textDocument = key;\r\n            var result = this._textEditChanges[textDocument.uri];\r\n            if (!result) {\r\n                var edits = [];\r\n                var textDocumentEdit = {\r\n                    textDocument: textDocument,\r\n                    edits: edits\r\n                };\r\n                this._workspaceEdit.documentChanges.push(textDocumentEdit);\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[textDocument.uri] = result;\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (!this._workspaceEdit) {\r\n                this._workspaceEdit = {\r\n                    changes: Object.create(null)\r\n                };\r\n            }\r\n            if (!this._workspaceEdit.changes) {\r\n                throw new Error('Workspace edit is not configured for normal text edit changes.');\r\n            }\r\n            var result = this._textEditChanges[key];\r\n            if (!result) {\r\n                var edits = [];\r\n                this._workspaceEdit.changes[key] = edits;\r\n                result = new TextEditChangeImpl(edits);\r\n                this._textEditChanges[key] = result;\r\n            }\r\n            return result;\r\n        }\r\n    };\r\n    WorkspaceChange.prototype.createFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(CreateFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.renameFile = function (oldUri, newUri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(RenameFile.create(oldUri, newUri, options));\r\n    };\r\n    WorkspaceChange.prototype.deleteFile = function (uri, options) {\r\n        this.checkDocumentChanges();\r\n        this._workspaceEdit.documentChanges.push(DeleteFile.create(uri, options));\r\n    };\r\n    WorkspaceChange.prototype.checkDocumentChanges = function () {\r\n        if (!this._workspaceEdit || !this._workspaceEdit.documentChanges) {\r\n            throw new Error('Workspace edit is not configured for document changes.');\r\n        }\r\n    };\r\n    return WorkspaceChange;\r\n}());\r\nexport { WorkspaceChange };\r\n/**\r\n * The TextDocumentIdentifier namespace provides helper functions to work with\r\n * [TextDocumentIdentifier](#TextDocumentIdentifier) literals.\r\n */\r\nexport var TextDocumentIdentifier;\r\n(function (TextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new TextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     */\r\n    function create(uri) {\r\n        return { uri: uri };\r\n    }\r\n    TextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentIdentifier](#TextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri);\r\n    }\r\n    TextDocumentIdentifier.is = is;\r\n})(TextDocumentIdentifier || (TextDocumentIdentifier = {}));\r\n/**\r\n * The VersionedTextDocumentIdentifier namespace provides helper functions to work with\r\n * [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) literals.\r\n */\r\nexport var VersionedTextDocumentIdentifier;\r\n(function (VersionedTextDocumentIdentifier) {\r\n    /**\r\n     * Creates a new VersionedTextDocumentIdentifier literal.\r\n     * @param uri The document's uri.\r\n     * @param uri The document's text.\r\n     */\r\n    function create(uri, version) {\r\n        return { uri: uri, version: version };\r\n    }\r\n    VersionedTextDocumentIdentifier.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [VersionedTextDocumentIdentifier](#VersionedTextDocumentIdentifier) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (candidate.version === null || Is.number(candidate.version));\r\n    }\r\n    VersionedTextDocumentIdentifier.is = is;\r\n})(VersionedTextDocumentIdentifier || (VersionedTextDocumentIdentifier = {}));\r\n/**\r\n * The TextDocumentItem namespace provides helper functions to work with\r\n * [TextDocumentItem](#TextDocumentItem) literals.\r\n */\r\nexport var TextDocumentItem;\r\n(function (TextDocumentItem) {\r\n    /**\r\n     * Creates a new TextDocumentItem literal.\r\n     * @param uri The document's uri.\r\n     * @param languageId The document's language identifier.\r\n     * @param version The document's version number.\r\n     * @param text The document's text.\r\n     */\r\n    function create(uri, languageId, version, text) {\r\n        return { uri: uri, languageId: languageId, version: version, text: text };\r\n    }\r\n    TextDocumentItem.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [TextDocumentItem](#TextDocumentItem) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && Is.string(candidate.languageId) && Is.number(candidate.version) && Is.string(candidate.text);\r\n    }\r\n    TextDocumentItem.is = is;\r\n})(TextDocumentItem || (TextDocumentItem = {}));\r\n/**\r\n * Describes the content type that a client supports in various\r\n * result literals like `Hover`, `ParameterInfo` or `CompletionItem`.\r\n *\r\n * Please note that `MarkupKinds` must not start with a `$`. This kinds\r\n * are reserved for internal usage.\r\n */\r\nexport var MarkupKind;\r\n(function (MarkupKind) {\r\n    /**\r\n     * Plain text is supported as a content format\r\n     */\r\n    MarkupKind.PlainText = 'plaintext';\r\n    /**\r\n     * Markdown is supported as a content format\r\n     */\r\n    MarkupKind.Markdown = 'markdown';\r\n})(MarkupKind || (MarkupKind = {}));\r\n(function (MarkupKind) {\r\n    /**\r\n     * Checks whether the given value is a value of the [MarkupKind](#MarkupKind) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate === MarkupKind.PlainText || candidate === MarkupKind.Markdown;\r\n    }\r\n    MarkupKind.is = is;\r\n})(MarkupKind || (MarkupKind = {}));\r\nexport var MarkupContent;\r\n(function (MarkupContent) {\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkupContent](#MarkupContent) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.objectLiteral(value) && MarkupKind.is(candidate.kind) && Is.string(candidate.value);\r\n    }\r\n    MarkupContent.is = is;\r\n})(MarkupContent || (MarkupContent = {}));\r\n/**\r\n * The kind of a completion entry.\r\n */\r\nexport var CompletionItemKind;\r\n(function (CompletionItemKind) {\r\n    CompletionItemKind.Text = 1;\r\n    CompletionItemKind.Method = 2;\r\n    CompletionItemKind.Function = 3;\r\n    CompletionItemKind.Constructor = 4;\r\n    CompletionItemKind.Field = 5;\r\n    CompletionItemKind.Variable = 6;\r\n    CompletionItemKind.Class = 7;\r\n    CompletionItemKind.Interface = 8;\r\n    CompletionItemKind.Module = 9;\r\n    CompletionItemKind.Property = 10;\r\n    CompletionItemKind.Unit = 11;\r\n    CompletionItemKind.Value = 12;\r\n    CompletionItemKind.Enum = 13;\r\n    CompletionItemKind.Keyword = 14;\r\n    CompletionItemKind.Snippet = 15;\r\n    CompletionItemKind.Color = 16;\r\n    CompletionItemKind.File = 17;\r\n    CompletionItemKind.Reference = 18;\r\n    CompletionItemKind.Folder = 19;\r\n    CompletionItemKind.EnumMember = 20;\r\n    CompletionItemKind.Constant = 21;\r\n    CompletionItemKind.Struct = 22;\r\n    CompletionItemKind.Event = 23;\r\n    CompletionItemKind.Operator = 24;\r\n    CompletionItemKind.TypeParameter = 25;\r\n})(CompletionItemKind || (CompletionItemKind = {}));\r\n/**\r\n * Defines whether the insert text in a completion item should be interpreted as\r\n * plain text or a snippet.\r\n */\r\nexport var InsertTextFormat;\r\n(function (InsertTextFormat) {\r\n    /**\r\n     * The primary text to be inserted is treated as a plain string.\r\n     */\r\n    InsertTextFormat.PlainText = 1;\r\n    /**\r\n     * The primary text to be inserted is treated as a snippet.\r\n     *\r\n     * A snippet can define tab stops and placeholders with `$1`, `$2`\r\n     * and `${3:foo}`. `$0` defines the final tab stop, it defaults to\r\n     * the end of the snippet. Placeholders with equal identifiers are linked,\r\n     * that is typing in one will update others too.\r\n     *\r\n     * See also: https://github.com/Microsoft/vscode/blob/master/src/vs/editor/contrib/snippet/common/snippet.md\r\n     */\r\n    InsertTextFormat.Snippet = 2;\r\n})(InsertTextFormat || (InsertTextFormat = {}));\r\n/**\r\n * Completion item tags are extra annotations that tweak the rendering of a completion\r\n * item.\r\n *\r\n * @since 3.15.0\r\n */\r\nexport var CompletionItemTag;\r\n(function (CompletionItemTag) {\r\n    /**\r\n     * Render a completion as obsolete, usually using a strike-out.\r\n     */\r\n    CompletionItemTag.Deprecated = 1;\r\n})(CompletionItemTag || (CompletionItemTag = {}));\r\n/**\r\n * The CompletionItem namespace provides functions to deal with\r\n * completion items.\r\n */\r\nexport var CompletionItem;\r\n(function (CompletionItem) {\r\n    /**\r\n     * Create a completion item and seed it with a label.\r\n     * @param label The completion item's label\r\n     */\r\n    function create(label) {\r\n        return { label: label };\r\n    }\r\n    CompletionItem.create = create;\r\n})(CompletionItem || (CompletionItem = {}));\r\n/**\r\n * The CompletionList namespace provides functions to deal with\r\n * completion lists.\r\n */\r\nexport var CompletionList;\r\n(function (CompletionList) {\r\n    /**\r\n     * Creates a new completion list.\r\n     *\r\n     * @param items The completion items.\r\n     * @param isIncomplete The list is not complete.\r\n     */\r\n    function create(items, isIncomplete) {\r\n        return { items: items ? items : [], isIncomplete: !!isIncomplete };\r\n    }\r\n    CompletionList.create = create;\r\n})(CompletionList || (CompletionList = {}));\r\nexport var MarkedString;\r\n(function (MarkedString) {\r\n    /**\r\n     * Creates a marked string from plain text.\r\n     *\r\n     * @param plainText The plain text.\r\n     */\r\n    function fromPlainText(plainText) {\r\n        return plainText.replace(/[\\\\`*_{}[\\]()#+\\-.!]/g, '\\\\$&'); // escape markdown syntax tokens: http://daringfireball.net/projects/markdown/syntax#backslash\r\n    }\r\n    MarkedString.fromPlainText = fromPlainText;\r\n    /**\r\n     * Checks whether the given value conforms to the [MarkedString](#MarkedString) type.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.string(candidate) || (Is.objectLiteral(candidate) && Is.string(candidate.language) && Is.string(candidate.value));\r\n    }\r\n    MarkedString.is = is;\r\n})(MarkedString || (MarkedString = {}));\r\nexport var Hover;\r\n(function (Hover) {\r\n    /**\r\n     * Checks whether the given value conforms to the [Hover](#Hover) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return !!candidate && Is.objectLiteral(candidate) && (MarkupContent.is(candidate.contents) ||\r\n            MarkedString.is(candidate.contents) ||\r\n            Is.typedArray(candidate.contents, MarkedString.is)) && (value.range === void 0 || Range.is(value.range));\r\n    }\r\n    Hover.is = is;\r\n})(Hover || (Hover = {}));\r\n/**\r\n * The ParameterInformation namespace provides helper functions to work with\r\n * [ParameterInformation](#ParameterInformation) literals.\r\n */\r\nexport var ParameterInformation;\r\n(function (ParameterInformation) {\r\n    /**\r\n     * Creates a new parameter information literal.\r\n     *\r\n     * @param label A label string.\r\n     * @param documentation A doc string.\r\n     */\r\n    function create(label, documentation) {\r\n        return documentation ? { label: label, documentation: documentation } : { label: label };\r\n    }\r\n    ParameterInformation.create = create;\r\n})(ParameterInformation || (ParameterInformation = {}));\r\n/**\r\n * The SignatureInformation namespace provides helper functions to work with\r\n * [SignatureInformation](#SignatureInformation) literals.\r\n */\r\nexport var SignatureInformation;\r\n(function (SignatureInformation) {\r\n    function create(label, documentation) {\r\n        var parameters = [];\r\n        for (var _i = 2; _i < arguments.length; _i++) {\r\n            parameters[_i - 2] = arguments[_i];\r\n        }\r\n        var result = { label: label };\r\n        if (Is.defined(documentation)) {\r\n            result.documentation = documentation;\r\n        }\r\n        if (Is.defined(parameters)) {\r\n            result.parameters = parameters;\r\n        }\r\n        else {\r\n            result.parameters = [];\r\n        }\r\n        return result;\r\n    }\r\n    SignatureInformation.create = create;\r\n})(SignatureInformation || (SignatureInformation = {}));\r\n/**\r\n * A document highlight kind.\r\n */\r\nexport var DocumentHighlightKind;\r\n(function (DocumentHighlightKind) {\r\n    /**\r\n     * A textual occurrence.\r\n     */\r\n    DocumentHighlightKind.Text = 1;\r\n    /**\r\n     * Read-access of a symbol, like reading a variable.\r\n     */\r\n    DocumentHighlightKind.Read = 2;\r\n    /**\r\n     * Write-access of a symbol, like writing to a variable.\r\n     */\r\n    DocumentHighlightKind.Write = 3;\r\n})(DocumentHighlightKind || (DocumentHighlightKind = {}));\r\n/**\r\n * DocumentHighlight namespace to provide helper functions to work with\r\n * [DocumentHighlight](#DocumentHighlight) literals.\r\n */\r\nexport var DocumentHighlight;\r\n(function (DocumentHighlight) {\r\n    /**\r\n     * Create a DocumentHighlight object.\r\n     * @param range The range the highlight applies to.\r\n     */\r\n    function create(range, kind) {\r\n        var result = { range: range };\r\n        if (Is.number(kind)) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentHighlight.create = create;\r\n})(DocumentHighlight || (DocumentHighlight = {}));\r\n/**\r\n * A symbol kind.\r\n */\r\nexport var SymbolKind;\r\n(function (SymbolKind) {\r\n    SymbolKind.File = 1;\r\n    SymbolKind.Module = 2;\r\n    SymbolKind.Namespace = 3;\r\n    SymbolKind.Package = 4;\r\n    SymbolKind.Class = 5;\r\n    SymbolKind.Method = 6;\r\n    SymbolKind.Property = 7;\r\n    SymbolKind.Field = 8;\r\n    SymbolKind.Constructor = 9;\r\n    SymbolKind.Enum = 10;\r\n    SymbolKind.Interface = 11;\r\n    SymbolKind.Function = 12;\r\n    SymbolKind.Variable = 13;\r\n    SymbolKind.Constant = 14;\r\n    SymbolKind.String = 15;\r\n    SymbolKind.Number = 16;\r\n    SymbolKind.Boolean = 17;\r\n    SymbolKind.Array = 18;\r\n    SymbolKind.Object = 19;\r\n    SymbolKind.Key = 20;\r\n    SymbolKind.Null = 21;\r\n    SymbolKind.EnumMember = 22;\r\n    SymbolKind.Struct = 23;\r\n    SymbolKind.Event = 24;\r\n    SymbolKind.Operator = 25;\r\n    SymbolKind.TypeParameter = 26;\r\n})(SymbolKind || (SymbolKind = {}));\r\n/**\r\n * Symbol tags are extra annotations that tweak the rendering of a symbol.\r\n * @since 3.15\r\n */\r\nexport var SymbolTag;\r\n(function (SymbolTag) {\r\n    /**\r\n     * Render a symbol as obsolete, usually using a strike-out.\r\n     */\r\n    SymbolTag.Deprecated = 1;\r\n})(SymbolTag || (SymbolTag = {}));\r\nexport var SymbolInformation;\r\n(function (SymbolInformation) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the location of the symbol.\r\n     * @param uri The resource of the location of symbol, defaults to the current document.\r\n     * @param containerName The name of the symbol containing the symbol.\r\n     */\r\n    function create(name, kind, range, uri, containerName) {\r\n        var result = {\r\n            name: name,\r\n            kind: kind,\r\n            location: { uri: uri, range: range }\r\n        };\r\n        if (containerName) {\r\n            result.containerName = containerName;\r\n        }\r\n        return result;\r\n    }\r\n    SymbolInformation.create = create;\r\n})(SymbolInformation || (SymbolInformation = {}));\r\nexport var DocumentSymbol;\r\n(function (DocumentSymbol) {\r\n    /**\r\n     * Creates a new symbol information literal.\r\n     *\r\n     * @param name The name of the symbol.\r\n     * @param detail The detail of the symbol.\r\n     * @param kind The kind of the symbol.\r\n     * @param range The range of the symbol.\r\n     * @param selectionRange The selectionRange of the symbol.\r\n     * @param children Children of the symbol.\r\n     */\r\n    function create(name, detail, kind, range, selectionRange, children) {\r\n        var result = {\r\n            name: name,\r\n            detail: detail,\r\n            kind: kind,\r\n            range: range,\r\n            selectionRange: selectionRange\r\n        };\r\n        if (children !== void 0) {\r\n            result.children = children;\r\n        }\r\n        return result;\r\n    }\r\n    DocumentSymbol.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentSymbol](#DocumentSymbol) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate &&\r\n            Is.string(candidate.name) && Is.number(candidate.kind) &&\r\n            Range.is(candidate.range) && Range.is(candidate.selectionRange) &&\r\n            (candidate.detail === void 0 || Is.string(candidate.detail)) &&\r\n            (candidate.deprecated === void 0 || Is.boolean(candidate.deprecated)) &&\r\n            (candidate.children === void 0 || Array.isArray(candidate.children));\r\n    }\r\n    DocumentSymbol.is = is;\r\n})(DocumentSymbol || (DocumentSymbol = {}));\r\n/**\r\n * A set of predefined code action kinds\r\n */\r\nexport var CodeActionKind;\r\n(function (CodeActionKind) {\r\n    /**\r\n     * Empty kind.\r\n     */\r\n    CodeActionKind.Empty = '';\r\n    /**\r\n     * Base kind for quickfix actions: 'quickfix'\r\n     */\r\n    CodeActionKind.QuickFix = 'quickfix';\r\n    /**\r\n     * Base kind for refactoring actions: 'refactor'\r\n     */\r\n    CodeActionKind.Refactor = 'refactor';\r\n    /**\r\n     * Base kind for refactoring extraction actions: 'refactor.extract'\r\n     *\r\n     * Example extract actions:\r\n     *\r\n     * - Extract method\r\n     * - Extract function\r\n     * - Extract variable\r\n     * - Extract interface from class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorExtract = 'refactor.extract';\r\n    /**\r\n     * Base kind for refactoring inline actions: 'refactor.inline'\r\n     *\r\n     * Example inline actions:\r\n     *\r\n     * - Inline function\r\n     * - Inline variable\r\n     * - Inline constant\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorInline = 'refactor.inline';\r\n    /**\r\n     * Base kind for refactoring rewrite actions: 'refactor.rewrite'\r\n     *\r\n     * Example rewrite actions:\r\n     *\r\n     * - Convert JavaScript function to class\r\n     * - Add or remove parameter\r\n     * - Encapsulate field\r\n     * - Make method static\r\n     * - Move method to base class\r\n     * - ...\r\n     */\r\n    CodeActionKind.RefactorRewrite = 'refactor.rewrite';\r\n    /**\r\n     * Base kind for source actions: `source`\r\n     *\r\n     * Source code actions apply to the entire file.\r\n     */\r\n    CodeActionKind.Source = 'source';\r\n    /**\r\n     * Base kind for an organize imports source action: `source.organizeImports`\r\n     */\r\n    CodeActionKind.SourceOrganizeImports = 'source.organizeImports';\r\n    /**\r\n     * Base kind for auto-fix source actions: `source.fixAll`.\r\n     *\r\n     * Fix all actions automatically fix errors that have a clear fix that do not require user input.\r\n     * They should not suppress errors or perform unsafe fixes such as generating new types or classes.\r\n     *\r\n     * @since 3.15.0\r\n     */\r\n    CodeActionKind.SourceFixAll = 'source.fixAll';\r\n})(CodeActionKind || (CodeActionKind = {}));\r\n/**\r\n * The CodeActionContext namespace provides helper functions to work with\r\n * [CodeActionContext](#CodeActionContext) literals.\r\n */\r\nexport var CodeActionContext;\r\n(function (CodeActionContext) {\r\n    /**\r\n     * Creates a new CodeActionContext literal.\r\n     */\r\n    function create(diagnostics, only) {\r\n        var result = { diagnostics: diagnostics };\r\n        if (only !== void 0 && only !== null) {\r\n            result.only = only;\r\n        }\r\n        return result;\r\n    }\r\n    CodeActionContext.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeActionContext](#CodeActionContext) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.typedArray(candidate.diagnostics, Diagnostic.is) && (candidate.only === void 0 || Is.typedArray(candidate.only, Is.string));\r\n    }\r\n    CodeActionContext.is = is;\r\n})(CodeActionContext || (CodeActionContext = {}));\r\nexport var CodeAction;\r\n(function (CodeAction) {\r\n    function create(title, commandOrEdit, kind) {\r\n        var result = { title: title };\r\n        if (Command.is(commandOrEdit)) {\r\n            result.command = commandOrEdit;\r\n        }\r\n        else {\r\n            result.edit = commandOrEdit;\r\n        }\r\n        if (kind !== void 0) {\r\n            result.kind = kind;\r\n        }\r\n        return result;\r\n    }\r\n    CodeAction.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate && Is.string(candidate.title) &&\r\n            (candidate.diagnostics === void 0 || Is.typedArray(candidate.diagnostics, Diagnostic.is)) &&\r\n            (candidate.kind === void 0 || Is.string(candidate.kind)) &&\r\n            (candidate.edit !== void 0 || candidate.command !== void 0) &&\r\n            (candidate.command === void 0 || Command.is(candidate.command)) &&\r\n            (candidate.isPreferred === void 0 || Is.boolean(candidate.isPreferred)) &&\r\n            (candidate.edit === void 0 || WorkspaceEdit.is(candidate.edit));\r\n    }\r\n    CodeAction.is = is;\r\n})(CodeAction || (CodeAction = {}));\r\n/**\r\n * The CodeLens namespace provides helper functions to work with\r\n * [CodeLens](#CodeLens) literals.\r\n */\r\nexport var CodeLens;\r\n(function (CodeLens) {\r\n    /**\r\n     * Creates a new CodeLens literal.\r\n     */\r\n    function create(range, data) {\r\n        var result = { range: range };\r\n        if (Is.defined(data)) {\r\n            result.data = data;\r\n        }\r\n        return result;\r\n    }\r\n    CodeLens.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [CodeLens](#CodeLens) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.command) || Command.is(candidate.command));\r\n    }\r\n    CodeLens.is = is;\r\n})(CodeLens || (CodeLens = {}));\r\n/**\r\n * The FormattingOptions namespace provides helper functions to work with\r\n * [FormattingOptions](#FormattingOptions) literals.\r\n */\r\nexport var FormattingOptions;\r\n(function (FormattingOptions) {\r\n    /**\r\n     * Creates a new FormattingOptions literal.\r\n     */\r\n    function create(tabSize, insertSpaces) {\r\n        return { tabSize: tabSize, insertSpaces: insertSpaces };\r\n    }\r\n    FormattingOptions.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [FormattingOptions](#FormattingOptions) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.number(candidate.tabSize) && Is.boolean(candidate.insertSpaces);\r\n    }\r\n    FormattingOptions.is = is;\r\n})(FormattingOptions || (FormattingOptions = {}));\r\n/**\r\n * The DocumentLink namespace provides helper functions to work with\r\n * [DocumentLink](#DocumentLink) literals.\r\n */\r\nexport var DocumentLink;\r\n(function (DocumentLink) {\r\n    /**\r\n     * Creates a new DocumentLink literal.\r\n     */\r\n    function create(range, target, data) {\r\n        return { range: range, target: target, data: data };\r\n    }\r\n    DocumentLink.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [DocumentLink](#DocumentLink) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Range.is(candidate.range) && (Is.undefined(candidate.target) || Is.string(candidate.target));\r\n    }\r\n    DocumentLink.is = is;\r\n})(DocumentLink || (DocumentLink = {}));\r\n/**\r\n * The SelectionRange namespace provides helper function to work with\r\n * SelectionRange literals.\r\n */\r\nexport var SelectionRange;\r\n(function (SelectionRange) {\r\n    /**\r\n     * Creates a new SelectionRange\r\n     * @param range the range.\r\n     * @param parent an optional parent.\r\n     */\r\n    function create(range, parent) {\r\n        return { range: range, parent: parent };\r\n    }\r\n    SelectionRange.create = create;\r\n    function is(value) {\r\n        var candidate = value;\r\n        return candidate !== undefined && Range.is(candidate.range) && (candidate.parent === undefined || SelectionRange.is(candidate.parent));\r\n    }\r\n    SelectionRange.is = is;\r\n})(SelectionRange || (SelectionRange = {}));\r\nexport var EOL = ['\\n', '\\r\\n', '\\r'];\r\n/**\r\n * @deprecated Use the text document from the new vscode-languageserver-textdocument package.\r\n */\r\nexport var TextDocument;\r\n(function (TextDocument) {\r\n    /**\r\n     * Creates a new ITextDocument literal from the given uri and content.\r\n     * @param uri The document's uri.\r\n     * @param languageId  The document's language Id.\r\n     * @param content The document's content.\r\n     */\r\n    function create(uri, languageId, version, content) {\r\n        return new FullTextDocument(uri, languageId, version, content);\r\n    }\r\n    TextDocument.create = create;\r\n    /**\r\n     * Checks whether the given literal conforms to the [ITextDocument](#ITextDocument) interface.\r\n     */\r\n    function is(value) {\r\n        var candidate = value;\r\n        return Is.defined(candidate) && Is.string(candidate.uri) && (Is.undefined(candidate.languageId) || Is.string(candidate.languageId)) && Is.number(candidate.lineCount)\r\n            && Is.func(candidate.getText) && Is.func(candidate.positionAt) && Is.func(candidate.offsetAt) ? true : false;\r\n    }\r\n    TextDocument.is = is;\r\n    function applyEdits(document, edits) {\r\n        var text = document.getText();\r\n        var sortedEdits = mergeSort(edits, function (a, b) {\r\n            var diff = a.range.start.line - b.range.start.line;\r\n            if (diff === 0) {\r\n                return a.range.start.character - b.range.start.character;\r\n            }\r\n            return diff;\r\n        });\r\n        var lastModifiedOffset = text.length;\r\n        for (var i = sortedEdits.length - 1; i >= 0; i--) {\r\n            var e = sortedEdits[i];\r\n            var startOffset = document.offsetAt(e.range.start);\r\n            var endOffset = document.offsetAt(e.range.end);\r\n            if (endOffset <= lastModifiedOffset) {\r\n                text = text.substring(0, startOffset) + e.newText + text.substring(endOffset, text.length);\r\n            }\r\n            else {\r\n                throw new Error('Overlapping edit');\r\n            }\r\n            lastModifiedOffset = startOffset;\r\n        }\r\n        return text;\r\n    }\r\n    TextDocument.applyEdits = applyEdits;\r\n    function mergeSort(data, compare) {\r\n        if (data.length <= 1) {\r\n            // sorted\r\n            return data;\r\n        }\r\n        var p = (data.length / 2) | 0;\r\n        var left = data.slice(0, p);\r\n        var right = data.slice(p);\r\n        mergeSort(left, compare);\r\n        mergeSort(right, compare);\r\n        var leftIdx = 0;\r\n        var rightIdx = 0;\r\n        var i = 0;\r\n        while (leftIdx < left.length && rightIdx < right.length) {\r\n            var ret = compare(left[leftIdx], right[rightIdx]);\r\n            if (ret <= 0) {\r\n                // smaller_equal -> take left to preserve order\r\n                data[i++] = left[leftIdx++];\r\n            }\r\n            else {\r\n                // greater -> take right\r\n                data[i++] = right[rightIdx++];\r\n            }\r\n        }\r\n        while (leftIdx < left.length) {\r\n            data[i++] = left[leftIdx++];\r\n        }\r\n        while (rightIdx < right.length) {\r\n            data[i++] = right[rightIdx++];\r\n        }\r\n        return data;\r\n    }\r\n})(TextDocument || (TextDocument = {}));\r\nvar FullTextDocument = /** @class */ (function () {\r\n    function FullTextDocument(uri, languageId, version, content) {\r\n        this._uri = uri;\r\n        this._languageId = languageId;\r\n        this._version = version;\r\n        this._content = content;\r\n        this._lineOffsets = undefined;\r\n    }\r\n    Object.defineProperty(FullTextDocument.prototype, \"uri\", {\r\n        get: function () {\r\n            return this._uri;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"languageId\", {\r\n        get: function () {\r\n            return this._languageId;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    Object.defineProperty(FullTextDocument.prototype, \"version\", {\r\n        get: function () {\r\n            return this._version;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    FullTextDocument.prototype.getText = function (range) {\r\n        if (range) {\r\n            var start = this.offsetAt(range.start);\r\n            var end = this.offsetAt(range.end);\r\n            return this._content.substring(start, end);\r\n        }\r\n        return this._content;\r\n    };\r\n    FullTextDocument.prototype.update = function (event, version) {\r\n        this._content = event.text;\r\n        this._version = version;\r\n        this._lineOffsets = undefined;\r\n    };\r\n    FullTextDocument.prototype.getLineOffsets = function () {\r\n        if (this._lineOffsets === undefined) {\r\n            var lineOffsets = [];\r\n            var text = this._content;\r\n            var isLineStart = true;\r\n            for (var i = 0; i < text.length; i++) {\r\n                if (isLineStart) {\r\n                    lineOffsets.push(i);\r\n                    isLineStart = false;\r\n                }\r\n                var ch = text.charAt(i);\r\n                isLineStart = (ch === '\\r' || ch === '\\n');\r\n                if (ch === '\\r' && i + 1 < text.length && text.charAt(i + 1) === '\\n') {\r\n                    i++;\r\n                }\r\n            }\r\n            if (isLineStart && text.length > 0) {\r\n                lineOffsets.push(text.length);\r\n            }\r\n            this._lineOffsets = lineOffsets;\r\n        }\r\n        return this._lineOffsets;\r\n    };\r\n    FullTextDocument.prototype.positionAt = function (offset) {\r\n        offset = Math.max(Math.min(offset, this._content.length), 0);\r\n        var lineOffsets = this.getLineOffsets();\r\n        var low = 0, high = lineOffsets.length;\r\n        if (high === 0) {\r\n            return Position.create(0, offset);\r\n        }\r\n        while (low < high) {\r\n            var mid = Math.floor((low + high) / 2);\r\n            if (lineOffsets[mid] > offset) {\r\n                high = mid;\r\n            }\r\n            else {\r\n                low = mid + 1;\r\n            }\r\n        }\r\n        // low is the least x for which the line offset is larger than the current offset\r\n        // or array.length if no line offset is larger than the current offset\r\n        var line = low - 1;\r\n        return Position.create(line, offset - lineOffsets[line]);\r\n    };\r\n    FullTextDocument.prototype.offsetAt = function (position) {\r\n        var lineOffsets = this.getLineOffsets();\r\n        if (position.line >= lineOffsets.length) {\r\n            return this._content.length;\r\n        }\r\n        else if (position.line < 0) {\r\n            return 0;\r\n        }\r\n        var lineOffset = lineOffsets[position.line];\r\n        var nextLineOffset = (position.line + 1 < lineOffsets.length) ? lineOffsets[position.line + 1] : this._content.length;\r\n        return Math.max(Math.min(lineOffset + position.character, nextLineOffset), lineOffset);\r\n    };\r\n    Object.defineProperty(FullTextDocument.prototype, \"lineCount\", {\r\n        get: function () {\r\n            return this.getLineOffsets().length;\r\n        },\r\n        enumerable: true,\r\n        configurable: true\r\n    });\r\n    return FullTextDocument;\r\n}());\r\nvar Is;\r\n(function (Is) {\r\n    var toString = Object.prototype.toString;\r\n    function defined(value) {\r\n        return typeof value !== 'undefined';\r\n    }\r\n    Is.defined = defined;\r\n    function undefined(value) {\r\n        return typeof value === 'undefined';\r\n    }\r\n    Is.undefined = undefined;\r\n    function boolean(value) {\r\n        return value === true || value === false;\r\n    }\r\n    Is.boolean = boolean;\r\n    function string(value) {\r\n        return toString.call(value) === '[object String]';\r\n    }\r\n    Is.string = string;\r\n    function number(value) {\r\n        return toString.call(value) === '[object Number]';\r\n    }\r\n    Is.number = number;\r\n    function func(value) {\r\n        return toString.call(value) === '[object Function]';\r\n    }\r\n    Is.func = func;\r\n    function objectLiteral(value) {\r\n        // Strictly speaking class instances pass this check as well. Since the LSP\r\n        // doesn't use classes we ignore this for now. If we do we need to add something\r\n        // like this: `Object.getPrototypeOf(Object.getPrototypeOf(x)) === null`\r\n        return value !== null && typeof value === 'object';\r\n    }\r\n    Is.objectLiteral = objectLiteral;\r\n    function typedArray(value, check) {\r\n        return Array.isArray(value) && value.every(check);\r\n    }\r\n    Is.typedArray = typedArray;\r\n})(Is || (Is = {}));\r\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n'use strict';\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar _a;\nvar isWindows;\nif (typeof process === 'object') {\n    isWindows = process.platform === 'win32';\n}\nelse if (typeof navigator === 'object') {\n    var userAgent = navigator.userAgent;\n    isWindows = userAgent.indexOf('Windows') >= 0;\n}\nfunction isHighSurrogate(charCode) {\n    return (0xD800 <= charCode && charCode <= 0xDBFF);\n}\nfunction isLowSurrogate(charCode) {\n    return (0xDC00 <= charCode && charCode <= 0xDFFF);\n}\nfunction isLowerAsciiHex(code) {\n    return code >= 97 /* a */ && code <= 102 /* f */;\n}\nfunction isLowerAsciiLetter(code) {\n    return code >= 97 /* a */ && code <= 122 /* z */;\n}\nfunction isUpperAsciiLetter(code) {\n    return code >= 65 /* A */ && code <= 90 /* Z */;\n}\nfunction isAsciiLetter(code) {\n    return isLowerAsciiLetter(code) || isUpperAsciiLetter(code);\n}\n//#endregion\nvar _schemePattern = /^\\w[\\w\\d+.-]*$/;\nvar _singleSlashStart = /^\\//;\nvar _doubleSlashStart = /^\\/\\//;\nfunction _validateUri(ret, _strict) {\n    // scheme, must be set\n    if (!ret.scheme && _strict) {\n        throw new Error(\"[UriError]: Scheme is missing: {scheme: \\\"\\\", authority: \\\"\" + ret.authority + \"\\\", path: \\\"\" + ret.path + \"\\\", query: \\\"\" + ret.query + \"\\\", fragment: \\\"\" + ret.fragment + \"\\\"}\");\n    }\n    // scheme, https://tools.ietf.org/html/rfc3986#section-3.1\n    // ALPHA *( ALPHA / DIGIT / \"+\" / \"-\" / \".\" )\n    if (ret.scheme && !_schemePattern.test(ret.scheme)) {\n        throw new Error('[UriError]: Scheme contains illegal characters.');\n    }\n    // path, http://tools.ietf.org/html/rfc3986#section-3.3\n    // If a URI contains an authority component, then the path component\n    // must either be empty or begin with a slash (\"/\") character.  If a URI\n    // does not contain an authority component, then the path cannot begin\n    // with two slash characters (\"//\").\n    if (ret.path) {\n        if (ret.authority) {\n            if (!_singleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash (\"/\") character');\n            }\n        }\n        else {\n            if (_doubleSlashStart.test(ret.path)) {\n                throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters (\"//\")');\n            }\n        }\n    }\n}\n// for a while we allowed uris *without* schemes and this is the migration\n// for them, e.g. an uri without scheme and without strict-mode warns and falls\n// back to the file-scheme. that should cause the least carnage and still be a\n// clear warning\nfunction _schemeFix(scheme, _strict) {\n    if (!scheme && !_strict) {\n        return 'file';\n    }\n    return scheme;\n}\n// implements a bit of https://tools.ietf.org/html/rfc3986#section-5\nfunction _referenceResolution(scheme, path) {\n    // the slash-character is our 'default base' as we don't\n    // support constructing URIs relative to other URIs. This\n    // also means that we alter and potentially break paths.\n    // see https://tools.ietf.org/html/rfc3986#section-5.1.4\n    switch (scheme) {\n        case 'https':\n        case 'http':\n        case 'file':\n            if (!path) {\n                path = _slash;\n            }\n            else if (path[0] !== _slash) {\n                path = _slash + path;\n            }\n            break;\n    }\n    return path;\n}\nvar _empty = '';\nvar _slash = '/';\nvar _regexp = /^(([^:/?#]+?):)?(\\/\\/([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?/;\n/**\n * Uniform Resource Identifier (URI) http://tools.ietf.org/html/rfc3986.\n * This class is a simple parser which creates the basic component parts\n * (http://tools.ietf.org/html/rfc3986#section-3) with minimal validation\n * and encoding.\n *\n * ```txt\n *       foo://example.com:8042/over/there?name=ferret#nose\n *       \\_/   \\______________/\\_________/ \\_________/ \\__/\n *        |           |            |            |        |\n *     scheme     authority       path        query   fragment\n *        |   _____________________|__\n *       / \\ /                        \\\n *       urn:example:animal:ferret:nose\n * ```\n */\nvar URI = /** @class */ (function () {\n    /**\n     * @internal\n     */\n    function URI(schemeOrData, authority, path, query, fragment, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        if (typeof schemeOrData === 'object') {\n            this.scheme = schemeOrData.scheme || _empty;\n            this.authority = schemeOrData.authority || _empty;\n            this.path = schemeOrData.path || _empty;\n            this.query = schemeOrData.query || _empty;\n            this.fragment = schemeOrData.fragment || _empty;\n            // no validation because it's this URI\n            // that creates uri components.\n            // _validateUri(this);\n        }\n        else {\n            this.scheme = _schemeFix(schemeOrData, _strict);\n            this.authority = authority || _empty;\n            this.path = _referenceResolution(this.scheme, path || _empty);\n            this.query = query || _empty;\n            this.fragment = fragment || _empty;\n            _validateUri(this, _strict);\n        }\n    }\n    URI.isUri = function (thing) {\n        if (thing instanceof URI) {\n            return true;\n        }\n        if (!thing) {\n            return false;\n        }\n        return typeof thing.authority === 'string'\n            && typeof thing.fragment === 'string'\n            && typeof thing.path === 'string'\n            && typeof thing.query === 'string'\n            && typeof thing.scheme === 'string'\n            && typeof thing.fsPath === 'function'\n            && typeof thing.with === 'function'\n            && typeof thing.toString === 'function';\n    };\n    Object.defineProperty(URI.prototype, \"fsPath\", {\n        // ---- filesystem path -----------------------\n        /**\n         * Returns a string representing the corresponding file system path of this URI.\n         * Will handle UNC paths, normalizes windows drive letters to lower-case, and uses the\n         * platform specific path separator.\n         *\n         * * Will *not* validate the path for invalid characters and semantics.\n         * * Will *not* look at the scheme of this URI.\n         * * The result shall *not* be used for display purposes but for accessing a file on disk.\n         *\n         *\n         * The *difference* to `URI#path` is the use of the platform specific separator and the handling\n         * of UNC paths. See the below sample of a file-uri with an authority (UNC path).\n         *\n         * ```ts\n            const u = URI.parse('file://server/c$/folder/file.txt')\n            u.authority === 'server'\n            u.path === '/shares/c$/file.txt'\n            u.fsPath === '\\\\server\\c$\\folder\\file.txt'\n        ```\n         *\n         * Using `URI#path` to read a file (using fs-apis) would not be enough because parts of the path,\n         * namely the server name, would be missing. Therefore `URI#fsPath` exists - it's sugar to ease working\n         * with URIs that represent files on disk (`file` scheme).\n         */\n        get: function () {\n            // if (this.scheme !== 'file') {\n            // \tconsole.warn(`[UriError] calling fsPath with scheme ${this.scheme}`);\n            // }\n            return uriToFsPath(this, false);\n        },\n        enumerable: true,\n        configurable: true\n    });\n    // ---- modify to new -------------------------\n    URI.prototype.with = function (change) {\n        if (!change) {\n            return this;\n        }\n        var scheme = change.scheme, authority = change.authority, path = change.path, query = change.query, fragment = change.fragment;\n        if (scheme === undefined) {\n            scheme = this.scheme;\n        }\n        else if (scheme === null) {\n            scheme = _empty;\n        }\n        if (authority === undefined) {\n            authority = this.authority;\n        }\n        else if (authority === null) {\n            authority = _empty;\n        }\n        if (path === undefined) {\n            path = this.path;\n        }\n        else if (path === null) {\n            path = _empty;\n        }\n        if (query === undefined) {\n            query = this.query;\n        }\n        else if (query === null) {\n            query = _empty;\n        }\n        if (fragment === undefined) {\n            fragment = this.fragment;\n        }\n        else if (fragment === null) {\n            fragment = _empty;\n        }\n        if (scheme === this.scheme\n            && authority === this.authority\n            && path === this.path\n            && query === this.query\n            && fragment === this.fragment) {\n            return this;\n        }\n        return new _URI(scheme, authority, path, query, fragment);\n    };\n    // ---- parse & validate ------------------------\n    /**\n     * Creates a new URI from a string, e.g. `http://www.msft.com/some/path`,\n     * `file:///usr/home`, or `scheme:with/path`.\n     *\n     * @param value A string which represents an URI (see `URI#toString`).\n     */\n    URI.parse = function (value, _strict) {\n        if (_strict === void 0) { _strict = false; }\n        var match = _regexp.exec(value);\n        if (!match) {\n            return new _URI(_empty, _empty, _empty, _empty, _empty);\n        }\n        return new _URI(match[2] || _empty, percentDecode(match[4] || _empty), percentDecode(match[5] || _empty), percentDecode(match[7] || _empty), percentDecode(match[9] || _empty), _strict);\n    };\n    /**\n     * Creates a new URI from a file system path, e.g. `c:\\my\\files`,\n     * `/usr/home`, or `\\\\server\\share\\some\\path`.\n     *\n     * The *difference* between `URI#parse` and `URI#file` is that the latter treats the argument\n     * as path, not as stringified-uri. E.g. `URI.file(path)` is **not the same as**\n     * `URI.parse('file://' + path)` because the path might contain characters that are\n     * interpreted (# and ?). See the following sample:\n     * ```ts\n    const good = URI.file('/coding/c#/project1');\n    good.scheme === 'file';\n    good.path === '/coding/c#/project1';\n    good.fragment === '';\n    const bad = URI.parse('file://' + '/coding/c#/project1');\n    bad.scheme === 'file';\n    bad.path === '/coding/c'; // path is now broken\n    bad.fragment === '/project1';\n    ```\n     *\n     * @param path A file system path (see `URI#fsPath`)\n     */\n    URI.file = function (path) {\n        var authority = _empty;\n        // normalize to fwd-slashes on windows,\n        // on other systems bwd-slashes are valid\n        // filename character, eg /f\\oo/ba\\r.txt\n        if (isWindows) {\n            path = path.replace(/\\\\/g, _slash);\n        }\n        // check for authority as used in UNC shares\n        // or use the path as given\n        if (path[0] === _slash && path[1] === _slash) {\n            var idx = path.indexOf(_slash, 2);\n            if (idx === -1) {\n                authority = path.substring(2);\n                path = _slash;\n            }\n            else {\n                authority = path.substring(2, idx);\n                path = path.substring(idx) || _slash;\n            }\n        }\n        return new _URI('file', authority, path, _empty, _empty);\n    };\n    URI.from = function (components) {\n        return new _URI(components.scheme, components.authority, components.path, components.query, components.fragment);\n    };\n    // /**\n    //  * Join a URI path with path fragments and normalizes the resulting path.\n    //  *\n    //  * @param uri The input URI.\n    //  * @param pathFragment The path fragment to add to the URI path.\n    //  * @returns The resulting URI.\n    //  */\n    // static joinPath(uri: URI, ...pathFragment: string[]): URI {\n    // \tif (!uri.path) {\n    // \t\tthrow new Error(`[UriError]: cannot call joinPaths on URI without path`);\n    // \t}\n    // \tlet newPath: string;\n    // \tif (isWindows && uri.scheme === 'file') {\n    // \t\tnewPath = URI.file(paths.win32.join(uriToFsPath(uri, true), ...pathFragment)).path;\n    // \t} else {\n    // \t\tnewPath = paths.posix.join(uri.path, ...pathFragment);\n    // \t}\n    // \treturn uri.with({ path: newPath });\n    // }\n    // ---- printing/externalize ---------------------------\n    /**\n     * Creates a string representation for this URI. It's guaranteed that calling\n     * `URI.parse` with the result of this function creates an URI which is equal\n     * to this URI.\n     *\n     * * The result shall *not* be used for display purposes but for externalization or transport.\n     * * The result will be encoded using the percentage encoding and encoding happens mostly\n     * ignore the scheme-specific encoding rules.\n     *\n     * @param skipEncoding Do not encode the result, default is `false`\n     */\n    URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        return _asFormatted(this, skipEncoding);\n    };\n    URI.prototype.toJSON = function () {\n        return this;\n    };\n    URI.revive = function (data) {\n        if (!data) {\n            return data;\n        }\n        else if (data instanceof URI) {\n            return data;\n        }\n        else {\n            var result = new _URI(data);\n            result._formatted = data.external;\n            result._fsPath = data._sep === _pathSepMarker ? data.fsPath : null;\n            return result;\n        }\n    };\n    return URI;\n}());\nexport { URI };\nvar _pathSepMarker = isWindows ? 1 : undefined;\n// eslint-disable-next-line @typescript-eslint/class-name-casing\nvar _URI = /** @class */ (function (_super) {\n    __extends(_URI, _super);\n    function _URI() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._formatted = null;\n        _this._fsPath = null;\n        return _this;\n    }\n    Object.defineProperty(_URI.prototype, \"fsPath\", {\n        get: function () {\n            if (!this._fsPath) {\n                this._fsPath = uriToFsPath(this, false);\n            }\n            return this._fsPath;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    _URI.prototype.toString = function (skipEncoding) {\n        if (skipEncoding === void 0) { skipEncoding = false; }\n        if (!skipEncoding) {\n            if (!this._formatted) {\n                this._formatted = _asFormatted(this, false);\n            }\n            return this._formatted;\n        }\n        else {\n            // we don't cache that\n            return _asFormatted(this, true);\n        }\n    };\n    _URI.prototype.toJSON = function () {\n        var res = {\n            $mid: 1\n        };\n        // cached state\n        if (this._fsPath) {\n            res.fsPath = this._fsPath;\n            res._sep = _pathSepMarker;\n        }\n        if (this._formatted) {\n            res.external = this._formatted;\n        }\n        // uri components\n        if (this.path) {\n            res.path = this.path;\n        }\n        if (this.scheme) {\n            res.scheme = this.scheme;\n        }\n        if (this.authority) {\n            res.authority = this.authority;\n        }\n        if (this.query) {\n            res.query = this.query;\n        }\n        if (this.fragment) {\n            res.fragment = this.fragment;\n        }\n        return res;\n    };\n    return _URI;\n}(URI));\n// reserved characters: https://tools.ietf.org/html/rfc3986#section-2.2\nvar encodeTable = (_a = {},\n    _a[58 /* Colon */] = '%3A',\n    _a[47 /* Slash */] = '%2F',\n    _a[63 /* QuestionMark */] = '%3F',\n    _a[35 /* Hash */] = '%23',\n    _a[91 /* OpenSquareBracket */] = '%5B',\n    _a[93 /* CloseSquareBracket */] = '%5D',\n    _a[64 /* AtSign */] = '%40',\n    _a[33 /* ExclamationMark */] = '%21',\n    _a[36 /* DollarSign */] = '%24',\n    _a[38 /* Ampersand */] = '%26',\n    _a[39 /* SingleQuote */] = '%27',\n    _a[40 /* OpenParen */] = '%28',\n    _a[41 /* CloseParen */] = '%29',\n    _a[42 /* Asterisk */] = '%2A',\n    _a[43 /* Plus */] = '%2B',\n    _a[44 /* Comma */] = '%2C',\n    _a[59 /* Semicolon */] = '%3B',\n    _a[61 /* Equals */] = '%3D',\n    _a[32 /* Space */] = '%20',\n    _a);\nfunction encodeURIComponentFast(uriComponent, allowSlash) {\n    var res = undefined;\n    var nativeEncodePos = -1;\n    for (var pos = 0; pos < uriComponent.length; pos++) {\n        var code = uriComponent.charCodeAt(pos);\n        // unreserved characters: https://tools.ietf.org/html/rfc3986#section-2.3\n        if ((code >= 97 /* a */ && code <= 122 /* z */)\n            || (code >= 65 /* A */ && code <= 90 /* Z */)\n            || (code >= 48 /* Digit0 */ && code <= 57 /* Digit9 */)\n            || code === 45 /* Dash */\n            || code === 46 /* Period */\n            || code === 95 /* Underline */\n            || code === 126 /* Tilde */\n            || (allowSlash && code === 47 /* Slash */)) {\n            // check if we are delaying native encode\n            if (nativeEncodePos !== -1) {\n                res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                nativeEncodePos = -1;\n            }\n            // check if we write into a new string (by default we try to return the param)\n            if (res !== undefined) {\n                res += uriComponent.charAt(pos);\n            }\n        }\n        else {\n            // encoding needed, we need to allocate a new string\n            if (res === undefined) {\n                res = uriComponent.substr(0, pos);\n            }\n            // check with default table first\n            var escaped = encodeTable[code];\n            if (escaped !== undefined) {\n                // check if we are delaying native encode\n                if (nativeEncodePos !== -1) {\n                    res += encodeURIComponent(uriComponent.substring(nativeEncodePos, pos));\n                    nativeEncodePos = -1;\n                }\n                // append escaped variant to result\n                res += escaped;\n            }\n            else if (nativeEncodePos === -1) {\n                // use native encode only when needed\n                nativeEncodePos = pos;\n            }\n        }\n    }\n    if (nativeEncodePos !== -1) {\n        res += encodeURIComponent(uriComponent.substring(nativeEncodePos));\n    }\n    return res !== undefined ? res : uriComponent;\n}\nfunction encodeURIComponentMinimal(path) {\n    var res = undefined;\n    for (var pos = 0; pos < path.length; pos++) {\n        var code = path.charCodeAt(pos);\n        if (code === 35 /* Hash */ || code === 63 /* QuestionMark */) {\n            if (res === undefined) {\n                res = path.substr(0, pos);\n            }\n            res += encodeTable[code];\n        }\n        else {\n            if (res !== undefined) {\n                res += path[pos];\n            }\n        }\n    }\n    return res !== undefined ? res : path;\n}\n/**\n * Compute `fsPath` for the given uri\n */\nexport function uriToFsPath(uri, keepDriveLetterCasing) {\n    var value;\n    if (uri.authority && uri.path.length > 1 && uri.scheme === 'file') {\n        // unc path: file://shares/c$/far/boo\n        value = \"//\" + uri.authority + uri.path;\n    }\n    else if (uri.path.charCodeAt(0) === 47 /* Slash */\n        && (uri.path.charCodeAt(1) >= 65 /* A */ && uri.path.charCodeAt(1) <= 90 /* Z */ || uri.path.charCodeAt(1) >= 97 /* a */ && uri.path.charCodeAt(1) <= 122 /* z */)\n        && uri.path.charCodeAt(2) === 58 /* Colon */) {\n        if (!keepDriveLetterCasing) {\n            // windows drive letter: file:///c:/far/boo\n            value = uri.path[1].toLowerCase() + uri.path.substr(2);\n        }\n        else {\n            value = uri.path.substr(1);\n        }\n    }\n    else {\n        // other path\n        value = uri.path;\n    }\n    if (isWindows) {\n        value = value.replace(/\\//g, '\\\\');\n    }\n    return value;\n}\n/**\n * Create the external version of a uri\n */\nfunction _asFormatted(uri, skipEncoding) {\n    var encoder = !skipEncoding\n        ? encodeURIComponentFast\n        : encodeURIComponentMinimal;\n    var res = '';\n    var scheme = uri.scheme, authority = uri.authority, path = uri.path, query = uri.query, fragment = uri.fragment;\n    if (scheme) {\n        res += scheme;\n        res += ':';\n    }\n    if (authority || scheme === 'file') {\n        res += _slash;\n        res += _slash;\n    }\n    if (authority) {\n        var idx = authority.indexOf('@');\n        if (idx !== -1) {\n            // <user>@<auth>\n            var userinfo = authority.substr(0, idx);\n            authority = authority.substr(idx + 1);\n            idx = userinfo.indexOf(':');\n            if (idx === -1) {\n                res += encoder(userinfo, false);\n            }\n            else {\n                // <user>:<pass>@<auth>\n                res += encoder(userinfo.substr(0, idx), false);\n                res += ':';\n                res += encoder(userinfo.substr(idx + 1), false);\n            }\n            res += '@';\n        }\n        authority = authority.toLowerCase();\n        idx = authority.indexOf(':');\n        if (idx === -1) {\n            res += encoder(authority, false);\n        }\n        else {\n            // <auth>:<port>\n            res += encoder(authority.substr(0, idx), false);\n            res += authority.substr(idx);\n        }\n    }\n    if (path) {\n        // lower-case windows drive letters in /C:/fff or C:/fff\n        if (path.length >= 3 && path.charCodeAt(0) === 47 /* Slash */ && path.charCodeAt(2) === 58 /* Colon */) {\n            var code = path.charCodeAt(1);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = \"/\" + String.fromCharCode(code + 32) + \":\" + path.substr(3); // \"/c:\".length === 3\n            }\n        }\n        else if (path.length >= 2 && path.charCodeAt(1) === 58 /* Colon */) {\n            var code = path.charCodeAt(0);\n            if (code >= 65 /* A */ && code <= 90 /* Z */) {\n                path = String.fromCharCode(code + 32) + \":\" + path.substr(2); // \"/c:\".length === 3\n            }\n        }\n        // encode the rest of the path\n        res += encoder(path, true);\n    }\n    if (query) {\n        res += '?';\n        res += encoder(query, false);\n    }\n    if (fragment) {\n        res += '#';\n        res += !skipEncoding ? encodeURIComponentFast(fragment, false) : fragment;\n    }\n    return res;\n}\n// --- decode\nfunction decodeURIComponentGraceful(str) {\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (_a) {\n        if (str.length > 3) {\n            return str.substr(0, 3) + decodeURIComponentGraceful(str.substr(3));\n        }\n        else {\n            return str;\n        }\n    }\n}\nvar _rEncodedAsHex = /(%[0-9A-Za-z][0-9A-Za-z])+/g;\nfunction percentDecode(str) {\n    if (!str.match(_rEncodedAsHex)) {\n        return str;\n    }\n    return str.replace(_rEncodedAsHex, function (match) { return decodeURIComponentGraceful(match); });\n}\n"],"names":["__export","m","p","exports","hasOwnProperty","Object","defineProperty","value","JSONExt","isPrimitive","isArray","Array","emptyObject","freeze","emptyArray","isObject","deepEqual","first","second","a1","a2","length","i","n","deepArrayEqual","key","deepObjectEqual","deepCopy","result","deepArrayCopy","deepObjectCopy","MimeData","this","_types","_values","prototype","types","slice","hasData","mime","indexOf","getData","undefined","setData","data","clearData","push","splice","clear","PromiseDelegate","_this","promise","Promise","resolve","reject","_resolve","_reject","reason","Random","getRandomValues","crypto","window","msCrypto","buffer","randomFillSync","randomBytes","bytes","Math","random","Token","name","_tokenStructuralPropertyT","random_1","UUID","uuid4","Uint8Array","lut","toString","Endpoint","constructor","options","location","self","getWebSocketUrl","wsScheme","host","pathname","path","getRestUrl","httpScheme","protocol","PROTO_FILE","endsWith","substr","port","origin","getSearchParam","defaultValue","search","split","filter","startsWith","map","encoded","decodeURIComponent","PROTO_HTTPS","PROTO_WSS","PROTO_WS","PROTO_HTTP","Options","Location","hasBuffer","Buffer","hasTextEncoder","TextEncoder","hasTextDecoder","TextDecoder","textEncoder","textDecoder","BinaryBuffer","byteLength","static","allocUnsafe","actual","isBuffer","from","byteOffset","source","encode","iconv","buffers","totalLength","len","ret","alloc","offset","element","set","decode","start","end","subarray","array","readUInt32BE","writeUInt32BE","readUInt32LE","writeUInt32LE","readUInt8","writeUInt8","BinaryBufferReadableStream","BinaryBufferReadable","toBuffer","readable","streams","consumeReadable","chunks","concat","fromBuffer","toReadable","fromReadable","read","fromString","stream","consumeStream","toStream","BinaryBufferReadableBufferedStream","async","bufferedStream","ended","BinaryBufferWriteableStream","create","newWriteableStream","shortcutEvent","assign","callback","context","handle","setTimeout","bind","dispose","clearTimeout","maxListeners","CancellationToken","None","isCancellationRequested","onCancellationRequested","Event","Cancelled","is","candidate","CancellationError","Error","super","message","MutableToken","_isCancelled","cancel","_emitter","fire","Emitter","event","token","_token","cancelledMessage","cancelled","err","Disposable","DisposableGroup","arg","func","configurable","enumerable","get","toDispose","disposables","onDisposeEmitter","disposingElements","forEach","d","onDispose","checkDisposed","disposed","pop","e","console","error","disposable","originalDispose","toRemove","index","pushAll","canPush","Boolean","canAdd","add","args","_disposable","getMaxListeners","setMaxListeners","addMaxListeners","mapFunc","listener","thisArgs","call","CallbackList","_callbacks","bucket","_contexts","remove","foundCallbackWithDifferentContext","Symbol","iterator","callbacks","contexts","apply","invoke","isEmpty","_options","_disposed","_leakWarnCountdown","_event","onFirstListenerAdd","removeMaxListenersCheck","checkMaxListeners","_noop","onLastListenerRemove","LEAK_WARNING_THRESHHOLD","listenerCount","popStack","pushLeakingStack","topStack","topCount","_leakingStacks","stackCount","stack","warn","Map","join","count","popLeakingStack","processor","WaitUntilEvent","emitter","timeout","waitables","asyncEvent","waitUntil","thenable","isFrozen","race","all","promiseJoin","listeners","deliveryQueue","then","deliver","GLOBSTAR","ALL_FORWARD_SLASHES","starsToRegExp","starCount","splitGlobAware","pattern","splitChar","segments","char","inBraces","inBrackets","curVal","parseRegExp","regEx","every","s","previousSegmentWasGlobStar","segment","braceVal","bracketVal","braceRegExp","c","strings","escapeRegExpCharacters","res","T1","T2","T3","T3_2","T4","T5","CACHE","FALSE","NULL","parsePattern","arg1","trim","patternKey","trimForExclusions","match","parsedPattern","wrapRelativePattern","test","base","basename","exec","originalPattern","slashBase","backslashBase","basenames","patterns","allBasenames","trivia2","parsedPatterns","aggregateBasenameMatches","withBasenames","find","allPaths","reduce","current","trivia3","trivia4and5","regExp","RegExp","lastIndex","toRegExp","arg2","paths","isEqualOrParent","normalize","pathToRelative","matchPathEnds","nativePath","nativeSep","sep","replace","nativePathEnd","parse","isRelativePattern","resultPattern","expression","getOwnPropertyNames","when","hasSibling","matched","requiresSiblings","parseExpressionPattern","some","resultExpression","extname","parsedExpression","listToMap","list","obj","rp","basenamePatterns","aggregate","ch","charCodeAt","aggregatedPatterns","siblingsFn","siblings","patternOrExpression","CSSIcon","iconNameSegment","iconNameExpression","iconModifierExpression","iconNameCharacter","iconsRegex","escapeIconsRegex","text","escaped","MarkdownStringTextNewlineStyle","escapeMarkdownSyntaxTokens","MarkdownString","isTrustedOrOptions","isTrusted","supportThemeIcons","supportHtml","appendText","newlineStyle","Paragraph","escapeIcons","_match","g1","repeat","Break","appendMarkdown","appendCodeblock","langId","code","appendLink","target","label","title","_escape","String","r","charAt","userAgent","platform","navigator","process","isWindows","isOSX","command","OS","Type","type","Windows","OSX","Linux","backend","Path","raw","normalizePathSeparator","normalizeDrive","firstIndex","separator","lastIndexOf","isAbsolute","isRoot","isDrive","root","computeRoot","extIndex","ext","fromCharCode","toUpperCase","substring","resourcePath","home","untildifiedResource","untildifiedPath","dir","_dir","computeDir","hasDir","relativePath","reverse","next","fsPath","format","Format","windowsPath","relative","relativity","relativeStr","trailingSlash","pathArray","resultArray","_posixBadPath","_winBadPath","idx","streql","other","getRoot","pos","toOSPath","wantsBackslash","win","_isNormal","skip","prev_start","prev_part","part","ignoreCase","startsWithIgnoreCase","sepOffset","Deferred","state","setState","ms","deferred","delay","task","retryDelay","retries","lastError","thisArg","registration","evt","Severity","warning","info","fromValue","toLowerCase","Warning","Info","Log","Ignore","toDiagnosticSeverity","DiagnosticSeverity","Hint","Information","severity","toArray","isReadableStream","on","pause","resume","destroy","fn","reducer","WriteableStreamImpl","Readable","done","chunk","flowing","destroyed","pendingWritePromises","flowData","flowErrors","flowEnd","write","highWaterMark","removeListener","fullDataBuffer","pendingWritePromise","maxChunks","shift","lastReadChunk","streamListeners","DisposableCollection","dataListener","errorListener","endListener","wrapperStream","t","consumed","transformer","isLowerAsciiLetter","isUpperAsciiLetter","isAsciiLetter","doEqualsIgnoreCase","a","b","stopAt","codeA","codeB","diff","abs","compareSubstring","aStart","aEnd","bStart","bEnd","aLen","bLen","compareSubstringIgnoreCase","haystack","needle","min","str","candidateLength","splitter","URI","uri","codeUri","components","revive","displayName","allLocations","locations","parent","withPath","authority","scheme","resolveToAbsolute","pathSegments","absolutePath","withScheme","newCodeUri","toJSON","withAuthority","withoutAuthority","withoutPath","withQuery","query","withoutQuery","withFragment","fragment","withoutFragment","normalizePath","_path","skipEncoding","isEqual","caseSensitive","hasSameOrigin","left","right","uris","otherUri","toComponents","module","id","debugAdapter","isClosed","onMessageReceived","send","onClose","onDebugAdapterExit","onError","onDebugAdapterError","channel","debug","onMessage","close","JSON","stringify","seq","body","stop","DEBUG_SCHEME","SCHEME_PATTERN","messageReceivedEmitter","closeEmitter","onDidSendMessage","msg","handleMessage","StreamDebugAdapter","fromAdapter","toAdapter","errorEmitter","contentLength","handleData","handleClosed","CONTENT_LENGTH","TWO_CRLF","output","log","lines","pair","stdout","stdin","kill","socket","score","selector","uriScheme","candidateLanguage","candidateIsSynchronized","language","hasAccessToAllModels","max","BaseStat","FileType","FileSystemProviderErrorCode","resource","operation","isOperation","changes","contains","checkForChangeType","change","getAdded","getOfType","gotAdded","hasType","getDeleted","gotDeleted","getUpdated","gotUpdated","FileStat","asFileType","stat","isFile","File","isDirectory","Directory","isSymbolicLink","SymbolicLink","fromStat","mtime","ctime","size","etag","fileStat","toStat","file","FileOperationError","fileOperationResult","setPrototypeOf","FileSystemProviderError","createFileSystemProviderError","providerError","markAsFileSystemProviderError","toFileSystemProviderErrorCode","Unknown","FileExists","FileIsADirectory","FileNotADirectory","FileNotFound","FileExceedsMemoryLimit","FileTooLarge","NoPermissions","Unavailable","FileSystemProvider","provider","capabilities","ETAG_DISABLED","BinarySize","KB","MB","toFixed","GB","TB","findFirstInSorted","low","high","mid","floor","sortedDiff","before","after","compare","pushSplice","deleteCount","toInsert","latest","beforeIdx","afterIdx","beforeElement","afterElement","topStep","j","insertInto","newItems","startIdx","getActualStartIndex","originalLength","newItemsLength","findMaxBy","items","comparator","item","arr","one","itemEquals","comp","quickSelect","nth","TypeError","pivotValue","lower","higher","pivots","val","currentGroup","sort","splices","removed","added","batch","o","to","keyFn","seen","Set","has","predicate","notFoundValue","equals","indexer","mapper","insertIndex","insertArr","_seed","rand","seed","x","sin","temp","unshift","mapFn","mapped","numberComparator","firstIdx","lastIdx","takeWhile","takeFromEndWhile","endIdx","peek","dequeue","takeCount","cts","CancellationTokenSource","lastCache","lastArgKey","_map","cachedValues","isCancellationToken","thing","_parentListener","ErrorHandler","unexpectedErrorHandler","addListener","_removeListener","emit","setUnexpectedErrorHandler","newUnexpectedErrorHandler","getUnexpectedErrorHandler","onUnexpectedError","onUnexpectedExternalError","errorHandler","isCancellationError","$isError","stacktrace","canceledName","what","NotImplementedError","NotSupportedError","ExpectedError","isExpected","ErrorNoTelemetry","logTelemetry","BugIndicatingError","once","didFire","snapshot","each","merge","initial","debounce","leading","leakWarningThreshold","subscription","numDebouncedCalls","cur","_output","latch","cache","firstCall","shouldEmit","signal","any","events","combinedDisposable","isT","flushAfterTimeout","_buffer","flush","onFirstListenerDidAdd","ChainableEvent","chain","fromNodeEventEmitter","eventName","fromDOMEventEmitter","addEventListener","removeEventListener","toPromise","runAndSubscribe","handler","runAndSubscribeWithStore","store","run","DisposableStore","toDisposable","EventProfiling","_listenerCount","_invocationCount","_elapsedOverall","_name","_idPool","_stopWatch","StopWatch","elapsed","_globalLeakWarningThreshold","oldValue","LeakageMonitor","customThreshold","_warnCountdown","_stacks","check","threshold","Stacktrace","print","Listener","callbackThis","SafeDisposable","_leakageMon","_perfMon","_profName","_deliveryQueue","_listeners","LinkedList","firstListener","removeMonitor","onListenerDidAdd","PrivateEventDeliveryQueue","hasListeners","EventDeliveryQueue","_queue","EventDeliveryQueueElement","newQueue","fireAsync","_asyncDeliveryQueue","thenables","allSettled","values","status","PauseableEmitter","_isPaused","_eventQueue","_mergeFn","_delay","_handle","_queuedEvents","queueMicrotask","hook","unhook","wrapEvent","bufferEvents","listening","inputEvent","inputEventListener","input","isPathSeparator","toSlashes","osPath","posix","firstLetter","isWindowsDriveLetter","isNaN","WINDOWS_INVALID_FILE_CHARS","UNIX_INVALID_FILE_CHARS","WINDOWS_FORBIDDEN_NAMES","char0","hasDriveLetter","isWindowsOS","invalidFileChars","pathA","pathB","identityEquals","equalsIgnoreCase","parentCandidate","cwd","rtrim","pathNormalized","rawPath","line","column","segmentAsNumber","Number","isNumber","pathChars","prefix","randomLength","randomFileName","suffix","didCall","arguments","Iterable","_empty","empty","single","iterable","iterables","concatNested","initialValue","consume","atMost","POSITIVE_INFINITY","at","bt","ai","bi","an","bn","ParseOptions","createScanner","ignoreTrivia","tokenOffset","scanError","scanHexDigits","digits","hexValue","scanNext","isWhitespace","isLineBreak","ch3","scanString","safeLength","commentClosed","isDigit","scanNumber","isUnknownContentCharacter","setPosition","newPosition","getPosition","scan","getToken","getTokenValue","getTokenOffset","getTokenLength","getTokenError","node","includeRightBound","visit","visitor","DEFAULT","_scanner","toNoArgVisit","visitFunction","toOneArgVisit","onObjectBegin","onObjectProperty","onObjectEnd","onArrayBegin","onArrayEnd","onLiteralValue","onSeparator","onComment","disallowComments","allowTrailingComma","handleError","skipUntilAfter","skipUntil","parseString","isValue","allowEmptyContent","parseValue","needsComma","parseArray","parseObject","parseLiteral","getNodeType","position","earlyReturnException","previousNode","previousNodeInst","isAtPropertyKey","setPreviousNode","colonOffset","last","matches","k","errors","currentProperty","currentParent","previousParents","onValue","object","children","ensurePropertyComplete","endOffset","valueNode","found","propertyNode","getNodePath","getNodeValue","prop","findNodeAtOffset","replaceCh","kind","parts","Lazy","executor","_didRun","hasValue","getValue","_value","_error","rawValue","f","disposableTracker","trackDisposable","markAsDisposed","setParentOfDisposable","child","setParent","tracker","singleton","markAsSingleton","MultiDisposeError","setParentOfDisposables","_toDispose","_isDisposed","isDisposed","DISABLE_DISPOSED_WARNING","_store","_register","clearAndLeak","_counter","acquire","release","unset","isset","references","reference","counter","createReferencedObject","destroyReferencedObject","delete","referenceCollection","ref","Node","Undefined","prev","_first","_last","_size","_insert","atTheEnd","newNode","oldLast","oldFirst","didRemove","_remove","anchor","entries","StringIterator","_pos","reset","hasNext","cmp","ConfigKeysIterator","_caseSensitive","_from","_to","justSeps","PathIterator","_splitOnBackslash","_valueLen","UriIterator","_ignorePathCasing","_ignoreQueryAndFragment","_states","_stateIdx","_pathIterator","compareIgnoreCase","TernarySearchTreeNode","height","rotateLeft","tmp","updateHeight","rotateRight","heightLeft","heightRight","balanceFactor","TernarySearchTree","_iter","ignorePathCasing","ignoreQueryAndFragment","_root","fill","keys","shuffle","entry","iter","oldElement","bf","d1","d2","_getNode","_delete","deleteSuperstr","superStr","_min","newChild","findSubstr","findSuperstr","_entries","_isBalanced","nodeIsBalanced","ResourceMapEntry","ResourceMap","mapOrKeyFn","toKey","defaultToKey","clb","_","toStringTag","ResourceSet","entriesOrKey","callbackfn","LinkedMap","_head","_tail","_state","touch","previous","addItemLast","addItemFirst","removeItem","trimOld","newSize","currentSize","fromJSON","limit","ratio","_limit","_ratio","checkTrim","round","ReadonlyMapView","Schemas","inMemory","vscode","internal","walkThrough","walkThroughSnippet","http","https","mailto","untitled","vscodeRemote","vscodeRemoteResource","vscodeUserData","vscodeCustomEditor","vscodeNotebook","vscodeNotebookCell","vscodeNotebookCellMetadata","vscodeNotebookCellOutput","vscodeInteractive","vscodeInteractiveInput","vscodeSettings","vscodeWorkspaceTrust","vscodeTerminal","webviewPanel","vscodeWebview","extension","vscodeFileResource","vsls","connectionTokenCookieName","connectionTokenQueryName","RemoteAuthorities","_hosts","_ports","_connectionTokens","_preferredWebSchema","_delegate","setPreferredWebSchema","schema","setDelegate","delegate","setConnectionToken","connectionToken","getPreferredWebSchema","rewrite","encodeURIComponent","isWeb","FileAccessImpl","asBrowserUri","uriOrModule","moduleIdToUrl","toUri","isNative","isWebWorker","globals","FALLBACK_AUTHORITY","with","asFileUri","isUri","toUrl","FileAccess","deepClone","_hasOwnProperty","isTypedArray","_cloneAndChange","changer","isUndefinedOrNull","changed","r1","r2","i2","oneKeys","otherKeys","mixin","destination","overwrite","baseValue","targetValue","lowercaseKey","equivalentKey","CHAR_DOT","CHAR_FORWARD_SLASH","CHAR_BACKWARD_SLASH","CHAR_COLON","ErrorInvalidArgType","expected","determiner","validateString","isPosixPathSeparator","isWindowsDeviceRoot","normalizeString","allowAboveRoot","lastSegmentLength","lastSlash","dots","lastSlashIndex","_format","pathObject","win32","resolvedDevice","resolvedTail","resolvedAbsolute","env","rootEnd","device","firstPart","tail","joined","needsReplace","slashCount","firstLen","fromOrig","toOrig","fromStart","fromEnd","fromLen","toStart","toEnd","toLen","lastCommonSep","fromCode","out","toNamespacedPath","resolvedPath","dirname","matchedSlash","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","delimiter","trailingSeparator","hasRoot","LANGUAGE_DEFAULT","_locale","_translationsConfigFile","_userAgent","nodeProcess","_isWindows","_isMacintosh","_isLinux","_isLinuxSnap","_isNative","_isWeb","_isElectron","_isIOS","_isCI","_language","g","isElectronProcess","versions","electron","isElectronRenderer","rawNlsConfig","nlsConfig","resolved","availableLanguages","locale","maxTouchPoints","_platform","Language","isMacintosh","isLinux","isLinuxSnap","isElectron","importScripts","isIOS","isCI","isDefaultVariant","isDefault","translationsConfigFile","setTimeout0","postMessage","pending","vscodeScheduleAsyncWork","lastId","myId","_isLittleEndian","_isLittleEndianComputed","view","Uint16Array","isChrome","isFirefox","isSafari","isEdge","isAndroid","safeProcess","sandboxProcess","arch","originalFSPath","uriToFsPath","ExtUri","uri1","uri2","ignoreFragment","getComparisonKey","extpath","isEqualAuthority","joinPath","pathFragment","basenameOrAuthority","normalizedPath","fromPath","toPath","resolvePath","newURI","toPosixPath","isAbsolutePath","hasTrailingPathSeparator","fsp","removeTrailingPathSeparator","addTrailingPathSeparator","isRootSep","DataUri","extUri","extUriBiasedIgnorePathCase","extUriIgnorePathCase","resourceAccessor","distinctParents","candidateResource","otherItem","META_DATA_LABEL","META_DATA_DESCRIPTION","META_DATA_SIZE","META_DATA_MIME","parseMetaData","dataUri","metadata","property","localScheme","_warning","_info","hasPerformanceNow","performance","now","highResolution","_highResolution","_startTime","_now","_stopTime","Date","_formatRegexp","group","parseInt","_format2Regexp","ltrim","needleLen","haystackLen","isHighSurrogate","charCode","isLowSurrogate","computeCodePoint","highSurrogate","lowSurrogate","getNextCodePoint","nextCharCode","template","html","character","maxLength","searchString","isRegex","wholeWord","modifiers","global","matchCase","multiline","unicode","regexp","regexpValue","chCode","startIndex","replacer","matchAll","groups","aLastIndex","bLastIndex","CodePointIterator","_str","_len","_offset","setOffset","prevCodePoint","codePoint","prevCharCode","getPrevCodePoint","nextCodePoint","eol","GraphemeIterator","_iterator","nextGraphemeLength","graphemeBreakTree","GraphemeBreakTree","getInstance","initialOffset","graphemeBreakType","getGraphemeBreakType","nextGraphemeBreakType","breakBetweenGraphemeBreakType","prevGraphemeLength","prevGraphemeBreakType","nextCharLength","prevCharLength","CONTAINS_RTL","IS_BASIC_ASCII","isEmojiImprecise","UNUSUAL_LINE_TERMINATORS","re","EL","COLOR_START","COLOR_END","startsWithUTF8BOM","breakTypeA","breakTypeB","UTF8_BOM_CHARACTER","queryLen","targetLower","ignoreEscapedChars","_data","_INSTANCE","nodeCount","nodeIndex","isEmojiModifier","emojiOffset","resultOffset","getOffsetBeforeLastEmojiComponent","noBreakWhitespace","AmbiguousCharacters","confusableDictionary","locales","_locales","isAmbiguous","getPrimaryConfusable","getConfusableCodePoints","ambiguousCharacterData","LRUCachedFunction","arrayToMap","intersectMaps","map1","map2","languageSpecificMap","filteredLocales","l","mergeMaps","InvisibleCharacters","getRawData","codePoints","isString","isUndefined","elem","Uint32Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","BigInt64Array","BigUint64Array","Uint8ClampedArray","condition","isFunction","validateConstraint","constraint","getAllPropertyNames","proto","getPrototypeOf","objects","constraints","methods","methodNames","createProxyMethod","method","methodName","_schemePattern","_singleSlashStart","_doubleSlashStart","_validateUri","_strict","_slash","_regexp","schemeOrData","_schemeFix","_referenceResolution","Uri","percentDecode","newPath","_asFormatted","_formatted","external","_fsPath","_sep","_pathSepMarker","$mid","encodeTable","encodeURIComponentFast","uriComponent","allowSlash","nativeEncodePos","encodeURIComponentMinimal","keepDriveLetterCasing","encoder","userinfo","decodeURIComponentGraceful","_rEncodedAsHex","rest","addToValueTree","settingsTreeRoot","conflictReporter","curr","doRemoveFromValueTree","valueTree","IConfigurationService","createDecorator","overrideIdentifier","overrideIdentifiers","configurationTarget","properties","config","settingPath","component","accessSetting","configurationService","currentSettingName","legacySettingName","setting","inspect","legacySetting","userValue","workspaceValue","workspaceFolderValue","settingKey","ConfigurationModel","_contents","_keys","_overrides","overrideConfigurations","contents","checkAndFreeze","overrides","section","getConfigurationValue","getOverrideValue","overrideContents","getContentsForOverrideIdentifer","getKeysForOverrideIdentifier","identifier","override","identifiers","includes","arrays","distinct","getAllOverrideIdentifiers","overrideConfigurationModel","createOverrideConfigurationModel","others","mergeContents","otherOverride","contentsForKey","overrideContentsForKey","deepFreeze","contentsForIdentifierOnly","contentsToMerge","setValue","addKey","removeValue","removeKey","removeFromValueTree","configurationDefaultsOverrides","Registry","as","Extensions","Configuration","getConfigurationProperties","defaultOverrideValue","default","OVERRIDE_PROPERTY_REGEX","overrideIdentifiersFromKey","toValuesTree","ConfigurationModelParser","_raw","_configurationModel","_restrictedConfigurations","_parseErrors","configurationModel","restrictedConfigurations","content","doParseContent","parseRaw","reparse","restricted","doParseRaw","parseErrors","json","configurationProperties","filtered","toOverrides","filterOverriddenProperties","scopes","skipRestricted","propertySchema","scope","overrideRaw","keyInOverrideRaw","UserSettings","userSettingsResource","fileService","_onDidChange","onDidChange","parser","parseOptions","watch","onDidFilesChange","onDidRunOperation","loadConfiguration","readFile","getRestrictedSettings","_defaultConfiguration","_localUserConfiguration","_remoteUserConfiguration","_workspaceConfiguration","_folderConfigurations","_memoryConfiguration","_memoryConfigurationByResource","_freeze","_workspaceConsolidatedConfiguration","_foldersConsolidatedConfigurations","_userConfiguration","workspace","getConsolidateConfigurationModel","updateValue","memoryConfiguration","consolidateConfigurationModel","folderConfigurationModel","getFolderConfigurationModelForResource","memoryConfigurationModel","userConfiguration","userLocalValue","localUserConfiguration","userRemoteValue","remoteUserConfiguration","memoryValue","flatten","user","userLocal","userRemote","workspaceFolder","memory","updateDefaultConfiguration","defaultConfiguration","updateLocalUserConfiguration","updateRemoteUserConfiguration","updateWorkspaceConfiguration","workspaceConfiguration","updateFolderConfiguration","configuration","deleteFolderConfiguration","folderConfigurations","compareAndUpdateDefaultConfiguration","defaults","updated","fromKeys","toKeys","compareAndUpdateLocalUserConfiguration","compareAndUpdateRemoteUserConfiguration","compareAndUpdateWorkspaceConfiguration","compareAndUpdateFolderConfiguration","folderConfiguration","currentFolderConfiguration","compareAndDeleteFolderConfiguration","folder","folderConfig","getConsolidatedConfigurationModelForResource","consolidateConfiguration","getWorkspaceConsolidatedConfiguration","getFolder","getFolderConsolidatedConfiguration","memoryConfigurationForResource","folderConsolidatedConfiguration","workspaceConsolidateConfiguration","toData","folders","allKeys","folderConfiguraiton","allOverrideIdentifiers","getAllKeysForOverrideIdentifier","parseConfigurationModel","model","keysSet","overridesMap","getOrSet","ConfigurationChangeEvent","currentConfiguraiton","currentWorkspace","_previousConfiguration","affectedKeys","affectedKeysTree","previousConfiguration","affectsConfiguration","doesAffectedKeysTreeContains","value1","value2","requestedTree","compareConfigurationContents","fromOverrideIdentifiers","toOverrideIdentifiers","addedOverrideIdentifiers","removedOverrideIdentifiers","sourceConfig","EditPresentationTypes","allSettings","patternProperties","applicationSettings","machineSettings","machineOverridableSettings","windowSettings","resourceSettings","resourceLanguageSettingsSchemaId","configurationDefaultsSchemaId","contributionRegistry","JSONContribution","OVERRIDE_IDENTIFIER_REGEX","getDefaultValue","OVERRIDE_PROPERTY_PATTERN","configurationRegistry","_onDidSchemaChange","onDidSchemaChange","_onDidUpdateConfiguration","onDidUpdateConfiguration","defaultLanguageConfigurationOverridesNode","nls","localize","configurationContributors","resourceLanguageSettingsSchema","additionalProperties","errorMessage","allowTrailingCommas","allowComments","excludedConfigurationProperties","registerSchema","registerOverridePropertyPatternKey","registerConfiguration","validate","registerConfigurations","configurations","doRegisterConfigurations","deregisterConfigurations","doDeregisterConfigurations","updateConfigurations","registerDefaultConfigurations","configurationDefaults","plainKey","getLanguageTagSettingPlainKey","description","$ref","defaultDefaultValue","updatePropertyDefaultValue","updateSchema","registerOverrideIdentifiers","defaultsOverrides","deregisterDefaultConfigurations","defaultConfigurations","configurationDefaultsOverride","updateOverridePropertyPatternKey","notifyConfigurationSchemaUpdated","validateAndRegisterProperties","extensionInfo","restrictedProperties","registerJSONConfiguration","deregisterConfiguration","removeFromSchema","allOf","propertyKeys","validateProperty","included","deprecationMessage","markdownDeprecationMessage","subNodes","getConfigurations","getExcludedConfigurationProperties","getConfigurationDefaultsOverrides","register","overrideIdentifierProperty","resourceLanguagePropertiesSchema","configurationdefaultOverride","defaultSource","defaultValueSource","_util","storeServiceDependency","DI_TARGET","DI_DEPENDENCIES","serviceId","serviceIds","getServiceDependencies","ctor","IInstantiationService","serviceIdentifier","jsonContributionRegistry","_onDidChangeSchema","onDidChangeSchema","schemasById","unresolvedSchemaContent","notifySchemaChanged","getSchemaContributions","schemas","Assert","ok","Types","knows","IWorkspaceContextService","singleFolderIdentifier","configPath","workspaceIdentifier","singleFolderIdentifierCandidate","workspaceIdentifierCandidate","toResource","_id","_transient","_configuration","_foldersMap","forUris","update","transient","_folders","updateFoldersMap","WorkspaceFolder","WORKSPACE_EXTENSION","WORKSPACE_SUFFIX","isUntitledWorkspace","environmentService","untitledWorkspacesHome","isTemporaryWorkspace","WORKSPACE_FILTER","extensions","UNTITLED_WORKSPACE_NAME","CharacterClassifier","_defaultValue","toUint8","_asciiMap","_createAsciiMap","asciiMap","PluginChannel","connection","messageEmitter","closedEmitter","$sendMessage","fireMessageReceived","fireError","fireClosed","cb","$deleteConnection","proxy","connections","doEnsureConnection","$createConnection","doCreateConnection","TextEditorCursorStyle","cursorStyle","Line","Block","Underline","LineThin","BlockOutline","UnderlineThin","nextId","Uint8Matrix","rows","cols","row","col","StateMachine","edges","maxCharCode","maxState","states","_maxCharCode","nextState","currentState","_stateMachine","_classifier","LinkComputer","classifier","lineNumber","linkBeginIndex","linkEndIndex","lastIncludedCharIndex","charCodeBeforeLink","lastCharCodeInLink","range","startLineNumber","startColumn","endLineNumber","endColumn","url","stateMachine","getStateMachine","FORCE_TERMINATION_CHARACTERS","CANNOT_END_WITH_CHARACTERS","getClassifier","lineCount","getLineCount","getLineContent","linkBeginChCode","hasOpenParens","hasOpenSquareBracket","inSquareBrackets","hasOpenCurlyBracket","resetStateMachine","chClass","_createLink","ObjectIdentifier","of","replaceRegex","processed","absolute","removeDuplicateSeparators","goodComponents","fromSegments","toSegments","upCount","downSegments","rv","CompletionItemKind","CompletionItemInsertTextRule","CompletionTriggerKind","SymbolTag","SymbolKind","DocumentHighlightKind","MarkerTag","MarkerSeverity","CommentThreadCollapsibleState","CommentMode","FoldingRangeKind","Comment","Imports","Region","DebugConfigurationProviderTriggerKind","TrackedRangeStickiness","TextEditorRevealType","EditorPosition","TreeViewItemCollapsibleState","MainMessageType","UIKind","emptyPlugin","lifecycle","startMethod","stopMethod","publisher","version","engine","packagePath","packageUri","entryPoint","pluginPath","pluginFolder","pluginUri","rawModel","engines","isUnderDevelopment","TreeViewSelection","ScmCommandArg","TimelineCommandArg","CommentsCommandArg","CommentsContextCommandArg","CommentsEditCommandArg","WorkspaceTextEditDto","edit","LanguagesMainFactory","OutputChannelRegistryFactory","PLUGIN_RPC_CONTEXT","AUTHENTICATION_MAIN","createProxyIdentifier","COMMAND_REGISTRY_MAIN","QUICK_OPEN_MAIN","DIALOGS_MAIN","WORKSPACE_MAIN","MESSAGE_REGISTRY_MAIN","TEXT_EDITORS_MAIN","DOCUMENTS_MAIN","STATUS_BAR_MESSAGE_REGISTRY_MAIN","ENV_MAIN","NOTIFICATION_MAIN","NOTIFICATION_EXT","TERMINAL_MAIN","TREE_VIEWS_MAIN","PREFERENCE_REGISTRY_MAIN","OUTPUT_CHANNEL_REGISTRY_MAIN","LANGUAGES_MAIN","CONNECTION_MAIN","WEBVIEWS_MAIN","CUSTOM_EDITORS_MAIN","WEBVIEW_VIEWS_MAIN","STORAGE_MAIN","TASKS_MAIN","DEBUG_MAIN","FILE_SYSTEM_MAIN","SCM_MAIN","SECRETS_MAIN","DECORATIONS_MAIN","WINDOW_MAIN","CLIPBOARD_MAIN","LABEL_SERVICE_MAIN","TIMELINE_MAIN","THEMING_MAIN","COMMENTS_MAIN","MAIN_RPC_CONTEXT","AUTHENTICATION_EXT","HOSTED_PLUGIN_MANAGER_EXT","COMMAND_REGISTRY_EXT","QUICK_OPEN_EXT","WINDOW_STATE_EXT","WORKSPACE_EXT","TEXT_EDITORS_EXT","EDITORS_AND_DOCUMENTS_EXT","DOCUMENTS_EXT","TERMINAL_EXT","OUTPUT_CHANNEL_REGISTRY_EXT","TREE_VIEWS_EXT","PREFERENCE_REGISTRY_EXT","LANGUAGES_EXT","CONNECTION_EXT","WEBVIEWS_EXT","CUSTOM_EDITORS_EXT","WEBVIEW_VIEWS_EXT","STORAGE_EXT","TASKS_EXT","DEBUG_EXT","FILE_SYSTEM_EXT","ExtHostFileSystemEventService","SCM_EXT","SECRETS_EXT","DECORATIONS_EXT","LABEL_SERVICE_EXT","TIMELINE_EXT","THEMING_EXT","COMMENTS_EXT","ExtPluginApiProvider","MainPluginApiProvider","PluginIdentifiers","componentsToUnversionedId","UNPUBLISHED","componentsToVersionedId","componentsToVersionWithId","idAndVersionToVersionedId","unversionedFromVersioned","endOfId","identifiersFromVersionedId","probablyId","endOfPublisher","endOfName","idAndVersionFromVersionedId","getPluginId","plugin","PluginType","PluginDeployerEntryType","PluginViewType","CustomEditorPriority","hostedServicePath","PluginPackage","toPluginUrl","pck","PluginScanner","PluginDeployerResolver","PluginDeployerDirectoryHandler","PluginDeployerFileHandler","PluginDeployer","PluginDeployerParticipant","MetadataProcessor","HostedPluginClient","PluginDeployerHandler","HostedPluginServer","PLUGIN_HOST_BACKEND","pluginServerJsonRpcPath","PluginServer","ServerPluginRunner","PluginHostEnvironmentVariable","RPCProtocol","ProxyIdentifier","isMain","ConnectionClosedError","ObjectsTransferrer","SerializedObjectType","transformations","locals","proxies","lastMessageId","cancellationTokenSources","pendingRPCReplies","multiplexer","RPCMultiplexer","receiveOneMessage","reply","reviver","getProxy","proxyId","createProxy","instance","myArgs","remoteCall","Proxy","cancellationToken","canceled","callId","request","rawmsg","receiveRequest","receiveReply","receiveReplyErr","receiveCancel","cancellationTokenSource","tokenSource","invokeHandler","replyOK","replyErr","pendingReply","doInvokeHandler","actor","req","rpcId","safeStringify","transformErrorForSerialization","sendAccumulatedBound","sendAccumulated","messagesToSend","messages","setImmediate","$type","THEIA_URI","Range","serializedValue","THEIA_RANGE","VSCODE_URI","TEXT_BUFFER","serializedObject","isSerializedObject","Position","wrap","isLittleEndian","reverseEndianness","b0","b1","b2","b3","semanticTokens","dest","deltas","delta","encodeSemanticTokensDtoSize","uint8Arr","toLittleEndianBuffer","_buff","src","buff","fromLittleEndianBuffer","deltaCount","LogType","Reflect","construct","getOwnPropertyDescriptor","v","Schemes","userData","rpc","DebugExtImpl","that","NLS_REGEX","readPluginJson","pluginModel","getUri","XMLHttpRequest","onreadystatechange","readyState","DONE","response","open","readPluginFile","loadTranslations","translations","propertyName","manifest","built_prefix","WorkerEnvExtImpl","EnvExtImpl","appRoot","isNewAppInstall","ctx","pluginsApiImpl","pluginsModulesNames","RPCProtocolImpl","scripts","envExt","storageProxy","KeyValueStorageProxy","editorsAndDocuments","EditorsAndDocumentsExtImpl","messageRegistryExt","MessageRegistryExt","workspaceExt","WorkspaceExtImpl","preferenceRegistryExt","PreferenceRegistryExtImpl","debugExt","createDebugExtStub","clipboardExt","ClipboardExt","webviewExt","WebviewsExtImpl","secretsExt","SecretsExtImpl","terminalService","TerminalServiceExtImpl","pluginManager","PluginManagerExtImpl","loadPlugin","frontendModuleName","rawPluginData","foreign","plugins","plg","pluginLifecycle","frontend","frontendInitPath","contextPath","pluginMetadata","initialize","loadManifest","apiImpl","apiFactory","initExtApi","extApi","api","frontendExtApi","initPath","initVariable","initFunction","createAPIFactory","defaultApi","authenticationProviders","onDidChangeSessionsEmitter","onDidChangeSessions","requestingExtension","providerId","extensionName","extensionId","$getSession","registerAuthenticationProvider","$onDidChangeSessions","$registerAuthenticationProvider","supportsMultipleAccounts","$unregisterAuthenticationProvider","$createSession","authProvider","createSession","$removeSession","sessionId","removeSession","getSessions","session","accessToken","account","readText","$readText","writeText","$writeText","commands","handlers","argumentProcessors","commandsConverter","CommandsConverter","converter","registerCommand","$registerCommand","registerHandler","$unregisterCommand","commandId","$registerHandler","$unregisterHandler","$executeCommand","executeLocalCommand","executeCommand","KnownCommands","mappedId","mappedArgs","mappedResult","mr","getKeyBinding","$getKeyBinding","processArgument","filterUnderscoreCommands","$getCommands","registerArgumentProcessor","commandsMap","safeCommandId","isSafeCommandRegistered","toSafeCommand","toInternalCommand","executeSafeCommand","tooltip","_documents","commentControllers","commentControllersByExtension","commentController","commentControlHandle","commentThread","getCommentThread","commentThreadHandle","thread","getCommentByUniqueId","commentUniqueId","comment","createCommentController","CommentController","$createCommentThreadTemplate","commentControllerHandle","uriComponents","threadHandle","$updateCommentThreadTemplate","$deleteCommentThread","commentingRangeProvider","documentData","getDocumentData","ranges","provideCommentingRanges","document","fromRange","ExtHostCommentThread","_uri","_range","_comments","_handlePool","commentHandle","modifications","_onDidUpdateCommentThread","onDidUpdateCommentThread","_canReply","commentsMap","acceptInputDisposables","$createCommentThread","localDisposables","eventuallyUpdateCommentThread","comments","threadId","_label","contextValue","_contextValue","newComments","collapsibleState","collapseState","newState","canReply","modified","formattedModifications","theiaComment","iconPath","author","mode","uniqueIdInThread","fromMarkdown","userName","userIconPath","convertToModeComment","Expanded","Collapsed","convertToCollapsibleState","$updateCommentThread","uniqueId","threads","$registerCommentController","$updateCommentControllerFeatures","createCommentThread","arg0","arg3","toRange","$unregisterCommentController","documentExt","editorProviders","EditorProviderStore","documents","CustomDocumentStore","registerCustomEditorProvider","viewType","addTextProvider","$registerTextEditorProvider","webviewOptions","supportsMove","moveCustomTextEditor","addCustomProvider","supportEditing","onDidChangeCustomDocument","getCustomDocumentEntry","undo","redo","isEditEvent","editId","addEdit","$onDidEdit","$onContentChange","$registerCustomEditorProvider","supportsMultipleEditorsPerDocument","$unregisterEditorProvider","openContext","cancellation","revivedResource","openCustomDocument","editable","widgetOpenerOptions","panel","createWebviewPanel","WebviewImpl","toWebviewOptions","$createCustomEditorPanel","resolveCustomEditor","getDocument","resolveCustomTextEditor","$disposeEdits","resourceComponents","editIds","disposeEdits","newResourceComponents","webview","getWebviewPanel","cancellationSource","isDirty","getCustomEditorProvider","revertCustomDocument","saveCustomDocument","targetResource","saveCustomDocumentAs","CustomDocumentStoreEntry","edits","Cache","getEdit","providers","logDebugInfo","pid","enableDebugLogging","sessions","debuggersContributions","descriptorFactories","trackerFactories","contributionPaths","contributionTypes","onDidChangeBreakpointsEmitter","onDidChangeActiveDebugSessionEmitter","onDidTerminateDebugSessionEmitter","onDidStartDebugSessionEmitter","onDidReceiveDebugSessionCustomEmitter","_breakpoints","frontendAdapterCreator","PluginDebugAdapterCreator","backendAdapterCreator","NodeDebugAdapterCreator","activeDebugConsole","append","$appendToDebugConsole","appendLine","$appendLineToDebugConsole","configurationProviderHandleGenerator","configurationProviders","breakpoints","assistedInject","connectionExt","commandRegistryExt","registerDebuggersContributions","pluginType","contributions","contribution","$registerDebuggerContribution","onDidReceiveDebugSessionCustomEvent","onDidChangeActiveDebugSession","onDidTerminateDebugSession","onDidStartDebugSession","onDidChangeBreakpoints","addBreakpoints","$addBreakpoints","removeBreakpoints","removedIds","$removeBreakpoints","startDebugging","nameOrConfiguration","$startDebugging","stopDebugging","$stopDebugging","asDebugSourceUri","getDebugSourceUri","sourceReference","registerDebugAdapterDescriptorFactory","debugType","factory","registerDebugAdapterTrackerFactory","tuple","registerDebugConfigurationProvider","trigger","descriptor","provideDebugConfiguration","provideDebugConfigurations","resolveDebugConfigurations","resolveDebugConfiguration","resolveDebugConfigurationWithSubstitutedVariables","$registerDebugConfigurationProvider","$unregisterDebugConfigurationProvider","activeDebugSession","bExt","toBreakpointExt","functionName","enabled","hitCondition","logMessage","FunctionBreakpoint","SourceBreakpoint","debugConfiguration","workspaceFolderUri","uuid","v4","theiaSession","toWorkspaceFolder","customRequest","$customRequest","success","getDebugProtocolBreakpoint","breakpoint","$getDebugProtocolBreakpoint","createDebugAdapterTracker","communicationProvider","createDebugAdapter","debugAdapterSession","PluginDebugAdapterSession","ensureConnection","doGetTerminalCreationOptions","getConfigurationProviderRecord","record","PluginDebugAdapterTracker","executable","resolveDebugAdapterExecutable","descriptorFactory","getAdapterCreator","adapterExecutableCommand","contributionPath","_pluginPath","_debuggerContribution","_debugConfiguration","createDebugAdapterDescriptor","DebugAdapterInlineImplementation","connectInlineDebugAdapter","adapter","InlineDebugAdapter","implementation","DebugAdapterSessionImpl","onWillStartSession","onWillStopSession","onWillReceiveMessage","onExit","trackers","factories","DecorationsExtImpl","providersMap","registerFileDecorationProvider","pluginInfo","$registerDecorationProvider","onDidChangeFileDecorations","$onDidChange","maxEventSize","compareFn","groupBy","rank","picked","outer","lastDirname","myDirname","$unregisterDecorationProvider","requests","provideFileDecoration","FileDecoration","propagate","badge","color","showOpenDialog","optionsMain","openLabel","defaultUri","canSelectFiles","canSelectFolders","canSelectMany","filters","$showOpenDialog","catch","showSaveDialog","saveLabel","$showSaveDialog","showUploadDialog","$showUploadDialog","_modeId2WordDefinition","getWordDefinitionFor","modeId","regExpLeadsToEndlessLoop","wordDefinition","languageId","versionId","textLines","dirty","onEvents","lineStarts","acceptDeleteRange","acceptInsertText","acceptIsDirty","acceptLanguageId","_document","fileName","isUntitled","save","getText","getTextInRange","EndOfLine","LF","CRLF","lineAt","lineOrPos","offsetAt","positionAt","validateRange","ran","validatePosition","getWordRangeAtPosition","insertText","insertLines","setLineText","newLengths","insertValues","removeValues","lineIndex","newValue","changeValue","$trySaveDocument","isSingleLine","lineEnding","startLineIndex","endLineIndex","resultLines","hasChanged","maxCharacter","lineOrPosition","firstNonWhitespaceCharacterIndex","rangeIncludingLineBreak","isEmptyOrWhitespace","ensureLineStarts","getAccumulatedValue","eolLength","linesLength","lineStartValues","PrefixSumComputer","getIndexOf","lineLength","remainder","_position","wordAtText","getWordAtText","ensureValidWordDefinition","_onDidAddDocument","_onDidRemoveDocument","_onDidChangeDocument","_onDidSaveTextDocument","_onWillSaveTextDocument","onDidAddDocument","onDidRemoveDocument","onDidChangeDocument","onDidSaveTextDocument","onWillSaveTextDocument","loadingDocuments","onDidAddDocuments","onDidRemoveDocuments","$acceptModelModeChanged","startUrl","oldModeId","newModeId","uriString","$acceptModelSaved","strUrl","$acceptDirtyStateChanged","saveTimeout","operations","didTimeout","didTimeoutHandle","sequence","fireEvent","fireTextDocumentWillSaveEvent","accept","promises","allEdits","TextEdit","isTextEdit","Converter","fromTextEdit","contentChanges","$acceptModelChanged","rangeOffset","rangeLength","getAllDocumentData","allDocuments","loadingDocument","loadDocument","$tryOpenDocument","documentOptions","selection","preserveFocus","preview","viewColumn","$tryShowDocument","$tryCreateDocument","setWordDefinitionFor","activeEditorId","_onDidAddDocuments","_onDidRemoveDocuments","_onDidChangeVisibleTextEditors","_onDidChangeActiveTextEditor","onDidChangeVisibleTextEditors","onDidChangeActiveTextEditor","editors","$acceptEditorsAndDocumentsDelta","removedDocuments","addedDocuments","removedEditors","DocumentDataExt","EOL","editor","addedEditors","documentUri","TextEditorExt","selections","toSelection","visibleRanges","toViewColumn","editorPosition","newActiveEditor","allEditors","activeEditor","getEditor","onDidChangeTelemetryEnabledEmitter","envSessionId","envMachineId","_isTelemetryEnabled","_remoteName","getEnvVariable","envVarName","$getEnvVariable","getQueryParameter","queryParamName","queryParameters","getQueryParameters","setQueryParameters","queryParams","setApplicationName","applicationName","setLanguage","lang","setShell","shell","defaultShell","setUIKind","uiKind","ui","setAppHost","appHost","getClientOperatingSystem","$getClientOperatingSystem","appName","isTelemetryEnabled","onDidChangeTelemetryEnabled","remoteName","machineId","FileSystemWatcher","dispatcher","globPattern","ignoreCreateEvents","ignoreChangeEvents","ignoreDeleteEvents","_onDidCreate","_onDidDelete","_config","created","deleted","onDidCreate","onDidDelete","_extHostDocumentsAndEditors","_mainThreadTextEditors","_onFileSystemEvent","_onDidRenameFile","_onDidCreateFile","_onDidDeleteFile","_onWillRenameFile","AsyncEmitter","_onWillCreateFile","_onWillDeleteFile","onDidRenameFile","onDidCreateFile","onDidDeleteFile","createFileSystemWatcher","$onFileEvent","$onDidRunFileOperation","files","oldUri","newUri","getOnWillRenameFileEvent","_createWillExecuteEvent","getOnWillCreateFileEvent","getOnWillDeleteFileEvent","wrappedListener","_fireWillEvent","WorkspaceEdit","typeConverter","fromWorkspaceEdit","$tryApplyWorkspaceEdit","FsLinkProvider","_schemes","_initStateMachine","schemes","prevScheme","prevState","lastState","commonPrefixLength","provideDocumentLinks","links","computeLinks","link","docLink","DocumentLink","ConsumerFileSystem","_proxy","$stat","_handleError","readDirectory","$readdir","createDirectory","$mkdir","$readFile","writeFile","$writeFile","$delete","recursive","useTrash","rename","$rename","copy","$copy","FileSystemError","FileSystemExtImpl","_extHostLanguageFeatures","_linkProvider","_fsProvider","_usedSchemes","_watches","fileSystem","_linkProviderRegistration","_registerLinkProviderIfNotYetRegistered","registerDocumentLinkProvider","registerFileSystemProvider","isCaseSensitive","isReadonly","$registerFileSystemProvider","onDidChangeFile","newType","FileChangeType","Changed","Created","Deleted","$onFileSystemChange","$unregisterProvider","_getFsProvider","_asIStat","opts","$watch","$unwatch","$open","$close","fd","$read","$write","mappings","createConversionFunction","fromPositionToP","CONVERT_VSCODE_TO_MONACO","argStack","cloneAndChange","CallHierarchyItem","isCallHierarchyItem","fromCallHierarchyItem","TextDocumentShowOptions","isTextDocumentShowOptions","fromTextDocumentShowOptions","isPosition","fromPosition","isRange","isLocation","fromLocation","vscodeToMonacoArgsConverter","CONVERT_MONACO_TO_VSCODE","monacoToVscodeArgsConverter","argsArray","conversions","conversion","isModelCallHierarchyItem","toCallHierarchyItem","isModelCallHierarchyIncomingCall","toCallHierarchyIncomingCall","isModelCallHierarchyOutgoingCall","toCallHierarchyOutgoingCall","isModelLocation","toLocation","toDo","$registerResourceLabelFormatter","formatter","$unregisterResourceLabelFormatter","serializeRegExp","flags","rules","beforeText","afterText","previousLineText","action","indentationRules","increaseIndentPattern","decreaseIndentPattern","indentNextLinePattern","unIndentedLinePattern","adaptersMap","statusItemHandlePool","statusItemIds","diagnostics","Diagnostics","onDidChangeDiagnostics","getLanguages","$getLanguages","changeLanguage","$changeLanguage","doc","setLanguageConfiguration","wordPattern","nextCallId","brackets","onEnterRules","serializeEnterRules","serializeIndentation","$setLanguageConfiguration","createDisposable","$unregister","addNewAdapter","fallbackValue","transformDocumentSelector","isReadonlyArray","sel","doTransformDocumentSelector","$serialized","$provideCompletionItems","withAdapter","CompletionAdapter","provideCompletionItems","$resolveCompletionItem","chainedId","resolveCompletionItem","$releaseCompletionItems","releaseCompletionItems","registerCompletionItemProvider","triggerCharacters","$registerCompletionSupport","hasResolveSupport","$provideDefinition","DefinitionAdapter","provideDefinition","registerDefinitionProvider","$registerDefinitionProvider","$provideDeclaration","DeclarationAdapter","provideDeclaration","registerDeclarationProvider","$registerDeclarationProvider","$provideSignatureHelp","SignatureHelpAdapter","provideSignatureHelp","$releaseSignatureHelp","releaseSignatureHelp","registerSignatureHelpProvider","$registerSignatureHelpProvider","getDiagnostics","createDiagnosticCollection","$provideImplementation","ImplementationAdapter","provideImplementation","registerImplementationProvider","$registerImplementationProvider","$provideTypeDefinition","TypeDefinitionAdapter","provideTypeDefinition","registerTypeDefinitionProvider","$registerTypeDefinitionProvider","registerHoverProvider","HoverAdapter","$registerHoverProvider","$provideHover","provideHover","registerEvaluatableExpressionProvider","EvaluatableExpressionAdapter","$registerEvaluatableExpressionProvider","$provideEvaluatableExpression","provideEvaluatableExpression","registerDocumentHighlightProvider","DocumentHighlightAdapter","$registerDocumentHighlightProvider","$provideDocumentHighlights","provideDocumentHighlights","registerWorkspaceSymbolProvider","WorkspaceSymbolAdapter","$registerWorkspaceSymbolProvider","$provideWorkspaceSymbols","provideWorkspaceSymbols","$resolveWorkspaceSymbol","symbol","resolveWorkspaceSymbol","registerDocumentFormattingEditProvider","DocumentFormattingAdapter","$registerDocumentFormattingSupport","$provideDocumentFormattingEdits","provideDocumentFormattingEdits","registerDocumentRangeFormattingEditProvider","RangeFormattingAdapter","$registerRangeFormattingSupport","$provideDocumentRangeFormattingEdits","provideDocumentRangeFormattingEdits","registerOnTypeFormattingEditProvider","OnTypeFormattingAdapter","$registerOnTypeFormattingProvider","$provideOnTypeFormattingEdits","provideOnTypeFormattingEdits","$provideDocumentLinks","LinkProviderAdapter","provideLinks","$resolveDocumentLink","resolveLink","$registerDocumentLinkProvider","$releaseDocumentLinks","ids","releaseDocumentLinks","registerCodeActionsProvider","CodeActionAdapter","documentation","$registerQuickFixProvider","providedCodeActionKinds","$provideCodeActions","rangeOrSelection","provideCodeAction","$releaseCodeActions","cacheIds","releaseCodeActions","$resolveCodeAction","cacheId","resolveCodeAction","registerCodeLensProvider","CodeLensAdapter","eventHandle","onDidChangeCodeLenses","$registerCodeLensSupport","$emitCodeLensEvent","$provideCodeLenses","provideCodeLenses","$resolveCodeLens","resolveCodeLens","$releaseCodeLenses","releaseCodeLenses","$provideReferences","ReferenceAdapter","provideReferences","registerReferenceProvider","$registerReferenceProvider","registerDocumentSymbolProvider","OutlineAdapter","getPluginLabel","$registerOutlineSupport","$provideDocumentSymbols","provideDocumentSymbols","registerColorProvider","ColorProviderAdapter","$registerDocumentColorProvider","$provideDocumentColors","provideColors","$provideColorPresentations","colorInfo","provideColorPresentations","registerFoldingRangeProvider","FoldingProviderAdapter","$registerFoldingRangeProvider","$provideFoldingRange","provideFoldingRanges","registerSelectionRangeProvider","SelectionRangeProviderAdapter","$registerSelectionRangeProvider","$provideSelectionRanges","positions","provideSelectionRanges","registerRenameProvider","RenameAdapter","$registerRenameProvider","supportsResolving","$provideRenameEdits","newName","provideRenameEdits","$resolveRenameLocation","resolveRenameLocation","registerCallHierarchyProvider","CallHierarchyAdapter","$registerCallHierarchyProvider","$provideRootDefinition","provideRootDefinition","$provideCallers","definition","provideCallers","$provideCallees","provideCallees","$releaseCallHierarchy","releaseSession","registerLinkedEditingRangeProvider","LinkedEditingRangeAdapter","$registerLinkedEditingRangeProvider","$provideLinkedEditingRanges","provideRanges","registerDocumentSemanticTokensProvider","legend","onDidChangeSemanticTokens","DocumentSemanticTokensAdapter","$registerDocumentSemanticTokensProvider","$emitDocumentSemanticTokensEvent","$provideDocumentSemanticTokens","previousResultId","provideDocumentSemanticTokens","$releaseDocumentSemanticTokens","semanticColoringResultId","releaseDocumentSemanticColoring","registerDocumentRangeSemanticTokensProvider","DocumentRangeSemanticTokensAdapter","$registerDocumentRangeSemanticTokensProvider","$provideDocumentRangeSemanticTokens","provideDocumentRangeSemanticTokens","createLanguageStatusItem","fullyQualifiedId","LanguageStatusSeverity","detail","busy","soonHandle","commandDisposables","updateAsync","disposableTimeout","$setLanguageStatus","accessibilityInfo","accessibilityInformation","$removeLanguageStatus","sessionIds","prepareCallHierarchy","callers","provideCallHierarchyIncomingCalls","fromCallHierarchyIncomingCall","_sessionId","callees","provideCallHierarchyOutgoingCalls","fromCallHierarchyOutgoingCall","sessionCache","itemId","selectionRange","tags","_itemId","cached","caller","fromRanges","pluginId","_isSelection","allDiagnostics","diagnostic","intersection","codeActionContext","only","CodeActionKind","commandsOrActions","provideCodeActions","nextCacheId","_isCommand","convertDiagnosticToMarkerData","disabled","isPreferred","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","provideDocumentColors","colors","fromColor","toColor","fromColorPresentation","toPosition","replacing","inserting","completions","defaultRange","insert","CompletionList","incomplete","isIncomplete","suggestion","convertCompletionItem","parentId","resolvedItem","defaultInserting","defaultReplacing","itemLabel","insertTextRules","keepWhitespace","KeepWhitespace","textEdit","newText","SnippetString","InsertAsSnippet","itemRange","deprecated","CompletionItemTag","Deprecated","fromCompletionItemKind","filterText","sortText","preselect","additionalTextEdits","commitCharacters","zeroBasedPosition","isLocationArray","isDefinitionLinkArray","definitionLinks","definitionLink","fromDefinitionLink","DiagnosticCollection","maxCountPerFile","onDidChangeDiagnosticsEmitter","collectionName","diagnosticsLimitPerResource","onDisposeCallback","ensureNotDisposed","setDiagnosticsForUri","setDiagnostics","fireDiagnosticChangeEvent","sendChangesToEditor","existedDiagnostics","$changeDiagnostics","getAllResourcesUris","$clearDiagnostics","getDiagnosticsByUri","setOnDisposeCallback","resourcesUris","toUrisArray","markers","nextUri","uriMarkers","uriDiagnostics","DIAGNOSTICS_PRIORITY","lastMarker","diagnosticsChangedEmitter","diagnosticCollections","getAllDiagnosticsForResource","getAllDiagnostics","GENERATED_DIAGNOSTIC_COLLECTION_NAME_PREFIX","getNextId","diagnosticCollection","MAX_DIAGNOSTICS_PER_FILE","urisIndexes","nextIndex","diagnosticsCollection","uriIndex","documentHighlights","isDocumentHighlightArray","highlights","highlight","fromDocumentHighlight","DocumentHighlight","fromEvaluatableExpression","fromFoldingRange","fromHover","lenses","lens","lensSymbol","newLens","isResolved","BAD_CMD","resolveDocumentLink","provideLinkedEditingRanges","coalesce","DocumentSymbol","fromDocumentSymbol","asDocumentSymbolTree","infos","compareTo","parentStack","fromSymbolKind","containerName","fromSymbolTag","containsRange","equalsRange","otherRange","prepareRename","rejectReason","asMessage","rangeOrLocation","placeholder","allProviderRanges","allResults","oneResult","fromSelectionRange","SemanticTokensPreviousResult","resultId","tokens","_provider","_nextResultId","_previousResults","previousResult","provideDocumentSemanticTokensEdits","_fixProvidedSemanticTokens","_send","_convertToEdits","_isSemanticTokens","_isCorrectSemanticTokens","SemanticTokens","_isSemanticTokensEdits","_isCorrectSemanticTokensEdits","SemanticTokensEdits","SemanticTokensEdit","newResult","oldData","oldLength","newData","newLength","maxCommonPrefixLength","commonSuffixLength","maxCommonSuffixLength","original","encodeSemanticTokensDto","idSequence","pluginHelpContext","reviveContext","activeParameter","signatures","activeSignature","SignatureHelp","activeSignatureHelp","revivedSignatureHelp","saved","workspaceSymbols","newSymbols","sym","convertedSymbol","fromSymbolInformation","theiaSymbol","toSymbolInformation","workspaceSymbol","baseUri","plainObject","es5ClassCompat","optionsOrFirstItem","actions","pushItem","isCloseAffordance","onCloseActionHandle","modal","actionHandle","$showMessage","debuggerContribution","toPlatformInfo","program","programArgs","runtime","runtimeArgs","DebugAdapterServer","connectSocketDebugAdapter","DebugAdapterExecutable","startDebugAdapter","DebugAdapterNamedPipeServer","connectPipeDebugAdapter","debugServer","winx86","windows","osx","linux","stdio","childProcess","forkOptions","execArgv","silent","fork","spawn","ProcessDebugAdapter","server","net","createConnection","SocketDebugAdapter","mapProgressIdToCancellationSource","progress","report","$updateProgress","mapLocation","cancellable","$startProgress","progressId","$stopProgress","$acceptProgressCanceled","viewId","ProgressLocation","Notification","SourceControl","Window","createOutputChannel","OutputChannelImpl","$dispose","$append","$clear","show","$reveal","hide","ExtensionKind","editorsAndDocumentsExt","clipboard","authenticationExt","AuthenticationExtImpl","commandRegistry","CommandRegistryImpl","quickOpenExt","QuickOpenExtImpl","dialogsExt","DialogsExtImpl","windowStateExt","WindowStateExtImpl","notificationExt","NotificationExtImpl","TextEditorsExtImpl","DocumentsExtImpl","statusBarMessageRegistryExt","StatusBarMessageRegistryExt","terminalExt","outputChannelRegistryExt","OutputChannelRegistryExtImpl","languagesExt","LanguagesExtImpl","treeViewsExt","TreeViewsExtImpl","tasksExt","TasksExtImpl","ConnectionImpl","fileSystemExt","extHostFileSystemEvent","scmExt","ScmExtImpl","decorationsExt","labelServiceExt","LabelServiceExtImpl","timelineExt","TimelineExtImpl","themingExt","ThemingExtImpl","commentsExt","CommentsExtImpl","customEditorExt","CustomEditorsExtImpl","webviewViewsExt","WebviewViewsExtImpl","authentication","getSession","rawCommands","contributes","contributedCommands","registerTextEditorCommand","activeTextEditor","getActiveEditor","getCommands","filterInternal","registerDiffInformationCommand","onDidChangeActiveTerminal","onDidCloseTerminal","onDidOpenTerminal","activeTerminal","visibleTextEditors","getVisibleTextEditors","terminals","onDidChangeTextEditorSelection","onDidChangeTextEditorOptions","onDidChangeTextEditorViewColumn","onDidChangeTextEditorVisibleRanges","documentArg","columnOrOptions","showDocument","textEditor","showQuickPick","createQuickPick","showWorkspaceFolderPick","pickWorkspaceFolder","showInformationMessage","showMessage","showWarningMessage","showErrorMessage","setStatusBarMessage","showInputBox","showInput","createStatusBarItem","alignmentOrId","priorityOrAlignment","priorityArg","alignment","priority","pluginToPluginInfo","showOptions","createWebview","registerWebviewPanelSerializer","serializer","registerWebviewViewProvider","getWindowState","onDidChangeWindowState","createTerminal","nameOrOptions","shellPath","shellArgs","createTextEditorDecorationType","registerTreeDataProvider","treeDataProvider","createTreeView","withProgress","registerUriHandler","createInputBox","registerTerminalLinkProvider","activeColorTheme","onDidChangeActiveColorTheme","fs","rootPath","workspaceFolders","workspaceFile","onDidChangeWorkspaceFolders","textDocuments","onDidChangeTextDocument","onDidCloseTextDocument","onDidOpenTextDocument","onDidCreateFiles","onDidDeleteFiles","onDidRenameFiles","onWillCreateFiles","onWillDeleteFiles","onWillRenameFiles","getConfiguration","onDidChangeConfiguration","uriOrFileNameOrOptions","createDocumentData","openDocument","ignoreCreate","ignoreChange","ignoreDelete","fromGlobPattern","findFiles","include","exclude","maxResults","findTextInFiles","optionsOrCallback","callbackOrToken","saveAll","includeUntitled","applyEdit","applyWorkspaceEdit","registerTextDocumentContentProvider","getWorkspaceFolder","asRelativePath","pathOrUri","includeWorkspace","getRelativePath","updateWorkspaceFolders","workspaceFoldersToAdd","registerTaskProvider","tasks","registerResourceLabelFormatter","registerTimelineProvider","trusted","requestWorkspaceTrust","onDidGrantWorkspaceTrust","onDidChangeLogLevel","openExternal","openUri","asExternalUri","logLevel","LogLevel","languages","setTextDocumentLanguage","fromDocumentSelector","remaining","retriggerCharacters","firstTriggerCharacter","moreTriggerCharacters","getAllPlugins","PluginExt","getPlugin","getPluginById","debuggers","triggerKind","Initial","parentSessionOrOptions","parentSession","fetchTasks","executeTask","taskExecutions","onDidStartTask","onDidEndTask","onDidStartTaskProcess","onDidEndTaskProcess","scm","inputBox","getLastInputBox","createSourceControl","rootUri","StatusBarAlignment","EventEmitter","Selection","ViewColumn","TextEditorSelectionChangeKind","TextEditorLineNumbersStyle","ThemeColor","ThemeIcon","DecorationRangeBehavior","OverviewRulerLane","ConfigurationTarget","RelativePattern","IndentAction","CompletionItem","DebugConsoleMode","DiagnosticRelatedInformation","DiagnosticTag","Diagnostic","ProgressOptions","Progress","ParameterInformation","QuickPickItemKind","SignatureInformation","SignatureHelpTriggerKind","Hover","EvaluatableExpression","CodeLens","CodeActionTrigger","CodeActionTriggerKind","TextDocumentSaveReason","CodeAction","TreeItem","TreeItemCollapsibleState","SymbolInformation","ShellQuoting","ShellExecution","ProcessExecution","CustomExecution","TaskScope","TaskRevealKind","TaskPanelKind","TaskGroup","Task","Task2","Breakpoint","Color","ColorInformation","ColorPresentation","FoldingRange","SelectionRange","OperatingSystem","WebviewPanelTargetArea","QuickInputButtons","CallHierarchyIncomingCall","CallHierarchyOutgoingCall","TimelineItem","EnvironmentVariableMutatorType","SemanticTokensLegend","SemanticTokensBuilder","TextDocumentChangeReason","ColorThemeKind","SourceControlInputBoxValidationType","ExtensionMode","LinkedEditingRanges","InputBoxValidationSeverity","Plugin","packageJSON","isActive","getPluginExport","activate","activatePlugin","extensionPath","extensionUri","extensionKind","UI","PluginIconPath","asString","light","dark","ActivatedPlugin","pluginContext","stopFn","secrets","preferencesManager","registry","activations","loadedPlugins","activatedPlugins","pluginContextsMap","onDidChangeEmitter","jsonValidation","messageRegistryProxy","notificationMain","fireOnDidChange","stopAll","stopPlugin","terminating","subscriptions","params","init","globalState","workspaceState","preferences","configStorage","foreignPlugins","registerPlugin","$activateByEvent","activationEvent","activationEvents","loadTests","activation","$activatePlugin","setActivation","unsupportedActivationEvents","SUPPORTED_ACTIVATION_EVENTS","visited","loading","extensionDependencies","dependencyId","dependency","pluginMain","startPlugin","hostStoragePath","storagePath","baseEvent","activateByBaseEvent","activateBySingleEvent","pendingActivations","logPath","hostLogPath","SecretStorageExt","globalStoragePath","hostGlobalStoragePath","extensionModeValue","Development","Production","GlobalState","Memento","asAbsolutePath","storageUri","globalStorageUri","environmentVariableCollection","getEnvironmentVariableCollection","extensionMode","logUri","pluginExport","activePlugin","isRunning","isPluginGlobalData","storage","getPerPluginData","storageDataChangedEvent","setPerPluginData","setKeysForSync","storageDataChangedEmitter","initGlobalData","initWorkspaceData","globalDataCache","workspaceDataCache","isGlobal","$set","$updatePluginsWorkspaceData","workspaceData","injectionRe","PreferenceScope","lookUp","tree","TheiaWorkspace","Workspace","_onDidChangeConfiguration","OVERRIDE_PROPERTY","OVERRIDE_KEY_TEST","_preferences","$acceptConfigurationChanged","eventData","toConfigurationChangeEvent","rawSection","rawScope","parseConfigurationAccessOptions","toReadonlyValue","clonedConfig","cloneOnWriteProxy","accessor","clonedTarget","cloneTarget","cloneDeep","targ","writable","deleteProperty","descr","targetScope","withLanguageOverride","resourceStr","fullPath","$updateConfigurationOption","$removeConfigurationOption","configInspect","globalValue","readonlyProxy","isExtensible","preventExtensions","getConfigurationModel","Default","User","Folder","configData","parseConfigurationData","branch","isOverride","sectionWithLanguage","matchesUri","sliceIndex","preferenceName","changedPreferenceName","MAX_UINT_32","toUint32","PrefixSumIndexOfResult","prefixSum","prefixSumValidIndex","getCount","oldValues","oldPrefixSum","insertValuesLen","maxCount","getTotalValue","_getAccumulatedValue","accumulatedValue","midStop","midStart","isPromiseCanceledError","getIconUris","getDarkIconUri","getLightIconUri","_sessions","_instances","itemsOrItemsPromise","onDidSelectItem","itemsPromise","widgetPromise","$show","canPickMany","placeHolder","matchOnDescription","matchOnDetail","ignoreFocusLost","ignoreFocusOut","widgetClosedMarker","widgetClosedPromise","pickItems","convertToTransferQuickPickItems","$setItems","h","$setError","$onItemSelected","validateInputHandler","validateInput","$input","$showInputBox","QuickPickExt","InputBoxExt","$hide","_fireAccept","changedValue","_fireChangedValue","_fireHide","btn","_fireButtonTrigger","Back","btnFromIndex","buttons","$onDidChangeActive","handles","_fireDidChangeActive","$onDidChangeSelection","_fireDidChangeSelection","QuickInputExt","quickOpen","quickOpenMain","_onDidDispose","_nextId","_buttons","_handlesToButtons","expectingHide","_pendingUpdate","step","totalSteps","visible","disposableCollection","onDidAcceptEmitter","_onDidChangeValueEmitter","onDidHideEmitter","onDidTriggerButtonEmitter","_title","_step","_totalSteps","_enabled","_busy","_ignoreFocusOut","_placeholder","button","_updateTimeout","dispatchUpdate","$createOrUpdate","convertURL","onDidHide","onDidAccept","onDidChangeValue","onDidTriggerButton","password","_password","prompt","_prompt","validationMessage","_validationMessage","_items","_handlesToItems","_itemsToHandles","_canSelectMany","_matchOnDescription","_matchOnDetail","_sortByLabel","_keepScrollPosition","_activeItems","_selectedItems","_onDidChangeActiveEmitter","_onDidChangeSelectionEmitter","onDidChangeActive","onDidChangeSelection","Separator","alwaysShow","sortByLabel","keepScrollPosition","activeItems","selectedItems","getIconResource","decorations","comparePaths","oneParts","otherParts","lastOne","lastOther","endOne","endOther","toLocaleLowerCase","comparePathComponents","compareResourceThemableDecorations","compareResourceStates","resourceUri","aArg","bArg","compareCommands","strikeThrough","faded","localeCompare","compareResourceStatesDecorations","commandEquals","compareArgs","ScmInputBoxImpl","sourceControlHandle","_visible","$setInputBoxValue","$setInputBoxPlaceholder","$setInputBoxVisible","_validateInput","onInputBoxValueChange","SsmResourceGroupImpl","resourceHandlePool","_resourceStates","resourceStatesMap","resourceStatesCommandsMap","resourceStatesDisposablesMap","onDidUpdateResourceStatesEmitter","onDidUpdateResourceStates","onDidDisposeEmitter","onDidDispose","handlesSnapshot","resourceSnapshot","_hideWhenEmpty","handlePool","$updateGroupLabel","hideWhenEmpty","$updateGroup","features","resourceStates","resources","getResourceState","executeResourceCommand","takeResourceStateSnapshot","sourceUri","iconUri","lightIconUri","darkIconUri","icons","rawResource","letter","colorId","rawResourceSplices","rawResources","reverseSplices","handlesToDelete","SourceControlImpl","_rootUri","_count","_quickDiffProvider","_commitTemplate","_acceptInputCommand","_statusBarDisposables","_statusBarCommands","_selected","onDidChangeSelectionEmitter","createdResourceGroups","updatedResourceGroups","_inputBox","$registerSourceControl","$updateSourceControl","quickDiffProvider","hasQuickDiffProvider","commitTemplate","acceptInputCommand","statusBarCommands","selected","createResourceGroup","eventuallyAddResourceGroups","updateListener","eventuallyUpdateResourceStates","$unregisterGroup","$registerGroups","$spliceResourceStates","getResourceGroup","setSelectionState","$unregisterSourceControl","sourceControls","sourceControlsByExtension","onDidChangeActiveProviderEmitter","sourceControl","resourceGroupHandle","resourceGroup","resourceStateHandle","onDidChangeActiveProvider","$provideOriginalResource","provideOriginalResource","$onInputBoxValueChange","$executeResourceCommand","groupHandle","cursorPosition","$setSelectedSourceControl","selectedSourceControlHandle","onDidChangePasswordEmitter","onDidChangePassword","$getPassword","$setPassword","$deletePassword","pluginDescription","secretState","statusMessage","StatusBarMessage","timeoutOrThenable","setMessage","StatusBarItemImpl","statusBar","_messages","_item","Left","MIN_VALUE","_update","_alignment","_priority","_text","_tooltip","_color","backgroundColor","_backgroundColor","_command","_accessibilityInformation","BACKGROUND_COLORS","information","_isVisible","_timeoutHandle","$setMessage","ID_PREFIX","provideTasks","fromTask","resolveTask","toTask","executions","callbackIdBase","customExecutionIds","customExecutionFunctions","onDidExecuteTask","onDidTerminateTask","onDidExecuteTaskProcess","onDidTerminateTaskProcess","execution","terminalId","customExecution","executionId","taskDefinition","pty","attachPtyToTerminal","onDidClose","$customExecutionComplete","lastStartedTask","getTaskExecution","$onDidEndTask","taskExecution","$onDidStartTaskProcess","processId","executionDto","$onDidEndTaskProcess","exitCode","taskId","TaskProviderAdapter","$registerTaskProvider","taskVersion","taskType","$fetchTasks","dto","taskDto","addCustomExecution","$executeTask","$provideTasks","$resolveTask","resolvedTask","terminate","$terminateTask","nextCallbackId","callbackId","_terminals","_pseudoTerminals","onDidCloseTerminalEmitter","onDidOpenTerminalEmitter","onDidChangeActiveTerminalEmitter","environmentVariableCollections","pseudoTerminal","PseudoTerminal","$createTerminal","obtainTerminal","terminal","TerminalExtImpl","$terminalOnInput","emitOnInput","$terminalSizeChanged","clos","emitOnResize","$terminalCreated","$terminalNameChanged","$terminalOpened","deferredProcessId","emitOnOpen","$terminalClosed","exitStatus","emitOnClose","activeTerminalId","$currentTerminalChanged","extensionIdentifier","collection","EnvironmentVariableCollection","setEnvironmentVariableCollection","syncEnvironmentVariableCollection","serialized","$setEnvironmentVariableCollection","persistent","onDidChangeCollection","$initEnvironmentVariableCollections","collections","_persistent","onDidChangeCollectionEmitter","variable","_setIfDiffers","Replace","Append","prepend","Prepend","mutator","sendText","addNewLine","$sendText","waitOnExit","onDidWrite","$writeByTerminalId","$disposeByTerminalId","onDidOverrideDimensions","$resize","columns","$resizeByTerminalId","handleInput","setDimensions","_selections","_visibleRanges","TextEditorOptionsExt","_viewColumn","readonly","acceptViewColumn","acceptOptions","illegalArgument","trySetSelection","fromSelection","runOnProxy","$trySetSelections","acceptSelections","acceptVisibleRanges","_acceptViewColumn","undoStopBefore","undoStopAfter","TextEditorEdit","insertSnippet","snippet","posOrRange","$tryInsertSnippet","setDecorations","decorationType","rangesOrOptions","isDecorationOptionsArr","$trySetDecorations","fromRangeOrRangeWithMessage","$trySetDecorationsFast","revealRange","revealType","$tryRevealRange","editData","finalize","editRanges","rangeEnd","isBefore","forceMoveMarkers","$tryApplyEdits","documentVersionId","setEndOfLine","$tryShowTextDocument","$tryHideEditor","_tabSize","tabSize","_insertSpace","insertSpaces","_cursorStyle","_lineNumbers","lineNumbers","validateTabSize","warnOnError","$trySetOptions","validateInsertSpaces","newOptions","configurationUpdate","hasUpdate","collectedEdits","endOfLine","moveMarkers","validatedRange","_onDidChangeTextEditorSelection","_onDidChangeTextEditorOptions","_onDidChangeTextEditorVisibleRanges","_onDidChangeTextEditorViewColumn","$acceptEditorPropertiesChanged","props","Converters","$acceptEditorPositionData","TextEditorDecorationType","$saveAll","Keys","$registerTextEditorDecorationType","DecorationRenderOptions","$removeTextEditorDecorationType","IdGenerator","ColorTheme","Dark","_onDidChangeActiveColorTheme","$onColorThemeChange","convertKind","Light","HighContrast","itemsBySourceAndUriMap","timelineHandle","internalOptions","provideTimeline","timelineDisposables","convertTimelineItem","$fireTimelineChanged","registerTimelineProviderCore","resetCache","convertItem","sourceMap","cacheResults","itemsByUri","uriKey","getUriKey","timestamp","$registerTimelineProvider","$unregisterTimelineProvider","treeViews","treeViewId","treeItemId","treeView","getTreeItem","TreeViewExtImpl","onDidExpandElement","onDidCollapseElement","selectedElements","onDidChangeVisibility","reveal","revealOptions","getTreeView","getChildren","expanded","onExpanded","onCollapsed","treeItemIds","setSelection","isVisible","setVisible","onDidExpandElementEmitter","onDidCollapseElementEmitter","onDidChangeVisibilityEmitter","nodes","pendingRefresh","clearAll","_message","_description","selectedItemIds","$registerTreeDataProvider","$unregisterTreeDataProvider","onDidChangeTreeData","$refresh","elementParentChain","calculateRevealParentChain","select","focus","expand","$setTitle","$setDescription","getParent","treeItem","cachedParentNode","idLabel","getTreeItemIdLabel","possibleIndex","candidateId","buildTreeItemId","getTreeItemLabel","treeItemLabel","getTreeItemLabelHighlights","parentNode","clearChildren","treeItemPromises","toDisposeElement","icon","iconUrl","themeIcon","cachedElement","toDelete","doSetSelection","selectedItemIts","BUILD_GROUP","TEST_GROUP","fromViewColumn","One","Beside","something","fromManyMarkdown","markup","toMarkdown","implemented","convertSeverity","convertRelatedInformation","diagnosticsRelatedInformation","relatedInformation","convertTags","markerTags","tag","Unnecessary","ThemableDecorationRenderOptions","ThemableDecorationAttachmentRenderOptions","fromDocumentHighlightKind","Text","Read","Write","toSymbolTag","isModelRange","isUriComponents","toSymbolKind","fromProcessExecution","fromShellExecution","getShellExecutionOptions","commandLine","getShellArgs","fromCustomExecution","getProcessExecution","getShellExecution","getCustomExecution","shellQuoting","fromFoldingRangeKind","pathOrURIToURI","ep","ONE","TWO","Two","THREE","Three","FOUR","Four","FIVE","Five","SIX","Six","SEVEN","Seven","EIGHT","Eight","NINE","Nine","area","Main","active","hoverMessage","renderOptions","Method","Function","Constructor","Field","Variable","Class","Interface","Struct","Module","Property","Unit","Value","Constant","Enum","EnumMember","Keyword","Snippet","Reference","Operator","TypeParameter","Issue","hover","evaluatableExpression","targetUri","targetRange","originSelectionRange","targetSelectionRange","documentHighlight","parameters","help","_allEntries","uriOrEdits","modelVersionId","fromMapping","Namespace","Package","Key","Null","toDocumentSymbol","hasProblemMatchers","problemMatcher","problemMatchers","presentationOptions","presentation","Build","Test","symbolInformation","p1","lstypes","p2","foldingRange","red","green","blue","alpha","colorPresentation","isWholeLine","rangeBehavior","overviewRulerLane","outline","outlineColor","outlineStyle","outlineWidth","border","borderColor","borderRadius","borderSpacing","borderStyle","borderWidth","fontStyle","fontWeight","textDecoration","cursor","opacity","letterSpacing","gutterIconPath","gutterIconSize","overviewRulerColor","OpenOpen","AlwaysGrowsWhenTypingAtEdges","ClosedClosed","NeverGrowsWhenTypingAtEdges","OpenClosed","GrowsOnlyWhenTypingBefore","ClosedOpen","GrowsOnlyWhenTypingAfter","contentText","contentIconPath","margin","width","revived","Keyboard","Mouse","Command","_line","_character","isBeforeOrEqual","isAfter","isAfterOrEqual","translate","lineDeltaOrChange","characterDelta","lineDelta","lineOrChange","startLineOrStart","startColumnOrEnd","endLine","_start","_end","positionOrRange","Max","Min","union","startOrChange","anchorLineOrAnchor","anchorColumnOrActive","activeLine","activeColumn","_anchor","_active","isReversed","_tabstop","string","appendTabstop","number","appendPlaceholder","nested","appendChoice","appendVariable","_newText","newEol","_newEol","rangeOrPosition","intersects","Empty","QuickFix","Refactor","RefactorExtract","RefactorInline","RefactorRewrite","Source","SourceOrganizeImports","SourceFixAll","_edits","renameFile","_type","createFile","deleteFile","textEdits","rangeOrContainer","locationOrUri","uriOrMessage","terminator","captureStackTrace","messageOrUri","varg1","varg2","executionProcess","executionOptions","shellCommand","shellOptions","shellCommandLine","_callback","groupId","Clean","Rebuild","taskProblemMatchers","hasTaskProblemMatchers","isTaskBackground","taskScope","taskName","isBackground","taskSource","taskGroup","taskPresentationOptions","impl","ColorFormat","tokenTypes","tokenModifiers","_prevLine","_prevChar","_dataIsSortedAndDeltaEncoded","_dataLen","_tokenTypeStrToInt","_tokenModifierStrToInt","_hasLegend","arg4","_pushEncoded","_push","tokenType","nTokenType","nTokenModifiers","tokenModifier","tokenCount","prevLine","prevChar","pushLine","pushChar","aLine","bLine","srcOffset","dstOffset","build","_sortAndDeltaEncode","webviewsExt","viewProviders","webviewViews","$registerWebviewViewProvider","retainContextWhenHidden","serializeBuffersForPostMessage","$unregisterWebviewViewProvider","webviewNoPanel","createNewWebview","revivedView","WebviewViewExtImpl","resolveWebviewView","webviewView","getWebviewView","deleteWebview","_viewType","_webview","assertNotDisposed","$setWebviewViewTitle","$setWebviewViewDescription","webviewPanels","webviews","serializers","initData","$onMessage","onMessageEmitter","getWebview","$onDidChangeWebviewPanelViewState","setActive","setViewColumn","onDidChangeViewStateEmitter","$onDidDisposeWebviewPanel","$deserializeWebviewPanel","viewState","revivedPanel","WebviewPanelImpl","deserializeWebviewPanel","webviewShowOptions","toWebviewPanelShowOptions","$createWebviewPanel","$registerSerializer","$unregisterSerializer","onDidReceiveMessage","asWebviewUri","webviewResourceRoot","cspSource","webviewCspSource","checkIsDisposed","_html","$setHtml","$setOptions","$postMessage","localResourceRoots","onDidChangeViewState","_showOptions","$disposeWebview","newTitle","_iconPath","$setIconPath","setShowOptions","windowStateChangedEmitter","windowStateCached","focused","$onWindowStateChanged","$openUri","$asExternalUri","USUAL_WORD_SEPARATORS","DEFAULT_WORD_REGEXP","allowInWords","createWordRegExp","textOffset","word","getWordAtPosSlow","getWordAtPosFast","messageService","workspaceFoldersChangedEmitter","documentContentProviders","searchInWorkspaceEmitter","workspaceSearchSequence","_trusted","didGrantWorkspaceTrustEmitter","workspaceFileUri","$onWorkspaceFoldersChanged","newFolders","roots","deltaFolders","refreshWorkspaceFile","$onWorkspaceLocationChanged","updateWorkSpace","$onTextSearchResult","searchRequestId","tRange","fileUri","lineText","searchId","currentFolders","foldersDiff","folder1","folder2","$pickWorkspaceFolder","includePattern","includeFolderUri","excludePatternOrDisregardExcludes","$startFileSearch","nextSearchID","searchResult","$findTextInFiles","onDidChangeSubscription","$registerTextDocumentContentProvider","$provideTextDocumentContent","$onTextDocumentContentChange","$unregisterTextDocumentContentProvider","documentURI","provideTextDocumentContent","resolveParent","hasFolder","folderPath","rootsToAdd","folderToAdd","currentWorkspaceFolders","newWorkspaceFolders","otherFolder","$updateWorkspaceFolders","$getWorkspace","$requestWorkspaceTrust","$onWorkspaceTrustChanged","trust","b64","getLens","validLen","placeHoldersLen","toByteArray","Arr","_byteLength","curByte","revLookup","fromByteArray","uint8","extraBytes","maxChunkLength","len2","encodeChunk","lookup","num","base64","ieee754","customInspectSymbol","SlowBuffer","INSPECT_MAX_BYTES","K_MAX_LENGTH","createBuffer","RangeError","buf","encodingOrOffset","encoding","isEncoding","ArrayBuffer","isView","arrayView","isInstance","fromArrayBuffer","fromArrayLike","fromArrayView","SharedArrayBuffer","valueOf","checked","numberIsNaN","fromObject","toPrimitive","assertSize","mustMatch","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","bidirectionalIndexOf","arrayIndexOf","indexSize","arrLength","valLength","readUInt16BE","foundIndex","hexWrite","strLen","parsed","utf8Write","blitBuffer","asciiWrite","byteArray","asciiToBytes","base64Write","ucs2Write","units","hi","lo","utf16leToBytes","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","bytesPerSequence","MAX_ARGUMENTS_LENGTH","decodeCodePointsArray","kMaxLength","TYPED_ARRAY_SUPPORT","foo","typedArraySupport","poolSize","allocUnsafeSlow","_isBuffer","y","swap16","swap32","swap64","toLocaleString","thisStart","thisEnd","thisCopy","targetCopy","isFinite","_arr","hexSliceLookupTable","checkOffset","checkInt","checkIEEE754","writeFloat","littleEndian","noAssert","writeDouble","newBuf","readUintLE","readUIntLE","mul","readUintBE","readUIntBE","readUint8","readUint16LE","readUInt16LE","readUint16BE","readUint32LE","readUint32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUintLE","writeUIntLE","writeUintBE","writeUIntBE","writeUint8","writeUint16LE","writeUInt16LE","writeUint16BE","writeUInt16BE","writeUint32LE","writeUint32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","copyWithin","INVALID_BASE64_RE","Infinity","leadSurrogate","base64clean","dst","alphabet","table","i16","_dbcs","DBCSCodec","UNASSIGNED","SEQ_START","NODE_START","UNASSIGNED_NODE","codecOptions","encodingName","mappingTable","decodeTables","decodeTableSeq","_addDecodeChunk","gb18030","commonThirdByteNodeIdx","commonFourthByteNodeIdx","firstByteNode","secondByteNode","thirdByteNode","fourthByteNode","defaultCharUnicode","encodeTableSeq","skipEncodeChars","encodeSkipVals","_fillEncodeTable","encodeAdd","uChar","_setEncodeChar","defCharSB","defaultCharSingleByte","DBCSEncoder","codec","seqObj","DBCSDecoder","nodeIdx","prevBytes","findIdx","decoder","_getDecodeTrieNode","addr","curAddr","writeTable","codeTrail","_getEncodeBucket","uCode","dbcsCode","_setEncodeSequence","oldVal","hasValues","subNodeEmpty","mbCode","subNodeIdx","newPrefix","nextChar","resCode","subtable","uChars","gbChars","prevOffset","seqStart","ptr","uCodeLead","bytesArr","modules","enc","InternalCodec","bomAware","InternalEncoderBase64","InternalEncoderCesu8","InternalDecoderCesu8","utf8","cesu8","unicode11utf8","ucs2","utf16le","binary","hex","_internal","InternalEncoder","InternalDecoder","StringDecoder","prevStr","acc","contBytes","accBytes","completeQuads","bufIdx","SBCSCodec","chars","asciiString","decodeBuf","encodeBuf","SBCSEncoder","SBCSDecoder","_sbcs","idx1","idx2","Utf16BECodec","Utf16BEEncoder","Utf16BEDecoder","overflowByte","Utf16Codec","Utf16Encoder","addBOM","getEncoder","Utf16Decoder","initialBufs","initialBufsLen","detectEncoding","bufs","defaultEncoding","charsProcessed","asciiCharsLE","asciiCharsBE","outer_loop","utf16be","buf2","utf16","getDecoder","resStr","trail","Utf32Codec","isLE","Utf32Encoder","Utf32Decoder","badChar","overflow","_writeCodepoint","codepoint","Utf32AutoCodec","Utf32AutoEncoder","Utf32AutoDecoder","invalidLE","invalidBE","bmpCharsLE","bmpCharsBE","_utf32","utf32le","utf32be","ucs4le","ucs4be","write32","utf32","ucs4","Utf7Codec","utf7","unicode11utf7","Utf7Encoder","Utf7Decoder","nonDirectChars","inBase64","base64Accum","base64Regex","base64Chars","plusChar","minusChar","andChar","Utf7IMAPCodec","Utf7IMAPEncoder","base64AccumIdx","Utf7IMAPDecoder","lastI","b64str","canBeDecoded","utf7imap","base64IMAPChars","PrependBOMWrapper","StripBOMWrapper","pass","PrependBOM","StripBOM","stripBOM","stream_module","bomHandling","encodings","skipDecodeWarning","encodingExists","getCodec","toEncoding","fromEncoding","_codecDataCache","_canonicalizeEncoding","codecDef","enableStreamingAPI","supportsStreams","IconvLiteEncoderStream","IconvLiteDecoderStream","encodeStream","decodeStream","Transform","conv","decodeStrings","_transform","_flush","collect","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","HASH_UNDEFINED","MAX_SAFE_INTEGER","argsTag","boolTag","dateTag","funcTag","genTag","mapTag","numberTag","objectTag","promiseTag","regexpTag","setTag","stringTag","symbolTag","weakMapTag","arrayBufferTag","dataViewTag","float32Tag","float64Tag","int8Tag","int16Tag","int32Tag","uint8Tag","uint8ClampedTag","uint16Tag","uint32Tag","reFlags","reIsHostCtor","reIsUint","cloneableTags","freeGlobal","freeSelf","freeExports","nodeType","freeModule","moduleExports","addMapEntry","addSetEntry","arrayReduce","iteratee","accumulator","initAccum","isHostObject","mapToArray","overArg","transform","setToArray","uid","arrayProto","funcProto","objectProto","coreJsData","maskSrcKey","IE_PROTO","funcToString","objectToString","reIsNative","getPrototype","objectCreate","propertyIsEnumerable","nativeGetSymbols","getOwnPropertySymbols","nativeIsBuffer","nativeKeys","DataView","getNative","WeakMap","nativeCreate","dataViewCtorString","toSource","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","symbolProto","symbolValueOf","Hash","ListCache","MapCache","Stack","__data__","assignValue","objValue","eq","assocIndexOf","baseClone","isDeep","isFull","customizer","isArr","initCloneArray","copyArray","getTag","isFunc","cloneBuffer","isPrototype","initCloneObject","copyObject","getSymbols","copySymbols","baseAssign","cloneFunc","Ctor","cloneArrayBuffer","dataView","cloneDataView","typedArray","cloneTypedArray","cloneMap","cloneRegExp","cloneSet","initCloneByTag","stacked","keysFunc","symbolsFunc","arrayPush","baseGetAllKeys","getAllKeys","arrayEach","subValue","arrayBuffer","getMapData","baseIsNative","pairs","LARGE_ARRAY_SIZE","isIndex","ctorString","isArrayLike","isLength","inherited","isObjectLike","isArrayLikeObject","isArguments","baseTimes","skipIndexes","arrayLikeKeys","baseKeys","assertPath","normalizeStringPosix","_makeLong","safer","Safer","kStringMaxLength","binding","constants","MAX_LENGTH","MAX_STRING_LENGTH","nb","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","byte","utf8CheckExtraBytes","total","utf8CheckIncomplete","copyProps","SafeBuffer","rnds8","rng","byteToHex","_nodeId","_clockseq","_lastMSecs","_lastNSecs","clockseq","seedBytes","msecs","nsecs","dt","tl","tmh","hashfunc","generateUUID","namespace","unescape","stringToBytes","DNS","URL","getOutputLength","inputLength8","safeAdd","lsw","md5cmn","q","cnt","md5ff","md5gg","md5hh","md5ii","v35","length32","hexTab","md5ToHexEncodedArray","olda","oldb","oldc","oldd","wordsToMd5","length8","bytesToWords","rnds","z","ROTL","K","H","N","ceil","M","_i","_i2","W","_t","_t2","T","events_1","Is","boolean","stringArray","Touch","First","Last","forEachReverse","messages_1","RequestType","RequestType0","RequestType1","RequestType2","RequestType3","RequestType4","RequestType5","RequestType6","RequestType7","RequestType8","RequestType9","ResponseError","ErrorCodes","NotificationType","NotificationType0","NotificationType1","NotificationType2","NotificationType3","NotificationType4","NotificationType5","NotificationType6","NotificationType7","NotificationType8","NotificationType9","messageReader_1","MessageReader","StreamMessageReader","IPCMessageReader","SocketMessageReader","messageWriter_1","MessageWriter","StreamMessageWriter","IPCMessageWriter","SocketMessageWriter","cancellation_1","linkedMap_1","CancelNotification","ProgressNotification","Trace","TraceFormat","SetTraceNotification","LogTraceNotification","ConnectionErrors","ConnectionState","ProgressType","NullLogger","Off","Messages","Verbose","ConnectionError","_createMessageConnection","messageReader","messageWriter","logger","strategy","sequenceNumber","notificationSquenceNumber","unknownResponseSquenceNumber","starRequestHandler","starNotificationHandler","timer","tracer","requestHandlers","notificationHandlers","progressHandlers","messageQueue","responsePromises","requestTokens","trace","traceFormat","New","unhandledNotificationEmitter","unhandledProgressEmitter","disposeEmitter","createRequestQueueKey","cancelUndispatched","isListening","Listening","Closed","Disposed","closeHandler","triggerMessageQueue","isRequestMessage","requestMessage","resultOrError","startTime","jsonrpc","toJson","traceSendingResponse","replyError","logLSPMessage","traceReceivedRequest","requestHandler","tokenKey","handlerResult","numberOfParams","InternalError","replySuccess","MethodNotFound","handleRequest","isNotificationMessage","notificationHandler","traceReceivedNotification","handleNotification","isResponseMessage","responseMessage","responsePromise","timerStart","traceReceivedResponse","handleResponse","responseHandler","handleInvalidMessage","processMessageQueue","toCancel","queue","addMessageToQueue","lspMessage","isLSPMessage","throwIfClosedOrDisposed","undefinedToNull","param","computeMessageParams","sendNotification","messageParams","notificationMessage","traceSendingNotification","onNotification","onProgress","sendProgress","onUnhandledProgress","sendRequest","throwIfNotListening","traceSendingRequest","MessageWriteError","onRequest","_tracer","sendNotificationOrTraceOptions","_sendNotification","_traceFormat","onUnhandledNotification","listen","AlreadyListening","throwIfListening","verbose","ConnectionStrategy","createMessageConnection","reader","writer","isMessageWriter","DefaultSize","CR","MessageBuffer","toAppend","bufferLen","tryReadHeaders","header","nextStart","tryReadContent","numberOfBytes","onPartialMessage","AbstractMessageReader","partialMessageEmitter","asError","fireClose","firePartialMessage","_partialMessageTimeout","partialMessageTimeout","nextMessageLength","messageToken","partialMessageTimer","onData","headers","setPartialMessageTimer","clearPartialMessageTimer","waitingTime","eventEmitter","ContentLength","AbstractMessageWriter","errorCount","sending","doWriteMessage","ParseError","InvalidRequest","InvalidParams","serverErrorStart","serverErrorEnd","ServerNotInitialized","UnknownErrorCode","RequestCancelled","ContentModified","MessageReadError","AbstractMessageType","_method","_numberOfParams","path_1","os_1","crypto_1","net_1","generateRandomPipeName","randomSuffix","tmpdir","createClientPipeTransport","pipeName","connectResolve","connected","createServer","onConnected","createServerPipeTransport","createClientSocketTransport","createServerSocketTransport","vscode_jsonrpc_1","callHierarchy","st","Proposed","CallHierarchyPrepareRequest","CallHierarchyIncomingCallsRequest","CallHierarchyOutgoingCallsRequest","SemanticTokensRequest","SemanticTokensEditsRequest","SemanticTokensRangeRequest","SemanticTokenTypes","SemanticTokenModifiers","createProtocolConnection","ProtocolRequestType0","ProtocolRequestType","ProtocolNotificationType","ProtocolNotificationType0","DocumentColorRequest","resultType","ColorPresentationRequest","ConfigurationRequest","DeclarationRequest","FoldingRangeRequest","ImplementationRequest","protocol_implementation_1","protocol_typeDefinition_1","TypeDefinitionRequest","protocol_workspaceFolders_1","WorkspaceFoldersRequest","DidChangeWorkspaceFoldersNotification","protocol_configuration_1","protocol_colorProvider_1","protocol_foldingRange_1","protocol_declaration_1","protocol_selectionRange_1","SelectionRangeRequest","protocol_progress_1","DocumentFilter","DocumentSelector","PrepareRenameRequest","RenameRequest","DocumentOnTypeFormattingRequest","DocumentRangeFormattingRequest","DocumentFormattingRequest","DocumentLinkRequest","CodeLensRequest","WorkspaceSymbolRequest","CodeActionRequest","DocumentSymbolRequest","DocumentHighlightRequest","ReferencesRequest","DefinitionRequest","SignatureHelpRequest","HoverRequest","CompletionResolveRequest","CompletionRequest","WatchKind","WillSaveTextDocumentWaitUntilRequest","WillSaveTextDocumentNotification","DidSaveTextDocumentNotification","DidCloseTextDocumentNotification","DidChangeTextDocumentNotification","DidOpenTextDocumentNotification","TextDocumentSyncKind","MessageType","WorkDoneProgressOptions","FailureHandlingKind","ResourceOperationKind","WorkDoneProgress","WorkDoneProgressCreateRequest","WorkDoneProgressCancelNotification","RegistrationRequest","UnregistrationRequest","Create","Rename","Delete","Abort","Transactional","TextOnlyTransactional","Undo","StaticRegistrationOptions","hasId","TextDocumentRegistrationOptions","documentSelector","objectLiteral","workDoneProgress","hasWorkDoneProgress","InitializeRequest","InitializeError","unknownProtocolVersion","InitializedNotification","ShutdownRequest","ExitNotification","DidChangeConfigurationNotification","ShowMessageNotification","ShowMessageRequest","LogMessageNotification","TelemetryEventNotification","Full","Incremental","Manual","AfterDelay","FocusOut","DidChangeWatchedFilesNotification","Change","PublishDiagnosticsNotification","Invoked","TriggerCharacter","TriggerForIncompleteCompletions","ContentChange","CodeLensResolveRequest","DocumentLinkResolveRequest","ExecuteCommandRequest","ApplyWorkspaceEditRequest","LocationLink","TextDocumentEdit","CreateFile","RenameFile","DeleteFile","two","three","four","defined","startLine","startCharacter","endCharacter","del","textDocument","VersionedTextDocumentIdentifier","ignoreIfExists","ignoreIfNotExists","documentChanges","TextDocumentIdentifier","TextDocumentItem","MarkupKind","MarkupContent","InsertTextFormat","MarkedString","CodeActionContext","FormattingOptions","TextEditChangeImpl","WorkspaceChange","workspaceEdit","_textEditChanges","_workspaceEdit","textEditChange","getTextEditChange","textDocumentEdit","checkDocumentChanges","PlainText","Markdown","fromPlainText","plainText","commandOrEdit","TextDocument","mergeSort","leftIdx","rightIdx","FullTextDocument","applyEdits","sortedEdits","lastModifiedOffset","startOffset","_languageId","_version","_content","_lineOffsets","getLineOffsets","lineOffsets","isLineStart","lineOffset","nextLineOffset","extendStatics","_a","__extends","__proto__","__","_URI","_super"],"sourceRoot":""}